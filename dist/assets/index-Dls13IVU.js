var vJ=Object.defineProperty;var pk=t=>{throw TypeError(t)};var yJ=(t,e,r)=>e in t?vJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ze=(t,e,r)=>yJ(t,typeof e!="symbol"?e+"":e,r),oE=(t,e,r)=>e.has(t)||pk("Cannot "+r);var oe=(t,e,r)=>(oE(t,e,"read from private field"),r?r.call(t):e.get(t)),bt=(t,e,r)=>e.has(t)?pk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ze=(t,e,r,n)=>(oE(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),dn=(t,e,r)=>(oE(t,e,"access private method"),r);var Pg=(t,e,r,n)=>({set _(i){Ze(t,e,i,r)},get _(){return oe(t,e,n)}});function bJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var c$={exports:{}},Hb={},u$={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=Symbol.for("react.element"),wJ=Symbol.for("react.portal"),EJ=Symbol.for("react.fragment"),SJ=Symbol.for("react.strict_mode"),CJ=Symbol.for("react.profiler"),TJ=Symbol.for("react.provider"),BJ=Symbol.for("react.context"),_J=Symbol.for("react.forward_ref"),NJ=Symbol.for("react.suspense"),IJ=Symbol.for("react.memo"),PJ=Symbol.for("react.lazy"),mk=Symbol.iterator;function RJ(t){return t===null||typeof t!="object"?null:(t=mk&&t[mk]||t["@@iterator"],typeof t=="function"?t:null)}var d$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A$=Object.assign,f$={};function pf(t,e,r){this.props=t,this.context=e,this.refs=f$,this.updater=r||d$}pf.prototype.isReactComponent={};pf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function h$(){}h$.prototype=pf.prototype;function c2(t,e,r){this.props=t,this.context=e,this.refs=f$,this.updater=r||d$}var u2=c2.prototype=new h$;u2.constructor=c2;A$(u2,pf.prototype);u2.isPureReactComponent=!0;var gk=Array.isArray,p$=Object.prototype.hasOwnProperty,d2={current:null},m$={key:!0,ref:!0,__self:!0,__source:!0};function g$(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)p$.call(e,n)&&!m$.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:tg,type:t,key:s,ref:a,props:i,_owner:d2.current}}function kJ(t,e){return{$$typeof:tg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function A2(t){return typeof t=="object"&&t!==null&&t.$$typeof===tg}function LJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var xk=/\/+/g;function lE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LJ(""+t.key):e.toString(36)}function Bx(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case tg:case wJ:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+lE(a,0):n,gk(i)?(r="",t!=null&&(r=t.replace(xk,"$&/")+"/"),Bx(i,e,r,"",function(u){return u})):i!=null&&(A2(i)&&(i=kJ(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(xk,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",gk(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+lE(s,o);a+=Bx(s,e,r,l,i)}else if(l=RJ(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+lE(s,o++),a+=Bx(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function kg(t,e,r){if(t==null)return t;var n=[],i=0;return Bx(t,n,"","",function(s){return e.call(r,s,i++)}),n}function jJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mn={current:null},_x={transition:null},MJ={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:_x,ReactCurrentOwner:d2};function x$(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:kg,forEach:function(t,e,r){kg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return kg(t,function(){e++}),e},toArray:function(t){return kg(t,function(e){return e})||[]},only:function(t){if(!A2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=pf;ut.Fragment=EJ;ut.Profiler=CJ;ut.PureComponent=c2;ut.StrictMode=SJ;ut.Suspense=NJ;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MJ;ut.act=x$;ut.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=A$({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=d2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)p$.call(e,l)&&!m$.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:tg,type:t.type,key:i,ref:s,props:n,_owner:a}};ut.createContext=function(t){return t={$$typeof:BJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TJ,_context:t},t.Consumer=t};ut.createElement=g$;ut.createFactory=function(t){var e=g$.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:_J,render:t}};ut.isValidElement=A2;ut.lazy=function(t){return{$$typeof:PJ,_payload:{_status:-1,_result:t},_init:jJ}};ut.memo=function(t,e){return{$$typeof:IJ,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=_x.transition;_x.transition={};try{t()}finally{_x.transition=e}};ut.unstable_act=x$;ut.useCallback=function(t,e){return Mn.current.useCallback(t,e)};ut.useContext=function(t){return Mn.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return Mn.current.useDeferredValue(t)};ut.useEffect=function(t,e){return Mn.current.useEffect(t,e)};ut.useId=function(){return Mn.current.useId()};ut.useImperativeHandle=function(t,e,r){return Mn.current.useImperativeHandle(t,e,r)};ut.useInsertionEffect=function(t,e){return Mn.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return Mn.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return Mn.current.useMemo(t,e)};ut.useReducer=function(t,e,r){return Mn.current.useReducer(t,e,r)};ut.useRef=function(t){return Mn.current.useRef(t)};ut.useState=function(t){return Mn.current.useState(t)};ut.useSyncExternalStore=function(t,e,r){return Mn.current.useSyncExternalStore(t,e,r)};ut.useTransition=function(){return Mn.current.useTransition()};ut.version="18.3.1";u$.exports=ut;var E=u$.exports;const Q=$t(E),f2=bJ({__proto__:null,default:Q},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DJ=E,OJ=Symbol.for("react.element"),FJ=Symbol.for("react.fragment"),UJ=Object.prototype.hasOwnProperty,$J=DJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QJ={key:!0,ref:!0,__self:!0,__source:!0};function v$(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)UJ.call(e,n)&&!QJ.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:OJ,type:t,key:s,ref:a,props:i,_owner:$J.current}}Hb.Fragment=FJ;Hb.jsx=v$;Hb.jsxs=v$;c$.exports=Hb;var c=c$.exports,y$={exports:{}},Ci={},b$={exports:{}},w$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,D){var F=j.length;j.push(D);e:for(;0<F;){var $=F-1>>>1,U=j[$];if(0<i(U,D))j[$]=D,j[F]=U,F=$;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var D=j[0],F=j.pop();if(F!==D){j[0]=F;e:for(var $=0,U=j.length,K=U>>>1;$<K;){var V=2*($+1)-1,q=j[V],H=V+1,z=j[H];if(0>i(q,F))H<U&&0>i(z,q)?(j[$]=z,j[H]=F,$=H):(j[$]=q,j[V]=F,$=V);else if(H<U&&0>i(z,F))j[$]=z,j[H]=F,$=H;else break e}}return D}function i(j,D){var F=j.sortIndex-D.sortIndex;return F!==0?F:j.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,A=null,f=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=j)n(u),D.sortIndex=D.expirationTime,e(l,D);else break;D=r(u)}}function w(j){if(p=!1,y(j),!m)if(r(l)!==null)m=!0,k(b);else{var D=r(u);D!==null&&O(w,D.startTime-j)}}function b(j,D){m=!1,p&&(p=!1,x(T),T=-1),h=!0;var F=f;try{for(y(D),A=r(l);A!==null&&(!(A.expirationTime>D)||j&&!I());){var $=A.callback;if(typeof $=="function"){A.callback=null,f=A.priorityLevel;var U=$(A.expirationTime<=D);D=t.unstable_now(),typeof U=="function"?A.callback=U:A===r(l)&&n(l),y(D)}else n(l);A=r(l)}if(A!==null)var K=!0;else{var V=r(u);V!==null&&O(w,V.startTime-D),K=!1}return K}finally{A=null,f=F,h=!1}}var S=!1,C=null,T=-1,B=5,_=-1;function I(){return!(t.unstable_now()-_<B)}function L(){if(C!==null){var j=t.unstable_now();_=j;var D=!0;try{D=C(!0,j)}finally{D?N():(S=!1,C=null)}}else S=!1}var N;if(typeof v=="function")N=function(){v(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,M=R.port2;R.port1.onmessage=L,N=function(){M.postMessage(null)}}else N=function(){g(L,0)};function k(j){C=j,S||(S=!0,N())}function O(j,D){T=g(function(){j(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,k(b))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var F=f;f=D;try{return j()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,D){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=f;f=j;try{return D()}finally{f=F}},t.unstable_scheduleCallback=function(j,D,F){var $=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,j){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=F+U,j={id:d++,callback:D,priorityLevel:j,startTime:F,expirationTime:U,sortIndex:-1},F>$?(j.sortIndex=F,e(u,j),r(l)===null&&j===r(u)&&(p?(x(T),T=-1):p=!0,O(w,F-$))):(j.sortIndex=U,e(l,j),m||h||(m=!0,k(b))),j},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(j){var D=f;return function(){var F=f;f=D;try{return j.apply(this,arguments)}finally{f=F}}}})(w$);b$.exports=w$;var HJ=b$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KJ=E,wi=HJ;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E$=new Set,Sp={};function Fu(t,e){EA(t,e),EA(t+"Capture",e)}function EA(t,e){for(Sp[t]=e,t=0;t<e.length;t++)E$.add(e[t])}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qC=Object.prototype.hasOwnProperty,VJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vk={},yk={};function GJ(t){return qC.call(yk,t)?!0:qC.call(vk,t)?!1:VJ.test(t)?yk[t]=!0:(vk[t]=!0,!1)}function zJ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WJ(t,e,r,n){if(e===null||typeof e>"u"||zJ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new Dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new Dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new Dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new Dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new Dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new Dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new Dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new Dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new Dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var h2=/[\-:]([a-z])/g;function p2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(h2,p2);cn[e]=new Dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(h2,p2);cn[e]=new Dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(h2,p2);cn[e]=new Dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function m2(t,e,r,n){var i=cn.hasOwnProperty(e)?cn[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WJ(e,r,i,n)&&(r=null),n||i===null?GJ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var _o=KJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lg=Symbol.for("react.element"),wd=Symbol.for("react.portal"),Ed=Symbol.for("react.fragment"),g2=Symbol.for("react.strict_mode"),XC=Symbol.for("react.profiler"),S$=Symbol.for("react.provider"),C$=Symbol.for("react.context"),x2=Symbol.for("react.forward_ref"),ZC=Symbol.for("react.suspense"),JC=Symbol.for("react.suspense_list"),v2=Symbol.for("react.memo"),el=Symbol.for("react.lazy"),T$=Symbol.for("react.offscreen"),bk=Symbol.iterator;function zf(t){return t===null||typeof t!="object"?null:(t=bk&&t[bk]||t["@@iterator"],typeof t=="function"?t:null)}var cr=Object.assign,cE;function Bh(t){if(cE===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);cE=e&&e[1]||""}return`
`+cE+t}var uE=!1;function dE(t,e){if(!t||uE)return"";uE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{uE=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Bh(t):""}function YJ(t){switch(t.tag){case 5:return Bh(t.type);case 16:return Bh("Lazy");case 13:return Bh("Suspense");case 19:return Bh("SuspenseList");case 0:case 2:case 15:return t=dE(t.type,!1),t;case 11:return t=dE(t.type.render,!1),t;case 1:return t=dE(t.type,!0),t;default:return""}}function eT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ed:return"Fragment";case wd:return"Portal";case XC:return"Profiler";case g2:return"StrictMode";case ZC:return"Suspense";case JC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C$:return(t.displayName||"Context")+".Consumer";case S$:return(t._context.displayName||"Context")+".Provider";case x2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case v2:return e=t.displayName||null,e!==null?e:eT(t.type)||"Memo";case el:e=t._payload,t=t._init;try{return eT(t(e))}catch{}}return null}function qJ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eT(e);case 8:return e===g2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XJ(t){var e=B$(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jg(t){t._valueTracker||(t._valueTracker=XJ(t))}function _$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=B$(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function xv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tT(t,e){var r=e.checked;return cr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function wk(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Wl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function N$(t,e){e=e.checked,e!=null&&m2(t,"checked",e,!1)}function rT(t,e){N$(t,e);var r=Wl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nT(t,e.type,r):e.hasOwnProperty("defaultValue")&&nT(t,e.type,Wl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ek(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function nT(t,e,r){(e!=="number"||xv(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var _h=Array.isArray;function Ud(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Wl(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function iT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return cr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sk(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(he(92));if(_h(r)){if(1<r.length)throw Error(he(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Wl(r)}}function I$(t,e){var r=Wl(e.value),n=Wl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ck(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mg,R$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mg=Mg||document.createElement("div"),Mg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cp(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZJ=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(t){ZJ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yh[e]=Yh[t]})});function k$(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Yh.hasOwnProperty(t)&&Yh[t]?(""+e).trim():e+"px"}function L$(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=k$(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var JJ=cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aT(t,e){if(e){if(JJ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function oT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lT=null;function y2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cT=null,$d=null,Qd=null;function Tk(t){if(t=ig(t)){if(typeof cT!="function")throw Error(he(280));var e=t.stateNode;e&&(e=Wb(e),cT(t.stateNode,t.type,e))}}function j$(t){$d?Qd?Qd.push(t):Qd=[t]:$d=t}function M$(){if($d){var t=$d,e=Qd;if(Qd=$d=null,Tk(t),e)for(t=0;t<e.length;t++)Tk(e[t])}}function D$(t,e){return t(e)}function O$(){}var AE=!1;function F$(t,e,r){if(AE)return t(e,r);AE=!0;try{return D$(t,e,r)}finally{AE=!1,($d!==null||Qd!==null)&&(O$(),M$())}}function Tp(t,e){var r=t.stateNode;if(r===null)return null;var n=Wb(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(he(231,e,typeof r));return r}var uT=!1;if(co)try{var Wf={};Object.defineProperty(Wf,"passive",{get:function(){uT=!0}}),window.addEventListener("test",Wf,Wf),window.removeEventListener("test",Wf,Wf)}catch{uT=!1}function eee(t,e,r,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var qh=!1,vv=null,yv=!1,dT=null,tee={onError:function(t){qh=!0,vv=t}};function ree(t,e,r,n,i,s,a,o,l){qh=!1,vv=null,eee.apply(tee,arguments)}function nee(t,e,r,n,i,s,a,o,l){if(ree.apply(this,arguments),qh){if(qh){var u=vv;qh=!1,vv=null}else throw Error(he(198));yv||(yv=!0,dT=u)}}function Uu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function U$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bk(t){if(Uu(t)!==t)throw Error(he(188))}function iee(t){var e=t.alternate;if(!e){if(e=Uu(t),e===null)throw Error(he(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Bk(i),t;if(s===n)return Bk(i),e;s=s.sibling}throw Error(he(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(he(189))}}if(r.alternate!==n)throw Error(he(190))}if(r.tag!==3)throw Error(he(188));return r.stateNode.current===r?t:e}function $$(t){return t=iee(t),t!==null?Q$(t):null}function Q$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q$(t);if(e!==null)return e;t=t.sibling}return null}var H$=wi.unstable_scheduleCallback,_k=wi.unstable_cancelCallback,see=wi.unstable_shouldYield,aee=wi.unstable_requestPaint,xr=wi.unstable_now,oee=wi.unstable_getCurrentPriorityLevel,b2=wi.unstable_ImmediatePriority,K$=wi.unstable_UserBlockingPriority,bv=wi.unstable_NormalPriority,lee=wi.unstable_LowPriority,V$=wi.unstable_IdlePriority,Kb=null,ca=null;function cee(t){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(Kb,t,void 0,(t.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:Aee,uee=Math.log,dee=Math.LN2;function Aee(t){return t>>>=0,t===0?32:31-(uee(t)/dee|0)|0}var Dg=64,Og=4194304;function Nh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wv(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Nh(o):(s&=a,s!==0&&(n=Nh(s)))}else a=r&~i,a!==0?n=Nh(a):s!==0&&(n=Nh(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-bs(e),i=1<<r,n|=t[r],e&=~i;return n}function fee(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hee(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-bs(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=fee(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function AT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G$(){var t=Dg;return Dg<<=1,!(Dg&4194240)&&(Dg=64),t}function fE(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rg(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bs(e),t[e]=r}function pee(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-bs(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function w2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-bs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var It=0;function z$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W$,E2,Y$,q$,X$,fT=!1,Fg=[],Pl=null,Rl=null,kl=null,Bp=new Map,_p=new Map,ol=[],mee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nk(t,e){switch(t){case"focusin":case"focusout":Pl=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":kl=null;break;case"pointerover":case"pointerout":Bp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(e.pointerId)}}function Yf(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ig(e),e!==null&&E2(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gee(t,e,r,n,i){switch(e){case"focusin":return Pl=Yf(Pl,t,e,r,n,i),!0;case"dragenter":return Rl=Yf(Rl,t,e,r,n,i),!0;case"mouseover":return kl=Yf(kl,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Bp.set(s,Yf(Bp.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,_p.set(s,Yf(_p.get(s)||null,t,e,r,n,i)),!0}return!1}function Z$(t){var e=Dc(t.target);if(e!==null){var r=Uu(e);if(r!==null){if(e=r.tag,e===13){if(e=U$(r),e!==null){t.blockedOn=e,X$(t.priority,function(){Y$(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=hT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);lT=n,r.target.dispatchEvent(n),lT=null}else return e=ig(r),e!==null&&E2(e),t.blockedOn=r,!1;e.shift()}return!0}function Ik(t,e,r){Nx(t)&&r.delete(e)}function xee(){fT=!1,Pl!==null&&Nx(Pl)&&(Pl=null),Rl!==null&&Nx(Rl)&&(Rl=null),kl!==null&&Nx(kl)&&(kl=null),Bp.forEach(Ik),_p.forEach(Ik)}function qf(t,e){t.blockedOn===e&&(t.blockedOn=null,fT||(fT=!0,wi.unstable_scheduleCallback(wi.unstable_NormalPriority,xee)))}function Np(t){function e(i){return qf(i,t)}if(0<Fg.length){qf(Fg[0],t);for(var r=1;r<Fg.length;r++){var n=Fg[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Pl!==null&&qf(Pl,t),Rl!==null&&qf(Rl,t),kl!==null&&qf(kl,t),Bp.forEach(e),_p.forEach(e),r=0;r<ol.length;r++)n=ol[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ol.length&&(r=ol[0],r.blockedOn===null);)Z$(r),r.blockedOn===null&&ol.shift()}var Hd=_o.ReactCurrentBatchConfig,Ev=!0;function vee(t,e,r,n){var i=It,s=Hd.transition;Hd.transition=null;try{It=1,S2(t,e,r,n)}finally{It=i,Hd.transition=s}}function yee(t,e,r,n){var i=It,s=Hd.transition;Hd.transition=null;try{It=4,S2(t,e,r,n)}finally{It=i,Hd.transition=s}}function S2(t,e,r,n){if(Ev){var i=hT(t,e,r,n);if(i===null)EE(t,e,n,Sv,r),Nk(t,n);else if(gee(i,t,e,r,n))n.stopPropagation();else if(Nk(t,n),e&4&&-1<mee.indexOf(t)){for(;i!==null;){var s=ig(i);if(s!==null&&W$(s),s=hT(t,e,r,n),s===null&&EE(t,e,n,Sv,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else EE(t,e,n,null,r)}}var Sv=null;function hT(t,e,r,n){if(Sv=null,t=y2(n),t=Dc(t),t!==null)if(e=Uu(t),e===null)t=null;else if(r=e.tag,r===13){if(t=U$(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sv=t,null}function J$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oee()){case b2:return 1;case K$:return 4;case bv:case lee:return 16;case V$:return 536870912;default:return 16}default:return 16}}var pl=null,C2=null,Ix=null;function eQ(){if(Ix)return Ix;var t,e=C2,r=e.length,n,i="value"in pl?pl.value:pl.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Ix=i.slice(t,1<n?1-n:void 0)}function Px(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ug(){return!0}function Pk(){return!1}function Ti(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ug:Pk,this.isPropagationStopped=Pk,this}return cr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ug)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ug)},persist:function(){},isPersistent:Ug}),e}var mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T2=Ti(mf),ng=cr({},mf,{view:0,detail:0}),bee=Ti(ng),hE,pE,Xf,Vb=cr({},ng,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xf&&(Xf&&t.type==="mousemove"?(hE=t.screenX-Xf.screenX,pE=t.screenY-Xf.screenY):pE=hE=0,Xf=t),hE)},movementY:function(t){return"movementY"in t?t.movementY:pE}}),Rk=Ti(Vb),wee=cr({},Vb,{dataTransfer:0}),Eee=Ti(wee),See=cr({},ng,{relatedTarget:0}),mE=Ti(See),Cee=cr({},mf,{animationName:0,elapsedTime:0,pseudoElement:0}),Tee=Ti(Cee),Bee=cr({},mf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_ee=Ti(Bee),Nee=cr({},mf,{data:0}),kk=Ti(Nee),Iee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ree={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ree[t])?!!e[t]:!1}function B2(){return kee}var Lee=cr({},ng,{key:function(t){if(t.key){var e=Iee[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Px(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pee[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B2,charCode:function(t){return t.type==="keypress"?Px(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Px(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jee=Ti(Lee),Mee=cr({},Vb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lk=Ti(Mee),Dee=cr({},ng,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B2}),Oee=Ti(Dee),Fee=cr({},mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uee=Ti(Fee),$ee=cr({},Vb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qee=Ti($ee),Hee=[9,13,27,32],_2=co&&"CompositionEvent"in window,Xh=null;co&&"documentMode"in document&&(Xh=document.documentMode);var Kee=co&&"TextEvent"in window&&!Xh,tQ=co&&(!_2||Xh&&8<Xh&&11>=Xh),jk=" ",Mk=!1;function rQ(t,e){switch(t){case"keyup":return Hee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nQ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sd=!1;function Vee(t,e){switch(t){case"compositionend":return nQ(e);case"keypress":return e.which!==32?null:(Mk=!0,jk);case"textInput":return t=e.data,t===jk&&Mk?null:t;default:return null}}function Gee(t,e){if(Sd)return t==="compositionend"||!_2&&rQ(t,e)?(t=eQ(),Ix=C2=pl=null,Sd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tQ&&e.locale!=="ko"?null:e.data;default:return null}}var zee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zee[t.type]:e==="textarea"}function iQ(t,e,r,n){j$(n),e=Cv(e,"onChange"),0<e.length&&(r=new T2("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Zh=null,Ip=null;function Wee(t){pQ(t,0)}function Gb(t){var e=Bd(t);if(_$(e))return t}function Yee(t,e){if(t==="change")return e}var sQ=!1;if(co){var gE;if(co){var xE="oninput"in document;if(!xE){var Ok=document.createElement("div");Ok.setAttribute("oninput","return;"),xE=typeof Ok.oninput=="function"}gE=xE}else gE=!1;sQ=gE&&(!document.documentMode||9<document.documentMode)}function Fk(){Zh&&(Zh.detachEvent("onpropertychange",aQ),Ip=Zh=null)}function aQ(t){if(t.propertyName==="value"&&Gb(Ip)){var e=[];iQ(e,Ip,t,y2(t)),F$(Wee,e)}}function qee(t,e,r){t==="focusin"?(Fk(),Zh=e,Ip=r,Zh.attachEvent("onpropertychange",aQ)):t==="focusout"&&Fk()}function Xee(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gb(Ip)}function Zee(t,e){if(t==="click")return Gb(e)}function Jee(t,e){if(t==="input"||t==="change")return Gb(e)}function ete(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _s=typeof Object.is=="function"?Object.is:ete;function Pp(t,e){if(_s(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!qC.call(e,i)||!_s(t[i],e[i]))return!1}return!0}function Uk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $k(t,e){var r=Uk(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Uk(r)}}function oQ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oQ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lQ(){for(var t=window,e=xv();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=xv(t.document)}return e}function N2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tte(t){var e=lQ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&oQ(r.ownerDocument.documentElement,r)){if(n!==null&&N2(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=$k(r,s);var a=$k(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rte=co&&"documentMode"in document&&11>=document.documentMode,Cd=null,pT=null,Jh=null,mT=!1;function Qk(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mT||Cd==null||Cd!==xv(n)||(n=Cd,"selectionStart"in n&&N2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jh&&Pp(Jh,n)||(Jh=n,n=Cv(pT,"onSelect"),0<n.length&&(e=new T2("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Cd)))}function $g(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Td={animationend:$g("Animation","AnimationEnd"),animationiteration:$g("Animation","AnimationIteration"),animationstart:$g("Animation","AnimationStart"),transitionend:$g("Transition","TransitionEnd")},vE={},cQ={};co&&(cQ=document.createElement("div").style,"AnimationEvent"in window||(delete Td.animationend.animation,delete Td.animationiteration.animation,delete Td.animationstart.animation),"TransitionEvent"in window||delete Td.transitionend.transition);function zb(t){if(vE[t])return vE[t];if(!Td[t])return t;var e=Td[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cQ)return vE[t]=e[r];return t}var uQ=zb("animationend"),dQ=zb("animationiteration"),AQ=zb("animationstart"),fQ=zb("transitionend"),hQ=new Map,Hk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sc(t,e){hQ.set(t,e),Fu(e,[t])}for(var yE=0;yE<Hk.length;yE++){var bE=Hk[yE],nte=bE.toLowerCase(),ite=bE[0].toUpperCase()+bE.slice(1);sc(nte,"on"+ite)}sc(uQ,"onAnimationEnd");sc(dQ,"onAnimationIteration");sc(AQ,"onAnimationStart");sc("dblclick","onDoubleClick");sc("focusin","onFocus");sc("focusout","onBlur");sc(fQ,"onTransitionEnd");EA("onMouseEnter",["mouseout","mouseover"]);EA("onMouseLeave",["mouseout","mouseover"]);EA("onPointerEnter",["pointerout","pointerover"]);EA("onPointerLeave",["pointerout","pointerover"]);Fu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ste=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ih));function Kk(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,nee(n,e,void 0,t),t.currentTarget=null}function pQ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Kk(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Kk(i,o,u),s=l}}}if(yv)throw t=dT,yv=!1,dT=null,t}function zt(t,e){var r=e[bT];r===void 0&&(r=e[bT]=new Set);var n=t+"__bubble";r.has(n)||(mQ(e,t,2,!1),r.add(n))}function wE(t,e,r){var n=0;e&&(n|=4),mQ(r,t,n,e)}var Qg="_reactListening"+Math.random().toString(36).slice(2);function Rp(t){if(!t[Qg]){t[Qg]=!0,E$.forEach(function(r){r!=="selectionchange"&&(ste.has(r)||wE(r,!1,t),wE(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qg]||(e[Qg]=!0,wE("selectionchange",!1,e))}}function mQ(t,e,r,n){switch(J$(e)){case 1:var i=vee;break;case 4:i=yee;break;default:i=S2}r=i.bind(null,e,r,t),i=void 0,!uT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function EE(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Dc(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}F$(function(){var u=s,d=y2(r),A=[];e:{var f=hQ.get(t);if(f!==void 0){var h=T2,m=t;switch(t){case"keypress":if(Px(r)===0)break e;case"keydown":case"keyup":h=jee;break;case"focusin":m="focus",h=mE;break;case"focusout":m="blur",h=mE;break;case"beforeblur":case"afterblur":h=mE;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Rk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Eee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Oee;break;case uQ:case dQ:case AQ:h=Tee;break;case fQ:h=Uee;break;case"scroll":h=bee;break;case"wheel":h=Qee;break;case"copy":case"cut":case"paste":h=_ee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Lk}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?f!==null?f+"Capture":null:f;p=[];for(var v=u,y;v!==null;){y=v;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,x!==null&&(w=Tp(v,x),w!=null&&p.push(kp(v,w,y)))),g)break;v=v.return}0<p.length&&(f=new h(f,m,null,r,d),A.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&r!==lT&&(m=r.relatedTarget||r.fromElement)&&(Dc(m)||m[uo]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?Dc(m):null,m!==null&&(g=Uu(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=Rk,w="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(p=Lk,w="onPointerLeave",x="onPointerEnter",v="pointer"),g=h==null?f:Bd(h),y=m==null?f:Bd(m),f=new p(w,v+"leave",h,r,d),f.target=g,f.relatedTarget=y,w=null,Dc(d)===u&&(p=new p(x,v+"enter",m,r,d),p.target=y,p.relatedTarget=g,w=p),g=w,h&&m)t:{for(p=h,x=m,v=0,y=p;y;y=qu(y))v++;for(y=0,w=x;w;w=qu(w))y++;for(;0<v-y;)p=qu(p),v--;for(;0<y-v;)x=qu(x),y--;for(;v--;){if(p===x||x!==null&&p===x.alternate)break t;p=qu(p),x=qu(x)}p=null}else p=null;h!==null&&Vk(A,f,h,p,!1),m!==null&&g!==null&&Vk(A,g,m,p,!0)}}e:{if(f=u?Bd(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=Yee;else if(Dk(f))if(sQ)b=Jee;else{b=Xee;var S=qee}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Zee);if(b&&(b=b(t,u))){iQ(A,b,r,d);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&nT(f,"number",f.value)}switch(S=u?Bd(u):window,t){case"focusin":(Dk(S)||S.contentEditable==="true")&&(Cd=S,pT=u,Jh=null);break;case"focusout":Jh=pT=Cd=null;break;case"mousedown":mT=!0;break;case"contextmenu":case"mouseup":case"dragend":mT=!1,Qk(A,r,d);break;case"selectionchange":if(rte)break;case"keydown":case"keyup":Qk(A,r,d)}var C;if(_2)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Sd?rQ(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(tQ&&r.locale!=="ko"&&(Sd||T!=="onCompositionStart"?T==="onCompositionEnd"&&Sd&&(C=eQ()):(pl=d,C2="value"in pl?pl.value:pl.textContent,Sd=!0)),S=Cv(u,T),0<S.length&&(T=new kk(T,t,null,r,d),A.push({event:T,listeners:S}),C?T.data=C:(C=nQ(r),C!==null&&(T.data=C)))),(C=Kee?Vee(t,r):Gee(t,r))&&(u=Cv(u,"onBeforeInput"),0<u.length&&(d=new kk("onBeforeInput","beforeinput",null,r,d),A.push({event:d,listeners:u}),d.data=C))}pQ(A,e)})}function kp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Cv(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tp(t,r),s!=null&&n.unshift(kp(t,s,i)),s=Tp(t,e),s!=null&&n.push(kp(t,s,i))),t=t.return}return n}function qu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vk(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=Tp(r,s),l!=null&&a.unshift(kp(r,l,o))):i||(l=Tp(r,s),l!=null&&a.push(kp(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var ate=/\r\n?/g,ote=/\u0000|\uFFFD/g;function Gk(t){return(typeof t=="string"?t:""+t).replace(ate,`
`).replace(ote,"")}function Hg(t,e,r){if(e=Gk(e),Gk(t)!==e&&r)throw Error(he(425))}function Tv(){}var gT=null,xT=null;function vT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yT=typeof setTimeout=="function"?setTimeout:void 0,lte=typeof clearTimeout=="function"?clearTimeout:void 0,zk=typeof Promise=="function"?Promise:void 0,cte=typeof queueMicrotask=="function"?queueMicrotask:typeof zk<"u"?function(t){return zk.resolve(null).then(t).catch(ute)}:yT;function ute(t){setTimeout(function(){throw t})}function SE(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Np(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Np(e)}function Ll(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var gf=Math.random().toString(36).slice(2),ta="__reactFiber$"+gf,Lp="__reactProps$"+gf,uo="__reactContainer$"+gf,bT="__reactEvents$"+gf,dte="__reactListeners$"+gf,Ate="__reactHandles$"+gf;function Dc(t){var e=t[ta];if(e)return e;for(var r=t.parentNode;r;){if(e=r[uo]||r[ta]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Wk(t);t!==null;){if(r=t[ta])return r;t=Wk(t)}return e}t=r,r=t.parentNode}return null}function ig(t){return t=t[ta]||t[uo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function Wb(t){return t[Lp]||null}var wT=[],_d=-1;function ac(t){return{current:t}}function Zt(t){0>_d||(t.current=wT[_d],wT[_d]=null,_d--)}function Kt(t,e){_d++,wT[_d]=t.current,t.current=e}var Yl={},En=ac(Yl),Yn=ac(!1),pu=Yl;function SA(t,e){var r=t.type.contextTypes;if(!r)return Yl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qn(t){return t=t.childContextTypes,t!=null}function Bv(){Zt(Yn),Zt(En)}function Yk(t,e,r){if(En.current!==Yl)throw Error(he(168));Kt(En,e),Kt(Yn,r)}function gQ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(he(108,qJ(t)||"Unknown",i));return cr({},r,n)}function _v(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yl,pu=En.current,Kt(En,t),Kt(Yn,Yn.current),!0}function qk(t,e,r){var n=t.stateNode;if(!n)throw Error(he(169));r?(t=gQ(t,e,pu),n.__reactInternalMemoizedMergedChildContext=t,Zt(Yn),Zt(En),Kt(En,t)):Zt(Yn),Kt(Yn,r)}var Wa=null,Yb=!1,CE=!1;function xQ(t){Wa===null?Wa=[t]:Wa.push(t)}function fte(t){Yb=!0,xQ(t)}function oc(){if(!CE&&Wa!==null){CE=!0;var t=0,e=It;try{var r=Wa;for(It=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Wa=null,Yb=!1}catch(i){throw Wa!==null&&(Wa=Wa.slice(t+1)),H$(b2,oc),i}finally{It=e,CE=!1}}return null}var Nd=[],Id=0,Nv=null,Iv=0,ki=[],Li=0,mu=null,Za=1,Ja="";function Bc(t,e){Nd[Id++]=Iv,Nd[Id++]=Nv,Nv=t,Iv=e}function vQ(t,e,r){ki[Li++]=Za,ki[Li++]=Ja,ki[Li++]=mu,mu=t;var n=Za;t=Ja;var i=32-bs(n)-1;n&=~(1<<i),r+=1;var s=32-bs(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Za=1<<32-bs(e)+i|r<<i|n,Ja=s+t}else Za=1<<s|r<<i|n,Ja=t}function I2(t){t.return!==null&&(Bc(t,1),vQ(t,1,0))}function P2(t){for(;t===Nv;)Nv=Nd[--Id],Nd[Id]=null,Iv=Nd[--Id],Nd[Id]=null;for(;t===mu;)mu=ki[--Li],ki[Li]=null,Ja=ki[--Li],ki[Li]=null,Za=ki[--Li],ki[Li]=null}var xi=null,hi=null,tr=!1,ms=null;function yQ(t,e){var r=Oi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Xk(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xi=t,hi=Ll(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xi=t,hi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=mu!==null?{id:Za,overflow:Ja}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Oi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,xi=t,hi=null,!0):!1;default:return!1}}function ET(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ST(t){if(tr){var e=hi;if(e){var r=e;if(!Xk(t,e)){if(ET(t))throw Error(he(418));e=Ll(r.nextSibling);var n=xi;e&&Xk(t,e)?yQ(n,r):(t.flags=t.flags&-4097|2,tr=!1,xi=t)}}else{if(ET(t))throw Error(he(418));t.flags=t.flags&-4097|2,tr=!1,xi=t}}}function Zk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xi=t}function Kg(t){if(t!==xi)return!1;if(!tr)return Zk(t),tr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vT(t.type,t.memoizedProps)),e&&(e=hi)){if(ET(t))throw bQ(),Error(he(418));for(;e;)yQ(t,e),e=Ll(e.nextSibling)}if(Zk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){hi=Ll(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}hi=null}}else hi=xi?Ll(t.stateNode.nextSibling):null;return!0}function bQ(){for(var t=hi;t;)t=Ll(t.nextSibling)}function CA(){hi=xi=null,tr=!1}function R2(t){ms===null?ms=[t]:ms.push(t)}var hte=_o.ReactCurrentBatchConfig;function Zf(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(he(309));var n=r.stateNode}if(!n)throw Error(he(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(he(284));if(!r._owner)throw Error(he(290,t))}return t}function Vg(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jk(t){var e=t._init;return e(t._payload)}function wQ(t){function e(x,v){if(t){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function r(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function n(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function i(x,v){return x=Ol(x,v),x.index=0,x.sibling=null,x}function s(x,v,y){return x.index=y,t?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,v,y,w){return v===null||v.tag!==6?(v=RE(y,x.mode,w),v.return=x,v):(v=i(v,y),v.return=x,v)}function l(x,v,y,w){var b=y.type;return b===Ed?d(x,v,y.props.children,w,y.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===el&&Jk(b)===v.type)?(w=i(v,y.props),w.ref=Zf(x,v,y),w.return=x,w):(w=Ox(y.type,y.key,y.props,null,x.mode,w),w.ref=Zf(x,v,y),w.return=x,w)}function u(x,v,y,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=kE(y,x.mode,w),v.return=x,v):(v=i(v,y.children||[]),v.return=x,v)}function d(x,v,y,w,b){return v===null||v.tag!==7?(v=nu(y,x.mode,w,b),v.return=x,v):(v=i(v,y),v.return=x,v)}function A(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=RE(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lg:return y=Ox(v.type,v.key,v.props,null,x.mode,y),y.ref=Zf(x,null,v),y.return=x,y;case wd:return v=kE(v,x.mode,y),v.return=x,v;case el:var w=v._init;return A(x,w(v._payload),y)}if(_h(v)||zf(v))return v=nu(v,x.mode,y,null),v.return=x,v;Vg(x,v)}return null}function f(x,v,y,w){var b=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:o(x,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lg:return y.key===b?l(x,v,y,w):null;case wd:return y.key===b?u(x,v,y,w):null;case el:return b=y._init,f(x,v,b(y._payload),w)}if(_h(y)||zf(y))return b!==null?null:d(x,v,y,w,null);Vg(x,y)}return null}function h(x,v,y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(y)||null,o(v,x,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lg:return x=x.get(w.key===null?y:w.key)||null,l(v,x,w,b);case wd:return x=x.get(w.key===null?y:w.key)||null,u(v,x,w,b);case el:var S=w._init;return h(x,v,y,S(w._payload),b)}if(_h(w)||zf(w))return x=x.get(y)||null,d(v,x,w,b,null);Vg(v,w)}return null}function m(x,v,y,w){for(var b=null,S=null,C=v,T=v=0,B=null;C!==null&&T<y.length;T++){C.index>T?(B=C,C=null):B=C.sibling;var _=f(x,C,y[T],w);if(_===null){C===null&&(C=B);break}t&&C&&_.alternate===null&&e(x,C),v=s(_,v,T),S===null?b=_:S.sibling=_,S=_,C=B}if(T===y.length)return r(x,C),tr&&Bc(x,T),b;if(C===null){for(;T<y.length;T++)C=A(x,y[T],w),C!==null&&(v=s(C,v,T),S===null?b=C:S.sibling=C,S=C);return tr&&Bc(x,T),b}for(C=n(x,C);T<y.length;T++)B=h(C,x,T,y[T],w),B!==null&&(t&&B.alternate!==null&&C.delete(B.key===null?T:B.key),v=s(B,v,T),S===null?b=B:S.sibling=B,S=B);return t&&C.forEach(function(I){return e(x,I)}),tr&&Bc(x,T),b}function p(x,v,y,w){var b=zf(y);if(typeof b!="function")throw Error(he(150));if(y=b.call(y),y==null)throw Error(he(151));for(var S=b=null,C=v,T=v=0,B=null,_=y.next();C!==null&&!_.done;T++,_=y.next()){C.index>T?(B=C,C=null):B=C.sibling;var I=f(x,C,_.value,w);if(I===null){C===null&&(C=B);break}t&&C&&I.alternate===null&&e(x,C),v=s(I,v,T),S===null?b=I:S.sibling=I,S=I,C=B}if(_.done)return r(x,C),tr&&Bc(x,T),b;if(C===null){for(;!_.done;T++,_=y.next())_=A(x,_.value,w),_!==null&&(v=s(_,v,T),S===null?b=_:S.sibling=_,S=_);return tr&&Bc(x,T),b}for(C=n(x,C);!_.done;T++,_=y.next())_=h(C,x,T,_.value,w),_!==null&&(t&&_.alternate!==null&&C.delete(_.key===null?T:_.key),v=s(_,v,T),S===null?b=_:S.sibling=_,S=_);return t&&C.forEach(function(L){return e(x,L)}),tr&&Bc(x,T),b}function g(x,v,y,w){if(typeof y=="object"&&y!==null&&y.type===Ed&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Lg:e:{for(var b=y.key,S=v;S!==null;){if(S.key===b){if(b=y.type,b===Ed){if(S.tag===7){r(x,S.sibling),v=i(S,y.props.children),v.return=x,x=v;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===el&&Jk(b)===S.type){r(x,S.sibling),v=i(S,y.props),v.ref=Zf(x,S,y),v.return=x,x=v;break e}r(x,S);break}else e(x,S);S=S.sibling}y.type===Ed?(v=nu(y.props.children,x.mode,w,y.key),v.return=x,x=v):(w=Ox(y.type,y.key,y.props,null,x.mode,w),w.ref=Zf(x,v,y),w.return=x,x=w)}return a(x);case wd:e:{for(S=y.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(x,v.sibling),v=i(v,y.children||[]),v.return=x,x=v;break e}else{r(x,v);break}else e(x,v);v=v.sibling}v=kE(y,x.mode,w),v.return=x,x=v}return a(x);case el:return S=y._init,g(x,v,S(y._payload),w)}if(_h(y))return m(x,v,y,w);if(zf(y))return p(x,v,y,w);Vg(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(r(x,v.sibling),v=i(v,y),v.return=x,x=v):(r(x,v),v=RE(y,x.mode,w),v.return=x,x=v),a(x)):r(x,v)}return g}var TA=wQ(!0),EQ=wQ(!1),Pv=ac(null),Rv=null,Pd=null,k2=null;function L2(){k2=Pd=Rv=null}function j2(t){var e=Pv.current;Zt(Pv),t._currentValue=e}function CT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Kd(t,e){Rv=t,k2=Pd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gn=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(k2!==t)if(t={context:t,memoizedValue:e,next:null},Pd===null){if(Rv===null)throw Error(he(308));Pd=t,Rv.dependencies={lanes:0,firstContext:t}}else Pd=Pd.next=t;return e}var Oc=null;function M2(t){Oc===null?Oc=[t]:Oc.push(t)}function SQ(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,M2(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ao(t,n)}function Ao(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var tl=!1;function D2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CQ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,yt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ao(t,r)}return i=n.interleaved,i===null?(e.next=e,M2(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ao(t,r)}function Rx(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,w2(t,r)}}function eL(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function kv(t,e,r,n){var i=t.updateQueue;tl=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var A=i.baseState;a=0,d=u=l=null,o=s;do{var f=o.lane,h=o.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,p=o;switch(f=e,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){A=m.call(h,A,f);break e}A=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(h,A,f):m,f==null)break e;A=cr({},A,f);break e;case 2:tl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,l=A):d=d.next=h,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=A),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xu|=a,t.lanes=a,t.memoizedState=A}}function tL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(he(191,i));i.call(n)}}}var sg={},ua=ac(sg),jp=ac(sg),Mp=ac(sg);function Fc(t){if(t===sg)throw Error(he(174));return t}function O2(t,e){switch(Kt(Mp,e),Kt(jp,t),Kt(ua,sg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sT(e,t)}Zt(ua),Kt(ua,e)}function BA(){Zt(ua),Zt(jp),Zt(Mp)}function TQ(t){Fc(Mp.current);var e=Fc(ua.current),r=sT(e,t.type);e!==r&&(Kt(jp,t),Kt(ua,r))}function F2(t){jp.current===t&&(Zt(ua),Zt(jp))}var sr=ac(0);function Lv(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var TE=[];function U2(){for(var t=0;t<TE.length;t++)TE[t]._workInProgressVersionPrimary=null;TE.length=0}var kx=_o.ReactCurrentDispatcher,BE=_o.ReactCurrentBatchConfig,gu=0,lr=null,kr=null,Gr=null,jv=!1,ep=!1,Dp=0,pte=0;function An(){throw Error(he(321))}function $2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!_s(t[r],e[r]))return!1;return!0}function Q2(t,e,r,n,i,s){if(gu=s,lr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kx.current=t===null||t.memoizedState===null?vte:yte,t=r(n,i),ep){s=0;do{if(ep=!1,Dp=0,25<=s)throw Error(he(301));s+=1,Gr=kr=null,e.updateQueue=null,kx.current=bte,t=r(n,i)}while(ep)}if(kx.current=Mv,e=kr!==null&&kr.next!==null,gu=0,Gr=kr=lr=null,jv=!1,e)throw Error(he(300));return t}function H2(){var t=Dp!==0;return Dp=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?lr.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function Gi(){if(kr===null){var t=lr.alternate;t=t!==null?t.memoizedState:null}else t=kr.next;var e=Gr===null?lr.memoizedState:Gr.next;if(e!==null)Gr=e,kr=t;else{if(t===null)throw Error(he(310));kr=t,t={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Gr===null?lr.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function Op(t,e){return typeof e=="function"?e(t):e}function _E(t){var e=Gi(),r=e.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=t;var n=kr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((gu&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=A,a=n):l=l.next=A,lr.lanes|=d,xu|=d}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,_s(n,e.memoizedState)||(Gn=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,lr.lanes|=s,xu|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function NE(t){var e=Gi(),r=e.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);_s(s,e.memoizedState)||(Gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function BQ(){}function _Q(t,e){var r=lr,n=Gi(),i=e(),s=!_s(n.memoizedState,i);if(s&&(n.memoizedState=i,Gn=!0),n=n.queue,K2(PQ.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Gr!==null&&Gr.memoizedState.tag&1){if(r.flags|=2048,Fp(9,IQ.bind(null,r,n,i,e),void 0,null),zr===null)throw Error(he(349));gu&30||NQ(r,e,i)}return i}function NQ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=lr.updateQueue,e===null?(e={lastEffect:null,stores:null},lr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function IQ(t,e,r,n){e.value=r,e.getSnapshot=n,RQ(e)&&kQ(t)}function PQ(t,e,r){return r(function(){RQ(e)&&kQ(t)})}function RQ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_s(t,r)}catch{return!0}}function kQ(t){var e=Ao(t,1);e!==null&&ws(e,t,1,-1)}function rL(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:t},e.queue=t,t=t.dispatch=xte.bind(null,lr,t),[e.memoizedState,t]}function Fp(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=lr.updateQueue,e===null?(e={lastEffect:null,stores:null},lr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function LQ(){return Gi().memoizedState}function Lx(t,e,r,n){var i=Gs();lr.flags|=t,i.memoizedState=Fp(1|e,r,void 0,n===void 0?null:n)}function qb(t,e,r,n){var i=Gi();n=n===void 0?null:n;var s=void 0;if(kr!==null){var a=kr.memoizedState;if(s=a.destroy,n!==null&&$2(n,a.deps)){i.memoizedState=Fp(e,r,s,n);return}}lr.flags|=t,i.memoizedState=Fp(1|e,r,s,n)}function nL(t,e){return Lx(8390656,8,t,e)}function K2(t,e){return qb(2048,8,t,e)}function jQ(t,e){return qb(4,2,t,e)}function MQ(t,e){return qb(4,4,t,e)}function DQ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OQ(t,e,r){return r=r!=null?r.concat([t]):null,qb(4,4,DQ.bind(null,e,t),r)}function V2(){}function FQ(t,e){var r=Gi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$2(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function UQ(t,e){var r=Gi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$2(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $Q(t,e,r){return gu&21?(_s(r,e)||(r=G$(),lr.lanes|=r,xu|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gn=!0),t.memoizedState=r)}function mte(t,e){var r=It;It=r!==0&&4>r?r:4,t(!0);var n=BE.transition;BE.transition={};try{t(!1),e()}finally{It=r,BE.transition=n}}function QQ(){return Gi().memoizedState}function gte(t,e,r){var n=Dl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HQ(t))KQ(e,r);else if(r=SQ(t,e,r,n),r!==null){var i=jn();ws(r,t,n,i),VQ(r,e,n)}}function xte(t,e,r){var n=Dl(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HQ(t))KQ(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,_s(o,a)){var l=e.interleaved;l===null?(i.next=i,M2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=SQ(t,e,i,n),r!==null&&(i=jn(),ws(r,t,n,i),VQ(r,e,n))}}function HQ(t){var e=t.alternate;return t===lr||e!==null&&e===lr}function KQ(t,e){ep=jv=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function VQ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,w2(t,r)}}var Mv={readContext:Vi,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},vte={readContext:Vi,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:nL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Lx(4194308,4,DQ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Lx(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lx(4,2,t,e)},useMemo:function(t,e){var r=Gs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Gs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=gte.bind(null,lr,t),[n.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:rL,useDebugValue:V2,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=rL(!1),e=t[0];return t=mte.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=lr,i=Gs();if(tr){if(r===void 0)throw Error(he(407));r=r()}else{if(r=e(),zr===null)throw Error(he(349));gu&30||NQ(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,nL(PQ.bind(null,n,s,t),[t]),n.flags|=2048,Fp(9,IQ.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Gs(),e=zr.identifierPrefix;if(tr){var r=Ja,n=Za;r=(n&~(1<<32-bs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Dp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=pte++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yte={readContext:Vi,useCallback:FQ,useContext:Vi,useEffect:K2,useImperativeHandle:OQ,useInsertionEffect:jQ,useLayoutEffect:MQ,useMemo:UQ,useReducer:_E,useRef:LQ,useState:function(){return _E(Op)},useDebugValue:V2,useDeferredValue:function(t){var e=Gi();return $Q(e,kr.memoizedState,t)},useTransition:function(){var t=_E(Op)[0],e=Gi().memoizedState;return[t,e]},useMutableSource:BQ,useSyncExternalStore:_Q,useId:QQ,unstable_isNewReconciler:!1},bte={readContext:Vi,useCallback:FQ,useContext:Vi,useEffect:K2,useImperativeHandle:OQ,useInsertionEffect:jQ,useLayoutEffect:MQ,useMemo:UQ,useReducer:NE,useRef:LQ,useState:function(){return NE(Op)},useDebugValue:V2,useDeferredValue:function(t){var e=Gi();return kr===null?e.memoizedState=t:$Q(e,kr.memoizedState,t)},useTransition:function(){var t=NE(Op)[0],e=Gi().memoizedState;return[t,e]},useMutableSource:BQ,useSyncExternalStore:_Q,useId:QQ,unstable_isNewReconciler:!1};function cs(t,e){if(t&&t.defaultProps){e=cr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function TT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:cr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Xb={isMounted:function(t){return(t=t._reactInternals)?Uu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=jn(),i=Dl(t),s=io(n,i);s.payload=e,r!=null&&(s.callback=r),e=jl(t,s,i),e!==null&&(ws(e,t,i,n),Rx(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=jn(),i=Dl(t),s=io(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=jl(t,s,i),e!==null&&(ws(e,t,i,n),Rx(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=jn(),n=Dl(t),i=io(r,n);i.tag=2,e!=null&&(i.callback=e),e=jl(t,i,n),e!==null&&(ws(e,t,n,r),Rx(e,t,n))}};function iL(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Pp(r,n)||!Pp(i,s):!0}function GQ(t,e,r){var n=!1,i=Yl,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=qn(e)?pu:En.current,n=e.contextTypes,s=(n=n!=null)?SA(t,i):Yl),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xb,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sL(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Xb.enqueueReplaceState(e,e.state,null)}function BT(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},D2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=qn(e)?pu:En.current,i.context=SA(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(TT(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xb.enqueueReplaceState(i,i.state,null),kv(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _A(t,e){try{var r="",n=e;do r+=YJ(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function IE(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function _T(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var wte=typeof WeakMap=="function"?WeakMap:Map;function zQ(t,e,r){r=io(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ov||(Ov=!0,OT=n),_T(t,e)},r}function WQ(t,e,r){r=io(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){_T(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){_T(t,e),typeof n!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function aL(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new wte;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Mte.bind(null,t,e,r),e.then(t,t))}function oL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lL(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=io(-1,1),e.tag=2,jl(r,e,1))),r.lanes|=1),t)}var Ete=_o.ReactCurrentOwner,Gn=!1;function Nn(t,e,r,n){e.child=t===null?EQ(e,null,r,n):TA(e,t.child,r,n)}function cL(t,e,r,n,i){r=r.render;var s=e.ref;return Kd(e,i),n=Q2(t,e,r,n,s,i),r=H2(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fo(t,e,i)):(tr&&r&&I2(e),e.flags|=1,Nn(t,e,n,i),e.child)}function uL(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!J2(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,YQ(t,e,s,n,i)):(t=Ox(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Pp,r(a,n)&&t.ref===e.ref)return fo(t,e,i)}return e.flags|=1,t=Ol(s,n),t.ref=e.ref,t.return=e,e.child=t}function YQ(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Pp(s,n)&&t.ref===e.ref)if(Gn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Gn=!0);else return e.lanes=t.lanes,fo(t,e,i)}return NT(t,e,r,n,i)}function qQ(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(kd,oi),oi|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kt(kd,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Kt(kd,oi),oi|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Kt(kd,oi),oi|=n;return Nn(t,e,i,r),e.child}function XQ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function NT(t,e,r,n,i){var s=qn(r)?pu:En.current;return s=SA(e,s),Kd(e,i),r=Q2(t,e,r,n,s,i),n=H2(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fo(t,e,i)):(tr&&n&&I2(e),e.flags|=1,Nn(t,e,r,i),e.child)}function dL(t,e,r,n,i){if(qn(r)){var s=!0;_v(e)}else s=!1;if(Kd(e,i),e.stateNode===null)jx(t,e),GQ(e,r,n),BT(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Vi(u):(u=qn(r)?pu:En.current,u=SA(e,u));var d=r.getDerivedStateFromProps,A=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";A||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&sL(e,a,n,u),tl=!1;var f=e.memoizedState;a.state=f,kv(e,n,a,i),l=e.memoizedState,o!==n||f!==l||Yn.current||tl?(typeof d=="function"&&(TT(e,r,d,n),l=e.memoizedState),(o=tl||iL(e,r,o,n,f,l,u))?(A||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,CQ(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:cs(e.type,o),a.props=u,A=e.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Vi(l):(l=qn(r)?pu:En.current,l=SA(e,l));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==A||f!==l)&&sL(e,a,n,l),tl=!1,f=e.memoizedState,a.state=f,kv(e,n,a,i);var m=e.memoizedState;o!==A||f!==m||Yn.current||tl?(typeof h=="function"&&(TT(e,r,h,n),m=e.memoizedState),(u=tl||iL(e,r,u,n,f,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return IT(t,e,r,n,s,i)}function IT(t,e,r,n,i,s){XQ(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&qk(e,r,!1),fo(t,e,s);n=e.stateNode,Ete.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=TA(e,t.child,null,s),e.child=TA(e,null,o,s)):Nn(t,e,o,s),e.memoizedState=n.state,i&&qk(e,r,!0),e.child}function ZQ(t){var e=t.stateNode;e.pendingContext?Yk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yk(t,e.context,!1),O2(t,e.containerInfo)}function AL(t,e,r,n,i){return CA(),R2(i),e.flags|=256,Nn(t,e,r,n),e.child}var PT={dehydrated:null,treeContext:null,retryLane:0};function RT(t){return{baseLanes:t,cachePool:null,transitions:null}}function JQ(t,e,r){var n=e.pendingProps,i=sr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Kt(sr,i&1),t===null)return ST(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ew(a,n,0,null),t=nu(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=RT(r),e.memoizedState=PT,t):G2(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Ste(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ol(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ol(o,s):(s=nu(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?RT(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=PT,n}return s=t.child,t=s.sibling,n=Ol(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function G2(t,e){return e=ew({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gg(t,e,r,n){return n!==null&&R2(n),TA(e,t.child,null,r),t=G2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ste(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=IE(Error(he(422))),Gg(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=ew({mode:"visible",children:n.children},i,0,null),s=nu(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&TA(e,t.child,null,a),e.child.memoizedState=RT(a),e.memoizedState=PT,s);if(!(e.mode&1))return Gg(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(he(419)),n=IE(s,n,void 0),Gg(t,e,a,n)}if(o=(a&t.childLanes)!==0,Gn||o){if(n=zr,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ao(t,i),ws(n,t,i,-1))}return Z2(),n=IE(Error(he(421))),Gg(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Dte.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hi=Ll(i.nextSibling),xi=e,tr=!0,ms=null,t!==null&&(ki[Li++]=Za,ki[Li++]=Ja,ki[Li++]=mu,Za=t.id,Ja=t.overflow,mu=e),e=G2(e,n.children),e.flags|=4096,e)}function fL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),CT(t.return,e,r)}function PE(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function eH(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Nn(t,e,n.children,r),n=sr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fL(t,r,e);else if(t.tag===19)fL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Kt(sr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Lv(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),PE(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Lv(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}PE(e,!0,r,null,s);break;case"together":PE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fo(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xu|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,r=Ol(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ol(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Cte(t,e,r){switch(e.tag){case 3:ZQ(e),CA();break;case 5:TQ(e);break;case 1:qn(e.type)&&_v(e);break;case 4:O2(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Kt(Pv,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Kt(sr,sr.current&1),e.flags|=128,null):r&e.child.childLanes?JQ(t,e,r):(Kt(sr,sr.current&1),t=fo(t,e,r),t!==null?t.sibling:null);Kt(sr,sr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eH(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(sr,sr.current),n)break;return null;case 22:case 23:return e.lanes=0,qQ(t,e,r)}return fo(t,e,r)}var tH,kT,rH,nH;tH=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kT=function(){};rH=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Fc(ua.current);var s=null;switch(r){case"input":i=tT(t,i),n=tT(t,n),s=[];break;case"select":i=cr({},i,{value:void 0}),n=cr({},n,{value:void 0}),s=[];break;case"textarea":i=iT(t,i),n=iT(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Tv)}aT(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&zt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};nH=function(t,e,r,n){r!==n&&(e.flags|=4)};function Jf(t,e){if(!tr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Tte(t,e,r){var n=e.pendingProps;switch(P2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return qn(e.type)&&Bv(),fn(e),null;case 3:return n=e.stateNode,BA(),Zt(Yn),Zt(En),U2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Kg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ms!==null&&($T(ms),ms=null))),kT(t,e),fn(e),null;case 5:F2(e);var i=Fc(Mp.current);if(r=e.type,t!==null&&e.stateNode!=null)rH(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(he(166));return fn(e),null}if(t=Fc(ua.current),Kg(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[ta]=e,n[Lp]=s,t=(e.mode&1)!==0,r){case"dialog":zt("cancel",n),zt("close",n);break;case"iframe":case"object":case"embed":zt("load",n);break;case"video":case"audio":for(i=0;i<Ih.length;i++)zt(Ih[i],n);break;case"source":zt("error",n);break;case"img":case"image":case"link":zt("error",n),zt("load",n);break;case"details":zt("toggle",n);break;case"input":wk(n,s),zt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},zt("invalid",n);break;case"textarea":Sk(n,s),zt("invalid",n)}aT(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Hg(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Hg(n.textContent,o,t),i=["children",""+o]):Sp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&zt("scroll",n)}switch(r){case"input":jg(n),Ek(n,s,!0);break;case"textarea":jg(n),Ck(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Tv)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P$(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[ta]=e,t[Lp]=n,tH(t,e,!1,!1),e.stateNode=t;e:{switch(a=oT(r,n),r){case"dialog":zt("cancel",t),zt("close",t),i=n;break;case"iframe":case"object":case"embed":zt("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ih.length;i++)zt(Ih[i],t);i=n;break;case"source":zt("error",t),i=n;break;case"img":case"image":case"link":zt("error",t),zt("load",t),i=n;break;case"details":zt("toggle",t),i=n;break;case"input":wk(t,n),i=tT(t,n),zt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=cr({},n,{value:void 0}),zt("invalid",t);break;case"textarea":Sk(t,n),i=iT(t,n),zt("invalid",t);break;default:i=n}aT(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?L$(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&R$(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Cp(t,l):typeof l=="number"&&Cp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&zt("scroll",t):l!=null&&m2(t,s,l,a))}switch(r){case"input":jg(t),Ek(t,n,!1);break;case"textarea":jg(t),Ck(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Wl(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ud(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ud(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tv)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)nH(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(he(166));if(r=Fc(Mp.current),Fc(ua.current),Kg(e)){if(n=e.stateNode,r=e.memoizedProps,n[ta]=e,(s=n.nodeValue!==r)&&(t=xi,t!==null))switch(t.tag){case 3:Hg(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hg(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ta]=e,e.stateNode=n}return fn(e),null;case 13:if(Zt(sr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tr&&hi!==null&&e.mode&1&&!(e.flags&128))bQ(),CA(),e.flags|=98560,s=!1;else if(s=Kg(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(he(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(he(317));s[ta]=e}else CA(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),s=!1}else ms!==null&&($T(ms),ms=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||sr.current&1?Or===0&&(Or=3):Z2())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return BA(),kT(t,e),t===null&&Rp(e.stateNode.containerInfo),fn(e),null;case 10:return j2(e.type._context),fn(e),null;case 17:return qn(e.type)&&Bv(),fn(e),null;case 19:if(Zt(sr),s=e.memoizedState,s===null)return fn(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Jf(s,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Lv(t),a!==null){for(e.flags|=128,Jf(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Kt(sr,sr.current&1|2),e.child}t=t.sibling}s.tail!==null&&xr()>NA&&(e.flags|=128,n=!0,Jf(s,!1),e.lanes=4194304)}else{if(!n)if(t=Lv(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Jf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!tr)return fn(e),null}else 2*xr()-s.renderingStartTime>NA&&r!==1073741824&&(e.flags|=128,n=!0,Jf(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xr(),e.sibling=null,r=sr.current,Kt(sr,n?r&1|2:r&1),e):(fn(e),null);case 22:case 23:return X2(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?oi&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function Bte(t,e){switch(P2(e),e.tag){case 1:return qn(e.type)&&Bv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return BA(),Zt(Yn),Zt(En),U2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F2(e),null;case 13:if(Zt(sr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));CA()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zt(sr),null;case 4:return BA(),null;case 10:return j2(e.type._context),null;case 22:case 23:return X2(),null;case 24:return null;default:return null}}var zg=!1,vn=!1,_te=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Rd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ar(t,e,n)}else r.current=null}function LT(t,e,r){try{r()}catch(n){Ar(t,e,n)}}var hL=!1;function Nte(t,e){if(gT=Ev,t=lQ(),N2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,d=0,A=t,f=null;t:for(;;){for(var h;A!==r||i!==0&&A.nodeType!==3||(o=a+i),A!==s||n!==0&&A.nodeType!==3||(l=a+n),A.nodeType===3&&(a+=A.nodeValue.length),(h=A.firstChild)!==null;)f=A,A=h;for(;;){if(A===t)break t;if(f===r&&++u===i&&(o=a),f===s&&++d===n&&(l=a),(h=A.nextSibling)!==null)break;A=f,f=A.parentNode}A=h}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(xT={focusedElem:t,selectionRange:r},Ev=!1,Le=e;Le!==null;)if(e=Le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Le=t;else for(;Le!==null;){e=Le;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:cs(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(w){Ar(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}return m=hL,hL=!1,m}function tp(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&LT(e,r,s)}i=i.next}while(i!==n)}}function Zb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function jT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function iH(t){var e=t.alternate;e!==null&&(t.alternate=null,iH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ta],delete e[Lp],delete e[bT],delete e[dte],delete e[Ate])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sH(t){return t.tag===5||t.tag===3||t.tag===4}function pL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function MT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Tv));else if(n!==4&&(t=t.child,t!==null))for(MT(t,e,r),t=t.sibling;t!==null;)MT(t,e,r),t=t.sibling}function DT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(DT(t,e,r),t=t.sibling;t!==null;)DT(t,e,r),t=t.sibling}var en=null,fs=!1;function jo(t,e,r){for(r=r.child;r!==null;)aH(t,e,r),r=r.sibling}function aH(t,e,r){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(Kb,r)}catch{}switch(r.tag){case 5:vn||Rd(r,e);case 6:var n=en,i=fs;en=null,jo(t,e,r),en=n,fs=i,en!==null&&(fs?(t=en,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(fs?(t=en,r=r.stateNode,t.nodeType===8?SE(t.parentNode,r):t.nodeType===1&&SE(t,r),Np(t)):SE(en,r.stateNode));break;case 4:n=en,i=fs,en=r.stateNode.containerInfo,fs=!0,jo(t,e,r),en=n,fs=i;break;case 0:case 11:case 14:case 15:if(!vn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&LT(r,e,a),i=i.next}while(i!==n)}jo(t,e,r);break;case 1:if(!vn&&(Rd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ar(r,e,o)}jo(t,e,r);break;case 21:jo(t,e,r);break;case 22:r.mode&1?(vn=(n=vn)||r.memoizedState!==null,jo(t,e,r),vn=n):jo(t,e,r);break;default:jo(t,e,r)}}function mL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new _te),e.forEach(function(n){var i=Ote.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function rs(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:en=o.stateNode,fs=!1;break e;case 3:en=o.stateNode.containerInfo,fs=!0;break e;case 4:en=o.stateNode.containerInfo,fs=!0;break e}o=o.return}if(en===null)throw Error(he(160));aH(s,a,i),en=null,fs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ar(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oH(e,t),e=e.sibling}function oH(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rs(e,t),Fs(t),n&4){try{tp(3,t,t.return),Zb(3,t)}catch(p){Ar(t,t.return,p)}try{tp(5,t,t.return)}catch(p){Ar(t,t.return,p)}}break;case 1:rs(e,t),Fs(t),n&512&&r!==null&&Rd(r,r.return);break;case 5:if(rs(e,t),Fs(t),n&512&&r!==null&&Rd(r,r.return),t.flags&32){var i=t.stateNode;try{Cp(i,"")}catch(p){Ar(t,t.return,p)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&N$(i,s),oT(o,a);var u=oT(o,s);for(a=0;a<l.length;a+=2){var d=l[a],A=l[a+1];d==="style"?L$(i,A):d==="dangerouslySetInnerHTML"?R$(i,A):d==="children"?Cp(i,A):m2(i,d,A,u)}switch(o){case"input":rT(i,s);break;case"textarea":I$(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ud(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ud(i,!!s.multiple,s.defaultValue,!0):Ud(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lp]=s}catch(p){Ar(t,t.return,p)}}break;case 6:if(rs(e,t),Fs(t),n&4){if(t.stateNode===null)throw Error(he(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(p){Ar(t,t.return,p)}}break;case 3:if(rs(e,t),Fs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Np(e.containerInfo)}catch(p){Ar(t,t.return,p)}break;case 4:rs(e,t),Fs(t);break;case 13:rs(e,t),Fs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Y2=xr())),n&4&&mL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(vn=(u=vn)||d,rs(e,t),vn=u):rs(e,t),Fs(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Le=t,d=t.child;d!==null;){for(A=Le=d;Le!==null;){switch(f=Le,h=f.child,f.tag){case 0:case 11:case 14:case 15:tp(4,f,f.return);break;case 1:Rd(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Ar(n,r,p)}}break;case 5:Rd(f,f.return);break;case 22:if(f.memoizedState!==null){xL(A);continue}}h!==null?(h.return=f,Le=h):xL(A)}d=d.sibling}e:for(d=null,A=t;;){if(A.tag===5){if(d===null){d=A;try{i=A.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=A.stateNode,l=A.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=k$("display",a))}catch(p){Ar(t,t.return,p)}}}else if(A.tag===6){if(d===null)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(p){Ar(t,t.return,p)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:rs(e,t),Fs(t),n&4&&mL(t);break;case 21:break;default:rs(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sH(r)){var n=r;break e}r=r.return}throw Error(he(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Cp(i,""),n.flags&=-33);var s=pL(t);DT(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=pL(t);MT(t,o,a);break;default:throw Error(he(161))}}catch(l){Ar(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ite(t,e,r){Le=t,lH(t)}function lH(t,e,r){for(var n=(t.mode&1)!==0;Le!==null;){var i=Le,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||zg;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||vn;o=zg;var u=vn;if(zg=a,(vn=l)&&!u)for(Le=i;Le!==null;)a=Le,l=a.child,a.tag===22&&a.memoizedState!==null?vL(i):l!==null?(l.return=a,Le=l):vL(i);for(;s!==null;)Le=s,lH(s),s=s.sibling;Le=i,zg=o,vn=u}gL(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Le=s):gL(t)}}function gL(t){for(;Le!==null;){var e=Le;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||Zb(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!vn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:cs(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tL(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}tL(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var A=d.dehydrated;A!==null&&Np(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}vn||e.flags&512&&jT(e)}catch(f){Ar(e,e.return,f)}}if(e===t){Le=null;break}if(r=e.sibling,r!==null){r.return=e.return,Le=r;break}Le=e.return}}function xL(t){for(;Le!==null;){var e=Le;if(e===t){Le=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Le=r;break}Le=e.return}}function vL(t){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Zb(4,e)}catch(l){Ar(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Ar(e,i,l)}}var s=e.return;try{jT(e)}catch(l){Ar(e,s,l)}break;case 5:var a=e.return;try{jT(e)}catch(l){Ar(e,a,l)}}}catch(l){Ar(e,e.return,l)}if(e===t){Le=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Le=o;break}Le=e.return}}var Pte=Math.ceil,Dv=_o.ReactCurrentDispatcher,z2=_o.ReactCurrentOwner,Hi=_o.ReactCurrentBatchConfig,yt=0,zr=null,Sr=null,ln=0,oi=0,kd=ac(0),Or=0,Up=null,xu=0,Jb=0,W2=0,rp=null,Kn=null,Y2=0,NA=1/0,Va=null,Ov=!1,OT=null,Ml=null,Wg=!1,ml=null,Fv=0,np=0,FT=null,Mx=-1,Dx=0;function jn(){return yt&6?xr():Mx!==-1?Mx:Mx=xr()}function Dl(t){return t.mode&1?yt&2&&ln!==0?ln&-ln:hte.transition!==null?(Dx===0&&(Dx=G$()),Dx):(t=It,t!==0||(t=window.event,t=t===void 0?16:J$(t.type)),t):1}function ws(t,e,r,n){if(50<np)throw np=0,FT=null,Error(he(185));rg(t,r,n),(!(yt&2)||t!==zr)&&(t===zr&&(!(yt&2)&&(Jb|=r),Or===4&&ll(t,ln)),Xn(t,n),r===1&&yt===0&&!(e.mode&1)&&(NA=xr()+500,Yb&&oc()))}function Xn(t,e){var r=t.callbackNode;hee(t,e);var n=wv(t,t===zr?ln:0);if(n===0)r!==null&&_k(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&_k(r),e===1)t.tag===0?fte(yL.bind(null,t)):xQ(yL.bind(null,t)),cte(function(){!(yt&6)&&oc()}),r=null;else{switch(z$(n)){case 1:r=b2;break;case 4:r=K$;break;case 16:r=bv;break;case 536870912:r=V$;break;default:r=bv}r=mH(r,cH.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function cH(t,e){if(Mx=-1,Dx=0,yt&6)throw Error(he(327));var r=t.callbackNode;if(Vd()&&t.callbackNode!==r)return null;var n=wv(t,t===zr?ln:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Uv(t,n);else{e=n;var i=yt;yt|=2;var s=dH();(zr!==t||ln!==e)&&(Va=null,NA=xr()+500,ru(t,e));do try{Lte();break}catch(o){uH(t,o)}while(!0);L2(),Dv.current=s,yt=i,Sr!==null?e=0:(zr=null,ln=0,e=Or)}if(e!==0){if(e===2&&(i=AT(t),i!==0&&(n=i,e=UT(t,i))),e===1)throw r=Up,ru(t,0),ll(t,n),Xn(t,xr()),r;if(e===6)ll(t,n);else{if(i=t.current.alternate,!(n&30)&&!Rte(i)&&(e=Uv(t,n),e===2&&(s=AT(t),s!==0&&(n=s,e=UT(t,s))),e===1))throw r=Up,ru(t,0),ll(t,n),Xn(t,xr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(he(345));case 2:_c(t,Kn,Va);break;case 3:if(ll(t,n),(n&130023424)===n&&(e=Y2+500-xr(),10<e)){if(wv(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yT(_c.bind(null,t,Kn,Va),e);break}_c(t,Kn,Va);break;case 4:if(ll(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-bs(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=xr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pte(n/1960))-n,10<n){t.timeoutHandle=yT(_c.bind(null,t,Kn,Va),n);break}_c(t,Kn,Va);break;case 5:_c(t,Kn,Va);break;default:throw Error(he(329))}}}return Xn(t,xr()),t.callbackNode===r?cH.bind(null,t):null}function UT(t,e){var r=rp;return t.current.memoizedState.isDehydrated&&(ru(t,e).flags|=256),t=Uv(t,e),t!==2&&(e=Kn,Kn=r,e!==null&&$T(e)),t}function $T(t){Kn===null?Kn=t:Kn.push.apply(Kn,t)}function Rte(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!_s(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ll(t,e){for(e&=~W2,e&=~Jb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-bs(e),n=1<<r;t[r]=-1,e&=~n}}function yL(t){if(yt&6)throw Error(he(327));Vd();var e=wv(t,0);if(!(e&1))return Xn(t,xr()),null;var r=Uv(t,e);if(t.tag!==0&&r===2){var n=AT(t);n!==0&&(e=n,r=UT(t,n))}if(r===1)throw r=Up,ru(t,0),ll(t,e),Xn(t,xr()),r;if(r===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_c(t,Kn,Va),Xn(t,xr()),null}function q2(t,e){var r=yt;yt|=1;try{return t(e)}finally{yt=r,yt===0&&(NA=xr()+500,Yb&&oc())}}function vu(t){ml!==null&&ml.tag===0&&!(yt&6)&&Vd();var e=yt;yt|=1;var r=Hi.transition,n=It;try{if(Hi.transition=null,It=1,t)return t()}finally{It=n,Hi.transition=r,yt=e,!(yt&6)&&oc()}}function X2(){oi=kd.current,Zt(kd)}function ru(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,lte(r)),Sr!==null)for(r=Sr.return;r!==null;){var n=r;switch(P2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bv();break;case 3:BA(),Zt(Yn),Zt(En),U2();break;case 5:F2(n);break;case 4:BA();break;case 13:Zt(sr);break;case 19:Zt(sr);break;case 10:j2(n.type._context);break;case 22:case 23:X2()}r=r.return}if(zr=t,Sr=t=Ol(t.current,null),ln=oi=e,Or=0,Up=null,W2=Jb=xu=0,Kn=rp=null,Oc!==null){for(e=0;e<Oc.length;e++)if(r=Oc[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Oc=null}return t}function uH(t,e){do{var r=Sr;try{if(L2(),kx.current=Mv,jv){for(var n=lr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}jv=!1}if(gu=0,Gr=kr=lr=null,ep=!1,Dp=0,z2.current=null,r===null||r.return===null){Or=1,Up=e,Sr=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=ln,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,A=d.tag;if(!(d.mode&1)&&(A===0||A===11||A===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=oL(a);if(h!==null){h.flags&=-257,lL(h,a,o,s,e),h.mode&1&&aL(s,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(l),e.updateQueue=p}else m.add(l);break e}else{if(!(e&1)){aL(s,u,e),Z2();break e}l=Error(he(426))}}else if(tr&&o.mode&1){var g=oL(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),lL(g,a,o,s,e),R2(_A(l,o));break e}}s=l=_A(l,o),Or!==4&&(Or=2),rp===null?rp=[s]:rp.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=zQ(s,l,e);eL(s,x);break e;case 1:o=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ml===null||!Ml.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=WQ(s,o,e);eL(s,w);break e}}s=s.return}while(s!==null)}fH(r)}catch(b){e=b,Sr===r&&r!==null&&(Sr=r=r.return);continue}break}while(!0)}function dH(){var t=Dv.current;return Dv.current=Mv,t===null?Mv:t}function Z2(){(Or===0||Or===3||Or===2)&&(Or=4),zr===null||!(xu&268435455)&&!(Jb&268435455)||ll(zr,ln)}function Uv(t,e){var r=yt;yt|=2;var n=dH();(zr!==t||ln!==e)&&(Va=null,ru(t,e));do try{kte();break}catch(i){uH(t,i)}while(!0);if(L2(),yt=r,Dv.current=n,Sr!==null)throw Error(he(261));return zr=null,ln=0,Or}function kte(){for(;Sr!==null;)AH(Sr)}function Lte(){for(;Sr!==null&&!see();)AH(Sr)}function AH(t){var e=pH(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?fH(t):Sr=e,z2.current=null}function fH(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Bte(r,e),r!==null){r.flags&=32767,Sr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,Sr=null;return}}else if(r=Tte(r,e,oi),r!==null){Sr=r;return}if(e=e.sibling,e!==null){Sr=e;return}Sr=e=t}while(e!==null);Or===0&&(Or=5)}function _c(t,e,r){var n=It,i=Hi.transition;try{Hi.transition=null,It=1,jte(t,e,r,n)}finally{Hi.transition=i,It=n}return null}function jte(t,e,r,n){do Vd();while(ml!==null);if(yt&6)throw Error(he(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(pee(t,s),t===zr&&(Sr=zr=null,ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Wg||(Wg=!0,mH(bv,function(){return Vd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Hi.transition,Hi.transition=null;var a=It;It=1;var o=yt;yt|=4,z2.current=null,Nte(t,r),oH(r,t),tte(xT),Ev=!!gT,xT=gT=null,t.current=r,Ite(r),aee(),yt=o,It=a,Hi.transition=s}else t.current=r;if(Wg&&(Wg=!1,ml=t,Fv=i),s=t.pendingLanes,s===0&&(Ml=null),cee(r.stateNode),Xn(t,xr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ov)throw Ov=!1,t=OT,OT=null,t;return Fv&1&&t.tag!==0&&Vd(),s=t.pendingLanes,s&1?t===FT?np++:(np=0,FT=t):np=0,oc(),null}function Vd(){if(ml!==null){var t=z$(Fv),e=Hi.transition,r=It;try{if(Hi.transition=null,It=16>t?16:t,ml===null)var n=!1;else{if(t=ml,ml=null,Fv=0,yt&6)throw Error(he(331));var i=yt;for(yt|=4,Le=t.current;Le!==null;){var s=Le,a=s.child;if(Le.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Le=u;Le!==null;){var d=Le;switch(d.tag){case 0:case 11:case 15:tp(8,d,s)}var A=d.child;if(A!==null)A.return=d,Le=A;else for(;Le!==null;){d=Le;var f=d.sibling,h=d.return;if(iH(d),d===u){Le=null;break}if(f!==null){f.return=h,Le=f;break}Le=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Le=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Le=a;else e:for(;Le!==null;){if(s=Le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tp(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Le=x;break e}Le=s.return}}var v=t.current;for(Le=v;Le!==null;){a=Le;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Le=y;else e:for(a=v;Le!==null;){if(o=Le,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Zb(9,o)}}catch(b){Ar(o,o.return,b)}if(o===a){Le=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,Le=w;break e}Le=o.return}}if(yt=i,oc(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(Kb,t)}catch{}n=!0}return n}finally{It=r,Hi.transition=e}}return!1}function bL(t,e,r){e=_A(r,e),e=zQ(t,e,1),t=jl(t,e,1),e=jn(),t!==null&&(rg(t,1,e),Xn(t,e))}function Ar(t,e,r){if(t.tag===3)bL(t,t,r);else for(;e!==null;){if(e.tag===3){bL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ml===null||!Ml.has(n))){t=_A(r,t),t=WQ(e,t,1),e=jl(e,t,1),t=jn(),e!==null&&(rg(e,1,t),Xn(e,t));break}}e=e.return}}function Mte(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&r,zr===t&&(ln&r)===r&&(Or===4||Or===3&&(ln&130023424)===ln&&500>xr()-Y2?ru(t,0):W2|=r),Xn(t,e)}function hH(t,e){e===0&&(t.mode&1?(e=Og,Og<<=1,!(Og&130023424)&&(Og=4194304)):e=1);var r=jn();t=Ao(t,e),t!==null&&(rg(t,e,r),Xn(t,r))}function Dte(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hH(t,r)}function Ote(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(he(314))}n!==null&&n.delete(e),hH(t,r)}var pH;pH=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Gn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gn=!1,Cte(t,e,r);Gn=!!(t.flags&131072)}else Gn=!1,tr&&e.flags&1048576&&vQ(e,Iv,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;jx(t,e),t=e.pendingProps;var i=SA(e,En.current);Kd(e,r),i=Q2(null,e,n,t,i,r);var s=H2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(n)?(s=!0,_v(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,D2(e),i.updater=Xb,e.stateNode=i,i._reactInternals=e,BT(e,n,t,r),e=IT(null,e,n,!0,s,r)):(e.tag=0,tr&&s&&I2(e),Nn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(jx(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Ute(n),t=cs(n,t),i){case 0:e=NT(null,e,n,t,r);break e;case 1:e=dL(null,e,n,t,r);break e;case 11:e=cL(null,e,n,t,r);break e;case 14:e=uL(null,e,n,cs(n.type,t),r);break e}throw Error(he(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),NT(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),dL(t,e,n,i,r);case 3:e:{if(ZQ(e),t===null)throw Error(he(387));n=e.pendingProps,s=e.memoizedState,i=s.element,CQ(t,e),kv(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_A(Error(he(423)),e),e=AL(t,e,n,r,i);break e}else if(n!==i){i=_A(Error(he(424)),e),e=AL(t,e,n,r,i);break e}else for(hi=Ll(e.stateNode.containerInfo.firstChild),xi=e,tr=!0,ms=null,r=EQ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(CA(),n===i){e=fo(t,e,r);break e}Nn(t,e,n,r)}e=e.child}return e;case 5:return TQ(e),t===null&&ST(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,vT(n,i)?a=null:s!==null&&vT(n,s)&&(e.flags|=32),XQ(t,e),Nn(t,e,a,r),e.child;case 6:return t===null&&ST(e),null;case 13:return JQ(t,e,r);case 4:return O2(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=TA(e,null,n,r):Nn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),cL(t,e,n,i,r);case 7:return Nn(t,e,e.pendingProps,r),e.child;case 8:return Nn(t,e,e.pendingProps.children,r),e.child;case 12:return Nn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Kt(Pv,n._currentValue),n._currentValue=a,s!==null)if(_s(s.value,a)){if(s.children===i.children&&!Yn.current){e=fo(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=io(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),CT(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(he(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),CT(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Nn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Kd(e,r),i=Vi(i),n=n(i),e.flags|=1,Nn(t,e,n,r),e.child;case 14:return n=e.type,i=cs(n,e.pendingProps),i=cs(n.type,i),uL(t,e,n,i,r);case 15:return YQ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cs(n,i),jx(t,e),e.tag=1,qn(n)?(t=!0,_v(e)):t=!1,Kd(e,r),GQ(e,n,i),BT(e,n,i,r),IT(null,e,n,!0,t,r);case 19:return eH(t,e,r);case 22:return qQ(t,e,r)}throw Error(he(156,e.tag))};function mH(t,e){return H$(t,e)}function Fte(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(t,e,r,n){return new Fte(t,e,r,n)}function J2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ute(t){if(typeof t=="function")return J2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===x2)return 11;if(t===v2)return 14}return 2}function Ol(t,e){var r=t.alternate;return r===null?(r=Oi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ox(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")J2(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ed:return nu(r.children,i,s,e);case g2:a=8,i|=8;break;case XC:return t=Oi(12,r,e,i|2),t.elementType=XC,t.lanes=s,t;case ZC:return t=Oi(13,r,e,i),t.elementType=ZC,t.lanes=s,t;case JC:return t=Oi(19,r,e,i),t.elementType=JC,t.lanes=s,t;case T$:return ew(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S$:a=10;break e;case C$:a=9;break e;case x2:a=11;break e;case v2:a=14;break e;case el:a=16,n=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=Oi(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function nu(t,e,r,n){return t=Oi(7,t,n,e),t.lanes=r,t}function ew(t,e,r,n){return t=Oi(22,t,n,e),t.elementType=T$,t.lanes=r,t.stateNode={isHidden:!1},t}function RE(t,e,r){return t=Oi(6,t,null,e),t.lanes=r,t}function kE(t,e,r){return e=Oi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $te(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fE(0),this.expirationTimes=fE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fE(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eI(t,e,r,n,i,s,a,o,l){return t=new $te(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Oi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},D2(s),t}function Qte(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wd,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function gH(t){if(!t)return Yl;t=t._reactInternals;e:{if(Uu(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var r=t.type;if(qn(r))return gQ(t,r,e)}return e}function xH(t,e,r,n,i,s,a,o,l){return t=eI(r,n,!0,t,i,s,a,o,l),t.context=gH(null),r=t.current,n=jn(),i=Dl(r),s=io(n,i),s.callback=e??null,jl(r,s,i),t.current.lanes=i,rg(t,i,n),Xn(t,n),t}function tw(t,e,r,n){var i=e.current,s=jn(),a=Dl(i);return r=gH(r),e.context===null?e.context=r:e.pendingContext=r,e=io(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=jl(i,e,a),t!==null&&(ws(t,i,a,s),Rx(t,i,a)),a}function $v(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function tI(t,e){wL(t,e),(t=t.alternate)&&wL(t,e)}function Hte(){return null}var vH=typeof reportError=="function"?reportError:function(t){console.error(t)};function rI(t){this._internalRoot=t}rw.prototype.render=rI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));tw(t,e,null,null)};rw.prototype.unmount=rI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vu(function(){tw(null,t,null,null)}),e[uo]=null}};function rw(t){this._internalRoot=t}rw.prototype.unstable_scheduleHydration=function(t){if(t){var e=q$();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ol.length&&e!==0&&e<ol[r].priority;r++);ol.splice(r,0,t),r===0&&Z$(t)}};function nI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function EL(){}function Kte(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=$v(a);s.call(u)}}var a=xH(e,n,t,0,null,!1,!1,"",EL);return t._reactRootContainer=a,t[uo]=a.current,Rp(t.nodeType===8?t.parentNode:t),vu(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=$v(l);o.call(u)}}var l=eI(t,0,!1,null,null,!1,!1,"",EL);return t._reactRootContainer=l,t[uo]=l.current,Rp(t.nodeType===8?t.parentNode:t),vu(function(){tw(e,l,r,n)}),l}function iw(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=$v(a);o.call(l)}}tw(e,a,t,i)}else a=Kte(r,e,t,i,n);return $v(a)}W$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Nh(e.pendingLanes);r!==0&&(w2(e,r|1),Xn(e,xr()),!(yt&6)&&(NA=xr()+500,oc()))}break;case 13:vu(function(){var n=Ao(t,1);if(n!==null){var i=jn();ws(n,t,1,i)}}),tI(t,1)}};E2=function(t){if(t.tag===13){var e=Ao(t,134217728);if(e!==null){var r=jn();ws(e,t,134217728,r)}tI(t,134217728)}};Y$=function(t){if(t.tag===13){var e=Dl(t),r=Ao(t,e);if(r!==null){var n=jn();ws(r,t,e,n)}tI(t,e)}};q$=function(){return It};X$=function(t,e){var r=It;try{return It=t,e()}finally{It=r}};cT=function(t,e,r){switch(e){case"input":if(rT(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Wb(n);if(!i)throw Error(he(90));_$(n),rT(n,i)}}}break;case"textarea":I$(t,r);break;case"select":e=r.value,e!=null&&Ud(t,!!r.multiple,e,!1)}};D$=q2;O$=vu;var Vte={usingClientEntryPoint:!1,Events:[ig,Bd,Wb,j$,M$,q2]},eh={findFiberByHostInstance:Dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gte={bundleType:eh.bundleType,version:eh.version,rendererPackageName:eh.rendererPackageName,rendererConfig:eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_o.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$$(t),t===null?null:t.stateNode},findFiberByHostInstance:eh.findFiberByHostInstance||Hte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yg.isDisabled&&Yg.supportsFiber)try{Kb=Yg.inject(Gte),ca=Yg}catch{}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vte;Ci.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nI(e))throw Error(he(200));return Qte(t,e,null,r)};Ci.createRoot=function(t,e){if(!nI(t))throw Error(he(299));var r=!1,n="",i=vH;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=eI(t,1,!1,null,null,r,!1,n,i),t[uo]=e.current,Rp(t.nodeType===8?t.parentNode:t),new rI(e)};Ci.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=$$(e),t=t===null?null:t.stateNode,t};Ci.flushSync=function(t){return vu(t)};Ci.hydrate=function(t,e,r){if(!nw(e))throw Error(he(200));return iw(null,t,e,!0,r)};Ci.hydrateRoot=function(t,e,r){if(!nI(t))throw Error(he(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=vH;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=xH(e,null,t,1,r??null,i,!1,s,a),t[uo]=e.current,Rp(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new rw(e)};Ci.render=function(t,e,r){if(!nw(e))throw Error(he(200));return iw(null,t,e,!1,r)};Ci.unmountComponentAtNode=function(t){if(!nw(t))throw Error(he(40));return t._reactRootContainer?(vu(function(){iw(null,null,t,!1,function(){t._reactRootContainer=null,t[uo]=null})}),!0):!1};Ci.unstable_batchedUpdates=q2;Ci.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!nw(r))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return iw(t,e,r,!1,n)};Ci.version="18.3.1-next-f1338f8080-20240426";function yH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yH)}catch(t){console.error(t)}}yH(),y$.exports=Ci;var No=y$.exports;const bH=$t(No);var wH,SL=No;wH=SL.createRoot,SL.hydrateRoot;const zte=1,Wte=1e6;let LE=0;function Yte(){return LE=(LE+1)%Number.MAX_SAFE_INTEGER,LE.toString()}const jE=new Map,CL=t=>{if(jE.has(t))return;const e=setTimeout(()=>{jE.delete(t),ip({type:"REMOVE_TOAST",toastId:t})},Wte);jE.set(t,e)},qte=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,zte)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?CL(r):t.toasts.forEach(n=>{CL(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Fx=[];let Ux={toasts:[]};function ip(t){Ux=qte(Ux,t),Fx.forEach(e=>{e(Ux)})}function Xte({...t}){const e=Yte(),r=i=>ip({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>ip({type:"DISMISS_TOAST",toastId:e});return ip({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function lc(){const[t,e]=E.useState(Ux);return E.useEffect(()=>(Fx.push(e),()=>{const r=Fx.indexOf(e);r>-1&&Fx.splice(r,1)}),[t]),{...t,toast:Xte,dismiss:r=>ip({type:"DISMISS_TOAST",toastId:r})}}function Ie(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function TL(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function EH(...t){return e=>{let r=!1;const n=t.map(i=>{const s=TL(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():TL(t[i],null)}}}}function qe(...t){return E.useCallback(EH(...t),t)}function Zte(t,e){const r=E.createContext(e),n=s=>{const{children:a,...o}=s,l=E.useMemo(()=>o,Object.values(o));return c.jsx(r.Provider,{value:l,children:a})};n.displayName=t+"Provider";function i(s){const a=E.useContext(r);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[n,i]}function Cn(t,e=[]){let r=[];function n(s,a){const o=E.createContext(a),l=r.length;r=[...r,a];const u=A=>{var x;const{scope:f,children:h,...m}=A,p=((x=f==null?void 0:f[t])==null?void 0:x[l])||o,g=E.useMemo(()=>m,Object.values(m));return c.jsx(p.Provider,{value:g,children:h})};u.displayName=s+"Provider";function d(A,f){var p;const h=((p=f==null?void 0:f[t])==null?void 0:p[l])||o,m=E.useContext(h);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${A}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(o){const l=(o==null?void 0:o[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[n,Jte(i,...e)]}function Jte(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:u})=>{const A=l(s)[`__scope${u}`];return{...o,...A}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function IA(t){const e=ere(t),r=E.forwardRef((n,i)=>{const{children:s,...a}=n,o=E.Children.toArray(s),l=o.find(rre);if(l){const u=l.props.children,d=o.map(A=>A===l?E.Children.count(u)>1?E.Children.only(null):E.isValidElement(u)?u.props.children:null:A);return c.jsx(e,{...a,ref:i,children:E.isValidElement(u)?E.cloneElement(u,void 0,d):null})}return c.jsx(e,{...a,ref:i,children:s})});return r.displayName=`${t}.Slot`,r}var xf=IA("Slot");function ere(t){const e=E.forwardRef((r,n)=>{const{children:i,...s}=r;if(E.isValidElement(i)){const a=ire(i),o=nre(s,i.props);return i.type!==E.Fragment&&(o.ref=n?EH(n,a):a),E.cloneElement(i,o)}return E.Children.count(i)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SH=Symbol("radix.slottable");function tre(t){const e=({children:r})=>c.jsx(c.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=SH,e}function rre(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SH}function nre(t,e){const r={...e};for(const n in e){const i=t[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...t,...r}}function ire(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function sw(t){const e=t+"CollectionProvider",[r,n]=Cn(e),[i,s]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:g,children:x}=p,v=Q.useRef(null),y=Q.useRef(new Map).current;return c.jsx(i,{scope:g,itemMap:y,collectionRef:v,children:x})};a.displayName=e;const o=t+"CollectionSlot",l=IA(o),u=Q.forwardRef((p,g)=>{const{scope:x,children:v}=p,y=s(o,x),w=qe(g,y.collectionRef);return c.jsx(l,{ref:w,children:v})});u.displayName=o;const d=t+"CollectionItemSlot",A="data-radix-collection-item",f=IA(d),h=Q.forwardRef((p,g)=>{const{scope:x,children:v,...y}=p,w=Q.useRef(null),b=qe(g,w),S=s(d,x);return Q.useEffect(()=>(S.itemMap.set(w,{ref:w,...y}),()=>void S.itemMap.delete(w))),c.jsx(f,{[A]:"",ref:b,children:v})});h.displayName=d;function m(p){const g=s(t+"CollectionConsumer",p);return Q.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${A}]`));return Array.from(g.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:u,ItemSlot:h},m,n]}var sre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],De=sre.reduce((t,e)=>{const r=IA(`Primitive.${e}`),n=E.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function CH(t,e){t&&No.flushSync(()=>t.dispatchEvent(e))}function Dr(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function are(t,e=globalThis==null?void 0:globalThis.document){const r=Dr(t);E.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var ore="DismissableLayer",QT="dismissableLayer.update",lre="dismissableLayer.pointerDownOutside",cre="dismissableLayer.focusOutside",BL,TH=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ag=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=t,u=E.useContext(TH),[d,A]=E.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=E.useState({}),m=qe(e,C=>A(C)),p=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),v=d?p.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,w=v>=x,b=dre(C=>{const T=C.target,B=[...u.branches].some(_=>_.contains(T));!w||B||(i==null||i(C),a==null||a(C),C.defaultPrevented||o==null||o())},f),S=Are(C=>{const T=C.target;[...u.branches].some(_=>_.contains(T))||(s==null||s(C),a==null||a(C),C.defaultPrevented||o==null||o())},f);return are(C=>{v===u.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&o&&(C.preventDefault(),o()))},f),E.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(BL=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),_L(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=BL)}},[d,f,r,u]),E.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),_L())},[d,u]),E.useEffect(()=>{const C=()=>h({});return document.addEventListener(QT,C),()=>document.removeEventListener(QT,C)},[]),c.jsx(De.div,{...l,ref:m,style:{pointerEvents:y?w?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,b.onPointerDownCapture)})});ag.displayName=ore;var ure="DismissableLayerBranch",BH=E.forwardRef((t,e)=>{const r=E.useContext(TH),n=E.useRef(null),i=qe(e,n);return E.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),c.jsx(De.div,{...t,ref:i})});BH.displayName=ure;function dre(t,e=globalThis==null?void 0:globalThis.document){const r=Dr(t),n=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let l=function(){_H(lre,r,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function Are(t,e=globalThis==null?void 0:globalThis.document){const r=Dr(t),n=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!n.current&&_H(cre,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function _L(){const t=new CustomEvent(QT);document.dispatchEvent(t)}function _H(t,e,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?CH(i,s):i.dispatchEvent(s)}var fre=ag,hre=BH,Ur=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},pre="Portal",aw=E.forwardRef((t,e)=>{var o;const{container:r,...n}=t,[i,s]=E.useState(!1);Ur(()=>s(!0),[]);const a=r||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?bH.createPortal(c.jsx(De.div,{...n,ref:e}),a):null});aw.displayName=pre;function mre(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var Jn=t=>{const{present:e,children:r}=t,n=gre(e),i=typeof r=="function"?r({present:n.isPresent}):E.Children.only(r),s=qe(n.ref,xre(i));return typeof r=="function"||n.isPresent?E.cloneElement(i,{ref:s}):null};Jn.displayName="Presence";function gre(t){const[e,r]=E.useState(),n=E.useRef(null),i=E.useRef(t),s=E.useRef("none"),a=t?"mounted":"unmounted",[o,l]=mre(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const u=qg(n.current);s.current=o==="mounted"?u:"none"},[o]),Ur(()=>{const u=n.current,d=i.current;if(d!==t){const f=s.current,h=qg(u);t?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Ur(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,A=h=>{const p=qg(n.current).includes(h.animationName);if(h.target===e&&p&&(l("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=h=>{h.target===e&&(s.current=qg(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",A),e.addEventListener("animationend",A),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",A),e.removeEventListener("animationend",A)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:E.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function qg(t){return(t==null?void 0:t.animationName)||"none"}function xre(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var vre=f2[" useInsertionEffect ".trim().toString()]||Ur;function zi({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,s,a]=yre({defaultProp:e,onChange:r}),o=t!==void 0,l=o?t:i;{const d=E.useRef(t!==void 0);E.useEffect(()=>{const A=d.current;A!==o&&console.warn(`${n} is changing from ${A?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,n])}const u=E.useCallback(d=>{var A;if(o){const f=bre(d)?d(t):d;f!==t&&((A=a.current)==null||A.call(a,f))}else s(d)},[o,t,s,a]);return[l,u]}function yre({defaultProp:t,onChange:e}){const[r,n]=E.useState(t),i=E.useRef(r),s=E.useRef(e);return vre(()=>{s.current=e},[e]),E.useEffect(()=>{var a;i.current!==r&&((a=s.current)==null||a.call(s,r),i.current=r)},[r,i]),[r,n,s]}function bre(t){return typeof t=="function"}var NH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wre="VisuallyHidden",ow=E.forwardRef((t,e)=>c.jsx(De.span,{...t,ref:e,style:{...NH,...t.style}}));ow.displayName=wre;var Ere=ow,iI="ToastProvider",[sI,Sre,Cre]=sw("Toast"),[IH,BZe]=Cn("Toast",[Cre]),[Tre,lw]=IH(iI),PH=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[o,l]=E.useState(null),[u,d]=E.useState(0),A=E.useRef(!1),f=E.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${iI}\`. Expected non-empty \`string\`.`),c.jsx(sI.Provider,{scope:e,children:c.jsx(Tre,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:E.useCallback(()=>d(h=>h+1),[]),onToastRemove:E.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:A,isClosePausedRef:f,children:a})})};PH.displayName=iI;var RH="ToastViewport",Bre=["F8"],HT="toast.viewportPause",KT="toast.viewportResume",kH=E.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=Bre,label:i="Notifications ({hotkey})",...s}=t,a=lw(RH,r),o=Sre(r),l=E.useRef(null),u=E.useRef(null),d=E.useRef(null),A=E.useRef(null),f=qe(e,A,a.onViewportChange),h=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;E.useEffect(()=>{const g=x=>{var y;n.length!==0&&n.every(w=>x[w]||x.code===w)&&((y=A.current)==null||y.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),E.useEffect(()=>{const g=l.current,x=A.current;if(m&&g&&x){const v=()=>{if(!a.isClosePausedRef.current){const S=new CustomEvent(HT);x.dispatchEvent(S),a.isClosePausedRef.current=!0}},y=()=>{if(a.isClosePausedRef.current){const S=new CustomEvent(KT);x.dispatchEvent(S),a.isClosePausedRef.current=!1}},w=S=>{!g.contains(S.relatedTarget)&&y()},b=()=>{g.contains(document.activeElement)||y()};return g.addEventListener("focusin",v),g.addEventListener("focusout",w),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",b),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",w),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",b),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[m,a.isClosePausedRef]);const p=E.useCallback(({tabbingDirection:g})=>{const v=o().map(y=>{const w=y.ref.current,b=[w,...Ure(w)];return g==="forwards"?b:b.reverse()});return(g==="forwards"?v.reverse():v).flat()},[o]);return E.useEffect(()=>{const g=A.current;if(g){const x=v=>{var b,S,C;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const T=document.activeElement,B=v.shiftKey;if(v.target===g&&B){(b=u.current)==null||b.focus();return}const L=p({tabbingDirection:B?"backwards":"forwards"}),N=L.findIndex(R=>R===T);ME(L.slice(N+1))?v.preventDefault():B?(S=u.current)==null||S.focus():(C=d.current)==null||C.focus()}};return g.addEventListener("keydown",x),()=>g.removeEventListener("keydown",x)}},[o,p]),c.jsxs(hre,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&c.jsx(VT,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});ME(g)}}),c.jsx(sI.Slot,{scope:r,children:c.jsx(De.ol,{tabIndex:-1,...s,ref:f})}),m&&c.jsx(VT,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});ME(g)}})]})});kH.displayName=RH;var LH="ToastFocusProxy",VT=E.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,s=lw(LH,r);return c.jsx(ow,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=s.viewport)!=null&&u.contains(o))&&n()}})});VT.displayName=LH;var og="Toast",_re="toast.swipeStart",Nre="toast.swipeMove",Ire="toast.swipeCancel",Pre="toast.swipeEnd",jH=E.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...a}=t,[o,l]=zi({prop:n,defaultProp:i??!0,onChange:s,caller:og});return c.jsx(Jn,{present:r||o,children:c.jsx(Lre,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:Dr(t.onPause),onResume:Dr(t.onResume),onSwipeStart:Ie(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(t.onSwipeMove,u=>{const{x:d,y:A}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${A}px`)}),onSwipeCancel:Ie(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(t.onSwipeEnd,u=>{const{x:d,y:A}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${A}px`),l(!1)})})})});jH.displayName=og;var[Rre,kre]=IH(og,{onClose(){}}),Lre=E.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:A,onSwipeCancel:f,onSwipeEnd:h,...m}=t,p=lw(og,r),[g,x]=E.useState(null),v=qe(e,R=>x(R)),y=E.useRef(null),w=E.useRef(null),b=i||p.duration,S=E.useRef(0),C=E.useRef(b),T=E.useRef(0),{onToastAdd:B,onToastRemove:_}=p,I=Dr(()=>{var M;(g==null?void 0:g.contains(document.activeElement))&&((M=p.viewport)==null||M.focus()),a()}),L=E.useCallback(R=>{!R||R===1/0||(window.clearTimeout(T.current),S.current=new Date().getTime(),T.current=window.setTimeout(I,R))},[I]);E.useEffect(()=>{const R=p.viewport;if(R){const M=()=>{L(C.current),u==null||u()},k=()=>{const O=new Date().getTime()-S.current;C.current=C.current-O,window.clearTimeout(T.current),l==null||l()};return R.addEventListener(HT,k),R.addEventListener(KT,M),()=>{R.removeEventListener(HT,k),R.removeEventListener(KT,M)}}},[p.viewport,b,l,u,L]),E.useEffect(()=>{s&&!p.isClosePausedRef.current&&L(b)},[s,b,p.isClosePausedRef,L]),E.useEffect(()=>(B(),()=>_()),[B,_]);const N=E.useMemo(()=>g?QH(g):null,[g]);return p.viewport?c.jsxs(c.Fragment,{children:[N&&c.jsx(jre,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),c.jsx(Rre,{scope:r,onClose:I,children:No.createPortal(c.jsx(sI.ItemSlot,{scope:r,children:c.jsx(fre,{asChild:!0,onEscapeKeyDown:Ie(o,()=>{p.isFocusedToastEscapeKeyDownRef.current||I(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":p.swipeDirection,...m,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ie(t.onKeyDown,R=>{R.key==="Escape"&&(o==null||o(R.nativeEvent),R.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Ie(t.onPointerDown,R=>{R.button===0&&(y.current={x:R.clientX,y:R.clientY})}),onPointerMove:Ie(t.onPointerMove,R=>{if(!y.current)return;const M=R.clientX-y.current.x,k=R.clientY-y.current.y,O=!!w.current,j=["left","right"].includes(p.swipeDirection),D=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,F=j?D(0,M):0,$=j?0:D(0,k),U=R.pointerType==="touch"?10:2,K={x:F,y:$},V={originalEvent:R,delta:K};O?(w.current=K,Xg(Nre,A,V,{discrete:!1})):NL(K,p.swipeDirection,U)?(w.current=K,Xg(_re,d,V,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(M)>U||Math.abs(k)>U)&&(y.current=null)}),onPointerUp:Ie(t.onPointerUp,R=>{const M=w.current,k=R.target;if(k.hasPointerCapture(R.pointerId)&&k.releasePointerCapture(R.pointerId),w.current=null,y.current=null,M){const O=R.currentTarget,j={originalEvent:R,delta:M};NL(M,p.swipeDirection,p.swipeThreshold)?Xg(Pre,h,j,{discrete:!0}):Xg(Ire,f,j,{discrete:!0}),O.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),jre=t=>{const{__scopeToast:e,children:r,...n}=t,i=lw(og,e),[s,a]=E.useState(!1),[o,l]=E.useState(!1);return Ore(()=>a(!0)),E.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:c.jsx(aw,{asChild:!0,children:c.jsx(ow,{...n,children:s&&c.jsxs(c.Fragment,{children:[i.label," ",r]})})})},Mre="ToastTitle",MH=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return c.jsx(De.div,{...n,ref:e})});MH.displayName=Mre;var Dre="ToastDescription",DH=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return c.jsx(De.div,{...n,ref:e})});DH.displayName=Dre;var OH="ToastAction",FH=E.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?c.jsx($H,{altText:r,asChild:!0,children:c.jsx(aI,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${OH}\`. Expected non-empty \`string\`.`),null)});FH.displayName=OH;var UH="ToastClose",aI=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=kre(UH,r);return c.jsx($H,{asChild:!0,children:c.jsx(De.button,{type:"button",...n,ref:e,onClick:Ie(t.onClick,i.onClose)})})});aI.displayName=UH;var $H=E.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return c.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function QH(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Fre(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...QH(n))}}),e}function Xg(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?CH(i,s):i.dispatchEvent(s)}var NL=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),s=n>i;return e==="left"||e==="right"?s&&n>r:!s&&i>r};function Ore(t=()=>{}){const e=Dr(t);Ur(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Fre(t){return t.nodeType===t.ELEMENT_NODE}function Ure(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function ME(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var $re=PH,HH=kH,KH=jH,VH=MH,GH=DH,zH=FH,WH=aI;function YH(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=YH(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function gt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=YH(t))&&(n&&(n+=" "),n+=e);return n}const IL=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,PL=gt,$u=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return PL(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],A=s==null?void 0:s[u];if(d===null)return null;const f=IL(d)||IL(A);return i[u][f]}),o=r&&Object.entries(r).reduce((u,d)=>{let[A,f]=d;return f===void 0||(u[A]=f),u},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:A,className:f,...h}=d;return Object.entries(h).every(m=>{let[p,g]=m;return Array.isArray(g)?g.includes({...s,...o}[p]):{...s,...o}[p]===g})?[...u,A,f]:u},[]);return PL(t,a,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>E.createElement("svg",{ref:l,...Hre,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:qH("lucide",i),...o},[...a.map(([u,d])=>E.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(t,e)=>{const r=E.forwardRef(({className:n,...i},s)=>E.createElement(Kre,{ref:s,iconNode:e,className:qH(`lucide-${Qre(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=J("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=J("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=J("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=J("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=J("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=J("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=J("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=J("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=J("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=J("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=J("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=J("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=J("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=J("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=J("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=J("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=J("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=J("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=J("CornerUpRight",[["polyline",{points:"15 14 20 9 15 4",key:"1tbx3s"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=J("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=J("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=J("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=J("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=J("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=J("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=J("FileOutput",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 7V4a2 2 0 0 1 2-2 2 2 0 0 0-2 2",key:"1vk7w2"}],["path",{d:"M4.063 20.999a2 2 0 0 0 2 1L18 22a2 2 0 0 0 2-2V7l-5-5H6",key:"1jink5"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=J("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=J("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=J("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=J("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=J("Goal",[["path",{d:"M12 13V2l8 4-8 4",key:"5wlwwj"}],["path",{d:"M20.561 10.222a9 9 0 1 1-12.55-5.29",key:"1c0wjv"}],["path",{d:"M8.002 9.997a5 5 0 1 0 8.9 2.02",key:"gb1g7m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=J("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=J("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=J("HeartOff",[["line",{x1:"2",y1:"2",x2:"22",y2:"22",key:"1w4vcy"}],["path",{d:"M16.5 16.5 12 21l-7-7c-1.5-1.45-3-3.2-3-5.5a5.5 5.5 0 0 1 2.14-4.35",key:"3mpagl"}],["path",{d:"M8.76 3.1c1.15.22 2.13.78 3.24 1.9 1.5-1.5 2.74-2 4.5-2A5.5 5.5 0 0 1 22 8.5c0 2.12-1.3 3.78-2.67 5.17",key:"1gh3v3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=J("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ane=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=J("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fne=J("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hne=J("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=J("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=J("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=J("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mne=J("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=J("Link2Off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=J("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=J("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gne=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xne=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=J("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vne=J("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=J("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yne=J("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bne=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wne=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ene=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=J("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=J("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sne=J("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=J("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cne=J("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tne=J("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bne=J("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=J("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ne=J("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=J("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=J("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nne=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=J("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=J("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ine=J("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pne=J("RadioTower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=J("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rne=J("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kne=J("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lne=J("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=J("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=J("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jne=J("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=J("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=J("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mne=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=J("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dne=J("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const One=J("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=J("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fne=J("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Une=J("SquareX",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ne=J("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qne=J("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hne=J("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=J("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=J("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=J("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=J("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kne=J("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=J("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vne=J("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gne=J("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zne=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=J("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=J("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wne=J("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yne=J("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qne=J("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xne=J("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=J("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=J("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=J("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),pI="-",Zne=t=>{const e=eie(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const o=a.split(pI);return o[0]===""&&o.length!==1&&o.shift(),v8(o,e)||Jne(a)},getConflictingClassGroupIds:(a,o)=>{const l=r[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},v8=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?v8(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(pI);return(a=e.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},$L=/^\[(.+)\]$/,Jne=t=>{if($L.test(t)){const e=$L.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},eie=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return rie(Object.entries(t.classGroups),r).forEach(([s,a])=>{YT(a,n,s,e)}),n},YT=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:QL(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(tie(i)){YT(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,a])=>{YT(a,QL(e,s),r,n)})})},QL=(t,e)=>{let r=t;return e.split(pI).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},tie=t=>t.isThemeGetter,rie=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[e+a,o])):s);return[r,i]}):t,nie=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,a)=>{r.set(s,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){r.has(s)?r.set(s,a):i(s,a)}}},y8="!",iie=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,a=o=>{const l=[];let u=0,d=0,A;for(let g=0;g<o.length;g++){let x=o[g];if(u===0){if(x===i&&(n||o.slice(g,g+s)===e)){l.push(o.slice(d,g)),d=g+s;continue}if(x==="/"){A=g;continue}}x==="["?u++:x==="]"&&u--}const f=l.length===0?o:o.substring(d),h=f.startsWith(y8),m=h?f.substring(1):f,p=A&&A>d?A-d:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}};return r?o=>r({className:o,parseClassName:a}):a},sie=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},aie=t=>({cache:nie(t.cacheSize),parseClassName:iie(t),...Zne(t)}),oie=/\s+/,lie=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(oie);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:d,hasImportantModifier:A,baseClassName:f,maybePostfixModifierPosition:h}=r(u);let m=!!h,p=n(m?f.substring(0,h):f);if(!p){if(!m){o=u+(o.length>0?" "+o:o);continue}if(p=n(f),!p){o=u+(o.length>0?" "+o:o);continue}m=!1}const g=sie(d).join(":"),x=A?g+y8:g,v=x+p;if(s.includes(v))continue;s.push(v);const y=i(p,m);for(let w=0;w<y.length;++w){const b=y[w];s.push(x+b)}o=u+(o.length>0?" "+o:o)}return o};function cie(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=b8(e))&&(n&&(n+=" "),n+=r);return n}const b8=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=b8(t[n]))&&(r&&(r+=" "),r+=e);return r};function uie(t,...e){let r,n,i,s=a;function a(l){const u=e.reduce((d,A)=>A(d),t());return r=aie(u),n=r.cache.get,i=r.cache.set,s=o,o(l)}function o(l){const u=n(l);if(u)return u;const d=lie(l,r);return i(l,d),d}return function(){return s(cie.apply(null,arguments))}}const Vt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},w8=/^\[(?:([a-z-]+):)?(.+)\]$/i,die=/^\d+\/\d+$/,Aie=new Set(["px","full","screen"]),fie=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hie=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pie=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mie=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gie=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ka=t=>zd(t)||Aie.has(t)||die.test(t),Mo=t=>vf(t,"length",Cie),zd=t=>!!t&&!Number.isNaN(Number(t)),FE=t=>vf(t,"number",zd),th=t=>!!t&&Number.isInteger(Number(t)),xie=t=>t.endsWith("%")&&zd(t.slice(0,-1)),et=t=>w8.test(t),Do=t=>fie.test(t),vie=new Set(["length","size","percentage"]),yie=t=>vf(t,vie,E8),bie=t=>vf(t,"position",E8),wie=new Set(["image","url"]),Eie=t=>vf(t,wie,Bie),Sie=t=>vf(t,"",Tie),rh=()=>!0,vf=(t,e,r)=>{const n=w8.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},Cie=t=>hie.test(t)&&!pie.test(t),E8=()=>!1,Tie=t=>mie.test(t),Bie=t=>gie.test(t),_ie=()=>{const t=Vt("colors"),e=Vt("spacing"),r=Vt("blur"),n=Vt("brightness"),i=Vt("borderColor"),s=Vt("borderRadius"),a=Vt("borderSpacing"),o=Vt("borderWidth"),l=Vt("contrast"),u=Vt("grayscale"),d=Vt("hueRotate"),A=Vt("invert"),f=Vt("gap"),h=Vt("gradientColorStops"),m=Vt("gradientColorStopPositions"),p=Vt("inset"),g=Vt("margin"),x=Vt("opacity"),v=Vt("padding"),y=Vt("saturate"),w=Vt("scale"),b=Vt("sepia"),S=Vt("skew"),C=Vt("space"),T=Vt("translate"),B=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",et,e],L=()=>[et,e],N=()=>["",ka,Mo],R=()=>["auto",zd,et],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],k=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",et],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[zd,et];return{cacheSize:500,separator:":",theme:{colors:[rh],spacing:[ka,Mo],blur:["none","",Do,et],brightness:$(),borderColor:[t],borderRadius:["none","","full",Do,et],borderSpacing:L(),borderWidth:N(),contrast:$(),grayscale:D(),hueRotate:$(),invert:D(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[xie,Mo],inset:I(),margin:I(),opacity:$(),padding:L(),saturate:$(),scale:$(),sepia:D(),skew:$(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",et]}],container:["container"],columns:[{columns:[Do]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),et]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",th,et]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",et]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",th,et]}],"grid-cols":[{"grid-cols":[rh]}],"col-start-end":[{col:["auto",{span:["full",th,et]},et]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[rh]}],"row-start-end":[{row:["auto",{span:[th,et]},et]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",et]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",et,e]}],"min-w":[{"min-w":[et,e,"min","max","fit"]}],"max-w":[{"max-w":[et,e,"none","full","min","max","fit","prose",{screen:[Do]},Do]}],h:[{h:[et,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[et,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[et,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[et,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Do,Mo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",FE]}],"font-family":[{font:[rh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",et]}],"line-clamp":[{"line-clamp":["none",zd,FE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ka,et]}],"list-image":[{"list-image":["none",et]}],"list-style-type":[{list:["none","disc","decimal",et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ka,Mo]}],"underline-offset":[{"underline-offset":["auto",ka,et]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),bie]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yie]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Eie]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...k(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:k()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...k()]}],"outline-offset":[{"outline-offset":[ka,et]}],"outline-w":[{outline:[ka,Mo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ka,Mo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Do,Sie]}],"shadow-color":[{shadow:[rh]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Do,et]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[A]}],saturate:[{saturate:[y]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[A]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",et]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",et]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[th,et]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",et]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ka,Mo,FE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Nie=uie(_ie);function Z(...t){return Nie(gt(t))}const Iie=$re,S8=E.forwardRef(({className:t,...e},r)=>c.jsx(HH,{ref:r,className:Z("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));S8.displayName=HH.displayName;const Pie=$u("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),C8=E.forwardRef(({className:t,variant:e,...r},n)=>c.jsx(KH,{ref:n,className:Z(Pie({variant:e}),t),...r}));C8.displayName=KH.displayName;const Rie=E.forwardRef(({className:t,...e},r)=>c.jsx(zH,{ref:r,className:Z("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));Rie.displayName=zH.displayName;const T8=E.forwardRef(({className:t,...e},r)=>c.jsx(WH,{ref:r,className:Z("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(At,{className:"h-4 w-4"})}));T8.displayName=WH.displayName;const B8=E.forwardRef(({className:t,...e},r)=>c.jsx(VH,{ref:r,className:Z("text-sm font-semibold",t),...e}));B8.displayName=VH.displayName;const _8=E.forwardRef(({className:t,...e},r)=>c.jsx(GH,{ref:r,className:Z("text-sm opacity-90",t),...e}));_8.displayName=GH.displayName;function N8(){const{toasts:t}=lc();return c.jsxs(Iie,{children:[t.map(function({id:e,title:r,description:n,action:i,...s}){return c.jsxs(C8,{...s,children:[c.jsxs("div",{className:"grid gap-1",children:[r&&c.jsx(B8,{children:r}),n&&c.jsx(_8,{children:n})]}),i,c.jsx(T8,{})]},e)}),c.jsx(S8,{})]})}var HL=["light","dark"],kie="(prefers-color-scheme: dark)",Lie=E.createContext(void 0),jie={setTheme:t=>{},themes:[]},Mie=()=>{var t;return(t=E.useContext(Lie))!=null?t:jie};E.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:a,attrs:o,nonce:l})=>{let u=s==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,A=i?HL.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,p=!1,g=!0)=>{let x=a?a[m]:m,v=p?m+"|| ''":`'${x}'`,y="";return i&&g&&!p&&HL.includes(m)&&(y+=`d.style.colorScheme = '${m}';`),r==="class"?p||x?y+=`c.add(${v})`:y+="null":x&&(y+=`d[s](n,${v})`),y},h=t?`!function(){${d}${f(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${kie}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${A}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${A}}catch(t){}}();`;return E.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var Die=t=>{switch(t){case"success":return Uie;case"info":return Qie;case"warning":return $ie;case"error":return Hie;default:return null}},Oie=Array(12).fill(0),Fie=({visible:t,className:e})=>Q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Q.createElement("div",{className:"sonner-spinner"},Oie.map((r,n)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Uie=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$ie=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Qie=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Hie=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Kie=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Vie=()=>{let[t,e]=Q.useState(document.hidden);return Q.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},qT=1,Gie=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:qT++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...i,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=e instanceof Promise?e:e(),s=n!==void 0,a,o=i.then(async u=>{if(a=["resolve",u],Q.isValidElement(u))s=!1,this.create({id:n,type:"default",message:u});else if(Wie(u)&&!u.ok){s=!1;let d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,A=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description;this.create({id:n,type:"error",message:d,description:A})}else if(r.success!==void 0){s=!1;let d=typeof r.success=="function"?await r.success(u):r.success,A=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"success",message:d,description:A})}}).catch(async u=>{if(a=["reject",u],r.error!==void 0){s=!1;let d=typeof r.error=="function"?await r.error(u):r.error,A=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"error",message:d,description:A})}}).finally(()=>{var u;s&&(this.dismiss(n),n=void 0),(u=r.finally)==null||u.call(r)}),l=()=>new Promise((u,d)=>o.then(()=>a[0]==="reject"?d(a[1]):u(a[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||qT++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qn=new Gie,zie=(t,e)=>{let r=(e==null?void 0:e.id)||qT++;return Qn.addToast({title:t,...e,id:r}),r},Wie=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Yie=zie,qie=()=>Qn.toasts,Xie=()=>Qn.getActiveToasts(),Ge=Object.assign(Yie,{success:Qn.success,info:Qn.info,warning:Qn.warning,error:Qn.error,custom:Qn.custom,message:Qn.message,promise:Qn.promise,dismiss:Qn.dismiss,loading:Qn.loading},{getHistory:qie,getToasts:Xie});function Zie(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Zie(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zg(t){return t.label!==void 0}var Jie=3,ese="32px",tse="16px",KL=4e3,rse=356,nse=14,ise=20,sse=200;function ns(...t){return t.filter(Boolean).join(" ")}function ase(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var ose=t=>{var e,r,n,i,s,a,o,l,u,d,A;let{invert:f,toast:h,unstyled:m,interacting:p,setHeights:g,visibleToasts:x,heights:v,index:y,toasts:w,expanded:b,removeToast:S,defaultRichColors:C,closeButton:T,style:B,cancelButtonStyle:_,actionButtonStyle:I,className:L="",descriptionClassName:N="",duration:R,position:M,gap:k,loadingIcon:O,expandByDefault:j,classNames:D,icons:F,closeButtonAriaLabel:$="Close toast",pauseWhenPageIsHidden:U}=t,[K,V]=Q.useState(null),[q,H]=Q.useState(null),[z,ae]=Q.useState(!1),[X,ne]=Q.useState(!1),[ee,G]=Q.useState(!1),[ge,ye]=Q.useState(!1),[Me,ce]=Q.useState(!1),[Be,_e]=Q.useState(0),[He,Se]=Q.useState(0),it=Q.useRef(h.duration||R||KL),Ce=Q.useRef(null),Qe=Q.useRef(null),me=y===0,Pe=y+1<=x,be=h.type,le=h.dismissible!==!1,Ee=h.className||"",ve=h.descriptionClassName||"",pe=Q.useMemo(()=>v.findIndex(fe=>fe.toastId===h.id)||0,[v,h.id]),re=Q.useMemo(()=>{var fe;return(fe=h.closeButton)!=null?fe:T},[h.closeButton,T]),Ke=Q.useMemo(()=>h.duration||R||KL,[h.duration,R]),xe=Q.useRef(0),Oe=Q.useRef(0),st=Q.useRef(0),xt=Q.useRef(null),[Xr,br]=M.split("-"),Fn=Q.useMemo(()=>v.reduce((fe,ue,de)=>de>=pe?fe:fe+ue.height,0),[v,pe]),Os=Vie(),Tn=h.invert||f,Qr=be==="loading";Oe.current=Q.useMemo(()=>pe*k+Fn,[pe,Fn]),Q.useEffect(()=>{it.current=Ke},[Ke]),Q.useEffect(()=>{ae(!0)},[]),Q.useEffect(()=>{let fe=Qe.current;if(fe){let ue=fe.getBoundingClientRect().height;return Se(ue),g(de=>[{toastId:h.id,height:ue,position:h.position},...de]),()=>g(de=>de.filter(rt=>rt.toastId!==h.id))}},[g,h.id]),Q.useLayoutEffect(()=>{if(!z)return;let fe=Qe.current,ue=fe.style.height;fe.style.height="auto";let de=fe.getBoundingClientRect().height;fe.style.height=ue,Se(de),g(rt=>rt.find(ct=>ct.toastId===h.id)?rt.map(ct=>ct.toastId===h.id?{...ct,height:de}:ct):[{toastId:h.id,height:de,position:h.position},...rt])},[z,h.title,h.description,g,h.id]);let $e=Q.useCallback(()=>{ne(!0),_e(Oe.current),g(fe=>fe.filter(ue=>ue.toastId!==h.id)),setTimeout(()=>{S(h)},sse)},[h,S,g,Oe]);Q.useEffect(()=>{if(h.promise&&be==="loading"||h.duration===1/0||h.type==="loading")return;let fe;return b||p||U&&Os?(()=>{if(st.current<xe.current){let ue=new Date().getTime()-xe.current;it.current=it.current-ue}st.current=new Date().getTime()})():it.current!==1/0&&(xe.current=new Date().getTime(),fe=setTimeout(()=>{var ue;(ue=h.onAutoClose)==null||ue.call(h,h),$e()},it.current)),()=>clearTimeout(fe)},[b,p,h,be,U,Os,$e]),Q.useEffect(()=>{h.delete&&$e()},[$e,h.delete]);function Ae(){var fe,ue,de;return F!=null&&F.loading?Q.createElement("div",{className:ns(D==null?void 0:D.loader,(fe=h==null?void 0:h.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":be==="loading"},F.loading):O?Q.createElement("div",{className:ns(D==null?void 0:D.loader,(ue=h==null?void 0:h.classNames)==null?void 0:ue.loader,"sonner-loader"),"data-visible":be==="loading"},O):Q.createElement(Fie,{className:ns(D==null?void 0:D.loader,(de=h==null?void 0:h.classNames)==null?void 0:de.loader),visible:be==="loading"})}return Q.createElement("li",{tabIndex:0,ref:Qe,className:ns(L,Ee,D==null?void 0:D.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[be],(r=h==null?void 0:h.classNames)==null?void 0:r[be]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:C,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":z,"data-promise":!!h.promise,"data-swiped":Me,"data-removed":X,"data-visible":Pe,"data-y-position":Xr,"data-x-position":br,"data-index":y,"data-front":me,"data-swiping":ee,"data-dismissible":le,"data-type":be,"data-invert":Tn,"data-swipe-out":ge,"data-swipe-direction":q,"data-expanded":!!(b||j&&z),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${X?Be:Oe.current}px`,"--initial-height":j?"auto":`${He}px`,...B,...h.style},onDragEnd:()=>{G(!1),V(null),xt.current=null},onPointerDown:fe=>{Qr||!le||(Ce.current=new Date,_e(Oe.current),fe.target.setPointerCapture(fe.pointerId),fe.target.tagName!=="BUTTON"&&(G(!0),xt.current={x:fe.clientX,y:fe.clientY}))},onPointerUp:()=>{var fe,ue,de,rt;if(ge||!le)return;xt.current=null;let ct=Number(((fe=Qe.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Rt=Number(((ue=Qe.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pr=new Date().getTime()-((de=Ce.current)==null?void 0:de.getTime()),Et=K==="x"?ct:Rt,ti=Math.abs(Et)/pr;if(Math.abs(Et)>=ise||ti>.11){_e(Oe.current),(rt=h.onDismiss)==null||rt.call(h,h),H(K==="x"?ct>0?"right":"left":Rt>0?"down":"up"),$e(),ye(!0),ce(!1);return}G(!1),V(null)},onPointerMove:fe=>{var ue,de,rt,ct;if(!xt.current||!le||((ue=window.getSelection())==null?void 0:ue.toString().length)>0)return;let Rt=fe.clientY-xt.current.y,pr=fe.clientX-xt.current.x,Et=(de=t.swipeDirections)!=null?de:ase(M);!K&&(Math.abs(pr)>1||Math.abs(Rt)>1)&&V(Math.abs(pr)>Math.abs(Rt)?"x":"y");let ti={x:0,y:0};K==="y"?(Et.includes("top")||Et.includes("bottom"))&&(Et.includes("top")&&Rt<0||Et.includes("bottom")&&Rt>0)&&(ti.y=Rt):K==="x"&&(Et.includes("left")||Et.includes("right"))&&(Et.includes("left")&&pr<0||Et.includes("right")&&pr>0)&&(ti.x=pr),(Math.abs(ti.x)>0||Math.abs(ti.y)>0)&&ce(!0),(rt=Qe.current)==null||rt.style.setProperty("--swipe-amount-x",`${ti.x}px`),(ct=Qe.current)==null||ct.style.setProperty("--swipe-amount-y",`${ti.y}px`)}},re&&!h.jsx?Q.createElement("button",{"aria-label":$,"data-disabled":Qr,"data-close-button":!0,onClick:Qr||!le?()=>{}:()=>{var fe;$e(),(fe=h.onDismiss)==null||fe.call(h,h)},className:ns(D==null?void 0:D.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},(s=F==null?void 0:F.close)!=null?s:Kie):null,h.jsx||E.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:Q.createElement(Q.Fragment,null,be||h.icon||h.promise?Q.createElement("div",{"data-icon":"",className:ns(D==null?void 0:D.icon,(a=h==null?void 0:h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ae():null,h.type!=="loading"?h.icon||(F==null?void 0:F[be])||Die(be):null):null,Q.createElement("div",{"data-content":"",className:ns(D==null?void 0:D.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},Q.createElement("div",{"data-title":"",className:ns(D==null?void 0:D.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?Q.createElement("div",{"data-description":"",className:ns(N,ve,D==null?void 0:D.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),E.isValidElement(h.cancel)?h.cancel:h.cancel&&Zg(h.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||_,onClick:fe=>{var ue,de;Zg(h.cancel)&&le&&((de=(ue=h.cancel).onClick)==null||de.call(ue,fe),$e())},className:ns(D==null?void 0:D.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,E.isValidElement(h.action)?h.action:h.action&&Zg(h.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||I,onClick:fe=>{var ue,de;Zg(h.action)&&((de=(ue=h.action).onClick)==null||de.call(ue,fe),!fe.defaultPrevented&&$e())},className:ns(D==null?void 0:D.actionButton,(A=h==null?void 0:h.classNames)==null?void 0:A.actionButton)},h.action.label):null))};function VL(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function lse(t,e){let r={};return[t,e].forEach((n,i)=>{let s=i===1,a=s?"--mobile-offset":"--offset",o=s?tse:ese;function l(u){["top","right","bottom","left"].forEach(d=>{r[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${a}-${u}`]=o:r[`${a}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):l(o)}),r}var I8=E.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:a,className:o,offset:l,mobileOffset:u,theme:d="light",richColors:A,duration:f,style:h,visibleToasts:m=Jie,toastOptions:p,dir:g=VL(),gap:x=nse,loadingIcon:v,icons:y,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b}=t,[S,C]=Q.useState([]),T=Q.useMemo(()=>Array.from(new Set([n].concat(S.filter(U=>U.position).map(U=>U.position)))),[S,n]),[B,_]=Q.useState([]),[I,L]=Q.useState(!1),[N,R]=Q.useState(!1),[M,k]=Q.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=Q.useRef(null),j=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=Q.useRef(null),F=Q.useRef(!1),$=Q.useCallback(U=>{C(K=>{var V;return(V=K.find(q=>q.id===U.id))!=null&&V.delete||Qn.dismiss(U.id),K.filter(({id:q})=>q!==U.id)})},[]);return Q.useEffect(()=>Qn.subscribe(U=>{if(U.dismiss){C(K=>K.map(V=>V.id===U.id?{...V,delete:!0}:V));return}setTimeout(()=>{bH.flushSync(()=>{C(K=>{let V=K.findIndex(q=>q.id===U.id);return V!==-1?[...K.slice(0,V),{...K[V],...U},...K.slice(V+1)]:[U,...K]})})})}),[]),Q.useEffect(()=>{if(d!=="system"){k(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?k("dark"):k("light")),typeof window>"u")return;let U=window.matchMedia("(prefers-color-scheme: dark)");try{U.addEventListener("change",({matches:K})=>{k(K?"dark":"light")})}catch{U.addListener(({matches:V})=>{try{k(V?"dark":"light")}catch(q){console.error(q)}})}},[d]),Q.useEffect(()=>{S.length<=1&&L(!1)},[S]),Q.useEffect(()=>{let U=K=>{var V,q;i.every(H=>K[H]||K.code===H)&&(L(!0),(V=O.current)==null||V.focus()),K.code==="Escape"&&(document.activeElement===O.current||(q=O.current)!=null&&q.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[i]),Q.useEffect(()=>{if(O.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,F.current=!1)}},[O.current]),Q.createElement("section",{ref:e,"aria-label":`${w} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((U,K)=>{var V;let[q,H]=U.split("-");return S.length?Q.createElement("ol",{key:U,dir:g==="auto"?VL():g,tabIndex:-1,ref:O,className:o,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":q,"data-lifted":I&&S.length>1&&!s,"data-x-position":H,style:{"--front-toast-height":`${((V=B[0])==null?void 0:V.height)||0}px`,"--width":`${rse}px`,"--gap":`${x}px`,...h,...lse(l,u)},onBlur:z=>{F.current&&!z.currentTarget.contains(z.relatedTarget)&&(F.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||F.current||(F.current=!0,D.current=z.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{N||L(!1)},onDragEnd:()=>L(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},S.filter(z=>!z.position&&K===0||z.position===U).map((z,ae)=>{var X,ne;return Q.createElement(ose,{key:z.id,icons:y,index:ae,toast:z,defaultRichColors:A,duration:(X=p==null?void 0:p.duration)!=null?X:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:m,closeButton:(ne=p==null?void 0:p.closeButton)!=null?ne:a,interacting:N,position:U,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:$,toasts:S.filter(ee=>ee.position==z.position),heights:B.filter(ee=>ee.position==z.position),setHeights:_,expandByDefault:s,gap:x,loadingIcon:v,expanded:I,pauseWhenPageIsHidden:b,swipeDirections:t.swipeDirections})})):null}))});const P8=({...t})=>{const{theme:e="system"}=Mie();return c.jsx(I8,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var cse=f2[" useId ".trim().toString()]||(()=>{}),use=0;function da(t){const[e,r]=E.useState(cse());return Ur(()=>{t||r(n=>n??String(use++))},[t]),t||(e?`radix-${e}`:"")}const dse=["top","right","bottom","left"],Jl=Math.min,ui=Math.max,Gv=Math.round,Jg=Math.floor,Aa=t=>({x:t,y:t}),Ase={left:"right",right:"left",bottom:"top",top:"bottom"},fse={start:"end",end:"start"};function XT(t,e,r){return ui(t,Jl(e,r))}function xo(t,e){return typeof t=="function"?t(e):t}function vo(t){return t.split("-")[0]}function yf(t){return t.split("-")[1]}function mI(t){return t==="x"?"y":"x"}function gI(t){return t==="y"?"height":"width"}const hse=new Set(["top","bottom"]);function na(t){return hse.has(vo(t))?"y":"x"}function xI(t){return mI(na(t))}function pse(t,e,r){r===void 0&&(r=!1);const n=yf(t),i=xI(t),s=gI(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=zv(a)),[a,zv(a)]}function mse(t){const e=zv(t);return[ZT(t),e,ZT(e)]}function ZT(t){return t.replace(/start|end/g,e=>fse[e])}const GL=["left","right"],zL=["right","left"],gse=["top","bottom"],xse=["bottom","top"];function vse(t,e,r){switch(t){case"top":case"bottom":return r?e?zL:GL:e?GL:zL;case"left":case"right":return e?gse:xse;default:return[]}}function yse(t,e,r,n){const i=yf(t);let s=vse(vo(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(ZT)))),s}function zv(t){return t.replace(/left|right|bottom|top/g,e=>Ase[e])}function bse(t){return{top:0,right:0,bottom:0,left:0,...t}}function R8(t){return typeof t!="number"?bse(t):{top:t,right:t,bottom:t,left:t}}function Wv(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function WL(t,e,r){let{reference:n,floating:i}=t;const s=na(e),a=xI(e),o=gI(a),l=vo(e),u=s==="y",d=n.x+n.width/2-i.width/2,A=n.y+n.height/2-i.height/2,f=n[o]/2-i[o]/2;let h;switch(l){case"top":h={x:d,y:n.y-i.height};break;case"bottom":h={x:d,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:A};break;case"left":h={x:n.x-i.width,y:A};break;default:h={x:n.x,y:n.y}}switch(yf(e)){case"start":h[a]-=f*(r&&u?-1:1);break;case"end":h[a]+=f*(r&&u?-1:1);break}return h}async function wse(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:A="floating",altBoundary:f=!1,padding:h=0}=xo(e,t),m=R8(h),g=o[f?A==="floating"?"reference":"floating":A],x=Wv(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),v=A==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),w=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},b=Wv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:y,strategy:l}):v);return{top:(x.top-b.top+m.top)/w.y,bottom:(b.bottom-x.bottom+m.bottom)/w.y,left:(x.left-b.left+m.left)/w.x,right:(b.right-x.right+m.right)/w.x}}const Ese=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:A}=WL(u,n,l),f=n,h={},m=0;for(let g=0;g<o.length;g++){var p;const{name:x,fn:v}=o[g],{x:y,y:w,data:b,reset:S}=await v({x:d,y:A,initialPlacement:n,placement:f,strategy:i,middlewareData:h,rects:u,platform:{...a,detectOverflow:(p=a.detectOverflow)!=null?p:wse},elements:{reference:t,floating:e}});d=y??d,A=w??A,h={...h,[x]:{...h[x],...b}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:A}=WL(u,f,l)),g=-1)}return{x:d,y:A,placement:f,strategy:i,middlewareData:h}},Sse=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:d=0}=xo(t,e)||{};if(u==null)return{};const A=R8(d),f={x:r,y:n},h=xI(i),m=gI(h),p=await a.getDimensions(u),g=h==="y",x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-f[h]-s.floating[m],b=f[h]-s.reference[h],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let C=S?S[y]:0;(!C||!await(a.isElement==null?void 0:a.isElement(S)))&&(C=o.floating[y]||s.floating[m]);const T=w/2-b/2,B=C/2-p[m]/2-1,_=Jl(A[x],B),I=Jl(A[v],B),L=_,N=C-p[m]-I,R=C/2-p[m]/2+T,M=XT(L,R,N),k=!l.arrow&&yf(i)!=null&&R!==M&&s.reference[m]/2-(R<L?_:I)-p[m]/2<0,O=k?R<L?R-L:R-N:0;return{[h]:f[h]+O,data:{[h]:M,centerOffset:R-M-O,...k&&{alignmentOffset:O}},reset:k}}}),Cse=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:A=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=xo(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const x=vo(i),v=na(o),y=vo(o)===o,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),b=f||(y||!p?[zv(o)]:mse(o)),S=m!=="none";!f&&S&&b.push(...yse(o,p,m,w));const C=[o,...b],T=await l.detectOverflow(e,g),B=[];let _=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&B.push(T[x]),A){const R=pse(i,a,w);B.push(T[R[0]],T[R[1]])}if(_=[..._,{placement:i,overflows:B}],!B.every(R=>R<=0)){var I,L;const R=(((I=s.flip)==null?void 0:I.index)||0)+1,M=C[R];if(M&&(!(A==="alignment"?v!==na(M):!1)||_.every(j=>na(j.placement)===v?j.overflows[0]>0:!0)))return{data:{index:R,overflows:_},reset:{placement:M}};let k=(L=_.filter(O=>O.overflows[0]<=0).sort((O,j)=>O.overflows[1]-j.overflows[1])[0])==null?void 0:L.placement;if(!k)switch(h){case"bestFit":{var N;const O=(N=_.filter(j=>{if(S){const D=na(j.placement);return D===v||D==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(D=>D>0).reduce((D,F)=>D+F,0)]).sort((j,D)=>j[1]-D[1])[0])==null?void 0:N[0];O&&(k=O);break}case"initialPlacement":k=o;break}if(i!==k)return{reset:{placement:k}}}return{}}}};function YL(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qL(t){return dse.some(e=>t[e]>=0)}const Tse=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r,platform:n}=e,{strategy:i="referenceHidden",...s}=xo(t,e);switch(i){case"referenceHidden":{const a=await n.detectOverflow(e,{...s,elementContext:"reference"}),o=YL(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qL(o)}}}case"escaped":{const a=await n.detectOverflow(e,{...s,altBoundary:!0}),o=YL(a,r.floating);return{data:{escapedOffsets:o,escaped:qL(o)}}}default:return{}}}}},k8=new Set(["left","top"]);async function Bse(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=vo(r),o=yf(r),l=na(r)==="y",u=k8.has(a)?-1:1,d=s&&l?-1:1,A=xo(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:{mainAxis:A.mainAxis||0,crossAxis:A.crossAxis||0,alignmentAxis:A.alignmentAxis};return o&&typeof m=="number"&&(h=o==="end"?m*-1:m),l?{x:h*d,y:f*u}:{x:f*u,y:h*d}}const _se=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await Bse(e,t);return a===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},Nse=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i,platform:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:v,y}=x;return{x:v,y}}},...u}=xo(t,e),d={x:r,y:n},A=await s.detectOverflow(e,u),f=na(vo(i)),h=mI(f);let m=d[h],p=d[f];if(a){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=m+A[x],w=m-A[v];m=XT(y,m,w)}if(o){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=p+A[x],w=p-A[v];p=XT(y,p,w)}const g=l.fn({...e,[h]:m,[f]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:a,[f]:o}}}}}},Ise=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=xo(t,e),d={x:r,y:n},A=na(i),f=mI(A);let h=d[f],m=d[A];const p=xo(o,e),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const y=f==="y"?"height":"width",w=s.reference[f]-s.floating[y]+g.mainAxis,b=s.reference[f]+s.reference[y]-g.mainAxis;h<w?h=w:h>b&&(h=b)}if(u){var x,v;const y=f==="y"?"width":"height",w=k8.has(vo(i)),b=s.reference[A]-s.floating[y]+(w&&((x=a.offset)==null?void 0:x[A])||0)+(w?0:g.crossAxis),S=s.reference[A]+s.reference[y]+(w?0:((v=a.offset)==null?void 0:v[A])||0)-(w?g.crossAxis:0);m<b?m=b:m>S&&(m=S)}return{[f]:h,[A]:m}}}},Pse=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...u}=xo(t,e),d=await a.detectOverflow(e,u),A=vo(i),f=yf(i),h=na(i)==="y",{width:m,height:p}=s.floating;let g,x;A==="top"||A==="bottom"?(g=A,x=f===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(x=A,g=f==="end"?"top":"bottom");const v=p-d.top-d.bottom,y=m-d.left-d.right,w=Jl(p-d[g],v),b=Jl(m-d[x],y),S=!e.middlewareData.shift;let C=w,T=b;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(T=y),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(C=v),S&&!f){const _=ui(d.left,0),I=ui(d.right,0),L=ui(d.top,0),N=ui(d.bottom,0);h?T=m-2*(_!==0||I!==0?_+I:ui(d.left,d.right)):C=p-2*(L!==0||N!==0?L+N:ui(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:C});const B=await a.getDimensions(o.floating);return m!==B.width||p!==B.height?{reset:{rects:!0}}:{}}}};function fw(){return typeof window<"u"}function bf(t){return L8(t)?(t.nodeName||"").toLowerCase():"#document"}function vi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ca(t){var e;return(e=(L8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function L8(t){return fw()?t instanceof Node||t instanceof vi(t).Node:!1}function Ns(t){return fw()?t instanceof Element||t instanceof vi(t).Element:!1}function va(t){return fw()?t instanceof HTMLElement||t instanceof vi(t).HTMLElement:!1}function XL(t){return!fw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vi(t).ShadowRoot}const Rse=new Set(["inline","contents"]);function ug(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Is(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Rse.has(i)}const kse=new Set(["table","td","th"]);function Lse(t){return kse.has(bf(t))}const jse=[":popover-open",":modal"];function hw(t){return jse.some(e=>{try{return t.matches(e)}catch{return!1}})}const Mse=["transform","translate","scale","rotate","perspective"],Dse=["transform","translate","scale","rotate","perspective","filter"],Ose=["paint","layout","strict","content"];function vI(t){const e=yI(),r=Ns(t)?Is(t):t;return Mse.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||Dse.some(n=>(r.willChange||"").includes(n))||Ose.some(n=>(r.contain||"").includes(n))}function Fse(t){let e=ec(t);for(;va(e)&&!kA(e);){if(vI(e))return e;if(hw(e))return null;e=ec(e)}return null}function yI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Use=new Set(["html","body","#document"]);function kA(t){return Use.has(bf(t))}function Is(t){return vi(t).getComputedStyle(t)}function pw(t){return Ns(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ec(t){if(bf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||XL(t)&&t.host||Ca(t);return XL(e)?e.host:e}function j8(t){const e=ec(t);return kA(e)?t.ownerDocument?t.ownerDocument.body:t.body:va(e)&&ug(e)?e:j8(e)}function Hp(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=j8(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=vi(i);if(s){const o=JT(a);return e.concat(a,a.visualViewport||[],ug(i)?i:[],o&&r?Hp(o):[])}return e.concat(i,Hp(i,[],r))}function JT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function M8(t){const e=Is(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=va(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,o=Gv(r)!==s||Gv(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function bI(t){return Ns(t)?t:t.contextElement}function Wd(t){const e=bI(t);if(!va(e))return Aa(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=M8(e);let a=(s?Gv(r.width):r.width)/n,o=(s?Gv(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const $se=Aa(0);function D8(t){const e=vi(t);return!yI()||!e.visualViewport?$se:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Qse(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==vi(t)?!1:e}function Su(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=bI(t);let a=Aa(1);e&&(n?Ns(n)&&(a=Wd(n)):a=Wd(t));const o=Qse(s,r,n)?D8(s):Aa(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,d=i.width/a.x,A=i.height/a.y;if(s){const f=vi(s),h=n&&Ns(n)?vi(n):n;let m=f,p=JT(m);for(;p&&n&&h!==m;){const g=Wd(p),x=p.getBoundingClientRect(),v=Is(p),y=x.left+(p.clientLeft+parseFloat(v.paddingLeft))*g.x,w=x.top+(p.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,d*=g.x,A*=g.y,l+=y,u+=w,m=vi(p),p=JT(m)}}return Wv({width:d,height:A,x:l,y:u})}function mw(t,e){const r=pw(t).scrollLeft;return e?e.left+r:Su(Ca(t)).left+r}function O8(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-mw(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function Hse(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=Ca(n),o=e?hw(e.floating):!1;if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},u=Aa(1);const d=Aa(0),A=va(n);if((A||!A&&!s)&&((bf(n)!=="body"||ug(a))&&(l=pw(n)),va(n))){const h=Su(n);u=Wd(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}const f=a&&!A&&!s?O8(a,l):Aa(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-l.scrollTop*u.y+d.y+f.y}}function Kse(t){return Array.from(t.getClientRects())}function Vse(t){const e=Ca(t),r=pw(t),n=t.ownerDocument.body,i=ui(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=ui(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+mw(t);const o=-r.scrollTop;return Is(n).direction==="rtl"&&(a+=ui(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}const ZL=25;function Gse(t,e){const r=vi(t),n=Ca(t),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const d=yI();(!d||d&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const u=mw(n);if(u<=0){const d=n.ownerDocument,A=d.body,f=getComputedStyle(A),h=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(n.clientWidth-A.clientWidth-h);m<=ZL&&(s-=m)}else u<=ZL&&(s+=u);return{width:s,height:a,x:o,y:l}}const zse=new Set(["absolute","fixed"]);function Wse(t,e){const r=Su(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=va(t)?Wd(t):Aa(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=i*s.x,u=n*s.y;return{width:a,height:o,x:l,y:u}}function JL(t,e,r){let n;if(e==="viewport")n=Gse(t,r);else if(e==="document")n=Vse(Ca(t));else if(Ns(e))n=Wse(e,r);else{const i=D8(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Wv(n)}function F8(t,e){const r=ec(t);return r===e||!Ns(r)||kA(r)?!1:Is(r).position==="fixed"||F8(r,e)}function Yse(t,e){const r=e.get(t);if(r)return r;let n=Hp(t,[],!1).filter(o=>Ns(o)&&bf(o)!=="body"),i=null;const s=Is(t).position==="fixed";let a=s?ec(t):t;for(;Ns(a)&&!kA(a);){const o=Is(a),l=vI(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&zse.has(i.position)||ug(a)&&!l&&F8(t,a))?n=n.filter(d=>d!==a):i=o,a=ec(a)}return e.set(t,n),n}function qse(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?hw(e)?[]:Yse(e,this._c):[].concat(r),n],o=a[0],l=a.reduce((u,d)=>{const A=JL(e,d,i);return u.top=ui(A.top,u.top),u.right=Jl(A.right,u.right),u.bottom=Jl(A.bottom,u.bottom),u.left=ui(A.left,u.left),u},JL(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xse(t){const{width:e,height:r}=M8(t);return{width:e,height:r}}function Zse(t,e,r){const n=va(e),i=Ca(e),s=r==="fixed",a=Su(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Aa(0);function u(){l.x=mw(i)}if(n||!n&&!s)if((bf(e)!=="body"||ug(i))&&(o=pw(e)),n){const h=Su(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&u();s&&!n&&i&&u();const d=i&&!n&&!s?O8(i,o):Aa(0),A=a.left+o.scrollLeft-l.x-d.x,f=a.top+o.scrollTop-l.y-d.y;return{x:A,y:f,width:a.width,height:a.height}}function UE(t){return Is(t).position==="static"}function ej(t,e){if(!va(t)||Is(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ca(t)===r&&(r=r.ownerDocument.body),r}function U8(t,e){const r=vi(t);if(hw(t))return r;if(!va(t)){let i=ec(t);for(;i&&!kA(i);){if(Ns(i)&&!UE(i))return i;i=ec(i)}return r}let n=ej(t,e);for(;n&&Lse(n)&&UE(n);)n=ej(n,e);return n&&kA(n)&&UE(n)&&!vI(n)?r:n||Fse(t)||r}const Jse=async function(t){const e=this.getOffsetParent||U8,r=this.getDimensions,n=await r(t.floating);return{reference:Zse(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function eae(t){return Is(t).direction==="rtl"}const tae={convertOffsetParentRelativeRectToViewportRelativeRect:Hse,getDocumentElement:Ca,getClippingRect:qse,getOffsetParent:U8,getElementRects:Jse,getClientRects:Kse,getDimensions:Xse,getScale:Wd,isElement:Ns,isRTL:eae};function $8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function rae(t,e){let r=null,n;const i=Ca(t);function s(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:d,top:A,width:f,height:h}=u;if(o||e(),!f||!h)return;const m=Jg(A),p=Jg(i.clientWidth-(d+f)),g=Jg(i.clientHeight-(A+h)),x=Jg(d),y={rootMargin:-m+"px "+-p+"px "+-g+"px "+-x+"px",threshold:ui(0,Jl(1,l))||1};let w=!0;function b(S){const C=S[0].intersectionRatio;if(C!==l){if(!w)return a();C?a(!1,C):n=setTimeout(()=>{a(!1,1e-7)},1e3)}C===1&&!$8(u,t.getBoundingClientRect())&&a(),w=!1}try{r=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{r=new IntersectionObserver(b,y)}r.observe(t)}return a(!0),s}function nae(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=bI(t),d=i||s?[...u?Hp(u):[],...Hp(e)]:[];d.forEach(x=>{i&&x.addEventListener("scroll",r,{passive:!0}),s&&x.addEventListener("resize",r)});const A=u&&o?rae(u,r):null;let f=-1,h=null;a&&(h=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=h)==null||y.observe(e)})),r()}),u&&!l&&h.observe(u),h.observe(e));let m,p=l?Su(t):null;l&&g();function g(){const x=Su(t);p&&!$8(p,x)&&r(),p=x,m=requestAnimationFrame(g)}return r(),()=>{var x;d.forEach(v=>{i&&v.removeEventListener("scroll",r),s&&v.removeEventListener("resize",r)}),A==null||A(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const iae=_se,sae=Nse,aae=Cse,oae=Pse,lae=Tse,tj=Sse,cae=Ise,uae=(t,e,r)=>{const n=new Map,i={platform:tae,...r},s={...i.platform,_c:n};return Ese(t,e,{...i,platform:s})};var dae=typeof document<"u",Aae=function(){},Kx=dae?E.useLayoutEffect:Aae;function Yv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Yv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!Yv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Q8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function rj(t,e){const r=Q8(t);return Math.round(e*r)/r}function $E(t){const e=E.useRef(t);return Kx(()=>{e.current=t}),e}function fae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=t,[d,A]=E.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=E.useState(n);Yv(f,n)||h(n);const[m,p]=E.useState(null),[g,x]=E.useState(null),v=E.useCallback(j=>{j!==S.current&&(S.current=j,p(j))},[]),y=E.useCallback(j=>{j!==C.current&&(C.current=j,x(j))},[]),w=s||m,b=a||g,S=E.useRef(null),C=E.useRef(null),T=E.useRef(d),B=l!=null,_=$E(l),I=$E(i),L=$E(u),N=E.useCallback(()=>{if(!S.current||!C.current)return;const j={placement:e,strategy:r,middleware:f};I.current&&(j.platform=I.current),uae(S.current,C.current,j).then(D=>{const F={...D,isPositioned:L.current!==!1};R.current&&!Yv(T.current,F)&&(T.current=F,No.flushSync(()=>{A(F)}))})},[f,e,r,I,L]);Kx(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,A(j=>({...j,isPositioned:!1})))},[u]);const R=E.useRef(!1);Kx(()=>(R.current=!0,()=>{R.current=!1}),[]),Kx(()=>{if(w&&(S.current=w),b&&(C.current=b),w&&b){if(_.current)return _.current(w,b,N);N()}},[w,b,N,_,B]);const M=E.useMemo(()=>({reference:S,floating:C,setReference:v,setFloating:y}),[v,y]),k=E.useMemo(()=>({reference:w,floating:b}),[w,b]),O=E.useMemo(()=>{const j={position:r,left:0,top:0};if(!k.floating)return j;const D=rj(k.floating,d.x),F=rj(k.floating,d.y);return o?{...j,transform:"translate("+D+"px, "+F+"px)",...Q8(k.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:D,top:F}},[r,o,k.floating,d.x,d.y]);return E.useMemo(()=>({...d,update:N,refs:M,elements:k,floatingStyles:O}),[d,N,M,k,O])}const hae=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?tj({element:n.current,padding:i}).fn(r):{}:n?tj({element:n,padding:i}).fn(r):{}}}},pae=(t,e)=>({...iae(t),options:[t,e]}),mae=(t,e)=>({...sae(t),options:[t,e]}),gae=(t,e)=>({...cae(t),options:[t,e]}),xae=(t,e)=>({...aae(t),options:[t,e]}),vae=(t,e)=>({...oae(t),options:[t,e]}),yae=(t,e)=>({...lae(t),options:[t,e]}),bae=(t,e)=>({...hae(t),options:[t,e]});var wae="Arrow",H8=E.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...s}=t;return c.jsx(De.svg,{...s,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});H8.displayName=wae;var Eae=H8;function dg(t){const[e,r]=E.useState(void 0);return Ur(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=t.offsetWidth,o=t.offsetHeight;r({width:a,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var wI="Popper",[K8,gw]=Cn(wI),[Sae,V8]=K8(wI),G8=t=>{const{__scopePopper:e,children:r}=t,[n,i]=E.useState(null);return c.jsx(Sae,{scope:e,anchor:n,onAnchorChange:i,children:r})};G8.displayName=wI;var z8="PopperAnchor",W8=E.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,s=V8(z8,r),a=E.useRef(null),o=qe(e,a);return E.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:c.jsx(De.div,{...i,ref:o})});W8.displayName=z8;var EI="PopperContent",[Cae,Tae]=K8(EI),Y8=E.forwardRef((t,e)=>{var z,ae,X,ne,ee,G;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:A="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=t,g=V8(EI,r),[x,v]=E.useState(null),y=qe(e,ge=>v(ge)),[w,b]=E.useState(null),S=dg(w),C=(S==null?void 0:S.width)??0,T=(S==null?void 0:S.height)??0,B=n+(s!=="center"?"-"+s:""),_=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},I=Array.isArray(u)?u:[u],L=I.length>0,N={padding:_,boundary:I.filter(_ae),altBoundary:L},{refs:R,floatingStyles:M,placement:k,isPositioned:O,middlewareData:j}=fae({strategy:"fixed",placement:B,whileElementsMounted:(...ge)=>nae(...ge,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[pae({mainAxis:i+T,alignmentAxis:a}),l&&mae({mainAxis:!0,crossAxis:!1,limiter:A==="partial"?gae():void 0,...N}),l&&xae({...N}),vae({...N,apply:({elements:ge,rects:ye,availableWidth:Me,availableHeight:ce})=>{const{width:Be,height:_e}=ye.reference,He=ge.floating.style;He.setProperty("--radix-popper-available-width",`${Me}px`),He.setProperty("--radix-popper-available-height",`${ce}px`),He.setProperty("--radix-popper-anchor-width",`${Be}px`),He.setProperty("--radix-popper-anchor-height",`${_e}px`)}}),w&&bae({element:w,padding:o}),Nae({arrowWidth:C,arrowHeight:T}),f&&yae({strategy:"referenceHidden",...N})]}),[D,F]=Z8(k),$=Dr(m);Ur(()=>{O&&($==null||$())},[O,$]);const U=(z=j.arrow)==null?void 0:z.x,K=(ae=j.arrow)==null?void 0:ae.y,V=((X=j.arrow)==null?void 0:X.centerOffset)!==0,[q,H]=E.useState();return Ur(()=>{x&&H(window.getComputedStyle(x).zIndex)},[x]),c.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:O?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(ne=j.transformOrigin)==null?void 0:ne.x,(ee=j.transformOrigin)==null?void 0:ee.y].join(" "),...((G=j.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(Cae,{scope:r,placedSide:D,onArrowChange:b,arrowX:U,arrowY:K,shouldHideArrow:V,children:c.jsx(De.div,{"data-side":D,"data-align":F,...p,ref:y,style:{...p.style,animation:O?void 0:"none"}})})})});Y8.displayName=EI;var q8="PopperArrow",Bae={top:"bottom",right:"left",bottom:"top",left:"right"},X8=E.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,s=Tae(q8,n),a=Bae[s.placedSide];return c.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:c.jsx(Eae,{...i,ref:r,style:{...i.style,display:"block"}})})});X8.displayName=q8;function _ae(t){return t!==null}var Nae=t=>({name:"transformOrigin",options:t,fn(e){var g,x,v;const{placement:r,rects:n,middlewareData:i}=e,a=((g=i.arrow)==null?void 0:g.centerOffset)!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[u,d]=Z8(r),A={start:"0%",center:"50%",end:"100%"}[d],f=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let m="",p="";return u==="bottom"?(m=a?A:`${f}px`,p=`${-l}px`):u==="top"?(m=a?A:`${f}px`,p=`${n.floating.height+l}px`):u==="right"?(m=`${-l}px`,p=a?A:`${h}px`):u==="left"&&(m=`${n.floating.width+l}px`,p=a?A:`${h}px`),{data:{x:m,y:p}}}});function Z8(t){const[e,r="center"]=t.split("-");return[e,r]}var J8=G8,e6=W8,t6=Y8,r6=X8,[xw,NZe]=Cn("Tooltip",[gw]),vw=gw(),n6="TooltipProvider",Iae=700,eB="tooltip.open",[Pae,SI]=xw(n6),i6=t=>{const{__scopeTooltip:e,delayDuration:r=Iae,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=t,a=E.useRef(!0),o=E.useRef(!1),l=E.useRef(0);return E.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(Pae,{scope:e,isOpenDelayedRef:a,delayDuration:r,onOpen:E.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:E.useCallback(u=>{o.current=u},[]),disableHoverableContent:i,children:s})};i6.displayName=n6;var Kp="Tooltip",[Rae,yw]=xw(Kp),s6=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:i,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=t,l=SI(Kp,t.__scopeTooltip),u=vw(e),[d,A]=E.useState(null),f=da(),h=E.useRef(0),m=a??l.disableHoverableContent,p=o??l.delayDuration,g=E.useRef(!1),[x,v]=zi({prop:n,defaultProp:i??!1,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(eB))):l.onClose(),s==null||s(C)},caller:Kp}),y=E.useMemo(()=>x?g.current?"delayed-open":"instant-open":"closed",[x]),w=E.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g.current=!1,v(!0)},[v]),b=E.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v(!1)},[v]),S=E.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,v(!0),h.current=0},p)},[p,v]);return E.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),c.jsx(J8,{...u,children:c.jsx(Rae,{scope:e,contentId:f,open:x,stateAttribute:y,trigger:d,onTriggerChange:A,onTriggerEnter:E.useCallback(()=>{l.isOpenDelayedRef.current?S():w()},[l.isOpenDelayedRef,S,w]),onTriggerLeave:E.useCallback(()=>{m?b():(window.clearTimeout(h.current),h.current=0)},[b,m]),onOpen:w,onClose:b,disableHoverableContent:m,children:r})})};s6.displayName=Kp;var tB="TooltipTrigger",a6=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=yw(tB,r),s=SI(tB,r),a=vw(r),o=E.useRef(null),l=qe(e,o,i.onTriggerChange),u=E.useRef(!1),d=E.useRef(!1),A=E.useCallback(()=>u.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",A),[A]),c.jsx(e6,{asChild:!0,...a,children:c.jsx(De.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:l,onPointerMove:Ie(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ie(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Ie(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",A,{once:!0})}),onFocus:Ie(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:Ie(t.onBlur,i.onClose),onClick:Ie(t.onClick,i.onClose)})})});a6.displayName=tB;var kae="TooltipPortal",[IZe,Lae]=xw(kae,{forceMount:void 0}),LA="TooltipContent",o6=E.forwardRef((t,e)=>{const r=Lae(LA,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=t,a=yw(LA,t.__scopeTooltip);return c.jsx(Jn,{present:n||a.open,children:a.disableHoverableContent?c.jsx(l6,{side:i,...s,ref:e}):c.jsx(jae,{side:i,...s,ref:e})})}),jae=E.forwardRef((t,e)=>{const r=yw(LA,t.__scopeTooltip),n=SI(LA,t.__scopeTooltip),i=E.useRef(null),s=qe(e,i),[a,o]=E.useState(null),{trigger:l,onClose:u}=r,d=i.current,{onPointerInTransitChange:A}=n,f=E.useCallback(()=>{o(null),A(!1)},[A]),h=E.useCallback((m,p)=>{const g=m.currentTarget,x={x:m.clientX,y:m.clientY},v=Uae(x,g.getBoundingClientRect()),y=$ae(x,v),w=Qae(p.getBoundingClientRect()),b=Kae([...y,...w]);o(b),A(!0)},[A]);return E.useEffect(()=>()=>f(),[f]),E.useEffect(()=>{if(l&&d){const m=g=>h(g,d),p=g=>h(g,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",p)}}},[l,d,h,f]),E.useEffect(()=>{if(a){const m=p=>{const g=p.target,x={x:p.clientX,y:p.clientY},v=(l==null?void 0:l.contains(g))||(d==null?void 0:d.contains(g)),y=!Hae(x,a);v?f():y&&(f(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,a,u,f]),c.jsx(l6,{...t,ref:s})}),[Mae,Dae]=xw(Kp,{isInside:!1}),Oae=tre("TooltipContent"),l6=E.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=t,l=yw(LA,r),u=vw(r),{onClose:d}=l;return E.useEffect(()=>(document.addEventListener(eB,d),()=>document.removeEventListener(eB,d)),[d]),E.useEffect(()=>{if(l.trigger){const A=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&d()};return window.addEventListener("scroll",A,{capture:!0}),()=>window.removeEventListener("scroll",A,{capture:!0})}},[l.trigger,d]),c.jsx(ag,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:A=>A.preventDefault(),onDismiss:d,children:c.jsxs(t6,{"data-state":l.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(Oae,{children:n}),c.jsx(Mae,{scope:r,isInside:!0,children:c.jsx(Ere,{id:l.contentId,role:"tooltip",children:i||n})})]})})});o6.displayName=LA;var c6="TooltipArrow",Fae=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=vw(r);return Dae(c6,r).isInside?null:c.jsx(r6,{...i,...n,ref:e})});Fae.displayName=c6;function Uae(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function $ae(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Qae(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function Hae(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s],l=e[a],u=o.x,d=o.y,A=l.x,f=l.y;d>n!=f>n&&r<(A-u)*(n-d)/(f-d)+u&&(i=!i)}return i}function Kae(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Vae(e)}function Vae(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const s=r[r.length-1],a=r[r.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var Gae=i6,zae=s6,Wae=a6,u6=o6;const d6=Gae,Yae=zae,qae=Wae,A6=E.forwardRef(({className:t,sideOffset:e=4,...r},n)=>c.jsx(u6,{ref:n,sideOffset:e,className:Z("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));A6.displayName=u6.displayName;var bw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ww=typeof window>"u"||"Deno"in globalThis;function us(){}function Xae(t,e){return typeof t=="function"?t(e):t}function Zae(t){return typeof t=="number"&&t>=0&&t!==1/0}function Jae(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rB(t,e){return typeof t=="function"?t(e):t}function eoe(t,e){return typeof t=="function"?t(e):t}function nj(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(n){if(e.queryHash!==CI(a,e.options))return!1}else if(!Gp(e.queryKey,a))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function ij(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(Vp(e.options.mutationKey)!==Vp(s))return!1}else if(!Gp(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function CI(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vp)(t)}function Vp(t){return JSON.stringify(t,(e,r)=>nB(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Gp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Gp(t[r],e[r])):!1}function f6(t,e){if(t===e)return t;const r=sj(t)&&sj(e);if(r||nB(t)&&nB(e)){const n=r?t:Object.keys(t),i=n.length,s=r?e:Object.keys(e),a=s.length,o=r?[]:{},l=new Set(n);let u=0;for(let d=0;d<a;d++){const A=r?d:s[d];(!r&&l.has(A)||r)&&t[A]===void 0&&e[A]===void 0?(o[A]=void 0,u++):(o[A]=f6(t[A],e[A]),o[A]===t[A]&&t[A]!==void 0&&u++)}return i===a&&u===i?t:o}return e}function sj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function nB(t){if(!aj(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!aj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function aj(t){return Object.prototype.toString.call(t)==="[object Object]"}function toe(t){return new Promise(e=>{setTimeout(e,t)})}function roe(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?f6(t,e):e}function noe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function ioe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var TI=Symbol();function h6(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===TI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var qc,ul,pA,t$,soe=(t$=class extends bw{constructor(){super();bt(this,qc);bt(this,ul);bt(this,pA);Ze(this,pA,e=>{if(!ww&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){oe(this,ul)||this.setEventListener(oe(this,pA))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,ul))==null||e.call(this),Ze(this,ul,void 0))}setEventListener(e){var r;Ze(this,pA,e),(r=oe(this,ul))==null||r.call(this),Ze(this,ul,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){oe(this,qc)!==e&&(Ze(this,qc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof oe(this,qc)=="boolean"?oe(this,qc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qc=new WeakMap,ul=new WeakMap,pA=new WeakMap,t$),p6=new soe,mA,dl,gA,r$,aoe=(r$=class extends bw{constructor(){super();bt(this,mA,!0);bt(this,dl);bt(this,gA);Ze(this,gA,e=>{if(!ww&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){oe(this,dl)||this.setEventListener(oe(this,gA))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,dl))==null||e.call(this),Ze(this,dl,void 0))}setEventListener(e){var r;Ze(this,gA,e),(r=oe(this,dl))==null||r.call(this),Ze(this,dl,e(this.setOnline.bind(this)))}setOnline(e){oe(this,mA)!==e&&(Ze(this,mA,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return oe(this,mA)}},mA=new WeakMap,dl=new WeakMap,gA=new WeakMap,r$),qv=new aoe;function ooe(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function loe(t){return Math.min(1e3*2**t,3e4)}function m6(t){return(t??"online")==="online"?qv.isOnline():!0}var g6=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function QE(t){return t instanceof g6}function x6(t){let e=!1,r=0,n=!1,i;const s=ooe(),a=p=>{var g;n||(f(new g6(p)),(g=t.abort)==null||g.call(t))},o=()=>{e=!0},l=()=>{e=!1},u=()=>p6.isFocused()&&(t.networkMode==="always"||qv.isOnline())&&t.canRun(),d=()=>m6(t.networkMode)&&t.canRun(),A=p=>{var g;n||(n=!0,(g=t.onSuccess)==null||g.call(t,p),i==null||i(),s.resolve(p))},f=p=>{var g;n||(n=!0,(g=t.onError)==null||g.call(t,p),i==null||i(),s.reject(p))},h=()=>new Promise(p=>{var g;i=x=>{(n||u())&&p(x)},(g=t.onPause)==null||g.call(t)}).then(()=>{var p;i=void 0,n||(p=t.onContinue)==null||p.call(t)}),m=()=>{if(n)return;let p;const g=r===0?t.initialPromise:void 0;try{p=g??t.fn()}catch(x){p=Promise.reject(x)}Promise.resolve(p).then(A).catch(x=>{var S;if(n)return;const v=t.retry??(ww?0:3),y=t.retryDelay??loe,w=typeof y=="function"?y(r,x):y,b=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,x);if(e||!b){f(x);return}r++,(S=t.onFail)==null||S.call(t,r,x),toe(w).then(()=>u()?void 0:h()).then(()=>{e?f(x):m()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?m():h().then(m),s)}}var coe=t=>setTimeout(t,0);function uoe(){let t=[],e=0,r=o=>{o()},n=o=>{o()},i=coe;const s=o=>{e?t.push(o):i(()=>{r(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var In=uoe(),Xc,n$,v6=(n$=class{constructor(){bt(this,Xc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zae(this.gcTime)&&Ze(this,Xc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ww?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Xc)&&(clearTimeout(oe(this,Xc)),Ze(this,Xc,void 0))}},Xc=new WeakMap,n$),xA,Zc,Ri,Jc,hn,Jm,eu,ds,$a,i$,doe=(i$=class extends v6{constructor(e){super();bt(this,ds);bt(this,xA);bt(this,Zc);bt(this,Ri);bt(this,Jc);bt(this,hn);bt(this,Jm);bt(this,eu);Ze(this,eu,!1),Ze(this,Jm,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ze(this,Jc,e.client),Ze(this,Ri,oe(this,Jc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ze(this,xA,foe(this.options)),this.state=e.state??oe(this,xA),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=oe(this,hn))==null?void 0:e.promise}setOptions(e){this.options={...oe(this,Jm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,Ri).remove(this)}setData(e,r){const n=roe(this.state.data,e,this.options);return dn(this,ds,$a).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){dn(this,ds,$a).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=oe(this,hn))==null?void 0:n.promise;return(i=oe(this,hn))==null||i.cancel(e),r?r.then(us).catch(us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,xA))}isActive(){return this.observers.some(e=>eoe(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===TI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>rB(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Jae(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,hn))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=oe(this,hn))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),oe(this,Ri).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(oe(this,hn)&&(oe(this,eu)?oe(this,hn).cancel({revert:!0}):oe(this,hn).cancelRetry()),this.scheduleGc()),oe(this,Ri).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||dn(this,ds,$a).call(this,{type:"invalidate"})}fetch(e,r){var u,d,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,hn))return oe(this,hn).continueRetry(),oe(this,hn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ze(this,eu,!0),n.signal)})},s=()=>{const f=h6(this.options,r),m=(()=>{const p={client:oe(this,Jc),queryKey:this.queryKey,meta:this.meta};return i(p),p})();return Ze(this,eu,!1),this.options.persister?this.options.persister(f,m,this):f(m)},o=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,Jc),state:this.state,fetchFn:s};return i(f),f})();(u=this.options.behavior)==null||u.onFetch(o,this),Ze(this,Zc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&dn(this,ds,$a).call(this,{type:"fetch",meta:(A=o.fetchOptions)==null?void 0:A.meta});const l=f=>{var h,m,p,g;QE(f)&&f.silent||dn(this,ds,$a).call(this,{type:"error",error:f}),QE(f)||((m=(h=oe(this,Ri).config).onError)==null||m.call(h,f,this),(g=(p=oe(this,Ri).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.scheduleGc()};return Ze(this,hn,x6({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var h,m,p,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){l(x);return}(m=(h=oe(this,Ri).config).onSuccess)==null||m.call(h,f,this),(g=(p=oe(this,Ri).config).onSettled)==null||g.call(p,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{dn(this,ds,$a).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{dn(this,ds,$a).call(this,{type:"pause"})},onContinue:()=>{dn(this,ds,$a).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),oe(this,hn).start()}},xA=new WeakMap,Zc=new WeakMap,Ri=new WeakMap,Jc=new WeakMap,hn=new WeakMap,Jm=new WeakMap,eu=new WeakMap,ds=new WeakSet,$a=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Aoe(n.data,this.options),fetchMeta:e.meta??null};case"success":return Ze(this,Zc,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return QE(i)&&i.revert&&oe(this,Zc)?{...oe(this,Zc),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),In.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),oe(this,Ri).notify({query:this,type:"updated",action:e})})},i$);function Aoe(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:m6(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function foe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Xs,s$,hoe=(s$=class extends bw{constructor(e={}){super();bt(this,Xs);this.config=e,Ze(this,Xs,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??CI(i,r);let a=this.get(s);return a||(a=new doe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){oe(this,Xs).has(e.queryHash)||(oe(this,Xs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=oe(this,Xs).get(e.queryHash);r&&(e.destroy(),r===e&&oe(this,Xs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){In.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,Xs).get(e)}getAll(){return[...oe(this,Xs).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>nj(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>nj(e,n)):r}notify(e){In.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){In.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){In.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xs=new WeakMap,s$),Zs,Bn,tu,Js,Yo,a$,poe=(a$=class extends v6{constructor(e){super();bt(this,Js);bt(this,Zs);bt(this,Bn);bt(this,tu);this.mutationId=e.mutationId,Ze(this,Bn,e.mutationCache),Ze(this,Zs,[]),this.state=e.state||moe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,Zs).includes(e)||(oe(this,Zs).push(e),this.clearGcTimeout(),oe(this,Bn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ze(this,Zs,oe(this,Zs).filter(r=>r!==e)),this.scheduleGc(),oe(this,Bn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,Zs).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Bn).remove(this))}continue(){var e;return((e=oe(this,tu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,a,o,l,u,d,A,f,h,m,p,g,x,v,y,w,b,S,C,T;const r=()=>{dn(this,Js,Yo).call(this,{type:"continue"})};Ze(this,tu,x6({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(B,_)=>{dn(this,Js,Yo).call(this,{type:"failed",failureCount:B,error:_})},onPause:()=>{dn(this,Js,Yo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Bn).canRun(this)}));const n=this.state.status==="pending",i=!oe(this,tu).canStart();try{if(n)r();else{dn(this,Js,Yo).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(s=oe(this,Bn).config).onMutate)==null?void 0:a.call(s,e,this));const _=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));_!==this.state.context&&dn(this,Js,Yo).call(this,{type:"pending",context:_,variables:e,isPaused:i})}const B=await oe(this,tu).start();return await((d=(u=oe(this,Bn).config).onSuccess)==null?void 0:d.call(u,B,e,this.state.context,this)),await((f=(A=this.options).onSuccess)==null?void 0:f.call(A,B,e,this.state.context)),await((m=(h=oe(this,Bn).config).onSettled)==null?void 0:m.call(h,B,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,B,null,e,this.state.context)),dn(this,Js,Yo).call(this,{type:"success",data:B}),B}catch(B){try{throw await((v=(x=oe(this,Bn).config).onError)==null?void 0:v.call(x,B,e,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,B,e,this.state.context)),await((S=(b=oe(this,Bn).config).onSettled)==null?void 0:S.call(b,void 0,B,this.state.variables,this.state.context,this)),await((T=(C=this.options).onSettled)==null?void 0:T.call(C,void 0,B,e,this.state.context)),B}finally{dn(this,Js,Yo).call(this,{type:"error",error:B})}}finally{oe(this,Bn).runNext(this)}}},Zs=new WeakMap,Bn=new WeakMap,tu=new WeakMap,Js=new WeakSet,Yo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),In.batch(()=>{oe(this,Zs).forEach(n=>{n.onMutationUpdate(e)}),oe(this,Bn).notify({mutation:this,type:"updated",action:e})})},a$);function moe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qa,As,eg,o$,goe=(o$=class extends bw{constructor(e={}){super();bt(this,qa);bt(this,As);bt(this,eg);this.config=e,Ze(this,qa,new Set),Ze(this,As,new Map),Ze(this,eg,0)}build(e,r,n){const i=new poe({mutationCache:this,mutationId:++Pg(this,eg)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){oe(this,qa).add(e);const r=e0(e);if(typeof r=="string"){const n=oe(this,As).get(r);n?n.push(e):oe(this,As).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,qa).delete(e)){const r=e0(e);if(typeof r=="string"){const n=oe(this,As).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&oe(this,As).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=e0(e);if(typeof r=="string"){const n=oe(this,As).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=e0(e);if(typeof r=="string"){const i=(n=oe(this,As).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){In.batch(()=>{oe(this,qa).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,qa).clear(),oe(this,As).clear()})}getAll(){return Array.from(oe(this,qa))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ij(r,n))}findAll(e={}){return this.getAll().filter(r=>ij(e,r))}notify(e){In.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return In.batch(()=>Promise.all(e.map(r=>r.continue().catch(us))))}},qa=new WeakMap,As=new WeakMap,eg=new WeakMap,o$);function e0(t){var e;return(e=t.options.scope)==null?void 0:e.id}function oj(t){return{onFetch:(e,r)=>{var d,A,f,h,m;const n=e.options,i=(f=(A=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:A.fetchMore)==null?void 0:f.direction,s=((h=e.state.data)==null?void 0:h.pages)||[],a=((m=e.state.data)==null?void 0:m.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let p=!1;const g=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},x=h6(e.options,e.fetchOptions),v=async(y,w,b)=>{if(p)return Promise.reject();if(w==null&&y.pages.length)return Promise.resolve(y);const C=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:w,direction:b?"backward":"forward",meta:e.options.meta};return g(I),I})(),T=await x(C),{maxPages:B}=e.options,_=b?ioe:noe;return{pages:_(y.pages,T,B),pageParams:_(y.pageParams,w,B)}};if(i&&s.length){const y=i==="backward",w=y?xoe:lj,b={pages:s,pageParams:a},S=w(n,b);o=await v(b,S,y)}else{const y=t??s.length;do{const w=l===0?a[0]??n.initialPageParam:lj(n,o);if(l>0&&w==null)break;o=await v(o,w),l++}while(l<y)}return o};e.options.persister?e.fetchFn=()=>{var p,g;return(g=(p=e.options).persister)==null?void 0:g.call(p,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function lj(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function xoe(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var dr,Al,fl,vA,yA,hl,bA,wA,l$,voe=(l$=class{constructor(t={}){bt(this,dr);bt(this,Al);bt(this,fl);bt(this,vA);bt(this,yA);bt(this,hl);bt(this,bA);bt(this,wA);Ze(this,dr,t.queryCache||new hoe),Ze(this,Al,t.mutationCache||new goe),Ze(this,fl,t.defaultOptions||{}),Ze(this,vA,new Map),Ze(this,yA,new Map),Ze(this,hl,0)}mount(){Pg(this,hl)._++,oe(this,hl)===1&&(Ze(this,bA,p6.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,dr).onFocus())})),Ze(this,wA,qv.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,dr).onOnline())})))}unmount(){var t,e;Pg(this,hl)._--,oe(this,hl)===0&&((t=oe(this,bA))==null||t.call(this),Ze(this,bA,void 0),(e=oe(this,wA))==null||e.call(this),Ze(this,wA,void 0))}isFetching(t){return oe(this,dr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return oe(this,Al).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=oe(this,dr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=oe(this,dr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(rB(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return oe(this,dr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=oe(this,dr).get(n.queryHash),s=i==null?void 0:i.state.data,a=Xae(e,s);if(a!==void 0)return oe(this,dr).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return In.batch(()=>oe(this,dr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=oe(this,dr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=oe(this,dr);In.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=oe(this,dr);return In.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=In.batch(()=>oe(this,dr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(us).catch(us)}invalidateQueries(t,e={}){return In.batch(()=>(oe(this,dr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=In.batch(()=>oe(this,dr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(us)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(us)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=oe(this,dr).build(this,e);return r.isStaleByTime(rB(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(us).catch(us)}fetchInfiniteQuery(t){return t.behavior=oj(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(us).catch(us)}ensureInfiniteQueryData(t){return t.behavior=oj(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qv.isOnline()?oe(this,Al).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,dr)}getMutationCache(){return oe(this,Al)}getDefaultOptions(){return oe(this,fl)}setDefaultOptions(t){Ze(this,fl,t)}setQueryDefaults(t,e){oe(this,vA).set(Vp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...oe(this,vA).values()],r={};return e.forEach(n=>{Gp(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){oe(this,yA).set(Vp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...oe(this,yA).values()],r={};return e.forEach(n=>{Gp(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...oe(this,fl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=CI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===TI&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...oe(this,fl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){oe(this,dr).clear(),oe(this,Al).clear()}},dr=new WeakMap,Al=new WeakMap,fl=new WeakMap,vA=new WeakMap,yA=new WeakMap,hl=new WeakMap,bA=new WeakMap,wA=new WeakMap,l$),yoe=E.createContext(void 0),boe=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(yoe.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zp(){return zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zp.apply(this,arguments)}var gl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gl||(gl={}));const cj="popstate";function woe(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return iB("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:b6(i)}return Soe(e,r,null,t)}function Br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y6(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Eoe(){return Math.random().toString(36).substr(2,8)}function uj(t,e){return{usr:t.state,key:t.key,idx:e}}function iB(t,e,r,n){return r===void 0&&(r=null),zp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wf(e):e,{state:r,key:e&&e.key||n||Eoe()})}function b6(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wf(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Soe(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=gl.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(zp({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function A(){o=gl.Pop;let g=d(),x=g==null?null:g-u;u=g,l&&l({action:o,location:p.location,delta:x})}function f(g,x){o=gl.Push;let v=iB(p.location,g,x);u=d()+1;let y=uj(v,u),w=p.createHref(v);try{a.pushState(y,"",w)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(w)}s&&l&&l({action:o,location:p.location,delta:1})}function h(g,x){o=gl.Replace;let v=iB(p.location,g,x);u=d();let y=uj(v,u),w=p.createHref(v);a.replaceState(y,"",w),s&&l&&l({action:o,location:p.location,delta:0})}function m(g){let x=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:b6(g);return v=v.replace(/ $/,"%20"),Br(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let p={get action(){return o},get location(){return t(i,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(cj,A),l=g,()=>{i.removeEventListener(cj,A),l=null}},createHref(g){return e(i,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:h,go(g){return a.go(g)}};return p}var dj;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dj||(dj={}));function Coe(t,e,r){return r===void 0&&(r="/"),Toe(t,e,r,!1)}function Toe(t,e,r,n){let i=typeof e=="string"?wf(e):e,s=S6(i.pathname||"/",r);if(s==null)return null;let a=w6(t);Boe(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Ooe(s);o=Moe(a[l],u,n)}return o}function w6(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Br(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=su([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(Br(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),w6(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Loe(u,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of E6(s.path))i(s,a,l)}),e}function E6(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=E6(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Boe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:joe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const _oe=/^:[\w-]+$/,Noe=3,Ioe=2,Poe=1,Roe=10,koe=-2,Aj=t=>t==="*";function Loe(t,e){let r=t.split("/"),n=r.length;return r.some(Aj)&&(n+=koe),e&&(n+=Ioe),r.filter(i=>!Aj(i)).reduce((i,s)=>i+(_oe.test(s)?Noe:s===""?Poe:Roe),n)}function joe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Moe(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",A=fj({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!A&&u&&r&&!n[n.length-1].route.index&&(A=fj({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!A)return null;Object.assign(i,A.params),a.push({params:i,pathname:su([s,A.pathname]),pathnameBase:Qoe(su([s,A.pathnameBase])),route:f}),A.pathnameBase!=="/"&&(s=su([s,A.pathnameBase]))}return a}function fj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Doe(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,d,A)=>{let{paramName:f,isOptional:h}=d;if(f==="*"){let p=o[A]||"";a=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const m=o[A];return h&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function Doe(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),y6(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Ooe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return y6(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function S6(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Foe(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?wf(t):t;return{pathname:r?r.startsWith("/")?r:Uoe(r,e):e,search:Hoe(n),hash:Koe(i)}}function Uoe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function HE(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $oe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function C6(t,e){let r=$oe(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function T6(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=wf(t):(i=zp({},t),Br(!i.pathname||!i.pathname.includes("?"),HE("?","pathname","search",i)),Br(!i.pathname||!i.pathname.includes("#"),HE("#","pathname","hash",i)),Br(!i.search||!i.search.includes("#"),HE("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let A=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),A-=1;i.pathname=f.join("/")}o=A>=0?e[A]:"/"}let l=Foe(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const su=t=>t.join("/").replace(/\/\/+/g,"/"),Qoe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hoe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Koe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Voe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B6=["post","put","patch","delete"];new Set(B6);const Goe=["get",...B6];new Set(Goe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wp.apply(this,arguments)}const BI=E.createContext(null),zoe=E.createContext(null),Ag=E.createContext(null),Ew=E.createContext(null),Hu=E.createContext({outlet:null,matches:[],isDataRoute:!1}),_6=E.createContext(null);function fg(){return E.useContext(Ew)!=null}function Ef(){return fg()||Br(!1),E.useContext(Ew).location}function N6(t){E.useContext(Ag).static||E.useLayoutEffect(t)}function Sw(){let{isDataRoute:t}=E.useContext(Hu);return t?ale():Woe()}function Woe(){fg()||Br(!1);let t=E.useContext(BI),{basename:e,future:r,navigator:n}=E.useContext(Ag),{matches:i}=E.useContext(Hu),{pathname:s}=Ef(),a=JSON.stringify(C6(i,r.v7_relativeSplatPath)),o=E.useRef(!1);return N6(()=>{o.current=!0}),E.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let A=T6(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:su([e,A.pathname])),(d.replace?n.replace:n.push)(A,d.state,d)},[e,n,a,s,t])}function Yoe(t,e){return qoe(t,e)}function qoe(t,e,r,n){fg()||Br(!1);let{navigator:i}=E.useContext(Ag),{matches:s}=E.useContext(Hu),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Ef(),d;if(e){var A;let g=typeof e=="string"?wf(e):e;l==="/"||(A=g.pathname)!=null&&A.startsWith(l)||Br(!1),d=g}else d=u;let f=d.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=Coe(t,{pathname:h}),p=tle(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:su([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:su([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,r,n);return e&&p?E.createElement(Ew.Provider,{value:{location:Wp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gl.Pop}},p):p}function Xoe(){let t=sle(),e=Voe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:i},r):null,null)}const Zoe=E.createElement(Xoe,null);class Joe extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?E.createElement(Hu.Provider,{value:this.props.routeContext},E.createElement(_6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ele(t){let{routeContext:e,match:r,children:n}=t,i=E.useContext(BI);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(Hu.Provider,{value:e},n)}function tle(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(A=>A.route.id&&(o==null?void 0:o[A.route.id])!==void 0);d>=0||Br(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let A=a[d];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(u=d),A.route.id){let{loaderData:f,errors:h}=r,m=A.route.loader&&f[A.route.id]===void 0&&(!h||h[A.route.id]===void 0);if(A.route.lazy||m){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,A,f)=>{let h,m=!1,p=null,g=null;r&&(h=o&&A.route.id?o[A.route.id]:void 0,p=A.route.errorElement||Zoe,l&&(u<0&&f===0?(m=!0,g=null):u===f&&(m=!0,g=A.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,f+1)),v=()=>{let y;return h?y=p:m?y=g:A.route.Component?y=E.createElement(A.route.Component,null):A.route.element?y=A.route.element:y=d,E.createElement(ele,{match:A,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:y})};return r&&(A.route.ErrorBoundary||A.route.errorElement||f===0)?E.createElement(Joe,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var I6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I6||{}),Xv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xv||{});function rle(t){let e=E.useContext(BI);return e||Br(!1),e}function nle(t){let e=E.useContext(zoe);return e||Br(!1),e}function ile(t){let e=E.useContext(Hu);return e||Br(!1),e}function P6(t){let e=ile(),r=e.matches[e.matches.length-1];return r.route.id||Br(!1),r.route.id}function sle(){var t;let e=E.useContext(_6),r=nle(Xv.UseRouteError),n=P6(Xv.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function ale(){let{router:t}=rle(I6.UseNavigateStable),e=P6(Xv.UseNavigateStable),r=E.useRef(!1);return N6(()=>{r.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Wp({fromRouteId:e},s)))},[t,e])}function ole(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function KE(t){let{to:e,replace:r,state:n,relative:i}=t;fg()||Br(!1);let{future:s,static:a}=E.useContext(Ag),{matches:o}=E.useContext(Hu),{pathname:l}=Ef(),u=Sw(),d=T6(e,C6(o,s.v7_relativeSplatPath),l,i==="path"),A=JSON.stringify(d);return E.useEffect(()=>u(JSON.parse(A),{replace:r,state:n,relative:i}),[u,A,i,r,n]),null}function Qa(t){Br(!1)}function lle(t){let{basename:e="/",children:r=null,location:n,navigationType:i=gl.Pop,navigator:s,static:a=!1,future:o}=t;fg()&&Br(!1);let l=e.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:l,navigator:s,static:a,future:Wp({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=wf(n));let{pathname:d="/",search:A="",hash:f="",state:h=null,key:m="default"}=n,p=E.useMemo(()=>{let g=S6(d,l);return g==null?null:{location:{pathname:g,search:A,hash:f,state:h,key:m},navigationType:i}},[l,d,A,f,h,m,i]);return p==null?null:E.createElement(Ag.Provider,{value:u},E.createElement(Ew.Provider,{children:r,value:p}))}function cle(t){let{children:e,location:r}=t;return Yoe(sB(e),r)}new Promise(()=>{});function sB(t,e){e===void 0&&(e=[]);let r=[];return E.Children.forEach(t,(n,i)=>{if(!E.isValidElement(n))return;let s=[...e,i];if(n.type===E.Fragment){r.push.apply(r,sB(n.props.children,s));return}n.type!==Qa&&Br(!1),!n.props.index||!n.props.children||Br(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=sB(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ule="6";try{window.__reactRouterVersion=ule}catch{}const dle="startTransition",hj=f2[dle];function Ale(t){let{basename:e,children:r,future:n,window:i}=t,s=E.useRef();s.current==null&&(s.current=woe({window:i,v5Compat:!0}));let a=s.current,[o,l]=E.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=E.useCallback(A=>{u&&hj?hj(()=>l(A)):l(A)},[l,u]);return E.useLayoutEffect(()=>a.listen(d),[a,d]),E.useEffect(()=>ole(n),[n]),E.createElement(lle,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}var pj;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pj||(pj={}));var mj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mj||(mj={}));const ya=Object.create(null);ya.open="0";ya.close="1";ya.ping="2";ya.pong="3";ya.message="4";ya.upgrade="5";ya.noop="6";const Vx=Object.create(null);Object.keys(ya).forEach(t=>{Vx[ya[t]]=t});const aB={type:"error",data:"parser error"},R6=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",k6=typeof ArrayBuffer=="function",L6=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,_I=({type:t,data:e},r,n)=>R6&&e instanceof Blob?r?n(e):gj(e,n):k6&&(e instanceof ArrayBuffer||L6(e))?r?n(e):gj(new Blob([e]),n):n(ya[t]+(e||"")),gj=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function xj(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let VE;function fle(t,e){if(R6&&t.data instanceof Blob)return t.data.arrayBuffer().then(xj).then(e);if(k6&&(t.data instanceof ArrayBuffer||L6(t.data)))return e(xj(t.data));_I(t,!1,r=>{VE||(VE=new TextEncoder),e(VE.encode(r))})}const vj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ph=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<vj.length;t++)Ph[vj.charCodeAt(t)]=t;const hle=t=>{let e=t.length*.75,r=t.length,n,i=0,s,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(n=0;n<r;n+=4)s=Ph[t.charCodeAt(n)],a=Ph[t.charCodeAt(n+1)],o=Ph[t.charCodeAt(n+2)],l=Ph[t.charCodeAt(n+3)],d[i++]=s<<2|a>>4,d[i++]=(a&15)<<4|o>>2,d[i++]=(o&3)<<6|l&63;return u},ple=typeof ArrayBuffer=="function",NI=(t,e)=>{if(typeof t!="string")return{type:"message",data:j6(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:mle(t.substring(1),e)}:Vx[r]?t.length>1?{type:Vx[r],data:t.substring(1)}:{type:Vx[r]}:aB},mle=(t,e)=>{if(ple){const r=hle(t);return j6(r,e)}else return{base64:!0,data:t}},j6=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},M6="",gle=(t,e)=>{const r=t.length,n=new Array(r);let i=0;t.forEach((s,a)=>{_I(s,!1,o=>{n[a]=o,++i===r&&e(n.join(M6))})})},xle=(t,e)=>{const r=t.split(M6),n=[];for(let i=0;i<r.length;i++){const s=NI(r[i],e);if(n.push(s),s.type==="error")break}return n};function vle(){return new TransformStream({transform(t,e){fle(t,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(r)})}})}let GE;function t0(t){return t.reduce((e,r)=>e+r.length,0)}function r0(t,e){if(t[0].length===e)return t.shift();const r=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)r[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function yle(t,e){GE||(GE=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(a,o){for(r.push(a);;){if(n===0){if(t0(r)<1)break;const l=r0(r,1);s=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(t0(r)<2)break;const l=r0(r,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(t0(r)<8)break;const l=r0(r,8),u=new DataView(l.buffer,l.byteOffset,l.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){o.enqueue(aB);break}i=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(t0(r)<i)break;const l=r0(r,i);o.enqueue(NI(s?l:GE.decode(l),e)),n=0}if(i===0||i>t){o.enqueue(aB);break}}}})}const D6=4;function Tr(t){if(t)return ble(t)}function ble(t){for(var e in Tr.prototype)t[e]=Tr.prototype[e];return t}Tr.prototype.on=Tr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Tr.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Tr.prototype.off=Tr.prototype.removeListener=Tr.prototype.removeAllListeners=Tr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Tr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};Tr.prototype.emitReserved=Tr.prototype.emit;Tr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Tr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Cw=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),ji=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),wle="arraybuffer";function O6(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const Ele=ji.setTimeout,Sle=ji.clearTimeout;function Tw(t,e){e.useNativeTimers?(t.setTimeoutFn=Ele.bind(ji),t.clearTimeoutFn=Sle.bind(ji)):(t.setTimeoutFn=ji.setTimeout.bind(ji),t.clearTimeoutFn=ji.clearTimeout.bind(ji))}const Cle=1.33;function Tle(t){return typeof t=="string"?Ble(t):Math.ceil((t.byteLength||t.size)*Cle)}function Ble(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function F6(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _le(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function Nle(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Ile extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}class II extends Tr{constructor(e){super(),this.writable=!1,Tw(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,r,n){return super.emitReserved("error",new Ile(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=NI(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=_le(e);return r.length?"?"+r:""}}class Ple extends II{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};xle(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,gle(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=F6()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}}let U6=!1;try{U6=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Rle=U6;function kle(){}class Lle extends Ple{constructor(e){if(super(e),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}class fa extends Tr{constructor(e,r,n){super(),this.createRequest=e,Tw(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const r=O6(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=fa.requestsCount++,fa.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=kle,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fa.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fa.requestsCount=0;fa.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",yj);else if(typeof addEventListener=="function"){const t="onpagehide"in ji?"pagehide":"unload";addEventListener(t,yj,!1)}}function yj(){for(let t in fa.requests)fa.requests.hasOwnProperty(t)&&fa.requests[t].abort()}const jle=function(){const t=$6({xdomain:!1});return t&&t.responseType!==null}();class Mle extends Lle{constructor(e){super(e);const r=e&&e.forceBase64;this.supportsBinary=jle&&!r}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new fa($6,this.uri(),e)}}function $6(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Rle))return new XMLHttpRequest}catch{}if(!e)try{return new ji[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Q6=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Dle extends II{get name(){return"websocket"}doOpen(){const e=this.uri(),r=this.opts.protocols,n=Q6?{}:O6(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;_I(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}i&&Cw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=F6()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}}const zE=ji.WebSocket||ji.MozWebSocket;class Ole extends Dle{createSocket(e,r,n){return Q6?new zE(e,r,n):r?new zE(e,r):new zE(e)}doWrite(e,r){this.ws.send(r)}}class Fle extends II{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const r=yle(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),i=vle();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{n.read().then(({done:o,value:l})=>{o||(this.onPacket(l),s())}).catch(o=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;this._writer.write(n).then(()=>{i&&Cw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ule={websocket:Ole,webtransport:Fle,polling:Mle},$le=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qle=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function oB(t){if(t.length>8e3)throw"URI too long";const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=$le.exec(t||""),s={},a=14;for(;a--;)s[Qle[a]]=i[a]||"";return r!=-1&&n!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Hle(s,s.path),s.queryKey=Kle(s,s.query),s}function Hle(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Kle(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}const lB=typeof addEventListener=="function"&&typeof removeEventListener=="function",Gx=[];lB&&addEventListener("offline",()=>{Gx.forEach(t=>t())},!1);class Fl extends Tr{constructor(e,r){if(super(),this.binaryType=wle,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){const n=oB(e);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=oB(r.host).host);Tw(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Nle(this.opts.query)),lB&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Gx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=D6,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Fl.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Fl.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=Tle(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Cw(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,n){return this._sendPacket("message",e,r,n),this}send(e,r,n){return this._sendPacket("message",e,r,n),this}_sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:e,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Fl.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),lB&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Gx.indexOf(this._offlineEventListener);n!==-1&&Gx.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}Fl.protocol=D6;class Vle extends Fl{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let r=this.createTransport(e),n=!1;Fl.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",A=>{if(!n)if(A.type==="pong"&&A.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Fl.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function s(){n||(n=!0,d(),r.close(),r=null)}const a=A=>{const f=new Error("probe error: "+A);f.transport=r.name,s(),this.emitReserved("upgradeError",f)};function o(){a("transport closed")}function l(){a("socket closed")}function u(A){r&&A.name!==r.name&&s()}const d=()=>{r.removeListener("open",i),r.removeListener("error",a),r.removeListener("close",o),this.off("close",l),this.off("upgrading",u)};r.once("open",i),r.once("error",a),r.once("close",o),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const r=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}}let Gle=class extends Vle{constructor(e,r={}){const n=typeof e=="object"?e:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>Ule[i]).filter(i=>!!i)),super(e,n)}};function zle(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=oB(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+e,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const Wle=typeof ArrayBuffer=="function",Yle=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,H6=Object.prototype.toString,qle=typeof Blob=="function"||typeof Blob<"u"&&H6.call(Blob)==="[object BlobConstructor]",Xle=typeof File=="function"||typeof File<"u"&&H6.call(File)==="[object FileConstructor]";function PI(t){return Wle&&(t instanceof ArrayBuffer||Yle(t))||qle&&t instanceof Blob||Xle&&t instanceof File}function zx(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(zx(t[r]))return!0;return!1}if(PI(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return zx(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&zx(t[r]))return!0;return!1}function Zle(t){const e=[],r=t.data,n=t;return n.data=cB(r,e),n.attachments=e.length,{packet:n,buffers:e}}function cB(t,e){if(!t)return t;if(PI(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=cB(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=cB(t[n],e));return r}return t}function Jle(t,e){return t.data=uB(t.data,e),delete t.attachments,t}function uB(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=uB(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=uB(t[r],e));return t}const ece=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tce=5;var pt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pt||(pt={}));class rce{constructor(e){this.replacer=e}encode(e){return(e.type===pt.EVENT||e.type===pt.ACK)&&zx(e)?this.encodeAsBinary({type:e.type===pt.EVENT?pt.BINARY_EVENT:pt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===pt.BINARY_EVENT||e.type===pt.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=Zle(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function bj(t){return Object.prototype.toString.call(t)==="[object Object]"}class RI extends Tr{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===pt.BINARY_EVENT;n||r.type===pt.BINARY_ACK?(r.type=n?pt.EVENT:pt.ACK,this.reconstructor=new nce(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(PI(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(pt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===pt.BINARY_EVENT||n.type===pt.BINARY_ACK){const s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const a=e.substring(s,r);if(a!=Number(a)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(s,r)}else n.nsp="/";const i=e.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const a=e.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===e.length)break}n.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){const s=this.tryParse(e.substr(r));if(RI.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case pt.CONNECT:return bj(r);case pt.DISCONNECT:return r===void 0;case pt.CONNECT_ERROR:return typeof r=="string"||bj(r);case pt.EVENT:case pt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&ece.indexOf(r[0])===-1);case pt.ACK:case pt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class nce{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=Jle(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ice=Object.freeze(Object.defineProperty({__proto__:null,Decoder:RI,Encoder:rce,get PacketType(){return pt},protocol:tce},Symbol.toStringTag,{value:"Module"}));function hs(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const sce=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class K6 extends Tr{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[hs(e,"open",this.onopen.bind(this)),hs(e,"packet",this.onpacket.bind(this)),hs(e,"error",this.onerror.bind(this)),hs(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){var n,i,s;if(sce.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:pt.EVENT,data:r};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,A=r.pop();this._registerAckCallback(d,A),a.id=d}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=r;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(s),r.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...r){return new Promise((n,i)=>{const s=(a,o)=>a?i(a):n(o);s.withError=!0,r.push(s),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case pt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pt.EVENT:case pt.BINARY_EVENT:this.onevent(e);break;case pt.ACK:case pt.BINARY_ACK:this.onack(e);break;case pt.DISCONNECT:this.ondisconnect();break;case pt.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:pt.ACK,id:e,data:i}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function Sf(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Sf.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Sf.prototype.reset=function(){this.attempts=0};Sf.prototype.setMin=function(t){this.ms=t};Sf.prototype.setMax=function(t){this.max=t};Sf.prototype.setJitter=function(t){this.jitter=t};class dB extends Tr{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Tw(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Sf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const i=r.parser||ice;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Gle(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=hs(r,"open",function(){n.onopen(),e&&e()}),s=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=hs(r,"error",s);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),r.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(hs(e,"ping",this.onping.bind(this)),hs(e,"data",this.ondata.bind(this)),hs(e,"error",this.onerror.bind(this)),hs(e,"close",this.onclose.bind(this)),hs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){Cw(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new K6(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const nh={};function Wx(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=zle(t,e.path||"/socket.io"),n=r.source,i=r.id,s=r.path,a=nh[i]&&s in nh[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new dB(n,e):(nh[i]||(nh[i]=new dB(n,e)),l=nh[i]),r.query&&!e.query&&(e.query=r.queryKey),l.socket(r.path,e)}Object.assign(Wx,{Manager:dB,Socket:K6,io:Wx,connect:Wx});const wj={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ANALYSIS_API_URL:"/analysis-api",VITE_API_BASE_URL:"",VITE_API_URL:"",VITE_DEFAULT_STREAM_URL:"http://hookpro.site:80/get.php?username=21100486108183&password=30860318814333&type=m3u_plus&output=m3u8",VITE_SOCKET_URL:"",VITE_USER_NODE_ENV:"production"};var Ej={};const kI=t=>{if(typeof import.meta<"u"&&wj)return wj[t];if(typeof process<"u"&&Ej)return Ej[t]},hr=(()=>{const t=kI("VITE_API_BASE_URL");return t!==void 0?t:typeof window<"u"?"":"http://localhost:3001"})(),V6=(kI("VITE_SOCKET_URL")||hr).replace(/\/api$/,""),Cu=kI("VITE_ANALYSIS_API_URL")||hr,xl={"Content-Type":"application/json","ngrok-skip-browser-warning":"true","Bypass-Tunnel-Reminder":"true"};console.log("API Configuration Loaded:",{API_BASE_URL:hr,API_SOCKET_URL:V6,ANALYSIS_API_URL:Cu});const G6=E.createContext(void 0),ace=({children:t})=>{const[e,r]=E.useState(()=>{const d=localStorage.getItem("tacta_user");try{return d?JSON.parse(d):null}catch(A){return console.error("Failed to parse initial user",A),null}}),[n,i]=E.useState(localStorage.getItem("tacta_token")),[s,a]=E.useState(!!localStorage.getItem("tacta_token"));E.useEffect(()=>{const d=localStorage.getItem("tacta_user"),A=localStorage.getItem("tacta_token");if(A&&d)try{const f=JSON.parse(d);r(f)}catch(f){console.error("Failed to parse user data",f),u()}else A&&!d&&(console.warn("Found token but no user data, logging out to ensure consistency"),u())},[]);const o=d=>{if(!e||!e.permissions)return!1;if(e.permissions.includes("*")||e.permissions.includes(d))return!0;const A=e.permissions.filter(f=>f.endsWith(".*"));for(const f of A){const h=f.slice(0,-2);if(d.startsWith(h))return!0}return!1},l=async(d,A)=>{try{const f=await fetch(`${hr}/api/auth/login`,{method:"POST",headers:xl,body:JSON.stringify({username:d,password:A})});if(!f.ok){const m=await f.json();throw new Error(m.error||"Login failed")}const h=await f.json();i(h.token),r(h.user),a(!0),localStorage.setItem("tacta_token",h.token),localStorage.setItem("tacta_user",JSON.stringify(h.user))}catch(f){throw console.error("Login error:",f),f}},u=()=>{i(null),r(null),a(!1),localStorage.removeItem("tacta_token"),localStorage.removeItem("tacta_user"),window.location.href="/login"};return c.jsx(G6.Provider,{value:{user:e,token:n,login:l,logout:u,isAuthenticated:s,hasPermission:o},children:t})},Ta=()=>{const t=E.useContext(G6);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},z6=E.createContext({socket:null,connected:!1,role:null}),oce=({children:t})=>{const{token:e}=Ta(),r=E.useRef(null),[n,i]=E.useState(!1),[s,a]=E.useState(null);return E.useEffect(()=>{if(!e){r.current&&(console.info("[socket] User logged out, disconnecting socket."),r.current.disconnect(),r.current=null,i(!1),a(null));return}console.info("[socket] Token available, connecting...");const o=Wx(V6,{path:"/socket.io",transports:["websocket"],timeout:5e3,reconnectionAttempts:5,auth:{token:e}});return r.current=o,o.on("connect",()=>{console.log("[socket] connected:",o.id),i(!0)}),o.on("role-assignment",l=>{console.log("[socket] role-assigned:",l),a(l)}),o.on("disconnect",l=>{console.warn("[socket] disconnected:",l),i(!1)}),o.on("connect_error",l=>{console.error("[socket] connect error:",l.message)}),()=>{console.info("[socket] Cleaning up connection..."),o.disconnect(),r.current=null,i(!1)}},[e]),c.jsx(z6.Provider,{value:{socket:r.current,connected:n,role:s},children:t})},Cf=()=>E.useContext(z6),Rh=5e3,lce=8e3,Sj={1:{third:"DEFENSIVE",lane:"LEFT",zoneNumber:1},2:{third:"DEFENSIVE",lane:"HALF_SPACE_LEFT",zoneNumber:2},3:{third:"DEFENSIVE",lane:"CENTER",zoneNumber:3},4:{third:"DEFENSIVE",lane:"HALF_SPACE_RIGHT",zoneNumber:4},5:{third:"DEFENSIVE",lane:"RIGHT",zoneNumber:5},6:{third:"DEFENSIVE",lane:"CENTER",zoneNumber:6},7:{third:"MIDDLE",lane:"LEFT",zoneNumber:7},8:{third:"MIDDLE",lane:"HALF_SPACE_LEFT",zoneNumber:8},9:{third:"MIDDLE",lane:"CENTER",zoneNumber:9},10:{third:"MIDDLE",lane:"HALF_SPACE_RIGHT",zoneNumber:10},11:{third:"MIDDLE",lane:"RIGHT",zoneNumber:11},12:{third:"MIDDLE",lane:"CENTER",zoneNumber:12},13:{third:"FINAL",lane:"LEFT",zoneNumber:13},14:{third:"FINAL",lane:"HALF_SPACE_LEFT",zoneNumber:14},15:{third:"FINAL",lane:"CENTER",zoneNumber:15},16:{third:"FINAL",lane:"HALF_SPACE_RIGHT",zoneNumber:16},17:{third:"FINAL",lane:"RIGHT",zoneNumber:17},18:{third:"FINAL",lane:"CENTER",zoneNumber:18}};function cce(){return{teamInPossession:null,phase:"NEUTRAL",zone:{third:"MIDDLE",lane:"CENTER",zoneNumber:9},pressure:"MEDIUM",threatLevel:"LOW",transitionWindow:{active:!1,type:null,startTime:null,duration:Rh},pressingContext:{active:!1,triggerTime:null,outcome:null},lastEventTime:Date.now(),lastEventName:null,stateVersion:0}}function uce(t){return Sj[t]||Sj[9]}function dce(t,e){const r=Date.now(),n=e.eventName,i=e.team,s={...t,transitionWindow:{...t.transitionWindow},pressingContext:{...t.pressingContext},zone:{...t.zone}},a={...t};switch(s.transitionWindow.active&&s.transitionWindow.startTime&&r-s.transitionWindow.startTime>s.transitionWindow.duration&&(s.transitionWindow.active=!1,s.transitionWindow.type=null,s.transitionWindow.startTime=null,(s.phase==="TRANSITION_OFF"||s.phase==="TRANSITION_DEF")&&(s.phase=s.zone.third==="FINAL"?"FINAL_THIRD":"BUILD_UP")),s.pressingContext.active&&s.pressingContext.triggerTime&&r-s.pressingContext.triggerTime>lce&&(s.pressingContext.active=!1,s.pressingContext.outcome=null),"zone"in e&&typeof e.zone=="number"&&e.zone>0&&(s.zone=uce(e.zone)),n){case"interception":s.teamInPossession!==i&&(s.teamInPossession=i,s.phase="TRANSITION_OFF",s.transitionWindow={active:!0,type:"OFFENSIVE",startTime:r,duration:Rh},s.threatLevel="MEDIUM",s.pressingContext.active&&(s.pressingContext.outcome="RECOVERY"));break;case"turnover":s.teamInPossession===i&&(s.teamInPossession=i==="TEAM_A"?"TEAM_B":"TEAM_A",s.phase="TRANSITION_DEF",s.transitionWindow={active:!0,type:"DEFENSIVE",startTime:r,duration:Rh},s.threatLevel="LOW",s.pressingContext.active&&(s.pressingContext.outcome="LOSS"));break;case"transition_off_start":s.phase="TRANSITION_OFF",s.transitionWindow={active:!0,type:"OFFENSIVE",startTime:r,duration:Rh},s.pressure="LOW";break;case"transition_def_start":s.phase="TRANSITION_DEF",s.transitionWindow={active:!0,type:"DEFENSIVE",startTime:r,duration:Rh},s.pressure="HIGH";break;case"final_third_entry":s.zone.third="FINAL",s.phase="FINAL_THIRD",s.threatLevel="MEDIUM";break;case"switch_of_play":s.zone.lane==="LEFT"||s.zone.lane==="HALF_SPACE_LEFT"?s.zone.lane="RIGHT":(s.zone.lane==="RIGHT"||s.zone.lane==="HALF_SPACE_RIGHT")&&(s.zone.lane="LEFT");break;case"pressing_trigger":s.pressingContext={active:!0,triggerTime:r,location:{...s.zone},outcome:null},s.pressure="HIGH";break;case"phase_highpress":s.pressure="HIGH",s.phase="BUILD_UP";break;case"phase_lowblock":s.pressure="LOW",s.phase="CONSOLIDATION";break;case"dangerous_attack":s.threatLevel="HIGH";break;case"big_chance":s.threatLevel="HIGH";break;case"shot_start":s.threatLevel="HIGH";break;case"free_kick":case"penalty":case"corner_start":s.phase="SET_PIECE",s.transitionWindow.active=!1,s.teamInPossession=i,n==="penalty"&&(s.threatLevel="HIGH");break;case"foul":s.phase="SET_PIECE",s.transitionWindow.active=!1,s.pressingContext.active=!1,s.teamInPossession===i&&(s.teamInPossession=i==="TEAM_A"?"TEAM_B":"TEAM_A");break;case"phase_buildup_end":s.phase="BUILD_UP";break;case"phase_consolidation":s.phase="CONSOLIDATION";break;case"phase_final_third":s.phase="FINAL_THIRD";break;case"pass_start":case"pass_end":s.teamInPossession||(s.teamInPossession=i);break;case"carry_start":s.teamInPossession||(s.teamInPossession=i);break;case"clearance":s.threatLevel="LOW";break}return s.phase!=="TRANSITION_OFF"&&s.phase!=="TRANSITION_DEF"&&(s.zone.third==="FINAL"?s.pressure="HIGH":s.zone.third==="DEFENSIVE"&&(s.pressure="MEDIUM")),s.lastEventTime=r,s.lastEventName=n,s.stateVersion+=1,{newState:s,transition:{from:a,to:s,trigger:n,timestamp:r}}}function Cj(t){return!t.transitionWindow.active||!t.transitionWindow.startTime?!1:Date.now()-t.transitionWindow.startTime<t.transitionWindow.duration}function Ace(t){if(!t.transitionWindow.active||!t.transitionWindow.startTime)return 0;const e=Date.now()-t.transitionWindow.startTime,r=t.transitionWindow.duration-e;return Math.max(0,r)}function Tj(t){const e=t.teamInPossession||"N/A",r=t.phase.replace(/_/g," "),n=`${t.zone.third} ${t.zone.lane}`.toLowerCase(),i=`${t.pressure} press`.toLowerCase(),s=`${t.threatLevel} threat`.toLowerCase();return`${e} | ${r} | ${n} | ${i} | ${s}`}function fce(){return{currentChain:null,completedChains:[],chainIdCounter:1}}function hce(t,e,r,n){return{id:n.chainIdCounter++,team:t,startTime:Date.now(),events:[e],startZone:{...r.zone},zonesVisited:new Set([r.zone.zoneNumber]),passCount:e.eventName.includes("pass")?1:0,progressivePassCount:0,enteredFinalThird:r.zone.third==="FINAL",enteredBox:r.zone.zoneNumber===18,shotTaken:e.eventName==="shot_start",fromTransition:r.phase==="TRANSITION_OFF",fromSetPiece:r.phase==="SET_PIECE",underPressure:r.pressure==="HIGH",outcome:"ONGOING"}}function AB(t,e,r,n){let i=t;t.currentChain&&(i=sp(t,"LOSS"));const s=hce(e,r,n,i);return{...i,currentChain:s}}function Bj(t,e,r){if(!t.currentChain)return AB(t,e.team,e,r);const n=t.currentChain;if(e.team!==n.team){const s=sp(t,"LOSS");return AB(s,e.team,e,r)}const i={...n,events:[...n.events,e],zonesVisited:new Set([...n.zonesVisited,r.zone.zoneNumber])};return e.eventName.includes("pass")&&(i.passCount++,pce(e,n.startZone,r.zone)&&i.progressivePassCount++),r.zone.third==="FINAL"&&!n.enteredFinalThird&&(i.enteredFinalThird=!0),r.zone.zoneNumber===18&&!n.enteredBox&&(i.enteredBox=!0),e.eventName==="shot_start"&&(i.shotTaken=!0),i.endZone={...r.zone},{...t,currentChain:i}}function sp(t,e){if(!t.currentChain)return t;const r=t.currentChain,n=Date.now(),i=n-r.startTime,s={...r,endTime:n,outcome:e,durationMs:i,buildUpSpeed:mce(i,r.passCount),verticality:gce(r),xgContext:xce(r)};return{...t,currentChain:null,completedChains:[...t.completedChains,s]}}function pce(t,e,r){const n={DEFENSIVE:0,MIDDLE:1,FINAL:2};return n[r.third]>n[e.third]}function mce(t,e){if(e===0)return"FAST";const r=e/(t/1e3);return r>1?"FAST":r>.5?"MEDIUM":"SLOW"}function gce(t){if(!t.endZone)return 0;const e={DEFENSIVE:0,MIDDLE:1,FINAL:2},r=e[t.startZone.third],i=e[t.endZone.third]-r;if(2-r===0)return 1;if(t.passCount===0)return i>0?1:0;const a=i/Math.max(1,t.passCount/3);return Math.min(1,Math.max(0,a))}function xce(t){let e=1;return t.fromTransition&&(e*=1.3),t.buildUpSpeed==="FAST"&&(e*=1.15),t.verticality&&t.verticality>.7&&(e*=1.1),t.underPressure&&!t.fromTransition&&(e*=.9),e}function vce(t,e){const r=t;if(r.length===0)return{totalChains:0,avgDuration:0,avgPassesPerChain:0,shotsPerChain:0,goalsPerChain:0,lossRate:0,transitionChains:0,transitionToShotRate:0,transitionToGoalRate:0,finalThirdEntryRate:0,boxEntryRate:0,progressivePassRate:0,fastBuildUps:0,slowBuildUps:0};const n=r.length,i=r.reduce((x,v)=>x+(v.durationMs||0),0),s=r.reduce((x,v)=>x+v.passCount,0),a=r.reduce((x,v)=>x+v.progressivePassCount,0),o=r.filter(x=>x.shotTaken).length,l=r.filter(x=>x.outcome==="GOAL").length,u=r.filter(x=>x.outcome==="LOSS").length,d=r.filter(x=>x.fromTransition),A=d.filter(x=>x.shotTaken).length,f=d.filter(x=>x.outcome==="GOAL").length,h=r.filter(x=>x.enteredFinalThird).length,m=r.filter(x=>x.enteredBox).length,p=r.filter(x=>x.buildUpSpeed==="FAST").length,g=r.filter(x=>x.buildUpSpeed==="SLOW").length;return{totalChains:n,avgDuration:i/n,avgPassesPerChain:s/n,shotsPerChain:o/n,goalsPerChain:l/n,lossRate:u/n,transitionChains:d.length,transitionToShotRate:d.length>0?A/d.length:0,transitionToGoalRate:d.length>0?f/d.length:0,finalThirdEntryRate:h/n,boxEntryRate:m/n,progressivePassRate:s>0?a/s:0,fastBuildUps:p,slowBuildUps:g}}const W6=3,Y6=2,yce=5,q6="tacta_sequence_patterns",bce={pass_start:{label:"X",description:"Pass"},shot_start:{label:"Y",description:"Shot"},ui_confirm:{label:"A",description:"Confirm"},ui_cancel:{label:"B",description:"Cancel"},turnover:{label:"LB",description:"Possession Lost"},interception:{label:"RB",description:"Interception"},transition_def_start:{label:"LT",description:"Defensive Transition"},transition_off_start:{label:"RT",description:"Offensive Transition"},pressing_trigger:{label:"D-Up",description:"Pressing Trigger"},phase_lowblock:{label:"D-Down",description:"Low Block"},switch_of_play:{label:"D-Left",description:"Switch of Play"},final_third_entry:{label:"D-Right",description:"Final Third Entry"},foul:{label:"View",description:"Foul"},dangerous_attack:{label:"R3",description:"Dangerous Attack"},press_trap:{label:"L3",description:"Pressing Trap"},cross_start:{label:"RT+B",description:"Cross"},duel_ground:{label:"RT+X",description:"Ground Duel"},clearance:{label:"RT+RB",description:"Clearance"},big_chance:{label:"RT+R3",description:"Big Chance"},free_kick:{label:"RT+View",description:"Free Kick"},penalty:{label:"LT+View",description:"Penalty"},card_yellow:{label:"View+Y",description:"Yellow Card"},card_red:{label:"View+B",description:"Red Card"},offside:{label:"View+A",description:"Offside"},dribble_attempt:{label:"RB+X",description:"Dribble Attempt"},counter_attack:{label:"RB+Y",description:"Counter Attack"},goal:{label:"Shift+2",description:"Goal"},assist:{label:"Ctrl+1",description:"Assist"},key_pass:{label:"Shift+1",description:"Key Pass"}};function _j(t=W6,e=Y6){const r=wce();return r?{...r,windowSize:t,minOccurrences:e}:{patterns:new Map,recentSequence:[],windowSize:t,minOccurrences:e,totalEventsProcessed:0}}function wce(){try{const t=localStorage.getItem(q6);if(!t)return null;const e=JSON.parse(t),r=new Map;for(const[n,i]of Object.entries(e.patterns)){const s=i;r.set(n,{...s,followers:new Map(Object.entries(s.followers))})}return{patterns:r,recentSequence:e.recentSequence||[],windowSize:e.windowSize||W6,minOccurrences:e.minOccurrences||Y6,totalEventsProcessed:e.totalEventsProcessed||0}}catch(t){return console.warn("Failed to load sequence patterns:",t),null}}function X6(t){try{const e={};for(const[n,i]of t.patterns.entries())e[n]={...i,followers:Object.fromEntries(i.followers)};const r={patterns:e,recentSequence:t.recentSequence,windowSize:t.windowSize,minOccurrences:t.minOccurrences,totalEventsProcessed:t.totalEventsProcessed};localStorage.setItem(q6,JSON.stringify(r))}catch(e){console.warn("Failed to save sequence patterns:",e)}}function Ece(t,e){if(e.startsWith("ui_"))return t;const r=[...t.recentSequence,e];for(;r.length>t.windowSize;)r.shift();let n=t.patterns;t.recentSequence.length>=1&&(n=Sce(t.patterns,t.recentSequence,e));const i={...t,patterns:n,recentSequence:r,totalEventsProcessed:t.totalEventsProcessed+1};return i.totalEventsProcessed%10===0&&X6(i),i}function Sce(t,e,r){const n=new Map(t);for(let i=1;i<=e.length;i++){const s=e.slice(-i),a=s.join(""),o=n.get(a);if(o){const l=new Map(o.followers);l.set(r,(l.get(r)||0)+1),n.set(a,{...o,followers:l,totalOccurrences:o.totalOccurrences+1})}else{const l=new Map;l.set(r,1),n.set(a,{sequence:s,sequenceKey:a,followers:l,totalOccurrences:1})}}return n}function Cce(t){if(t.recentSequence.length===0)return[];const e=new Map;for(let n=Math.min(t.recentSequence.length,t.windowSize);n>=1;n--){const s=t.recentSequence.slice(-n).join(""),a=t.patterns.get(s);if(a&&a.totalOccurrences>=t.minOccurrences)for(const[o,l]of a.followers.entries()){const u=l/a.totalOccurrences,d=n/t.windowSize,A=u*(.5+.5*d),f=e.get(o);(!f||f.probability<A)&&e.set(o,{probability:A,occurrences:a.totalOccurrences})}}const r=[];for(const[n,i]of e.entries()){const s=bce[n]||{label:"?",description:n.replace(/_/g," ")};r.push({eventName:n,probability:i.probability,confidence:Tce(i.probability,i.occurrences),buttonLabel:s.label,description:s.description})}return r.sort((n,i)=>i.probability-n.probability),r.slice(0,yce)}function Tce(t,e){return t>.5&&e>=10?"HIGH":t>.3&&e>=5?"MEDIUM":"LOW"}function Bce(t){const e=Array.from(t.patterns.values());if(e.length===0)return{totalPatterns:0,totalEventsProcessed:t.totalEventsProcessed,averageFollowersPerPattern:0,topPatterns:[]};const r=e.reduce((s,a)=>s+a.followers.size,0),i=e.filter(s=>s.totalOccurrences>=3).sort((s,a)=>a.totalOccurrences-s.totalOccurrences).slice(0,5).map(s=>{let a="",o=0;for(const[l,u]of s.followers.entries())u>o&&(o=u,a=l);return{sequence:s.sequence,occurrences:s.totalOccurrences,topFollower:a,topFollowerProbability:o/s.totalOccurrences}});return{totalPatterns:e.length,totalEventsProcessed:t.totalEventsProcessed,averageFollowersPerPattern:r/e.length,topPatterns:i}}function LI(t){return`${Math.round(t*100)}%`}const Z6=E.createContext(void 0);function _ce({children:t}){const[e,r]=E.useState([]),[n,i]=E.useState(new Map),[s,a]=E.useState(""),[o,l]=E.useState(),[u,d]=E.useState(0),[A,f]=E.useState(!1),[h,m]=E.useState(null),[p,g]=E.useState(null),[x,v]=E.useState(0),[y,w]=E.useState(!1),[b,S]=E.useState(null),[C,T]=E.useState(null),[B,_]=E.useState(!1),[I,L]=E.useState("upload"),[N,R]=E.useState(!1),[M,k]=E.useState(!1),[O,j]=E.useState(null),[D,F]=E.useState([]),[$,U]=E.useState(null),[K,V]=E.useState(()=>{try{return localStorage.getItem("matchStreamUrl")||"http://hookpro.site:80/get.php?username=21100486108183&password=30860318814333&type=m3u_plus&output=m3u8"}catch{return"http://hookpro.site:80/get.php?username=21100486108183&password=30860318814333&type=m3u_plus&output=m3u8"}}),[q,H]=E.useState(()=>{try{return localStorage.getItem("matchUseStreamProxy")==="true"}catch{return!1}}),[z,ae]=E.useState(cce),X=E.useRef(z),[ne,ee]=E.useState(fce),G=E.useRef(ne),[ge,ye]=E.useState(_j),Me=E.useRef(ge),[ce,Be]=E.useState([]),{socket:_e,role:He,connected:Se}=Cf();X.current=z,G.current=ne,Me.current=ge,E.useEffect(()=>{_e&&Se&&He==="broadcaster"&&_e.emit("match-state-sync",{matchState:z,possessionManager:ne,predictions:ce,streamUrl:K,useStreamProxy:q,videoMode:I,useVideoMode:y,isSessionStarted:M})},[z,ne,ce,K,q,_e,Se,He]),E.useEffect(()=>{if(!_e)return;const pe=re=>{He==="viewer"&&(re.matchState&&(ae(re.matchState),X.current=re.matchState),re.possessionManager&&(ee(re.possessionManager),G.current=re.possessionManager),re.predictions&&Be(re.predictions),re.streamUrl!==void 0&&V(re.streamUrl),re.useStreamProxy!==void 0&&H(re.useStreamProxy),re.videoMode!==void 0&&L(re.videoMode),re.useVideoMode!==void 0&&w(re.useVideoMode),re.isSessionStarted!==void 0&&k(re.isSessionStarted))};return _e.on("match-state-remote-sync",pe),()=>{_e.off("match-state-remote-sync",pe)}},[_e,He]);const it=E.useCallback(pe=>{var Xr,br;const{newState:re,transition:Ke}=dce(X.current,pe);ae(re),X.current=re;let xe=G.current;pe.eventName==="interception"?xe=AB(xe,pe.team,pe,re):pe.eventName==="turnover"?xe=sp(xe,"LOSS"):pe.eventName==="shot_start"?xe=Bj(xe,pe,re):pe.eventName==="goal"?xe=sp(xe,"GOAL"):pe.eventName==="foul"||pe.eventName==="offside"?xe=sp(xe,"SET_PIECE"):xe=Bj(xe,pe,re),ee(xe),G.current=xe,xe.currentChain&&xe.currentChain.passCount>=5&&pe.eventName.includes("pass")&&Ge.success(`${xe.currentChain.team==="TEAM_A"?"Algeria":"Nigeria"} - Sequence Alert: ${xe.currentChain.passCount} Consecutive Passes!`,{icon:"",duration:3e3,position:"top-center"});const Oe=Ece(Me.current,pe.eventName);ye(Oe),Me.current=Oe;const st=Cce(Oe);Be(st);const xt=Cj(re);return console.log(` State: ${Tj(re)} | Chain: ${((Xr=xe.currentChain)==null?void 0:Xr.id)||"none"}`),{newState:re,possessionId:(br=xe.currentChain)==null?void 0:br.id,predictions:st,isInTransition:xt}},[]),Ce=Cj(z),Qe=Ace(z),me=Tj(z),Pe=ne.currentChain,be=ne.completedChains,le=be.length>0?vce(be):null,Ee=ge.totalEventsProcessed>0?Bce(ge):null;E.useEffect(()=>{if(K)try{localStorage.setItem("matchStreamUrl",K)}catch{}},[K]),E.useEffect(()=>{try{localStorage.setItem("matchUseStreamProxy",q.toString())}catch{}},[q]);const ve=E.useCallback(()=>{const pe=_j();ye(pe),Me.current=pe,Be([]),X6(pe)},[]);return c.jsx(Z6.Provider,{value:{events:e,setEvents:r,teams:n,setTeams:i,selectedTeam:s,setSelectedTeam:a,matchTime:u,setMatchTime:d,isMatchActive:A,setIsMatchActive:f,videoFile:h,setVideoFile:m,remoteVideoUrl:p,setRemoteVideoUrl:g,videoTime:x,setVideoTime:v,useVideoMode:y,setUseVideoMode:w,seekTime:b,setSeekTime:S,isVideoPlaying:B,setIsVideoPlaying:_,videoMode:I,setVideoMode:L,showAnalysisView:N,setShowAnalysisView:R,isSessionStarted:M,setIsSessionStarted:k,analysisResults:C,setAnalysisResults:T,calibrationMatrix:O,setCalibrationMatrix:j,realtimeDetections:D,setRealtimeDetections:F,editingEventId:$,setEditingEventId:U,lastEventButtonLabel:o,setLastEventButtonLabel:l,matchState:z,processEvent:it,isInTransition:Ce,transitionTimeRemaining:Qe,stateLabel:me,currentPossession:Pe,possessionHistory:be,chainStats:le,predictions:ce,learningStats:Ee,resetPredictions:ve,streamUrl:K,setStreamUrl:V,useStreamProxy:q,setUseStreamProxy:H},children:t})}function Yr(){const t=E.useContext(Z6);if(!t)throw new Error("useMatchContext must be used within MatchProvider");return t}const ih=({children:t,allowedRoles:e})=>{const{isAuthenticated:r,user:n}=Ta(),i=Ef();return r?r&&!n?c.jsx(KE,{to:"/login",replace:!0}):e&&n&&!e.includes(n.role)?c.jsx(KE,{to:"/",replace:!0}):c.jsx(c.Fragment,{children:t}):c.jsx(KE,{to:"/login",state:{from:i},replace:!0})};function Nce(){const{matchTime:t,setMatchTime:e,isMatchActive:r,useVideoMode:n,videoTime:i}=Yr(),s=E.useRef(0),a=E.useRef(0);return E.useEffect(()=>{let l;return r&&!n&&(l=setInterval(()=>{e(u=>{const d=u+1;return s.current=d,d})},1e3)),()=>clearInterval(l)},[r,n,e]),E.useEffect(()=>{if(n){a.current=i;const l=Math.floor(i);s.current!==l&&(e(l),s.current=l)}},[i,n,e]),{matchTimeRef:s,videoTimeRef:a,formatTime:l=>{const u=Math.floor(l/60),d=l%60;return`${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}}}function Ice(){const[t,e]=E.useState(null),{toast:r}=lc(),n=s=>{[...document.styleSheets].forEach(a=>{try{if(a.href){const o=s.document.createElement("link");o.rel="stylesheet",o.href=a.href,s.document.head.appendChild(o)}else{const o=s.document.createElement("style");[...a.cssRules].forEach(l=>{o.appendChild(s.document.createTextNode(l.cssText))}),s.document.head.appendChild(o)}}catch(o){console.error("Error copying style:",o)}}),s.addEventListener("pagehide",()=>e(null)),s.addEventListener("unload",()=>e(null)),e(s)};return{pipWindow:t,togglePiP:async()=>{if(t){t.close(),e(null);return}if("documentPictureInPicture"in window)try{const s=await window.documentPictureInPicture.requestWindow({width:1e3,height:800});n(s);return}catch(s){console.warn("Document PiP failed, falling back to popup:",s)}try{const s=window.open("","SoccerLoggerPopup","width=1000,height=800,popup=yes");s?(s.document.body||s.document.write("<body></body>"),s.document.title="Soccer Event Logger (Overlay)",n(s)):r({title:"Popup Blocked",description:"Please allow popups for this site to use the overlay.",variant:"destructive"})}catch(s){console.error("Failed to open popup:",s),r({title:"Error",description:"Failed to open Pop-out window.",variant:"destructive"})}}}}const Pce=(t,e)=>{const[r,n]=E.useState(null),[i,s]=E.useState(null),[a,o]=E.useState(!1),l=E.useRef(new Map),u=async()=>{try{const A=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});n(A),o(!0),t==null||t.emit("audio-broadcaster-ready")}catch(A){throw console.error("Error accessing microphone:",A),A}},d=()=>{r&&(r.getTracks().forEach(A=>A.stop()),n(null)),l.current.forEach(A=>A.close()),l.current.clear(),o(!1),t==null||t.emit("audio-broadcast-stopped")};return E.useEffect(()=>{if(e!=="broadcaster"||!r)return;const A=async f=>{console.log("Audio watcher connected:",f);const h=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});r.getAudioTracks().forEach(p=>{h.addTrack(p,r)}),h.onicecandidate=p=>{p.candidate&&(t==null||t.emit("audio-candidate",{candidate:p.candidate,to:f}))};const m=await h.createOffer();await h.setLocalDescription(m),t==null||t.emit("audio-offer",{offer:h.localDescription,to:f}),l.current.set(f,h)};if(t)return t.on("audio-watcher",A),()=>{t.off("audio-watcher",A)}},[e,r,t]),E.useEffect(()=>{if(e!=="viewer")return;t==null||t.emit("audio-watcher");const A=async f=>{console.log("Received audio offer from:",f.from);const h=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});h.ontrack=p=>{console.log("Received remote audio track"),s(p.streams[0])},h.onicecandidate=p=>{p.candidate&&(t==null||t.emit("audio-candidate",{candidate:p.candidate,to:f.from}))},await h.setRemoteDescription(new RTCSessionDescription(f.offer));const m=await h.createAnswer();await h.setLocalDescription(m),t==null||t.emit("audio-answer",{answer:h.localDescription,to:f.from}),l.current.set(f.from,h)};if(t)return t.on("audio-offer",A),()=>{t.off("audio-offer",A)}},[e,t]),E.useEffect(()=>{const A=async f=>{const h=l.current.get(f.from);h&&await h.addIceCandidate(new RTCIceCandidate(f.candidate))};if(t)return t.on("audio-candidate",A),()=>{t.off("audio-candidate",A)}},[t]),E.useEffect(()=>{if(e!=="broadcaster")return;const A=async f=>{const h=l.current.get(f.from);h&&await h.setRemoteDescription(new RTCSessionDescription(f.answer))};if(t)return t.on("audio-answer",A),()=>{t.off("audio-answer",A)}},[e,t]),E.useEffect(()=>{if(e!=="viewer")return;const A=()=>{s(null),l.current.forEach(f=>f.close()),l.current.clear()};if(t)return t.on("audio-broadcast-stopped",A),()=>{t.off("audio-broadcast-stopped",A)}},[e,t]),{localAudioStream:r,remoteAudioStream:i,isBroadcasting:a,startAudioBroadcast:u,stopAudioBroadcast:d}},Rce=(t,e)=>{const[r,n]=E.useState(!1),[i,s]=E.useState([]),[a,o]=E.useState(null),[l,u]=E.useState(!1),d=E.useRef(new Map),A=E.useRef(null),f=E.useRef(new Map),h=(x,v)=>{const y=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});return v.getTracks().forEach(w=>{y.addTrack(w,v)}),y.onicecandidate=w=>{w.candidate&&(t==null||t.emit("voice-signal",{to:x,signal:{type:"candidate",candidate:w.candidate}}))},y.ontrack=w=>{if(console.log(` Received audio track from ${x}`),f.current.has(x))return;const b=new Audio;b.srcObject=w.streams[0],b.autoplay=!0,b.volume=1,f.current.set(x,b)},y},m=async()=>{if(t){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("Media Devices API not available (requires HTTPS or localhost)"),alert("Microphone access is not supported in this environment (HTTPS required).");return}try{const x=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,channelCount:1}});o(x),A.current=x,n(!0),t.emit("join-voice-room")}catch(x){console.error("Failed to access microphone:",x),alert("Could not access microphone. Please allow permissions.")}}},p=()=>{t&&(A.current&&(A.current.getTracks().forEach(x=>x.stop()),A.current=null,o(null)),f.current.forEach(x=>{x.pause(),x.srcObject=null}),f.current.clear(),d.current.forEach(x=>x.close()),d.current.clear(),s([]),n(!1),t.emit("leave-voice-room"))},g=()=>{if(A.current){const x=A.current.getAudioTracks()[0];x&&(x.enabled=!x.enabled,u(!x.enabled))}};return E.useEffect(()=>{if(!t)return;const x=async b=>{console.log(" Existing users in voice room:",b),s(b);for(const S of b){if(!A.current)break;const C=h(S.id,A.current);d.current.set(S.id,C);const T=await C.createOffer();await C.setLocalDescription(T),t.emit("voice-signal",{to:S.id,signal:{type:"offer",sdp:C.localDescription}})}},v=b=>{console.log(` User joined voice room: ${b.name} (${b.id})`),s(S=>[...S,b])},y=b=>{if(console.log(` User left voice room: ${b}`),s(C=>C.filter(T=>T.id!==b)),f.current.has(b)){const C=f.current.get(b);C==null||C.pause(),f.current.delete(b)}const S=d.current.get(b);S&&(S.close(),d.current.delete(b))},w=async b=>{const{from:S,signal:C}=b;if(!A.current)return;let T=d.current.get(S);if(!T)if(C.type==="offer")T=h(S,A.current),d.current.set(S,T);else{console.warn("Received signal for unknown peer:",S);return}try{if(C.type==="offer"){await T.setRemoteDescription(new RTCSessionDescription(C.sdp));const B=await T.createAnswer();await T.setLocalDescription(B),t.emit("voice-signal",{to:S,signal:{type:"answer",sdp:T.localDescription}})}else C.type==="answer"?await T.setRemoteDescription(new RTCSessionDescription(C.sdp)):C.type==="candidate"&&await T.addIceCandidate(new RTCIceCandidate(C.candidate))}catch(B){console.error("Signaling error:",B)}};return t.on("voice-existing-users",x),t.on("voice-user-joined",v),t.on("voice-user-left",y),t.on("voice-signal",w),()=>{t.off("voice-existing-users",x),t.off("voice-user-joined",v),t.off("voice-user-left",y),t.off("voice-signal",w)}},[t,r]),E.useEffect(()=>()=>{p()},[]),{isInRoom:r,peers:i,isMuted:l,joinVoiceRoom:m,leaveVoiceRoom:p,toggleMute:g}};function kce(t){const{toast:e}=lc(),{setEvents:r,setMatchTime:n,setIsMatchActive:i,setSelectedTeam:s,setTeams:a,setRemoteVideoUrl:o,setUseVideoMode:l,setVideoMode:u,setIsVideoPlaying:d,setVideoTime:A,setSeekTime:f,setIsSessionStarted:h,setStreamUrl:m}=Yr(),p=E.useRef(0);return E.useEffect(()=>{function g(N){if(console.log("Syncing state:",N),N.events&&N.events.length>0&&r(N.events),N.matchTime>p.current&&(n(N.matchTime),p.current=N.matchTime),N.isMatchActive!==void 0&&i(N.isMatchActive),N.selectedTeam&&s(N.selectedTeam),N.teams&&N.teams.length>0)try{const R=new Map;Array.isArray(N.teams)&&N.teams.forEach(M=>{Array.isArray(M)&&M.length===2&&R.set(M[0],M[1])}),R.size>0&&a(R)}catch(R){console.error("Error syncing teams:",R)}N.streamUrl&&(m(N.streamUrl),u("live"),l(!0)),N.videoMode&&u(N.videoMode),N.useVideoMode!==void 0&&l(N.useVideoMode),N.isSessionStarted!==void 0&&h(N.isSessionStarted),N.videoState&&(N.videoState.videoUrl&&(o(N.videoState.videoUrl),N.useVideoMode&&(u("upload"),l(!0))),N.videoState.currentTime!==void 0&&(A(N.videoState.currentTime),f(N.videoState.currentTime)),N.videoState.isPlaying!==void 0&&d(N.videoState.isPlaying))}function x(N){console.log("Received synced teams:",N);try{const R=new Map;Array.isArray(N)&&N.forEach(M=>{Array.isArray(M)&&M.length===2&&R.set(M[0],M[1])}),R.size>0&&a(R),e({title:"Teams Synced",description:"Received team data from broadcaster."})}catch(R){console.error("Error handling sync-teams:",R)}}function v(N){console.log("Received remote event:",N),r(R=>[...R,N])}function y(N){n(N.matchTime),p.current=N.matchTime,i(N.isMatchActive)}function w(N){console.log("Broadcaster switched team to:",N),s(N)}function b(N){console.log("Received undo event:",N),r(R=>R.filter(M=>M.id!==N)),e({title:"Event Annulled",description:`Event #${N} was removed by broadcaster`})}function S(N){console.log("Received update event:",N),r(R=>R.map(M=>M.id===N.id?N:M))}function C(N){console.log("Broadcaster loaded video:",N),o(N),l(!0),u("upload")}function T(N){console.log("Broadcaster played at:",N),d(!0),A(N)}function B(N){console.log("Broadcaster paused at:",N),d(!1),A(N)}function _(N){console.log("Broadcaster seeked to:",N),f(N)}function I(){console.log(" Session started by admin"),h(!0),e({title:"Session Started",description:"The analyst has initialized the collaboration session."})}function L(N){console.log(" Broadcaster changed video mode:",N),u(N.mode),l(N.useVideoMode),e({title:"View Synchronized",description:`Switched to ${N.mode==="live"?"Live/IPTV":"Video Upload"} view.`})}if(t)return t.on("sync-state",g),t.on("new-event",v),t.on("sync-timer",y),t.on("select-team",w),t.on("sync-teams",x),t.on("undo-event",b),t.on("update-event",S),t.on("video-loaded",C),t.on("video-play",T),t.on("video-pause",B),t.on("video-seek",_),t.on("session-started",I),t.on("video-mode-change",L),()=>{t.off("sync-state",g),t.off("new-event",v),t.off("sync-timer",y),t.off("select-team",w),t.off("sync-teams",x),t.off("undo-event",b),t.off("update-event",S),t.off("video-loaded",C),t.off("video-play",T),t.off("video-pause",B),t.off("video-seek",_),t.off("session-started",I),t.off("video-mode-change",L)}},[t,r,n,i,s,a,e,o,l,u,d,A,f,h]),p}const J6=E.createContext(void 0),WE="react-iptv-credentials";function Lce({children:t}){const[e,r]=E.useState(!1),[n,i]=E.useState(null),[s,a]=E.useState(!0);E.useEffect(()=>{try{const u=localStorage.getItem(WE);if(u){const d=JSON.parse(u);i(d),r(!0)}else{const d="http://hookpro.site:80/get.php?username=21100486108183&password=30860318814333&type=m3u_plus&output=m3u8";if(d)try{const A=new URL(d),f=A.searchParams.get("username"),h=A.searchParams.get("password");if(f&&h){A.searchParams.set("output","m3u8");const p={apiBase:`${A.protocol}//${A.host}/player_api.php`,username:f,password:h};i(p),r(!0),console.log(" IPTV Auto-configured from .env (Forced output=m3u8)")}}catch(A){console.error(" Failed to parse VITE_DEFAULT_STREAM_URL:",A)}}}catch{}finally{a(!1)}},[]);const o=u=>{i(u),r(!0);try{localStorage.setItem(WE,JSON.stringify(u))}catch{}},l=()=>{i(null),r(!1);try{localStorage.removeItem(WE),localStorage.removeItem("react-iptv-categories-cache")}catch{}};return c.jsx(J6.Provider,{value:{isConfigured:e,credentials:n,configureIPTV:o,clearConfiguration:l,isLoading:s},children:t})}function eK(){const t=E.useContext(J6);if(t===void 0)throw new Error("useIPTVAuth must be used within an IPTVAuthProvider");return t}function jce(t,e,r){const{user:n,hasPermission:i}=t,{teams:s,selectedTeam:a,matchTime:o,isMatchActive:l,setIsMatchActive:u,useVideoMode:d,setIsVideoPlaying:A}=e,{socket:f,role:h}=r,{isConfigured:m}=eK(),{matchTimeRef:p,formatTime:g}=Nce(),{pipWindow:x,togglePiP:v}=Ice(),{remoteAudioStream:y}=Pce(f,h),{isInRoom:w,joinVoiceRoom:b,leaveVoiceRoom:S,toggleMute:C,isMuted:T,peers:B}=Rce(f,n==null?void 0:n.role);kce(f);const[_,I]=E.useState("en"),[L,N]=E.useState(null),[R,M]=E.useState(()=>i("dashboard.post.view")&&!i("dashboard.live.view")?"POST_MATCH":"LIVE"),[k,O]=E.useState(!1),[j,D]=E.useState(()=>i("dashboard.view")?"dashboard":i("analytics.view")?"analytics":i("qa.view")?"qa":"dashboard"),[F,$]=E.useState(null),[U,K]=E.useState(!1),[V,q]=E.useState(!0),[H,z]=E.useState(!0),[ae,X]=E.useState(!0),[ne,ee]=E.useState(!1),[G,ge]=E.useState(!1),ye=E.useRef(null),Me=E.useRef(null),ce=E.useRef(null),[Be]=E.useState(()=>localStorage.getItem("tacta_auto_extract")==="true"),[_e,He]=E.useState(null),[Se,it]=E.useState(new Map),[Ce,Qe]=E.useState(null),me=E.useMemo(()=>({teamA:Array.from(s.keys())[0]||"Algeria",teamB:Array.from(s.keys())[1]||"Nigeria"}),[s]),Pe=E.useMemo(()=>{var be,le,Ee,ve,pe;return{teamARoster:((le=(be=s.get(a))==null?void 0:be.PlayerData)==null?void 0:le.map(re=>({id:re.ID,name:`${re.Forename} ${re.Surname}`,number:re.Number})))||[],teamBRoster:((pe=(ve=(Ee=Array.from(s.entries()).find(([re])=>re!==a))==null?void 0:Ee[1])==null?void 0:ve.PlayerData)==null?void 0:pe.map(re=>({id:re.ID,name:`${re.Forename} ${re.Surname}`,number:re.Number})))||[],teamAStartingNumbers:a==="Algeria"?[1,2,5,6,7,8,9,10,11,15,22]:void 0,analysisMode:R,useKeyboardAsController:(n==null?void 0:n.role)==="early_tester"}},[s,a,R,n]);return{voiceLanguage:_,setVoiceLanguage:I,videoStream:L,setVideoStream:N,trackingMode:R,setTrackingMode:M,isEditingMode:k,setIsEditingMode:O,activeView:j,setActiveView:D,sessionMode:F,setSessionMode:$,showAdminWaitingRoom:U,setShowAdminWaitingRoom:K,showFeed:V,setShowFeed:q,showAnalytics:H,setShowAnalytics:z,showMappings:ae,setShowMappings:X,showIPTVBrowser:ne,setShowIPTVBrowser:ee,showFIFAPlusBrowser:G,setShowFIFAPlusBrowser:ge,videoRef:ye,audioRef:Me,livePlayerRef:ce,autoExtract:Be,serverVideoPath:_e,setServerVideoPath:He,activeDurations:Se,setActiveDurations:it,selectedPendingEvent:Ce,setSelectedPendingEvent:Qe,teamNames:me,gamepadConfig:Pe,isIPTVConfigured:m,matchTimeRef:p,formatTime:g,pipWindow:x,togglePiP:v,remoteAudioStream:y,isInRoom:w,joinVoiceRoom:b,leaveVoiceRoom:S,toggleMute:C,isMuted:T,peers:B,socket:f,socketRole:h,...t,...e}}function Mce(t){const{socket:e,matchTime:r,isMatchActive:n,audioRef:i,remoteAudioStream:s,videoRef:a,videoStream:o,isSessionStarted:l,sessionMode:u,setSessionMode:d,user:A,joinVoiceRoom:f}=t;E.useEffect(()=>{e==null||e.emit("sync-timer",{matchTime:r,isMatchActive:n})},[n,r,e]),E.useEffect(()=>{i.current&&s&&i.current.srcObject!==s&&(i.current.srcObject=s,i.current.play().catch(h=>console.error("Error playing audio:",h)))},[s,i]),E.useEffect(()=>{a.current&&o&&a.current.srcObject!==o&&(a.current.srcObject=o)},[o,a]),E.useEffect(()=>{l&&u===null&&(A==null?void 0:A.role)!=="admin"&&(d("collab"),f(),Ge.info("Joining live collaboration session..."))},[l,u,A,f,d])}const Ld=[{id:1001,category:"Core",eventName:"ui_confirm",label:"Confirm / A",defaultDuration:[0,0],trigger:"Bouton A",endCondition:"Instantan",isRealTime:!0,isPostMatch:!0,folderPath:"/",filenameConvention:"UI.mp4",gamepadMappings:[{buttonIndex:0,mode:"BOTH"}]},{id:1002,category:"Core",eventName:"ui_cancel",label:"Cancel / B",defaultDuration:[0,0],trigger:"Bouton B",endCondition:"Instantan",isRealTime:!0,isPostMatch:!0,folderPath:"/",filenameConvention:"UI.mp4",gamepadMappings:[{buttonIndex:1,mode:"BOTH"}]},{id:1003,category:"Core",eventName:"pass_start",label:"Pass Start / X",requiresZone:!0,defaultDuration:[5,12],trigger:"Bouton X",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Pass/",filenameConvention:"PASS_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:2,mode:"BOTH"}]},{id:1004,category:"Core",eventName:"shot_start",label:"Shot Start / Y",requiresZone:!0,defaultDuration:[5,12],trigger:"Bouton Y",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Shot/",filenameConvention:"SHOT_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:3,mode:"BOTH"}]},{id:1005,category:"Core",eventName:"turnover",label:"Perte / Turnover",defaultDuration:[5,12],trigger:"Bouton LB",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Turnover/",filenameConvention:"TURNOVER_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:4,mode:"LIVE"}]},{id:1006,category:"Core",eventName:"carry_start",label:"Carry / Hold RB",defaultDuration:[5,12],trigger:"Hold RB",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Carry/",filenameConvention:"CARRY_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:5,isHold:!0,mode:"LIVE"}]},{id:1007,category:"Core",eventName:"clearance",label:"Dgagement / LB+Y",defaultDuration:[5,12],trigger:"LB+Y",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Clearance/",filenameConvention:"CLEARANCE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:3,modifier:"LB",mode:"LIVE"}]},{id:1008,category:"Core",eventName:"dribble_attempt",label:"Dribble / RB+X",defaultDuration:[5,12],trigger:"RB+X",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Dribble/",filenameConvention:"DRIBBLE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:2,modifier:"RB",mode:"LIVE"}]},{id:1009,category:"Core",eventName:"tag_start",label:"Generic Tag / Menu",defaultDuration:[5,12],trigger:"Bouton Menu",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Tags/",filenameConvention:"TAG_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:9,mode:"LIVE"}]},{id:1010,category:"Core",eventName:"press_trap",label:"Press Trap / L3",defaultDuration:[5,12],trigger:"Bouton L3",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Tactical/",filenameConvention:"PRESS_TRAP_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:10,mode:"LIVE"}]},{id:1011,category:"Core",eventName:"dangerous_attack",label:"Dangerous / R3",defaultDuration:[5,12],trigger:"Bouton R3",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Tactical/",filenameConvention:"DANGER_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:11,mode:"LIVE"}]},{id:1012,category:"Core",eventName:"pressing_trigger",label:"Press Trigger / D-Up",defaultDuration:[5,12],trigger:"D-Pad Up",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Tactical/",filenameConvention:"PRESS_TRIGGER_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:12,mode:"LIVE"}]},{id:1013,category:"Core",eventName:"phase_lowblock",label:"Low Block / D-Down",defaultDuration:[5,12],trigger:"D-Pad Down",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/Core/Tactical/",filenameConvention:"LOWBLOCK_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:13,mode:"LIVE"}]},{id:1014,category:"Core",eventName:"switch_of_play",label:"Switch / D-Left",defaultDuration:[5,12],trigger:"D-Pad Left",isRealTime:!0,isPostMatch:!0,gamepadMappings:[{buttonIndex:14,mode:"LIVE"}]},{id:1015,category:"Core",eventName:"final_third_entry",label:"Final Third / RB+A",requiresZone:!0,defaultDuration:[5,12],trigger:"D-Pad Right / RB+A",isRealTime:!0,isPostMatch:!0,gamepadMappings:[{buttonIndex:15,mode:"LIVE"},{buttonIndex:0,modifier:"RB",mode:"LIVE"}]},{id:1016,category:"Core",eventName:"cross_start",label:"Cross / RT+B",defaultDuration:[5,12],trigger:"RT+B",isRealTime:!0,isPostMatch:!0,gamepadMappings:[{buttonIndex:1,modifier:"RT",mode:"LIVE"}]},{id:1017,category:"Core",eventName:"duel_ground",label:"Duel Ground / RT+X",defaultDuration:[5,12],trigger:"RT+X",isRealTime:!0,isPostMatch:!0,gamepadMappings:[{buttonIndex:2,modifier:"RT",mode:"LIVE"}]},{id:1018,category:"Core",eventName:"big_chance",label:"Big Chance / RT+R3",defaultDuration:[5,12],trigger:"RT+R3",isRealTime:!0,isPostMatch:!0,gamepadMappings:[{buttonIndex:11,modifier:"RT",mode:"LIVE"}]},{id:1019,category:"Core",eventName:"obs_toggle_record",label:"OBS Record / RT+Menu",defaultDuration:[0,0],trigger:"RT+Menu",isRealTime:!0,gamepadMappings:[{buttonIndex:9,modifier:"RT",mode:"LIVE"}]},{id:1020,category:"Core",eventName:"ball_out_of_play",label:"Ball Out / LT+Menu",defaultDuration:[0,0],trigger:"LT+Menu",isRealTime:!0,gamepadMappings:[{buttonIndex:9,modifier:"LT",mode:"LIVE"}]},{id:1021,category:"Core",eventName:"analyst_note",label:"Note / View+LB",defaultDuration:[0,0],trigger:"View+LB",isRealTime:!0,gamepadMappings:[{buttonIndex:4,modifier:"View",mode:"LIVE"}]},{id:1022,category:"Core",eventName:"phase_highpress",label:"High Press / Hold D-Up",defaultDuration:[5,12],trigger:"Hold D-Pad Up",isRealTime:!0,gamepadMappings:[{buttonIndex:12,isHold:!0,mode:"LIVE"}]},{id:1023,category:"Core",eventName:"free_kick",label:"Free Kick / RT+View",defaultDuration:[5,12],trigger:"RT+View",isRealTime:!0,gamepadMappings:[{buttonIndex:8,modifier:"RT",mode:"LIVE"}]},{id:1024,category:"Core",eventName:"offside",label:"Offside / View+A",defaultDuration:[5,12],trigger:"View+A",isRealTime:!0,gamepadMappings:[{buttonIndex:0,modifier:"View",mode:"LIVE"}]},{id:1025,category:"Core",eventName:"throw_in_tactical",label:"Throw-In / Menu+LB",defaultDuration:[5,12],trigger:"Menu+LB",isRealTime:!0,gamepadMappings:[{buttonIndex:5,modifier:"View",mode:"LIVE"},{buttonIndex:4,modifier:"Menu",mode:"LIVE"}]},{id:1,category:"Build-Up",eventName:"sortie_de_balle_courte",label:"Sortie de balle courte",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Sortie_de_balle_courte/",filenameConvention:"SORTIE_DE_BALLE_COURTE_MIN_SEC.mp4"},{id:2,category:"Build-Up",eventName:"sortie_de_balle_longue",label:"Sortie de balle longue",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Sortie_de_balle_longue/",filenameConvention:"SORTIE_DE_BALLE_LONGUE_MIN_SEC.mp4"},{id:3,category:"Build-Up",eventName:"progression_axe",label:"Progression axe",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Progression_axe/",filenameConvention:"PROGRESSION_AXE_MIN_SEC.mp4"},{id:4,category:"Build-Up",eventName:"progression_cote",label:"Progression ct",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Progression_ct/",filenameConvention:"PROGRESSION_CT_MIN_SEC.mp4"},{id:5,category:"Build-Up",eventName:"circulation_lente",label:"Circulation lente",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Circulation_lente/",filenameConvention:"CIRCULATION_LENTE_MIN_SEC.mp4"},{id:6,category:"Build-Up",eventName:"circulation_rapide",label:"Circulation rapide",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Circulation_rapide/",filenameConvention:"CIRCULATION_RAPIDE_MIN_SEC.mp4"},{id:7,category:"Build-Up",eventName:"fixation_bloc",label:"Fixation bloc",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Fixation_bloc/",filenameConvention:"FIXATION_BLOC_MIN_SEC.mp4"},{id:8,category:"Build-Up",eventName:"renversement",label:"Renversement / D-Left",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Renversement/",filenameConvention:"RENVERSEMENT_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:14,mode:"BOTH"}]},{id:9,category:"Build-Up",eventName:"troisieme_homme",label:"Troisime homme",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Troisime_homme/",filenameConvention:"TROISIME_HOMME_MIN_SEC.mp4"},{id:10,category:"Build-Up",eventName:"break_line_pass",label:"Break line pass",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Break_line_pass/",filenameConvention:"BREAK_LINE_PASS_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:15,mode:"LIVE"}]},{id:11,category:"Build-Up",eventName:"appel_decroche",label:"Appel dcroch",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Appel_dcroch/",filenameConvention:"APPEL_DCROCH_MIN_SEC.mp4"},{id:12,category:"Build-Up",eventName:"appel_profondeur",label:"Appel profondeur",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/01_BuildUp/Appel_profondeur/",filenameConvention:"APPEL_PROFONDEUR_MIN_SEC.mp4"},{id:13,category:"Offensive",eventName:"tir_cadre",label:"Tir cadr",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Tir_cadr/",filenameConvention:"TIR_CADR_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:1,modifier:"RB",mode:"LIVE"}]},{id:14,category:"Offensive",eventName:"tir_non_cadre",label:"Tir non cadr",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Tir_non_cadr/",filenameConvention:"TIR_NON_CADR_MIN_SEC.mp4"},{id:15,category:"Offensive",eventName:"occasion_creee",label:"Occasion cre",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Occasion_cre/",filenameConvention:"OCCASION_CRE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:3,modifier:"RB",mode:"LIVE"}]},{id:16,category:"Offensive",eventName:"xg_eleve",label:"xG lev",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/xG_lev/",filenameConvention:"XG_LEV_MIN_SEC.mp4"},{id:17,category:"Offensive",eventName:"centre_dangereux",label:"Centre dangereux",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Centre_dangereux/",filenameConvention:"CENTRE_DANGEREUX_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:2,modifier:"RB",mode:"LIVE"}]},{id:18,category:"Offensive",eventName:"centre_rate",label:"Centre rat",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Centre_rat/",filenameConvention:"CENTRE_RAT_MIN_SEC.mp4"},{id:19,category:"Offensive",eventName:"dribble_reussi",label:"Dribble russi",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Dribble_russi/",filenameConvention:"DRIBBLE_RUSSI_MIN_SEC.mp4"},{id:20,category:"Offensive",eventName:"dribble_rate",label:"Dribble rat",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Dribble_rat/",filenameConvention:"DRIBBLE_RAT_MIN_SEC.mp4"},{id:21,category:"Offensive",eventName:"une_deux",label:"Une-deux",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Une-deux/",filenameConvention:"UNE-DEUX_MIN_SEC.mp4"},{id:22,category:"Offensive",eventName:"passe_cle",label:"Passe cl",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Passe_cl/",filenameConvention:"PASSE_CL_MIN_SEC.mp4"},{id:23,category:"Offensive",eventName:"counter_attack",label:"Contre-attaque",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Contre-attaque/",filenameConvention:"CONTRE-ATTAQUE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:3,modifier:"RB",mode:"LIVE"}]},{id:24,category:"Offensive",eventName:"projection_milieu",label:"Projection milieu",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/02_Offensive/Projection_milieu/",filenameConvention:"PROJECTION_MILIEU_MIN_SEC.mp4"},{id:25,category:"Dfensive",eventName:"duel_gagne",label:"Duel gagn / LB+B",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Duel_gagn/",filenameConvention:"DUEL_GAGN_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:1,modifier:"LB",mode:"LIVE"}]},{id:26,category:"Dfensive",eventName:"duel_perdu",label:"Duel perdu",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Duel_perdu/",filenameConvention:"DUEL_PERDU_MIN_SEC.mp4"},{id:27,category:"Dfensive",eventName:"interception",label:"Interception / LB+X",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Interception/",filenameConvention:"INTERCEPTION_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:5,mode:"BOTH"},{buttonIndex:2,modifier:"LB",mode:"LIVE"}]},{id:28,category:"Dfensive",eventName:"tacle_reussi",label:"Tacle russi / LB+A",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Tacle_russi/",filenameConvention:"TACLE_RUSSI_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:0,modifier:"LB",mode:"LIVE"}]},{id:29,category:"Dfensive",eventName:"tacle_rate",label:"Tacle rat",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Tacle_rat/",filenameConvention:"TACLE_RAT_MIN_SEC.mp4"},{id:30,category:"Dfensive",eventName:"bloc_bas",label:"Bloc bas / D-Down",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Bloc_bas/",filenameConvention:"BLOC_BAS_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:13,mode:"BOTH"}]},{id:31,category:"Dfensive",eventName:"bloc_median",label:"Bloc mdian",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Bloc_mdian/",filenameConvention:"BLOC_MDIAN_MIN_SEC.mp4"},{id:32,category:"Dfensive",eventName:"pressing_haut",label:"Pressing haut / D-Up",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Pressing_haut/",filenameConvention:"PRESSING_HAUT_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:12,mode:"BOTH"}]},{id:33,category:"Dfensive",eventName:"pressing_coordonne",label:"Pressing coordonn",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Pressing_coordonn/",filenameConvention:"PRESSING_COORDONN_MIN_SEC.mp4"},{id:34,category:"Dfensive",eventName:"sortie_defenseur",label:"Sortie dfenseur",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Sortie_dfenseur/",filenameConvention:"SORTIE_DFENSEUR_MIN_SEC.mp4"},{id:35,category:"Dfensive",eventName:"couverture",label:"Couverture",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Couverture/",filenameConvention:"COUVERTURE_MIN_SEC.mp4"},{id:36,category:"Dfensive",eventName:"faute_tactique",label:"Faute tactique / Menu+RB",defaultDuration:[5,12],trigger:"Menu+RB",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/03_Defensive/Faute_tactique/",filenameConvention:"FAUTE_TACTIQUE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:5,modifier:"Menu",mode:"BOTH"}]},{id:37,category:"Transition",eventName:"recuperation_haute",label:"Rcupration haute",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Rcupration_haute/",filenameConvention:"RCUPRATION_HAUTE_MIN_SEC.mp4"},{id:38,category:"Transition",eventName:"recuperation_mediane",label:"Rcupration mdiane",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Rcupration_mdiane/",filenameConvention:"RCUPRATION_MDIANE_MIN_SEC.mp4"},{id:39,category:"Transition",eventName:"recuperation_basse",label:"Rcupration basse",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Rcupration_basse/",filenameConvention:"RCUPRATION_BASSE_MIN_SEC.mp4"},{id:40,category:"Transition",eventName:"transition_off_start",label:"Transition offensive",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Transition_offensive/",filenameConvention:"TRANSITION_OFFENSIVE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:7,mode:"LIVE"}]},{id:41,category:"Transition",eventName:"transition_def_start",label:"Transition dfensive",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Transition_dfensive/",filenameConvention:"TRANSITION_DFENSIVE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:6,mode:"LIVE"}]},{id:42,category:"Transition",eventName:"projection_rapide",label:"Projection rapide",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Projection_rapide/",filenameConvention:"PROJECTION_RAPIDE_MIN_SEC.mp4"},{id:43,category:"Transition",eventName:"retard_defensif",label:"Retard dfensif",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Retard_dfensif/",filenameConvention:"RETARD_DFENSIF_MIN_SEC.mp4"},{id:44,category:"Transition",eventName:"contre_pressing",label:"Contre pressing",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Contre_pressing/",filenameConvention:"CONTRE_PRESSING_MIN_SEC.mp4"},{id:45,category:"Transition",eventName:"perte_dangereuse",label:"Perte dangereuse",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Perte_dangereuse/",filenameConvention:"PERTE_DANGEREUSE_MIN_SEC.mp4"},{id:46,category:"Transition",eventName:"perte_anodine",label:"Perte anodine",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/04_Transition/Perte_anodine/",filenameConvention:"PERTE_ANODINE_MIN_SEC.mp4"},{id:47,category:"Moments Cls",eventName:"goal",label:"But / Menu+Y",defaultDuration:[5,12],trigger:"Menu+Y",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/But/",filenameConvention:"BUT_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:3,modifier:"Menu",mode:"BOTH"},{buttonIndex:5,mode:"POST"}]},{id:48,category:"Moments Cls",eventName:"but_refuse",label:"But refus",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/But_refus/",filenameConvention:"BUT_REFUS_MIN_SEC.mp4"},{id:49,category:"Moments Cls",eventName:"passe_decisive",label:"Passe dcisive / Menu+X",defaultDuration:[5,12],trigger:"Menu+X",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Passe_dcisive/",filenameConvention:"PASSE_DCISIVE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:2,modifier:"Menu",mode:"BOTH"}]},{id:50,category:"Moments Cls",eventName:"penalty",label:"Penalty obtenu",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Penalty_obtenu/",filenameConvention:"PENALTY_OBTENU_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:8,modifier:"LT",mode:"LIVE"}]},{id:51,category:"Moments Cls",eventName:"penalty_concede",label:"Penalty concd",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Penalty_concd/",filenameConvention:"PENALTY_CONCD_MIN_SEC.mp4"},{id:52,category:"Moments Cls",eventName:"occasion_ratee",label:"Occasion rate",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Occasion_rate/",filenameConvention:"OCCASION_RATE_MIN_SEC.mp4"},{id:53,category:"Moments Cls",eventName:"sauvetage_ligne",label:"Sauvetage ligne",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Sauvetage_ligne/",filenameConvention:"SAUVETAGE_LIGNE_MIN_SEC.mp4"},{id:54,category:"Moments Cls",eventName:"erreur_menant_au_tir",label:"Erreur menant au tir",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Erreur_menant_au_tir/",filenameConvention:"ERREUR_MENANT_AU_TIR_MIN_SEC.mp4"},{id:55,category:"Moments Cls",eventName:"erreur_menant_au_but",label:"Erreur menant au but",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Erreur_menant_au_but/",filenameConvention:"ERREUR_MENANT_AU_BUT_MIN_SEC.mp4"},{id:56,category:"Moments Cls",eventName:"action_decisive",label:"Action dcisive",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/05_MomentsCles/Action_dcisive/",filenameConvention:"ACTION_DCISIVE_MIN_SEC.mp4"},{id:57,category:"Phases Arrtes",eventName:"corner_offensif",label:"Corner offensif",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Corner_offensif/",filenameConvention:"CORNER_OFFENSIF_MIN_SEC.mp4"},{id:58,category:"Phases Arrtes",eventName:"corner_defensif",label:"Corner dfensif",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Corner_dfensif/",filenameConvention:"CORNER_DFENSIF_MIN_SEC.mp4"},{id:59,category:"Phases Arrtes",eventName:"coup_franc_direct",label:"Coup franc direct",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Coup_franc_direct/",filenameConvention:"COUP_FRANC_DIRECT_MIN_SEC.mp4"},{id:60,category:"Phases Arrtes",eventName:"coup_franc_indirect",label:"Coup franc indirect",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Coup_franc_indirect/",filenameConvention:"COUP_FRANC_INDIRECT_MIN_SEC.mp4"},{id:61,category:"Phases Arrtes",eventName:"penalty_tire",label:"Penalty tir",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Penalty_tir/",filenameConvention:"PENALTY_TIR_MIN_SEC.mp4"},{id:62,category:"Phases Arrtes",eventName:"penalty_arrete",label:"Penalty arrt",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Penalty_arrt/",filenameConvention:"PENALTY_ARRT_MIN_SEC.mp4"},{id:63,category:"Phases Arrtes",eventName:"second_ballon_cpa",label:"Second ballon CPA",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Second_ballon_CPA/",filenameConvention:"SECOND_BALLON_CPA_MIN_SEC.mp4"},{id:64,category:"Phases Arrtes",eventName:"organisation_cpa",label:"Organisation CPA",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/06_SetPieces/Organisation_CPA/",filenameConvention:"ORGANISATION_CPA_MIN_SEC.mp4"},{id:65,category:"Gardien",eventName:"arret_simple",label:"Arrt simple",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Arrt_simple/",filenameConvention:"ARRT_SIMPLE_MIN_SEC.mp4"},{id:66,category:"Gardien",eventName:"arret_reflexe",label:"Arrt rflexe",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Arrt_rflexe/",filenameConvention:"ARRT_RFLEXE_MIN_SEC.mp4"},{id:67,category:"Gardien",eventName:"sortie_aerienne",label:"Sortie arienne",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Sortie_arienne/",filenameConvention:"SORTIE_ARIENNE_MIN_SEC.mp4"},{id:68,category:"Gardien",eventName:"sortie_au_sol",label:"Sortie au sol",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Sortie_au_sol/",filenameConvention:"SORTIE_AU_SOL_MIN_SEC.mp4"},{id:69,category:"Gardien",eventName:"relance_courte",label:"Relance courte",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Relance_courte/",filenameConvention:"RELANCE_COURTE_MIN_SEC.mp4"},{id:70,category:"Gardien",eventName:"relance_longue",label:"Relance longue",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Relance_longue/",filenameConvention:"RELANCE_LONGUE_MIN_SEC.mp4"},{id:71,category:"Gardien",eventName:"erreur_relance",label:"Erreur relance",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/Erreur_relance/",filenameConvention:"ERREUR_RELANCE_MIN_SEC.mp4"},{id:72,category:"Gardien",eventName:"1v1_gagne",label:"1v1 gagn",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/1v1_gagn/",filenameConvention:"1V1_GAGN_MIN_SEC.mp4"},{id:73,category:"Gardien",eventName:"1v1_perdu",label:"1v1 perdu",requiresZone:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/07_Gardien/1v1_perdu/",filenameConvention:"1V1_PERDU_MIN_SEC.mp4"},{id:74,category:"Discipline",eventName:"foul",label:"Faute simple",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/08_Discipline/Faute_simple/",filenameConvention:"FAUTE_SIMPLE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:8,mode:"LIVE"}]},{id:75,category:"Discipline",eventName:"faute_dangereuse",label:"Faute dangereuse",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/08_Discipline/Faute_dangereuse/",filenameConvention:"FAUTE_DANGEREUSE_MIN_SEC.mp4"},{id:76,category:"Discipline",eventName:"card_yellow",label:"Carton jaune",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/08_Discipline/Carton_jaune/",filenameConvention:"CARTON_JAUNE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:3,modifier:"View",mode:"LIVE"}]},{id:77,category:"Discipline",eventName:"card_red",label:"Carton rouge",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/08_Discipline/Carton_rouge/",filenameConvention:"CARTON_ROUGE_MIN_SEC.mp4",gamepadMappings:[{buttonIndex:1,modifier:"View",mode:"LIVE"}]},{id:78,category:"Discipline",eventName:"avertissement_verbal",label:"Avertissement verbal",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/08_Discipline/Avertissement_verbal/",filenameConvention:"AVERTISSEMENT_VERBAL_MIN_SEC.mp4"},{id:79,category:"Physique",eventName:"sprint",label:"Sprint",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/09_Physique/Sprint/",filenameConvention:"SPRINT_MIN_SEC.mp4"},{id:80,category:"Physique",eventName:"haute_intensite",label:"Haute intensit",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/09_Physique/Haute_intensit/",filenameConvention:"HAUTE_INTENSIT_MIN_SEC.mp4"},{id:81,category:"Physique",eventName:"baisse_de_rythme",label:"Baisse de rythme",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/09_Physique/Baisse_de_rythme/",filenameConvention:"BAISSE_DE_RYTHME_MIN_SEC.mp4"},{id:82,category:"Physique",eventName:"retour_defensif_long",label:"Retour dfensif long",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/09_Physique/Retour_dfensif_long/",filenameConvention:"RETOUR_DFENSIF_LONG_MIN_SEC.mp4"},{id:83,category:"Physique",eventName:"fatigue_visible",label:"Fatigue visible",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/09_Physique/Fatigue_visible/",filenameConvention:"FATIGUE_VISIBLE_MIN_SEC.mp4"},{id:84,category:"Tactique",eventName:"changement_systeme",label:"Changement systme",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/10_Tactique/Changement_systme/",filenameConvention:"CHANGEMENT_SYSTME_MIN_SEC.mp4"},{id:85,category:"Tactique",eventName:"ajustement_pressing",label:"Ajustement pressing",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/10_Tactique/Ajustement_pressing/",filenameConvention:"AJUSTEMENT_PRESSING_MIN_SEC.mp4"},{id:86,category:"Tactique",eventName:"bloc_plus_haut",label:"Bloc plus haut",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/10_Tactique/Bloc_plus_haut/",filenameConvention:"BLOC_PLUS_HAUT_MIN_SEC.mp4"},{id:87,category:"Tactique",eventName:"bloc_plus_bas",label:"Bloc plus bas",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/10_Tactique/Bloc_plus_bas/",filenameConvention:"BLOC_PLUS_BAS_MIN_SEC.mp4"},{id:88,category:"Tactique",eventName:"desequilibre_cote",label:"Dsquilibre ct",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/10_Tactique/Dsquilibre_ct/",filenameConvention:"DSQUILIBRE_CT_MIN_SEC.mp4"},{id:89,category:"Tactique",eventName:"surnombre_cree",label:"Surnombre cr",requiresZone:!0,requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/10_Tactique/Surnombre_cr/",filenameConvention:"SURNOMBRE_CR_MIN_SEC.mp4"},{id:90,category:"Psychologique",eventName:"leadership",label:"Leadership",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/11_Psychologique/Leadership/",filenameConvention:"LEADERSHIP_MIN_SEC.mp4"},{id:91,category:"Psychologique",eventName:"reaction_apres_but",label:"Raction aprs but",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/11_Psychologique/Raction_aprs_but/",filenameConvention:"RACTION_APRS_BUT_MIN_SEC.mp4"},{id:92,category:"Psychologique",eventName:"perte_de_concentration",label:"Perte de concentration",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/11_Psychologique/Perte_de_concentration/",filenameConvention:"PERTE_DE_CONCENTRATION_MIN_SEC.mp4"},{id:93,category:"Psychologique",eventName:"motivation_collective",label:"Motivation collective",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/11_Psychologique/Motivation_collective/",filenameConvention:"MOTIVATION_COLLECTIVE_MIN_SEC.mp4"},{id:94,category:"Match",eventName:"coup_denvoi",label:"Coup denvoi",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/12_Match/Coup_denvoi/",filenameConvention:"COUP_DENVOI_MIN_SEC.mp4"},{id:95,category:"Match",eventName:"mi_temps",label:"Mi-temps",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/12_Match/Mi-temps/",filenameConvention:"MI-TEMPS_MIN_SEC.mp4"},{id:96,category:"Match",eventName:"fin_de_match",label:"Fin de match",defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!1,isPostMatch:!0,folderPath:"/Match_DATE/12_Match/Fin_de_match/",filenameConvention:"FIN_DE_MATCH_MIN_SEC.mp4"},{id:97,category:"Match",eventName:"temps_fort",label:"Temps fort",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/12_Match/Temps_fort/",filenameConvention:"TEMPS_FORT_MIN_SEC.mp4"},{id:98,category:"Match",eventName:"temps_faible",label:"Temps faible",requiresDuration:!0,defaultDuration:[5,12],trigger:"Dclencheur terrain",endCondition:"Action termine",isRealTime:!0,isPostMatch:!0,folderPath:"/Match_DATE/12_Match/Temps_faible/",filenameConvention:"TEMPS_FAIBLE_MIN_SEC.mp4"}],Dce=t=>{if(t.length===0)return;const e=["ID","Timestamp","Match Time","Mode","Team","Event","Player","Zone","Sub Type","X","Y"],r=t.map(o=>[o.id,o.timestamp,o.matchTime||"",o.mode||"POST_MATCH",o.team,`"${o.eventName}"`,o.player?`"${o.player.name}"`:"",o.zone||"",o.subType||"",o.x||"",o.y||""]),n=[e.join(","),...r.map(o=>o.join(","))].join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),a=URL.createObjectURL(i);s.setAttribute("href",a),s.setAttribute("download",`soccer_events_${new Date().toISOString()}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},Oo={PASS:["pass","past","path","bass","passe","tamrir"],SHOOT:["shoot","shot","chute","suit","tir","tasdid"],GOAL:["goal","go","gold","cold","but","hadaf"],FOUL:["foul","fall","full","fail","faute","khata"],OFFSIDE:["offside","hors-jeu","tasallul"],PENALTY:["penalty","peno","rkalat"],CORNER:["corner","ruknya"],SUBSTITUTION:["substitution","sub","change","remplacement","tabdil"]},Fo={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,mine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},Uo={un:1,une:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13,quatorze:14,quinze:15,seize:16,"dix-sept":17,"dix-huit":18,"dix-neuf":19,vingt:20,trente:30,quarante:40,cinquante:50,soixante:60,"soixante-dix":70,"quatre-vingt":80,"quatre-vingt-dix":90},Xu={wahid:1,ithnan:2,thalatha:3,arbaa:4,khamsa:5,sitta:6,"sab'a":7,thamaniya:8,"tis'a":9,ashara:10,"ahada ashara":11,"ithna ashara":12,"thalatha ashara":13,"arbaa ashara":14,"khamsa ashara":15,"sitta ashara":16,"sab'a ashara":17,"thamaniya ashara":18,"tis'a ashara":19,ishrun:20,thalathun:30,"arba'un":40,khamsun:50,sittun:60,"sab'un":70,thamanun:80,"tis'un":90},Oce=(t,e)=>{if(t.length===0)return e.length;if(e.length===0)return t.length;const r=[];for(let n=0;n<=e.length;n++)r[n]=[n];for(let n=0;n<=t.length;n++)r[0][n]=n;for(let n=1;n<=e.length;n++)for(let i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]},$o=(t,e)=>{const r=t.toLowerCase().split(/\s+/);for(const n of r)for(const i of e){if(n===i)return!0;const s=i.length>4?2:1;if(Oce(n,i)<=s)return!0}return!1},Fce=t=>{const e=t.toLowerCase(),r=e.match(/\d+/);if(r)return parseInt(r[0],10);const n=e.split(/\s+/);for(const i of n){if(Fo[i])return Fo[i];if(Uo[i])return Uo[i];if(Xu[i])return Xu[i]}for(let i=0;i<n.length-1;i++){if(`${n[i]}${n[i+1]}`,Fo[n[i]]&&Fo[n[i+1]]&&Fo[n[i]]>=20&&Fo[n[i+1]]<10)return Fo[n[i]]+Fo[n[i+1]];if(Uo[n[i]]&&Uo[n[i+1]]&&Uo[n[i]]>=20&&Uo[n[i+1]]<20)return Uo[n[i]]+Uo[n[i+1]];if(n[i+1]==="wa"&&i<n.length-2){const s=n[i],a=n[i+2];if(Xu[s]&&Xu[a])return Xu[s]+Xu[a]}}return null};function Uce(t){const{events:e,setEvents:r,teams:n,setTeams:i,selectedTeam:s,setSelectedTeam:a,videoTime:o,useVideoMode:l,setUseVideoMode:u,setVideoMode:d,setIsVideoPlaying:A,editingEventId:f,setEditingEventId:h,setLastEventButtonLabel:m,processEvent:p,setIsMatchActive:g,isMatchActive:x,matchTimeRef:v,formatTime:y,socket:w,hasPermission:b,user:S,autoExtract:C,serverVideoPath:T,setActiveDurations:B,setSelectedPendingEvent:_,voiceLanguage:I,startListening:L,isListening:N}=t,R=async H=>{if(!T)return;const z=5,ae=10,X=Math.max(0,(H.videoTime||o)-.6-z);try{await fetch(`${hr}/api/extract-clip`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoPath:T,startTime:X,duration:ae,eventType:H.eventName,eventName:`${H.eventName}_Z${H.zone||0}_${H.matchTime.replace(/:/g,"-")}`,outputRelativePath:null})}),Ge.info(`Auto-Clipping: ${H.eventName}`)}catch(ne){console.error("Auto-extract failed",ne),Ge.error("Auto-clip failed")}},M=E.useCallback(H=>{if(H.eventName==="ui_confirm"||H.eventName==="ui_cancel")return;const z=v.current,ae=o,X={...H,matchTime:y(z),...l?{videoTime:ae}:{}},{newState:ne,possessionId:ee,predictions:G,isInTransition:ge}=p(X),ye={...X,matchState:ne,possessionId:ee,predictions:G.slice(0,3),inTransitionWindow:ge};if(!b("dashboard.live.tagging")&&(S==null?void 0:S.role)!=="admin"){Ge.error("Only the Live Tagger can record events.");return}r(ce=>[ye,...ce]),m(H.buttonLabel),w==null||w.emit("new-event",ye);const Me=Ld.find(ce=>ce.eventName===H.eventName);if(C&&l&&(Me==null?void 0:Me.clippingEnabled)!==!1&&R(ye),Me!=null&&Me.requiresDuration){let ce=!1;B(Be=>{const _e=new Map(Be);if(_e.has(H.eventName)){const He=_e.get(H.eventName),Se=l?o-He.startTime:v.current-He.matchTime;console.log(` Duration for ${H.eventName}: ${Se.toFixed(2)}s`),_e.delete(H.eventName)}else _e.set(H.eventName,{startTime:l?o:0,matchTime:v.current}),ce=!0;return _e}),ce&&Ge.info(` Started: ${H.buttonLabel||H.eventName}`)}},[l,o,y,v,r,m,w,p,C,b,S,B,T]),k=E.useCallback((H,z)=>{r(X=>X.map(ne=>ne.id===H?{...ne,zone:z,isPendingZone:!1}:ne)),e.find(X=>X.id===H)&&(w==null||w.emit("update-event",{id:H,zone:z,isPendingZone:!1})),_(null),Ge.success("Zone assigned successfully")},[e,r,w,_]),O=E.useCallback(H=>{r(z=>z.map(ae=>ae.id===H?{...ae,isPendingZone:!1}:ae)),Ge.info("Zone assignment skipped")},[r]),j=H=>{const z=new Map(n);H.forEach((ae,X)=>{z.set(X,ae)}),i(z),w==null||w.emit("sync-teams",Array.from(z.entries())),H.size>0&&a("")},D=H=>{a(H),w==null||w.emit("select-team",H)},F=H=>{r(z=>{const ae=[...z];let X=-1;if(f!==null)X=ae.findIndex(ne=>ne.id===f);else{const ne=Math.min(ae.length,10);for(let ee=ne-1;ee>=0;ee--)if(!ae[ee].player&&!ae[ee].isCalculated){X=ee;break}}if(X!==-1){const ne=ae[X],ee=n.get(s),G=ee==null?void 0:ee.PlayerData.find(ge=>ge.ID===H);if(G){const ge={...ne,player:{id:G.ID,name:`${G.Forename} ${G.Surname}`}};ae[X]=ge,w==null||w.emit("update-event",ge),Ge.success("Player Assigned",{description:`Assigned ${G.Surname} to ${ne.eventName}`}),f!==null&&h(null)}}return ae})},$=(H,z="Manual")=>{const ae=Array.from(n.keys()),X=s===ae[1]?"TEAM_B":"TEAM_A",ne={id:+`${Date.now()}${Math.floor(Math.random()*1e3)}`,timestamp:new Date().toISOString(),eventName:H,team:X,buttonLabel:z,matchTime:y(v.current)};M(ne)};return{handleEventLogged:M,handleAssignZone:k,handleDismissPending:O,handleTeamUpload:j,handleTeamSelect:D,handlePlayerSelect:F,handleGameEvent:$,handleVoiceResult:H=>{var ne;const z=H.toLowerCase(),ae=Fce(z);if(ae!==null){const ee=(ne=n.get(s))==null?void 0:ne.PlayerData;if(ee){const G=ee.find(ge=>ge.Number===ae);G&&F(G.ID)}}let X=null;$o(z,Oo.PASS)?X="PASS":$o(z,Oo.SHOOT)?X="SHOT":$o(z,Oo.GOAL)?X="GOAL":$o(z,Oo.FOUL)?X="FOUL":$o(z,Oo.OFFSIDE)?X="OFFSIDE":$o(z,Oo.PENALTY)?X="PENALTY":$o(z,Oo.CORNER)?X="CORNER":$o(z,Oo.SUBSTITUTION)&&(X="SUBSTITUTION"),X&&($(X,"Voice"),Ge.success("Voice Command",{description:`Executed: ${X}`}))},toggleMatch:()=>{if(x)g(!1),l&&A(!1);else if(g(!0),l&&A(!0),!N)try{L()}catch(H){console.error(H)}},toggleWatchMatch:async()=>{const{videoStream:H,setVideoStream:z}=t;if(H)H.getTracks().forEach(ae=>ae.stop()),z(null);else try{const ae=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"window"},audio:!1});z(ae),ae.getVideoTracks()[0].onended=()=>z(null)}catch(ae){console.error("Error sharing screen:",ae)}},handleExport:()=>{if(e.length===0){Ge.error("No events");return}Dce(e),Ge.success("Exported to CSV")},extractClip:R}}const tK=E.createContext(void 0),$ce=({children:t})=>{const[e,r]=E.useState([]),[n,i]=E.useState(!0),s=async()=>{try{i(!0);const u=await fetch(`${hr}/api/events-config`);if(!u.ok)throw new Error("Failed to fetch config");const d=await u.json();Array.isArray(d)&&d.length>0?r(d):(console.log("No remote config found, using defaults."),r(Ld))}catch(u){console.error("Failed to load event config:",u),r(Ld)}finally{i(!1)}};E.useEffect(()=>{s()},[]);const a=async(u=e)=>{try{if(!(await fetch(`${hr}/api/events-config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Failed to save config");Ge.success("Event configuration saved successfully")}catch(d){console.error("Error saving config:",d),Ge.error("Failed to save configuration")}},o=async u=>{const d=e.map(A=>A.id===u.id?u:A);r(d),await a(d)},l=async()=>{confirm("Are you sure you want to reset all events to default settings?")&&(r(Ld),await a(Ld),Ge.info("Reset to default configuration"))};return c.jsx(tK.Provider,{value:{events:e,isLoading:n,updateEvent:o,resetToDefaults:l,saveConfig:()=>a()},children:t})},Tf=()=>{const t=E.useContext(tK);if(!t)throw new Error("useEventConfig must be used within EventConfigProvider");return t},rK=t=>t===1?"GK":t>=2&&t<=5||t===15||t>=20&&t<=25?"DEF":t>=6&&t<=8?"MID":t>=9&&t<=11?"FWD":"MID",Nj=(t,e)=>t.map(r=>({id:r.id,name:r.name,number:r.number||r.id,position:rK(r.number||r.id),team:e})),Ij=t=>Array.from({length:11},(e,r)=>{const n=r+1;return{id:n,name:`Player #${n}`,number:n,position:rK(n),team:t}}),pi={0:"A",1:"B",2:"X",3:"Y",4:"LB",5:"RB",6:"LT",7:"RT",8:"View",9:"Menu",10:"L3",11:"R3",12:"D-Up",13:"D-Down",14:"D-Left",15:"D-Right"},Qce=["pass_start","shot_start","dribble_attempt","foul","interception","turnover","save","card_yellow","card_red","goal","key_pass","assist"],Pj={Space:0,ShiftLeft:1,KeyK:2,KeyL:3,KeyQ:4,KeyE:5,KeyU:6,KeyO:7,KeyV:8,KeyM:9,KeyZ:10,KeyX:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15},YE=500,Hce=(t,e={},r)=>{const{events:n}=Tf(),[i,s]=E.useState(!1),[a,o]=E.useState([]),[l,u]=E.useState([]),[d,A]=E.useState([]),{mappings:f,combos:h,buttonHolds:m,dpadHolds:p}=E.useMemo(()=>{const Ce=[],Qe=[],me={},Pe={};return n.forEach(be=>{be.gamepadMappings&&be.gamepadMappings.forEach(le=>{const Ee=e.analysisMode==="POST_MATCH";if(!(le.mode==="BOTH"||(Ee?le.mode==="POST":le.mode==="LIVE")))return;const pe=le.modifier?`${le.modifier}+${pi[le.buttonIndex]}`:pi[le.buttonIndex];le.modifier?Qe.push({modifier:le.modifier,button:le.buttonIndex,eventName:be.eventName,eventDescription:be.label,buttonLabel:pe}):le.isHold?le.buttonIndex>=12&&le.buttonIndex<=15?Pe[le.buttonIndex]=be.eventName:me[le.buttonIndex]=be.eventName:Ce.push({index:le.buttonIndex,eventName:be.eventName,eventDescription:be.label,buttonLabel:pe})})}),{mappings:Ce,combos:Qe,buttonHolds:me,dpadHolds:Pe}},[n,e.analysisMode]),[g,x]=E.useState({currentBallHolder:null,predictedTargets:[],selectedTargetIndex:0,isSelecting:!1}),[v,y]=E.useState({isOpen:!1,roster:[],selectedIndex:0,team:"TEAM_A"}),[w,b]=E.useState({isOpen:!1,selectedZone:1}),[S,C]=E.useState({activeThird:"MIDFIELD",previewZone:null,confirmedZone:0}),T=E.useRef({activeThird:"MIDFIELD",previewZone:null,confirmedZone:0});E.useEffect(()=>{T.current=S},[S]);const[B,_]=E.useState(null),I=E.useRef(null),L=E.useRef({isOpen:!1,roster:[],selectedIndex:0,team:"TEAM_A"}),N=E.useRef({isOpen:!1,selectedZone:1}),[R,M]=E.useState(!1),k=E.useRef(!1);E.useEffect(()=>{k.current=R},[R]),E.useEffect(()=>{L.current=v},[v]),E.useEffect(()=>{I.current=B},[B]),E.useEffect(()=>{N.current=w},[w]);const O=E.useCallback(()=>{console.warn("resetMappings called: This is now handled by the Event Registry SSOT.")},[]),j=E.useCallback((Ce,Qe)=>{console.warn("updateMapping called locally: Please update the Event Registry via Admin UI instead.")},[]),[D,F]=E.useState(0),$=E.useRef(0),[U,K]=E.useState(""),V=E.useRef(""),q=E.useRef(g);E.useEffect(()=>{q.current=g},[g]),E.useEffect(()=>{$.current=D},[D]);const H=E.useRef(new Array(32).fill(!1)),z=E.useRef({});E.useRef(null);const ae=E.useRef(!1),X=E.useRef(null),ne=E.useRef(null),ee=E.useRef([]),G=E.useRef([]),ge=E.useRef(void 0),ye=E.useRef(void 0),Me=E.useRef(new Map),ce=E.useRef(null),Be=600,_e=E.useRef({currentTeam:"TEAM_A",lastAction:null,passSequenceCount:0}),He=E.useRef({});E.useEffect(()=>{if(e.teamARoster?ee.current=Nj(e.teamARoster,"TEAM_A"):ee.current=Ij("TEAM_A"),e.teamBRoster?G.current=Nj(e.teamBRoster,"TEAM_B"):G.current=Ij("TEAM_B"),ge.current=e.teamAStartingNumbers,ye.current=e.teamBStartingNumbers,ee.current.length>0){let Ce=ee.current[0];if(e.teamAStartingNumbers&&e.teamAStartingNumbers.length>0){const Qe=ee.current.find(me=>{var Pe;return(Pe=e.teamAStartingNumbers)==null?void 0:Pe.includes(me.number)});Qe&&(Ce=Qe)}x(Qe=>Qe.currentBallHolder?Qe:{...Qe,currentBallHolder:Ce})}},[e.teamARoster,e.teamBRoster,e.teamAStartingNumbers,e.teamBStartingNumbers]);const Se=E.useCallback((Ce,Qe,me="System",Pe=!1,be,le,Ee={})=>{if(Ce==="ui_confirm"){console.log(` UI Action: ${Ce}`);return}if(Ce==="ui_cancel"){if(ce.current&&Me.current.has(ce.current)){const xe=ce.current;clearTimeout(Me.current.get(xe)),Me.current.delete(xe),ce.current=null,console.log(" EVENT CANCELLED BY USER");return}console.log(` UI Action: ${Ce}`);return}if(e.analysisMode==="POST_MATCH"){if(Ce==="pass_start")if(k.current)Ce="pass_end";else{const xe={id:+`${Date.now()}${Math.floor(Math.random()*1e3)}`,timestamp:new Date().toISOString(),eventName:"pass_start",team:Qe,buttonLabel:me,isCalculated:Pe,zone:$.current,subType:le,mode:"POST_MATCH"};t(xe),M(!0),k.current=!0,console.log(" Pass Started... Waiting for Receiver");return}if(Qce.includes(Ce)||Ce==="pass_end"){const xe={id:+`${Date.now()}${Math.floor(Math.random()*1e3)}`,timestamp:new Date().toISOString(),eventName:Ce,team:Qe,buttonLabel:me,isCalculated:Pe,zone:$.current,subType:le,mode:"POST_MATCH"};_(xe),I.current=xe;const Oe=Qe==="TEAM_A"?ee.current:G.current,st=Qe==="TEAM_A"?ge.current:ye.current;let xt=Oe;st&&st.length>0&&(xt=Oe.filter(br=>st.includes(br.number))),xt.length===0&&(xt=Oe);const Xr={isOpen:!0,roster:xt,selectedIndex:0,team:Qe};y(Xr),L.current=Xr,r&&r(!1);return}}const ve=n.find(xe=>xe.eventName===Ce);(ve==null?void 0:ve.requiresZone)&&!Ee.zone&&(console.log(` Event [${Ce}] queued for Asynchronous Zone Selection...`),Ee={...Ee,isPendingZone:!0});const re={id:+`${Date.now()}${Math.floor(Math.random()*1e3)}`,timestamp:new Date().toISOString(),eventName:Ce,team:Qe,buttonLabel:me,isCalculated:Pe,zone:$.current,subType:le,mode:e.analysisMode||"POST_MATCH",category:ve==null?void 0:ve.category,folder:ve==null?void 0:ve.folderPath,filenameConvention:ve==null?void 0:ve.filenameConvention,durationMs:ve!=null&&ve.defaultDuration?ve.defaultDuration[0]*1e3:0,...be?{player:{id:be.id,name:be.name}}:{},...Ee},Ke=setTimeout(()=>{t(re),Me.current.delete(re.id),ce.current===re.id&&(ce.current=null)},Be);return Me.current.set(re.id,Ke),ce.current=re.id,Ce==="turnover"&&(_e.current.currentTeam=_e.current.currentTeam==="TEAM_A"?"TEAM_B":"TEAM_A",console.log(` Possession changed to ${_e.current.currentTeam}`)),re},[t,e.analysisMode,r,n]);E.useEffect(()=>{const Ce=me=>{if(me.target instanceof HTMLInputElement||me.target instanceof HTMLTextAreaElement)return;if(e.useKeyboardAsController){const le=Pj[me.code];if(le!==void 0){me.preventDefault(),He.current[le]=!0;return}}if(me.code.startsWith("Numpad")&&me.code.length===7){const le=me.code.slice(6);K(Ee=>Ee+le),V.current+=le;return}if(me.code==="Enter"||me.code==="NumpadEnter"){const le=parseInt(V.current);if(!isNaN(le)){const Ee=_e.current.currentTeam,pe=(Ee==="TEAM_A"?ee.current:G.current).find(re=>re.number===le);pe?(x(re=>({...re,currentBallHolder:pe})),console.log(`Identified Player: #${le} (${pe.name})`)):console.warn(`Player #${le} not found in ${Ee}`)}K(""),V.current="";return}const Pe=_e.current.currentTeam,be="Keyboard";if(me.key==="1"){me.altKey?Se("pre_assist",Pe,be):me.ctrlKey?Se("assist",Pe,be):me.shiftKey?Se("key_pass",Pe,be):Se("pass_end",Pe,be);return}else if(me.key==="2"){me.shiftKey?Se("goal",Pe,be):Se("shot_outcome",Pe,be);return}else if(me.key==="3"){me.shiftKey?Se("dribble_fail",Pe,be):Se("dribble_success",Pe,be);return}else if(me.key==="4"){Se("duel_ground",Pe,be);return}else if(me.key==="5"){Se("duel_aerial",Pe,be);return}else if(me.key.toLowerCase()==="q"){if(!e.useKeyboardAsController){Se("phase_buildup_end",Pe,be);return}}else if(me.key.toLowerCase()==="w"){Se("phase_consolidation",Pe,be);return}else if(me.key.toLowerCase()==="e"){if(!e.useKeyboardAsController){Se("phase_final_third",Pe,be);return}}else if(me.key.toLowerCase()==="m"){Se("phase_midblock",Pe,be);return}else if(me.key.toLowerCase()==="l"){Se("phase_lowblock",Pe,be);return}else if(me.key.toLowerCase()==="z"){Se("transition_end",Pe,be);return}else if(me.key.toLowerCase()==="p"){me.shiftKey?Se("pressing_fail",Pe,be):Se("pressing_success",Pe,be);return}else if(me.key.toLowerCase()==="r"){Se("pressing_resistance",Pe,be);return}else if(me.key.toLowerCase()==="o"){if(!e.useKeyboardAsController){me.altKey?Se("underlap",Pe,be):me.shiftKey?Se("overlap",Pe,be):Se("off_ball_run",Pe,be);return}}else if(me.key.toLowerCase()==="t"){Se("third_man_run",Pe,be);return}else if(me.key.toLowerCase()==="d"){Se("dummy_run",Pe,be);return}else if(me.key.toLowerCase()==="c"){Se("chance_created",Pe,be);return}else if(me.key.toLowerCase()==="f"){Se("timestamp_fix",Pe,be);return}else if(me.key==="Enter"&&!me.code.startsWith("Numpad")){Se("ai_accept",Pe,be);return}else if(me.key==="Backspace"){Se("ai_reject",Pe,be);return}e.analysisMode==="LIVE"&&!e.useKeyboardAsController&&(me.code==="Space"?Se("corner_start",Pe,"Keyboard"):me.code==="ArrowUp"?Se("foul_committed",Pe,"Keyboard"):me.code==="ArrowDown"&&Se("offside",Pe,"Keyboard"))},Qe=me=>{if(e.useKeyboardAsController){const Pe=Pj[me.code];Pe!==void 0&&(me.preventDefault(),He.current[Pe]=!1)}};return window.addEventListener("keydown",Ce),window.addEventListener("keyup",Qe),()=>{window.removeEventListener("keydown",Ce),window.removeEventListener("keyup",Qe)}},[Se,e.analysisMode,e.useKeyboardAsController]),E.useEffect(()=>{const Ce=()=>{console.group("[useGamepad] Window Focus Lost"),console.info("Resetting button states and modifier refs..."),H.current=new Array(16).fill(!1),X.current=null,ae.current=!1,z.current={},console.groupEnd()};return window.addEventListener("blur",Ce),()=>window.removeEventListener("blur",Ce)},[]),E.useEffect(()=>{const Ce=()=>{const ve=navigator.getGamepads().some(pe=>pe!==null);s(ve||!!e.useKeyboardAsController)};Ce();const Qe=(Ee,ve,pe)=>{const{currentTeam:re}=_e.current;Se(Ee.eventName,re,Ee.buttonLabel,!1,null,void 0,{durationMs:pe})},me=()=>{const Ee=navigator.getGamepads(),ve=Array.from(Ee).find(Ae=>Ae!==null);let pe=[],re=Ae=>!1,Ke=[0,0,0,0];if(ve){const Ae=fe=>{const ue=ve.buttons[fe];return ue?fe===6||fe===7?ue.value>.2:ue.pressed:!1};re=fe=>{const ue=Ae(fe),de=e.useKeyboardAsController?He.current[fe]:!1;return ue||de},Ke=[...ve.axes],A([...ve.buttons])}else if(e.useKeyboardAsController)re=Ae=>!!He.current[Ae],A(new Array(16).fill(null).map((Ae,fe)=>({pressed:He.current[fe]||!1,value:He.current[fe]?1:0,touched:He.current[fe]||!1})));else{requestAnimationFrame(me);return}u(Ke);const xe=re(6),Oe=re(7);let st="MIDFIELD",xt=6;xe&&!Oe?(st="DEFENSE",xt=0):Oe&&!xe&&(st="ATTACK",xt=12);const Xr=Ke[2]||0,br=Ke[3]||0,Fn=.4;let Os=null;if(Math.abs(Xr)>Fn||Math.abs(br)>Fn){let Ae=2;Xr<-Fn?Ae=1:Xr>Fn&&(Ae=3);const ue=((br<0?1:2)-1)*3+Ae;Os=xt+ue}(T.current.activeThird!==st||T.current.previewZone!==Os)&&C(Ae=>({...Ae,activeThird:st,previewZone:Os}));for(let Ae=0;Ae<16;Ae++)re(Ae)&&pe.push(Ae);if(o(pe),L.current.isOpen){const{selectedIndex:Ae,roster:fe}=L.current,ue=5;if(re(15)&&!H.current[15]&&y(de=>({...de,selectedIndex:Math.min(de.selectedIndex+1,de.roster.length-1)})),re(14)&&!H.current[14]&&y(de=>({...de,selectedIndex:Math.max(de.selectedIndex-1,0)})),re(13)&&!H.current[13]&&y(de=>({...de,selectedIndex:Math.min(de.selectedIndex+ue,de.roster.length-1)})),re(12)&&!H.current[12]&&y(de=>({...de,selectedIndex:Math.max(de.selectedIndex-ue,0)})),re(0)&&!H.current[0]){const de=fe[Ae];if(I.current&&de){const rt={...I.current,player:{id:de.id,name:de.name}};t(rt),console.log(` Logged ${rt.eventName} for ${de.name}`)}y(rt=>({...rt,isOpen:!1})),_(null),M(!1),r&&r(!0)}if(re(1)&&!H.current[1]){if(I.current){const de={...I.current};t(de)}y(de=>({...de,isOpen:!1})),_(null),M(!1),r&&r(!0)}for(let de=0;de<16;de++)H.current[de]=re(de);requestAnimationFrame(me);return}if(re(0)&&!H.current[0]){const Ae=T.current.previewZone;Ae!==null&&(F(Ae),$.current=Ae,C(fe=>({...fe,confirmedZone:Ae})),console.log(` Zone Confirmed: ${Ae}`))}if(N.current.isOpen&&e.analysisMode==="POST_MATCH"){const{selectedZone:Ae}=N.current,fe=3;re(15)&&!H.current[15]&&Ae%fe!==0&&b(ue=>({...ue,selectedZone:ue.selectedZone+1})),re(14)&&!H.current[14]&&Ae%fe!==1&&b(ue=>({...ue,selectedZone:ue.selectedZone-1})),re(13)&&!H.current[13]&&Ae<=15&&b(ue=>({...ue,selectedZone:ue.selectedZone+fe})),re(12)&&!H.current[12]&&Ae>fe&&b(ue=>({...ue,selectedZone:ue.selectedZone-fe})),re(0)&&!H.current[0]&&(I.current&&Se(I.current.eventName,I.current.team,I.current.buttonLabel,!1,null,void 0,{zone:Ae}),b({isOpen:!1,selectedZone:1}),_(null),r&&r(!0)),re(1)&&!H.current[1]&&(b({isOpen:!1,selectedZone:1}),_(null),r&&r(!0));for(let ue=0;ue<16;ue++)H.current[ue]=re(ue);requestAnimationFrame(me);return}const Tn=Date.now();if(ne.current){const{startTime:Ae,count:fe,eventId:ue}=ne.current;if(Tn-Ae>2e3)ne.current=null;else if(re(0)&&!H.current[0]){const de=Math.min(fe+1,5);ne.current.count=de,console.log(` Quality Rated: ${de}/5 for Event ${ue}`)}}const Qr={RT:re(7),LT:re(6),RB:re(5),LB:re(4),View:re(8),Menu:re(9),"D-Up":re(12),"D-Down":re(13),"D-Left":re(14),"D-Right":re(15)};for(let Ae=0;Ae<16;Ae++)re(Ae)&&!H.current[Ae]&&(z.current[Ae]=Tn,[4,5,6,7,8,9,12,13,14,15].includes(Ae)&&(ae.current=!1,X.current=Ae));Object.entries(m).forEach(([Ae,fe])=>{const ue=parseInt(Ae);re(ue)&&z.current[ue]&&Tn-z.current[ue]>=YE&&!H.current[ue]&&(Se(fe,_e.current.currentTeam,pi[ue]||`B${ue}`),ae.current=!0)}),Object.entries(p).forEach(([Ae,fe])=>{const ue=parseInt(Ae);re(ue)&&z.current[ue]&&Tn-z.current[ue]>=YE&&!H.current[ue]&&(Se(fe,_e.current.currentTeam,pi[ue]||`B${ue}`),ae.current=!0)});let $e=!1;h.forEach(Ae=>{Qr[Ae.modifier]&&re(Ae.button)&&!H.current[Ae.button]&&(Qe({index:Ae.button,eventName:Ae.eventName,eventDescription:Ae.eventDescription,buttonLabel:Ae.buttonLabel},{lb:Qr.LB,rb:Qr.RB},0),$e=!0,ae.current=!0)});for(let Ae=0;Ae<16;Ae++)if(!re(Ae)&&H.current[Ae]){const ue=Tn-(z.current[Ae]||0);if([4,5,6,7,8,9,12,13,14,15].includes(Ae)){if(Ae===6||Ae===7){X.current=null,delete z.current[Ae];continue}if(!ae.current){const de=f.find(rt=>rt.index===Ae);de&&Qe(de,{lb:Qr.LB,rb:Qr.RB},ue)}X.current=null}else if(!ae.current||ue<YE){const de=f.find(rt=>rt.index===Ae);de&&!$e&&de.eventName!=="transition_def_start"&&de.eventName!=="transition_off_start"&&Qe(de,{lb:Qr.LB,rb:Qr.RB},ue)}delete z.current[Ae]}if(!Qr.RT&&!Qr.LT){const Ae=Ke[0],fe=Ke[1],ue=.5;if(!_e.current.lastStickMove||Tn-_e.current.lastStickMove>200){let de=$.current,rt=!1;fe<-ue?de<=15&&(de+=3,rt=!0):fe>ue?de>3&&(de-=3,rt=!0):Ae<-ue?de>1&&de%3!==1&&(de-=1,rt=!0):Ae>ue&&de<18&&de%3!==0&&(de+=1,rt=!0),rt&&(F(de),_e.current.lastStickMove=Tn)}}!re(5)&&H.current[5]&&!ae.current&&(f.find(Ae=>Ae.index===5)||(_e.current.currentTeam=_e.current.currentTeam==="TEAM_A"?"TEAM_B":"TEAM_A",console.log(` Team Toggled: ${_e.current.currentTeam}`)));for(let Ae=0;Ae<16;Ae++)H.current[Ae]=re(Ae)},Pe="let intervalId; self.onmessage = function(e) { if (e.data === 'start') { intervalId = setInterval(() => { self.postMessage('tick'); }, 16); } else if (e.data === 'stop') { clearInterval(intervalId); } };",be=new Blob([Pe],{type:"application/javascript"}),le=new Worker(URL.createObjectURL(be));return le.onmessage=Ee=>{Ee.data==="tick"&&me()},window.addEventListener("gamepadconnected",Ce),window.addEventListener("gamepaddisconnected",Ce),Ce(),le.postMessage("start"),()=>{window.removeEventListener("gamepadconnected",Ce),window.removeEventListener("gamepaddisconnected",Ce),le.postMessage("stop"),le.terminate()}},[f,t,e.useKeyboardAsController,r]);const it=E.useCallback(()=>{const Qe=navigator.getGamepads().some(me=>me!==null);return s(Qe),Qe},[]);return{isConnected:i,manualCheck:it,pressedButtons:a,axes:l,buttons:d,mappings:f,updateMapping:j,resetMappings:O,playerSelection:g,currentZone:D,setCurrentZone:F,keyboardBuffer:U,quickSelectorState:v,zoneSelector:w,setZoneSelector:b,thirdsZone:S,setThirdsZone:C}},qE="tacta_dashboard_layout_v1",Kce=()=>{const[t,e]=E.useState(!1),[r,n]=E.useState({});E.useEffect(()=>{try{const o=localStorage.getItem(qE);o&&n(JSON.parse(o))}catch(o){console.error("Failed to load dashboard layout",o)}},[]);const i=E.useCallback(o=>{n(l=>{const u=l[o]||{hidden:!1};return{...l,[o]:{...u,hidden:!u.hidden}}})},[]),s=E.useCallback(()=>{try{localStorage.setItem(qE,JSON.stringify(r)),Ge.success("Dashboard layout saved"),e(!1)}catch{Ge.error("Failed to save layout")}},[r]),a=E.useCallback(()=>{n({}),localStorage.removeItem(qE),Ge.info("Layout reset to default")},[]);return{isEditMode:t,setIsEditMode:e,layoutConfig:r,toggleComponentVisibility:i,saveLayout:s,resetLayout:a}},XE=768;function Vce(){const[t,e]=E.useState(void 0);return E.useEffect(()=>{const r=window.matchMedia(`(max-width: ${XE-1}px)`),n=()=>{e(window.innerWidth<XE)};return r.addEventListener("change",n),e(window.innerWidth<XE),()=>r.removeEventListener("change",n)},[]),!!t}const Gce=$u("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=E.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},s)=>{const a=n?xf:"button";return c.jsx(a,{className:Z(Gce({variant:e,size:r,className:t})),ref:s,...i})});te.displayName="Button";const jr=E.forwardRef(({className:t,type:e,...r},n)=>c.jsx("input",{type:e,className:Z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));jr.displayName="Input";var zce="Separator",Rj="horizontal",Wce=["horizontal","vertical"],nK=E.forwardRef((t,e)=>{const{decorative:r,orientation:n=Rj,...i}=t,s=Yce(n)?n:Rj,o=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return c.jsx(De.div,{"data-orientation":s,...o,...i,ref:e})});nK.displayName=zce;function Yce(t){return Wce.includes(t)}var iK=nK;const sK=E.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>c.jsx(iK,{ref:i,decorative:r,orientation:e,className:Z("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));sK.displayName=iK.displayName;var ZE="focusScope.autoFocusOnMount",JE="focusScope.autoFocusOnUnmount",kj={bubbles:!1,cancelable:!0},qce="FocusScope",jI=E.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[o,l]=E.useState(null),u=Dr(i),d=Dr(s),A=E.useRef(null),f=qe(e,p=>l(p)),h=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let p=function(y){if(h.paused||!o)return;const w=y.target;o.contains(w)?A.current=w:qo(A.current,{select:!0})},g=function(y){if(h.paused||!o)return;const w=y.relatedTarget;w!==null&&(o.contains(w)||qo(A.current,{select:!0}))},x=function(y){if(document.activeElement===document.body)for(const b of y)b.removedNodes.length>0&&qo(o)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const v=new MutationObserver(x);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),v.disconnect()}}},[n,o,h.paused]),E.useEffect(()=>{if(o){jj.add(h);const p=document.activeElement;if(!o.contains(p)){const x=new CustomEvent(ZE,kj);o.addEventListener(ZE,u),o.dispatchEvent(x),x.defaultPrevented||(Xce(rue(aK(o)),{select:!0}),document.activeElement===p&&qo(o))}return()=>{o.removeEventListener(ZE,u),setTimeout(()=>{const x=new CustomEvent(JE,kj);o.addEventListener(JE,d),o.dispatchEvent(x),x.defaultPrevented||qo(p??document.body,{select:!0}),o.removeEventListener(JE,d),jj.remove(h)},0)}}},[o,u,d,h]);const m=E.useCallback(p=>{if(!r&&!n||h.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const v=p.currentTarget,[y,w]=Zce(v);y&&w?!p.shiftKey&&x===w?(p.preventDefault(),r&&qo(y,{select:!0})):p.shiftKey&&x===y&&(p.preventDefault(),r&&qo(w,{select:!0})):x===v&&p.preventDefault()}},[r,n,h.paused]);return c.jsx(De.div,{tabIndex:-1,...a,ref:f,onKeyDown:m})});jI.displayName=qce;function Xce(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(qo(n,{select:e}),document.activeElement!==r)return}function Zce(t){const e=aK(t),r=Lj(e,t),n=Lj(e.reverse(),t);return[r,n]}function aK(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Lj(t,e){for(const r of t)if(!Jce(r,{upTo:e}))return r}function Jce(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function eue(t){return t instanceof HTMLInputElement&&"select"in t}function qo(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&eue(t)&&e&&t.select()}}var jj=tue();function tue(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Mj(t,e),t.unshift(e)},remove(e){var r;t=Mj(t,e),(r=t[0])==null||r.resume()}}}function Mj(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function rue(t){return t.filter(e=>e.tagName!=="A")}var eS=0;function oK(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Dj()),document.body.insertAdjacentElement("beforeend",t[1]??Dj()),eS++,()=>{eS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),eS--}},[])}function Dj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ra=function(){return ra=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ra.apply(this,arguments)};function lK(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function nue(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var Yx="right-scroll-bar-position",qx="width-before-scroll-bar",iue="with-scroll-bars-hidden",sue="--removed-body-scroll-bar-size";function tS(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function aue(t,e){var r=E.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var oue=typeof window<"u"?E.useLayoutEffect:E.useEffect,Oj=new WeakMap;function lue(t,e){var r=aue(null,function(n){return t.forEach(function(i){return tS(i,n)})});return oue(function(){var n=Oj.get(r);if(n){var i=new Set(n),s=new Set(t),a=r.current;i.forEach(function(o){s.has(o)||tS(o,null)}),s.forEach(function(o){i.has(o)||tS(o,a)})}Oj.set(r,t)},[t]),r}function cue(t){return t}function uue(t,e){e===void 0&&(e=cue);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var a=e(s,n);return r.push(a),function(){r=r.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(n=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(o){return s(o)},filter:function(){return r}}},assignMedium:function(s){n=!0;var a=[];if(r.length){var o=r;r=[],o.forEach(s),a=r}var l=function(){var d=a;a=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return i}function due(t){t===void 0&&(t={});var e=uue(null);return e.options=ra({async:!0,ssr:!1},t),e}var cK=function(t){var e=t.sideCar,r=lK(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,ra({},r))};cK.isSideCarExport=!0;function Aue(t,e){return t.useMedium(e),cK}var uK=due(),rS=function(){},Bw=E.forwardRef(function(t,e){var r=E.useRef(null),n=E.useState({onScrollCapture:rS,onWheelCapture:rS,onTouchMoveCapture:rS}),i=n[0],s=n[1],a=t.forwardProps,o=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,A=t.shards,f=t.sideCar,h=t.noRelative,m=t.noIsolation,p=t.inert,g=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,y=t.gapMode,w=lK(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,S=lue([r,e]),C=ra(ra({},w),i);return E.createElement(E.Fragment,null,d&&E.createElement(b,{sideCar:uK,removeScrollBar:u,shards:A,noRelative:h,noIsolation:m,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:y}),a?E.cloneElement(E.Children.only(o),ra(ra({},C),{ref:S})):E.createElement(v,ra({},C,{className:l,ref:S}),o))});Bw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bw.classNames={fullWidth:qx,zeroRight:Yx};var fue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hue(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=fue();return e&&t.setAttribute("nonce",e),t}function pue(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function mue(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var gue=function(){var t=0,e=null;return{add:function(r){t==0&&(e=hue())&&(pue(e,r),mue(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},xue=function(){var t=gue();return function(e,r){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},dK=function(){var t=xue(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},vue={left:0,top:0,right:0,gap:0},nS=function(t){return parseInt(t||"",10)||0},yue=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[nS(r),nS(n),nS(i)]},bue=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vue;var e=yue(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},wue=dK(),Yd="data-scroll-locked",Eue=function(t,e,r,n){var i=t.left,s=t.top,a=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(iue,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Yd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yx,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(qx,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Yx," .").concat(Yx,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(qx," .").concat(qx,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Yd,`] {
    `).concat(sue,": ").concat(o,`px;
  }
`)},Fj=function(){var t=parseInt(document.body.getAttribute(Yd)||"0",10);return isFinite(t)?t:0},Sue=function(){E.useEffect(function(){return document.body.setAttribute(Yd,(Fj()+1).toString()),function(){var t=Fj()-1;t<=0?document.body.removeAttribute(Yd):document.body.setAttribute(Yd,t.toString())}},[])},Cue=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;Sue();var s=E.useMemo(function(){return bue(i)},[i]);return E.createElement(wue,{styles:Eue(s,!e,i,r?"":"!important")})},fB=!1;if(typeof window<"u")try{var n0=Object.defineProperty({},"passive",{get:function(){return fB=!0,!0}});window.addEventListener("test",n0,n0),window.removeEventListener("test",n0,n0)}catch{fB=!1}var Zu=fB?{passive:!1}:!1,Tue=function(t){return t.tagName==="TEXTAREA"},AK=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Tue(t)&&r[e]==="visible")},Bue=function(t){return AK(t,"overflowY")},_ue=function(t){return AK(t,"overflowX")},Uj=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=fK(t,n);if(i){var s=hK(t,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Nue=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Iue=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},fK=function(t,e){return t==="v"?Bue(e):_ue(e)},hK=function(t,e){return t==="v"?Nue(e):Iue(e)},Pue=function(t,e){return t==="h"&&e==="rtl"?-1:1},Rue=function(t,e,r,n,i){var s=Pue(t,window.getComputedStyle(e).direction),a=s*n,o=r.target,l=e.contains(o),u=!1,d=a>0,A=0,f=0;do{if(!o)break;var h=hK(t,o),m=h[0],p=h[1],g=h[2],x=p-g-s*m;(m||x)&&fK(t,o)&&(A+=x,f+=m);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&(Math.abs(A)<1||!i)||!d&&(Math.abs(f)<1||!i))&&(u=!0),u},i0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$j=function(t){return[t.deltaX,t.deltaY]},Qj=function(t){return t&&"current"in t?t.current:t},kue=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Lue=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jue=0,Ju=[];function Mue(t){var e=E.useRef([]),r=E.useRef([0,0]),n=E.useRef(),i=E.useState(jue++)[0],s=E.useState(dK)[0],a=E.useRef(t);E.useEffect(function(){a.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var p=nue([t.lockRef.current],(t.shards||[]).map(Qj),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=E.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var x=i0(p),v=r.current,y="deltaX"in p?p.deltaX:v[0]-x[0],w="deltaY"in p?p.deltaY:v[1]-x[1],b,S=p.target,C=Math.abs(y)>Math.abs(w)?"h":"v";if("touches"in p&&C==="h"&&S.type==="range")return!1;var T=Uj(C,S);if(!T)return!0;if(T?b=C:(b=C==="v"?"h":"v",T=Uj(C,S)),!T)return!1;if(!n.current&&"changedTouches"in p&&(y||w)&&(n.current=b),!b)return!0;var B=n.current||b;return Rue(B,g,p,B==="h"?y:w,!0)},[]),l=E.useCallback(function(p){var g=p;if(!(!Ju.length||Ju[Ju.length-1]!==s)){var x="deltaY"in g?$j(g):i0(g),v=e.current.filter(function(b){return b.name===g.type&&(b.target===g.target||g.target===b.shadowParent)&&kue(b.delta,x)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var y=(a.current.shards||[]).map(Qj).filter(Boolean).filter(function(b){return b.contains(g.target)}),w=y.length>0?o(g,y[0]):!a.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),u=E.useCallback(function(p,g,x,v){var y={name:p,delta:g,target:x,should:v,shadowParent:Due(x)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(w){return w!==y})},1)},[]),d=E.useCallback(function(p){r.current=i0(p),n.current=void 0},[]),A=E.useCallback(function(p){u(p.type,$j(p),p.target,o(p,t.lockRef.current))},[]),f=E.useCallback(function(p){u(p.type,i0(p),p.target,o(p,t.lockRef.current))},[]);E.useEffect(function(){return Ju.push(s),t.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Zu),document.addEventListener("touchmove",l,Zu),document.addEventListener("touchstart",d,Zu),function(){Ju=Ju.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,Zu),document.removeEventListener("touchmove",l,Zu),document.removeEventListener("touchstart",d,Zu)}},[]);var h=t.removeScrollBar,m=t.inert;return E.createElement(E.Fragment,null,m?E.createElement(s,{styles:Lue(i)}):null,h?E.createElement(Cue,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Due(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Oue=Aue(uK,Mue);var MI=E.forwardRef(function(t,e){return E.createElement(Bw,ra({},t,{ref:e,sideCar:Oue}))});MI.classNames=Bw.classNames;var Fue=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ed=new WeakMap,s0=new WeakMap,a0={},iS=0,pK=function(t){return t&&(t.host||pK(t.parentNode))},Uue=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=pK(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},$ue=function(t,e,r,n){var i=Uue(e,Array.isArray(t)?t:[t]);a0[r]||(a0[r]=new WeakMap);var s=a0[r],a=[],o=new Set,l=new Set(i),u=function(A){!A||o.has(A)||(o.add(A),u(A.parentNode))};i.forEach(u);var d=function(A){!A||l.has(A)||Array.prototype.forEach.call(A.children,function(f){if(o.has(f))d(f);else try{var h=f.getAttribute(n),m=h!==null&&h!=="false",p=(ed.get(f)||0)+1,g=(s.get(f)||0)+1;ed.set(f,p),s.set(f,g),a.push(f),p===1&&m&&s0.set(f,!0),g===1&&f.setAttribute(r,"true"),m||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(e),o.clear(),iS++,function(){a.forEach(function(A){var f=ed.get(A)-1,h=s.get(A)-1;ed.set(A,f),s.set(A,h),f||(s0.has(A)||A.removeAttribute(n),s0.delete(A)),h||A.removeAttribute(r)}),iS--,iS||(ed=new WeakMap,ed=new WeakMap,s0=new WeakMap,a0={})}},mK=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=Fue(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),$ue(n,i,r,"aria-hidden")):function(){return null}},_w="Dialog",[gK,RZe]=Cn(_w),[Que,Ps]=gK(_w),xK=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,o=E.useRef(null),l=E.useRef(null),[u,d]=zi({prop:n,defaultProp:i??!1,onChange:s,caller:_w});return c.jsx(Que,{scope:e,triggerRef:o,contentRef:l,contentId:da(),titleId:da(),descriptionId:da(),open:u,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(A=>!A),[d]),modal:a,children:r})};xK.displayName=_w;var vK="DialogTrigger",yK=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Ps(vK,r),s=qe(e,i.triggerRef);return c.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":FI(i.open),...n,ref:s,onClick:Ie(t.onClick,i.onOpenToggle)})});yK.displayName=vK;var DI="DialogPortal",[Hue,bK]=gK(DI,{forceMount:void 0}),wK=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,s=Ps(DI,e);return c.jsx(Hue,{scope:e,forceMount:r,children:E.Children.map(n,a=>c.jsx(Jn,{present:r||s.open,children:c.jsx(aw,{asChild:!0,container:i,children:a})}))})};wK.displayName=DI;var Zv="DialogOverlay",EK=E.forwardRef((t,e)=>{const r=bK(Zv,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=Ps(Zv,t.__scopeDialog);return s.modal?c.jsx(Jn,{present:n||s.open,children:c.jsx(Vue,{...i,ref:e})}):null});EK.displayName=Zv;var Kue=IA("DialogOverlay.RemoveScroll"),Vue=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Ps(Zv,r);return c.jsx(MI,{as:Kue,allowPinchZoom:!0,shards:[i.contentRef],children:c.jsx(De.div,{"data-state":FI(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Tu="DialogContent",SK=E.forwardRef((t,e)=>{const r=bK(Tu,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=Ps(Tu,t.__scopeDialog);return c.jsx(Jn,{present:n||s.open,children:s.modal?c.jsx(Gue,{...i,ref:e}):c.jsx(zue,{...i,ref:e})})});SK.displayName=Tu;var Gue=E.forwardRef((t,e)=>{const r=Ps(Tu,t.__scopeDialog),n=E.useRef(null),i=qe(e,r.contentRef,n);return E.useEffect(()=>{const s=n.current;if(s)return mK(s)},[]),c.jsx(CK,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,s=>s.preventDefault())})}),zue=E.forwardRef((t,e)=>{const r=Ps(Tu,t.__scopeDialog),n=E.useRef(!1),i=E.useRef(!1);return c.jsx(CK,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,s),s.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),CK=E.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,o=Ps(Tu,r),l=E.useRef(null),u=qe(e,l);return oK(),c.jsxs(c.Fragment,{children:[c.jsx(jI,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:c.jsx(ag,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":FI(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Wue,{titleId:o.titleId}),c.jsx(que,{contentRef:l,descriptionId:o.descriptionId})]})]})}),OI="DialogTitle",TK=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Ps(OI,r);return c.jsx(De.h2,{id:i.titleId,...n,ref:e})});TK.displayName=OI;var BK="DialogDescription",_K=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Ps(BK,r);return c.jsx(De.p,{id:i.descriptionId,...n,ref:e})});_K.displayName=BK;var NK="DialogClose",IK=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Ps(NK,r);return c.jsx(De.button,{type:"button",...n,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});IK.displayName=NK;function FI(t){return t?"open":"closed"}var PK="DialogTitleWarning",[kZe,RK]=Zte(PK,{contentName:Tu,titleName:OI,docsSlug:"dialog"}),Wue=({titleId:t})=>{const e=RK(PK),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Yue="DialogDescriptionWarning",que=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RK(Yue).contentName}}.`;return E.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},kK=xK,Xue=yK,LK=wK,Nw=EK,Iw=SK,Pw=TK,Rw=_K,jK=IK;const Zue=kK,Jue=LK,MK=E.forwardRef(({className:t,...e},r)=>c.jsx(Nw,{className:Z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));MK.displayName=Nw.displayName;const ede=$u("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),DK=E.forwardRef(({side:t="right",className:e,children:r,...n},i)=>c.jsxs(Jue,{children:[c.jsx(MK,{}),c.jsxs(Iw,{ref:i,className:Z(ede({side:t}),e),...n,children:[r,c.jsxs(jK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[c.jsx(At,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DK.displayName=Iw.displayName;const tde=E.forwardRef(({className:t,...e},r)=>c.jsx(Pw,{ref:r,className:Z("text-lg font-semibold text-foreground",t),...e}));tde.displayName=Pw.displayName;const rde=E.forwardRef(({className:t,...e},r)=>c.jsx(Rw,{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));rde.displayName=Rw.displayName;function Hj({className:t,...e}){return c.jsx("div",{className:Z("animate-pulse rounded-md bg-muted",t),...e})}const nde="sidebar:state",ide=60*60*24*7,sde="16rem",ade="18rem",ode="3rem",lde="b",OK=E.createContext(null);function kw(){const t=E.useContext(OK);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const FK=E.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:r,className:n,style:i,children:s,...a},o)=>{const l=Vce(),[u,d]=E.useState(!1),[A,f]=E.useState(t),h=e??A,m=E.useCallback(v=>{const y=typeof v=="function"?v(h):v;r?r(y):f(y),document.cookie=`${nde}=${y}; path=/; max-age=${ide}`},[r,h]),p=E.useCallback(()=>l?d(v=>!v):m(v=>!v),[l,m,d]);E.useEffect(()=>{const v=y=>{y.key===lde&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),p())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[p]);const g=h?"expanded":"collapsed",x=E.useMemo(()=>({state:g,open:h,setOpen:m,isMobile:l,openMobile:u,setOpenMobile:d,toggleSidebar:p}),[g,h,m,l,u,d,p]);return c.jsx(OK.Provider,{value:x,children:c.jsx(d6,{delayDuration:0,children:c.jsx("div",{style:{"--sidebar-width":sde,"--sidebar-width-icon":ode,...i},className:Z("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:o,...a,children:s})})})});FK.displayName="SidebarProvider";const UK=E.forwardRef(({side:t="left",variant:e="sidebar",collapsible:r="offcanvas",className:n,children:i,...s},a)=>{const{isMobile:o,state:l,openMobile:u,setOpenMobile:d}=kw();return r==="none"?c.jsx("div",{className:Z("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:a,...s,children:i}):o?c.jsx(Zue,{open:u,onOpenChange:d,...s,children:c.jsx(DK,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":ade},side:t,children:c.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):c.jsxs("div",{ref:a,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":l==="collapsed"?r:"","data-variant":e,"data-side":t,children:[c.jsx("div",{className:Z("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),c.jsx("div",{className:Z("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...s,children:c.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});UK.displayName="Sidebar";const $K=E.forwardRef(({className:t,onClick:e,...r},n)=>{const{toggleSidebar:i}=kw();return c.jsxs(te,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Z("h-7 w-7",t),onClick:s=>{e==null||e(s),i()},...r,children:[c.jsx(_ne,{}),c.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});$K.displayName="SidebarTrigger";const QK=E.forwardRef(({className:t,...e},r)=>{const{toggleSidebar:n}=kw();return c.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:Z("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});QK.displayName="SidebarRail";const HK=E.forwardRef(({className:t,...e},r)=>c.jsx("main",{ref:r,className:Z("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));HK.displayName="SidebarInset";const cde=E.forwardRef(({className:t,...e},r)=>c.jsx(jr,{ref:r,"data-sidebar":"input",className:Z("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));cde.displayName="SidebarInput";const KK=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,"data-sidebar":"header",className:Z("flex flex-col gap-2 p-2",t),...e}));KK.displayName="SidebarHeader";const VK=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,"data-sidebar":"footer",className:Z("flex flex-col gap-2 p-2",t),...e}));VK.displayName="SidebarFooter";const ude=E.forwardRef(({className:t,...e},r)=>c.jsx(sK,{ref:r,"data-sidebar":"separator",className:Z("mx-2 w-auto bg-sidebar-border",t),...e}));ude.displayName="SidebarSeparator";const GK=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,"data-sidebar":"content",className:Z("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));GK.displayName="SidebarContent";const zK=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,"data-sidebar":"group",className:Z("relative flex w-full min-w-0 flex-col p-2",t),...e}));zK.displayName="SidebarGroup";const WK=E.forwardRef(({className:t,asChild:e=!1,...r},n)=>{const i=e?xf:"div";return c.jsx(i,{ref:n,"data-sidebar":"group-label",className:Z("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...r})});WK.displayName="SidebarGroupLabel";const dde=E.forwardRef(({className:t,asChild:e=!1,...r},n)=>{const i=e?xf:"button";return c.jsx(i,{ref:n,"data-sidebar":"group-action",className:Z("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...r})});dde.displayName="SidebarGroupAction";const YK=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,"data-sidebar":"group-content",className:Z("w-full text-sm",t),...e}));YK.displayName="SidebarGroupContent";const hB=E.forwardRef(({className:t,...e},r)=>c.jsx("ul",{ref:r,"data-sidebar":"menu",className:Z("flex w-full min-w-0 flex-col gap-1",t),...e}));hB.displayName="SidebarMenu";const pB=E.forwardRef(({className:t,...e},r)=>c.jsx("li",{ref:r,"data-sidebar":"menu-item",className:Z("group/menu-item relative",t),...e}));pB.displayName="SidebarMenuItem";const Ade=$u("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),mB=E.forwardRef(({asChild:t=!1,isActive:e=!1,variant:r="default",size:n="default",tooltip:i,className:s,...a},o)=>{const l=t?xf:"button",{isMobile:u,state:d}=kw(),A=c.jsx(l,{ref:o,"data-sidebar":"menu-button","data-size":n,"data-active":e,className:Z(Ade({variant:r,size:n}),s),...a});return i?(typeof i=="string"&&(i={children:i}),c.jsxs(Yae,{children:[c.jsx(qae,{asChild:!0,children:A}),c.jsx(A6,{side:"right",align:"center",hidden:d!=="collapsed"||u,...i})]})):A});mB.displayName="SidebarMenuButton";const fde=E.forwardRef(({className:t,asChild:e=!1,showOnHover:r=!1,...n},i)=>{const s=e?xf:"button";return c.jsx(s,{ref:i,"data-sidebar":"menu-action",className:Z("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...n})});fde.displayName="SidebarMenuAction";const hde=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:Z("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));hde.displayName="SidebarMenuBadge";const pde=E.forwardRef(({className:t,showIcon:e=!1,...r},n)=>{const i=E.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return c.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:Z("flex h-8 items-center gap-2 rounded-md px-2",t),...r,children:[e&&c.jsx(Hj,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),c.jsx(Hj,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});pde.displayName="SidebarMenuSkeleton";const mde=E.forwardRef(({className:t,...e},r)=>c.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:Z("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));mde.displayName="SidebarMenuSub";const gde=E.forwardRef(({...t},e)=>c.jsx("li",{ref:e,...t}));gde.displayName="SidebarMenuSubItem";const xde=E.forwardRef(({asChild:t=!1,size:e="md",isActive:r,className:n,...i},s)=>{const a=t?xf:"a";return c.jsx(a,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":r,className:Z("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...i})});xde.displayName="SidebarMenuSubButton";/*! shepherd.js 15.0.0 */function qd(t){return t instanceof HTMLElement}function Ul(t){return typeof t=="function"}function Jv(t){return typeof t=="string"}function di(t){return t===void 0}let UI=class{on(e,r,n,i=!1){var s;return di(this.bindings)&&(this.bindings={}),di(this.bindings[e])&&(this.bindings[e]=[]),(s=this.bindings[e])==null||s.push({handler:r,ctx:n,once:i}),this}once(e,r,n){return this.on(e,r,n,!0)}off(e,r){if(di(this.bindings)||di(this.bindings[e]))return this;var n;return di(r)?delete this.bindings[e]:(n=this.bindings[e])==null||n.forEach((i,s)=>{var a;i.handler===r&&((a=this.bindings[e])==null||a.splice(s,1))}),this}trigger(e,...r){var n;return!di(this.bindings)&&this.bindings[e]&&((n=this.bindings[e])==null||n.forEach((i,s)=>{const{ctx:a,handler:o,once:l}=i,u=a||this;var d;o.apply(u,r),l&&((d=this.bindings[e])==null||d.splice(s,1))})),this}};function Pn(){return Pn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pn.apply(null,arguments)}function $I(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}const Uc={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};function vde(t,e){return e}function yde(t,e){return t.filter(r=>r!==void 0)}var Kj;function Vj(t){return typeof t!="object"||t===null?0:Array.isArray(t)?2:function(e){if(!zj.includes(Object.prototype.toString.call(e)))return!1;const{constructor:r}=e;if(r===void 0)return!0;const n=r.prototype;return!(n===null||typeof n!="object"||!zj.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}(t)?1:t instanceof Set?3:t instanceof Map?4:5}function bde(t,e){return typeof t=="object"&&Object.prototype.propertyIsEnumerable.call(t,e)}function Gj(t){var e;let r=0,n=(e=t[0])==null?void 0:e[Symbol.iterator]();return{[Symbol.iterator]:()=>({next(){for(;;){if(n===void 0)return{done:!0,value:void 0};const s=n.next();if(s.done!==!0)return{done:!1,value:s.value};var i;r+=1,n=(i=t[r])==null?void 0:i[Symbol.iterator]()}}})}}(function(t){t[t.NOT=0]="NOT",t[t.RECORD=1]="RECORD",t[t.ARRAY=2]="ARRAY",t[t.SET=3]="SET",t[t.MAP=4]="MAP",t[t.OTHER=5]="OTHER"})(Kj||(Kj={}));const zj=["[object Object]","[object Module]"],o0={mergeRecords:function(t,e,r){const n={};for(const i of function(s){const a=new Set;for(const o of s)for(const l of[...Object.keys(o),...Object.getOwnPropertySymbols(o)])a.add(l);return a}(t)){const s=[];for(const l of t)bde(l,i)&&s.push(l[i]);if(s.length===0)continue;const a=e.metaDataUpdater(r,{key:i,parents:t}),o=qK(s,e,a);o!==Uc.skip&&(i==="__proto__"?Object.defineProperty(n,i,{value:o,configurable:!0,enumerable:!0,writable:!0}):n[i]=o)}return n},mergeArrays:function(t){return t.flat()},mergeSets:function(t){return new Set(Gj(t))},mergeMaps:function(t){return new Map(Gj(t))},mergeOthers:function(t){return t.at(-1)}};function gB(...t){return function(e,r){const n=function(s,a){var o,l,u;return{defaultMergeFunctions:o0,mergeFunctions:Pn({},o0,Object.fromEntries(Object.entries(s).filter(([d,A])=>Object.hasOwn(o0,d)).map(([d,A])=>A===!1?[d,o0.mergeOthers]:[d,A]))),metaDataUpdater:(o=s.metaDataUpdater)!=null?o:vde,deepmerge:a,useImplicitDefaultMerging:(l=s.enableImplicitDefaultMerging)!=null&&l,filterValues:s.filterValues===!1?void 0:(u=s.filterValues)!=null?u:yde,actions:Uc}}(e,i);function i(...s){return qK(s,n,r)}return i}({})(...t)}function qK(t,e,r){var n;const i=(n=e.filterValues==null?void 0:e.filterValues(t,r))!=null?n:t;if(i.length===0)return;if(i.length===1)return sS(i,e,r);const s=Vj(i[0]);if(s!==0&&s!==5){for(let a=1;a<i.length;a++)if(Vj(i[a])!==s)return sS(i,e,r)}switch(s){case 1:return function(a,o,l){const u=o.mergeFunctions.mergeRecords(a,o,l);return u===Uc.defaultMerge||o.useImplicitDefaultMerging&&u===void 0&&o.mergeFunctions.mergeRecords!==o.defaultMergeFunctions.mergeRecords?o.defaultMergeFunctions.mergeRecords(a,o,l):u}(i,e,r);case 2:return function(a,o,l){const u=o.mergeFunctions.mergeArrays(a,o,l);return u===Uc.defaultMerge||o.useImplicitDefaultMerging&&u===void 0&&o.mergeFunctions.mergeArrays!==o.defaultMergeFunctions.mergeArrays?o.defaultMergeFunctions.mergeArrays(a):u}(i,e,r);case 3:return function(a,o,l){const u=o.mergeFunctions.mergeSets(a,o,l);return u===Uc.defaultMerge||o.useImplicitDefaultMerging&&u===void 0&&o.mergeFunctions.mergeSets!==o.defaultMergeFunctions.mergeSets?o.defaultMergeFunctions.mergeSets(a):u}(i,e,r);case 4:return function(a,o,l){const u=o.mergeFunctions.mergeMaps(a,o,l);return u===Uc.defaultMerge||o.useImplicitDefaultMerging&&u===void 0&&o.mergeFunctions.mergeMaps!==o.defaultMergeFunctions.mergeMaps?o.defaultMergeFunctions.mergeMaps(a):u}(i,e,r);default:return sS(i,e,r)}}function sS(t,e,r){const n=e.mergeFunctions.mergeOthers(t,e,r);return n===Uc.defaultMerge||e.useImplicitDefaultMerging&&n===void 0&&e.mergeFunctions.mergeOthers!==e.defaultMergeFunctions.mergeOthers?e.defaultMergeFunctions.mergeOthers(t):n}function QI(t){const e=Object.getOwnPropertyNames(t.constructor.prototype);for(let r=0;r<e.length;r++){const n=e[r],i=t[n];n!=="constructor"&&typeof i=="function"&&(t[n]=i.bind(t))}return t}function wde(t){const{event:e,selector:r}=t.options.advanceOn||{};if(e){const n=function(s,a){return o=>{if(s.isOpen()){const l=s.el&&o.currentTarget===s.el;(!di(a)&&o.currentTarget.matches(a)||l)&&s.tour.next()}}}(t,r);let i=null;if(!di(r)&&(i=document.querySelector(r),!i))return;i?(i.addEventListener(e,n),t.on("destroy",()=>i.removeEventListener(e,n))):(document.body.addEventListener(e,n,!0),t.on("destroy",()=>document.body.removeEventListener(e,n,!0)))}}function XK(t){return Jv(t)&&t!==""?t.charAt(t.length-1)!=="-"?`${t}-`:t:""}function Wj(t){return t==null||!t.element||!t.on}function ZK(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(e=="x"?r:3&r|8).toString(16)})}const Yj=["start","end"],qj=["top","right","bottom","left"].reduce((t,e)=>t.concat(e,e+"-"+Yj[0],e+"-"+Yj[1]),[]),jA=Math.min,au=Math.max,ey=Math.round,l0=Math.floor,ha=t=>({x:t,y:t}),Ede={left:"right",right:"left",bottom:"top",top:"bottom"},Sde={start:"end",end:"start"};function xB(t,e,r){return au(t,jA(e,r))}function Bu(t,e){return typeof t=="function"?t(e):t}function yo(t){return t.split("-")[0]}function Xa(t){return t.split("-")[1]}function HI(t){return t==="x"?"y":"x"}function KI(t){return t==="y"?"height":"width"}const Cde=new Set(["top","bottom"]);function vl(t){return Cde.has(yo(t))?"y":"x"}function VI(t){return HI(vl(t))}function JK(t,e,r){r===void 0&&(r=!1);const n=Xa(t),i=VI(t),s=KI(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=ry(a)),[a,ry(a)]}function ty(t){return t.replace(/start|end/g,e=>Sde[e])}const Xj=["left","right"],Zj=["right","left"],Tde=["top","bottom"],Bde=["bottom","top"];function _de(t,e,r,n){const i=Xa(t);let s=function(a,o,l){switch(a){case"top":case"bottom":return l?o?Zj:Xj:o?Xj:Zj;case"left":case"right":return o?Tde:Bde;default:return[]}}(yo(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(ty)))),s}function ry(t){return t.replace(/left|right|bottom|top/g,e=>Ede[e])}function eV(t){return typeof t!="number"?function(e){return Pn({top:0,right:0,bottom:0,left:0},e)}(t):{top:t,right:t,bottom:t,left:t}}function ny(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}const Nde=["crossAxis","alignment","allowedPlacements","autoAlignment"],Ide=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Pde=["mainAxis","crossAxis","limiter"];function Jj(t,e,r){let{reference:n,floating:i}=t;const s=vl(e),a=VI(e),o=KI(a),l=yo(e),u=s==="y",d=n.x+n.width/2-i.width/2,A=n.y+n.height/2-i.height/2,f=n[o]/2-i[o]/2;let h;switch(l){case"top":h={x:d,y:n.y-i.height};break;case"bottom":h={x:d,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:A};break;case"left":h={x:n.x-i.width,y:A};break;default:h={x:n.x,y:n.y}}switch(Xa(e)){case"start":h[a]-=f*(r&&u?-1:1);break;case"end":h[a]+=f*(r&&u?-1:1)}return h}async function Rde(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:A="floating",altBoundary:f=!1,padding:h=0}=Bu(e,t),m=eV(h),p=o[f?A==="floating"?"reference":"floating":A],g=ny(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(p)))==null||r?p:p.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),x=A==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),y=await(s.isElement==null?void 0:s.isElement(v))&&await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1},w=ny(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-w.top+m.top)/y.y,bottom:(w.bottom-g.bottom+m.bottom)/y.y,left:(g.left-w.left+m.left)/y.x,right:(w.right-g.right+m.right)/y.x}}const kde=new Set(["left","top"]);function Lw(){return typeof window<"u"}function MA(t){return tV(t)?(t.nodeName||"").toLowerCase():"#document"}function mi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pa(t){var e;return(e=(tV(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tV(t){return!!Lw()&&(t instanceof Node||t instanceof mi(t).Node)}function Es(t){return!!Lw()&&(t instanceof Element||t instanceof mi(t).Element)}function ba(t){return!!Lw()&&(t instanceof HTMLElement||t instanceof mi(t).HTMLElement)}function eM(t){return!(!Lw()||typeof ShadowRoot>"u")&&(t instanceof ShadowRoot||t instanceof mi(t).ShadowRoot)}const Lde=new Set(["inline","contents"]);function Yp(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Lde.has(i)}const jde=new Set(["table","td","th"]);function Mde(t){return jde.has(MA(t))}const Dde=[":popover-open",":modal"];function iy(t){return Dde.some(e=>{try{return t.matches(e)}catch{return!1}})}const Ode=["transform","translate","scale","rotate","perspective"],Fde=["transform","translate","scale","rotate","perspective","filter"],Ude=["paint","layout","strict","content"];function vB(t){const e=GI(),r=Es(t)?Ss(t):t;return Ode.some(n=>!!r[n]&&r[n]!=="none")||!!r.containerType&&r.containerType!=="normal"||!e&&!!r.backdropFilter&&r.backdropFilter!=="none"||!e&&!!r.filter&&r.filter!=="none"||Fde.some(n=>(r.willChange||"").includes(n))||Ude.some(n=>(r.contain||"").includes(n))}function GI(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const $de=new Set(["html","body","#document"]);function Xd(t){return $de.has(MA(t))}function Ss(t){return mi(t).getComputedStyle(t)}function jw(t){return Es(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yl(t){if(MA(t)==="html")return t;const e=t.assignedSlot||t.parentNode||eM(t)&&t.host||pa(t);return eM(e)?e.host:e}function rV(t){const e=yl(t);return Xd(e)?t.ownerDocument?t.ownerDocument.body:t.body:ba(e)&&Yp(e)?e:rV(e)}function qp(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=rV(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=mi(i);if(s){const o=yB(a);return e.concat(a,a.visualViewport||[],Yp(i)?i:[],o&&r?qp(o):[])}return e.concat(i,qp(i,[],r))}function yB(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function nV(t){const e=Ss(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=ba(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,o=ey(r)!==s||ey(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function zI(t){return Es(t)?t:t.contextElement}function Zd(t){const e=zI(t);if(!ba(e))return ha(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=nV(e);let a=(s?ey(r.width):r.width)/n,o=(s?ey(r.height):r.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const Qde=ha(0);function iV(t){const e=mi(t);return GI()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Qde}function _u(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=zI(t);let a=ha(1);e&&(n?Es(n)&&(a=Zd(n)):a=Zd(t));const o=function(f,h,m){return h===void 0&&(h=!1),!(!m||h&&m!==mi(f))&&h}(s,r,n)?iV(s):ha(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,d=i.width/a.x,A=i.height/a.y;if(s){const f=mi(s),h=n&&Es(n)?mi(n):n;let m=f,p=yB(m);for(;p&&n&&h!==m;){const g=Zd(p),x=p.getBoundingClientRect(),v=Ss(p),y=x.left+(p.clientLeft+parseFloat(v.paddingLeft))*g.x,w=x.top+(p.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,d*=g.x,A*=g.y,l+=y,u+=w,m=mi(p),p=yB(m)}}return ny({width:d,height:A,x:l,y:u})}function sy(t,e){const r=jw(t).scrollLeft;return e?e.left+r:_u(pa(t)).left+r}function sV(t,e){const r=t.getBoundingClientRect();return{x:r.left+e.scrollLeft-sy(t,r),y:r.top+e.scrollTop}}const Hde=new Set(["absolute","fixed"]);function tM(t,e,r){let n;if(e==="viewport")n=function(i,s){const a=mi(i),o=pa(i),l=a.visualViewport;let u=o.clientWidth,d=o.clientHeight,A=0,f=0;if(l){u=l.width,d=l.height;const m=GI();(!m||m&&s==="fixed")&&(A=l.offsetLeft,f=l.offsetTop)}const h=sy(o);if(h<=0){const m=o.ownerDocument,p=m.body,g=getComputedStyle(p),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,v=Math.abs(o.clientWidth-p.clientWidth-x);v<=25&&(u-=v)}else h<=25&&(u+=h);return{width:u,height:d,x:A,y:f}}(t,r);else if(e==="document")n=function(i){const s=pa(i),a=jw(i),o=i.ownerDocument.body,l=au(s.scrollWidth,s.clientWidth,o.scrollWidth,o.clientWidth),u=au(s.scrollHeight,s.clientHeight,o.scrollHeight,o.clientHeight);let d=-a.scrollLeft+sy(i);const A=-a.scrollTop;return Ss(o).direction==="rtl"&&(d+=au(s.clientWidth,o.clientWidth)-l),{width:l,height:u,x:d,y:A}}(pa(t));else if(Es(e))n=function(i,s){const a=_u(i,!0,s==="fixed"),o=a.top+i.clientTop,l=a.left+i.clientLeft,u=ba(i)?Zd(i):ha(1);return{width:i.clientWidth*u.x,height:i.clientHeight*u.y,x:l*u.x,y:o*u.y}}(e,r);else{const i=iV(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ny(n)}function aV(t,e){const r=yl(t);return!(r===e||!Es(r)||Xd(r))&&(Ss(r).position==="fixed"||aV(r,e))}function Kde(t,e,r){const n=ba(e),i=pa(e),s=r==="fixed",a=_u(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=ha(0);function u(){l.x=sy(i)}if(n||!n&&!s)if((MA(e)!=="body"||Yp(i))&&(o=jw(e)),n){const A=_u(e,!0,s,e);l.x=A.x+e.clientLeft,l.y=A.y+e.clientTop}else i&&u();s&&!n&&i&&u();const d=!i||n||s?ha(0):sV(i,o);return{x:a.left+o.scrollLeft-l.x-d.x,y:a.top+o.scrollTop-l.y-d.y,width:a.width,height:a.height}}function aS(t){return Ss(t).position==="static"}function rM(t,e){if(!ba(t)||Ss(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return pa(t)===r&&(r=r.ownerDocument.body),r}function nM(t,e){const r=mi(t);if(iy(t))return r;if(!ba(t)){let i=yl(t);for(;i&&!Xd(i);){if(Es(i)&&!aS(i))return i;i=yl(i)}return r}let n=rM(t,e);for(;n&&Mde(n)&&aS(n);)n=rM(n,e);return n&&Xd(n)&&aS(n)&&!vB(n)?r:n||function(i){let s=yl(i);for(;ba(s)&&!Xd(s);){if(vB(s))return s;if(iy(s))return null;s=yl(s)}return null}(t)||r}const Vde={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=pa(n),o=!!e&&iy(e.floating);if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},u=ha(1);const d=ha(0),A=ba(n);if((A||!A&&!s)&&((MA(n)!=="body"||Yp(a))&&(l=jw(n)),ba(n))){const h=_u(n);u=Zd(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}const f=!a||A||s?ha(0):sV(a,l);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-l.scrollTop*u.y+d.y+f.y}},getDocumentElement:pa,getClippingRect:function(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const s=[...r==="clippingAncestors"?iy(e)?[]:function(l,u){const d=u.get(l);if(d)return d;let A=qp(l,[],!1).filter(p=>Es(p)&&MA(p)!=="body"),f=null;const h=Ss(l).position==="fixed";let m=h?yl(l):l;for(;Es(m)&&!Xd(m);){const p=Ss(m),g=vB(m);g||p.position!=="fixed"||(f=null),(h?!g&&!f:!g&&p.position==="static"&&f&&Hde.has(f.position)||Yp(m)&&!g&&aV(l,m))?A=A.filter(x=>x!==m):f=p,m=yl(m)}return u.set(l,A),A}(e,this._c):[].concat(r),n],a=s[0],o=s.reduce((l,u)=>{const d=tM(e,u,i);return l.top=au(d.top,l.top),l.right=jA(d.right,l.right),l.bottom=jA(d.bottom,l.bottom),l.left=au(d.left,l.left),l},tM(e,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:nM,getElementRects:async function(t){const e=this.getOffsetParent||nM,r=this.getDimensions,n=await r(t.floating);return{reference:Kde(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:r}=nV(t);return{width:e,height:r}},getScale:Zd,isElement:Es,isRTL:function(t){return Ss(t).direction==="rtl"}};function iM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Gde(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=zI(t),d=i||s?[...u?qp(u):[],...qp(e)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",r,{passive:!0}),s&&g.addEventListener("resize",r)});const A=u&&o?function(g,x){let v,y=null;const w=pa(g);function b(){var S;clearTimeout(v),(S=y)==null||S.disconnect(),y=null}return function S(C,T){C===void 0&&(C=!1),T===void 0&&(T=1),b();const B=g.getBoundingClientRect(),{left:_,top:I,width:L,height:N}=B;if(C||x(),!L||!N)return;const R={rootMargin:-l0(I)+"px "+-l0(w.clientWidth-(_+L))+"px "+-l0(w.clientHeight-(I+N))+"px "+-l0(_)+"px",threshold:au(0,jA(1,T))||1};let M=!0;function k(O){const j=O[0].intersectionRatio;if(j!==T){if(!M)return S();j?S(!1,j):v=setTimeout(()=>{S(!1,1e-7)},1e3)}j!==1||iM(B,g.getBoundingClientRect())||S(),M=!1}try{y=new IntersectionObserver(k,Pn({},R,{root:w.ownerDocument}))}catch{y=new IntersectionObserver(k,R)}y.observe(g)}(!0),b}(u,r):null;let f,h=-1,m=null;a&&(m=new ResizeObserver(g=>{let[x]=g;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(e)})),r()}),u&&!l&&m.observe(u),m.observe(e));let p=l?_u(t):null;return l&&function g(){const x=_u(t);p&&!iM(p,x)&&r(),p=x,f=requestAnimationFrame(g)}(),r(),()=>{var g;d.forEach(x=>{i&&x.removeEventListener("scroll",r),s&&x.removeEventListener("resize",r)}),A==null||A(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(f)}}const zde=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var r,n,i;const{rects:s,middlewareData:a,placement:o,platform:l,elements:u}=e,d=Bu(t,e),{crossAxis:A=!1,alignment:f,allowedPlacements:h=qj,autoAlignment:m=!0}=d,p=$I(d,Nde),g=f!==void 0||h===qj?function(_,I,L){return(_?[...L.filter(N=>Xa(N)===_),...L.filter(N=>Xa(N)!==_)]:L.filter(N=>yo(N)===N)).filter(N=>!_||Xa(N)===_||!!I&&ty(N)!==N)}(f||null,m,h):h,x=await l.detectOverflow(e,p),v=((r=a.autoPlacement)==null?void 0:r.index)||0,y=g[v];if(y==null)return{};const w=JK(y,s,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(o!==y)return{reset:{placement:g[0]}};const b=[x[yo(y)],x[w[0]],x[w[1]]],S=[...((n=a.autoPlacement)==null?void 0:n.overflows)||[],{placement:y,overflows:b}],C=g[v+1];if(C)return{data:{index:v+1,overflows:S},reset:{placement:C}};const T=S.map(_=>{const I=Xa(_.placement);return[_.placement,I&&A?_.overflows.slice(0,2).reduce((L,N)=>L+N,0):_.overflows[0],_.overflows]}).sort((_,I)=>_[1]-I[1]),B=((i=T.filter(_=>_[2].slice(0,Xa(_[0])?2:3).every(I=>I<=0))[0])==null?void 0:i[0])||T[0][0];return B!==o?{data:{index:v+1,overflows:S},reset:{placement:B}}:{}}}},Wde=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i,platform:s}=e,a=Bu(t,e),{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}}}=a,d=$I(a,Pde),A={x:r,y:n},f=await s.detectOverflow(e,d),h=vl(yo(i)),m=HI(h);let p=A[m],g=A[h];if(o){const v=m==="y"?"bottom":"right";p=xB(p+f[m==="y"?"top":"left"],p,p-f[v])}if(l){const v=h==="y"?"bottom":"right";g=xB(g+f[h==="y"?"top":"left"],g,g-f[v])}const x=u.fn(Pn({},e,{[m]:p,[h]:g}));return Pn({},x,{data:{x:x.x-r,y:x.y-n,enabled:{[m]:o,[h]:l}}})}}},Yde=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:u}=e,d=Bu(t,e),{mainAxis:A=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0}=d,x=$I(d,Ide);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const v=yo(i),y=vl(o),w=yo(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=h||(w||!g?[ry(o)]:function(M){const k=ry(M);return[ty(M),k,ty(k)]}(o)),C=p!=="none";!h&&C&&S.push(..._de(o,g,p,b));const T=[o,...S],B=await l.detectOverflow(e,x),_=[];let I=((n=s.flip)==null?void 0:n.overflows)||[];if(A&&_.push(B[v]),f){const M=JK(i,a,b);_.push(B[M[0]],B[M[1]])}if(I=[...I,{placement:i,overflows:_}],!_.every(M=>M<=0)){var L,N;const M=(((L=s.flip)==null?void 0:L.index)||0)+1,k=T[M];if(k&&(!(f==="alignment"&&y!==vl(k))||I.every(j=>vl(j.placement)!==y||j.overflows[0]>0)))return{data:{index:M,overflows:I},reset:{placement:k}};let O=(N=I.filter(j=>j.overflows[0]<=0).sort((j,D)=>j.overflows[1]-D.overflows[1])[0])==null?void 0:N.placement;if(!O)switch(m){case"bestFit":{var R;const j=(R=I.filter(D=>{if(C){const F=vl(D.placement);return F===y||F==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(F=>F>0).reduce((F,$)=>F+$,0)]).sort((D,F)=>D[1]-F[1])[0])==null?void 0:R[0];j&&(O=j);break}case"initialPlacement":O=o}if(i!==O)return{reset:{placement:O}}}return{}}}},qde=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:d=0}=Bu(t,e)||{};if(u==null)return{};const A=eV(d),f={x:r,y:n},h=VI(i),m=KI(h),p=await a.getDimensions(u),g=h==="y",x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-f[h]-s.floating[m],b=f[h]-s.reference[h],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let C=S?S[y]:0;C&&await(a.isElement==null?void 0:a.isElement(S))||(C=o.floating[y]||s.floating[m]);const T=w/2-b/2,B=C/2-p[m]/2-1,_=jA(A[x],B),I=jA(A[v],B),L=_,N=C-p[m]-I,R=C/2-p[m]/2+T,M=xB(L,R,N),k=!l.arrow&&Xa(i)!=null&&R!==M&&s.reference[m]/2-(R<L?_:I)-p[m]/2<0,O=k?R<L?R-L:R-N:0;return{[h]:f[h]+O,data:Pn({[h]:M,centerOffset:R-M-O},k&&{alignmentOffset:O}),reset:k}}}),Xde=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Bu(t,e),d={x:r,y:n},A=vl(i),f=HI(A);let h=d[f],m=d[A];const p=Bu(o,e),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:Pn({mainAxis:0,crossAxis:0},p);if(l){const y=f==="y"?"height":"width",w=s.reference[f]-s.floating[y]+g.mainAxis,b=s.reference[f]+s.reference[y]-g.mainAxis;h<w?h=w:h>b&&(h=b)}if(u){var x,v;const y=f==="y"?"width":"height",w=kde.has(yo(i)),b=s.reference[A]-s.floating[y]+(w&&((x=a.offset)==null?void 0:x[A])||0)+(w?0:g.crossAxis),S=s.reference[A]+s.reference[y]+(w?0:((v=a.offset)==null?void 0:v[A])||0)-(w?g.crossAxis:0);m<b?m=b:m>S&&(m=S)}return{[f]:h,[A]:m}}}},Zde=(t,e,r)=>{const n=new Map,i=Pn({platform:Vde},r),s=Pn({},i.platform,{_c:n});return(async(a,o,l)=>{const{placement:u="bottom",strategy:d="absolute",middleware:A=[],platform:f}=l,h=A.filter(Boolean),m=await(f.isRTL==null?void 0:f.isRTL(o));let p=await f.getElementRects({reference:a,floating:o,strategy:d}),{x:g,y:x}=Jj(p,u,m),v=u,y={},w=0;for(let S=0;S<h.length;S++){var b;const{name:C,fn:T}=h[S],{x:B,y:_,data:I,reset:L}=await T({x:g,y:x,initialPlacement:u,placement:v,strategy:d,middlewareData:y,rects:p,platform:Pn({},f,{detectOverflow:(b=f.detectOverflow)!=null?b:Rde}),elements:{reference:a,floating:o}});g=B??g,x=_??x,y=Pn({},y,{[C]:Pn({},y[C],I)}),L&&w<=50&&(w++,typeof L=="object"&&(L.placement&&(v=L.placement),L.rects&&(p=L.rects===!0?await f.getElementRects({reference:a,floating:o,strategy:d}):L.rects),{x:g,y:x}=Jj(p,v,m)),S=-1)}return{x:g,y:x,placement:v,strategy:d,middlewareData:y}})(t,e,Pn({},i,{platform:s}))};function Jde(t){t.cleanup&&t.cleanup();const e=t._getResolvedAttachToOptions();let r=e.element;const n=function(a,o){var l,u,d;const A={strategy:"absolute",middleware:[]},f=function(x){return x.options.arrow&&x.el?x.el.querySelector(".shepherd-arrow"):!1}(o),h=Wj(a),m=(l=a.on)==null?void 0:l.includes("auto"),p=(a==null||(u=a.on)==null?void 0:u.includes("-start"))||(a==null||(d=a.on)==null?void 0:d.includes("-end"));if(!h){var g;if(m?A.middleware.push(zde({crossAxis:!0,alignment:p?a==null||(g=a.on)==null?void 0:g.split("-").pop():null})):A.middleware.push(Yde()),A.middleware.push(Wde({limiter:Xde(),crossAxis:!0})),f){const x=typeof o.options.arrow=="object"?o.options.arrow:{padding:4};A.middleware.push(qde({element:f,padding:p?x.padding:0}))}m||(A.placement=a.on)}return gB(A,o.options.floatingUIOptions||{})}(e,t),i=Wj(e);if(i){var s;r=document.body;const a=(s=t.shepherdElementComponent)==null?void 0:s.element;a==null||a.classList.add("shepherd-centered")}return t.cleanup=Gde(r,t.el,()=>{t.el?function(a,o,l,u){Zde(a,o.el,l).then(function(d,A){return({x:f,y:h,placement:m,middlewareData:p})=>(d.el&&(A?Object.assign(d.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(d.el.style,{position:"absolute",left:`${f}px`,top:`${h}px`}),d.el.dataset.popperPlacement=m,function(g,x){const v=g.querySelector(".shepherd-arrow");if(qd(v)&&x.arrow){const{x:y,y:w}=x.arrow;Object.assign(v.style,{left:y!=null?`${y}px`:"",top:w!=null?`${w}px`:""})}}(d.el,p)),d)}(o,u)).then(d=>new Promise(A=>{setTimeout(()=>A(d),300)})).then(d=>{d!=null&&d.el&&(d.el.tabIndex=0,d.el.focus({preventScroll:!0}))})}(r,t,n,i):t.cleanup==null||t.cleanup()}),t.target=e.element,n}function ia(t,e,...r){const n=document.createElement(t);return oV(n,e),lV(n,r),n}function sM(t,e,...r){const n=document.createElementNS("http://www.w3.org/2000/svg",t);return oV(n,e),lV(n,r),n}function oV(t,e){if(e)for(const[r,n]of Object.entries(e))n!=null&&n!==!1&&(r.startsWith("on")&&typeof n=="function"?t.addEventListener(r.slice(2).toLowerCase(),n):r==="disabled"&&n===!0?t.disabled=!0:t.setAttribute(r,String(n)))}function lV(t,e){for(const r of e)r!=null&&r!==!1&&t.append(typeof r=="string"?document.createTextNode(r):r)}function oS(t,e){return Ul(t)?t.call(e):t}function eAe(t,e){const r=t.action?t.action.bind(e.tour):null,n=!!t.disabled&&oS(t.disabled,e),i=t.label?oS(t.label,e):null,s=t.text?oS(t.text,e):null,a=ia("button",{"aria-label":i||null,class:`${t.classes||""} shepherd-button ${t.secondary?"shepherd-button-secondary":""}`,disabled:n||null,onclick:r,tabindex:"0",type:"button"});return s&&(a.innerHTML=s),a}function tAe(t,e){const r=ia("header",{class:"shepherd-header"});return e.options.title&&r.append(function(n,i){const s=ia("h3",{id:n,class:"shepherd-title"}),a=Ul(i)?i():i;return s.innerHTML=a,s}(t,e.options.title)),e.options.cancelIcon&&e.options.cancelIcon.enabled&&r.append(function(n,i){return ia("button",{"aria-label":n.label?n.label:"Close Tour",class:"shepherd-cancel-icon",onclick:s=>{s.preventDefault(),i.cancel()},type:"button"},ia("span",{"aria-hidden":"true"},""))}(e.options.cancelIcon,e)),r}function rAe(t,e,r){const n=ia("div",{class:"shepherd-content"});return(!di(r.options.title)||r.options.cancelIcon&&r.options.cancelIcon.enabled)&&n.append(tAe(e,r)),di(r.options.text)||n.append(function(i,s){const a=ia("div",{class:"shepherd-text",id:i});let o=s.options.text;return Ul(o)&&(o=o.call(s)),qd(o)?a.appendChild(o):a.innerHTML=o,a}(t,r)),Array.isArray(r.options.buttons)&&r.options.buttons.length&&n.append(function(i){const s=ia("footer",{class:"shepherd-footer"});if(i.options.buttons)for(const a of i.options.buttons)s.append(eAe(a,i));return s}(r)),n}class lS extends UI{constructor(e,r={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this._originalTabIndexes=void 0,this.classPrefix=void 0,this.el=void 0,this.shepherdElementComponent=void 0,this.target=void 0,this.tour=void 0,this.tour=e,this.classPrefix=this.tour.options?XK(this.tour.options.classPrefix):"",this.styles=e.styles,this._resolvedAttachTo=null,this._originalTabIndexes=new Map,QI(this),this._setOptions(r),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){this._teardownElements(),this.trigger("destroy")}_teardownElements(){var e;(e=this).cleanup&&e.cleanup(),e.cleanup=null,this.shepherdElementComponent&&(this.shepherdElementComponent.cleanup(),this.shepherdElementComponent=void 0),qd(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this._originalTabIndexes.clear()}getTour(){return this.tour}hide(){var e;(e=this.tour.modal)==null||e.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){var e;return this._resolvedExtraHighlightElements=(e=this).options.extraHighlights?e.options.extraHighlights.flatMap(r=>Array.from(document.querySelectorAll(r))):[],this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=function(e){const r=e.options.attachTo||{},n=Object.assign({},r);if(Ul(n.element)&&(n.element=n.element.call(e)),Jv(n.element)){try{n.element=document.querySelector(n.element)}catch{}n.element}return n}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return Ul(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(e){Object.assign(this.options,e),this.shepherdElementComponent&&this.el&&(this._teardownElements(),this._setupElements())}getElement(){return this.el}getTarget(){return this.target}_storeOriginalTabIndex(e){const r=e.getAttribute("tabindex");r!==null&&this._originalTabIndexes.set(e,r)}_restoreOriginalTabIndexes(){const e=this.target;e&&(this._originalTabIndexes.has(e)?e.setAttribute("tabindex",this._originalTabIndexes.get(e)):e.removeAttribute("tabindex"))}_createTooltipContent(){const e=`${this.id}-description`,r=`${this.id}-label`;return this.shepherdElementComponent=function(n){var i,s,a,o;const{classPrefix:l,descriptionId:u,labelId:d,step:A}=n;let f,h,m,p,g,x,v;const y=(i=(s=A.options)==null||(s=s.cancelIcon)==null?void 0:s.enabled)!=null&&i,w=(a=(o=A.options)==null?void 0:o.title)!=null&&a,b=B=>{const{tour:_}=A;switch(B.keyCode){case 9:if((!h||h.length===0)&&x&&x.length===0){B.preventDefault();break}var I,L,N;if(B.shiftKey){if(document.activeElement===g||(I=document.activeElement)!=null&&I.classList.contains("shepherd-element"))B.preventDefault(),(L=p??v)==null||L.focus();else if(document.activeElement===m){var R;B.preventDefault(),(R=v)==null||R.focus()}}else if(document.activeElement===v)B.preventDefault(),(N=m??g)==null||N.focus();else if(document.activeElement===p){var M;B.preventDefault(),(M=g)==null||M.focus()}break;case 27:_.options.exitOnEsc&&(B.preventDefault(),B.stopPropagation(),A.cancel());break;case 37:_.options.keyboardNavigation&&(B.preventDefault(),B.stopPropagation(),_.back());break;case 39:_.options.keyboardNavigation&&(B.preventDefault(),B.stopPropagation(),_.next())}},S=ia("dialog",{"aria-describedby":di(A.options.text)?null:u,"aria-labelledby":A.options.title?d:null,class:["shepherd-element",y?"shepherd-has-cancel-icon":"",w?"shepherd-has-title":""].filter(Boolean).join(" "),[`data-${l}shepherd-step-id`]:A.id,onkeydown:b,open:"true"});if(A.options.arrow&&A.options.attachTo&&A.options.attachTo.element&&A.options.attachTo.on&&S.append(ia("div",{class:"shepherd-arrow","data-popper-arrow":""})),S.append(rAe(u,d,A)),Jv(A.options.classes)){const B=A.options.classes.split(" ").filter(_=>!!_.length);B.length&&S.classList.add(...B)}const C='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]';x=[...S.querySelectorAll(C)],g=x[0],v=x[x.length-1];const T=A._getResolvedAttachToOptions();return T!=null&&T.element&&(f=T.element,A._storeOriginalTabIndex(f),f.tabIndex=0,h=[f,...f.querySelectorAll(C)],m=h[0],p=h[h.length-1],f.addEventListener("keydown",b)),{element:S,cleanup:()=>{var B;(B=f)==null||B.removeEventListener("keydown",b)}}}({classPrefix:this.classPrefix,descriptionId:e,labelId:r,step:this}),(this.tour.options.stepsContainer||document.body).append(this.shepherdElementComponent.element),this.shepherdElementComponent.element}_scrollTo(e){const{element:r}=this._getResolvedAttachToOptions();Ul(this.options.scrollToHandler)?this.options.scrollToHandler(r):r instanceof Element&&typeof r.scrollIntoView=="function"&&r.scrollIntoView(e)}_getClassOptions(e){const r=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,n=e.classes?e.classes:"",i=r&&r.classes?r.classes:"",s=[...n.split(" "),...i.split(" ")],a=new Set(s);return Array.from(a).join(" ").trim()}_setOptions(e={}){let r=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;r=gB({},r||{}),this.options=Object.assign({arrow:!0},r,e,function(i,s){return{floatingUIOptions:gB(i.floatingUIOptions||{},s.floatingUIOptions||{})}}(r,e));const{when:n}=this.options;this.options.classes=this._getClassOptions(e),this.destroy(),this.id=this.options.id||`step-${ZK()}`,n&&Object.keys(n).forEach(i=>{this.on(i,n[i],this)})}_setupElements(){di(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&wde(this),Jde(this)}_show(){var e;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),(e=this.tour.modal)==null||e.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el&&(this.el.hidden=!1);const r=this.shepherdElementComponent.element,n=this.target||document.body,i=this._resolvedExtraHighlightElements;n.classList.add(`${this.classPrefix}shepherd-enabled`),n.classList.add(`${this.classPrefix}shepherd-target`),r.classList.add("shepherd-enabled"),i==null||i.forEach(s=>{s.classList.add(`${this.classPrefix}shepherd-enabled`),s.classList.add(`${this.classPrefix}shepherd-target`)}),this.trigger("show")}_styleTargetElementForStep(e){const r=e.target,n=e._resolvedExtraHighlightElements;if(!r)return;const i=e.options.highlightClass;i&&(r.classList.add(i),n==null||n.forEach(s=>s.classList.add(i))),r.classList.remove("shepherd-target-click-disabled"),n==null||n.forEach(s=>s.classList.remove("shepherd-target-click-disabled")),e.options.canClickTarget===!1&&(r.classList.add("shepherd-target-click-disabled"),n==null||n.forEach(s=>s.classList.add("shepherd-target-click-disabled")))}_updateStepTargetOnHide(){const e=this.target||document.body,r=this._resolvedExtraHighlightElements,n=this.options.highlightClass;n&&(e.classList.remove(n),r==null||r.forEach(i=>i.classList.remove(n))),e.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`),r==null||r.forEach(i=>{i.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}),this._restoreOriginalTabIndexes()}}function nAe(t){let e,r=[{width:0,height:0,x:0,y:0,r:0}];const n=sM("path"),i=sM("svg",{class:"shepherd-modal-overlay-container"},n);function s(){n.setAttribute("d",function(p){let g="";const{innerWidth:x,innerHeight:v}=window;return p.forEach(y=>{const{width:w,height:b,x:S=0,y:C=0,r:T=0}=y,{topLeft:B=0,topRight:_=0,bottomRight:I=0,bottomLeft:L=0}=typeof T=="number"?{topLeft:T,topRight:T,bottomRight:T,bottomLeft:T}:T;g+=`M${S+B},${C}      a${B},${B},0,0,0-${B},${B}      V${b+C-L}      a${L},${L},0,0,0,${L},${L}      H${w+S-I}      a${I},${I},0,0,0,${I}-${I}      V${C+_}      a${_},${_},0,0,0-${_}-${_}      Z`}),`M${x},${v}          H0          V0          H${x}          V${v}          Z          ${g}`.replace(/\s/g,"")}(r))}function a(){r=[{width:0,height:0,x:0,y:0,r:0}],s()}function o(){i.classList.remove("shepherd-modal-is-visible"),f()}function l(){i.classList.add("shepherd-modal-is-visible")}function u(p=0,g=0,x=0,v=0,y,w,b){if(w){{const S=[w,...b||[]],C=[];for(const T of S){if(!T||S.indexOf(T)!==S.lastIndexOf(T))continue;const{y:B,height:_}=m(T,y),{x:I,width:L,left:N}=T.getBoundingClientRect();S.some(R=>{if(R===T)return!1;const M=R.getBoundingClientRect(),{y:k,height:O}=m(R,y);return I>=M.left&&I+L<=M.left+M.width&&B>=k&&B+_<=k+O})||C.push({width:L+2*p,height:_+2*p,x:(I||N)+x-p,y:B+v-p,r:g})}r=C}s()}else a()}function d(p){p.stopPropagation()}i.addEventListener("touchmove",d),s(),t.append(i);const A=p=>{p.preventDefault()};function f(){e&&(cancelAnimationFrame(e),e=void 0),window.removeEventListener("touchmove",A,{passive:!1})}function h(p){if(!p)return null;const g=p instanceof HTMLElement&&window.getComputedStyle(p).overflowY;return g!=="hidden"&&g!=="visible"&&p.scrollHeight>=p.clientHeight?p:h(p.parentElement)}function m(p,g){const x=p.getBoundingClientRect();let v=x.y||x.top,y=x.bottom||v+x.height;if(g){const w=g.getBoundingClientRect(),b=w.y||w.top,S=w.bottom||b+w.height;v=Math.max(v,b),y=Math.min(y,S)}return{y:v,height:Math.max(y-v,0)}}return{closeModalOpening:a,destroy:function(){f(),i.removeEventListener("touchmove",d),i.remove()},hide:o,positionModal:u,setupForStep:function(p){f(),p.tour.options.useModalOverlay?(function(g){const{modalOverlayOpeningPadding:x,modalOverlayOpeningRadius:v,modalOverlayOpeningXOffset:y=0,modalOverlayOpeningYOffset:w=0}=g.options,b=function(T){const B={top:0,left:0};if(!T)return B;let _=T.ownerDocument.defaultView;try{for(;_&&_!==window.top;){var I;const L=(I=_)==null?void 0:I.frameElement;if(L){const N=L.getBoundingClientRect();B.top+=N.top+L.scrollTop,B.left+=N.left+L.scrollLeft}_=_.parent}}catch{}return B}(g.target),S=h(g.target),C=()=>{e=void 0,u(x,v,y+b.left,w+b.top,S,g.target,g._resolvedExtraHighlightElements),e=requestAnimationFrame(C)};C(),window.addEventListener("touchmove",A,{passive:!1})}(p),l()):o()},show:l,getElement:function(){return i}}}class iAe extends UI{constructor(){super(),this.activeTour=void 0,QI(this)}}const Nc=new iAe,aM=typeof window>"u";Nc.Step=aM?class{constructor(t){}}:lS,Nc.Tour=aM?class{constructor(t,e){}}:class extends UI{constructor(t={}){return super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,QI(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},t),this.classPrefix=XK(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(e=>{(r=>{this.on(r,n=>{(n=n||{}).tour=this,Nc.trigger(r,n)})})(e)}),this._setTourID(t.id),this}addStep(t,e){let r=t;return r instanceof lS?r.tour=this:r=new lS(this,r),di(e)?this.steps.push(r):this.steps.splice(e,0,r),r}addSteps(t){return Array.isArray(t)&&t.forEach(e=>{this.addStep(e)}),this}back(){const t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)}async cancel(){if(this.options.confirmCancel){const t=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";let e;e=Ul(this.options.confirmCancel)?await this.options.confirmCancel():window.confirm(t),e&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(t){return this.steps.find(e=>e.id===t)}getCurrentStep(){return this.currentStep}hide(){const t=this.getCurrentStep();if(t)return t.hide()}isActive(){return Nc.activeTour===this}next(){const t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?this.complete():this.show(t+1,!0)}removeStep(t){const e=this.getCurrentStep();this.steps.some((r,n)=>{if(r.id===t)return r.isOpen()&&r.hide(),r.destroy(),this.steps.splice(n,1),!0}),e&&e.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(t=0,e=!0){const r=Jv(t)?this.getById(t):this.steps[t];r&&(this._updateStateBeforeShow(),Ul(r.options.showOn)&&!r.options.showOn()?this._skipStep(r,e):(this.currentStep=r,this.trigger("show",{step:r,previous:this.currentStep}),r.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(t){const e=this.steps.indexOf(this.currentStep);Array.isArray(this.steps)&&this.steps.forEach(r=>r.destroy()),function(r){if(r){const{steps:n}=r;n.forEach(i=>{i.options&&i.options.canClickTarget===!1&&i.options.attachTo&&(qd(i.target)&&i.target.classList.remove("shepherd-target-click-disabled"),i._resolvedExtraHighlightElements&&i._resolvedExtraHighlightElements.forEach(s=>{qd(s)&&s.classList.remove("shepherd-target-click-disabled")}))})}}(this),this.trigger(t,{index:e}),Nc.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),t!=="cancel"&&t!=="complete"||this.modal&&(this.modal.destroy(),this.modal=null),qd(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),Nc.activeTour=this}setupModal(){const t=this.options.modalContainer||document.body;this.modal=nAe(t)}_skipStep(t,e){const r=this.steps.indexOf(t);if(r===this.steps.length-1)this.complete();else{const n=e?r+1:r-1;this.show(n,e)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(t){const e=this.options.tourName||"tour",r=t||ZK();this.id=`${e}--${r}`}};const sAe=({run:t,onFinish:e})=>{const r=E.useRef(null);return E.useEffect(()=>{r.current=new Nc.Tour({defaultStepOptions:{classes:"shepherd-element shadow-2xl",scrollTo:{behavior:"smooth",block:"center"},cancelIcon:{enabled:!0},modalOverlayOpeningPadding:8,modalOverlayOpeningRadius:8},useModalOverlay:!0});const n=r.current;return n.addStep({id:"welcome",title:"Welcome to Tacta!",text:"Let's take a deep dive into the dashboard to master soccer analysis.",classes:"shepherd-element shepherd-welcome shadow-2xl",buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Skip",action:n.cancel},{classes:"shepherd-button-primary shepherd-button",text:"Get Started",action:n.next}]}),n.addStep({id:"session-mode",title:"Session Mode",text:"Your first choice: <b>Collaboration</b> for voice-linked team analysis, or <b>Individual Work</b> for solo tagging.",attachTo:{element:"#session-mode-modal",on:"bottom"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"sidebar",title:"Global Navigation",text:"Access the Dashboard, Analytics, QA Suite, and more from this centralized hub.",attachTo:{element:"#app-sidebar",on:"right"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"analysis-mode",title:"Analysis Context",text:"Switch between <b>LIVE</b> for real-time tagging and <b>POST-MATCH</b> for deep retrospective analysis.",attachTo:{element:"#analysis-mode-selector",on:"bottom"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"match-timer",title:"Match Synchronization",text:"Control the match clock. All tagged events are automatically timestamped based on this duration.",attachTo:{element:"#match-timer-section",on:"bottom"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"voice-cmd",title:"Hands-Free Tagging",text:"Activate <b>Voice Cmd</b> to tag events using your voice while keeping your eyes on the action.",attachTo:{element:"#voice-commands-btn",on:"bottom"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"team-tools",title:"Squad Management",text:"Upload rosters and switch between active teams to ensure accurate player-event attribution.",attachTo:{element:"#team-grid-section",on:"right"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"voice-buffer",title:"Real-time Feedback",text:"The <b>Voice Buffer</b> shows phonetic feedback as you speak, ensuring your commands are accurately recognized.",attachTo:{element:"#live-voice-buffer",on:"bottom"},canClickTarget:!1,buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"controller-config",title:"Custom Configuration",text:"Review active mappings or customize your gamepad/keyboard layout to suit your tagging style.",attachTo:{element:"#controller-config-section",on:"right"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"main-video",title:"Visual Core",text:"This is where the magic happens. Connect to a live stream or local file for frame-by-frame analysis.",attachTo:{element:"#main-video",on:"top"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"predictor",title:"AI Prediction Engine",text:"Our AI analyzes patterns to suggest the most likely next event, speeding up your workflow significantly.",attachTo:{element:"#predictor-stats",on:"left"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"event-log",title:"Live Event Log",text:"Every tagged moment appears here. Review, edit, or undo events instantly to maintain data integrity.",attachTo:{element:"#event-log-container",on:"left"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"context-review",title:"Context & Review",text:"Select players from the roster or deep-dive into video clips for verification and coaching bits.",attachTo:{element:"#context-review-section",on:"left"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Next",action:n.next}]}),n.addStep({id:"help",title:"Always Available",text:"Need a refresher? Restart this tour or access detailed help documentation anytime from the header.",attachTo:{element:"#help-button",on:"bottom"},buttons:[{classes:"shepherd-button-secondary shepherd-button",text:"Back",action:n.back},{classes:"shepherd-button-primary shepherd-button",text:"Finish",action:n.complete}]}),n.on("complete",()=>{console.log("[Tour] Complete event fired"),e()}),n.on("cancel",()=>{console.log("[Tour] Cancel event fired"),e()}),()=>{console.log("[Tour] Cleaning up tour instance..."),r.current&&(r.current.off("complete"),r.current.off("cancel"),r.current.cancel())}},[e]),E.useEffect(()=>{t&&r.current?(console.log("[Tour] Starting tour via run prop"),r.current.start()):!t&&r.current&&r.current.isActive()&&(console.log("[Tour] Stopping tour via run prop"),r.current.cancel())},[t]),null},aAe=[{title:"Dashboard",view:"dashboard",icon:l8,permission:"dashboard.view",description:"Live & Post-Match"},{title:"Live Stream",view:"dashboard",icon:cl,permission:"dashboard.live.stream.view",description:"Broadcast Control"},{title:"Stats",view:"analytics",icon:Xre,permission:"analytics.view",description:"Data Trends"},{title:"Documentation",view:"documentation",icon:ZH,permission:"dashboard.view",description:"Auto-Scribe Guides"},{title:"Tactics",view:"tactics",icon:un,permission:"analytics.advanced",description:"Strategy Board"},{title:"Monitoring",view:"monitoring",icon:cl,permission:"monitoring.view",description:"System Health"},{title:"QA Suite",view:"qa",icon:dw,permission:"qa.view",description:"Validation"},{title:"Community",view:"community",icon:s8,permission:"community.view",description:"Hub"},{title:"Video Manager",view:"video_manager",icon:GT,permission:"admin.view",description:"Clips Library"},{title:"Admin Portal",path:"/admin",icon:Gne,permission:"admin.view",description:"Configuration"}];function oAe({currentView:t,onViewChange:e}){const{user:r,logout:n,hasPermission:i}=Ta(),s=Sw(),a=aAe.filter(o=>"hidden"in o&&o.hidden?!1:o.permission?i(o.permission):!0);return c.jsxs(UK,{id:"app-sidebar",collapsible:"icon",className:"border-r border-border/50 bg-card/50 backdrop-blur-xl",children:[c.jsx(KK,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary font-bold text-primary-foreground shadow-lg shadow-primary/20",children:"T"}),c.jsxs("div",{className:"flex flex-col gap-0.5 group-data-[collapsible=icon]:hidden",children:[c.jsx("span",{className:"font-bold leading-none tracking-tight",children:"Tacta"}),c.jsx("span",{className:"text-[10px] font-medium uppercase tracking-widest text-muted-foreground opacity-70",children:(r==null?void 0:r.role.replace("_"," "))||"Pro Analytics"})]})]})}),c.jsx(GK,{children:c.jsxs(zK,{children:[c.jsx(WK,{className:"px-2 text-[10px] font-bold uppercase tracking-widest text-muted-foreground/50 group-data-[collapsible=icon]:hidden",children:"Main Navigation"}),c.jsx(YK,{children:c.jsx(hB,{children:a.map(o=>c.jsx(pB,{children:c.jsxs(mB,{tooltip:o.title,isActive:t===o.view||o.path&&window.location.pathname===o.path,onClick:()=>{o.path?s(o.path):o.view&&(e(o.view),window.location.pathname!=="/"&&s("/"))},className:`h-10 transition-all duration-200 ${t===o.view?"bg-primary/10 text-primary shadow-sm":"text-muted-foreground hover:bg-accent hover:text-foreground"}`,children:[c.jsx(o.icon,{className:`h-4.5 w-4.5 ${t===o.view?"animate-pulse":""}`}),c.jsxs("div",{className:"flex flex-col gap-0.5 group-data-[collapsible=icon]:hidden",children:[c.jsx("span",{className:"font-medium text-xs",children:o.title}),o.description&&c.jsx("span",{className:"text-[9px] text-muted-foreground/60 font-normal",children:o.description})]}),t===o.view&&c.jsx(Io,{className:"ml-auto h-3.5 w-3.5 opacity-50 group-data-[collapsible=icon]:hidden"})]})},o.title))})})]})}),c.jsx(VK,{className:"p-4 border-t border-border/20",children:c.jsx(hB,{children:c.jsx(pB,{children:c.jsxs(mB,{onClick:n,tooltip:"Logout",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",children:[c.jsx(xne,{className:"h-4.5 w-4.5"}),c.jsx("span",{className:"font-medium group-data-[collapsible=icon]:hidden",children:"Logout"})]})})})}),c.jsx(QK,{})]})}function lAe({className:t,maxPredictions:e=3,minConfidenceThreshold:r=.1}){const{predictions:n,learningStats:i}=Yr(),s=n.filter(o=>o.probability>=r).slice(0,e);if(s.length===0)return c.jsxs("div",{className:Z("rounded-lg border border-border/30 bg-card/50 backdrop-blur-sm p-3",t),children:[c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(yu,{className:"w-4 h-4"}),c.jsx("span",{className:"text-xs",children:"Learning patterns..."})]}),i&&c.jsxs("div",{className:"mt-2 text-xs text-muted-foreground/70",children:[i.totalEventsProcessed," events processed"]})]});const a=s[0];return c.jsxs("div",{className:Z("rounded-lg border border-border/50 bg-card/95 backdrop-blur-sm shadow-lg overflow-hidden",t),children:[c.jsx("div",{className:"px-3 py-2 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border-b border-border/30",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(hI,{className:"w-4 h-4 text-purple-400"}),c.jsx("span",{className:"text-sm font-semibold text-purple-200",children:"Likely Next"})]}),i&&c.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[i.totalPatterns," patterns"]})]})}),c.jsx("div",{className:"p-2 space-y-1.5",children:s.map((o,l)=>c.jsx(cAe,{prediction:o,isTop:l===0,rank:l+1},o.eventName))}),a&&a.probability>.4&&c.jsx("div",{className:"px-3 py-2 bg-purple-500/10 border-t border-border/30",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(Io,{className:"w-3 h-3 text-purple-400"}),c.jsxs("span",{className:"text-muted-foreground",children:["Press ",c.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300 font-mono text-[10px]",children:a.buttonLabel})," for ",a.description]})]})})]})}function cAe({prediction:t,isTop:e,rank:r}){const n={HIGH:"bg-green-500",MEDIUM:"bg-yellow-500",LOW:"bg-gray-500"},i=Math.round(t.probability*100);return c.jsxs("div",{className:Z("relative rounded-md overflow-hidden transition-all",e?"ring-1 ring-purple-500/50":""),children:[c.jsx("div",{className:Z("absolute inset-0 opacity-20",e?"bg-purple-500":"bg-gray-500"),style:{width:`${i}%`}}),c.jsxs("div",{className:"relative flex items-center gap-2 px-2.5 py-2",children:[c.jsx("div",{className:Z("w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold",e?"bg-purple-500 text-white":"bg-muted text-muted-foreground"),children:r}),c.jsx("kbd",{className:Z("px-2 py-1 rounded text-xs font-mono font-bold min-w-[40px] text-center",e?"bg-purple-500/30 text-purple-200 ring-1 ring-purple-500/50":"bg-muted text-muted-foreground"),children:t.buttonLabel}),c.jsx("span",{className:Z("flex-1 text-sm truncate",e?"text-foreground font-medium":"text-muted-foreground"),children:t.description}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:Z("w-1.5 h-1.5 rounded-full",n[t.confidence])}),c.jsx("span",{className:Z("text-xs font-mono",e?"text-foreground":"text-muted-foreground"),children:LI(t.probability)})]})]})]})}function uAe({className:t}){const{predictions:e}=Yr(),r=e[0];return!r||r.probability<.2?null:c.jsxs("div",{className:Z("inline-flex items-center gap-2 px-2 py-1 rounded-md bg-purple-500/10 border border-purple-500/30",t),children:[c.jsx(hI,{className:"w-3 h-3 text-purple-400"}),c.jsx("span",{className:"text-xs text-purple-200",children:"Next:"}),c.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300 font-mono text-xs font-bold",children:r.buttonLabel}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",LI(r.probability),")"]})]})}function cV({className:t}){const{learningStats:e,resetPredictions:r}=Yr();return e?c.jsxs("div",{className:Z("rounded-lg border border-border/50 bg-card/95 p-3 space-y-2",t),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(yu,{className:"w-4 h-4 text-purple-400"}),c.jsx("span",{className:"text-sm font-semibold",children:"Pattern Learning"})]}),c.jsx("button",{onClick:r,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Reset"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Patterns:"}),c.jsx("span",{className:"ml-1 font-medium",children:e.totalPatterns})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Events:"}),c.jsx("span",{className:"ml-1 font-medium",children:e.totalEventsProcessed})]})]}),e.topPatterns.length>0&&c.jsxs("div",{className:"pt-2 border-t border-border/30",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Top Patterns:"}),c.jsx("div",{className:"mt-1 space-y-1",children:e.topPatterns.slice(0,3).map((n,i)=>c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"font-mono text-purple-300 truncate max-w-[120px]",children:n.sequence.join("  ")}),c.jsxs("span",{className:"text-muted-foreground",children:[" ",n.topFollower," (",LI(n.topFollowerProbability),")"]})]},i))})]})]}):null}const dAe=({userRole:t,activeView:e,setActiveView:r,hasPermission:n,trackingMode:i,setTrackingMode:s,isMatchActive:a,toggleMatch:o,matchTime:l,formatTime:u,voiceLanguage:d,setVoiceLanguage:A,isListening:f,toggleListening:h,isInRoom:m,joinVoiceRoom:p,leaveVoiceRoom:g,toggleMute:x,isMuted:v,peersCount:y,isEditMode:w,setIsEditMode:b,saveLayout:S,resetLayout:C,onStartGuide:T})=>c.jsxs("div",{id:"dashboard-header",className:"h-12 border-b bg-card/95 backdrop-blur-md flex items-center px-4 select-none z-50 shrink-0 gap-4 justify-between shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[t!=="eye_spotter"&&c.jsx($K,{className:"h-8 w-8"}),c.jsx("div",{className:"h-4 w-px bg-border/60"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("h1",{className:"font-bold text-sm tracking-tight uppercase text-primary",children:e}),c.jsx("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest leading-none font-medium",children:"Session Live"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{id:"analysis-mode-selector",className:"flex items-center bg-muted/50 rounded-md p-0.5 border border-border/50 shadow-inner",children:[n("dashboard.live.view")&&c.jsx(te,{variant:i==="LIVE"?"default":"ghost",size:"sm",className:"h-6 text-[10px] px-2.5 rounded transition-all",onClick:()=>s("LIVE"),children:"LIVE"}),n("dashboard.post.view")&&c.jsx(te,{variant:i==="POST_MATCH"?"default":"ghost",size:"sm",className:"h-6 text-[10px] px-2.5 rounded transition-all",onClick:()=>s("POST_MATCH"),children:"POST-MATCH"})]}),c.jsxs("div",{id:"match-timer-section",className:"flex items-center gap-2 bg-card px-3 py-0.5 rounded-md border border-border shadow-sm",children:[c.jsx("span",{className:`font-mono font-bold text-base min-w-[70px] text-center ${a?"text-primary":"text-muted-foreground"}`,children:u(l)}),c.jsx(te,{size:"icon",className:`h-6 w-6 rounded-full shadow-sm transition-colors ${a?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,onClick:o,children:a?c.jsx(Kv,{size:12,fill:"currentColor"}):c.jsx(ho,{size:12,fill:"currentColor"})})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(uAe,{className:"hidden md:flex"}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"h-7 pl-2 pr-6 bg-muted/50 border border-border rounded text-[11px] font-medium focus:outline-none appearance-none cursor-pointer hover:bg-muted transition-colors",value:d,onChange:B=>A(B.target.value),children:[c.jsx("option",{value:"en",children:"EN"}),c.jsx("option",{value:"fr",children:"FR"}),c.jsx("option",{value:"ar",children:"AR"})]}),c.jsx(lg,{className:"h-3 w-3 text-muted-foreground absolute right-1.5 top-2 pointer-events-none group-hover:text-foreground"})]}),n("dashboard.live.voice")&&c.jsxs(te,{id:"voice-commands-btn",variant:f?"default":"outline",size:"sm",className:`h-7 gap-1.5 px-2 transition-all text-[11px] ${f?"bg-red-500 hover:bg-red-600 border-red-500 text-white shadow-md animate-pulse":"text-muted-foreground"}`,onClick:h,children:[f?c.jsx(Hv,{size:12}):c.jsx(Qx,{size:12}),c.jsx("span",{className:"hidden lg:inline",children:"Voice Cmd"})]}),c.jsx("div",{className:"flex items-center gap-1 bg-muted/30 rounded-md p-0.5 border border-border/50",children:m?c.jsxs(c.Fragment,{children:[c.jsx(te,{variant:v?"destructive":"secondary",size:"icon",className:"h-6 w-6 rounded-full",onClick:x,children:v?c.jsx(Qx,{size:11}):c.jsx(Hv,{size:11})}),c.jsxs("div",{className:"px-2 text-[9px] font-mono text-primary flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),y+1," User",y!==0&&"s"]}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:g,children:c.jsx(At,{size:12})})]}):c.jsxs(te,{variant:"ghost",size:"sm",className:"h-6 text-[10px] px-2 gap-1.5 text-muted-foreground hover:text-primary hover:bg-primary/10",onClick:p,children:[c.jsx(Qx,{size:12})," Join Room"]})})]}),c.jsx("div",{className:"h-4 w-px bg-border/60"}),c.jsx("div",{className:"flex items-center gap-1",children:w?c.jsxs(c.Fragment,{children:[c.jsxs(te,{variant:"ghost",size:"sm",className:"h-8 gap-2 text-green-400 hover:text-green-300 hover:bg-green-400/10",onClick:S,children:[c.jsx(uw,{className:"h-4 w-4"})," ",c.jsx("span",{className:"hidden xl:inline",children:"Save"})]}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-white",onClick:C,children:c.jsx(po,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"sm",className:"h-8 gap-2 text-muted-foreground hover:text-white",onClick:()=>b(!1),children:c.jsx(At,{className:"h-4 w-4"})})]}):c.jsx(te,{id:"layout-edit-btn",variant:"ghost",size:"icon",className:Z("h-8 w-8 text-muted-foreground hover:text-foreground",w&&"text-primary bg-primary/10"),onClick:()=>b(!0),children:c.jsx(u8,{className:"h-4 w-4"})})}),c.jsx("div",{className:"h-4 w-px bg-border/60"}),c.jsx(te,{id:"settings-btn",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",onClick:()=>r("settings"),children:c.jsx(fI,{className:"h-4 w-4"})}),T&&c.jsx(te,{id:"help-button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary transition-colors",onClick:T,title:"Start Visual Guide",children:c.jsx(Zre,{className:"h-4 w-4"})})]})]});function AAe({videoRef:t,videoStream:e}){return E.useEffect(()=>{t.current&&e&&(t.current.srcObject!==e&&(t.current.srcObject=e),t.current.play().catch(r=>{r.name!=="AbortError"&&console.warn("Video background play interrupted or failed:",r)}))},[e,t]),e?c.jsx("video",{ref:t,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover z-0"}):null}const Fe=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Z("rounded-lg flex flex-col justify-between border bg-card text-card-foreground shadow-sm",t),...e}));Fe.displayName="Card";const Dt=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Z("flex flex-col space-y-1.5 p-6",t),...e}));Dt.displayName="CardHeader";const Ot=E.forwardRef(({className:t,...e},r)=>c.jsx("h3",{ref:r,className:Z("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ot.displayName="CardTitle";const yi=E.forwardRef(({className:t,...e},r)=>c.jsx("p",{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));yi.displayName="CardDescription";const vt=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Z("p-6 pt-0",t),...e}));vt.displayName="CardContent";const WI=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Z("flex items-center p-6 pt-0",t),...e}));WI.displayName="CardFooter";var fAe="Label",uV=E.forwardRef((t,e)=>c.jsx(De.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));uV.displayName=fAe;var dV=uV;const hAe=$u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),bo=E.forwardRef(({className:t,...e},r)=>c.jsx(dV,{ref:r,className:Z(hAe(),t),...e}));bo.displayName=dV.displayName;function Xp(t,[e,r]){return Math.min(r,Math.max(e,t))}var pAe=E.createContext(void 0);function Bf(t){const e=E.useContext(pAe);return t||e||"ltr"}function hg(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var AV=["PageUp","PageDown"],fV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_f="Slider",[bB,mAe,gAe]=sw(_f),[pV,jZe]=Cn(_f,[gAe]),[xAe,Mw]=pV(_f),mV=E.forwardRef((t,e)=>{const{name:r,min:n=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[n],value:d,onValueChange:A=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:m,...p}=t,g=E.useRef(new Set),x=E.useRef(0),y=a==="horizontal"?vAe:yAe,[w=[],b]=zi({prop:d,defaultProp:u,onChange:I=>{var N;(N=[...g.current][x.current])==null||N.focus(),A(I)}}),S=E.useRef(w);function C(I){const L=CAe(w,I);_(I,L)}function T(I){_(I,x.current)}function B(){const I=S.current[x.current];w[x.current]!==I&&f(w)}function _(I,L,{commit:N}={commit:!1}){const R=NAe(s),M=IAe(Math.round((I-n)/s)*s+n,R),k=Xp(M,[n,i]);b((O=[])=>{const j=EAe(O,k,L);if(_Ae(j,l*s)){x.current=j.indexOf(k);const D=String(j)!==String(O);return D&&N&&f(j),D?j:O}else return O})}return c.jsx(xAe,{scope:t.__scopeSlider,name:r,disabled:o,min:n,max:i,valueIndexToChangeRef:x,thumbs:g.current,values:w,orientation:a,form:m,children:c.jsx(bB.Provider,{scope:t.__scopeSlider,children:c.jsx(bB.Slot,{scope:t.__scopeSlider,children:c.jsx(y,{"aria-disabled":o,"data-disabled":o?"":void 0,...p,ref:e,onPointerDown:Ie(p.onPointerDown,()=>{o||(S.current=w)}),min:n,max:i,inverted:h,onSlideStart:o?void 0:C,onSlideMove:o?void 0:T,onSlideEnd:o?void 0:B,onHomeKeyDown:()=>!o&&_(n,0,{commit:!0}),onEndKeyDown:()=>!o&&_(i,w.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:L})=>{if(!o){const M=AV.includes(I.key)||I.shiftKey&&fV.includes(I.key)?10:1,k=x.current,O=w[k],j=s*M*L;_(O+j,k,{commit:!0})}}})})})})});mV.displayName=_f;var[gV,xV]=pV(_f,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vAe=E.forwardRef((t,e)=>{const{min:r,max:n,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=t,[A,f]=E.useState(null),h=qe(e,y=>f(y)),m=E.useRef(void 0),p=Bf(i),g=p==="ltr",x=g&&!s||!g&&s;function v(y){const w=m.current||A.getBoundingClientRect(),b=[0,w.width],C=YI(b,x?[r,n]:[n,r]);return m.current=w,C(y-w.left)}return c.jsx(gV,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:c.jsx(vV,{dir:p,"data-orientation":"horizontal",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const w=v(y.clientX);a==null||a(w)},onSlideMove:y=>{const w=v(y.clientX);o==null||o(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:y=>{const b=hV[x?"from-left":"from-right"].includes(y.key);u==null||u({event:y,direction:b?-1:1})}})})}),yAe=E.forwardRef((t,e)=>{const{min:r,max:n,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...u}=t,d=E.useRef(null),A=qe(e,d),f=E.useRef(void 0),h=!i;function m(p){const g=f.current||d.current.getBoundingClientRect(),x=[0,g.height],y=YI(x,h?[n,r]:[r,n]);return f.current=g,y(p-g.top)}return c.jsx(gV,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:c.jsx(vV,{"data-orientation":"vertical",...u,ref:A,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const g=m(p.clientY);s==null||s(g)},onSlideMove:p=>{const g=m(p.clientY);a==null||a(g)},onSlideEnd:()=>{f.current=void 0,o==null||o()},onStepKeyDown:p=>{const x=hV[h?"from-bottom":"from-top"].includes(p.key);l==null||l({event:p,direction:x?-1:1})}})})}),vV=E.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...u}=t,d=Mw(_f,r);return c.jsx(De.span,{...u,ref:e,onKeyDown:Ie(t.onKeyDown,A=>{A.key==="Home"?(a(A),A.preventDefault()):A.key==="End"?(o(A),A.preventDefault()):AV.concat(fV).includes(A.key)&&(l(A),A.preventDefault())}),onPointerDown:Ie(t.onPointerDown,A=>{const f=A.target;f.setPointerCapture(A.pointerId),A.preventDefault(),d.thumbs.has(f)?f.focus():n(A)}),onPointerMove:Ie(t.onPointerMove,A=>{A.target.hasPointerCapture(A.pointerId)&&i(A)}),onPointerUp:Ie(t.onPointerUp,A=>{const f=A.target;f.hasPointerCapture(A.pointerId)&&(f.releasePointerCapture(A.pointerId),s(A))})})}),yV="SliderTrack",bV=E.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=Mw(yV,r);return c.jsx(De.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});bV.displayName=yV;var wB="SliderRange",wV=E.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,i=Mw(wB,r),s=xV(wB,r),a=E.useRef(null),o=qe(e,a),l=i.values.length,u=i.values.map(f=>CV(f,i.min,i.max)),d=l>1?Math.min(...u):0,A=100-Math.max(...u);return c.jsx(De.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:o,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:A+"%"}})});wV.displayName=wB;var EB="SliderThumb",EV=E.forwardRef((t,e)=>{const r=mAe(t.__scopeSlider),[n,i]=E.useState(null),s=qe(e,o=>i(o)),a=E.useMemo(()=>n?r().findIndex(o=>o.ref.current===n):-1,[r,n]);return c.jsx(bAe,{...t,ref:s,index:a})}),bAe=E.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:i,...s}=t,a=Mw(EB,r),o=xV(EB,r),[l,u]=E.useState(null),d=qe(e,v=>u(v)),A=l?a.form||!!l.closest("form"):!0,f=dg(l),h=a.values[n],m=h===void 0?0:CV(h,a.min,a.max),p=SAe(n,a.values.length),g=f==null?void 0:f[o.size],x=g?TAe(g,m,o.direction):0;return E.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${x}px)`},children:[c.jsx(bB.ItemSlot,{scope:t.__scopeSlider,children:c.jsx(De.span,{role:"slider","aria-label":t["aria-label"]||p,"aria-valuemin":a.min,"aria-valuenow":h,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:d,style:h===void 0?{display:"none"}:t.style,onFocus:Ie(t.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),A&&c.jsx(SV,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:h},n)]})});EV.displayName=EB;var wAe="RadioBubbleInput",SV=E.forwardRef(({__scopeSlider:t,value:e,...r},n)=>{const i=E.useRef(null),s=qe(i,n),a=hg(e);return E.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&d){const A=new Event("input",{bubbles:!0});d.call(o,e),o.dispatchEvent(A)}},[a,e]),c.jsx(De.input,{style:{display:"none"},...r,ref:s,defaultValue:e})});SV.displayName=wAe;function EAe(t=[],e,r){const n=[...t];return n[r]=e,n.sort((i,s)=>i-s)}function CV(t,e,r){const s=100/(r-e)*(t-e);return Xp(s,[0,100])}function SAe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function CAe(t,e){if(t.length===1)return 0;const r=t.map(i=>Math.abs(i-e)),n=Math.min(...r);return r.indexOf(n)}function TAe(t,e,r){const n=t/2,s=YI([0,50],[0,n]);return(n-s(e)*r)*r}function BAe(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function _Ae(t,e){if(e>0){const r=BAe(t);return Math.min(...r)>=e}return!0}function YI(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function NAe(t){return(String(t).split(".")[1]||"").length}function IAe(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var TV=mV,PAe=bV,RAe=wV,kAe=EV;const SB=E.forwardRef(({className:t,...e},r)=>c.jsxs(TV,{ref:r,className:Z("relative flex w-full touch-none select-none items-center",t),...e,children:[c.jsx(PAe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx(RAe,{className:"absolute h-full bg-primary"})}),c.jsx(kAe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));SB.displayName=TV.displayName;const LAe=$u("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function We({className:t,variant:e,...r}){return c.jsx("div",{className:Z(LAe({variant:e}),t),...r})}var Dw="Switch",[jAe,MZe]=Cn(Dw),[MAe,DAe]=jAe(Dw),BV=E.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:u,form:d,...A}=t,[f,h]=E.useState(null),m=qe(e,y=>h(y)),p=E.useRef(!1),g=f?d||!!f.closest("form"):!0,[x,v]=zi({prop:i,defaultProp:s??!1,onChange:u,caller:Dw});return c.jsxs(MAe,{scope:r,checked:x,disabled:o,children:[c.jsx(De.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":PV(x),"data-disabled":o?"":void 0,disabled:o,value:l,...A,ref:m,onClick:Ie(t.onClick,y=>{v(w=>!w),g&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})}),g&&c.jsx(IV,{control:f,bubbles:!p.current,name:n,value:l,checked:x,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});BV.displayName=Dw;var _V="SwitchThumb",NV=E.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=DAe(_V,r);return c.jsx(De.span,{"data-state":PV(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});NV.displayName=_V;var OAe="SwitchBubbleInput",IV=E.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...i},s)=>{const a=E.useRef(null),o=qe(a,s),l=hg(r),u=dg(e);return E.useEffect(()=>{const d=a.current;if(!d)return;const A=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(A,"checked").set;if(l!==r&&h){const m=new Event("click",{bubbles:n});h.call(d,r),d.dispatchEvent(m)}},[l,r,n]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IV.displayName=OAe;function PV(t){return t?"checked":"unchecked"}var RV=BV,FAe=NV;const qI=E.forwardRef(({className:t,...e},r)=>c.jsx(RV,{className:Z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:c.jsx(FAe,{className:Z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qI.displayName=RV.displayName;const Te=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},UAe=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=$Ae},$Ae=Number.MAX_SAFE_INTEGER||9007199254740991;let Ue=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),Y=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),P=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var at={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ke={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class td{constructor(e,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}sample(e,r){const n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class QAe{constructor(e,r,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new td(e),this.fast_=new td(r),this.defaultTTFB_=i,this.ttfb_=new td(e)}update(e,r){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new td(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==r&&(this.fast_=new td(r,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new td(e,s.getEstimate(),s.getTotalWeight()))}sample(e,r){e=Math.max(e,this.minDelayMs_);const n=8*r,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const r=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function HAe(t,e,r){return(e=VAe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jt.apply(null,arguments)}function oM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oM(Object(r),!0).forEach(function(n){HAe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KAe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VAe(t){var e=KAe(t,"string");return typeof e=="symbol"?e:e+""}let Zi=class{constructor(e,r){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=rl,this.debug=r.debug.bind(null,n),this.log=r.log.bind(null,n),this.warn=r.warn.bind(null,n),this.info=r.info.bind(null,n),this.error=r.error.bind(null,n)}};const rl=function(){},GAe={trace:rl,debug:rl,log:rl,warn:rl,info:rl,error:rl};function CB(){return jt({},GAe)}function zAe(t,e){const r=self.console[t];return r?r.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):rl}function lM(t,e,r){return e[t]?e[t].bind(e):zAe(t,r)}const TB=CB();function WAe(t,e,r){const n=CB();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(s=>{n[s]=lM(s,t,r)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return CB()}i.forEach(s=>{TB[s]=lM(s,t)})}else jt(TB,n);return n}const Nt=TB;function tc(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function YAe(t){return typeof self<"u"&&t===self.ManagedMediaSource}function kV(t,e){const r=Object.keys(t),n=Object.keys(e),i=r.length,s=n.length;return!i||!s||i===s&&!r.some(a=>n.indexOf(a)===-1)}function bi(t,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(t);if(e){const d=u.indexOf("\0");return d!==-1?u.substring(0,d):u}return u.replace(/\0/g,"")}const r=t.length;let n,i,s,a="",o=0;for(;o<r;){if(n=t[o++],n===0&&e)return a;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=t[o++],a+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=t[o++],s=t[o++],a+=String.fromCharCode((n&15)<<12|(i&63)<<6|(s&63)<<0);break}}return a}function nn(t){let e="";for(let r=0;r<t.length;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function LV(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function qAe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cS={exports:{}},cM;function XAe(){return cM||(cM=1,function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,d){if(d=d||{},l=l.trim(),u=u.trim(),!u){if(!d.alwaysNormalize)return l;var A=o.parseURL(l);if(!A)throw new Error("Error trying to parse base URL.");return A.path=o.normalizePath(A.path),o.buildURLFromParts(A)}var f=o.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return d.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):u;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var m=i.exec(h.path);h.netLoc=m[1],h.path=m[2]}h.netLoc&&!h.path&&(h.path="/");var p={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(p.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)p.path=h.path,f.params||(p.params=h.params,f.query||(p.query=h.query));else{var g=h.path,x=g.substring(0,g.lastIndexOf("/")+1)+f.path;p.path=o.normalizePath(x)}return p.path===null&&(p.path=d.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(p)},parseURL:function(l){var u=n.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()}(cS)),cS.exports}var XI=XAe();class ZI{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Mt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class jV{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,JAe(this,"stats")}setByteRange(e,r){const n=e.split("@",2);let i;n.length===1?i=(r==null?void 0:r.byteRangeEndOffset)||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Mt.AUDIO]:null,[Mt.VIDEO]:null,[Mt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new ZI),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=XI.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Mt.AUDIO]=null,e[Mt.VIDEO]=null,e[Mt.AUDIOVIDEO]=null}}function vr(t){return t.sn!=="initSegment"}class uS extends jV{constructor(e,r){super(r),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],r=this.byteRange[1];if(Te(e)&&Te(r))return r-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:r}=this;if(!r||r.NONE)return null;if(r.identity)this._decryptdata||(this._decryptdata=r.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(r);if(n.length===1){const i=this._decryptdata=r[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,r))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Te(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var r;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(r=this.levelkeys[n[0]])!=null&&r.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Te(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return vr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const r=this.levelkeys;if(r){var n;const i=r[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,r))}}abortRequests(){var e,r;(e=this.loader)==null||e.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(e,r,n,i,s,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:r,endPTS:n,startDTS:i,endDTS:s,partial:a};return}l.startPTS=Math.min(l.startPTS,r),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,s)}}class ZAe extends jV{constructor(e,r,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=r,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function MV(t,e){const r=Object.getPrototypeOf(t);if(r){const n=Object.getOwnPropertyDescriptor(r,e);return n||MV(r,e)}}function JAe(t,e){const r=MV(t,e);r&&(r.enumerable=!0,Object.defineProperty(t,e,r))}const uM=Math.pow(2,32)-1,efe=[].push,DV={video:1,audio:2,id3:3,text:4};function Rr(t){return String.fromCharCode.apply(null,t)}function OV(t,e){const r=t[e]<<8|t[e+1];return r<0?65536+r:r}function Ye(t,e){const r=FV(t,e);return r<0?4294967296+r:r}function dM(t,e){let r=Ye(t,e);return r*=Math.pow(2,32),r+=Ye(t,e+4),r}function FV(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function tfe(t){const e=t.byteLength;for(let r=0;r<e;){const n=Ye(t,r);if(n>8&&t[r+4]===109&&t[r+5]===111&&t[r+6]===111&&t[r+7]===102)return!0;r=n>1?r+n:e}return!1}function nt(t,e){const r=[];if(!e.length)return r;const n=t.byteLength;for(let i=0;i<n;){const s=Ye(t,i),a=Rr(t.subarray(i+4,i+8)),o=s>1?i+s:n;if(a===e[0])if(e.length===1)r.push(t.subarray(i+8,o));else{const l=nt(t.subarray(i+8,o),e.slice(1));l.length&&efe.apply(r,l)}i=o}return r}function rfe(t){const e=[],r=t[0];let n=8;const i=Ye(t,n);n+=4;let s=0,a=0;r===0?(s=Ye(t,n),a=Ye(t,n+4),n+=8):(s=dM(t,n),a=dM(t,n+8),n+=16),n+=2;let o=t.length+a;const l=OV(t,n);n+=2;for(let u=0;u<l;u++){let d=n;const A=Ye(t,d);d+=4;const f=A&2147483647;if((A&2147483648)>>>31===1)return Nt.warn("SIDX has hierarchical references (not supported)"),null;const m=Ye(t,d);d+=4,e.push({referenceSize:f,subsegmentDuration:m,info:{duration:m/i,start:o,end:o+f-1}}),o+=f,d+=4,n=d}return{earliestPresentationTime:s,timescale:i,version:r,referencesCount:l,references:e}}function UV(t){const e=[],r=nt(t,["moov","trak"]);for(let i=0;i<r.length;i++){const s=r[i],a=nt(s,["tkhd"])[0];if(a){let o=a[0];const l=Ye(a,o===0?12:20),u=nt(s,["mdia","mdhd"])[0];if(u){o=u[0];const d=Ye(u,o===0?12:20),A=nt(s,["mdia","hdlr"])[0];if(A){const f=Rr(A.subarray(8,12)),h={soun:Mt.AUDIO,vide:Mt.VIDEO}[f],m=nt(s,["mdia","minf","stbl","stsd"])[0],p=nfe(m);h?(e[l]={timescale:d,type:h,stsd:p},e[h]=Bt({timescale:d,id:l},p)):e[l]={timescale:d,type:f,stsd:p}}}}}return nt(t,["moov","mvex","trex"]).forEach(i=>{const s=Ye(i,4),a=e[s];a&&(a.default={duration:Ye(i,12),flags:Ye(i,20)})}),e}function nfe(t){const e=t.subarray(8),r=e.subarray(86),n=Rr(e.subarray(4,8));let i=n,s;const a=n==="enca"||n==="encv";if(a){const u=nt(e,[n])[0].subarray(n==="enca"?28:78);nt(u,["sinf"]).forEach(A=>{const f=nt(A,["schm"])[0];if(f){const h=Rr(f.subarray(4,8));if(h==="cbcs"||h==="cenc"){const m=nt(A,["frma"])[0];m&&(i=Rr(m))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const l=nt(r,["avcC"])[0];l&&l.length>3&&(i+="."+u0(l[1])+u0(l[2])+u0(l[3]),s=c0(o==="avc1"?"dva1":"dvav",r));break}case"mp4a":{const l=nt(e,[n])[0],u=nt(l.subarray(28),["esds"])[0];if(u&&u.length>7){let d=4;if(u[d++]!==3)break;d=dS(u,d),d+=2;const A=u[d++];if(A&128&&(d+=2),A&64&&(d+=u[d++]),u[d++]!==4)break;d=dS(u,d);const f=u[d++];if(f===64)i+="."+u0(f);else break;if(d+=12,u[d++]!==5)break;d=dS(u,d);const h=u[d++];let m=(h&248)>>3;m===31&&(m+=1+((h&7)<<3)+((u[d]&224)>>5)),i+="."+m}break}case"hvc1":case"hev1":{const l=nt(r,["hvcC"])[0];if(l&&l.length>12){const u=l[1],d=["","A","B","C"][u>>6],A=u&31,f=Ye(l,2),h=(u&32)>>5?"H":"L",m=l[12],p=l.subarray(6,12);i+="."+d+A,i+="."+ife(f).toString(16).toUpperCase(),i+="."+h+m;let g="";for(let x=p.length;x--;){const v=p[x];(v||g)&&(g="."+v.toString(16).toUpperCase()+g)}i+=g}s=c0(o=="hev1"?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=c0(i,r)||i;break}case"vp09":{const l=nt(r,["vpcC"])[0];if(l&&l.length>6){const u=l[4],d=l[5],A=l[6]>>4&15;i+="."+zs(u)+"."+zs(d)+"."+zs(A)}break}case"av01":{const l=nt(r,["av1C"])[0];if(l&&l.length>2){const u=l[1]>>>5,d=l[1]&31,A=l[2]>>>7?"H":"M",f=(l[2]&64)>>6,h=(l[2]&32)>>5,m=u===2&&f?h?12:10:f?10:8,p=(l[2]&16)>>4,g=(l[2]&8)>>3,x=(l[2]&4)>>2,v=l[2]&3;i+="."+u+"."+zs(d)+A+"."+zs(m)+"."+p+"."+g+x+v+"."+zs(1)+"."+zs(1)+"."+zs(1)+"."+0,s=c0("dav1",r)}break}}return{codec:i,encrypted:a,supplemental:s}}function c0(t,e){const r=nt(e,["dvvC"]),n=r.length?r[0]:nt(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,s=n[2]<<5&32|n[3]>>3&31;return t+"."+zs(i)+"."+zs(s)}}function ife(t){let e=0;for(let r=0;r<32;r++)e|=(t>>r&1)<<31-r;return e>>>0}function dS(t,e){const r=e+5;for(;t[e++]&128&&e<r;);return e}function u0(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function zs(t){return(t<10?"0":"")+t}function sfe(t,e){if(!t||!e)return;const r=e.keyId;r&&e.isCommonEncryption&&$V(t,(n,i)=>{const s=n.subarray(8,24);s.some(a=>a!==0)||(Nt.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${nn(s)} -> ${nn(r)}`),n.set(r,8))})}function afe(t){const e=[];return $V(t,r=>e.push(r.subarray(8,24))),e}function $V(t,e){nt(t,["moov","trak"]).forEach(n=>{const i=nt(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const s=i.subarray(8);let a=nt(s,["enca"]);const o=a.length>0;o||(a=nt(s,["encv"])),a.forEach(l=>{const u=o?l.subarray(28):l.subarray(78);nt(u,["sinf"]).forEach(A=>{const f=QV(A);f&&e(f,o)})})})}function QV(t){const e=nt(t,["schm"])[0];if(e){const r=Rr(e.subarray(4,8));if(r==="cbcs"||r==="cenc"){const n=nt(t,["schi","tenc"])[0];if(n)return n}}}function ofe(t,e,r){const n={},i=nt(t,["moof","traf"]);for(let s=0;s<i.length;s++){const a=i[s],o=nt(a,["tfhd"])[0],l=Ye(o,4),u=e[l];if(!u)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type});const d=n[l],A=nt(a,["tfdt"])[0];if(A){const y=A[0];let w=Ye(A,4);y===1&&(w===uM?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(w*=uM+1,w+=Ye(A,8))),Te(w)&&(!Te(d.start)||w<d.start)&&(d.start=w)}const f=u.default,h=Ye(o,0)|(f==null?void 0:f.flags);let m=(f==null?void 0:f.duration)||0;h&8&&(h&2?m=Ye(o,12):m=Ye(o,8));const p=nt(a,["trun"]);let g=d.start||0,x=0,v=m;for(let y=0;y<p.length;y++){const w=p[y],b=Ye(w,4),S=d.sampleCount;d.sampleCount+=b;const C=w[3]&1,T=w[3]&4,B=w[2]&1,_=w[2]&2,I=w[2]&4,L=w[2]&8;let N=8,R=b;for(C&&(N+=4),T&&b&&(!(w[N+1]&1)&&d.keyFrameIndex===void 0&&(d.keyFrameIndex=S),N+=4,B?(v=Ye(w,N),N+=4):v=m,_&&(N+=4),L&&(N+=4),g+=v,x+=v,R--);R--;)B?(v=Ye(w,N),N+=4):v=m,_&&(N+=4),I&&(w[N+1]&1||d.keyFrameIndex===void 0&&(d.keyFrameIndex=d.sampleCount-(R+1),d.keyFrameStart=g),N+=4),L&&(N+=4),g+=v,x+=v;!x&&m&&(x+=m*b)}d.duration+=x}if(!Object.keys(n).some(s=>n[s].duration)){let s=1/0,a=0;const o=nt(t,["sidx"]);for(let l=0;l<o.length;l++){const u=rfe(o[l]);if(u!=null&&u.references){s=Math.min(s,u.earliestPresentationTime/u.timescale);const d=u.references.reduce((A,f)=>A+f.info.duration||0,0);a=Math.max(a,d+u.earliestPresentationTime/u.timescale)}}a&&Te(a)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=a*n[l].timescale-n[l].start)})}return n}function lfe(t){const e={valid:null,remainder:null},r=nt(t,["moof"]);if(r.length<2)return e.remainder=t,e;const n=r[r.length-1];return e.valid=t.slice(0,n.byteOffset-8),e.remainder=t.slice(n.byteOffset-8),e}function Yi(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function AM(t,e){const r=[],n=e.samples,i=e.timescale,s=e.id;let a=!1;return nt(n,["moof"]).map(l=>{const u=l.byteOffset-8;nt(l,["traf"]).map(A=>{const f=nt(A,["tfdt"]).map(h=>{const m=h[0];let p=Ye(h,4);return m===1&&(p*=Math.pow(2,32),p+=Ye(h,8)),p/i})[0];return f!==void 0&&(t=f),nt(A,["tfhd"]).map(h=>{const m=Ye(h,4),p=Ye(h,0)&16777215,g=(p&1)!==0,x=(p&2)!==0,v=(p&8)!==0;let y=0;const w=(p&16)!==0;let b=0;const S=(p&32)!==0;let C=8;m===s&&(g&&(C+=8),x&&(C+=4),v&&(y=Ye(h,C),C+=4),w&&(b=Ye(h,C),C+=4),S&&(C+=4),e.type==="video"&&(a=Ow(e.codec)),nt(A,["trun"]).map(T=>{const B=T[0],_=Ye(T,0)&16777215,I=(_&1)!==0;let L=0;const N=(_&4)!==0,R=(_&256)!==0;let M=0;const k=(_&512)!==0;let O=0;const j=(_&1024)!==0,D=(_&2048)!==0;let F=0;const $=Ye(T,4);let U=8;I&&(L=Ye(T,U),U+=4),N&&(U+=4);let K=L+u;for(let V=0;V<$;V++){if(R?(M=Ye(T,U),U+=4):M=y,k?(O=Ye(T,U),U+=4):O=b,j&&(U+=4),D&&(B===0?F=Ye(T,U):F=FV(T,U),U+=4),e.type===Mt.VIDEO){let q=0;for(;q<O;){const H=Ye(n,K);if(K+=4,cfe(a,n[K])){const z=n.subarray(K,K+H);JI(z,a?2:1,t+F/i,r)}K+=H,q+=H+4}}t+=M/i}}))})})}),r}function Ow(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function cfe(t,e){if(t){const r=e>>1&63;return r===39||r===40}else return(e&31)===6}function JI(t,e,r,n){const i=HV(t);let s=0;s+=e;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);const u=i.length-s;let d=s;if(o<u)s+=o;else if(o>u){Nt.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(a===4){if(i[d++]===181){const f=OV(i,d);if(d+=2,f===49){const h=Ye(i,d);if(d+=4,h===1195456820){const m=i[d++];if(m===3){const p=i[d++],g=31&p,x=64&p,v=x?2+g*3:0,y=new Uint8Array(v);if(x){y[0]=p;for(let w=1;w<v;w++)y[w]=i[d++]}n.push({type:m,payloadType:a,pts:r,bytes:y})}}}}}else if(a===5&&o>16){const A=[];for(let m=0;m<16;m++){const p=i[d++].toString(16);A.push(p.length==1?"0"+p:p),(m===3||m===5||m===7||m===9)&&A.push("-")}const f=o-16,h=new Uint8Array(f);for(let m=0;m<f;m++)h[m]=i[d++];n.push({payloadType:a,pts:r,uuid:A.join(""),userData:bi(h),userDataBytes:h})}}}function HV(t){const e=t.byteLength,r=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return t;const i=e-r.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===r[0]&&(a++,r.shift()),s[n]=t[a];return s}function ufe(t){const e=t[0];let r="",n="",i=0,s=0,a=0,o=0,l=0,u=0;if(e===0){for(;Rr(t.subarray(u,u+1))!=="\0";)r+=Rr(t.subarray(u,u+1)),u+=1;for(r+=Rr(t.subarray(u,u+1)),u+=1;Rr(t.subarray(u,u+1))!=="\0";)n+=Rr(t.subarray(u,u+1)),u+=1;n+=Rr(t.subarray(u,u+1)),u+=1,i=Ye(t,12),s=Ye(t,16),o=Ye(t,20),l=Ye(t,24),u=28}else if(e===1){u+=4,i=Ye(t,u),u+=4;const A=Ye(t,u);u+=4;const f=Ye(t,u);for(u+=4,a=2**32*A+f,UAe(a)||(a=Number.MAX_SAFE_INTEGER,Nt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ye(t,u),u+=4,l=Ye(t,u),u+=4;Rr(t.subarray(u,u+1))!=="\0";)r+=Rr(t.subarray(u,u+1)),u+=1;for(r+=Rr(t.subarray(u,u+1)),u+=1;Rr(t.subarray(u,u+1))!=="\0";)n+=Rr(t.subarray(u,u+1)),u+=1;n+=Rr(t.subarray(u,u+1)),u+=1}const d=t.subarray(u,t.byteLength);return{schemeIdUri:r,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:d}}function dfe(t,...e){const r=e.length;let n=8,i=r;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(t,4),i=0,n=8;i<r;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function Afe(t,e,r){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),dfe([112,115,115,104],new Uint8Array([n,0,0,0]),t,s,i,a,r)}function ffe(t){const e=[];if(t instanceof ArrayBuffer){const r=t.byteLength;let n=0;for(;n+32<r;){const i=new DataView(t,n),s=hfe(i);e.push(s),n+=s.size}}return e}function hfe(t){const e=t.getUint32(0),r=t.byteOffset,n=t.byteLength;if(n<e)return{offset:r,size:n};if(t.getUint32(4)!==1886614376)return{offset:r,size:e};const s=t.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:r,size:e};const a=t.buffer,o=nn(new Uint8Array(a,r+12,16));let l=null,u=null,d=0;if(s===0)d=28;else{const f=t.getUint32(28);if(!f||n<32+f*16)return{offset:r,size:e};l=[];for(let h=0;h<f;h++)l.push(new Uint8Array(a,r+32+h*16,16));d=32+f*16}if(!d)return{offset:r,size:e};const A=t.getUint32(d);return e-32<A?{offset:r,size:e}:(u=new Uint8Array(a,r+d+4,A),{version:s,systemId:o,kids:l,data:u,offset:r,size:e})}const KV=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),DA={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function eP(t,e){const r=DA[e];return!!r&&!!r[t.slice(0,4)]}function Zp(t,e,r=!0){return!t.split(",").some(n=>!tP(n,e,r))}function tP(t,e,r=!0){var n;const i=tc(r);return(n=i==null?void 0:i.isTypeSupported(Jp(t,e)))!=null?n:!1}function Jp(t,e){return`${e}/mp4;codecs=${t}`}function fM(t){if(t){const e=t.substring(0,4);return DA.video[e]}return 2}function ay(t){const e=KV();return t.split(",").reduce((r,n)=>{const s=e&&Ow(n)?9:DA.video[n];return s?(s*2+r)/(r?3:2):(DA.audio[n]+r)/(r?2:1)},0)}const AS={};function pfe(t,e=!0){if(AS[t])return AS[t];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<r.length;i++){var n;if(tP(r[i],"audio",e))return AS[t]=r[i],r[i];if(r[i]==="mp3"&&(n=tc(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return t}const mfe=/flac|opus|mp4a\.40\.34/i;function oy(t,e=!0){return t.replace(mfe,r=>pfe(r.toLowerCase(),e))}function gfe(t,e){const r=[];if(t){const n=t.split(",");for(let i=0;i<n.length;i++)eP(n[i],"video")||r.push(n[i])}return e&&r.push(e),r.join(",")}function Xx(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(hM(t,"audio")||hM(t,"video")))return t;if(e){const r=e.split(",");if(r.length>1){if(t){for(let n=r.length;n--;)if(r[n].substring(0,4)===t.substring(0,4))return r[n]}return r[0]}}return e||t}function hM(t,e){return eP(t,e)&&tP(t,e)}function xfe(t){const e=t.split(",");for(let r=0;r<e.length;r++){const n=e[r].split(".");n.length>2&&n[0]==="avc1"&&(e[r]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function vfe(t){if(t.startsWith("av01.")){const e=t.split("."),r=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=r[n-4];return e.join(".")}return t}function pM(t){const e=tc(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function BB(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const yfe={supported:!0,powerEfficient:!0,smooth:!0},bfe={supported:!1,smooth:!1,powerEfficient:!1},VV={supported:!0,configurations:[],decodingInfoResults:[yfe]};function GV(t,e){return{supported:!1,configurations:e,decodingInfoResults:[bfe],error:t}}function wfe(t,e,r,n,i,s){const a=t.videoCodec,o=t.audioCodec?t.audioGroups:null,l=s==null?void 0:s.audioCodec,u=s==null?void 0:s.channels,d=u?parseInt(u):l?1/0:2;let A=null;if(o!=null&&o.length)try{o.length===1&&o[0]?A=e.groups[o[0]].channels:A=o.reduce((f,h)=>{if(h){const m=e.groups[h];if(!m)throw new Error(`Audio track group ${h} not found`);Object.keys(m.channels).forEach(p=>{f[p]=(f[p]||0)+m.channels[p]})}return f},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(f=>Ow(f))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(n,30)||t.videoRange!=="SDR"&&t.videoRange!==r||t.bitrate>Math.max(i,8e6))||!!A&&Te(d)&&Object.keys(A).some(f=>parseInt(f)>d)}function zV(t,e,r,n={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!r)return Promise.resolve(VV);const s=[],a=Efe(t),o=a.length,l=Sfe(t,e,o>0),u=l.length;for(let d=o||1*u||1;d--;){const A={type:"media-source"};if(o&&(A.video=a[d%o]),u){A.audio=l[d%u];const f=A.audio.bitrate;A.video&&f&&(A.video.bitrate-=f)}s.push(A)}if(i){const d=navigator.userAgent;if(i.split(",").some(A=>Ow(A))&&KV())return Promise.resolve(GV(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${d})`),s))}return Promise.all(s.map(d=>{const A=Tfe(d);return n[A]||(n[A]=r.decodingInfo(d))})).then(d=>({supported:!d.some(A=>!A.supported),configurations:s,decodingInfoResults:d})).catch(d=>({supported:!1,configurations:s,decodingInfoResults:[],error:d}))}function Efe(t){var e;const r=(e=t.videoCodec)==null?void 0:e.split(","),n=WV(t),i=t.width||640,s=t.height||480,a=t.frameRate||30,o=t.videoRange.toLowerCase();return r?r.map(l=>{const u={contentType:Jp(vfe(l),"video"),width:i,height:s,bitrate:n,framerate:a};return o!=="sdr"&&(u.transferFunction=o),u}):[]}function Sfe(t,e,r){var n;const i=(n=t.audioCodec)==null?void 0:n.split(","),s=WV(t);return i&&t.audioGroups?t.audioGroups.reduce((a,o)=>{var l;const u=o?(l=e.groups[o])==null?void 0:l.tracks:null;return u?u.reduce((d,A)=>{if(A.groupId===o){const f=parseFloat(A.channels||"");i.forEach(h=>{const m={contentType:Jp(h,"audio"),bitrate:r?Cfe(h,s):s};f&&(m.channels=""+f),d.push(m)})}return d},a):a},[]):[]}function Cfe(t,e){if(e<=1)return 1;let r=128e3;return t==="ec-3"?r=768e3:t==="ac-3"&&(r=64e4),Math.min(e/2,r)}function WV(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function Tfe(t){let e="";const{audio:r,video:n}=t;if(n){const i=BB(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(r){const i=BB(r.contentType);e+=`${n?"_":""}${i}_c${r.channels}`}return e}const _B=["NONE","TYPE-0","TYPE-1",null];function Bfe(t){return _B.indexOf(t)>-1}const ly=["SDR","PQ","HLG"];function _fe(t){return!!t&&ly.indexOf(t)>-1}var Zx={No:"",Yes:"YES",v2:"v2"};function mM(t){const{canSkipUntil:e,canSkipDateRanges:r,age:n}=t,i=n<e/2;return e&&i?r?Zx.v2:Zx.Yes:Zx.No}class gM{constructor(e,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=r,this.skip=n}addDirectives(e){const r=new self.URL(e);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class em{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var r;this.supplemental=e.supplemental;const n=(r=e.supplemental)==null?void 0:r.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return xM(this._audioGroups,e)}hasSubtitleGroup(e){return xM(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,r){if(r){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(r)===-1&&n.push(r)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(r)===-1&&n.push(r)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function xM(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Nfe(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function Ife(t,e){let r=!1,n=[];if(t&&(r=t!=="SDR",n=[t]),e){n=e.allowedVideoRanges||ly.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;r=e.preferHDR!==void 0?e.preferHDR:i&&Nfe(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}const Pfe=t=>{const e=new WeakSet;return(r,n)=>{if(t&&(n=t(r,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Ft=(t,e)=>JSON.stringify(t,Pfe(e));function Rfe(t,e,r,n,i){const s=Object.keys(t),a=n==null?void 0:n.channels,o=n==null?void 0:n.audioCodec,l=i==null?void 0:i.videoCodec,u=a&&parseInt(a)===2;let d=!1,A=!1,f=1/0,h=1/0,m=1/0,p=1/0,g=0,x=[];const{preferHDR:v,allowedVideoRanges:y}=Ife(e,i);for(let T=s.length;T--;){const B=t[s[T]];d||(d=B.channels[2]>0),f=Math.min(f,B.minHeight),h=Math.min(h,B.minFramerate),m=Math.min(m,B.minBitrate),y.filter(I=>B.videoRanges[I]>0).length>0&&(A=!0)}f=Te(f)?f:0,h=Te(h)?h:0;const w=Math.max(1080,f),b=Math.max(30,h);m=Te(m)?m:r,r=Math.max(m,r),A||(e=void 0);const S=s.length>1;return{codecSet:s.reduce((T,B)=>{const _=t[B];if(B===T)return T;if(x=A?y.filter(I=>_.videoRanges[I]>0):[],S){if(_.minBitrate>r)return Us(B,`min bitrate of ${_.minBitrate} > current estimate of ${r}`),T;if(!_.hasDefaultAudio)return Us(B,"no renditions with default or auto-select sound found"),T;if(o&&B.indexOf(o.substring(0,4))%5!==0)return Us(B,`audio codec preference "${o}" not found`),T;if(a&&!u){if(!_.channels[a])return Us(B,`no renditions with ${a} channel sound found (channels options: ${Object.keys(_.channels)})`),T}else if((!o||u)&&d&&_.channels[2]===0)return Us(B,"no renditions with stereo sound found"),T;if(_.minHeight>w)return Us(B,`min resolution of ${_.minHeight} > maximum of ${w}`),T;if(_.minFramerate>b)return Us(B,`min framerate of ${_.minFramerate} > maximum of ${b}`),T;if(!x.some(I=>_.videoRanges[I]>0))return Us(B,`no variants with VIDEO-RANGE of ${Ft(x)} found`),T;if(l&&B.indexOf(l.substring(0,4))%5!==0)return Us(B,`video codec preference "${l}" not found`),T;if(_.maxScore<g)return Us(B,`max score of ${_.maxScore} < selected max of ${g}`),T}return T&&(ay(B)>=ay(T)||_.fragmentError>t[T].fragmentError)?T:(p=_.minIndex,g=_.maxScore,B)},void 0),videoRanges:x,preferHDR:v,minFramerate:h,minBitrate:m,minIndex:p}}function Us(t,e){Nt.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function YV(t){return t.reduce((e,r)=>{let n=e.groups[r.groupId];n||(n=e.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(r);const i=r.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||r.default,n.hasAutoSelect=n.hasAutoSelect||r.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function kfe(t,e,r,n){return t.slice(r,n+1).reduce((i,s,a)=>{if(!s.codecSet)return i;const o=s.audioGroups;let l=i[s.codecSet];l||(i[s.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,s.bitrate);const u=Math.min(s.height,s.width);return l.minHeight=Math.min(l.minHeight,u),l.minFramerate=Math.min(l.minFramerate,s.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,s.score),l.fragmentError+=s.fragmentError,l.videoRanges[s.videoRange]=(l.videoRanges[s.videoRange]||0)+1,o&&o.forEach(d=>{if(!d)return;const A=e.groups[d];A&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?A.hasDefault:A.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(A.channels).forEach(f=>{l.channels[f]=(l.channels[f]||0)+A.channels[f]}))}),i},{})}function vM(t){if(!t)return t;const{lang:e,assocLang:r,characteristics:n,channels:i,audioCodec:s}=t;return{lang:e,assocLang:r,characteristics:n,channels:i,audioCodec:s}}function sa(t,e,r){if("attrs"in t){const n=e.indexOf(t);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(ou(t,i,r))return n}return-1}function ou(t,e,r){const{groupId:n,name:i,lang:s,assocLang:a,default:o}=t,l=t.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(s===void 0||Lfe(s,e.lang))&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||jfe(t.characteristics||"",e.characteristics))&&(r===void 0||r(t,e))}function Lfe(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function jfe(t,e=""){const r=t.split(","),n=e.split(",");return r.length===n.length&&!r.some(i=>n.indexOf(i)===-1)}function Ic(t,e){const{audioCodec:r,channels:n}=t;return(r===void 0||(e.audioCodec||"").substring(0,4)===r.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function Mfe(t,e,r,n,i){const s=e[n],o=e.reduce((f,h,m)=>{const p=h.uri;return(f[p]||(f[p]=[])).push(m),f},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=s.videoRange,u=s.frameRate,d=s.codecSet.substring(0,4),A=yM(e,n,f=>{if(f.videoRange!==l||f.frameRate!==u||f.codecSet.substring(0,4)!==d)return!1;const h=f.audioGroups,m=r.filter(p=>!h||h.indexOf(p.groupId)!==-1);return sa(t,m,i)>-1});return A>-1?A:yM(e,n,f=>{const h=f.audioGroups,m=r.filter(p=>!h||h.indexOf(p.groupId)!==-1);return sa(t,m,i)>-1})}function yM(t,e,r){for(let n=e;n>-1;n--)if(r(t[n]))return n;for(let n=e+1;n<t.length;n++)if(r(t[n]))return n;return-1}function cy(t,e){var r;return!!t&&t!==((r=e.loadLevelObj)==null?void 0:r.uri)}class Dfe extends Zi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=r=>{var n;const{fragCurrent:i,partCurrent:s,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!i||!l)return;const u=performance.now(),d=s?s.stats:i.stats,A=s?s.duration:i.duration,f=u-d.loading.start,h=a.minAutoLevel,m=i.level,p=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||m<=h){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const g=p>-1&&p!==m,x=!!r||g;if(!x&&(l.paused||!l.playbackRate||!l.readyState))return;const v=a.mainForwardBufferInfo;if(!x&&v===null)return;const y=this.bwEstimator.getEstimateTTFB(),w=Math.abs(l.playbackRate);if(f<=Math.max(y,1e3*(A/(w*2))))return;const b=v?v.len/w:0,S=d.loading.first?d.loading.first-d.loading.start:-1,C=d.loaded&&S>-1,T=this.getBwEstimate(),B=a.levels,_=B[m],I=Math.max(d.loaded,Math.round(A*(i.bitrate||_.averageBitrate)/8));let L=C?f-S:f;L<1&&C&&(L=Math.min(f,d.loaded*8/T));const N=C?d.loaded*1e3/L:0,R=y/1e3,M=N?(I-d.loaded)/N:I*8/T+R;if(M<=b)return;const k=N?N*8:T,O=((n=(r==null?void 0:r.details)||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,j=this.hls.config.abrBandWidthUpFactor;let D=Number.POSITIVE_INFINITY,F;for(F=m-1;F>h;F--){const V=B[F].maxBitrate,q=!B[F].details||O;if(D=this.getTimeToLoadFrag(R,k,A*V,q),D<Math.min(b,A+R))break}if(D>=M||D>A*10)return;C?this.bwEstimator.sample(f-Math.min(y,S),d.loaded):this.bwEstimator.sampleTTFB(f);const $=B[F].maxBitrate;this.getBwEstimate()*j>$&&this.resetEstimator($);const U=this.findBestLevel($,h,F,0,b,1,1);U>-1&&(F=U),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${m} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${b.toFixed(3)} s
      Estimated load time for current fragment: ${M.toFixed(3)} s
      Estimated load time for down switch fragment: ${D.toFixed(3)} s
      TTFB estimate: ${S|0} ms
      Current BW estimate: ${Te(T)?T|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${F} @ ${$|0} bps`),a.nextLoadLevel=a.nextAutoLevel=F,this.clearTimer();const K=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===F&&F>0){const V=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${F>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${V.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,F>h){let q=this.findBestLevel(this.hls.levels[h].bitrate,h,F,0,V,1,1);q===-1&&(q=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=q,this.resetEstimator(this.hls.levels[q].bitrate)}}};g||M>D*2?K():this.timer=self.setInterval(K,D*1e3),a.trigger(P.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new QAe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(P.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,r){const n=r.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=r.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,r){this.clearTimer()}onError(e,r){if(!r.fatal)switch(r.details){case Y.BUFFER_ADD_CODEC_ERROR:case Y.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Y.FRAG_LOAD_TIMEOUT:{const n=r.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),o=s?s.stats:n.stats,l=a-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const A=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(A,u),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,r,n,i){const s=e+n/r,a=i?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,r){const n=this.hls.config,{loading:i}=r.stats,s=i.end-i.first;Te(s)&&(this.lastLevelLoadSec=s/1e3),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(r.levelInfo)}onFragLoaded(e,{frag:r,part:n}){const i=n?n.stats:r.stats;if(r.type===ke.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:r.duration,a=this.hls.levels[r.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,l=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(r.bitrateTest){const s={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(P.FRAG_BUFFERED,s),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(e,r){const{frag:n,part:i}=r,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ke.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:r}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,r,e,0,i,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,r),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:r,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:s,minAutoLevel:a}=n,o=r?r.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let d=s.abrBandWidthFactor,A=s.abrBandWidthUpFactor;if(u){const g=this.findBestLevel(l,a,i,u,0,d,A);if(g>=0)return this.rebufferNotice=-1,g}let f=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!u){const g=this.bitrateTestDelay;g&&(f=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-g,this.info(`bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),d=A=1)}const h=this.findBestLevel(l,a,i,u,f,d,A);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const m=n.levels[a],p=n.loadLevelObj;return p&&(m==null?void 0:m.bitrate)<p.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,r=e.media;if(!r)return 1/0;const n=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,r,n,i,s,a,o){var l;const u=i+s,d=this.lastLoadedFragLevel,A=d===-1?this.hls.firstLevel:d,{fragCurrent:f,partCurrent:h}=this,{levels:m,allAudioTracks:p,loadLevel:g,config:x}=this.hls;if(m.length===1)return 0;const v=m[A],y=!!((l=this.hls.latestLevelDetails)!=null&&l.live),w=g===-1||d===-1;let b,S="SDR",C=(v==null?void 0:v.frameRate)||0;const{audioPreference:T,videoPreference:B}=x,_=this.audioTracksByGroup||(this.audioTracksByGroup=YV(p));let I=-1;if(w){if(this.firstSelection!==-1)return this.firstSelection;const k=this.codecTiers||(this.codecTiers=kfe(m,_,r,n)),O=Rfe(k,S,e,T,B),{codecSet:j,videoRanges:D,minFramerate:F,minBitrate:$,minIndex:U,preferHDR:K}=O;I=U,b=j,S=K?D[D.length-1]:D[0],C=F,e=Math.max(e,$),this.log(`picked start tier ${Ft(O)}`)}else b=v==null?void 0:v.codecSet,S=v==null?void 0:v.videoRange;const L=h?h.duration:f?f.duration:0,N=this.bwEstimator.getEstimateTTFB()/1e3,R=[];for(let k=n;k>=r;k--){var M;const O=m[k],j=k>A;if(!O)continue;if(x.useMediaCapabilities&&!O.supportedResult&&!O.supportedPromise){const q=navigator.mediaCapabilities;typeof(q==null?void 0:q.decodingInfo)=="function"&&wfe(O,_,S,C,e,T)?(O.supportedPromise=zV(O,_,q,this.supportedCache),O.supportedPromise.then(H=>{if(!this.hls)return;O.supportedResult=H;const z=this.hls.levels,ae=z.indexOf(O);H.error?this.warn(`MediaCapabilities decodingInfo error: "${H.error}" for level ${ae} ${Ft(H)}`):H.supported?H.decodingInfoResults.some(X=>X.smooth===!1||X.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${ae} not smooth or powerEfficient: ${Ft(H)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ae} ${Ft(H)}`),ae>-1&&z.length>1&&(this.log(`Removing unsupported level ${ae}`),this.hls.removeLevel(ae),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(H=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${H}`)})):O.supportedResult=VV}if((b&&O.codecSet!==b||S&&O.videoRange!==S||j&&C>O.frameRate||!j&&C>0&&C<O.frameRate||(M=O.supportedResult)!=null&&(M=M.decodingInfoResults)!=null&&M.some(q=>q.smooth===!1))&&(!w||k!==I)){R.push(k);continue}const D=O.details,F=(h?D==null?void 0:D.partTarget:D==null?void 0:D.averagetargetduration)||L;let $;j?$=o*e:$=a*e;const U=L&&i>=L*2&&s===0?O.averageBitrate:O.maxBitrate,K=this.getTimeToLoadFrag(N,$,U*F,D===void 0);if($>=U&&(k===d||O.loadError===0&&O.fragmentError===0)&&(K<=N||!Te(K)||y&&!this.bitrateTestDelay||K<u)){const q=this.forcedAutoLevel;return k!==g&&(q===-1||q!==g)&&(R.length&&this.trace(`Skipped level(s) ${R.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${m[R[0]].codecs}" ${m[R[0]].videoRange}; not compatible with "${b}" ${S}`),this.info(`switch candidate:${A}->${k} adjustedbw(${Math.round($)})-bitrate=${Math.round($-U)} ttfb:${N.toFixed(1)} avgDuration:${F.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${K.toFixed(1)} firstSelection:${w} codecSet:${O.codecSet} videoRange:${O.videoRange} hls.loadLevel:${g}`)),w&&(this.firstSelection=k),k}}return-1}set nextAutoLevel(e){const r=this.deriveNextAutoLevel(e);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}deriveNextAutoLevel(e){const{maxAutoLevel:r,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),r)}}const qV={search:function(t,e){let r=0,n=t.length-1,i=null,s=null;for(;r<=n;){i=(r+n)/2|0,s=t[i];const a=e(s);if(a>0)r=i+1;else if(a<0)n=i-1;else return s}return null}};function Ofe(t,e,r){if(e===null||!Array.isArray(t)||!t.length||!Te(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let s=0;s<t.length;++s){const a=t[s];if(Ufe(e,r,a))return a}return null}function Nu(t,e,r=0,n=0,i=.005){let s=null;if(t){s=e[1+t.sn-e[0].sn]||null;const o=t.endDTS-r;o>0&&o<15e-7&&(r+=15e-7),s&&t.level!==s.level&&s.end<=t.end&&(s=e[2+t.sn-e[0].sn]||null)}else r===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&bM(r,n,s)===0||Ffe(s,t,Math.min(i,n))))return s;const a=qV.search(e,bM.bind(null,r,n));return a&&(a!==t||!s)?a:s}function Ffe(t,e,r){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),r);return t.start<=n}return!1}function bM(t=0,e=0,r){if(r.start<=t&&r.start+r.duration>t)return 0;const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function Ufe(t,e,r){const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>t}function XV(t,e,r){if(t&&t.startCC<=e&&t.endCC>=e){let n=t.fragments;const{fragmentHint:i}=t;i&&(n=n.concat(i));let s;return qV.search(n,a=>a.cc<e?1:a.cc>e?-1:(s=a,a.end<=r?1:a.start>r?-1:0)),s||null}return null}function uy(t){switch(t.details){case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_TIMEOUT:case Y.LEVEL_LOAD_TIMEOUT:case Y.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ZV(t){return t.details.startsWith("key")}function JV(t){return ZV(t)&&!!t.frag&&!t.frag.decryptdata}function wM(t,e){const r=uy(e);return t.default[`${r?"timeout":"error"}Retry`]}function rP(t,e){const r=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function EM(t){return Bt(Bt({},t),{errorRetry:null,timeoutRetry:null})}function dy(t,e,r,n){if(!t)return!1;const i=n==null?void 0:n.code,s=e<t.maxNumRetry&&($fe(i)||!!r);return t.shouldRetry?t.shouldRetry(t,e,r,n,s):s}function $fe(t){return NB(t)||!!t&&(t<400||t>499)}function NB(t){return t===0&&navigator.onLine===!1}var tn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ii={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4,SwitchToSDR:8};class Qfe extends Zi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(P.ERROR,this.onError,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(P.ERROR,this.onError,this),e.off(P.ERROR,this.onErrorOut,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ke.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const r=this.hls,n=r.currentLevel;return(e=r.loadLevelObj)!=null&&e.details||n===-1?r.loadLevel:n}variantHasKey(e,r){if(e){var n;if((n=e.details)!=null&&n.hasKey(r))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(a=>i.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(r)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,r){var n;if(r.fatal)return;const i=this.hls,s=r.context;switch(r.details){case Y.FRAG_LOAD_ERROR:case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_ERROR:case Y.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case Y.FRAG_PARSING_ERROR:if((n=r.frag)!=null&&n.gap){r.errorAction=Jd();return}case Y.FRAG_GAP:case Y.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=tn.SendAlternateToPenaltyBox;return}case Y.LEVEL_EMPTY_ERROR:case Y.LEVEL_PARSING_ERROR:{var a;const l=r.parent===ke.MAIN?r.level:i.loadLevel;r.details===Y.LEVEL_EMPTY_ERROR&&((a=r.context)!=null&&(a=a.levelDetails)!=null&&a.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,l):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,l))}return;case Y.LEVEL_LOAD_ERROR:case Y.LEVEL_LOAD_TIMEOUT:typeof(s==null?void 0:s.level)=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,s.level));return;case Y.AUDIO_TRACK_LOAD_ERROR:case Y.AUDIO_TRACK_LOAD_TIMEOUT:case Y.SUBTITLE_LOAD_ERROR:case Y.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const l=i.loadLevelObj;if(l&&(s.type===at.AUDIO_TRACK&&l.hasAudioGroup(s.groupId)||s.type===at.SUBTITLE_TRACK&&l.hasSubtitleGroup(s.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,i.loadLevel),r.errorAction.action=tn.SendAlternateToPenaltyBox,r.errorAction.flags=ii.MoveAllAlternatesMatchingHost;return}}return;case Y.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:r.errorAction={action:tn.SendAlternateToPenaltyBox,flags:ii.MoveAllAlternatesMatchingHDCP};return;case Y.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Y.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Y.KEY_SYSTEM_NO_SESSION:r.errorAction={action:tn.SendAlternateToPenaltyBox,flags:ii.MoveAllAlternatesMatchingKey};return;case Y.BUFFER_ADD_CODEC_ERROR:case Y.REMUX_ALLOC_ERROR:case Y.BUFFER_APPEND_ERROR:if(!r.errorAction){var o;r.errorAction=this.getLevelSwitchAction(r,(o=r.level)!=null?o:i.loadLevel)}return;case Y.INTERNAL_EXCEPTION:case Y.BUFFER_APPENDING_ERROR:case Y.BUFFER_FULL_ERROR:case Y.LEVEL_SWITCH_ERROR:case Y.BUFFER_STALLED_ERROR:case Y.BUFFER_SEEK_OVER_HOLE:case Y.BUFFER_NUDGE_ON_STALL:r.errorAction=Jd();return}r.type===Ue.KEY_SYSTEM_ERROR&&(r.levelRetry=!1,r.errorAction=Jd())}getPlaylistRetryOrSwitchAction(e,r){const n=this.hls,i=wM(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(dy(i,s,uy(e),e.response))return{action:tn.RetryRequest,flags:ii.None,retryConfig:i,retryCount:s};const o=this.getLevelSwitchAction(e,r);return i&&(o.retryConfig=i,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const r=this.hls,n=this.getVariantLevelIndex(e.frag),i=r.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=r.config,o=wM(ZV(e)?a:s,e),l=r.levels.reduce((d,A)=>d+A.fragmentError,0);if(i&&(e.details!==Y.FRAG_GAP&&i.fragmentError++,!JV(e)&&dy(o,l,uy(e),e.response)))return{action:tn.RetryRequest,flags:ii.None,retryConfig:o,retryCount:l};const u=this.getLevelSwitchAction(e,n);return o&&(u.retryConfig=o,u.retryCount=l),u}getLevelSwitchAction(e,r){const n=this.hls;r==null&&(r=n.loadLevel);const i=this.hls.levels[r];if(i){var s,a;const u=e.details;i.loadError++,u===Y.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:A,loadLevel:f,minAutoLevel:h,maxAutoLevel:m}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const p=(s=e.frag)==null?void 0:s.type,x=(p===ke.AUDIO&&u===Y.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===Y.BUFFER_ADD_CODEC_ERROR||u===Y.BUFFER_APPEND_ERROR))&&A.some(({audioCodec:S})=>i.audioCodec!==S),y=e.sourceBufferName==="video"&&(u===Y.BUFFER_ADD_CODEC_ERROR||u===Y.BUFFER_APPEND_ERROR)&&A.some(({codecSet:S,audioCodec:C})=>i.codecSet!==S&&i.audioCodec===C),{type:w,groupId:b}=(a=e.context)!=null?a:{};for(let S=A.length;S--;){const C=(S+f)%A.length;if(C!==f&&C>=h&&C<=m&&A[C].loadError===0){var o,l;const T=A[C];if(u===Y.FRAG_GAP&&p===ke.MAIN&&e.frag){const B=A[C].details;if(B){const _=Nu(e.frag,B.fragments,e.frag.start);if(_!=null&&_.gap)continue}}else{if(w===at.AUDIO_TRACK&&T.hasAudioGroup(b)||w===at.SUBTITLE_TRACK&&T.hasSubtitleGroup(b))continue;if(p===ke.AUDIO&&(o=i.audioGroups)!=null&&o.some(B=>T.hasAudioGroup(B))||p===ke.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(B=>T.hasSubtitleGroup(B))||x&&i.audioCodec===T.audioCodec||y&&i.codecSet===T.codecSet||!x&&i.codecSet!==T.codecSet)continue}d=C;break}}if(d>-1&&n.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:tn.SendAlternateToPenaltyBox,flags:ii.None,nextAutoLevel:d}}return{action:tn.SendAlternateToPenaltyBox,flags:ii.MoveAllAlternatesMatchingHost}}onErrorOut(e,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case tn.DoNothing:break;case tn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==Y.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const r=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,s=n.nextAutoLevel;switch(i){case ii.None:this.switchLevel(e,s);break;case ii.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),u=r.levels[l],d=u==null?void 0:u.attrs["HDCP-LEVEL"];if(n.hdcpLevel=d,d==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(d){r.maxHdcpLevel=_B[_B.indexOf(d)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}}case ii.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const u=this.hls.levels,d=u.length;for(let f=d;f--;)if(this.variantHasKey(u[f],l)){var a,o;this.log(`Banned key found in level ${f} (${u[f].bitrate}bps) or audio group "${(a=u[f].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${nn(l.keyId||[])}`),u[f].fragmentError++,u[f].loadError++,this.log(`Removing level ${f} with key error (${e.error})`),this.hls.removeLevel(f)}const A=e.frag;if(this.hls.levels.length<d)n.resolved=!0;else if(A&&A.type!==ke.MAIN){const f=A.decryptdata;f&&!l.matches(f)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,s)}switchLevel(e,r){if(r!==void 0&&e.errorAction&&(this.warn(`switching to level ${r} after ${e.details}`),this.hls.nextAutoLevel=r,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Y.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=BB(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${s} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(s))}}}function Jd(t){const e={action:tn.DoNothing,flags:ii.None};return t&&(e.resolved=!0),e}var Lr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Hfe{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.BUFFER_APPENDED,this.onBufferAppended,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.BUFFER_APPENDED,this.onBufferAppended,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,r){const n=this.activePartLists[r];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,r)}getBufferedFrag(e,r){return this.getFragAtPos(e,r,!0)}getFragAtPos(e,r,n){const{fragments:i}=this,s=Object.keys(i);for(let a=s.length;a--;){const o=i[s[a]];if((o==null?void 0:o.body.type)===r&&(!n||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,r,n,i,s){this.timeRanges&&(this.timeRanges[e]=r);const a=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||s)){l.body.type===n&&this.removeFragment(l.body);return}const u=l.range[e];if(u){if(u.time.length===0){this.removeFragment(l.body);return}u.time.some(d=>{const A=!this.isTimeBuffered(d.startPTS,d.endPTS,r);return A&&this.removeFragment(l.body),A})}})}detectPartialFragments(e){const r=this.timeRanges;if(!r||e.frag.sn==="initSegment")return;const n=e.frag,i=rd(n),s=this.fragments[i];if(!s||s.buffered&&n.gap)return;const a=!n.relurl;Object.keys(r).forEach(o=>{const l=n.elementaryStreams[o];if(!l)return;const u=r[o],d=a||l.partial===!0;s.range[o]=this.getBufferedTimes(n,e.part,d,u)}),s.loaded=null,Object.keys(s.range).length?(this.bufferedEnd(s,n),d0(s)||this.removeParts(n.sn-1,n.type)):this.removeFragment(s.body)}bufferedEnd(e,r){e.buffered=!0,(e.body.endList=r.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,r){const n=this.activePartLists[r];n&&(this.activePartLists[r]=SM(n,i=>i.fragment.sn>=e))}fragBuffered(e,r){const n=rd(e);let i=this.fragments[n];!i&&r&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,r,n,i){const s={time:[],partial:n},a=e.start,o=e.end,l=e.minEndPTS||o,u=e.maxStartPTS||a;for(let d=0;d<i.length;d++){const A=i.start(d)-this.bufferPadding,f=i.end(d)+this.bufferPadding;if(u>=A&&l<=f){s.time.push({startPTS:Math.max(a,i.start(d)),endPTS:Math.min(o,i.end(d))});break}else if(a<f&&o>A){const h=Math.max(a,i.start(d)),m=Math.min(o,i.end(d));m>h&&(s.partial=!0,s.time.push({startPTS:h,endPTS:m}))}else if(o<=A)break}return s}getPartialFragment(e){let r=null,n,i,s,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(u=>{const d=l[u];d&&d0(d)&&(i=d.body.start-o,s=d.body.end+o,e>=i&&e<=s&&(n=Math.min(e-i,s-e),a<=n&&(r=d.body,a=n)))}),r}isEndListAppended(e){const r=this.endListFragments[e];return r!==void 0&&(r.buffered||d0(r))}getState(e){const r=rd(e),n=this.fragments[r];return n?n.buffered?d0(n)?Lr.PARTIAL:Lr.OK:Lr.APPENDING:Lr.NOT_LOADED}isTimeBuffered(e,r,n){let i,s;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=i&&r<=s)return!0;if(r<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,r){if(r.frag.sn==="initSegment"||r.frag.bitrateTest)return;const n=r.frag,i=r.part?null:r,s=rd(n);this.fragments[s]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,r){const{frag:n,part:i,timeRanges:s,type:a}=r;if(n.sn==="initSegment")return;const o=n.type;if(i){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(i)}this.timeRanges=s;const l=s[a];this.detectEvictedFragments(a,l,o,i)}onFragBuffered(e,r){this.detectPartialFragments(r)}hasFragment(e){const r=rd(e);return!!this.fragments[r]}hasFragments(e){const{fragments:r}=this,n=Object.keys(r);if(!e)return n.length>0;for(let i=n.length;i--;){const s=r[n[i]];if((s==null?void 0:s.body.type)===e)return!0}return!1}hasParts(e){var r;return!!((r=this.activePartLists[e])!=null&&r.length)}removeFragmentsInRange(e,r,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==n||i&&!l.gap||l.start<r&&l.end>e&&(o.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const r=rd(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=SM(n,s=>s.fragment.sn!==i)}delete this.fragments[r],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;r&&r.forEach(n=>n.clearElementaryStreamInfo())}}function d0(t){var e,r,n;return t.buffered&&!!(t.body.gap||(e=t.range.video)!=null&&e.partial||(r=t.range.audio)!=null&&r.partial||(n=t.range.audiovideo)!=null&&n.partial)}function rd(t){return`${t.type}_${t.level}_${t.sn}`}function SM(t,e){return t.filter(r=>{const n=e(r);return n||r.clearElementaryStreamInfo(),n})}var rc={cbc:0,ctr:1};class Kfe{constructor(e,r,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=r,this.aesMode=n}decrypt(e,r){switch(this.aesMode){case rc.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,e);case rc.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},r,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Vfe(t){const e=t.byteLength,r=e&&new DataView(t.buffer).getUint8(e-1);return r?t.slice(0,e-r):t}class Gfe{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const r=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=r.getUint32(i*4);return n}initTable(){const e=this.sBox,r=this.invSBox,n=this.subMix,i=n[0],s=n[1],a=n[2],o=n[3],l=this.invSubMix,u=l[0],d=l[1],A=l[2],f=l[3],h=new Uint32Array(256);let m=0,p=0,g=0;for(g=0;g<256;g++)g<128?h[g]=g<<1:h[g]=g<<1^283;for(g=0;g<256;g++){let x=p^p<<1^p<<2^p<<3^p<<4;x=x>>>8^x&255^99,e[m]=x,r[x]=m;const v=h[m],y=h[v],w=h[y];let b=h[x]*257^x*16843008;i[m]=b<<24|b>>>8,s[m]=b<<16|b>>>16,a[m]=b<<8|b>>>24,o[m]=b,b=w*16843009^y*65537^v*257^m*16843008,u[x]=b<<24|b>>>8,d[x]=b<<16|b>>>16,A[x]=b<<8|b>>>24,f[x]=b,m?(m=v^h[h[h[w^v]]],p^=h[h[p]]):m=p=1}}expandKey(e){const r=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<r.length&&n;)n=r[i]===this.key[i],i++;if(n)return;this.key=r;const s=this.keySize=r.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,l;const u=this.keySchedule=new Uint32Array(a),d=this.invKeySchedule=new Uint32Array(a),A=this.sBox,f=this.rcon,h=this.invSubMix,m=h[0],p=h[1],g=h[2],x=h[3];let v,y;for(o=0;o<a;o++){if(o<s){v=u[o]=r[o];continue}y=v,o%s===0?(y=y<<8|y>>>24,y=A[y>>>24]<<24|A[y>>>16&255]<<16|A[y>>>8&255]<<8|A[y&255],y^=f[o/s|0]<<24):s>6&&o%s===4&&(y=A[y>>>24]<<24|A[y>>>16&255]<<16|A[y>>>8&255]<<8|A[y&255]),u[o]=v=(u[o-s]^y)>>>0}for(l=0;l<a;l++)o=a-l,l&3?y=u[o]:y=u[o-4],l<4||o<=4?d[l]=y:d[l]=m[A[y>>>24]]^p[A[y>>>16&255]]^g[A[y>>>8&255]]^x[A[y&255]],d[l]=d[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,r,n){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],u=o[1],d=o[2],A=o[3],f=this.uint8ArrayToUint32Array_(n);let h=f[0],m=f[1],p=f[2],g=f[3];const x=new Int32Array(e),v=new Int32Array(x.length);let y,w,b,S,C,T,B,_,I,L,N,R,M,k;const O=this.networkToHostOrderSwap;for(;r<x.length;){for(I=O(x[r]),L=O(x[r+1]),N=O(x[r+2]),R=O(x[r+3]),C=I^s[0],T=R^s[1],B=N^s[2],_=L^s[3],M=4,k=1;k<i;k++)y=l[C>>>24]^u[T>>16&255]^d[B>>8&255]^A[_&255]^s[M],w=l[T>>>24]^u[B>>16&255]^d[_>>8&255]^A[C&255]^s[M+1],b=l[B>>>24]^u[_>>16&255]^d[C>>8&255]^A[T&255]^s[M+2],S=l[_>>>24]^u[C>>16&255]^d[T>>8&255]^A[B&255]^s[M+3],C=y,T=w,B=b,_=S,M=M+4;y=a[C>>>24]<<24^a[T>>16&255]<<16^a[B>>8&255]<<8^a[_&255]^s[M],w=a[T>>>24]<<24^a[B>>16&255]<<16^a[_>>8&255]<<8^a[C&255]^s[M+1],b=a[B>>>24]<<24^a[_>>16&255]<<16^a[C>>8&255]<<8^a[T&255]^s[M+2],S=a[_>>>24]<<24^a[C>>16&255]<<16^a[T>>8&255]<<8^a[B&255]^s[M+3],v[r]=O(y^h),v[r+1]=O(S^m),v[r+2]=O(b^p),v[r+3]=O(w^g),h=I,m=L,p=N,g=R,r=r+4}return v.buffer}}class zfe{constructor(e,r,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=r,this.aesMode=n}expandKey(){const e=Wfe(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Wfe(t){switch(t){case rc.cbc:return"AES-CBC";case rc.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const Yfe=16;class nP{constructor(e,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:r}=this;if(!e||r)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Vfe(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,r,n,i){return this.useSoftware?new Promise((s,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,r,n,i);const l=this.flush();l?s(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),r,n,i)}softwareDecrypt(e,r,n,i){const{currentIV:s,currentResult:a,remainderData:o}=this;if(i!==rc.cbc||r.byteLength!==16)return Nt.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Yi(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;s&&(n=s);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new Gfe),u.expandKey(r);const d=a;return this.currentResult=u.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,d||null}webCryptoDecrypt(e,r,n,i){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,r,n,i));this.key=r,this.fastAesKey=new zfe(this.subtle,r,i)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Kfe(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Nt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,r,n,i)))}onWebCryptoError(e,r,n,i){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,n,i);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let r=e;const n=e.length-e.length%Yfe;return n!==e.length&&(r=e.slice(0,n),this.remainderData=e.slice(n)),r}logOnce(e){this.logEnabled&&(Nt.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const CM=Math.pow(2,17);class qfe{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,r){const n=e.url;if(!n)return Promise.reject(new Ga({type:Ue.NETWORK_ERROR,details:Y.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(BM(e));return}else e.gap=!1;const u=this.loader=s?new s(i):new a(i),d=TM(e);e.loader=u;const A=EM(i.fragLoadPolicy.default),f={loadPolicy:A,timeout:A.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:CM};e.stats=u.stats;const h={onSuccess:(m,p,g,x)=>{this.resetLoader(e,u);let v=m.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(v.slice(0,16)),v=v.slice(16)),o({frag:e,part:null,payload:v,networkDetails:x})},onError:(m,p,g,x)=>{this.resetLoader(e,u),l(new Ga({type:Ue.NETWORK_ERROR,details:Y.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Bt({url:n,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:g,stats:x}))},onAbort:(m,p,g)=>{this.resetLoader(e,u),l(new Ga({type:Ue.NETWORK_ERROR,details:Y.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:m}))},onTimeout:(m,p,g)=>{this.resetLoader(e,u),l(new Ga({type:Ue.NETWORK_ERROR,details:Y.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:m}))}};r&&(h.onProgress=(m,p,g,x)=>r({frag:e,part:null,payload:g,networkDetails:x})),u.load(d,f,h)})}loadPart(e,r,n){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||r.gap){l(BM(e,r));return}const u=this.loader=s?new s(i):new a(i),d=TM(e,r);e.loader=u;const A=EM(i.fragLoadPolicy.default),f={loadPolicy:A,timeout:A.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:CM};r.stats=u.stats,u.load(d,f,{onSuccess:(h,m,p,g)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,r);const x={frag:e,part:r,payload:h.data,networkDetails:g};n(x),o(x)},onError:(h,m,p,g)=>{this.resetLoader(e,u),l(new Ga({type:Ue.NETWORK_ERROR,details:Y.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:Bt({url:d.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:p,stats:g}))},onAbort:(h,m,p)=>{e.stats.aborted=r.stats.aborted,this.resetLoader(e,u),l(new Ga({type:Ue.NETWORK_ERROR,details:Y.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,error:new Error("Aborted"),networkDetails:p,stats:h}))},onTimeout:(h,m,p)=>{this.resetLoader(e,u),l(new Ga({type:Ue.NETWORK_ERROR,details:Y.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:p,stats:h}))}})})}updateStatsFromPart(e,r){const n=e.stats,i=r.stats,s=i.total;if(n.loaded+=i.loaded,s){const l=Math.round(e.duration/r.duration),u=Math.min(Math.round(n.loaded/s),l),A=(l-u)*Math.round(n.loaded/u);n.total=n.loaded+A}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function TM(t,e=null){const r=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(Te(i)&&Te(s)){var a;let o=i,l=s;if(t.sn==="initSegment"&&Xfe((a=t.decryptdata)==null?void 0:a.method)){const u=s-i;u%16&&(l=s+(16-u%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=l}return n}function BM(t,e){const r=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:Ue.MEDIA_ERROR,details:Y.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new Ga(n)}function Xfe(t){return t==="AES-128"||t==="AES-256"}class Ga extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class eG extends Zi{constructor(e,r){super(e,r),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class iP{constructor(e,r,n,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=A0(),this.buffering={audio:A0(),video:A0(),audiovideo:A0()},this.level=e,this.sn=r,this.id=n,this.size=i,this.part=s,this.partial=a}}function A0(){return{start:0,executeStart:0,executeEnd:0,end:0}}const _M={length:0,start:()=>0,end:()=>0};class Xe{static isBuffered(e,r){if(e){const n=Xe.getBuffered(e);for(let i=n.length;i--;)if(r>=n.start(i)&&r<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const r=Xe.getBuffered(e);return Xe.timeRangesToArray(r)}return[]}static timeRangesToArray(e){const r=[];for(let n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r}static bufferInfo(e,r,n){if(e){const i=Xe.bufferedRanges(e);if(i.length)return Xe.bufferedInfo(i,r,n)}return{len:0,start:r,end:r,bufferedIndex:-1}}static bufferedInfo(e,r,n){r=Math.max(0,r),e.length>1&&e.sort((d,A)=>d.start-A.start||A.end-d.end);let i=-1,s=[];if(n)for(let d=0;d<e.length;d++){r>=e[d].start&&r<=e[d].end&&(i=d);const A=s.length;if(A){const f=s[A-1].end;e[d].start-f<n?e[d].end>f&&(s[A-1].end=e[d].end):s.push(e[d])}else s.push(e[d])}else s=e;let a=0,o,l=r,u=r;for(let d=0;d<s.length;d++){const A=s[d].start,f=s[d].end;if(i===-1&&r>=A&&r<=f&&(i=d),r+n>=A&&r<f)l=A,u=f,a=u-r;else if(r+n<A){o=A;break}}return{len:a,start:l||0,end:u||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||_M}catch(r){return Nt.log("failed to get media.buffered",r),_M}}}const tG=/\{\$([a-zA-Z0-9-_]+)\}/g;function NM(t){return tG.test(t)}function IB(t,e){if(t.variableList!==null||t.hasVariableRefs){const r=t.variableList;return e.replace(tG,n=>{const i=n.substring(2,n.length-1),s=r==null?void 0:r[i];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function IM(t,e,r){let n=t.variableList;n||(t.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(r).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${r}"`)}catch(a){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function Zfe(t,e,r){const n=e.IMPORT;if(r&&n in r){let i=t.variableList;i||(t.variableList=i={}),i[n]=r[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const Jfe=/^(\d+)x(\d+)$/,PM=/(.+?)=(".*?"|.*?)(?:,|$)/g;class nr{constructor(e,r){typeof e=="string"&&(e=nr.parseAttrList(e,r)),jt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(e){if(this[e]){let r=(this[e]||"0x").slice(2);r=(r.length&1?"0":"")+r;const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,r){const n=this[e];return n?parseFloat(n):r}enumeratedString(e){return this[e]}enumeratedStringList(e,r){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,s)=>(i[s.toLowerCase()]=!0,i),r)}bool(e){return this[e]==="YES"}decimalResolution(e){const r=Jfe.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(e,r){let n;const i={},s='"';for(PM.lastIndex=0;(n=PM.exec(e))!==null;){const a=n[1].trim();let o=n[2];const l=o.indexOf(s)===0&&o.lastIndexOf(s)===o.length-1;let u=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(r&&(l||u))o=IB(r,o);else if(!u&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Nt.warn(`${e}: attribute ${a} is missing quotes`)}i[a]=o}return i}}const ehe="com.apple.hls.interstitial";function the(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function rhe(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class rG{constructor(e,r,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(r==null?void 0:r.tagAnchor)||null,this.tagOrder=(i=r==null?void 0:r.tagOrder)!=null?i:n,r){const s=r.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){Nt.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=jt(new nr({}),s,e)}if(this.attr=e,r?(this._startDate=r._startDate,this._cue=r._cue,this._endDate=r._endDate,this._dateAtEnd=r._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=(r==null?void 0:r.endDate)||new Date(this.attr["END-DATE"]);Te(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Nt.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const r=this.duration;return r!==null?this._dateAtEnd=new Date(this._startDate.getTime()+r*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Te(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===ehe}get isValid(){return!!this.id&&!this._badValueForSameId&&Te(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const nhe=10;class ihe{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!r||!this.live,this.advanced=this.endSN>e.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(r=>{let n=r.decryptdata;return n||(r.setKeyFormat(e.keyFormat),n=r.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Te(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||nhe}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const r=this.lastPartIndex;if(r!==-1){for(let n=e.length;n--;)if(e[n].index>r)return e[n].index;return r}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Ay(t,e){return t.length===e.length?!t.some((r,n)=>r!==e[n]):!1}function RM(t,e){return!t&&!e?!0:!t||!e?!1:Ay(t,e)}function eA(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function sP(t){switch(t){case"AES-128":case"AES-256":return rc.cbc;case"AES-256-CTR":return rc.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function aP(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function PB(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function she(t){const e=PB(t).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}function nG(t){const e=function(n,i,s){const a=n[i];n[i]=n[s],n[s]=a};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function iG(t){const e=t.split(":");let r=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(n.splice(-1,1),r=aP(a)):r=she(a)}}return r}const fy=typeof self<"u"?self:void 0;var ar={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},sn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Jx(t){switch(t){case sn.FAIRPLAY:return ar.FAIRPLAY;case sn.PLAYREADY:return ar.PLAYREADY;case sn.WIDEVINE:return ar.WIDEVINE;case sn.CLEARKEY:return ar.CLEARKEY}}function fS(t){switch(t){case ar.FAIRPLAY:return sn.FAIRPLAY;case ar.PLAYREADY:return sn.PLAYREADY;case ar.WIDEVINE:return sn.WIDEVINE;case ar.CLEARKEY:return sn.CLEARKEY}}function kh(t){const{drmSystems:e,widevineLicenseUrl:r}=t,n=e?[ar.FAIRPLAY,ar.WIDEVINE,ar.PLAYREADY,ar.CLEARKEY].filter(i=>!!e[i]):[];return!n[ar.WIDEVINE]&&r&&n.push(ar.WIDEVINE),n}const sG=function(t){return fy!=null&&(t=fy.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function ahe(t,e,r,n){let i;switch(t){case ar.FAIRPLAY:i=["cenc","sinf"];break;case ar.WIDEVINE:case ar.PLAYREADY:i=["cenc"];break;case ar.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return ohe(i,e,r,n)}function ohe(t,e,r,n){return[{initDataTypes:t,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function lhe(t){var e;return!!t&&(t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(r=>r==="persistent-license")))}function aG(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(e)),n=r.substring(r.indexOf("<"),r.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=aP(o).subarray(0,16);return nG(l),l}}return null}let nd={};class $l{static clearKeyUriToKeyIdMap(){nd={}}static setKeyIdForUri(e,r){nd[e]=r}static addKeyIdForUri(e){const r=Object.keys(nd).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,r),nd[e]=n,n}constructor(e,r,n,i=[1],s=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=r,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!eA(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(LV(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Ay(e.keyFormatVersions,this.keyFormatVersions)&&RM(e.iv,this.iv)&&RM(e.keyId,this.keyId)}isSupported(){if(this.method){if(eA(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case sn.FAIRPLAY:case sn.WIDEVINE:case sn.PLAYREADY:case sn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,r){if(!this.encrypted||!this.uri)return null;if(eA(this.method)){let s=this.iv;return s||(typeof e!="number"&&(Nt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=uhe(e)),new $l(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=nd[this.uri];if(s&&!Ay(this.keyId,s)&&$l.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=iG(this.uri);if(n)switch(this.keyFormat){case sn.WIDEVINE:if(this.pssh=n,!this.keyId){const s=ffe(n.buffer);if(s.length){var i;const a=s[0];this.keyId=(i=a.kids)!=null&&i.length?a.kids[0]:null}}this.keyId||(this.keyId=kM(r));break;case sn.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Afe(s,null,n),this.keyId=aG(n);break}default:{let s=n.subarray(0,16);if(s.length!==16){const a=new Uint8Array(16);a.set(s,16-s.length),s=a}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=che(r),s||(s=kM(r),s||(s=nd[this.uri])),s&&(this.keyId=s,$l.setKeyIdForUri(this.uri,s))}return this}}function che(t){const e=t==null?void 0:t[sn.WIDEVINE];return e?e.keyId:null}function kM(t){const e=t==null?void 0:t[sn.PLAYREADY];if(e){const r=iG(e.uri);if(r)return aG(r)}return null}function uhe(t){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}const LM=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,jM=/#EXT-X-MEDIA:(.*)/g,dhe=/^#EXT(?:INF|-X-TARGETDURATION):/m,hS=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Ahe=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class aa{static findGroup(e,r){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===r)return i}}static resolve(e,r){return XI.buildAbsoluteURL(r,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return dhe.test(e)}static parseMasterPlaylist(e,r){const n=NM(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];if(LM.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let a;for(;(a=LM.exec(e))!=null;)if(a[1]){var o;const u=new nr(a[1],i),d=IB(i,a[2]),A={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:aa.resolve(d,r)},f=u.decimalResolution("RESOLUTION");f&&(A.width=f.width,A.height=f.height),OM(u.CODECS,A);const h=u["SUPPLEMENTAL-CODECS"];h&&(A.supplemental={},OM(h,A.supplemental)),(o=A.unknownCodecs)!=null&&o.length||s.push(A),i.levels.push(A)}else if(a[3]){const u=a[3],d=a[4];switch(u){case"SESSION-DATA":{const A=new nr(d,i),f=A["DATA-ID"];f&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[f]=A);break}case"SESSION-KEY":{const A=MM(d,r,i);A.encrypted&&A.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(A)):Nt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const A=new nr(d,i);IM(i,A,r)}break}case"CONTENT-STEERING":{const A=new nr(d,i);i.contentSteering={uri:aa.resolve(A["SERVER-URI"],r),pathwayId:A["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=DM(d);break}}}const l=s.length>0&&s.length<i.levels.length;return i.levels=l?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,r,n){let i;const s={},a=n.levels,o={AUDIO:a.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:a.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(jM.lastIndex=0;(i=jM.exec(e))!==null;){const u=new nr(i[1],n),d=u.TYPE;if(d){const A=o[d],f=s[d]||[];s[d]=f;const h=u.LANGUAGE,m=u["ASSOC-LANGUAGE"],p=u.CHANNELS,g=u.CHARACTERISTICS,x=u["INSTREAM-ID"],v={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||h||"",type:d,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:h,url:u.URI?aa.resolve(u.URI,r):""};if(m&&(v.assocLang=m),p&&(v.channels=p),g&&(v.characteristics=g),x&&(v.instreamId=x),A!=null&&A.length){const y=aa.findGroup(A,v.groupId)||A[0];FM(v,y,"audioCodec"),FM(v,y,"textCodec")}f.push(v)}}return s}static parseLevelPlaylist(e,r,n,i,s,a){var o;const l={url:r},u=new ihe(r),d=u.fragments,A=[];let f=null,h=0,m=0,p=0,g=0,x=0,v=null,y=new uS(i,l),w,b,S,C=-1,T=!1,B=null,_;if(hS.lastIndex=0,u.m3u8=e,u.hasVariableRefs=NM(e),((o=hS.exec(e))==null?void 0:o[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(w=hS.exec(e))!==null;){T&&(T=!1,y=new uS(i,l),y.playlistOffset=p,y.setStart(p),y.sn=h,y.cc=g,x&&(y.bitrate=x),y.level=n,f&&(y.initSegment=f,f.rawProgramDateTime&&(y.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),B&&(y.setByteRange(B),B=null)));const R=w[1];if(R){y.duration=parseFloat(R);const M=(" "+w[2]).slice(1);y.title=M||null,y.tagList.push(M?["INF",R,M]:["INF",R])}else if(w[3]){if(Te(y.duration)){y.playlistOffset=p,y.setStart(p),S&&$M(y,S,u),y.sn=h,y.level=n,y.cc=g,d.push(y);const M=(" "+w[3]).slice(1);y.relurl=IB(u,M),RB(y,v,A),v=y,p+=y.duration,h++,m=0,T=!0}}else{if(w=w[0].match(Ahe),!w){Nt.warn("No matches on slow regex match for level playlist!");continue}for(b=1;b<w.length&&w[b]===void 0;b++);const M=(" "+w[b]).slice(1),k=(" "+w[b+1]).slice(1),O=w[b+2]?(" "+w[b+2]).slice(1):null;switch(M){case"BYTERANGE":v?y.setByteRange(k,v):y.setByteRange(k);break;case"PROGRAM-DATE-TIME":y.rawProgramDateTime=k,y.tagList.push(["PROGRAM-DATE-TIME",k]),C===-1&&(C=d.length);break;case"PLAYLIST-TYPE":u.type&&La(u,M,w),u.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?La(u,M,w):d.length>0&&QM(u,M,w),h=u.startSN=parseInt(k);break;case"SKIP":{u.skippedSegments&&La(u,M,w);const j=new nr(k,u),D=j.decimalInteger("SKIPPED-SEGMENTS");if(Te(D)){u.skippedSegments+=D;for(let $=D;$--;)d.push(null);h+=D}const F=j.enumeratedString("RECENTLY-REMOVED-DATERANGES");F&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(F.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&La(u,M,w),u.targetduration=Math.max(parseInt(k),1);break;case"VERSION":u.version!==null&&La(u,M,w),u.version=parseInt(k);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||La(u,M,w),u.live=!1;break;case"#":(k||O)&&y.tagList.push(O?[k,O]:[k]);break;case"DISCONTINUITY":g++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([M]);break;case"BITRATE":y.tagList.push([M,k]),x=parseInt(k)*1e3,Te(x)?y.bitrate=x:x=0;break;case"DATERANGE":{const j=new nr(k,u),D=new rG(j,u.dateRanges[j.ID],u.dateRangeTagCount);u.dateRangeTagCount++,D.isValid||u.skippedSegments?u.dateRanges[D.id]=D:Nt.warn(`Ignoring invalid DATERANGE tag: "${k}"`),y.tagList.push(["EXT-X-DATERANGE",k]);break}case"DEFINE":{{const j=new nr(k,u);"IMPORT"in j?Zfe(u,j,a):IM(u,j,r)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?La(u,M,w):d.length>0&&QM(u,M,w),u.startCC=g=parseInt(k);break;case"KEY":{const j=MM(k,r,u);if(j.isSupported()){if(j.method==="NONE"){S=void 0;break}S||(S={});const D=S[j.keyFormat];D!=null&&D.matches(j)||(D&&(S=jt({},S)),S[j.keyFormat]=j)}else Nt.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${k}"`);break}case"START":u.startTimeOffset=DM(k);break;case"MAP":{const j=new nr(k,u);if(y.duration){const D=new uS(i,l);UM(D,j,n,S),f=D,y.initSegment=f,f.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=f.rawProgramDateTime)}else{const D=y.byteRangeEndOffset;if(D){const F=y.byteRangeStartOffset;B=`${D-F}@${F}`}else B=null;UM(y,j,n,S),f=y,T=!0}f.cc=g;break}case"SERVER-CONTROL":{_&&La(u,M,w),_=new nr(k),u.canBlockReload=_.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=_.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&_.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=_.optionalFloat("PART-HOLD-BACK",0),u.holdBack=_.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&La(u,M,w);const j=new nr(k);u.partTarget=j.decimalFloatingPoint("PART-TARGET");break}case"PART":{let j=u.partList;j||(j=u.partList=[]);const D=m>0?j[j.length-1]:void 0,F=m++,$=new nr(k,u),U=new ZAe($,y,l,F,D);j.push(U),y.duration+=U.duration;break}case"PRELOAD-HINT":{const j=new nr(k,u);u.preloadHint=j;break}case"RENDITION-REPORT":{const j=new nr(k,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(j);break}default:Nt.warn(`line parsed but not handled: ${w}`);break}}}v&&!v.relurl?(d.pop(),p-=v.duration,u.partList&&(u.fragmentHint=v)):u.partList&&(RB(y,v,A),y.cc=g,u.fragmentHint=y,S&&$M(y,S,u)),u.targetduration||(u.playlistParsingError=new Error("Missing Target Duration"));const I=d.length,L=d[0],N=d[I-1];if(p+=u.skippedSegments*u.targetduration,p>0&&I&&N){u.averagetargetduration=p/I;const R=N.sn;u.endSN=R!=="initSegment"?R:0,u.live||(N.endList=!0),C>0&&(hhe(d,C),L&&A.unshift(L))}return u.fragmentHint&&(p+=u.fragmentHint.duration),u.totalduration=p,A.length&&u.dateRangeTagCount&&L&&oG(A,u),u.endCC=g,u}}function oG(t,e){let r=t.length;if(!r)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];t.push(o),r++}else return;const n=t[r-1],i=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let o=s.length;o--;){const l=e.dateRanges[s[o]],u=l.startDate.getTime();l.tagAnchor=n.ref;for(let d=r;d--;){var a;if(((a=t[d])==null?void 0:a.sn)<e.startSN)break;const A=fhe(e,u,t,d,i);if(A!==-1){l.tagAnchor=e.fragments[A].ref;break}}}}function fhe(t,e,r,n,i){const s=r[n];if(s){const o=s.programDateTime;if(e>=o||n===0){var a;const l=(((a=r[n+1])==null?void 0:a.start)||i)-s.start;if(e<=o+l*1e3){const u=r[n].sn-t.startSN;if(u<0)return-1;const d=t.fragments;if(d.length>r.length){const f=(r[n+1]||d[d.length-1]).sn-t.startSN;for(let h=f;h>u;h--){const m=d[h].programDateTime;if(e>=m&&e<m+d[h].duration*1e3)return h}}return u}}}return-1}function MM(t,e,r){var n,i;const s=new nr(t,r),a=(n=s.METHOD)!=null?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),u=s.KEYFORMATVERSIONS,d=(i=s.KEYFORMAT)!=null?i:"identity";o&&s.IV&&!l&&Nt.error(`Invalid IV: ${s.IV}`);const A=o?aa.resolve(o,e):"",f=(u||"1").split("/").map(Number).filter(Number.isFinite);return new $l(a,A,d,f,l,s.KEYID)}function DM(t){const r=new nr(t).decimalFloatingPoint("TIME-OFFSET");return Te(r)?r:null}function OM(t,e){let r=(t||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=r.filter(s=>eP(s,n));i.length&&(e[`${n}Codec`]=i.map(s=>s.split("/")[0]).join(","),r=r.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=r}function FM(t,e,r){const n=e[r];n&&(t[r]=n)}function hhe(t,e){let r=t[e];for(let n=e;n--;){const i=t[n];if(!i)return;i.programDateTime=r.programDateTime-i.duration*1e3,r=i}}function RB(t,e,r){t.rawProgramDateTime?r.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function UM(t,e,r,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function $M(t,e,r){t.levelkeys=e;const{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(t)}function La(t,e,r){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${r[0]})`)}function QM(t,e,r){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${r[0]})`)}function pS(t,e){const r=e.startPTS;if(Te(r)){let n=0,i;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function lG(t,e,r,n,i,s,a){n-r<=0&&(a.warn("Fragment should have a positive duration",e),n=r+e.duration,s=i+e.duration);let l=r,u=n;const d=e.startPTS,A=e.endPTS;if(Te(d)){const x=Math.abs(d-r);t&&x>t.totalduration?a.warn(`media timestamps and playlist times differ by ${x}s for level ${e.level} ${t.url}`):Te(e.deltaPTS)?e.deltaPTS=Math.max(x,e.deltaPTS):e.deltaPTS=x,l=Math.max(r,d),r=Math.min(r,d),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,u=Math.min(n,A),n=Math.max(n,A),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const f=r-e.start;e.start!==0&&e.setStart(r),e.setDuration(n-e.start),e.startPTS=r,e.maxStartPTS=l,e.startDTS=i,e.endPTS=n,e.minEndPTS=u,e.endDTS=s;const h=e.sn;if(!t||h<t.startSN||h>t.endSN)return 0;let m;const p=h-t.startSN,g=t.fragments;for(g[p]=e,m=p;m>0;m--)pS(g[m],g[m-1]);for(m=p;m<g.length-1;m++)pS(g[m],g[m+1]);return t.fragmentHint&&pS(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function phe(t,e,r){if(t===e)return;let n=null;const i=t.fragments;for(let d=i.length-1;d>=0;d--){const A=i[d].initSegment;if(A){n=A;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;xhe(t,e,(d,A,f,h)=>{if((!e.startCC||e.skippedSegments)&&A.cc!==d.cc){const m=d.cc-A.cc;for(let p=f;p<h.length;p++)h[p].cc+=m;e.endCC=h[h.length-1].cc}Te(d.startPTS)&&Te(d.endPTS)&&(A.setStart(A.startPTS=d.startPTS),A.startDTS=d.startDTS,A.maxStartPTS=d.maxStartPTS,A.endPTS=d.endPTS,A.endDTS=d.endDTS,A.minEndPTS=d.minEndPTS,A.setDuration(d.endPTS-d.startPTS),A.duration&&(s=A),e.PTSKnown=e.alignedSliding=!0),d.hasStreams&&(A.elementaryStreams=d.elementaryStreams),A.loader=d.loader,d.hasStats&&(A.stats=d.stats),d.initSegment&&(A.initSegment=d.initSegment,n=d.initSegment)});const a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&o.forEach(d=>{var A;d&&(!d.initSegment||d.initSegment.relurl===((A=n)==null?void 0:A.relurl))&&(d.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(d=>!d),e.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let d=e.skippedSegments;d--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=mhe(t.dateRanges,e,r));const d=t.fragments.filter(A=>A.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let A=1;A<o.length;A++)o[A].programDateTime===null&&RB(o[A],o[A-1],d);oG(d,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var l;const d=dG(t,e.startSN-1);e.startCC=(l=d==null?void 0:d.cc)!=null?l:a[0].cc}ghe(t.partList,e.partList,(d,A)=>{A.elementaryStreams=d.elementaryStreams,A.stats=d.stats}),s?lG(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,r):cG(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const u=e.advancedDateTime;if(e.advanced&&u){const d=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=d),e.driftEndTime=u,e.driftEnd=d}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function mhe(t,e,r){const{dateRanges:n,recentlyRemovedDateranges:i}=e,s=jt({},t);i&&i.forEach(l=>{delete s[l]});const o=Object.keys(s).length;return o?(Object.keys(n).forEach(l=>{const u=s[l],d=new rG(n[l].attr,u);d.isValid?(s[l]=d,u||(d.tagOrder+=o)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ft(n[l].attr)}"`)}),s):n}function ghe(t,e,r){if(t&&e){let n=0;for(let i=0,s=t.length;i<=s;i++){const a=t[i],o=e[i+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?r(a,o):n--}}}function xhe(t,e,r){const n=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=s;u++){const d=l[a+u];let A=o[u];if(n&&!A&&d&&(A=e.fragments[u]=d),d&&A){r(d,A,u,o);const f=d.relurl,h=A.relurl;if(f&&vhe(f,h)){e.playlistParsingError=HM(`media sequence mismatch ${A.sn}:`,t,e,d,A);return}else if(d.cc!==A.cc){e.playlistParsingError=HM(`discontinuity sequence mismatch (${d.cc}!=${A.cc})`,t,e,d,A);return}}}}function HM(t,e,r,n,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${r.startSN}
${r.m3u8}`)}function cG(t,e,r=!0){const n=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,s=n>=0;let a=0;if(s&&n<i.length)a=i[n].start;else if(s&&e.startSN===t.endSN+1)a=t.fragmentEnd;else if(s&&r)a=t.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=t.fragmentStart;else return;kB(e,a)}function kB(t,e){if(e){const r=t.fragments;for(let n=t.skippedSegments;n<r.length;n++)r[n].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function uG(t,e=1/0){let r=1e3*t.targetduration;if(t.updated){const n=t.fragments;if(n.length&&r*4>e){const s=n[n.length-1].duration*1e3;s<r&&(r=s)}}else r/=2;return Math.round(r)}function dG(t,e,r){if(!t)return null;let n=t.fragments[e-t.startSN];return n||(n=t.fragmentHint,n&&n.sn===e)?n:e<t.startSN&&r&&r.sn===e?r:null}function KM(t,e,r){return t?AG(t.partList,e,r):null}function AG(t,e,r){if(t)for(let n=t.length;n--;){const i=t[n];if(i.index===r&&i.fragment.sn===e)return i}return null}function fG(t){t.forEach((e,r)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=r,i.initSegment&&(i.initSegment.level=r)})})}function vhe(t,e){return t!==e&&e?VM(t)!==VM(e):!1}function VM(t){return t.replace(/\?[^?]*$/,"")}function ap(t,e){for(let n=0,i=t.length;n<i;n++){var r;if(((r=t[n])==null?void 0:r.cc)===e)return t[n]}return null}function yhe(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function GM(t,e){const r=t.start+e;t.startPTS=r,t.setStart(r),t.endPTS=r+t.duration}function hG(t,e){const r=e.fragments;for(let n=0,i=r.length;n<i;n++)GM(r[n],t);e.fragmentHint&&GM(e.fragmentHint,t),e.alignedSliding=!0}function bhe(t,e){t&&(pG(e,t),e.alignedSliding||hy(e,t),!e.alignedSliding&&!e.skippedSegments&&cG(t,e,!1))}function pG(t,e){if(!yhe(e,t))return;const r=Math.min(e.endCC,t.endCC),n=ap(e.fragments,r),i=ap(t.fragments,r);if(!n||!i)return;Nt.log(`Aligning playlist at start of dicontinuity sequence ${r}`);const s=n.start-i.start;hG(s,t)}function hy(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=t.fragments,n=e.fragments;if(!r.length||!n.length)return;let i,s;const a=Math.min(e.endCC,t.endCC);e.startCC<a&&t.startCC<a&&(i=ap(n,a),s=ap(r,a)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=ap(r,i.cc)||r[Math.floor(r.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;const u=(l-o)/1e3-(s.start-i.start);hG(u,t)}function kn(t,e,r){zn(t,e,r),t.addEventListener(e,r)}function zn(t,e,r){t.removeEventListener(e,r)}const whe={toString:function(t){let e="";const r=t.length;for(let n=0;n<r;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},se={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class oP extends eG{constructor(e,r,n,i,s){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=se.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:l,mediaBuffer:u,state:d}=this,A=l?l.currentTime:0,f=Xe.bufferInfo(u||l,A,a.maxBufferHole),h=!f.len;if(this.log(`Media seeking to ${Te(A)?A.toFixed(3):A}, state: ${d}, ${h?"out of":"in"} buffer`),this.state===se.ENDED)this.resetLoadingState();else if(o){const m=a.maxFragLookUpTolerance,p=o.start-m,g=o.start+o.duration+m;if(h||g<f.start||p>f.end){const x=A>g;(A<p||x)&&(x&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(A,1/0,this.playlistType,!0);const m=this.lastCurrentTime;if(A>m&&(this.lastCurrentTime=A),!this.loadingParts){const p=Math.max(f.end,A),g=this.shouldLoadParts(this.getLevelDetails(),p);g&&(this.log(`LL-Part loading ON after seeking to ${A.toFixed(2)} with buffer @${p.toFixed(2)}`),this.loadingParts=g)}}this.hls.hasEnoughToStart||(this.log(`Setting ${h?"startPosition":"nextLoadPosition"} to ${A} for seek without enough to start`),this.nextLoadPosition=A,h&&(this.startPosition=A)),h&&this.state===se.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new qfe(e.config),this.keyLoader=n,this.fragmentTracker=r,this.config=e.config,this.decrypter=new nP(e.config)}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===se.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=se.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:r}=this;return r===-1&&e?e:r}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,r){if(r.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=Xe.bufferedInfo(s,e.start,0));const a=e.nextStart;if(a&&a>i&&a<r.edge||this.media.currentTime<e.start)return!1;const l=r.partList;if(l!=null&&l.length){const d=l[l.length-1];return Xe.isBuffered(this.media,d.start+d.duration/2)}const u=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var r;return((r=this.getLevelDetails())==null?void 0:r.appliedTimelineOffset)||e}return 0}onMediaAttached(e,r){const n=this.media=this.mediaBuffer=r.media;kn(n,"seeking",this.onMediaSeeking),kn(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===se.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,r){const n=!!r.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),zn(i,"seeking",this.onMediaSeeking),zn(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,r){}onManifestLoaded(e,r){this.startTimeOffset=r.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=se.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,r,n){this.startFragRequested=!0,this._loadFragForPlayback(e,r,n)}_loadFragForPlayback(e,r,n){const i=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,r,n,i).then(s=>{if(!s)return;const a=this.state,o=s.frag;if(this.fragContextChanged(o)){(a===se.FRAG_LOADING||!this.fragCurrent&&a===se.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=se.IDLE);return}"payload"in s&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(P.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var r;const{fragmentTracker:n}=this;if(n.getState(e)===Lr.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Lr.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const r=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const r=e.details;return(r==null?void 0:r.live)&&r.type!=="EVENT"&&(this.levelLastLoaded!==e||r.expired)}flushMainBuffer(e,r,n=null){if(!(e-r))return;const i={startOffset:e,endOffset:r,type:n};this.hls.trigger(P.BUFFER_FLUSHING,i)}_loadInitSegment(e,r){this._doFragLoad(e,r).then(n=>{const i=n==null?void 0:n.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:s,payload:a}=n,o=s.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&eA(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,sP(o.method)).catch(u=>{throw i.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:s}),u}).then(u=>{const d=self.performance.now();return i.trigger(P.FRAG_DECRYPTED,{frag:s,payload:u,stats:{tstart:l,tdecrypt:d}}),n.payload=u,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==se.STOPPED&&(this.state=se.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,r){var n,i;const s=e.tracks;if(s&&!r.encrypted&&((n=s.audio)!=null&&n.encrypted||(i=s.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(r)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(P.ERROR,{type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:r}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:r}=this;return!e||!r||e.sn!==r.sn||e.level!==r.level}fragBufferedComplete(e,r){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)} > buffer:${n?whe.toString(Xe.getBuffered(n)):"(detached)"})`),vr(e)){var i;if(e.type!==ke.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=se.IDLE;return}}const s=(i=this.levels)==null?void 0:i[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=se.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:r}=this;if(!r)return;const{frag:n,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(l=>!l),o=new iP(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);r.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,r,n=null,i){var s;this.fragCurrent=e;const a=r.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=se.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(f=>{if(!this.fragContextChanged(f.frag))return this.hls.trigger(P.KEY_LOADED,f),this.state===se.KEY_LOADING&&(this.state=se.IDLE),f}),this.hls.trigger(P.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(vr(e)&&(!l||e.sn!==l.sn)){const f=this.shouldLoadParts(r.details,e.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=f)}if(n=Math.max(e.start,n||0),this.loadingParts&&vr(e)){const f=a.partList;if(f&&i){n>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const h=this.getNextPart(f,e,n);if(h>-1){const m=f[h];e=this.fragCurrent=m.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${m.index} (${h}/${f.length-1}) of ${this.fragInfo(e,!1,m)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=m.start+m.duration,this.state=se.FRAG_LOADING;let p;return o?p=o.then(g=>!g||this.fragContextChanged(g.frag)?null:this.doFragPartsLoad(e,m,r,i)).catch(g=>this.handleFragLoadError(g)):p=this.doFragPartsLoad(e,m,r,i).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(P.FRAG_LOADING,{frag:e,part:m,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):p}else if(!e.url||this.loadedEndOfParts(f,n))return Promise.resolve(null)}}if(vr(e)&&this.loadingParts){var u;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(u=a.partList)==null?void 0:u.filter(f=>f.loaded).map(f=>`[${f.start}-${f.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Te(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=se.FRAG_LOADING;const d=this.config.progressive&&e.type!==ke.SUBTITLE;let A;return d&&o?A=o.then(f=>!f||this.fragContextChanged(f.frag)?null:this.fragmentLoader.load(e,i)).catch(f=>this.handleFragLoadError(f)):A=Promise.all([this.fragmentLoader.load(e,d?i:void 0),o]).then(([f])=>(!d&&i&&i(f),f)).catch(f=>this.handleFragLoadError(f)),this.hls.trigger(P.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):A}doFragPartsLoad(e,r,n,i){return new Promise((s,a)=>{var o;const l=[],u=(o=n.details)==null?void 0:o.partList,d=A=>{this.fragmentLoader.loadPart(e,A,i).then(f=>{l[A.index]=f;const h=f.part;this.hls.trigger(P.FRAG_LOADED,f);const m=KM(n.details,e.sn,A.index+1)||AG(u,e.sn,A.index+1);if(m)d(m);else return s({frag:e,part:h,partsLoaded:l})}).catch(a)};d(r)})}handleFragLoadError(e){if("data"in e){const r=e.data;r.frag&&r.details===Y.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):r.frag&&r.type===Ue.KEY_SYSTEM_ERROR?(r.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(r.frag)):this.hls.trigger(P.ERROR,r)}else this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const r=this.getCurrentContext(e);if(!r||this.state!==se.PARSING){!this.fragCurrent&&this.state!==se.STOPPED&&this.state!==se.ERROR&&(this.state=se.IDLE);return}const{frag:n,part:i,level:s}=r,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a);const o=this.getLevelDetails(),u=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(n,i,s,e.partial)}shouldLoadParts(e,r){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const s=e.partList[0];if(s.fragment.type===ke.SUBTITLE)return!1;const a=s.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(r>=a){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:r,fragCurrent:n}=this,{level:i,sn:s,part:a}=e;if(!(r!=null&&r[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=r[i],l=o.details,u=a>-1?KM(l,s,a):null,d=u?u.fragment:dG(l,s,n);return d?(n&&n!==d&&(d.stats=n.stats),{frag:d,part:u,level:o}):null}bufferFragmentData(e,r,n,i,s){if(this.state!==se.PARSING)return;const{data1:a,data2:o}=e;let l=a;if(o&&(l=Yi(a,o)),!l.length)return;const u=this.initPTS[r.cc],d=u?-u.baseTime/u.timescale:void 0,A={type:e.type,frag:r,part:n,chunkMeta:i,offset:d,parent:r.type,data:l};if(this.hls.trigger(P.BUFFER_APPENDING,A),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(r)}}flushBufferGap(e){const r=this.media;if(!r)return;if(!Xe.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,e.start);return}const n=r.currentTime,i=Xe.bufferInfo(r,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,r){var n;const i=this.getLoadPosition();if(!Te(i))return null;const a=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,r,a)}getFwdBufferInfoAtPos(e,r,n,i){const s=Xe.bufferInfo(e,r,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(r,n);if(a&&(s.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(s.nextStart,a.end)-r,i);return Xe.bufferInfo(e,r,o)}}return s}getMaxBufferLength(e){const{config:r}=this;let n;return e?n=Math.max(8*r.maxBufferSize/e,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(e,r){const n=this.config,i=Math.max(Math.min(e-r,n.maxBufferLength),r),s=Math.max(e-r*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,r=ke.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,r):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,r){const n=r.fragments,i=n.length;if(!i)return null;const{config:s}=this,a=n[0].start,o=s.lowLatencyMode&&!!r.partList;let l=null;if(r.live){const A=s.initialLiveManifestSize;if(i<A)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${A})`),null;if(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var u;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(r);const f=this.hls.startPosition,h=this.hls.liveSyncPosition,m=l?(f!==-1&&f>=a?f:h)||l.start:e;this.log(`Setting startPosition to ${m} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${h} frag.start: ${(u=l)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=m}}else e<=a&&(l=n[0]);if(!l){const A=this.loadingParts?r.partEnd:r.fragmentEnd;l=this.getFragmentAtPosition(e,A,r)}let d=this.filterReplacedPrimary(l,r);if(!d&&l){const A=l.sn-r.startSN;d=this.filterReplacedPrimary(n[A+1]||null,r)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,r){const n=this.fragmentTracker.getState(e);return(n===Lr.OK||n===Lr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(e,r,n,i,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,r),a&&!a.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(o!==null&&n.len+o.len>=s){const l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(zM(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,r){if(!e)return e;if(zM(this.config)&&e.type!==ke.SUBTITLE){const n=this.hls.interstitialsManager,i=n==null?void 0:n.bufferingItem;if(i){const a=i.event;if(a){if(a.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(r==null?void 0:r.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const s=n==null?void 0:n.playerQueue;if(s)for(let a=s.length;a--;){const o=s[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,r,n){let i=-1,s=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const u=e[o];if(a=a&&!u.independent,i>-1&&n<u.start)break;const d=u.loaded;d?i=-1:(s||(u.independent||a)&&u.fragment===r)&&(u.fragment!==r&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${u.start}`),i=o),s=d}return i}loadedEndOfParts(e,r){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(r>n.start)return!0}return!1}getInitialLiveFragment(e){const r=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=Ofe(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=r[s-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=XV(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,r,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:u}=i,d=n.partList,A=!!(this.loadingParts&&d!=null&&d.length&&l);A&&!this.bitrateTest&&d[d.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let f;if(e<r){var h;const p=e<this.lastCurrentTime||e>r-u||(h=this.media)!=null&&h.paused||!this.startFragRequested?0:u;f=Nu(s,a,e,p)}else f=a[a.length-1];if(f){const m=f.sn-n.startSN,p=this.fragmentTracker.getState(f);if((p===Lr.OK||p===Lr.PARTIAL&&f.gap)&&(s=f),s&&f.sn===s.sn&&(!A||d[0].fragment.sn>f.sn||!n.live)&&f.level===s.level){const x=a[m+1];f.sn<o&&this.fragmentTracker.getState(x)!==Lr.OK?f=x:f=null}}return f}alignPlaylists(e,r,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!r,o=e.alignedSliding&&Te(s);if(a||!o&&!s){bhe(n,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${e.startSN} fragments: ${i}`),l}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,r){let n=this.startPosition;n<r&&(n=-1);const i=this.timelineOffset;if(n===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&Te(a)?(n=r+a,a<0&&(n+=e.edge),n=Math.min(Math.max(r,n),r+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||r,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:r}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&r?n=r.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,r){this.transmuxer&&e.type===this.playlistType&&vr(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${r?" part "+r.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==se.FRAG_LOADING_WAITING_RETRY)&&(this.state=se.IDLE)}onFragmentOrKeyLoadError(e,r){var n;if(r.chunkMeta&&!r.frag){const x=this.getCurrentContext(r.chunkMeta);x&&(r.frag=x.frag)}const i=r.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const a=r.details===Y.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);const o=r.errorAction;if(!o){this.state=se.ERROR;return}const{action:l,flags:u,retryCount:d=0,retryConfig:A}=o,f=!!A,h=f&&l===tn.RetryRequest,m=f&&!o.resolved&&u===ii.MoveAllAlternatesMatchingHost,p=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!h&&m&&vr(i)&&!i.endList&&p&&!JV(r))this.resetFragmentErrors(e),this.treatAsGap(i),o.resolved=!0;else if((h||m)&&d<A.maxNumRetry){var g;const x=NB((g=r.response)==null?void 0:g.code),v=rP(A,d);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+v,this.state=se.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,x){this.log("Waiting for connection (offline)"),this.retryDate=1/0,r.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${r.details}, retrying loading ${d+1}/${A.maxNumRetry} in ${v}ms`)}else if(A)if(this.resetFragmentErrors(e),d<A.maxNumRetry)!a&&l!==tn.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${r.details} reached or exceeded max retry (${d})`);return}else l===tn.SendAlternateToPenaltyBox?this.state=se.WAITING_LEVEL:this.state=se.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),r=this.retryDate,n=r===1/0;(!r||e>=r||n&&!NB(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=se.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===se.PARSING||this.state===se.PARSED){const r=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,(r==null?void 0:r.duration)||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===ke.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==se.STOPPED&&(this.state=se.IDLE)}afterBufferFlushed(e,r,n){if(!e)return;const i=Xe.getBuffered(e);this.fragmentTracker.detectEvictedFragments(r,i,n),this.state===se.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==se.STOPPED&&(this.state=se.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,r=e?e.details:null;r!=null&&r.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(r,r.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,r,n,i){const s=n.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const d=e.elementaryStreams[u];if(d){const A=d.endPTS-d.startPTS;if(A<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${A})`),l||!1;const f=i?0:lG(s,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS,this);return this.hls.trigger(P.LEVEL_PTS_UPDATED,{details:s,level:n,drift:f,type:u,frag:e,start:d.startPTS,end:d.endPTS}),!0}return l},!1)){var o;const l=((o=this.transmuxer)==null?void 0:o.error)===null;if((n.fragmentError===0||l&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),l){const u=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=se.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)})`),this.hls.trigger(P.FRAG_PARSED,{frag:e,part:r})}playlistLabel(){return this.playlistType===ke.MAIN?"level":"track"}fragInfo(e,r=!0,n){var i,s;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=r&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((s=r&&!n?e.endPTS:(n||e).end)!=null?s:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,r){r&&r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const r=this._state;r!==e&&(this._state=e,this.log(`${r}->${e}`))}get state(){return this._state}}function zM(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class mG{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:r}=this;let n;if(e.length)e.length===1?n=e[0]:n=Ehe(e,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function Ehe(t,e){const r=new Uint8Array(e);let n=0;for(let i=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}var mS={exports:{}},WM;function She(){return WM||(WM=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,A,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,A||l,f),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,A;if(this._eventsCount===0)return u;for(A in d=this._events)e.call(d,A)&&u.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,A=this._events[d];if(!A)return[];if(A.fn)return[A.fn];for(var f=0,h=A.length,m=new Array(h);f<h;f++)m[f]=A[f].fn;return m},o.prototype.listenerCount=function(u){var d=r?r+u:u,A=this._events[d];return A?A.fn?1:A.length:0},o.prototype.emit=function(u,d,A,f,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,v,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,A),!0;case 4:return g.fn.call(g.context,d,A,f),!0;case 5:return g.fn.call(g.context,d,A,f,h),!0;case 6:return g.fn.call(g.context,d,A,f,h,m),!0}for(y=1,v=new Array(x-1);y<x;y++)v[y-1]=arguments[y];g.fn.apply(g.context,v)}else{var w=g.length,b;for(y=0;y<w;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),x){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,d);break;case 3:g[y].fn.call(g[y].context,d,A);break;case 4:g[y].fn.call(g[y].context,d,A,f);break;default:if(!v)for(b=1,v=new Array(x-1);b<x;b++)v[b-1]=arguments[b];g[y].fn.apply(g[y].context,v)}}return!0},o.prototype.on=function(u,d,A){return s(this,u,d,A,!1)},o.prototype.once=function(u,d,A){return s(this,u,d,A,!0)},o.prototype.removeListener=function(u,d,A,f){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return a(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!f||m.once)&&(!A||m.context===A)&&a(this,h);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||f&&!m[p].once||A&&m[p].context!==A)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o}(mS)),mS.exports}var Che=She(),lP=qAe(Che);const tm="1.6.15",OA={};function The(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Bhe(){const t=OA[tm];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(e),i={worker:new self.Worker(r),objectURL:r,clientCount:1};return OA[tm]=i,i}function _he(t){const e=OA[t];if(e)return e.clientCount++,e;const r=new self.URL(t,self.location.href).href,i={worker:new self.Worker(r),scriptURL:r,clientCount:1};return OA[t]=i,i}function Nhe(t){const e=OA[t||tm];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete OA[t||tm],i&&self.URL.revokeObjectURL(i),n.terminate()}}function gG(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function cP(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Fw(t,e){let r=0;return r=(t[e]&127)<<21,r|=(t[e+1]&127)<<14,r|=(t[e+2]&127)<<7,r|=t[e+3]&127,r}function rm(t,e){const r=e;let n=0;for(;cP(t,e);){n+=10;const i=Fw(t,e+6);n+=i,gG(t,e+10)&&(n+=10),e+=n}if(n>0)return t.subarray(r,r+n)}function Ihe(t,e,r,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[r+2],a=s>>2&15;if(a>12){const h=new Error(`invalid ADTS sampling index:${a}`);t.emit(P.ERROR,P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}const o=(s>>6&3)+1,l=e[r+3]>>6&3|(s&1)<<2,u="mp4a.40."+o,d=i[a];let A=a;(o===5||o===29)&&(A-=3);const f=[o<<3|(A&14)>>1,(A&1)<<7|l<<3];return Nt.log(`manifest codec:${n}, parsed codec:${u}, channels:${l}, rate:${d} (ADTS object type:${o} sampling index:${a})`),{config:f,samplerate:d,channelCount:l,codec:u,parsedCodec:u,manifestCodec:n}}function xG(t,e){return t[e]===255&&(t[e+1]&246)===240}function vG(t,e){return t[e+1]&1?7:9}function uP(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function Phe(t,e){return e+5<t.length}function py(t,e){return e+1<t.length&&xG(t,e)}function Rhe(t,e){return Phe(t,e)&&xG(t,e)&&uP(t,e)<=t.length-e}function khe(t,e){if(py(t,e)){const r=vG(t,e);if(e+r>=t.length)return!1;const n=uP(t,e);if(n<=r)return!1;const i=e+n;return i===t.length||py(t,i)}return!1}function yG(t,e,r,n,i){if(!t.samplerate){const s=Ihe(e,r,n,i);if(!s)return;jt(t,s)}}function bG(t){return 1024*9e4/t}function Lhe(t,e){const r=vG(t,e);if(e+r<=t.length){const n=uP(t,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}function wG(t,e,r,n,i){const s=bG(t.samplerate),a=n+i*s,o=Lhe(e,r);let l;if(o){const{frameLength:A,headerLength:f}=o,h=f+A,m=Math.max(0,r+h-e.length);m?(l=new Uint8Array(h-f),l.set(e.subarray(r+f,e.length),0)):l=e.subarray(r+f,r+h);const p={unit:l,pts:a};return m||t.samples.push(p),{sample:p,length:h,missing:m}}const u=e.length-r;return l=new Uint8Array(u),l.set(e.subarray(r,e.length),0),{sample:{unit:l,pts:a},length:u,missing:-1}}function jhe(t,e){return cP(t,e)&&Fw(t,e+6)+10<=t.length-e}function Mhe(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function gS(t,e=0,r=1/0){return Dhe(t,e,r,Uint8Array)}function Dhe(t,e,r,n){const i=Ohe(t);let s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);const a=Fhe(t)?t.byteOffset:0,o=(a+t.byteLength)/s,l=(a+e)/s,u=Math.floor(Math.max(0,Math.min(l,o))),d=Math.floor(Math.min(u+Math.max(r,0),o));return new n(i,u,d-u)}function Ohe(t){return t instanceof ArrayBuffer?t:t.buffer}function Fhe(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function Uhe(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},r=3;if(t.size<2)return;if(t.data[0]!==r){console.log("Ignore frame with unrecognized character encoding");return}const n=t.data.subarray(1).indexOf(0);if(n===-1)return;const i=bi(gS(t.data,1,n)),s=t.data[2+n],a=t.data.subarray(3+n).indexOf(0);if(a===-1)return;const o=bi(gS(t.data,3+n,a));let l;return i==="-->"?l=bi(gS(t.data,4+n+a)):l=Mhe(t.data.subarray(4+n+a)),e.mimeType=i,e.pictureType=s,e.description=o,e.data=l,e}function $he(t){if(t.size<2)return;const e=bi(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}function Qhe(t){if(t.size<2)return;if(t.type==="TXXX"){let r=1;const n=bi(t.data.subarray(r),!0);r+=n.length+1;const i=bi(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=bi(t.data.subarray(1));return{key:t.type,info:"",data:e}}function Hhe(t){if(t.type==="WXXX"){if(t.size<2)return;let r=1;const n=bi(t.data.subarray(r),!0);r+=n.length+1;const i=bi(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=bi(t.data);return{key:t.type,info:"",data:e}}function Khe(t){return t.type==="PRIV"?$he(t):t.type[0]==="W"?Hhe(t):t.type==="APIC"?Uhe(t):Qhe(t)}function Vhe(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=Fw(t,4),n=10;return{type:e,size:r,data:t.subarray(n,n+r)}}const f0=10,Ghe=10;function EG(t){let e=0;const r=[];for(;cP(t,e);){const n=Fw(t,e+6);t[e+5]>>6&1&&(e+=f0),e+=f0;const i=e+n;for(;e+Ghe<i;){const s=Vhe(t.subarray(e)),a=Khe(s);a&&r.push(a),e+=s.size+f0}gG(t,e)&&(e+=f0)}return r}function SG(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function zhe(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),r=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}}function dP(t){const e=EG(t);for(let r=0;r<e.length;r++){const n=e[r];if(SG(n))return zhe(n)}}let Ai=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function ea(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class AP{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,r,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,r){return!1}appendFrame(e,r,n){}demux(e,r){this.cachedData&&(e=Yi(this.cachedData,e),this.cachedData=null);let n=rm(e,0),i=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,l=n?dP(n):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&Te(l))&&(this.basePTS=Whe(l,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Ai.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const d=this.appendFrame(a,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,s=i):i=u}else jhe(e,i)?(n=rm(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Ai.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===u&&s!==u){const d=e.slice(s);this.cachedData?this.cachedData=Yi(this.cachedData,d):this.cachedData=d}}return{audioTrack:a,videoTrack:ea(),id3Track:o,textTrack:ea()}}demuxSampleAes(e,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:ea(),id3Track:this._id3Track,textTrack:ea()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Whe=(t,e,r)=>{if(Te(t))return t*90;const n=r?r.baseTime*9e4/r.timescale:0;return e*9e4+n};let h0=null;const Yhe=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],qhe=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Xhe=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Zhe=[0,1,1,4];function CG(t,e,r,n,i){if(r+24>e.length)return;const s=TG(e,r);if(s&&r+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+i*a,l={unit:e.subarray(r,r+s.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function TG(t,e){const r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(r!==1&&i!==0&&i!==15&&s!==3){const a=t[e+2]>>1&1,o=t[e+3]>>6,l=r===3?3-n:n===3?3:4,u=Yhe[l*14+i-1]*1e3,A=qhe[(r===3?0:r===2?1:2)*3+s],f=o===3?1:2,h=Xhe[r][n],m=Zhe[n],p=h*8*m,g=Math.floor(h*u/A+a)*m;if(h0===null){const y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);h0=y?parseInt(y[1]):0}return!!h0&&h0<=87&&n===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:A,channelCount:f,frameLength:g,samplesPerFrame:p}}}function fP(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function BG(t,e){return e+1<t.length&&fP(t,e)}function Jhe(t,e){return fP(t,e)&&4<=t.length-e}function _G(t,e){if(e+1<t.length&&fP(t,e)){const n=TG(t,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===t.length||BG(t,s)}return!1}class epe extends AP{constructor(e,r){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=r}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,r){if(!e)return!1;const n=rm(e,0);let i=(n==null?void 0:n.length)||0;if(_G(e,i))return!1;for(let s=e.length;i<s;i++)if(khe(e,i))return r.log("ADTS sync word found !"),!0;return!1}canParse(e,r){return Rhe(e,r)}appendFrame(e,r,n){yG(e,this.observer,r,n,e.manifestCodec);const i=wG(e,r,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const NG=(t,e)=>{let r=0,n=5;e+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=t[e];const o=Math.min(n,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,r=r?r<<o|i[0]:i[0],e+=1,n-=o}return r};class tpe extends AP{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,r){return r+64<e.length}appendFrame(e,r,n){const i=IG(e,r,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const r=rm(e,0);if(!r)return!1;const n=r.length;return e[n]===11&&e[n+1]===119&&dP(r)!==void 0&&NG(e,n)<16}}function IG(t,e,r,n,i){if(r+8>e.length||e[r]!==11||e[r+1]!==119)return-1;const s=e[r+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],l=e[r+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(r+d>e.length)return-1;const A=e[r+6]>>5;let f=0;A===2?f+=2:(A&1&&A!==1&&(f+=2),A&4&&(f+=2));const h=(e[r+6]<<8|e[r+7])>>12-f&1,p=[2,1,2,3,3,4,4,5][A]+h,g=e[r+5]>>3,x=e[r+5]&7,v=new Uint8Array([s<<6|g<<1|x>>2,(x&3)<<6|A<<3|h<<2|l>>4,l<<4&224]),y=1536/o*9e4,w=n+i*y,b=e.subarray(r,r+d);return t.config=v,t.channelCount=p,t.samplerate=o,t.samples.push({unit:b,pts:w}),d}class rpe extends AP{resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const r=rm(e,0);let n=(r==null?void 0:r.length)||0;if(r&&e[n]===11&&e[n+1]===119&&dP(r)!==void 0&&NG(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(_G(e,n))return Nt.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,r){return Jhe(e,r)}appendFrame(e,r,n){if(this.basePTS!==null)return CG(e,r,n,this.basePTS,this.frameIndex)}}const npe=/\/emsg[-/]ID3/i;class ipe{constructor(e,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(e,r,n,i){const s=this.videoTrack=ea("video",1),a=this.audioTrack=ea("audio",1),o=this.txtTrack=ea("text",1);if(this.id3Track=ea("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=UV(e);if(l.video){const{id:u,timescale:d,codec:A,supplemental:f}=l.video;s.id=u,s.timescale=o.timescale=d,s.codec=A,s.supplemental=f}if(l.audio){const{id:u,timescale:d,codec:A}=l.audio;a.id=u,a.timescale=d,a.codec=A}o.id=DV.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return tfe(e)}demux(e,r){this.timeOffset=r;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Yi(this.remainderData,e));const o=lfe(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,r);return s.samples=AM(r,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(r,this.timeOffset);return n.samples=AM(e,r),{videoTrack:r,audioTrack:ea(),id3Track:i,textTrack:ea()}}extractID3Track(e,r){const n=this.id3Track;if(e.samples.length){const i=nt(e.samples,["emsg"]);i&&i.forEach(s=>{const a=ufe(s);if(npe.test(a.schemeIdUri)){const o=YM(a,r);let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=a.payload;n.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:Ai.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=YM(a,r);n.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Ai.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function YM(t,e){return Te(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class spe{constructor(e,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new nP(r,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,rc.cbc)}decryptAacSample(e,r,n){const i=e[r].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,r+1,n)}).catch(n)}decryptAacSamples(e,r,n){for(;;r++){if(r>=e.length){n();return}if(!(e[r].unit.length<32)&&(this.decryptAacSample(e,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const r=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(r);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,r){const n=new Uint8Array(r);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,r,n,i,s){const a=HV(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,r,n+1,i)}).catch(i)}decryptAvcSamples(e,r,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=e.length){i();return}const s=e[r].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,r,n,i,a),!this.decrypter.isSync()))return}}}}class PG{constructor(){this.VideoSample=null}createVideoSample(e,r,n){return{key:e,frame:!1,pts:r,dts:n,units:[],length:0}}getLastNalUnit(e){var r;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(r=n)!=null&&r.units){const s=n.units;i=s[s.length-1]}return i}pushAccessUnit(e,r){if(e.units.length&&e.frame){if(e.pts===void 0){const n=r.samples,i=n.length;if(i){const s=n[i-1];e.pts=s.pts,e.dts=s.dts}else{r.dropped++;return}}r.samples.push(e)}}parseNALu(e,r,n){const i=r.byteLength;let s=e.naluState||0;const a=s,o=[];let l=0,u,d,A,f=-1,h=0;for(s===-1&&(f=0,h=this.getNALuType(r,0),s=0,l=1);l<i;){if(u=r[l++],!s){s=u?0:1;continue}if(s===1){s=u?0:2;continue}if(!u)s=3;else if(u===1){if(d=l-s-1,f>=0){const m={data:r.subarray(f,d),type:h};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(a&&l<=4-a&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-a)),d>0&&(m.data=Yi(m.data,r.subarray(0,d)),m.state=0))}l<i?(A=this.getNALuType(r,l),f=l,h=A,s=0):s=-1}else s=0}if(f>=0&&s>=0){const m={data:r.subarray(f,i),type:h,state:s};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=Yi(m.data,r))}return e.naluState=s,o}}class op{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,r=this.bytesAvailable,n=e.byteLength-r,i=new Uint8Array(4),s=Math.min(4,r);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let r;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,r=e>>3,e-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let r=Math.min(this.bitsAvailable,e);const n=this.word>>>32-r;if(e>32&&Nt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=e-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class ape extends PG{parsePES(e,r,n,i){const s=this.parseNALu(e,n.data,i);let a=this.VideoSample,o,l=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(u=>{var d,A;switch(u.type){case 1:{let p=!1;o=!0;const g=u.data;if(l&&g.length>4){const x=this.readSliceType(g);(x===2||x===4||x===7||x===9)&&(p=!0)}if(p){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=p;break}case 5:o=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,JI(u.data,1,n.pts,r.samples);break}case 7:{var h,m;o=!0,l=!0;const p=u.data,g=this.readSPS(p);if(!e.sps||e.width!==g.width||e.height!==g.height||((h=e.pixelRatio)==null?void 0:h[0])!==g.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[p];const x=p.subarray(1,4);let v="avc1.";for(let y=0;y<3;y++){let w=x[y].toString(16);w.length<2&&(w="0"+w),v+=w}e.codec=v}break}case 8:o=!0,e.pps=[u.data];break;case 9:o=!0,e.audFound=!0,(A=a)!=null&&A.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(u)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,r){return e[r]&31}readSliceType(e){const r=new op(e);return r.readUByte(),r.readUEG(),r.readUEG()}skipScalingList(e,r){let n=8,i=8,s;for(let a=0;a<e;a++)i!==0&&(s=r.readEG(),i=(n+s+256)%256),n=i===0?n:i}readSPS(e){const r=new op(e);let n=0,i=0,s=0,a=0,o,l,u;const d=r.readUByte.bind(r),A=r.readBits.bind(r),f=r.readUEG.bind(r),h=r.readBoolean.bind(r),m=r.skipBits.bind(r),p=r.skipEG.bind(r),g=r.skipUEG.bind(r),x=this.skipScalingList.bind(this);d();const v=d();if(A(5),m(3),d(),g(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const T=f();if(T===3&&m(1),g(),g(),m(1),h())for(l=T!==3?8:12,u=0;u<l;u++)h()&&(u<6?x(16,r):x(64,r))}g();const y=f();if(y===0)f();else if(y===1)for(m(1),p(),p(),o=f(),u=0;u<o;u++)p();g(),m(1);const w=f(),b=f(),S=A(1);S===0&&m(1),m(1),h()&&(n=f(),i=f(),s=f(),a=f());let C=[1,1];if(h()&&h())switch(d()){case 1:C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:{C=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((w+1)*16-n*2-i*2),height:(2-S)*(b+1)*16-(S?2:4)*(s+a),pixelRatio:C}}}class ope extends PG{constructor(...e){super(...e),this.initVPS=null}parsePES(e,r,n,i){const s=this.parseNALu(e,n.data,i);let a=this.VideoSample,o,l=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(u=>{var d,A;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,JI(u.data,2,n.pts,r.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=jt(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const h=this.readSPS(u.data);e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.codec=h.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const m in h.params)e.params[m]=h.params[m]}this.pushParameterSet(e.sps,u.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const h=this.readPPS(u.data);for(const m in h)e.params[m]=h[m]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(A=a)!=null&&A.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}a&&o&&a.units.push(u)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,r,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(r)}getNALuType(e,r){return(e[r]&126)>>>1}ebsp2rbsp(e){const r=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(r[n]=e[i],n++);return new Uint8Array(r.buffer,0,n)}pushAccessUnit(e,r){super.pushAccessUnit(e,r),this.initVPS&&(this.initVPS=null)}readVPS(e){const r=new op(e);r.readUByte(),r.readUByte(),r.readBits(4),r.skipBits(2),r.readBits(6);const n=r.readBits(3),i=r.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const r=new op(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.readBits(4);const n=r.readBits(3);r.readBoolean();const i=r.readBits(2),s=r.readBoolean(),a=r.readBits(5),o=r.readUByte(),l=r.readUByte(),u=r.readUByte(),d=r.readUByte(),A=r.readUByte(),f=r.readUByte(),h=r.readUByte(),m=r.readUByte(),p=r.readUByte(),g=r.readUByte(),x=r.readUByte(),v=[],y=[];for(let ce=0;ce<n;ce++)v.push(r.readBoolean()),y.push(r.readBoolean());if(n>0)for(let ce=n;ce<8;ce++)r.readBits(2);for(let ce=0;ce<n;ce++)v[ce]&&(r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte()),y[ce]&&r.readUByte();r.readUEG();const w=r.readUEG();w==3&&r.skipBits(1);const b=r.readUEG(),S=r.readUEG(),C=r.readBoolean();let T=0,B=0,_=0,I=0;C&&(T+=r.readUEG(),B+=r.readUEG(),_+=r.readUEG(),I+=r.readUEG());const L=r.readUEG(),N=r.readUEG(),R=r.readUEG(),M=r.readBoolean();for(let ce=M?0:n;ce<=n;ce++)r.skipUEG(),r.skipUEG(),r.skipUEG();if(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.readBoolean()&&r.readBoolean())for(let Be=0;Be<4;Be++)for(let _e=0;_e<(Be===3?2:6);_e++)if(!r.readBoolean())r.readUEG();else{const Se=Math.min(64,1<<4+(Be<<1));Be>1&&r.readEG();for(let it=0;it<Se;it++)r.readEG()}r.readBoolean(),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.skipUEG(),r.skipUEG(),r.readBoolean());const j=r.readUEG();let D=0;for(let ce=0;ce<j;ce++){let Be=!1;if(ce!==0&&(Be=r.readBoolean()),Be){ce===j&&r.readUEG(),r.readBoolean(),r.readUEG();let _e=0;for(let He=0;He<=D;He++){const Se=r.readBoolean();let it=!1;Se||(it=r.readBoolean()),(Se||it)&&_e++}D=_e}else{const _e=r.readUEG(),He=r.readUEG();D=_e+He;for(let Se=0;Se<_e;Se++)r.readUEG(),r.readBoolean();for(let Se=0;Se<He;Se++)r.readUEG(),r.readBoolean()}}if(r.readBoolean()){const ce=r.readUEG();for(let Be=0;Be<ce;Be++){for(let _e=0;_e<R+4;_e++)r.readBits(1);r.readBits(1)}}let $=0,U=1,K=1,V=!0,q=1,H=0;r.readBoolean(),r.readBoolean();let z=!1;if(r.readBoolean()){if(r.readBoolean()){const Ce=r.readUByte(),Qe=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],me=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Ce>0&&Ce<16?(U=Qe[Ce-1],K=me[Ce-1]):Ce===255&&(U=r.readBits(16),K=r.readBits(16))}if(r.readBoolean()&&r.readBoolean(),r.readBoolean()&&(r.readBits(3),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.readUByte(),r.readUByte())),r.readBoolean()&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean(),z=r.readBoolean(),z&&(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG()),r.readBoolean()&&(q=r.readBits(32),H=r.readBits(32),r.readBoolean()&&r.readUEG(),r.readBoolean())){const me=r.readBoolean(),Pe=r.readBoolean();let be=!1;(me||Pe)&&(be=r.readBoolean(),be&&(r.readUByte(),r.readBits(5),r.readBoolean(),r.readBits(5)),r.readBits(4),r.readBits(4),be&&r.readBits(4),r.readBits(5),r.readBits(5),r.readBits(5));for(let le=0;le<=n;le++){V=r.readBoolean();const Ee=V||r.readBoolean();let ve=!1;Ee?r.readEG():ve=r.readBoolean();const pe=ve?1:r.readUEG()+1;if(me)for(let re=0;re<pe;re++)r.readUEG(),r.readUEG(),be&&(r.readUEG(),r.readUEG()),r.skipBits(1);if(Pe)for(let re=0;re<pe;re++)r.readUEG(),r.readUEG(),be&&(r.readUEG(),r.readUEG()),r.skipBits(1)}}r.readBoolean()&&(r.readBoolean(),r.readBoolean(),r.readBoolean(),$=r.readUEG())}let X=b,ne=S;if(C){let ce=1,Be=1;w===1?ce=Be=2:w==2&&(ce=2),X=b-ce*B-ce*T,ne=S-Be*I-Be*_}const ee=i?["A","B","C"][i]:"",G=o<<24|l<<16|u<<8|d;let ge=0;for(let ce=0;ce<32;ce++)ge=(ge|(G>>ce&1)<<31-ce)>>>0;let ye=ge.toString(16);return a===1&&ye==="2"&&(ye="6"),{codecString:`hvc1.${ee}${a}.${ye}.${s?"H":"L"}${x}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:i,general_profile_compatibility_flags:[o,l,u,d],general_constraint_indicator_flags:[A,f,h,m,p,g],general_level_idc:x,bit_depth:L+8,bit_depth_luma_minus8:L,bit_depth_chroma_minus8:N,min_spatial_segmentation_idc:$,chroma_format_idc:w,frame_rate:{fixed:V,fps:H/q}},width:X,height:ne,pixelRatio:[U,K]}}readPPS(e){const r=new op(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.skipUEG(),r.skipUEG(),r.skipBits(2),r.skipBits(3),r.skipBits(2),r.skipUEG(),r.skipUEG(),r.skipEG(),r.skipBits(2),r.readBoolean()&&r.skipUEG(),r.skipEG(),r.skipEG(),r.skipBits(4);const i=r.readBoolean(),s=r.readBoolean();let a=1;return s&&i?a=0:s?a=3:i&&(a=2),{parallelismType:a}}matchSPS(e,r){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,r).substr(3)}}const Hr=188;class nl{constructor(e,r,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,r){const n=nl.syncOffset(e);return n>0&&r.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const r=e.length;let n=Math.min(Hr*5,r-Hr)+1,i=0;for(;i<n;){let s=!1,a=-1,o=0;for(let l=i;l<r;l+=Hr)if(e[l]===71&&(r-l===Hr||e[l+Hr]===71)){if(o++,a===-1&&(a=l,a!==0&&(n=Math.min(a+Hr*99,e.length-Hr)+1)),s||(s=LB(e,l)===0),s&&o>1&&(a===0&&o>2||l+Hr>n))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,r){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:DV[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?r:void 0}}resetInitSegment(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=nl.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=nl.createTrack("audio",i),this._id3Track=nl.createTrack("id3"),this._txtTrack=nl.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:r,_id3Track:n}=this;e&&(e.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,r,n=!1,i=!1){n||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack;let d=a.pid,A=a.pesData,f=o.pid,h=l.pid,m=o.pesData,p=l.pesData,g=null,x=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(e=Yi(this.remainderData,e),y=e.length,this.remainderData=null),y<Hr&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};const w=Math.max(0,nl.syncOffset(e));y-=(y-w)%Hr,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let b=0;for(let C=w;C<y;C+=Hr)if(e[C]===71){const T=!!(e[C+1]&64),B=LB(e,C),_=(e[C+3]&48)>>4;let I;if(_>1){if(I=C+5+e[C+4],I===C+Hr)continue}else I=C+4;switch(B){case d:T&&(A&&(s=id(A,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,u,s,!1)),A={data:[],size:0}),A&&(A.data.push(e.subarray(I,C+Hr)),A.size+=C+Hr-I);break;case f:if(T){if(m&&(s=id(m,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(I,C+Hr)),m.size+=C+Hr-I);break;case h:T&&(p&&(s=id(p,this.logger))&&this.parseID3PES(l,s),p={data:[],size:0}),p&&(p.data.push(e.subarray(I,C+Hr)),p.size+=C+Hr-I);break;case 0:T&&(I+=e[I]+1),v=this._pmtId=lpe(e,I);break;case v:{T&&(I+=e[I]+1);const L=cpe(e,I,this.typeSupported,n,this.observer,this.logger);d=L.videoPid,d>0&&(a.pid=d,a.segmentCodec=L.segmentVideoCodec),f=L.audioPid,f>0&&(o.pid=f,o.segmentCodec=L.segmentAudioCodec),h=L.id3Pid,h>0&&(l.pid=h),g!==null&&!x&&(this.logger.warn(`MPEG-TS PMT found at ${C} after unknown PID '${g}'. Backtracking to sync byte @${w} to parse all TS packets.`),g=null,C=w-188),x=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=B;break}}else b++;b>0&&jB(this.observer,new Error(`Found ${b} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=A,o.pesData=m,l.pesData=p;const S={audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};return i&&this.extractRemainingSamples(S),S}flush(){const{remainderData:e}=this;this.remainderData=null;let r;return e?r=this.demux(e,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(e){const{audioTrack:r,videoTrack:n,id3Track:i,textTrack:s}=e,a=n.pesData,o=r.pesData,l=i.pesData;let u;if(a&&(u=id(a,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,s,u,!0),n.pesData=null)):n.pesData=a,o&&(u=id(o,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,u);break;case"mp3":this.parseMPEGPES(r,u);break;case"ac3":this.parseAC3PES(r,u);break}r.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(u=id(l,this.logger))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=l}demuxSampleAes(e,r,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new spe(this.observer,this.config,r);return this.decrypt(i,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new ape:e==="hevc"&&(this.videoParser=new ope))}decrypt(e,r){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?r.decryptAacSamples(i.samples,0,()=>{s.samples?r.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&r.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,r){let n=0;const i=this.aacOverFlow;let s=r.data;if(i){this.aacOverFlow=null;const A=i.missing,f=i.sample.unit.byteLength;if(A===-1)s=Yi(i.sample.unit,s);else{const h=f-A;i.sample.unit.set(s.subarray(0,A),h),e.samples.push(i.sample),n=i.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!py(s,a);a++);if(a!==n){let A;const f=a<o-1;if(f?A=`AAC PES did not start with ADTS header,offset:${a}`:A="No ADTS header found in AAC PES",jB(this.observer,new Error(A),f,this.logger),!f)return}yG(e,this.observer,s,a,this.audioCodec);let l;if(r.pts!==void 0)l=r.pts;else if(i){const A=bG(e.samplerate);l=i.sample.pts+A}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,d;for(;a<o;)if(d=wG(e,s,a,l,u),a+=d.length,d.missing){this.aacOverFlow=d;break}else for(u++;a<o-1&&!py(s,a);a++);}parseMPEGPES(e,r){const n=r.data,i=n.length;let s=0,a=0;const o=r.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(BG(n,a)){const l=CG(e,n,a,o,s);if(l)a+=l.length,s++;else break}else a++}parseAC3PES(e,r){{const n=r.data,i=r.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let a=0,o=0,l;for(;o<s&&(l=IG(e,n,o,i,a++))>0;)o+=l}}parseID3PES(e,r){if(r.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=jt({},r,{type:this._videoTrack?Ai.emsg:Ai.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function LB(t,e){return((t[e+1]&31)<<8)+t[e+2]}function lpe(t,e){return(t[e+10]&31)<<8|t[e+11]}function cpe(t,e,r,n,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],l=e+3+o-4,u=(t[e+10]&15)<<8|t[e+11];for(e+=12+u;e<l;){const d=LB(t,e),A=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!n){xS("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=d);break;case 21:a.id3Pid===-1&&(a.id3Pid=d);break;case 219:if(!n){xS("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=d);break;case 3:case 4:!r.mpeg&&!r.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=d,a.segmentAudioCodec="mp3");break;case 193:if(!n){xS("AC-3",s);break}case 129:r.ac3?a.audioPid===-1&&(a.audioPid=d,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&A>0){let f=e+5,h=A;for(;h>2;){switch(t[f]){case 106:r.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=d,a.segmentAudioCodec="ac3");break}const p=t[f+1]+2;f+=p,h-=p}}break;case 194:case 135:return jB(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=d,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=A+5}return a}function jB(t,e,r,n){n.warn(`parsing error: ${e.message}`),t.emit(P.ERROR,P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:e,reason:e.message})}function xS(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function id(t,e){let r=0,n,i,s,a,o;const l=t.data;if(!t||t.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Yi(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>t.size-6)return null;const d=n[7];d&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,d&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),s=n[8];let A=s+9;if(t.size<=A)return null;t.size-=A;const f=new Uint8Array(t.size);for(let h=0,m=l.length;h<m;h++){n=l[h];let p=n.byteLength;if(A)if(A>p){A-=p;continue}else n=n.subarray(A),p-=A,A=0;f.set(n,r),r+=p}return i&&(i-=s+3),{data:f,pts:a,dts:o,len:i}}return null}class upe{static getSilentFrame(e,r){switch(e){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Qo=Math.pow(2,32)-1;class W{static init(){W.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in W.types)W.types.hasOwnProperty(e)&&(W.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);W.HDLR_TYPES={video:r,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);W.STTS=W.STSC=W.STCO=s,W.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),W.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),W.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),W.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);W.FTYP=W.box(W.types.ftyp,a,l,a,o),W.DINF=W.box(W.types.dinf,W.box(W.types.dref,i))}static box(e,...r){let n=8,i=r.length;const s=i;for(;i--;)n+=r[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<s;i++)a.set(r[i],n),n+=r[i].byteLength;return a}static hdlr(e){return W.box(W.types.hdlr,W.HDLR_TYPES[e])}static mdat(e){return W.box(W.types.mdat,e)}static mdhd(e,r){r*=e;const n=Math.floor(r/(Qo+1)),i=Math.floor(r%(Qo+1));return W.box(W.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return W.box(W.types.mdia,W.mdhd(e.timescale||0,e.duration||0),W.hdlr(e.type),W.minf(e))}static mfhd(e){return W.box(W.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?W.box(W.types.minf,W.box(W.types.smhd,W.SMHD),W.DINF,W.stbl(e)):W.box(W.types.minf,W.box(W.types.vmhd,W.VMHD),W.DINF,W.stbl(e))}static moof(e,r,n){return W.box(W.types.moof,W.mfhd(e),W.traf(n,r))}static moov(e){let r=e.length;const n=[];for(;r--;)n[r]=W.trak(e[r]);return W.box.apply(null,[W.types.moov,W.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(W.mvex(e)))}static mvex(e){let r=e.length;const n=[];for(;r--;)n[r]=W.trex(e[r]);return W.box.apply(null,[W.types.mvex,...n])}static mvhd(e,r){r*=e;const n=Math.floor(r/(Qo+1)),i=Math.floor(r%(Qo+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return W.box(W.types.mvhd,s)}static sdtp(e){const r=e.samples||[],n=new Uint8Array(4+r.length);let i,s;for(i=0;i<r.length;i++)s=r[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return W.box(W.types.sdtp,n)}static stbl(e){return W.box(W.types.stbl,W.stsd(e),W.box(W.types.stts,W.STTS),W.box(W.types.stsc,W.STSC),W.box(W.types.stsz,W.STSZ),W.box(W.types.stco,W.STCO))}static avc1(e){let r=[],n=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,r.push(a>>>8&255),r.push(a&255),r=r.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=W.box(W.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),l=e.width,u=e.height,d=e.pixelRatio[0],A=e.pixelRatio[1];return W.box(W.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,W.box(W.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),W.box(W.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,A>>24,A>>16&255,A>>8&255,A&255])))}static esds(e){const r=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...r,6,1,2])}static audioStsd(e){const r=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(e){return W.box(W.types.mp4a,W.audioStsd(e),W.box(W.types.esds,W.esds(e)))}static mp3(e){return W.box(W.types[".mp3"],W.audioStsd(e))}static ac3(e){return W.box(W.types["ac-3"],W.audioStsd(e),W.box(W.types.dac3,e.config))}static stsd(e){const{segmentCodec:r}=e;if(e.type==="audio"){if(r==="aac")return W.box(W.types.stsd,W.STSD,W.mp4a(e));if(r==="ac3"&&e.config)return W.box(W.types.stsd,W.STSD,W.ac3(e));if(r==="mp3"&&e.codec==="mp3")return W.box(W.types.stsd,W.STSD,W.mp3(e))}else if(e.pps&&e.sps){if(r==="avc")return W.box(W.types.stsd,W.STSD,W.avc1(e));if(r==="hevc"&&e.vps)return W.box(W.types.stsd,W.STSD,W.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${r}/${e.codec})`)}static tkhd(e){const r=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,s=e.height||0,a=Math.floor(n/(Qo+1)),o=Math.floor(n%(Qo+1));return W.box(W.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,r){const n=W.sdtp(e),i=e.id,s=Math.floor(r/(Qo+1)),a=Math.floor(r%(Qo+1));return W.box(W.types.traf,W.box(W.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),W.box(W.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),W.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,W.box(W.types.trak,W.tkhd(e),W.mdia(e))}static trex(e){const r=e.id;return W.box(W.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,r){const n=e.samples||[],i=n.length,s=12+16*i,a=new Uint8Array(s);let o,l,u,d,A,f;for(r+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),o=0;o<i;o++)l=n[o],u=l.duration,d=l.size,A=l.flags,f=l.cts,a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,A.isLeading<<2|A.dependsOn,A.isDependedOn<<6|A.hasRedundancy<<4|A.paddingValue<<1|A.isNonSync,A.degradPrio&61440,A.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*o);return W.box(W.types.trun,a)}static initSegment(e){W.types||W.init();const r=W.moov(e);return Yi(W.FTYP,r)}static hvc1(e){const r=e.params,n=[e.vps,e.sps,e.pps],i=4,s=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),i-1|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),n.length]);let a=s.length;for(let m=0;m<n.length;m+=1){a+=3;for(let p=0;p<n[m].length;p+=1)a+=2+n[m][p].length}const o=new Uint8Array(a);o.set(s,0),a=s.length;const l=n.length-1;for(let m=0;m<n.length;m+=1){o.set(new Uint8Array([32+m|(m===l?128:0),0,n[m].length]),a),a+=3;for(let p=0;p<n[m].length;p+=1)o.set(new Uint8Array([n[m][p].length>>8,n[m][p].length&255]),a),a+=2,o.set(n[m][p],a),a+=n[m][p].length}const u=W.box(W.types.hvcC,o),d=e.width,A=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return W.box(W.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,A>>8&255,A&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,W.box(W.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),W.box(W.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}}W.types=void 0;W.HDLR_TYPES=void 0;W.STTS=void 0;W.STSC=void 0;W.STCO=void 0;W.STSZ=void 0;W.VMHD=void 0;W.SMHD=void 0;W.STSD=void 0;W.FTYP=void 0;W.DINF=void 0;const RG=9e4;function hP(t,e,r=1,n=!1){const i=t*e*r;return n?Math.round(i):i}function dpe(t,e,r=1,n=!1){return hP(t,e,1/r,n)}function sh(t,e=!1){return hP(t,1e3,1/RG,e)}function Ape(t,e=1){return hP(t,RG,1/e)}function qM(t){const{baseTime:e,timescale:r,trackId:n}=t;return`${e/r} (${e}/${r}) trackId: ${n}`}const fpe=10*1e3,hpe=1024,ppe=1152,mpe=1536;let sd=null,vS=null;function XM(t,e,r,n){return{duration:e,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class ev extends Zi{constructor(e,r,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.ISGenerated=!1,sd===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);sd=a?parseInt(a[1]):0}if(vS===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);vS=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const r=this._initPTS;(!r||!e||e.trackId!==r.trackId||e.baseTime!==r.baseTime||e.timescale!==r.timescale)&&this.log(`Reset initPTS: ${r&&qM(r)} > ${e&&qM(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let r=!1;const n=e[0].pts,i=e.reduce((s,a)=>{let o=a.pts,l=o-s;return l<-4294967296&&(r=!0,o=ai(o,n),l=o-s),l>0?s:o},n);return r&&this.debug("PTS rollover detected"),i}remux(e,r,n,i,s,a,o,l){let u,d,A,f,h,m,p=s,g=s;const x=e.pid>-1,v=r.pid>-1,y=r.samples.length,w=e.samples.length>0,b=o&&y>0||y>1;if((!x||w)&&(!v||b)||this.ISGenerated||o){if(this.ISGenerated){var C,T,B,_;const R=this.videoTrackConfig;(R&&(r.width!==R.width||r.height!==R.height||((C=r.pixelRatio)==null?void 0:C[0])!==((T=R.pixelRatio)==null?void 0:T[0])||((B=r.pixelRatio)==null?void 0:B[1])!==((_=R.pixelRatio)==null?void 0:_[1]))||!R&&b||this.nextAudioTs===null&&w)&&this.resetInitSegment()}this.ISGenerated||(A=this.generateIS(e,r,s,a));const I=this.isVideoContiguous;let L=-1,N;if(b&&(L=gpe(r.samples),!I&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,L>0){this.warn(`Dropped ${L} out of ${y} video samples due to a missing keyframe`);const R=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(L),r.dropped+=L,g+=(r.samples[0].pts-R)/r.inputTimeScale,N=g}else L===-1&&(this.warn(`No keyframe found out of ${y} video samples`),m=!1);if(this.ISGenerated){if(w&&b){const R=this.getVideoStartPts(r.samples),k=(ai(e.samples[0].pts,R)-R)/r.inputTimeScale;p+=Math.max(0,k),g+=Math.max(0,-k)}if(w){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),A=this.generateIS(e,r,s,a)),d=this.remuxAudio(e,p,this.isAudioContiguous,a,v||b||l===ke.AUDIO?g:void 0),b){const R=d?d.endPTS-d.startPTS:0;r.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),A=this.generateIS(e,r,s,a)),u=this.remuxVideo(r,g,I,R)}}else b&&(u=this.remuxVideo(r,g,I,0));u&&(u.firstKeyFrame=L,u.independent=L!==-1,u.firstKeyFramePTS=N)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=kG(n,s,this._initPTS,this._initDTS)),i.samples.length&&(f=LG(i,s,this._initPTS))),{audio:d,video:u,initSegment:A,independent:m,text:f,id3:h}}computeInitPts(e,r,n,i){const s=Math.round(n*r);let a=ai(e,s);if(a<s+r)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-a)/r} ${i}`);a<s+r;)a+=8589934592;return a-s}generateIS(e,r,n,i){const s=e.samples,a=r.samples,o=this.typeSupported,l={},u=this._initPTS;let d=!u||i,A="audio/mp4",f,h,m,p=-1;if(d&&(f=h=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(A="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:A,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):W.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(p=e.id,m=e.inputTimeScale,!u||m!==u.timescale?f=h=this.computeInitPts(s[0].pts,m,n,"audio"):d=!1)}if(r.sps&&r.pps&&a.length){if(r.timescale=r.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:W.initSegment([r]),metadata:{width:r.width,height:r.height}},d)if(p=r.id,m=r.inputTimeScale,!u||m!==u.timescale){const g=this.getVideoStartPts(a),x=ai(a[0].dts,g),v=this.computeInitPts(x,m,n,"video"),y=this.computeInitPts(g,m,n,"video");h=Math.min(h,v),f=Math.min(f,y)}else d=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,d?(u&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${f/m} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${f/m} (${f}/${m}) trackId: ${p}`),this._initPTS={baseTime:f,timescale:m,trackId:p},this._initDTS={baseTime:h,timescale:m,trackId:p}):f=m=void 0,{tracks:l,initPTS:f,timescale:m,trackId:p}}remuxVideo(e,r,n,i){const s=e.inputTimeScale,a=e.samples,o=[],l=a.length,u=this._initPTS,d=u.baseTime*s/u.timescale;let A=this.nextVideoTs,f=8,h=this.videoSampleDuration,m,p,g=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,v=!1;if(!n||A===null){const $=d+r*s,U=a[0].pts-ai(a[0].dts,a[0].pts);sd&&A!==null&&Math.abs($-U-(A+d))<15e3?n=!0:A=$-U-d}const y=A+d;for(let $=0;$<l;$++){const U=a[$];U.pts=ai(U.pts,y),U.dts=ai(U.dts,y),U.dts<a[$>0?$-1:$].dts&&(v=!0)}v&&a.sort(function($,U){const K=$.dts-U.dts,V=$.pts-U.pts;return K||V}),m=a[0].dts,p=a[a.length-1].dts;const w=p-m,b=w?Math.round(w/(l-1)):h||e.inputTimeScale/30;if(n){const $=m-y,U=$>b,K=$<-1;if((U||K)&&(U?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${sh($,!0)} ms (${$}dts) hole between fragments detected at ${r.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${sh(-$,!0)} ms (${$}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!K||y>=a[0].pts||sd)){m=y;const V=a[0].pts-$;if(U)a[0].dts=m,a[0].pts=V;else{let q=!0;for(let H=0;H<a.length&&!(a[H].dts>V&&q);H++){const z=a[H].pts;if(a[H].dts-=$,a[H].pts-=$,H<a.length-1){const ae=a[H+1].pts,X=a[H].pts,ne=ae<=X,ee=ae<=z;q=ne==ee}}}this.log(`Video: Initial PTS/DTS adjusted: ${sh(V,!0)}/${sh(m,!0)}, delta: ${sh($,!0)} ms`)}}m=Math.max(0,m);let S=0,C=0,T=m;for(let $=0;$<l;$++){const U=a[$],K=U.units,V=K.length;let q=0;for(let H=0;H<V;H++)q+=K[H].data.length;C+=q,S+=V,U.length=q,U.dts<T?(U.dts=T,T+=b/4|0||1):T=U.dts,g=Math.min(U.pts,g),x=Math.max(U.pts,x)}p=a[l-1].dts;const B=C+4*S+8;let _;try{_=new Uint8Array(B)}catch($){this.observer.emit(P.ERROR,P.ERROR,{type:Ue.MUX_ERROR,details:Y.REMUX_ALLOC_ERROR,fatal:!1,error:$,bytes:B,reason:`fail allocating video mdat ${B}`});return}const I=new DataView(_.buffer);I.setUint32(0,B),_.set(W.types.mdat,4);let L=!1,N=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY;for(let $=0;$<l;$++){const U=a[$],K=U.units;let V=0;for(let z=0,ae=K.length;z<ae;z++){const X=K[z],ne=X.data,ee=X.data.byteLength;I.setUint32(f,ee),f+=4,_.set(ne,f),f+=ee,V+=4+ee}let q;if($<l-1)h=a[$+1].dts-U.dts,q=a[$+1].pts-U.pts;else{const z=this.config,ae=$>0?U.dts-a[$-1].dts:b;if(q=$>0?U.pts-a[$-1].pts:b,z.stretchShortVideoTrack&&this.nextAudioTs!==null){const X=Math.floor(z.maxBufferHole*s),ne=(i?g+i*s:this.nextAudioTs+d)-U.pts;ne>X?(h=ne-ae,h<0?h=ae:L=!0,this.log(`It is approximately ${ne/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=ae}else h=ae}const H=Math.round(U.pts-U.dts);N=Math.min(N,h),M=Math.max(M,h),R=Math.min(R,q),k=Math.max(k,q),o.push(XM(U.key,h,V,H))}if(o.length){if(sd){if(sd<70){const $=o[0].flags;$.dependsOn=2,$.isNonSync=0}}else if(vS&&k-R<M-N&&b/M<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let $=m;for(let U=0,K=o.length;U<K;U++){const V=$+o[U].duration,q=$+o[U].cts;if(U<K-1){const H=V+o[U+1].cts;o[U].duration=H-q}else o[U].duration=U?o[U-1].duration:b;o[U].cts=0,$=V}}}h=L||!h?b:h;const O=p+h;this.nextVideoTs=A=O-d,this.videoSampleDuration=h,this.isVideoContiguous=!0;const F={data1:W.moof(e.sequenceNumber++,m,jt(e,{samples:o})),data2:_,startPTS:(g-d)/s,endPTS:(x+h-d)/s,startDTS:(m-d)/s,endDTS:A/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,F}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return ppe;case"ac3":return mpe;default:return hpe}}remuxAudio(e,r,n,i,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,u=this.getSamplesPerFrame(e),d=u*l,A=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],m=s!==void 0;let p=e.samples,g=f?0:8,x=this.nextAudioTs||-1;const v=A.baseTime*a/A.timescale,y=v+r*a;if(this.isAudioContiguous=n=n||p.length&&x>0&&(i&&Math.abs(y-(x+v))<9e3||Math.abs(ai(p[0].pts,y)-(x+v))<20*d),p.forEach(function(k){k.pts=ai(k.pts,y)}),!n||x<0){const k=p.length;if(p=p.filter(O=>O.pts>=0),k!==p.length&&this.warn(`Removed ${p.length-k} of ${k} samples (initPTS ${v} / ${a})`),!p.length)return;s===0?x=0:i&&!m?x=Math.max(0,y-v):x=p[0].pts-v}if(e.segmentCodec==="aac"){const k=this.config.maxAudioFramesDrift;for(let O=0,j=x+v;O<p.length;O++){const D=p[O],F=D.pts,$=F-j,U=Math.abs(1e3*$/a);if($<=-k*d&&m)O===0&&(this.warn(`Audio frame @ ${(F/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*$/a)} ms.`),this.nextAudioTs=x=F-v,j=F);else if($>=k*d&&U<fpe&&m){let K=Math.round($/d);for(j=F-K*d;j<0&&K&&d;)K--,j+=d;O===0&&(this.nextAudioTs=x=j-v),this.warn(`Injecting ${K} audio frames @ ${((j-v)/a).toFixed(3)}s due to ${Math.round(1e3*$/a)} ms gap.`);for(let V=0;V<K;V++){let q=upe.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);q||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),q=D.unit.subarray()),p.splice(O,0,{unit:q,pts:j}),j+=d,O++}}D.pts=j,j+=d}}let w=null,b=null,S,C=0,T=p.length;for(;T--;)C+=p[T].unit.byteLength;for(let k=0,O=p.length;k<O;k++){const j=p[k],D=j.unit;let F=j.pts;if(b!==null){const U=h[k-1];U.duration=Math.round((F-b)/l)}else if(n&&e.segmentCodec==="aac"&&(F=x+v),w=F,C>0){C+=g;try{S=new Uint8Array(C)}catch(U){this.observer.emit(P.ERROR,P.ERROR,{type:Ue.MUX_ERROR,details:Y.REMUX_ALLOC_ERROR,fatal:!1,error:U,bytes:C,reason:`fail allocating audio mdat ${C}`});return}f||(new DataView(S.buffer).setUint32(0,C),S.set(W.types.mdat,4))}else return;S.set(D,g);const $=D.byteLength;g+=$,h.push(XM(!0,u,$,0)),b=F}const B=h.length;if(!B)return;const _=h[h.length-1];x=b-v,this.nextAudioTs=x+l*_.duration;const I=f?new Uint8Array(0):W.moof(e.sequenceNumber++,w/l,jt({},e,{samples:h}));e.samples=[];const L=(w-v)/a,N=this.nextAudioTs/a,M={data1:I,data2:S,startPTS:L,endPTS:N,startDTS:L,endDTS:N,type:"audio",hasAudio:!0,hasVideo:!1,nb:B};return this.isAudioContiguous=!0,M}}function ai(t,e){let r;if(e===null)return t;for(e<t?r=-8589934592:r=8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function gpe(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function kG(t,e,r,n){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let o=0;o<i;o++){const l=t.samples[o];l.pts=ai(l.pts-r.baseTime*s/r.timescale,e*s)/s,l.dts=ai(l.dts-n.baseTime*s/n.timescale,e*s)/s}const a=t.samples;return t.samples=[],{samples:a}}function LG(t,e,r){const n=t.samples.length;if(!n)return;const i=t.inputTimeScale;for(let a=0;a<n;a++){const o=t.samples[a];o.pts=ai(o.pts-r.baseTime*i/r.timescale,e*i)/i}t.samples.sort((a,o)=>a.pts-o.pts);const s=t.samples;return t.samples=[],{samples:s}}class xpe extends Zi{constructor(e,r,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const r=this.initPTS;r&&e&&r.baseTime===e.baseTime&&r.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,r,n,i){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,r){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:a}=this.initData=UV(e);if(r)sfe(e,r);else{const l=s||a;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}s&&(n=ZM(s,Mt.AUDIO,this)),a&&(i=ZM(a,Mt.VIDEO,this));const o={};s&&a?o.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:s?o.audio={container:"audio/mp4",codec:n,encrypted:s.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:i,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,r,n,i,s,a){var o,l;let{initPTS:u,lastEndTime:d}=this;const A={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Te(d)||(d=this.lastEndTime=s||0);const f=r.samples;if(!f.length)return A;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let m=this.initData;if((o=m)!=null&&o.length||(this.generateInitSegment(f),m=this.initData),!((l=m)!=null&&l.length))return this.warn("Failed to generate initSegment."),A;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const p=ofe(f,m,this),g=m.audio?p[m.audio.id]:null,x=m.video?p[m.video.id]:null,v=p0(x,1/0),y=p0(g,1/0),w=p0(x,0,!0),b=p0(g,0,!0);let S=s,C=0;const T=g&&(!x||!u&&y<v||u&&u.trackId===m.audio.id),B=T?g:x;if(B){const j=B.timescale,D=B.start-s*j,F=T?m.audio.id:m.video.id;S=B.start/j,C=T?b-y:w-v,(a||!u)&&(vpe(u,S,s,C)||j!==u.timescale)&&(u&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${s} ${D/j} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${S-s} (${D}/${j}) trackId: ${F}`),u=null,h.initPTS=D,h.timescale=j,h.trackId=F)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);u?(h.initPTS=u.baseTime,h.timescale=u.timescale,h.trackId=u.trackId):((!h.timescale||h.trackId===void 0||h.initPTS===void 0)&&(this.warn("Could not set initPTS"),h.initPTS=S,h.timescale=1,h.trackId=-1),this.initPTS=u={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const _=S-u.baseTime/u.timescale,I=_+C;C>0?this.lastEndTime=I:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const L=!!m.audio,N=!!m.video;let R="";L&&(R+="audio"),N&&(R+="video");const M=(m.audio?m.audio.encrypted:!1)||(m.video?m.video.encrypted:!1),k={data1:f,startPTS:_,startDTS:_,endPTS:I,endDTS:I,type:R,hasAudio:L,hasVideo:N,nb:1,dropped:0,encrypted:M};A.audio=L&&!N?k:void 0,A.video=N?k:void 0;const O=x==null?void 0:x.sampleCount;if(O){const j=x.keyFrameIndex,D=j!==-1;k.nb=O,k.dropped=j===0||this.isVideoContiguous?0:D?j:O,k.independent=D,k.firstKeyFrame=j,D&&x.keyFrameStart&&(k.firstKeyFramePTS=(x.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(A.independent=D),this.isVideoContiguous||(this.isVideoContiguous=D),k.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${j}/${O} dropped: ${k.dropped} start: ${k.firstKeyFramePTS||"NA"}`)}return A.initSegment=h,A.id3=kG(n,s,u,u),i.samples.length&&(A.text=LG(i,s,u)),A}}function p0(t,e,r=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(r?t.duration:0))/t.timescale:e}function vpe(t,e,r,n){if(t===null)return!0;const i=Math.max(n,1),s=e-t.baseTime/t.timescale;return Math.abs(s-r)>i}function ZM(t,e,r){const n=t.codec;return n&&n.length>4?n:e===Mt.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?oy(n,!1):(r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let za;try{za=self.performance.now.bind(self.performance)}catch{za=Date.now}const tv=[{demux:ipe,remux:xpe},{demux:nl,remux:ev},{demux:epe,remux:ev},{demux:rpe,remux:ev}];tv.splice(2,0,{demux:tpe,remux:ev});class JM{constructor(e,r,n,i,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=r,this.config=n,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,r,n,i){const s=n.transmuxing;s.executeStart=za();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:d,trackSwitch:A,accurateTimeOffset:f,timeOffset:h,initSegmentChange:m}=i||o,{audioCodec:p,videoCodec:g,defaultInitPts:x,duration:v,initSegmentData:y}=l,w=ype(a,r);if(w&&eA(w.method)){const T=this.getDecrypter(),B=sP(w.method);if(T.isSync()){let _=T.softwareDecrypt(a,w.key.buffer,w.iv.buffer,B);if(n.part>-1){const L=T.flush();_=L&&L.buffer}if(!_)return s.executeEnd=za(),yS(n);a=new Uint8Array(_)}else return this.asyncResult=!0,this.decryptionPromise=T.webCryptoDecrypt(a,w.key.buffer,w.iv.buffer,B).then(_=>{const I=this.push(_,null,n);return this.decryptionPromise=null,I}),this.decryptionPromise}const b=this.needsProbing(d,A);if(b){const T=this.configureTransmuxer(a);if(T)return this.logger.warn(`[transmuxer] ${T.message}`),this.observer.emit(P.ERROR,P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!1,error:T,reason:T.message}),s.executeEnd=za(),yS(n)}(d||A||m||b)&&this.resetInitSegment(y,p,g,v,r),(d||m||b)&&this.resetInitialTimestamp(x),u||this.resetContiguity();const S=this.transmux(a,w,h,f,n);this.asyncResult=nm(S);const C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,s.executeEnd=za(),S}flush(e){const r=e.transmuxing;r.executeStart=za();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(n){const A=n.flush();A&&a.push(this.push(A.buffer,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u){r.executeEnd=za();const A=[yS(e)];return this.asyncResult?Promise.resolve(A):A}const d=l.flush(o);return nm(d)?(this.asyncResult=!0,d.then(A=>(this.flushRemux(a,A,e),a))):(this.flushRemux(a,d,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,r,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=r,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===ke.MAIN?"level":"track"} ${n.level}`);const d=this.remuxer.remux(i,s,a,o,u,l,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=za()}resetInitialTimestamp(e){const{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:r}=this;!e||!r||(e.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(e,r,n,i,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,r,n,i),o.resetInitSegment(e,r,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,r,n,i,s){let a;return r&&r.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,r,n,i,s):a=this.transmuxUnencrypted(e,n,i,s),a}transmuxUnencrypted(e,r,n,i){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,l,r,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,r,n,i,s){return this.demuxer.demuxSampleAes(e,r,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:r,observer:n,typeSupported:i}=this;let s;for(let A=0,f=tv.length;A<f;A++){var a;if((a=tv[A].demux)!=null&&a.probe(e,this.logger)){s=tv[A];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,u=s.remux,d=s.demux;(!l||!(l instanceof u))&&(this.remuxer=new u(n,r,i,this.logger)),(!o||!(o instanceof d))&&(this.demuxer=new d(n,r,i,this.logger),this.probe=d.probe)}needsProbing(e,r){return!this.demuxer||!this.remuxer||e||r}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new nP(this.config)),e}}function ype(t,e){let r=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(r=e),r}const yS=t=>({remuxResult:{},chunkMeta:t});function nm(t){return"then"in t&&t.then instanceof Function}class bpe{constructor(e,r,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=r,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class wpe{constructor(e,r,n,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}let eD=0;class jG{constructor(e,r,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=eD++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const u=l.data,d=this.hls;if(!(!d||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var A;const f=(A=this.workerContext)==null?void 0:A.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{d.logger[u.data.logType]&&d.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,d.trigger(u.event,u.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const u=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(l,u)=>{u=u||{},u.frag=this.frag||void 0,l===P.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(l,u)};this.observer=new lP,this.observer.on(P.FRAG_DECRYPTED,a),this.observer.on(P.ERROR,a);const o=pM(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(s.workerPath||The()){try{s.workerPath?(l.log(`loading Web Worker ${s.workerPath} for "${r}"`),this.workerContext=_he(s.workerPath)):(l.log(`injecting Web Worker for "${r}"`),this.workerContext=Bhe());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:r,config:Ft(s)})}catch(d){l.warn(`Error setting up "${r}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new JM(this.observer,o,s,"",r,e.logger)}return}}this.transmuxer=new JM(this.observer,o,s,"",r,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=eD++;const r=this.hls.config,n=pM(r.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Ft(r)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),Nhe(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,r,n,i,s,a,o,l,u,d){var A,f;u.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:m}=this,p=a?a.start:s.start,g=s.decryptdata,x=this.frag,v=!(x&&s.cc===x.cc),y=!(x&&u.level===x.level),w=x?u.sn-x.sn:-1,b=this.part?u.part-this.part.index:-1,S=w===0&&u.id>1&&u.id===(x==null?void 0:x.stats.chunkCount),C=!y&&(w===1||w===0&&(b===1||S&&b<=0)),T=self.performance.now();(y||w||s.stats.parsing.start===0)&&(s.stats.parsing.start=T),a&&(b||!C)&&(a.stats.parsing.start=T);const B=!(x&&((A=s.initSegment)==null?void 0:A.url)===((f=x.initSegment)==null?void 0:f.url)),_=new wpe(v,C,l,y,p,B);if(!C||v||B){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===ke.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${v}
        trackSwitch: ${y}
        contiguous: ${C}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${B}`);const I=new bpe(n,i,r,o,d);this.configureTransmuxer(I)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:g,chunkMeta:u,state:_},e instanceof ArrayBuffer?[e]:[]);else if(m){const I=m.push(e,g,u,_);nm(I)?I.then(L=>{this.handleTransmuxComplete(L)}).catch(L=>{this.transmuxerError(L,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(I)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:r,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);nm(i)?i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,r,n){this.hls&&(this.error=e,this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,r){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}configureTransmuxer(e){const{instanceNo:r,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:r,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const tD=100;class Epe extends oP{constructor(e,r,n){super(e,r,n,"audio-stream-controller",ke.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(P.BUFFER_RESET,this.onBufferReset,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(P.BUFFER_RESET,this.onBufferReset,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:s,trackId:a}){if(n===ke.MAIN){const o=r.cc,l=this.fragCurrent;if(this.initPTS[o]={baseTime:i,timescale:s,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${i/s} (${i}/${s}) trackId: ${a}`),this.mainAnchor=r,this.state===se.WAITING_INIT_PTS){const u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==o)&&this.syncWithAnchor(r,u==null?void 0:u.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==o?(l.abortRequests(),this.syncWithAnchor(r,l)):this.state===se.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,r){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(r&&(i==null?void 0:i.cc)===r.cc)return;const s=(i||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),l=XV(a,s,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===se.IDLE&&this.doTickIdle())}startLoad(e,r){if(!this.levels){this.startPosition=e,this.state=se.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(tD),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=se.IDLE):this.state=se.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}doTick(){switch(this.state){case se.IDLE:this.doTickIdle();break;case se.WAITING_TRACK:{const{levels:e,trackId:r}=this,n=e==null?void 0:e[r],i=n==null?void 0:n.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=se.WAITING_INIT_PTS}break}case se.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case se.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:r,part:n,cache:i,complete:s}=e,a=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=se.FRAG_LOADING;const o=i.flush().buffer,l={frag:r,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(l),s&&super._handleFragmentLoadComplete(l)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=se.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:r,levels:n,media:i,trackId:s}=this,a=r.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(n!=null&&n[s]))return;const o=n[s],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=se.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,Mt.AUDIO,ke.AUDIO));const d=this.getFwdBufferInfo(u,ke.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,l)){r.trigger(P.BUFFER_EOS,{type:"audio"}),this.state=se.ENDED;return}const A=d.len,f=r.maxBufferLength,h=l.fragments,m=h[0].start,p=this.getLoadPosition(),g=this.flushing?p:d.end;if(this.switchingTrack&&i){const y=p;l.PTSKnown&&y<m&&(d.end>m||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=m+.05)}if(A>=f&&!this.switchingTrack&&g<h[h.length-1].start)return;let x=this.getNextFragment(g,l);if(x&&this.isLoopLoading(x,g)&&(x=this.getNextFragmentLoopLoading(x,l,d,ke.MAIN,f)),!x){this.bufferFlushed=!0;return}let v=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&vr(x)&&!x.endList&&(!l.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===Lr.OK&&(this.mainFragLoading=v=null),v&&vr(v))){if(x.start>v.end){const w=this.fragmentTracker.getFragAtPos(g,ke.MAIN);w&&w.end>v.end&&(v=w,this.mainFragLoading={frag:w,targetBufferTime:null})}if(x.start>v.end)return}this.loadFragment(x,o,g)}onMediaDetaching(e,r){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,r)}onAudioTracksUpdated(e,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new em(n))}onAudioTrackSwitching(e,r){const n=!!r.url;this.trackId=r.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=r,this.flushAudioIfNeeded(r),this.state!==se.STOPPED&&(this.setInterval(tD),this.state=se.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=r,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,r){this.mainDetails=r.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(P.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,r){var n;const{levels:i}=this,{details:s,id:a,groupId:o,track:l}=r;if(!i){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}const u=this.mainDetails;if(!u||s.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=r,this.state!==se.STOPPED&&(this.state=se.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const d=i[a];let A=0;if(s.live||(n=d.details)!=null&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(d.details){var f;A=this.alignPlaylists(s,d.details,(f=this.levelLastLoaded)==null?void 0:f.details)}s.alignedSliding||(pG(s,u),s.alignedSliding||hy(s,u),A=s.fragmentStart)}d.details=s,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(u,A),this.hls.trigger(P.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:r.groupId}),this.state===se.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=se.IDLE),this.tick()}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:i,payload:s}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const u=l[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const d=u.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const A=a.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new jG(this.hls,ke.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],m=(r=n.initSegment)==null?void 0:r.data;if(h!==void 0){const g=i?i.index:-1,x=g!==-1,v=new iP(n.level,n.sn,n.stats.chunkCount,s.byteLength,g,x);f.push(s,m,A,"",n,i,d.totalduration,!1,v,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${o}`);const{cache:p}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new mG,complete:!1};p.push(new Uint8Array(s)),this.state!==se.STOPPED&&(this.state=se.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,r){this.bufferFlushed=this.flushing=!1;const n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,r){!this.audioOnly&&r.frag.type===ke.MAIN&&vr(r.frag)&&(this.mainFragLoading=r,this.state===se.IDLE&&this.tick())}onFragBuffered(e,r){const{frag:n,part:i}=r;if(n.type!==ke.AUDIO){!this.audioOnly&&n.type===ke.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(vr(n)){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(P.AUDIO_TRACK_SWITCHED,Bt({},s)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,r){var n;if(r.fatal){this.state=se.ERROR;return}switch(r.details){case Y.FRAG_GAP:case Y.FRAG_PARSING_ERROR:case Y.FRAG_DECRYPT_ERROR:case Y.FRAG_LOAD_ERROR:case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_ERROR:case Y.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ke.AUDIO,r);break;case Y.AUDIO_TRACK_LOAD_ERROR:case Y.AUDIO_TRACK_LOAD_TIMEOUT:case Y.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===se.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===at.AUDIO_TRACK&&(this.state=se.IDLE);break;case Y.BUFFER_ADD_CODEC_ERROR:case Y.BUFFER_APPEND_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case Y.BUFFER_FULL_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Y.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(e,{type:r}){r!==Mt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:r}){if(r!==Mt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===se.ENDED&&(this.state=se.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,ke.AUDIO),this.tick())}}_handleTransmuxComplete(e){var r;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:u,level:d}=o,{details:A}=d,{audio:f,text:h,id3:m,initSegment:p}=s;if(this.fragContextChanged(l)||!A){this.fragmentTracker.removeFragment(l);return}if(this.state=se.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),p!=null&&p.tracks){const g=l.initSegment||l;if(this.unhandledEncryptionError(p,l))return;this._bufferInitSegment(d,p.tracks,g,a),i.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:n,tracks:p.tracks})}if(f){const{startPTS:g,endPTS:x,startDTS:v,endDTS:y}=f;u&&(u.elementaryStreams[Mt.AUDIO]={startPTS:g,endPTS:x,startDTS:v,endDTS:y}),l.setElementaryStreamInfo(Mt.AUDIO,g,x,v,y),this.bufferFragmentData(f,l,u,a)}if(m!=null&&(r=m.samples)!=null&&r.length){const g=jt({id:n,frag:l,details:A},m);i.trigger(P.FRAG_PARSING_METADATA,g)}if(h){const g=jt({id:n,frag:l,details:A},h);i.trigger(P.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,r,n,i){if(this.state!==se.PARSING||(r.video&&delete r.video,r.audiovideo&&delete r.audiovideo,!r.audio))return;const s=r.audio;s.id=ke.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(P.BUFFER_CODECS,r);const o=s.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(P.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===Lr.NOT_LOADED||i===Lr.PARTIAL){var s;if(!vr(e))this._loadInitSegment(e,r);else if((s=r.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=se.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==r.details.fragmentStart&&hy(r.details,a)}else super.loadFragment(e,r,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:r,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;ou({name:r,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o},e,Ic)||(cy(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:r}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(P.AUDIO_TRACK_SWITCHED,Bt({},e))}}class pP extends Zi{constructor(e,r){super(r,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,r,n){const i=r==null?void 0:r.renditionReports;if(i){let s=-1;for(let a=0;a<i.length;a++){const o=i[a];let l;try{l=new self.URL(o.URI,r.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),l=o.URI||""}if(l===e){s=a;break}else l===e.substring(0,l.length)&&(s=a)}if(s!==-1){const a=i[s],o=parseInt(a["LAST-MSN"])||r.lastPartSn;let l=parseInt(a["LAST-PART"])||r.lastPartIndex;if(this.hls.config.lowLatencyMode){const d=Math.min(r.age-r.partTarget,r.targetduration);l>=0&&d>r.partTarget&&(l+=1)}const u=n&&mM(n);return new gM(o,l>=0?l:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,r){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,r){if(r)try{return r.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,r,n){const{details:i,stats:s}=r,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;i.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==i.appliedTimelineOffset){const d=Math.max(l||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(A=>{A.setStart(A.playlistOffset+d)})}if(i.live||n!=null&&n.live){const d="levelInfo"in r?r.levelInfo:r.track;if(i.reloaded(n),n&&i.fragments.length>0){phe(n,i,this);const v=i.playlistParsingError;if(v){this.warn(v);const y=this.hls;if(!y.config.ignorePlaylistParsingErrors){var u;const{networkDetails:w}=r;y.trigger(P.ERROR,{type:Ue.NETWORK_ERROR,details:Y.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:v,reason:v.message,level:r.level||void 0,parent:(u=i.fragments[0])==null?void 0:u.type,networkDetails:w,stats:s});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=s.loading.start);const A=this.hls.mainForwardBufferInfo,f=A?A.end-A.len:0,h=(i.edge-f)*1e3,m=uG(i,h);if(i.requestScheduled+m<a?i.requestScheduled=a:i.requestScheduled+=m,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let p,g,x;if(i.canBlockReload&&i.endSN&&i.advanced){const v=this.hls.config.lowLatencyMode,y=i.lastPartSn,w=i.endSN,b=i.lastPartIndex,S=b!==-1,C=y===w;S?C?(g=w+1,x=v?0:b):(g=y,x=v?b+1:i.maxPartIndex):g=w+1;const T=i.age,B=T+i.ageHeader;let _=Math.min(B-i.partTarget,i.targetduration*1.5);if(_>0){if(B>i.targetduration*3)this.log(`Playlist last advanced ${T.toFixed(2)}s ago. Omitting segment and part directives.`),g=void 0,x=void 0;else if(n!=null&&n.tuneInGoal&&B-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${_} with playlist age: ${i.age}`),_=0;else{const I=Math.floor(_/i.targetduration);if(g+=I,x!==void 0){const L=Math.round(_%i.targetduration/i.partTarget);x+=L}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${T.toFixed(2)}s goal: ${_} skip sn ${I} to part ${x}`)}i.tuneInGoal=_}if(p=this.getDeliveryDirectives(i,r.deliveryDirectives,g,x),v||!C){i.requestScheduled=a,this.loadingPlaylist(d,p);return}}else(i.canBlockReload||i.canSkipUntil)&&(p=this.getDeliveryDirectives(i,r.deliveryDirectives,g,x));p&&g!==void 0&&i.canBlockReload&&(i.requestScheduled=s.loading.first+Math.max(m-o*2,m/2)),this.scheduleLoading(d,p,i)}else this.clearTimer()}scheduleLoading(e,r,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,r);return}const s=self.performance.now(),a=i.requestScheduled;if(s>=a){this.loadingPlaylist(e,r);return}const o=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,r),o)}getDeliveryDirectives(e,r,n,i){let s=mM(e);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,i=r.part,s=Zx.No),new gM(n,i,s)}checkRetry(e){const r=e.details,n=uy(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=i||{},l=!!i&&!!o&&(s===tn.RetryRequest||!i.resolved&&s===tn.SendAlternateToPenaltyBox);if(l){var u;if(a>=o.maxNumRetry)return!1;if(n&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const d=rP(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${r}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}function MG(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!im(t[r].attrs,e[r].attrs))return!1;return!0}function im(t,e,r){const n=t["STABLE-RENDITION-ID"];return n&&!r?n===e["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function MB(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class Spe extends pP{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(P.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(e,r){const{id:n,groupId:i,details:s}=r,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=r.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,o)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(f=>!n||n.indexOf(f.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(f=>f.default)&&(this.selectDefaultTrack=!1),o.forEach((f,h)=>{f.id=h});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!s&&l){const f=sa(l,o,Ic);if(f>-1)s=o[f];else{const h=sa(l,this.tracks);s=this.tracks[h]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const d={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(P.AUDIO_TRACKS_UPDATED,d);const A=this.trackId;if(u!==-1&&A===-1)this.setAudioTrack(u);else if(o.length&&A===-1){var a;const f=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(f.message),this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,r){r.fatal||!r.context||r.context.type===at.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const r=this.hls;if(r.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&ou(e,i,Ic))return i;const s=sa(e,this.tracksInGroup,Ic);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(i){let a=r.loadLevel;a===-1&&(a=r.firstAutoLevel);const o=Mfe(e,r.levels,n,a,Ic);if(o===-1)return null;r.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=sa(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const r=this.tracksInGroup;if(e<0||e>=r.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(P.AUDIO_TRACK_SWITCHING,Bt({},i)),s))return;const a=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(a)}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||ou(e,i,Ic)))return n}if(e){const{name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:l}=e;for(let u=0;u<r.length;u++){const d=r[u];if(ou({name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:l},d,Ic))return u}for(let u=0;u<r.length;u++){const d=r[u];if(im(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<r.length;u++){const d=r[u];if(im(e.attrs,d.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const r=this.currentTrack;this.shouldLoadPlaylist(r)&&cy(r.url,this.hls)&&this.scheduleLoading(r,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,r),a=e.details,o=a==null?void 0:a.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${(r==null?void 0:r.msn)!==void 0?" at sn "+r.msn+" part "+r.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(P.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:r||null,track:e})}}class Cpe{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,r,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[r];i.push(e),i.length===1&&!n&&this.executeNext(r)}appendBlocker(e){return new Promise(r=>{const n={label:"async-blocker",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(r=>{if(this.queues){const n={label:"async-blocker-prepend",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var r;const n=(r=e[0])==null?void 0:r.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const r=this.queues[e];if(r.length){const i=r[0];try{i.execute()}catch(s){var n;if(i.onError(s),this.queues===null||this.tracks===null)return;const a=(n=this.tracks[e])==null?void 0:n.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var r;return((r=this.queues)==null?void 0:r[e][0])||null}toString(){const{queues:e,tracks:r}=this;return e===null||r===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var r,n;return(r=this.queues)!=null&&r[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var r;const n=(r=this.tracks)==null?void 0:r[e],i=n==null?void 0:n.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var r;return((r=this.queues)==null?void 0:r[e].map(n=>n.label).join(", "))||""}}const rD=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,DG="HlsJsTrackRemovedError";class Tpe extends Error{constructor(e){super(e),this.name=DG}}class Bpe extends Zi{constructor(e,r){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:s}=this;n&&this.log("Media source opened"),!(!i||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(P.MEDIA_ATTACHED,{media:i,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=r,this.appendSource=YAe(tc(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.BUFFER_RESET,this.onBufferReset,this),e.on(P.BUFFER_APPENDING,this.onBufferAppending,this),e.on(P.BUFFER_CODECS,this.onBufferCodecs,this),e.on(P.BUFFER_EOS,this.onBufferEos,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(P.FRAG_PARSED,this.onFragParsed,this),e.on(P.FRAG_CHANGED,this.onFragChanged,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.BUFFER_RESET,this.onBufferReset,this),e.off(P.BUFFER_APPENDING,this.onBufferAppending,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.BUFFER_EOS,this.onBufferEos,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(P.FRAG_PARSED,this.onFragParsed,this),e.off(P.FRAG_CHANGED,this.onFragChanged,this),e.off(P.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:r}=this;if(!e)return null;const n={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===r?jt(n,i.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(n[a]=jt({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:r,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,r){var n;let i=2;(r.audio&&!r.video||!r.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,r){const n=this.media=r.media;this.transferData=this.overrides=void 0;const i=tc(this.appendSource);if(i){const s=!!r.mediaSource;(s||r.overrides)&&(this.transferData=r,this.overrides=r.overrides);const a=this.mediaSource=r.mediaSource||new i;if(this.assignMediaSource(a),s)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&a instanceof l,nD(n),_pe(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var r,n;this.log(`${((r=this.transferData)==null?void 0:r.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,r=this.transferData;if(!r||!e)return;const n=this.tracks,i=r.tracks,s=i?Object.keys(i):null,a=s?s.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ft(n,(l,u)=>l==="initSegment"?void 0:u)};
transfer tracks: ${Ft(i,(l,u)=>l==="initSegment"?void 0:u)}}`),!kV(i,n)){r.mediaSource=null,r.tracks=void 0;const l=e.currentTime,u=this.details,d=Math.max(l,(u==null?void 0:u.fragments[0].start)||0);if(d-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${d} currentTime: ${l}`),this.onMediaDetaching(P.MEDIA_DETACHING,{}),this.onMediaAttaching(P.MEDIA_ATTACHING,r),e.currentTime=d;return}this.transferData=void 0,s.forEach(l=>{const u=l,d=i[u];if(d){const A=d.buffer;if(A){const f=this.fragmentTracker,h=d.id;if(f.hasFragments(h)||f.hasParts(h)){const g=Xe.getBuffered(A);f.detectEvictedFragments(u,g,h,null,!0)}const m=bS(u),p=[u,A];this.sourceBuffers[m]=p,A.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,d)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const r=(e=this.mediaSource)==null?void 0:e.readyState;return r==="open"||r==="ended"}onMediaDetaching(e,r){const n=!!r.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=s.readyState==="open";try{const l=s.sourceBuffers;for(let u=l.length;u--;)o&&l[u].abort(),s.removeSourceBuffer(l[u]);o&&s.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(i.removeAttribute("src"),this.appendSource&&nD(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(P.MEDIA_DETACHED,r)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var r;const n=(r=this.tracks[e])==null?void 0:r.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[bS(e)]=[null,null];const r=this.tracks[e];r&&(r.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Cpe(this.tracks)}onBufferCodecs(e,r){var n;const i=this.tracks,s=Object.keys(r);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in r&&(i.audio||i.video)||i.audiovideo&&("audio"in r||"video"in r),o=!a&&this.sourceBufferCount&&this.media&&s.some(l=>!i[l]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(l=>{var u,d;const A=r[l],{id:f,codec:h,levelCodec:m,container:p,metadata:g,supplemental:x}=A;let v=i[l];const y=(u=this.transferData)==null||(u=u.tracks)==null?void 0:u[l],w=y!=null&&y.buffer?y:v,b=(w==null?void 0:w.pendingCodec)||(w==null?void 0:w.codec),S=w==null?void 0:w.levelCodec;v||(v=i[l]={buffer:void 0,listeners:[],codec:h,supplemental:x,container:p,levelCodec:m,metadata:g,id:f});const C=Xx(b,S),T=C==null?void 0:C.replace(rD,"$1");let B=Xx(h,m);const _=(d=B)==null?void 0:d.replace(rD,"$1");B&&C&&T!==_&&(l.slice(0,5)==="audio"&&(B=oy(B,this.appendSource)),this.log(`switching codec ${b} to ${B}`),B!==(v.pendingCodec||v.codec)&&(v.pendingCodec=B),v.container=p,this.appendChangeType(l,p,B))}),(this.tracksReady||this.sourceBufferCount)&&(r.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!r.video&&((n=r.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,r)=>{const n=this.tracks[r];return e[r]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,r,n){const i=`${r};codecs=${n}`,s={label:`change-type=${i}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),a.codec=n,a.container=r)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var r;const n=e.start,i=n+e.duration*.05;if(((r=this.fragmentTracker.getAppendedFrag(n,ke.MAIN))==null?void 0:r.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>i||l!=null&&l.buffer&&Xe.isBuffered(l.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,ke.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:r}=this;e&&r&&(this.blockedAudioAppend=null,r.unblockAudio(e.op))}onBufferAppending(e,r){const{tracks:n}=this,{data:i,type:s,parent:a,frag:o,part:l,chunkMeta:u,offset:d}=r,A=u.buffering[s],{sn:f,cc:h}=o,m=self.performance.now();A.start=m;const p=o.stats.buffering,g=l?l.stats.buffering:null;p.start===0&&(p.start=m),g&&g.start===0&&(g.start=m);const x=n.audio;let v=!1;s==="audio"&&(x==null?void 0:x.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const y=n.video,w=y==null?void 0:y.buffer;if(w&&f!=="initSegment"){const C=l||o,T=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(y.ending||y.ended)){const _=C.start+C.duration*.05,I=w.buffered,L=this.currentOp("video");!I.length&&!L?this.blockAudio(C):!L&&!Xe.isBuffered(w,_)&&this.lastVideoAppendEnd<_&&this.blockAudio(C)}else if(s==="video"){const B=C.end;if(T){const _=T.frag.start;(B>_||B<this.lastVideoAppendEnd||Xe.isBuffered(w,_))&&this.unblockAudio()}this.lastVideoAppendEnd=B}}const b=(l||o).start,S={label:`append-${s}`,execute:()=>{var C;A.executeStart=self.performance.now();const T=(C=this.tracks[s])==null?void 0:C.buffer;T&&(v?this.updateTimestampOffset(T,b,.1,s,f,h):d!==void 0&&Te(d)&&this.updateTimestampOffset(T,d,1e-6,s,f,h)),this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{const C=self.performance.now();A.executeEnd=A.end=C,p.first===0&&(p.first=C),g&&g.first===0&&(g.first=C);const T={};this.sourceBuffers.forEach(([B,_])=>{B&&(T[B]=Xe.getBuffered(_))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(P.BUFFER_APPENDED,{type:s,frag:o,part:l,chunkMeta:u,parent:o.type,timeRanges:T})},onError:C=>{var T;const B={type:Ue.MEDIA_ERROR,parent:o.type,details:Y.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:l,chunkMeta:u,error:C,err:C,fatal:!1},_=(T=this.media)==null?void 0:T.error;if(C.code===DOMException.QUOTA_EXCEEDED_ERR||C.name=="QuotaExceededError"||"quota"in C)B.details=Y.BUFFER_FULL_ERROR;else if(C.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!_)B.errorAction=Jd(!0);else if(C.name===DG&&this.sourceBufferCount===0)B.errorAction=Jd(!0);else{const I=++this.appendErrors[s];this.warn(`Failed ${I}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${_||"no media error"})`),(I>=this.hls.config.appendErrorMaxRetry||_)&&(B.fatal=!0)}this.hls.trigger(P.ERROR,B)}};this.log(`queuing "${s}" append sn: ${f}${l?" p: "+l.index:""} of ${o.type===ke.MAIN?"level":"track"} ${o.level} cc: ${h}`),this.append(S,s,this.isPending(this.tracks[s]))}getFlushOp(e,r,n){return this.log(`queuing "${e}" remove ${r}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,r,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(P.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${r}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,r){const{type:n,startOffset:i,endOffset:s}=r;n?this.append(this.getFlushOp(n,i,s),n):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,i,s),a)})}onFragParsed(e,r){const{frag:n,part:i}=r,s=[],a=i?i.elementaryStreams:n.elementaryStreams;a[Mt.AUDIOVIDEO]?s.push("audiovideo"):(a[Mt.AUDIO]&&s.push("audio"),a[Mt.VIDEO]&&s.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const u=i?i.stats:n.stats;this.hls.trigger(P.FRAG_BUFFERED,{frag:n,part:i,stats:u,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,r){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const r=this.tracks[e];if(r)return!r.ended||r.ending}return!1})}onBufferEos(e,r){var n;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!r.type||r.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(P.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(P.BUFFERED_TO_END,void 0)):r.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const r=this.tracks[e];r&&(r.ending=!1)}})}onLevelUpdated(e,{details:r}){r.fragments.length&&(this.details=r,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,r){if(r.details===Y.BUFFER_APPEND_ERROR&&r.frag){var n;const i=(n=r.errorAction)==null?void 0:n.nextAutoLevel;Te(i)&&i!==r.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:r,media:n}=this;if(!n||r===null||!this.sourceBufferCount)return;const i=e.config,s=n.currentTime,a=r.levelTargetDuration,o=r.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Te(o)&&o>=0){const u=Math.max(o,a),d=Math.floor(s/a)*a-u;this.flushBackBuffer(s,a,d)}const l=i.frontBufferFlushThreshold;if(Te(l)&&l>0){const u=Math.max(i.maxBufferLength,l),d=Math.max(u,a),A=Math.floor(s/a)*a+d;this.flushFrontBuffer(s,a,A)}}flushBackBuffer(e,r,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const o=Xe.getBuffered(s);if(o.length>0&&n>o.start(0)){var a;this.hls.trigger(P.BACK_BUFFER_REACHED,{bufferEnd:n});const l=this.tracks[i];if((a=this.details)!=null&&a.live)this.hls.trigger(P.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,r,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const a=Xe.getBuffered(s),o=a.length;if(o<2)return;const l=a.start(o-1),u=a.end(o-1);if(n>l||e>=l&&e<=u)return;this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:r,mediaSource:n}=this;if(!r||!this.media||(n==null?void 0:n.readyState)!=="open")return null;const i=r.edge;if(r.live&&this.hls.config.liveDurationInfinity){if(r.fragments.length&&n.setLiveSeekableRange){const u=Math.max(0,r.fragmentStart),d=Math.max(u,i);return{duration:1/0,start:u,end:d}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return Te(s)?{duration:s}:null;const a=this.media.duration,o=Te(n.duration)?n.duration:0;return i>o&&i>a||!Te(a)?{duration:i}:null}updateMediaSource({duration:e,start:r,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Te(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),r!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${r}-${n}.`),i.setLiveSeekableRange(r,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:r,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${r} codec events expected: ${e}) ${Ft(n)}`),this.tracksReady){var i;const s=(i=this.transferData)==null?void 0:i.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([r,n])=>{if(r){const i=this.tracks[r];e[r]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(P.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([r])=>{this.executeNext(r)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:r,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const l=this.getTrackCodec(o,a),u=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${u})${this.currentOp(a)?" Queued":""} ${Ft(o)}`);try{const d=n.addSourceBuffer(u),A=bS(a),f=[a,d];r[A]=f,o.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(a),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[a],this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:a,mimeType:u,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,r){const n=e.supplemental;let i=e.codec;n&&(r==="video"||r==="audiovideo")&&Zp(n,"video")&&(i=gfe(i,n));const s=Xx(i,e.levelCodec);return s?r.slice(0,5)==="audio"?oy(s,this.appendSource):s:""}trackSourceBuffer(e,r){const n=r.buffer;if(!n)return;const i=this.getTrackCodec(r,e);this.tracks[e]={buffer:n,codec:i,container:r.container,levelCodec:r.levelCodec,supplemental:r.supplemental,metadata:r.metadata,id:r.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(P.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,r;const n=((e=this.media)==null||(r=e.querySelector)==null?void 0:r.call(e,"source"))||this.media;return n==null?void 0:n.src}onSBUpdateStart(e){const r=this.currentOp(e);r&&r.onStart()}onSBUpdateEnd(e){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,r){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,r),this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.currentOp(e);s&&s.onError(i)}updateTimestampOffset(e,r,n,i,s,a){const o=r-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${r} (sn: ${s} cc: ${a})`),e.timestampOffset=r)}removeExecutor(e,r,n){const{media:i,mediaSource:s}=this,a=this.tracks[e],o=a==null?void 0:a.buffer;if(!i||!s||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Te(i.duration)?i.duration:1/0,u=Te(s.duration)?s.duration:1/0,d=Math.max(0,r),A=Math.min(n,l,u);A>d&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${d},${A}] from the ${e} SourceBuffer`),o.remove(d,A)):this.shiftAndExecuteNext(e)}appendExecutor(e,r){const n=this.tracks[r],i=n==null?void 0:n.buffer;if(!i)throw new Tpe(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(r=>{this.warn(`SourceBuffer blocked callback ${r}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(r){this.warn(`Callback run without blocking ${this.operationQueue} ${r}`)}}isUpdating(){return this.sourceBuffers.some(([e,r])=>e&&r.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,r=this.sourceBufferTypes){if(!r.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=r.map(a=>this.appendBlocker(a));return r.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(a=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(r=>{var n;const i=(n=this.tracks[r])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(r)})}append(e,r,n){this.operationQueue&&this.operationQueue.append(e,r,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,r)=>e+(this.isPending(this.tracks[r])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[r])=>e+(r?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,r,n){const i=this.tracks[e];if(!i)return;const s=i.buffer;if(!s)return;const a=n.bind(this,e);i.listeners.push({event:r,listener:a}),s.addEventListener(r,a)}removeBufferListeners(e){const r=this.tracks[e];if(!r)return;const n=r.buffer;n&&(r.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),r.listeners.length=0)}}function nD(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(r=>{t.removeChild(r)})}function _pe(t,e){const r=self.document.createElement("source");r.type="video/mp4",r.src=e,t.appendChild(r)}function bS(t){return t==="audio"?1:0}class mP{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.BUFFER_CODECS,this.onBufferCodecs,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,r){const n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,r){const n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(e,r){this.timer&&Te(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const r=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&r.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=n,r.autoLevelEnabled&&r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(e){const r=this.hls.levels;if(!r.length)return-1;const n=r.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,mP.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,r={width:0,height:0};if(e){const n=e.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||e.width||0,r.height=n.bottom-n.top||e.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,r,n){if(!(e!=null&&e.length))return-1;const i=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let s=e.length-1;const a=Math.max(r,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&i(l,e[o+1])){s=o;break}}return s}}const Npe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Un=Npe,Ipe={HLS:"h"},Ppe=Ipe;class wa{constructor(e,r){Array.isArray(e)&&(e=e.map(n=>n instanceof wa?n:new wa(n))),this.value=e,this.params=r}}const Rpe="Dict";function kpe(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Lpe(t,e,r,n){return new Error(`failed to ${t} "${kpe(e)}" as ${r}`,{cause:n})}function Ea(t,e,r){return Lpe("serialize",t,e,r)}class OG{constructor(e){this.description=e}}const iD="Bare Item",jpe="Boolean";function Mpe(t){if(typeof t!="boolean")throw Ea(t,jpe);return t?"?1":"?0"}function Dpe(t){return btoa(String.fromCharCode(...t))}const Ope="Byte Sequence";function Fpe(t){if(ArrayBuffer.isView(t)===!1)throw Ea(t,Ope);return`:${Dpe(t)}:`}const Upe="Integer";function $pe(t){return t<-999999999999999||999999999999999<t}function FG(t){if($pe(t))throw Ea(t,Upe);return t.toString()}function Qpe(t){return`@${FG(t.getTime()/1e3)}`}function UG(t,e){if(t<0)return-UG(-t,e);const r=Math.pow(10,e);if(Math.abs(t*r%1-.5)<Number.EPSILON){const i=Math.floor(t*r);return(i%2===0?i:i+1)/r}else return Math.round(t*r)/r}const Hpe="Decimal";function Kpe(t){const e=UG(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ea(t,Hpe);const r=e.toString();return r.includes(".")?r:`${r}.0`}const Vpe="String",Gpe=/[\x00-\x1f\x7f]+/;function zpe(t){if(Gpe.test(t))throw Ea(t,Vpe);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Wpe(t){return t.description||t.toString().slice(7,-1)}const Ype="Token";function sD(t){const e=Wpe(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ea(e,Ype);return e}function DB(t){switch(typeof t){case"number":if(!Te(t))throw Ea(t,iD);return Number.isInteger(t)?FG(t):Kpe(t);case"string":return zpe(t);case"symbol":return sD(t);case"boolean":return Mpe(t);case"object":if(t instanceof Date)return Qpe(t);if(t instanceof Uint8Array)return Fpe(t);if(t instanceof OG)return sD(t);default:throw Ea(t,iD)}}const qpe="Key";function OB(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Ea(t,qpe);return t}function gP(t){return t==null?"":Object.entries(t).map(([e,r])=>r===!0?`;${OB(e)}`:`;${OB(e)}=${DB(r)}`).join("")}function $G(t){return t instanceof wa?`${DB(t.value)}${gP(t.params)}`:DB(t)}function Xpe(t){return`(${t.value.map($G).join(" ")})${gP(t.params)}`}function Zpe(t,e={whitespace:!0}){if(typeof t!="object"||t==null)throw Ea(t,Rpe);const r=t instanceof Map?t.entries():Object.entries(t),n=e!=null&&e.whitespace?" ":"";return Array.from(r).map(([i,s])=>{s instanceof wa||(s=new wa(s));let a=OB(i);return s.value===!0?a+=gP(s.params):(a+="=",Array.isArray(s.value)?a+=Xpe(s):a+=$G(s)),a}).join(`,${n}`)}function QG(t,e){return Zpe(t,e)}const $s="CMCD-Object",ur="CMCD-Request",gc="CMCD-Session",Ho="CMCD-Status",Jpe={br:$s,ab:$s,d:$s,ot:$s,tb:$s,tpb:$s,lb:$s,tab:$s,lab:$s,url:$s,pb:ur,bl:ur,tbl:ur,dl:ur,ltc:ur,mtp:ur,nor:ur,nrr:ur,rc:ur,sn:ur,sta:ur,su:ur,ttfb:ur,ttfbb:ur,ttlb:ur,cmsdd:ur,cmsds:ur,smrt:ur,df:ur,cs:ur,ts:ur,cid:gc,pr:gc,sf:gc,sid:gc,st:gc,v:gc,msd:gc,bs:Ho,bsd:Ho,cdn:Ho,rtp:Ho,bg:Ho,pt:Ho,ec:Ho,e:Ho},eme={REQUEST:ur};function tme(t){return Object.keys(t).reduce((e,r)=>{var n;return(n=t[r])===null||n===void 0||n.forEach(i=>e[i]=r),e},{})}function rme(t,e){const r={};if(!t)return r;const n=Object.keys(t),i=e?tme(e):{};return n.reduce((s,a)=>{var o;const l=Jpe[a]||i[a]||eme.REQUEST,u=(o=s[l])!==null&&o!==void 0?o:s[l]={};return u[a]=t[a],s},r)}function nme(t){return["ot","sf","st","e","sta"].includes(t)}function ime(t){return typeof t=="number"?Te(t):t!=null&&t!==""&&t!==!1}const HG="event";function sme(t,e){const r=new URL(t),n=new URL(e);if(r.origin!==n.origin)return t;const i=r.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+r.search+r.hash}const rv=t=>Math.round(t),FB=(t,e)=>Array.isArray(t)?t.map(r=>FB(r,e)):t instanceof wa&&typeof t.value=="string"?new wa(FB(t.value,e),t.params):(e.baseUrl&&(t=sme(t,e.baseUrl)),e.version===1?encodeURIComponent(t):t),m0=t=>rv(t/100)*100,ame=(t,e)=>{let r=t;return e.version>=2&&(t instanceof wa&&typeof t.value=="string"?r=new wa([t]):typeof t=="string"&&(r=[t])),FB(r,e)},ome={br:rv,d:rv,bl:m0,dl:m0,mtp:m0,nor:ame,rtp:m0,tb:rv},KG="request",VG="response",xP=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],lme=["e"],cme=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Uw(t){return cme.test(t)}function ume(t){return xP.includes(t)||lme.includes(t)||Uw(t)}const GG=["d","dl","nor","ot","rtp","su"];function dme(t){return xP.includes(t)||GG.includes(t)||Uw(t)}const Ame=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function fme(t){return xP.includes(t)||GG.includes(t)||Ame.includes(t)||Uw(t)}const hme=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function pme(t){return hme.includes(t)||Uw(t)}const mme={[VG]:fme,[HG]:ume,[KG]:dme};function zG(t,e={}){const r={};if(t==null||typeof t!="object")return r;const n=e.version||t.v||1,i=e.reportingMode||KG,s=n===1?pme:mme[i];let a=Object.keys(t).filter(s);const o=e.filter;typeof o=="function"&&(a=a.filter(o));const l=i===VG||i===HG;l&&!a.includes("ts")&&a.push("ts"),n>1&&!a.includes("v")&&a.push("v");const u=jt({},ome,e.formatters),d={version:n,reportingMode:i,baseUrl:e.baseUrl};return a.sort().forEach(A=>{let f=t[A];const h=u[A];if(typeof h=="function"&&(f=h(f,d)),A==="v"){if(n===1)return;f=n}A=="pr"&&f===1||(l&&A==="ts"&&!Te(f)&&(f=Date.now()),ime(f)&&(nme(A)&&typeof f=="string"&&(f=new OG(f)),r[A]=f))}),r}function gme(t,e={}){const r={};if(!t)return r;const n=zG(t,e),i=rme(n,e==null?void 0:e.customHeaderMap);return Object.entries(i).reduce((s,[a,o])=>{const l=QG(o,{whitespace:!1});return l&&(s[a]=l),s},r)}function xme(t,e,r){return jt(t,gme(e,r))}const vme="CMCD";function yme(t,e={}){return t?QG(zG(t,e),{whitespace:!1}):""}function bme(t,e={}){if(!t)return"";const r=yme(t,e);return encodeURIComponent(r)}function wme(t,e={}){if(!t)return"";const r=bme(t,e);return`${vme}=${r}`}const aD=/CMCD=[^&#]+/;function Eme(t,e,r){const n=wme(e,r);if(!n)return t;if(aD.test(t))return t.replace(aD,n);const i=t.includes("?")?"&":"?";return`${t}${i}${n}`}class Sme{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Un.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const{frag:s,part:a}=i,o=this.hls.levels[s.level],l=this.getObjectType(s),u={d:(a||s).duration*1e3,ot:l};(l===Un.VIDEO||l===Un.AUDIO||l==Un.MUXED)&&(u.br=o.bitrate/1e3,u.tb=this.getTopBandwidth(l)/1e3,u.bl=this.getBufferLength(l));const d=a?this.getNextPart(a):this.getNextFrag(s);d!=null&&d.url&&d.url!==s.url&&(u.nor=d.url),this.apply(i,u)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const r=this.config=e.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHED,this.onMediaDetached,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHED,this.onMediaDetached,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,r){var n,i;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=r.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Ppe.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,r={}){jt(r,this.createData());const n=r.ot===Un.INIT||r.ot===Un.VIDEO||r.ot===Un.MUXED;this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);const{includeKeys:i}=this;i&&(r=Object.keys(r).reduce((a,o)=>(i.includes(o)&&(a[o]=r[o]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),xme(e.headers,r,s)):e.url=Eme(e.url,r,s)}getNextFrag(e){var r;const n=(r=this.hls.levels[e.level])==null?void 0:r.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var r;const{index:n,fragment:i}=e,s=(r=this.hls.levels[i.level])==null||(r=r.details)==null?void 0:r.partList;if(s){const{sn:a}=i;for(let o=s.length-1;o>=0;o--){const l=s[o];if(l.index===n&&l.fragment.sn===a)return s[o+1]}}}getObjectType(e){const{type:r}=e;if(r==="subtitle")return Un.TIMED_TEXT;if(e.sn==="initSegment")return Un.INIT;if(r==="audio")return Un.AUDIO;if(r==="main")return this.hls.audioTracks.length?Un.VIDEO:Un.MUXED}getTopBandwidth(e){let r=0,n;const i=this.hls;if(e===Un.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;n=i.levels.slice(0,a)}return n.forEach(s=>{s.bitrate>r&&(r=s.bitrate)}),r>0?r:NaN}getBufferLength(e){const r=this.media,n=e===Un.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Xe.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,r=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){r(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,r=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){r(s),this.loader.load(s,a,o)}}}}const Cme=3e5;class Tme extends Zi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,r)=>(e.indexOf(r.pathwayId)===-1&&e.push(r.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const r=this.levels;r&&(this.levels=r.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,r){const{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(e,r){const{errorAction:n}=r;if((n==null?void 0:n.action)===tn.SendAlternateToPenaltyBox&&n.flags===ii.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(r.context){const{groupId:o,pathwayId:l,type:u}=r.context;o&&i?a=this.getPathwayForGroupId(o,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&i&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==a),r.details===Y.BUFFER_APPEND_ERROR&&!r.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${Ft(s)} penalized: ${Ft(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==e.length&&this.log(`Found ${r.length}/${e.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(r=>e===r.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let r;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>Cme&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(r=this.getLevelsForPathway(a),r.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,fG(r),this.hls.trigger(P.LEVELS_UPDATED,{levels:r});const u=this.hls.levels[o];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,r,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(r===at.AUDIO_TRACK&&i[s].hasAudioGroup(e)||r===at.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return n}clonePathways(e){const r=this.levels;if(!r)return;const n={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=s;if(r.some(d=>d.pathwayId===a))return;const u=this.getLevelsForPathway(o).map(d=>{const A=new nr(d.attrs);A["PATHWAY-ID"]=a;const f=A.AUDIO&&`${A.AUDIO}_clone_${a}`,h=A.SUBTITLES&&`${A.SUBTITLES}_clone_${a}`;f&&(n[A.AUDIO]=f,A.AUDIO=f),h&&(i[A.SUBTITLES]=h,A.SUBTITLES=h);const m=WG(d.uri,A["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),p=new em({attrs:A,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:m,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let g=1;g<d.audioGroups.length;g++)p.addGroupId("audio",`${d.audioGroups[g]}_clone_${a}`);if(d.subtitleGroups)for(let g=1;g<d.subtitleGroups.length;g++)p.addGroupId("text",`${d.subtitleGroups[g]}_clone_${a}`);return p});r.push(...u),oD(this.audioTracks,n,l,a),oD(this.subtitleTracks,i,l,a)})}loadSteeringManifest(e){const r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const s={responseType:"json",url:i.href},a=r.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(d,A,f,h)=>{this.log(`Loaded steering manifest: "${i}"`);const m=d.data;if((m==null?void 0:m.VERSION)!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":p,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":x}=m;if(p)try{this.uri=new self.URL(p,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${p}`);return}this.scheduleRefresh(this.uri||f.url),g&&this.clonePathways(g);const v={steeringManifest:m,url:i.toString()};this.hls.trigger(P.STEERING_MANIFEST_LOADED,v),x&&this.updatePathwayPriority(x)},onError:(d,A,f,h)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${A.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${A.url} no longer available`);return}let m=this.timeToLoad*1e3;if(d.code===429){const p=this.loader;if(typeof(p==null?void 0:p.getResponseHeader)=="function"){const g=p.getResponseHeader("Retry-After");g&&(m=parseFloat(g)*1e3)}this.log(`Steering manifest ${A.url} rate limited`);return}this.scheduleRefresh(this.uri||A.url,m)},onTimeout:(d,A,f)=>{this.log(`Timeout loading steering manifest (${A.url})`),this.scheduleRefresh(this.uri||A.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,u)}scheduleRefresh(e,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},r)}}function oD(t,e,r,n){t&&Object.keys(e).forEach(i=>{const s=t.filter(a=>a.groupId===i).map(a=>{const o=jt({},a);return o.details=void 0,o.attrs=new nr(o.attrs),o.url=o.attrs.URI=WG(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});t.push(...s)})}function WG(t,e,r,n){const{HOST:i,PARAMS:s,[r]:a}=n;let o;e&&(o=a==null?void 0:a[e],o&&(t=o));const l=new self.URL(t);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach(u=>{u&&l.searchParams.set(u,s[u])}),l.href}class tA extends Zi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=tA.CDMCleanupPromise?[tA.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=r=>{const{initDataType:n,initData:i}=r,s=`"${r.type}" event: init data type: "${n}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=kh(this.config));const o=a.map(fS).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=Jx(a);if(n!=="sinf"||o!==ar.FAIRPLAY){this.log(`Ignoring "${r.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let l;try{const h=Rr(new Uint8Array(i)),m=aP(JSON.parse(h).sinf),p=QV(m);if(!p)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(p.subarray(8,24))}catch(h){this.warn(`${s} Failed to parse sinf: ${h}`);return}const u=nn(l),{keyIdToKeySessionPromise:d,mediaKeySessions:A}=this;let f=d[u];for(let h=0;h<A.length;h++){const m=A[h],p=m.decryptdata;if(!p.keyId)continue;const g=nn(p.keyId);if(Ay(l,p.keyId)||p.uri.replace(/-/g,"").indexOf(u)!==-1){if(f=d[g],!f)continue;if(p.pssh)break;delete d[g],p.pssh=new Uint8Array(i),p.keyId=l,f=d[u]=f.then(()=>this.generateRequestWithPreferredKeySession(m,n,i,"encrypted-event-key-match")),f.catch(x=>this.handleError(x));break}}f||this.handleError(new Error(`Key ID ${u} not encountered in playlist. Key-system sessions ${A.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=r=>{this.log(`"${r.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(P.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(P.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:r,widevineLicenseUrl:n}=this.config,i=r==null?void 0:r[e];if(i)return i.licenseUrl;if(e===ar.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const r=this.getLicenseServerUrl(e);if(r===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return r}getServerCertificateUrl(e){const{drmSystems:r}=this.config,n=r==null?void 0:r[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const r=this.hls.levels,n=(a,o,l)=>!!a&&l.indexOf(a)===o,i=r.map(a=>a.audioCodec).filter(n),s=r.map(a=>a.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const l=u=>{const d=u.shift();this.getMediaKeysPromise(d,i,s).then(A=>a({keySystem:d,mediaKeys:A})).catch(A=>{u.length?l(u):A instanceof ri?o(A):o(new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_ACCESS,error:A,fatal:!0},A.message))})};l(e)})}requestMediaKeySystemAccess(e,r){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return sG===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,r)}getMediaKeysPromise(e,r,n){var i;const s=ahe(e,r,n,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],o=(i=a)==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ft(s)}`),o=this.requestMediaKeySystemAccess(e,s);const l=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),o.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const d=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const A=l.mediaKeys=u.createMediaKeys().then(f=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,d.then(h=>h?this.setMediaKeysServerCertificate(f,e,h):f)));return A.catch(f=>{this.error(`Failed to create media-keys for "${e}"}: ${f}`)}),A})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${nn(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),s={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const r=e.decryptdata;if(r.pssh){const n=this.createMediaKeySessionContext(e),i=g0(r),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,r.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,r){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${nn(e.decryptdata.keyId||[])}
      } (data length: ${r.byteLength})`),n.update(r)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>fS(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:r,mediaKeys:n})=>this.attemptSetMediaKeys(r,n))}selectKeySystem(e){return new Promise((r,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const s=fS(i);s?r(s):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const r=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(e){const r=kh(this.config),n=e.map(Jx).filter(i=>!!i&&r.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:r}=this;for(let n=0;n<r.length;n++){const i=Bme(e,r[n]);if(i)return i}}loadKey(e){const r=e.keyInfo.decryptdata,n=g0(r),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(r)==="internal-error"){const o=lD(i||"internal-error",r);return this.handleError(o,e.frag),Promise.reject(o)}const s=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${s}`);const a=this.keyIdToKeySessionPromise[n];if(!a){const o=this.getKeySystemForKeyPromise(r).then(({keySystem:l,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(l,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:u,decryptdata:r}))))).then(l=>{const u="cenc",d=r.pssh?r.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,u,d,"playlist-key")});return o.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return a.catch(o=>{if(o instanceof ri){const l=Bt({},o.data);this.getKeyStatus(r)==="internal-error"&&(l.decryptdata=r);const u=new ri(l,o.message);this.handleError(u,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,r){if(this.hls)if(e instanceof ri){r&&(e.data.frag=r);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${nn(n.keyId||[])})`:""}`),this.hls.trigger(P.ERROR,e.data)}else this.error(e.message),this.hls.trigger(P.ERROR,{type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const r=g0(e),n=this.keyIdToKeySessionPromise[r];if(!n){const i=Jx(e.keyFormat),s=i?[i]:kh(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=kh(this.config)),e.length===0)throw new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ft({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,r){if(this.mediaResolved=void 0,this.mediaKeys===r)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(r):new Promise((s,a)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return a(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=r,this.media.setMediaKeys(r).then(s).catch(a)}}));return this.mediaKeys=r,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,r,n,i){var s;const a=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(a)try{const m=a.call(this.hls,r,n,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");r=m.initDataType,n=m.initData?m.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(m){if(this.warn(m.message),this.hls&&this.hls.config.debug)throw m}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const o=g0(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${o} URI: ${l} (init data type: ${r} length: ${n.byteLength})`);const u=new lP,d=e._onmessage=m=>{const p=e.mediaKeysSession;if(!p){u.emit("error",new Error("invalid state"));return}const{messageType:g,message:x}=m;this.log(`"${g}" message event for session "${p.sessionId}" message size: ${x.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,x).catch(v=>{u.eventNames().length?u.emit("error",v):this.handleError(v)}):g==="license-release"?e.keySystem===ar.FAIRPLAY&&this.updateKeySession(e,PB("acknowledged")).then(()=>this.removeSession(e)).catch(v=>this.handleError(v)):this.warn(`unhandled media key message type "${g}"`)},A=(m,p)=>{p.keyStatus=m;let g;m.startsWith("usable")?u.emit("resolved"):m==="internal-error"||m==="output-restricted"||m==="output-downscaled"?g=lD(m,p.decryptdata):m==="expired"?g=new Error(`key expired (keyId: ${o})`):m==="released"?g=new Error("key released"):m==="status-pending"||this.warn(`unhandled key status change "${m}" (keyId: ${o})`),g&&(u.eventNames().length?u.emit("error",g):this.handleError(g))},f=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}const g=this.getKeyStatuses(e);if(!Object.keys(g).some(w=>g[w]!=="status-pending"))return;if(g[o]==="expired"){this.log(`Expired key ${Ft(g)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let v=g[o];if(v)A(v,e);else{var y;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(y=e.keyStatusTimeouts)[o]||(y[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const b=this.getKeyStatus(e.decryptdata);if(b&&b!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${b} from other session.`),A(b,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),v="internal-error",A(v,e)},1e3)),this.log(`No status for keyId ${o} (${Ft(g)}).`)}};kn(e.mediaKeysSession,"message",d),kn(e.mediaKeysSession,"keystatuseschange",f);const h=new Promise((m,p)=>{u.on("error",p),u.on("resolved",m)});return e.mediaKeysSession.generateRequest(r,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${l}`)}).catch(m=>{throw new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_SESSION,error:m,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${m}`)}).then(()=>h).catch(m=>(u.removeAllListeners(),this.removeSession(e).then(()=>{throw m}))).then(()=>(u.removeAllListeners(),e))}getKeyStatuses(e){const r={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const o=i;i=n,n=o}const s="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===ar.PLAYREADY&&s.length===16){const o=nn(s);r[o]=n,nG(s)}const a=nn(s);n==="internal-error"&&(this.bannedKeyIds[a]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),r[a]=n}),r}fetchServerCertificate(e){const r=this.config,n=r.loader,i=new n(r),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:s},u=r.certLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},A={onSuccess:(f,h,m,p)=>{a(f.data)},onError:(f,h,m,p)=>{o(new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:Bt({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${s}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,m)=>{o(new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(f,h,m)=>{o(new Error("aborted"))}};i.load(l,d,A)})):Promise.resolve()}setMediaKeysServerCertificate(e,r,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n.byteLength}) on "${r}"`),i(e)}).catch(a=>{s(new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,r){return this.requestLicense(e,new Uint8Array(r)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,r){const n=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;const i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let d;for(let A=0,f=s.length;A<f;A++){var a,o;d=s[A];const h=(a=d.querySelector("name"))==null?void 0:a.textContent,m=(o=d.querySelector("value"))==null?void 0:o.textContent;h&&m&&e.setRequestHeader(h,m)}}const l=i.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return PB(atob(u))}setupLicenseXHR(e,r,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,r,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",r,!0),s.call(this.hls,e,r,n,i)}).then(a=>(e.readyState||e.open("POST",r,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",r,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,r){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,o,a,e)}catch(d){this.error(d)}i(l)}else{const l=n.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)s(new ri({type:Ue.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const d=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,r).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,r).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==ar.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,r){if(!this.config.emeEnabled)return;const n=r.media;this.media=n,kn(n,"encrypted",this.onMediaEncrypted),kn(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(zn(e,"encrypted",this.onMediaEncrypted),zn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const r=this.mediaResolved;if(r&&r(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,$l.clearKeyUriToKeyIdMap();const s=i.length;tA.CDMCleanupPromise=Promise.all(i.map(a=>this.removeSession(a)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{this.log(`Could not clear media keys: ${a}`),this.hls&&this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))||Promise.resolve())).catch(a=>{this.log(`Could not close sessions and clear media keys: ${a}`),this.hls&&this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=r.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:r,licenseXhr:n,decryptdata:i}=e;if(r){this.log(`Remove licenses and keys and close session "${r.sessionId}" keyId: ${nn((i==null?void 0:i.keyId)||[])}`),e._onmessage&&(r.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(u=>self.clearTimeout(a[u]));const{drmSystemOptions:o}=this.config;return(lhe(o)?new Promise((u,d)=>{self.setTimeout(()=>d(new Error("MediaKeySession.remove() timeout")),8e3),r.remove().then(u).catch(d)}):Promise.resolve()).catch(u=>{this.log(`Could not remove session: ${u}`),this.hls&&this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>r.close()).catch(u=>{this.log(`Could not close session: ${u}`),this.hls&&this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}return Promise.resolve()}}tA.CDMCleanupPromise=void 0;function g0(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return nn(t.keyId)}function Bme(t,e){if(t.keyId&&e.mediaKeysSession.keyStatuses.has(t.keyId))return e.mediaKeysSession.keyStatuses.get(t.keyId);if(t.matches(e.decryptdata))return e.keyStatus}class ri extends Error{constructor(e,r){super(r),this.data=void 0,e.error||(e.error=new Error(r)),this.data=e,e.err=e.error}}function lD(t,e){const r=t==="output-restricted",n=r?Y.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Y.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new ri({type:Ue.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},r?"HDCP level output restricted":`key status changed to "${t}"`)}class _me{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(P.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(P.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,r){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,r,n){const i=performance.now();if(r){if(this.lastTime){const s=i-this.lastTime,a=n-this.lastDroppedFrames,o=r-this.lastDecodedFrames,l=1e3*a/s,u=this.hls;if(u.trigger(P.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),l>0&&a>u.config.fpsDroppedMonitoringThreshold*o){let d=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=d)&&(d=d-1,u.trigger(P.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function YG(t,e){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function qG(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Nt.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){Nt.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}r==="disabled"&&(t.mode=r)}function jd(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)e&&t.cues[n].removeEventListener("enter",e),t.removeCue(t.cues[n]);r==="disabled"&&(t.mode=r)}function UB(t,e,r,n){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=Ime(t.cues,e,r);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&t.removeCue(s[a])}i==="disabled"&&(t.mode=i)}function Nme(t,e){if(e<=t[0].startTime)return 0;const r=t.length-1;if(e>t[r].endTime)return-1;let n=0,i=r,s;for(;n<=i;)if(s=Math.floor((i+n)/2),e<t[s].startTime)i=s-1;else if(e>t[s].startTime&&n<r)n=s+1;else return s;return t[n].startTime-e<e-t[i].startTime?n:i}function Ime(t,e,r){const n=[],i=Nme(t,e);if(i>-1)for(let s=i,a=t.length;s<a;s++){const o=t[s];if(o.startTime>=e&&o.endTime<=r)n.push(o);else if(o.startTime>r)return n}return n}function nv(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[r])}return e}class Pme extends pP{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null;const n=nv(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")r=n[s];else if(n[s].mode==="showing"){r=n[s];break}const i=this.findTrackForTextTrack(r);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(P.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,r){const n=this.media;if(!n)return;const i=!!r.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;nv(n.textTracks).forEach(a=>{jd(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(e,r){const{id:n,groupId:i,details:s}=r,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=r.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,o)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(d=>!n||n.indexOf(d.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(d=>d.default)&&(this.selectDefaultTrack=!1),a.forEach((d,A)=>{d.id=A});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const d=sa(o,a);if(d>-1)s=a[d];else{const A=sa(o,this.tracks);s=this.tracks[A]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const u={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(P.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const r=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<r.length;i++){const s=r[i];if(!(n&&!s.default||!n&&!e)&&(!e||ou(s,e)))return i}if(e){for(let i=0;i<r.length;i++){const s=r[i];if(im(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<r.length;i++){const s=r[i];if(im(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(MB(i,e))return n}}return-1}onError(e,r){r.fatal||!r.context||r.context.type===at.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&ou(e,n))return n;const i=sa(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{const s=sa(e,r);if(s>-1)return r[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,r),a=e.details,o=a==null?void 0:a.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${(r==null?void 0:r.msn)!==void 0?" at sn "+r.msn+" part "+r.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(P.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:r||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const r=nv(e.textTracks),n=this.currentTrack;let i;if(n&&(i=r.filter(s=>MB(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(r).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=r.length||!Te(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:o="",name:l,type:u,url:d}=i;this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:d});const A=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(A)}}function Rme(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),r=e.toString();return URL.revokeObjectURL(e),r.slice(r.lastIndexOf("/")+1)}catch{let r=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(i=="x"?s:s&3|8).toString(16)})}}}function lp(t){let e=5381,r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return(e>>>0).toString()}const rA=.025;let my=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function kme(t,e,r){return`${t.identifier}-${r+1}-${lp(e)}`}class Lme{constructor(e,r){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=r,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var r;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((r=this.assetList[e])==null?void 0:r.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const r=this.dateRange.tagAnchor;if(r)return wS(e,r)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const r=this.dateRange.startTime,n=wS(r,e);return r-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,r=Te(e)?e:this.duration;return this.cumulativeDuration+r}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const r=this.resumeAnchor;if(r)return wS(e,r)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<rA))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let r;return this._duration!==null?r=this._duration:this.dateRange.duration?r=this.dateRange.duration:r=this.dateRange.plannedDuration||0,!isNaN(e)&&e<r&&(r=e),r}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?my.Range:my.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return jme(this)}}function wS(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<rA)?e.start:e.start+e.duration}function XG(t,e,r){const n=new self.URL(t,r);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function ES(t,e){for(;(r=t.assetList[++e])!=null&&r.error;)var r;return e}function jme(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function xd(t){const e=t.timelineStart,r=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+r).toFixed(2)}]`}class Mme{constructor(e,r,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(P.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(r);this.interstitial=n,this.assetItem=i;const a=()=>{this.hasDetails=!0};s.once(P.LEVEL_LOADED,a),s.once(P.AUDIO_TRACK_LOADED,a),s.once(P.SUBTITLE_TRACK_LOADED,a),s.on(P.MEDIA_ATTACHING,(o,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(P.BUFFER_APPENDED,()=>{const d=this.bufferedEnd;this.reachedPlayout(d)&&(this._bufferedEosTime=d,s.trigger(P.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=XG(r,e.config.primarySessionId||"").href}catch{}e.loadSource(r)}}bufferedInPlaceToEnd(e){var r;if(!this.appendInPlace)return!1;if((r=this.hls)!=null&&r.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,s=Xe.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const r=Xe.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(r.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const r=this.interstitial.playoutLimit;if(r){const n=r-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const r=this.timelineOffset;if(e!==r){const n=e-r;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const r=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-r),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var r;this.loadSource(),(r=this.hls)==null||r.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const r=n=>delete n.details;e.levels.forEach(r),e.allAudioTracks.forEach(r),e.allSubtitleTracks.forEach(r),this.hasDetails=!1}}on(e,r,n){var i;(i=this.hls)==null||i.on(e,r)}once(e,r,n){var i;(i=this.hls)==null||i.once(e,r)}off(e,r,n){var i;(i=this.hls)==null||i.off(e,r)}toString(){var e;return`HlsAssetPlayer: ${xd(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const cD=.033;class Dme extends Zi{constructor(e,r){super("interstitials-sched",r),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,r){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&r>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,r){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(r===void 0&&(r=e.start),n=this.findItemIndexAtTime(r));n>=0&&(s=i[n])!=null&&s.event;){var s;n--}return n}findItemIndexAtTime(e,r){const n=this.items;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(r&&r!=="primary"&&(s=s[r]),e===s.start||e>s.start&&e<s.end)return i}return-1}findJumpRestrictedIndex(e,r){const n=this.items;if(n)for(let i=e;i<=r&&n[i];i++){const s=n[i].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return i}return-1}findEventIndex(e){const r=this.items;if(r)for(let i=r.length;i--;){var n;if(((n=r[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,r){const n=e.assetList,i=n.length;if(i>1)for(let s=0;s<i;s++){const a=n[s];if(!a.error){const o=a.timelineStart;if(r===o||r>o&&(r<o+(a.duration||0)||s===i-1))return s}}return 0}get assetIdAtEnd(){var e;const r=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(r){const n=r.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,r){const n=e.main.details,{dateRanges:i}=n,s=this.events,a=this.parseDateRanges(i,{url:n.url},r),o=Object.keys(i),l=s?s.filter(u=>!o.includes(u.identifier)):[];a.length&&a.sort((u,d)=>{const A=u.cue.pre,f=u.cue.post,h=d.cue.pre,m=d.cue.post;if(A&&!h)return-1;if(h&&!A||f&&!m)return 1;if(m&&!f)return-1;if(!A&&!h&&!f&&!m){const p=u.startTime,g=d.startTime;if(p!==g)return p-g}return u.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=a,l.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,l)}updateSchedule(e,r=[],n=!1){const i=this.events||[];if(i.length||r.length||this.length<2){const s=this.items,a=this.parseSchedule(i,e);(n||r.length||(s==null?void 0:s.length)!==a.length||a.some((l,u)=>Math.abs(l.playout.start-s[u].playout.start)>.005||Math.abs(l.playout.end-s[u].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(r,s))}}parseDateRanges(e,r,n){const i=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=s[a],l=e[o];if(l.isInterstitial){let u=this.eventMap[o];u?u.setDateRange(l):(u=new Lme(l,r),this.eventMap[o]=u,n===!1&&(u.appendInPlace=n)),i.push(u)}}return i}parseSchedule(e,r){const n=[],i=r.main.details,s=i.live?1/0:i.edge;let a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,r);let l=0,u=0;if(e.forEach((d,A)=>{const f=d.cue.pre,h=d.cue.post,m=e[A-1]||null,p=d.appendInPlace,g=h?s:d.startOffset,x=d.duration,v=d.timelineOccupancy===my.Range?x:0,y=d.resumptionOffset,w=(m==null?void 0:m.startTime)===g,b=g+d.cumulativeDuration;let S=p?b+x:g+y;if(f||!h&&g<=0){const T=u;u+=v,d.timelineStart=b;const B=a;a+=x,n.push({event:d,start:b,end:S,playout:{start:B,end:a},integrated:{start:T,end:u}})}else if(g<=s){if(!w){const _=g-l;if(_>cD){const I=l,L=u;u+=_;const N=a;a+=_;const R={previousEvent:e[A-1]||null,nextEvent:d,start:I,end:I+_,playout:{start:N,end:a},integrated:{start:L,end:u}};n.push(R)}else _>0&&m&&(m.cumulativeDuration+=_,n[n.length-1].end=g)}h&&(S=b),d.timelineStart=b;const T=u;u+=v;const B=a;a+=x,n.push({event:d,start:b,end:S,playout:{start:B,end:a},integrated:{start:T,end:u}})}else return;const C=d.resumeTime;h||C>s?l=s:l=C}),l<s){var o;const d=l,A=u,f=s-l;u+=f;const h=a;a+=f,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:d+f,playout:{start:h,end:a},integrated:{start:A,end:u}})}this.setDurations(s,a,u)}else n.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return n}setDurations(e,r,n){this.durations={primary:e,playout:r,integrated:n}}resolveOffsets(e,r){const n=r.main.details,i=n.live?1/0:n.edge;let s=0,a=-1;e.forEach((o,l)=>{const u=o.cue.pre,d=o.cue.post,A=u?0:d?i:o.startTime;this.updateAssetDurations(o),a===A?o.cumulativeDuration=s:(s=0,a=A),!d&&o.snapOptions.in&&(o.resumeAnchor=Nu(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,r)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<cD&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const h=Te(o.resumeOffset)?o.resumeOffset:o.duration;s+=h})}primaryCanResumeInPlaceAt(e,r){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>rA?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(r).some(a=>{const o=r[a].details,l=o.edge;if(n>=l)return this.log(`"${e.identifier}" resumption ${n} past ${a} playlist end ${l}`),!1;const u=Nu(null,o.fragments,n);if(!u)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const d=a==="audio"?.175:0;return Math.abs(u.start-n)<rA+d||Math.abs(u.end-n)<rA+d?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${a} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const r=e.timelineStart;let n=0,i=!1,s=!1;for(let a=0;a<e.assetList.length;a++){const o=e.assetList[a],l=r+n;o.startOffset=n,o.timelineStart=l,i||(i=o.duration===null),s||(s=!!o.error);const u=o.error?0:o.duration||0;n+=u}i&&!s?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function is(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class Ome{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,r){const n=e.assetListUrl;let i;try{i=XG(n,this.hls.sessionId,e.baseUrl)}catch(f){const h=this.assignAssetListError(e,Y.ASSET_LIST_LOAD_ERROR,f,n);this.hls.trigger(P.ERROR,h);return}r&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+r);const s=this.hls.config,a=s.loader,o=new a(s),l={responseType:"json",url:i.href},u=s.interstitialAssetListLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},A={onSuccess:(f,h,m,p)=>{const g=f.data,x=g==null?void 0:g.ASSETS;if(!Array.isArray(x)){const v=this.assignAssetListError(e,Y.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),m.url,h,p);this.hls.trigger(P.ERROR,v);return}e.assetListResponse=g,this.hls.trigger(P.ASSET_LIST_LOADED,{event:e,assetListResponse:g,networkDetails:p})},onError:(f,h,m,p)=>{const g=this.assignAssetListError(e,Y.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${h.url})`),h.url,p,m);this.hls.trigger(P.ERROR,g)},onTimeout:(f,h,m)=>{const p=this.assignAssetListError(e,Y.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${h.url})`),h.url,f,m);this.hls.trigger(P.ERROR,p)}};return o.load(l,d,A),this.hls.trigger(P.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,r,n,i,s,a){return e.error=n,{type:Ue.NETWORK_ERROR,details:r,fatal:!1,interstitial:e,url:i,error:n,networkDetails:a,stats:s}}}function uD(t){var e;t==null||(e=t.play())==null||e.catch(()=>{})}function x0(t,e){return`[${t}] Advancing timeline position to ${e}`}class Fme extends Zi{constructor(e,r){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const a=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),a&&n<o.start||n>=o.end){var l;const h=this.findItemIndex(o);let m=this.schedule.findItemIndexAtTime(n);if(m===-1&&(m=h+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${n} (resolving from ${h} to ${m})`)),!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a&&m>h){const p=this.schedule.findJumpRestrictedIndex(h+1,m);if(p>h){this.setSchedulePosition(p);return}}this.setSchedulePosition(m);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(o)){const h=o.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,h))}return}const d=u.timelineStart,A=u.duration||0;if(a&&n<d||n>=d+A){var f;(f=o.event)!=null&&f.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,u)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);n>=a&&this.setScheduleToAssetAtTime(n,s)},this.onScheduleUpdate=(n,i)=>{const s=this.schedule;if(!s)return;const a=this.playingItem,o=s.events||[],l=s.items||[],u=s.durations,d=n.map(p=>p.identifier),A=!!(o.length||d.length);(A||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(p=>is(p))} pos: ${this.timelinePos}`),d.length&&this.log(`Removed events ${d}`);let f=null,h=null;a&&(f=this.updateItem(a,this.timelinePos),this.itemsMatch(a,f)?this.playingItem=f:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const m=this.bufferingItem;if(m&&(h=this.updateItem(m,this.bufferedPos),this.itemsMatch(m,h)?this.bufferingItem=h:m.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(m.event,null))),n.forEach(p=>{p.assetList.forEach(g=>{this.clearAssetPlayer(g.identifier,null)})}),this.playerQueue.forEach(p=>{if(p.interstitial.appendInPlace){const g=p.assetItem.timelineStart,x=p.timelineOffset-g;if(x)try{p.timelineOffset=g}catch(v){Math.abs(x)>rA&&this.warn(`${v} ("${p.assetId}" ${p.timelineOffset}->${g})`)}}}),A||i){if(this.hls.trigger(P.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:u,removedIds:d}),this.isInterstitial(a)&&d.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(f,a),m&&h!==f&&this.trimInPlace(h,m),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=r,this.assetListLoader=new Ome(e),this.schedule=new Dme(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(P.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(P.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(P.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(P.BUFFER_APPENDED,this.onBufferAppended,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(P.MEDIA_ENDED,this.onMediaEnded,this),e.on(P.ERROR,this.onError,this),e.on(P.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(P.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(P.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(P.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.BUFFER_APPENDED,this.onBufferAppended,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(P.MEDIA_ENDED,this.onMediaEnded,this),e.off(P.ERROR,this.onError,this),e.off(P.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){zn(e,"play",this.onPlay),zn(e,"pause",this.onPause),zn(e,"seeking",this.onSeeking),zn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,r){const n=this.media=r.media;kn(n,"seeking",this.onSeeking),kn(n,"timeupdate",this.onTimeupdate),kn(n,"play",this.onPlay),kn(n,"pause",this.onPause)}onMediaAttached(e,r){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const s=this.findItemIndex(n);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,r){const n=!!r.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,r=()=>e.bufferingItem||e.waitingItem,n=A=>A&&e.getAssetPlayer(A.identifier),i=(A,f,h,m,p)=>{if(A){let g=A[f].start;const x=A.event;if(x){if(f==="playout"||x.timelineOccupancy!==my.Point){const v=n(h);(v==null?void 0:v.interstitial)===x&&(g+=v.assetItem.startOffset+v[p])}}else{const v=m==="bufferedPos"?a():e[m];g+=v-A.start}return g}return 0},s=(A,f)=>{var h;if(A!==0&&f!=="primary"&&(h=e.schedule)!=null&&h.length){var m;const p=e.schedule.findItemIndexAtTime(A),g=(m=e.schedule.items)==null?void 0:m[p];if(g){const x=g[f].start-g.start;return A+x}}return A},a=()=>{const A=e.bufferedPos;return A===Number.MAX_VALUE?o("primary"):Math.max(A,0)},o=A=>{var f,h;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:((h=e.schedule)==null?void 0:h.durations[A])||0},l=(A,f)=>{var h,m;const p=e.effectivePlayingItem;if(p!=null&&(h=p.event)!=null&&h.restrictions.skip||!e.schedule)return;e.log(`seek to ${A} "${f}"`);const g=e.effectivePlayingItem,x=e.schedule.findItemIndexAtTime(A,f),v=(m=e.schedule.items)==null?void 0:m[x],y=e.getBufferingPlayer(),w=y==null?void 0:y.interstitial,b=w==null?void 0:w.appendInPlace,S=g&&e.itemsMatch(g,v);if(g&&(b||S)){const C=n(e.playingAsset),T=(C==null?void 0:C.media)||e.primaryMedia;if(T){const B=f==="primary"?T.currentTime:i(g,f,e.playingAsset,"timelinePos","currentTime"),_=A-B,I=(b?B:T.currentTime)+_;if(I>=0&&(!C||b||I<=C.duration)){T.currentTime=I;return}}}if(v){let C=A;if(f!=="primary"){const B=v[f].start,_=A-B;C=v.start+_}const T=!e.isInterstitial(v);if((!e.isInterstitial(g)||g.event.appendInPlace)&&(T||v.event.appendInPlace)){const B=e.media||(b?y==null?void 0:y.media:null);B&&(B.currentTime=C)}else if(g){const B=e.findItemIndex(g);if(x>B){const I=e.schedule.findJumpRestrictedIndex(B+1,x);if(I>B){e.setSchedulePosition(I);return}}let _=0;if(T)e.timelinePos=C,e.checkBuffer();else{const I=v.event.assetList,L=A-(v[f]||v).start;for(let N=I.length;N--;){const R=I[N];if(R.duration&&L>=R.startOffset&&L<R.startOffset+R.duration){_=N;break}}}e.setSchedulePosition(x,_)}}},u=()=>{const A=e.effectivePlayingItem;if(e.isInterstitial(A))return A;const f=r();return e.isInterstitial(f)?f:null},d={get bufferedEnd(){const A=r(),f=e.bufferingItem;if(f&&f===A){var h;return i(f,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-f.playout.start||((h=e.bufferingAsset)==null?void 0:h.startOffset)||0}return 0},get currentTime(){const A=u(),f=e.effectivePlayingItem;return f&&f===A?i(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(A){const f=u(),h=e.effectivePlayingItem;h&&h===f&&l(A+h.playout.start,"playout")},get duration(){const A=u();return A?A.playout.end-A.playout.start:0},get assetPlayers(){var A;const f=(A=u())==null?void 0:A.event.assetList;return f?f.map(h=>e.getAssetPlayer(h.identifier)):[]},get playingIndex(){var A;const f=(A=u())==null?void 0:A.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};return this.manager={get events(){var A;return((A=e.schedule)==null||(A=A.events)==null?void 0:A.slice(0))||[]},get schedule(){var A;return((A=e.schedule)==null||(A=A.items)==null?void 0:A.slice(0))||[]},get interstitialPlayer(){return u()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return r()},get bufferingIndex(){const A=r();return e.findItemIndex(A)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const A=e.effectivePlayingItem;return e.findItemIndex(A)},primary:{get bufferedEnd(){return a()},get currentTime(){const A=e.timelinePos;return A>0?A:0},set currentTime(A){l(A,"primary")},get duration(){return o("primary")},get seekableStart(){var A;return((A=e.primaryDetails)==null?void 0:A.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(r(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(A){l(A,"integrated")},get duration(){return o("integrated")},get seekableStart(){var A;return s(((A=e.primaryDetails)==null?void 0:A.fragmentStart)||0,"integrated")}},skip:()=>{const A=e.effectivePlayingItem,f=A==null?void 0:A.event;if(f&&!f.restrictions.skip){const h=e.findItemIndex(A);if(f.appendInPlace){const m=A.playout.start+A.event.duration;l(m+.001,"playout")}else e.advanceAfterAssetEnded(f,h,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const r=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!r||!n?!1:this.findItemIndex(r)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,r;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const s=(r=i)==null?void 0:r.currentTime;if(!(s===void 0||!Te(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,r){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,r)}transferMediaFromPlayer(e,r){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!r||this.isInterstitial(r)&&!r.event.appendInPlace)&&r&&i){this.detachedData={media:i};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ft(s)}`),this.detachedData=s}else r&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,r){var n,i;if(e.media===r)return;let s=null;const a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,u=(n=this.detachedData)==null?void 0:n.mediaSource;let d;if(a.media)l&&(s=a.transferMedia(),this.detachedData=s),d="Primary";else if(u){const m=this.getBufferingPlayer();m?(s=m.transferMedia(),d=`${m}`):d="detached MediaSource"}else d="detached media";if(!s){if(u)s=this.detachedData,this.log(`using detachedData: MediaSource ${Ft(s)}`);else if(!this.detachedData||a.media===r){const m=this.playerQueue;m.length>1&&m.forEach(p=>{if(o&&p.interstitial.appendInPlace!==l){const g=p.interstitial;this.clearInterstitial(p.interstitial,null),g.appendInPlace=!1,g.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${g}`)}}),this.hls.detachMedia(),this.detachedData={media:r}}}const A=s&&"mediaSource"in s&&((i=s.mediaSource)==null?void 0:i.readyState)!=="closed",f=A&&s?s:r;this.log(`${A?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${d} (media.currentTime: ${r.currentTime})`);const h=this.schedule;if(f===s&&h){const m=o&&e.assetId===h.assetIdAtEnd;f.overrides={duration:h.duration,endOfStream:!o||m,cueRemoval:!o}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,r=e==null?void 0:e.events;if(!r||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const s=this.hls.startPosition;if(this.log(x0("checkStart",s)),this.timelinePos=s,r.length&&r[0].cue.pre){const a=e.findEventIndex(r[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const s=e.findItemIndex(i);this.setSchedulePosition(s)}}advanceAssetBuffering(e,r){const n=e.event,i=n.findAssetIndex(r),s=ES(n,i);if(!n.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var a;const o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,r,n){const i=ES(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const s=this.schedule.items;if(s){const a=r+1,o=s.length;if(a>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(x0("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const s=e.assetList[i];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(r,i)}}setScheduleToAssetAtTime(e,r){const n=this.schedule;if(!n)return;const i=r.parentIdentifier,s=n.getEvent(i);if(s){const a=n.findEventIndex(i),o=n.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,a,o-1)}}setSchedulePosition(e,r){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const s=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${r} (${s&&is(s)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){const d=a.event,A=this.playingAsset,f=A==null?void 0:A.identifier,h=f?this.getAssetPlayer(f):null;if(h&&f&&(!this.eventItemsMatch(a,s)||r!==void 0&&f!==d.assetList[r].identifier)){var l;const m=d.findAssetIndex(A);if(this.log(`INTERSTITIAL_ASSET_ENDED ${m+1}/${d.assetList.length} ${xd(A)}`),this.endedAsset=A,this.playingAsset=null,this.hls.trigger(P.INTERSTITIAL_ASSET_ENDED,{asset:A,assetListIndex:m,event:d,schedule:i.slice(0),scheduleIndex:e,player:h}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(d,this.findItemIndex(this.playingItem),m);return}this.retreiveMediaSource(f,s),h.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(a,s)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${d} ${is(a)}`),d.hasPlayed=!0,this.hls.trigger(P.INTERSTITIAL_ENDED,{event:d,schedule:i.slice(0),scheduleIndex:e}),d.cue.once)){var u;this.updateSchedule();const m=(u=this.schedule)==null?void 0:u.items;if(s&&m){const p=this.findItemIndex(s);this.advanceSchedule(p,m,r,a,o)}return}}this.advanceSchedule(e,i,r,a,o)}advanceSchedule(e,r,n,i,s){const a=this.schedule;if(!a)return;const o=r[e]||null,l=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(d=>{const A=d.interstitial,f=a.findEventIndex(A.identifier);(f<e||f>e+1)&&this.clearInterstitial(A,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const d=o.event;if(n===void 0){n=a.findAssetIndex(d,this.timelinePos);const m=ES(d,n-1);if(d.isAssetPastPlayoutLimit(m)||d.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(d,e,n);return}n=m}const A=this.waitingItem;this.assetsBuffered(o,l)||this.setBufferingItem(o);let f=this.preloadAssets(d,n);if(this.eventItemsMatch(o,A||i)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${is(o)} ${d.appendInPlace?"append in place":""}`),this.hls.trigger(P.INTERSTITIAL_STARTED,{event:d,schedule:r.slice(0),scheduleIndex:e})),!d.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${d}`);return}if(d.assetListLoader&&(d.assetListLoader.destroy(),d.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${d}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const h=d.assetList[n];if(!h){this.advanceAfterAssetEnded(d,e,n||0);return}if(f||(f=this.getAssetPlayer(h.identifier)),f===null||f.destroyed){const m=d.assetList.length;this.warn(`asset ${n+1}/${m} player destroyed ${d}`),f=this.createAssetPlayer(d,h,n),f.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&d.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(f,n,r,e,l),this.shouldPlay&&uD(f.media)}else o?(this.resumePrimary(o,e,i),this.shouldPlay&&uD(this.hls.media)):s&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,r,n){var i,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${is(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,r),this.log(x0("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const a=(s=this.schedule)==null?void 0:s.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${is(e)}`),this.hls.trigger(P.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:r}),this.checkBuffer())}getPrimaryResumption(e,r){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(r===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const r=this.getAssetPlayer(e.identifier);return r!=null&&r.hls?r.hls.bufferedToEnd:Xe.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,r,n){r?this.setBufferingItem(r):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(x0("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,r){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,r):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(P.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(P.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,r){if(r.level===-1||!this.schedule)return;const n=this.hls.levels[r.level];if(!n.details)return;const i=Bt(Bt({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,r){const n=this.hls.audioTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=Bt(Bt({},this.altSelection),{},{audio:n});return}const s=Bt(Bt({},i),{},{audio:n});this.mediaSelection=s}onSubtitleTrackUpdated(e,r){const n=this.hls.subtitleTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=Bt(Bt({},this.altSelection),{},{subtitles:n});return}const s=Bt(Bt({},i),{},{subtitles:n});this.mediaSelection=s}onAudioTrackSwitching(e,r){const n=vM(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(r)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,r){const n=vM(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(r)||r.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,r){const n=r.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,r){this.checkBuffer()}onBufferFlushed(e,r){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const r=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&r){for(let i=0;i<r.length;i++){const s=r[i];if(s.cue.post){var n;const a=this.schedule.findEventIndex(s.identifier),o=(n=this.schedule.items)==null?void 0:n[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const r=this.playingItem;if(!this.playingLastItem&&r){const n=this.findItemIndex(r);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,r){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const s=this.findItemIndex(e,r);return i[s]||null}return null}trimInPlace(e,r){if(this.isInterstitial(e)&&e.event.appendInPlace&&r.end-e.end>.25){e.event.assetList.forEach((s,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(s.identifier,null)});const n=e.end+.25,i=Xe.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${is(e)} (was ${is(r)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,r){return!!r&&(e===r||e.event&&r.event&&this.eventItemsMatch(e,r)||!e.event&&!r.event&&this.findItemIndex(e)===this.findItemIndex(r))}eventItemsMatch(e,r){var n;return!!r&&(e===r||e.event.identifier===((n=r.event)==null?void 0:n.identifier))}findItemIndex(e,r){return e&&this.schedule?this.schedule.findItemIndex(e,r):-1}updateSchedule(e=!1){var r;const n=this.mediaSelection;n&&((r=this.schedule)==null||r.updateSchedule(n,[],e))}checkBuffer(e){var r;const n=(r=this.schedule)==null?void 0:r.items;if(!n)return;const i=Xe.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,r,n){const i=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(r.length===1&&this.itemsMatch(r[0],s)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let l=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var u;const d=this.findItemIndex(s),A=Math.min(d+1,r.length-1),f=r[A];if((l===-1&&s&&e>=s.end||(u=f.event)!=null&&u.appendInPlace&&e+.01>=f.start)&&(l=A),this.isInterstitial(s)){const h=s.event;if(A-o>1&&h.appendInPlace===!1||h.assetList.length===0&&h.assetListLoader)return}if(this.bufferedPos=e,l>d&&l>o)this.bufferedToItem(f);else{const h=this.primaryDetails;this.primaryLive&&h&&e>h.edge-h.targetduration&&f.start<h.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else n&&a&&!this.itemsMatch(a,s)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(r[l]))}assetsBuffered(e,r){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const s=this.getAssetPlayer(i.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(r))})}setBufferingItem(e){const r=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,r)&&n){const{items:i,events:s}=n;if(!i||!s)return r;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=o?o.remaining:r?r.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${is(e)}`+(r?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const u=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((d,A)=>{const f=this.getAssetPlayer(d.identifier);f&&(A===u&&f.loadSource(),f.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering());this.hls.trigger(P.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return r}bufferedToItem(e,r=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,r);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const r=this.findItemIndex(e),n=this.getPrimaryResumption(e,r);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,r){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,s=n.cue.once;if(i||!s){const a=this.preloadAssets(n,r);if(a!=null&&a.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,r){const n=e.assetUrl,i=e.assetList.length,s=i===0&&!e.assetListLoader,a=e.cue.once;if(s){const l=e.timelineStart;if(e.appendInPlace){var o;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(o=f.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let u,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const f=d-l;f>0&&(u=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${r+1}/${n?1:i} ${e}${u?` live-start: ${d} start-offset: ${u}`:""}`),n)return this.createAsset(e,0,0,l,e.duration,n);const A=this.assetListLoader.loadAssetList(e,u);A&&(e.assetListLoader=A)}else if(!a&&i){for(let u=r;u<i;u++){const d=e.assetList[u],A=this.getAssetPlayerQueueIndex(d.identifier);(A===-1||this.playerQueue[A].destroyed)&&!d.error&&this.createAssetPlayer(e,d,u)}const l=e.assetList[r];if(l){const u=this.getAssetPlayer(l.identifier);return u&&u.loadSource(),u}}return null}flushFrontBuffer(e){const r=this.requiredTracks;if(!r)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(r).forEach(i=>{this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const r=this.playerQueue;for(let n=0;n<r.length;n++)if(e===r[n].assetId)return n;return-1}getAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);return this.playerQueue[r]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:r}=this;if(r){for(let n=0;n<e.length;n++)if(e[n].media===r)return e[n]}return null}createAsset(e,r,n,i,s,a){const o={parentIdentifier:e.identifier,identifier:kme(e,a,r),duration:s,startOffset:n,timelineStart:i,uri:a};return this.createAssetPlayer(e,o,r)}createAssetPlayer(e,r,n){const i=this.hls,s=i.userConfig;let a=s.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(a||o)&&(a=jt({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const l=i.audioTracks[i.audioTrack],u=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const w=this.timelinePos-r.timelineStart;if(w>1){const b=r.duration;b&&w<b&&(d=w)}}const A=r.identifier,f=Bt(Bt({},s),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:A,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||s.audioPreference,subtitlePreference:u||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,r.timelineStart&&(f.timelineOffset=r.timelineStart));const h=f.cmcd;h!=null&&h.sessionId&&h.contentId&&(f.cmcd=jt({},h,{contentId:lp(r.uri)})),this.getAssetPlayer(A)&&this.warn(`Duplicate date range identifier ${e} and asset ${A}`);const m=new Mme(this.HlsPlayerClass,f,e,r);this.playerQueue.push(m),e.assetList[n]=r;let p=!0;const g=w=>{if(w.live){var b;const T=new Error(`Interstitials MUST be VOD assets ${e}`),B={fatal:!0,type:Ue.OTHER_ERROR,details:Y.INTERSTITIAL_ASSET_ITEM_ERROR,error:T},_=((b=this.schedule)==null?void 0:b.findEventIndex(e.identifier))||-1;this.handleAssetItemError(B,e,_,n,T.message);return}const S=w.edge-w.fragmentStart,C=r.duration;(p||C===null||S>C)&&(p=!1,this.log(`Interstitial asset "${A}" duration change ${C} > ${S}`),r.duration=S,this.updateSchedule())};m.on(P.LEVEL_UPDATED,(w,{details:b})=>g(b)),m.on(P.LEVEL_PTS_UPDATED,(w,{details:b})=>g(b)),m.on(P.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const x=(w,b)=>{const S=this.getAssetPlayer(A);if(S&&b.tracks){S.off(P.BUFFER_CODECS,x),S.tracks=b.tracks;const C=this.primaryMedia;this.bufferingAsset===S.assetItem&&C&&!S.media&&this.bufferAssetPlayer(S,C)}};m.on(P.BUFFER_CODECS,x);const v=()=>{var w;const b=this.getAssetPlayer(A);if(this.log(`buffered to end of asset ${b}`),!b||!this.schedule)return;const S=this.schedule.findEventIndex(e.identifier),C=(w=this.schedule.items)==null?void 0:w[S];this.isInterstitial(C)&&this.advanceAssetBuffering(C,r)};m.on(P.BUFFERED_TO_END,v);const y=w=>()=>{if(!this.getAssetPlayer(A)||!this.schedule)return;this.shouldPlay=!0;const S=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,S,w)};return m.once(P.MEDIA_ENDED,y(n)),m.once(P.PLAYOUT_LIMIT_REACHED,y(1/0)),m.on(P.ERROR,(w,b)=>{if(!this.schedule)return;const S=this.getAssetPlayer(A);if(b.details===Y.BUFFER_STALLED_ERROR){if(S!=null&&S.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(b,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${b.error} ${e}`)}),m.on(P.DESTROYING,()=>{if(!this.getAssetPlayer(A)||!this.schedule)return;const b=new Error(`Asset player destroyed unexpectedly ${A}`),S={fatal:!0,type:Ue.OTHER_ERROR,details:Y.INTERSTITIAL_ASSET_ITEM_ERROR,error:b};this.handleAssetItemError(S,e,this.schedule.findEventIndex(e.identifier),n,b.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${xd(r)}`),this.hls.trigger(P.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:r,assetListIndex:n,event:e,player:m}),m}clearInterstitial(e,r){this.clearAssetPlayers(e,r),e.reset()}clearAssetPlayers(e,r){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,r)})}resetAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[r];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,r){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${r&&is(r)}`),this.transferMediaFromPlayer(i,r),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,r,n,i,s){const{interstitial:a,assetItem:o,assetId:l}=e,u=a.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!d||d.identifier!==l)&&(d&&(this.clearAssetPlayer(d.identifier,n[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${r+1}/${u} ${xd(o)}`),this.hls.trigger(P.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:r,event:a,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,r){var n,i;if(!this.schedule)return;const{interstitial:s,assetItem:a}=e,o=this.schedule.findEventIndex(s.identifier),l=(n=this.schedule.items)==null?void 0:n[o];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=a;const u=this.getBufferingPlayer();if(u===e)return;const d=s.appendInPlace;if(d&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const A=(u==null?void 0:u.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(d&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(A&&!kV(A,e.tracks)){const f=new Error(`Asset ${xd(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(A)}')`),h={fatal:!0,type:Ue.OTHER_ERROR,details:Y.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},m=s.findAssetIndex(a);this.handleAssetItemError(h,s,o,m,f.message);return}}this.transferMediaTo(e,r)}handleInPlaceStall(e){const r=this.schedule,n=this.primaryMedia;if(!r||!n)return;const i=n.currentTime,s=r.findAssetIndex(e,i),a=e.assetList[s];if(a){const o=this.getAssetPlayer(a.identifier);if(o){const l=o.currentTime||i-a.timelineStart,u=o.duration-l;if(this.warn(`Stalled at ${l} of ${l+u} in ${o} ${e} (media.currentTime: ${i})`),l&&(u/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const d=r.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,d,s)}}}}advanceInPlace(e){const r=this.primaryMedia;r&&r.currentTime<e&&(r.currentTime=e)}handleAssetItemError(e,r,n,i,s){if(e.details===Y.BUFFER_STALLED_ERROR)return;const a=r.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&xd(a)} ${e.error}`),!this.schedule)return;const o=(a==null?void 0:a.identifier)||"",l=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[l]||null,d=this.schedule.items,A=jt({},e,{fatal:!1,errorAction:Jd(!0),asset:a,assetListIndex:i,event:r,schedule:d,scheduleIndex:n,player:u});if(this.hls.trigger(P.INTERSTITIAL_ASSET_ERROR,A),!e.fatal)return;const f=this.playingAsset,h=this.bufferingAsset,m=new Error(s);if(a&&(this.clearAssetPlayer(o,null),a.error=m),!r.assetList.some(p=>!p.error))r.error=m;else for(let p=i;p<r.assetList.length;p++)this.resetAssetPlayer(r.assetList[p].identifier);this.updateSchedule(!0),r.error?this.primaryFallback(r):f&&f.identifier===o?this.advanceAfterAssetEnded(r,n,i):h&&h.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const r=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${r} pos: ${i} playing: ${is(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const a=this.updateItem(n,i);this.itemsMatch(n,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}onAssetListLoaded(e,r){var n,i;const s=r.event,a=s.identifier,o=r.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(a)))return;const l=s.timelineStart,u=s.duration;let d=0;o.forEach((p,g)=>{const x=parseFloat(p.DURATION);this.createAsset(s,g,d,l+d,x,p.URI),d+=x}),s.duration=d,this.log(`Loaded asset-list with duration: ${d} (was: ${u}) ${s}`);const A=this.waitingItem,f=(A==null?void 0:A.event.identifier)===a;this.updateSchedule();const h=(i=this.bufferingItem)==null?void 0:i.event;if(f){var m;const p=this.schedule.findEventIndex(a),g=(m=this.schedule.items)==null?void 0:m[p];if(g){if(!this.playingItem&&this.timelinePos>g.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==p){s.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${s}`),this.log(s.error.message),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(g)}this.setSchedulePosition(p)}else if((h==null?void 0:h.identifier)===a){const p=s.assetList[0];if(p){const g=this.getAssetPlayer(p.identifier);if(h.appendInPlace){const x=this.primaryMedia;g&&x&&this.bufferAssetPlayer(g,x)}else g&&g.loadSource()}}}onError(e,r){if(this.schedule)switch(r.details){case Y.ASSET_LIST_PARSING_ERROR:case Y.ASSET_LIST_LOAD_ERROR:case Y.ASSET_LIST_LOAD_TIMEOUT:{const n=r.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case Y.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const dD=500;class Ume extends oP{constructor(e,r,n){super(e,r,n,"subtitle-stream-controller",ke.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,r){this.stopLoad(),this.state=se.IDLE,this.setInterval(dD),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,r){this.tracksBuffered=[],super.onMediaDetaching(e,r)}onLevelLoaded(e,r){this.mainDetails=r.details}onSubtitleFragProcessed(e,r){const{frag:n,success:i}=r;if(this.fragContextChanged(n)||(vr(n)&&(this.fragPrevious=n),this.state=se.IDLE),!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let u=0;u<s.length;u++)if(o>=s[u].start&&o<=s[u].end){a=s[u];break}const l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},s.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,r){const{startOffset:n,endOffset:i}=r;if(n===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;r.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,s,ke.SUBTITLE)}}onError(e,r){const n=r.frag;(n==null?void 0:n.type)===ke.SUBTITLE&&(r.details===Y.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==se.STOPPED&&(this.state=se.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:r}){if(this.levels&&MG(this.levels,r)){this.levels=r.map(n=>new em(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{const i=new em(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ke.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,r){var n;if(this.currentTrackId=r.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==se.STOPPED&&this.setInterval(dD)}onSubtitleTrackLoaded(e,r){var n;const{currentTrackId:i,levels:s}=this,{details:a,id:o}=r;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=s[o];if(o>=s.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(a.live||(n=l.details)!=null&&n.live){if(a.deltaUpdateFailed)return;const A=this.mainDetails;if(!A){this.startFragRequested=!1;return}const f=A.fragments[0];if(!l.details)a.hasProgramDateTime&&A.hasProgramDateTime?(hy(a,A),u=a.fragmentStart):f&&(u=f.start,kB(a,u));else{var d;u=this.alignPlaylists(a,l.details,(d=this.levelLastLoaded)==null?void 0:d.details),u===0&&f&&(u=f.start,kB(a,u))}A&&!this.startFragRequested&&this.setStartPosition(A,u)}l.details=a,this.levelLastLoaded=l,o===i&&(this.hls.trigger(P.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:r.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===se.IDLE&&(Nu(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:r,payload:n}=e,i=r.decryptdata,s=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&eA(i.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,sP(i.method)).catch(o=>{throw s.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:r}),o}).then(o=>{const l=performance.now();s.trigger(P.FRAG_DECRYPTED,{frag:r,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=se.IDLE})}}doTick(){if(!this.media){this.state=se.IDLE;return}if(this.state===se.IDLE){const{currentTrackId:e,levels:r}=this,n=r==null?void 0:r[e];if(!n||!r.length||!n.details||this.waitForLive(n))return;const{config:i}=this,s=this.getLoadPosition(),a=Xe.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:o,len:l}=a,u=n.details,d=this.hls.maxBufferLength+u.levelTargetDuration;if(l>d)return;const A=u.fragments,f=A.length,h=u.edge;let m=null;const p=this.fragPrevious;if(o<h){const v=i.maxFragLookUpTolerance,y=o>h-v?0:v;m=Nu(p,A,Math.max(A[0].start,o),y),!m&&p&&p.start<A[0].start&&(m=A[0])}else m=A[f-1];if(m=this.filterReplacedPrimary(m,n.details),!m)return;const g=m.sn-u.startSN,x=A[g-1];if(x&&x.cc===m.cc&&this.fragmentTracker.getState(x)===Lr.NOT_LOADED&&(m=x),this.fragmentTracker.getState(m)===Lr.NOT_LOADED){const v=this.mapToInitFragWhenRequired(m);v&&this.loadFragment(v,n,o)}}}loadFragment(e,r,n){vr(e)?super.loadFragment(e,r,n):this._loadInitSegment(e,r)}get mediaBufferTimeRanges(){return new $me(this.tracksBuffered[this.currentTrackId]||[])}}class $me{constructor(e){this.buffered=void 0;const r=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return r("end",n,e.length)},start(n){return r("start",n,e.length)}}}}const Qme={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ZG=t=>String.fromCharCode(Qme[t]||t),os=15,ja=100,Hme={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Kme={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Vme={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Gme={25:2,26:4,29:6,30:8,31:10,27:13,28:15},zme=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Wme{constructor(){this.time=null,this.verboseLevel=0}log(e,r){if(this.verboseLevel>=e){const n=typeof r=="function"?r():r;Nt.log(`${this.time} [${e}] ${n}`)}}}const xc=function(e){const r=[];for(let n=0;n<e.length;n++)r.push(e[n].toString(16));return r};class JG{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){const i=r[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Yme{constructor(){this.uchar=" ",this.penState=new JG}reset(){this.uchar=" ",this.penState.reset()}setChar(e,r){this.uchar=e,this.penState.copy(r)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class qme{constructor(e){this.chars=[],this.pos=0,this.currPenState=new JG,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<ja;r++)this.chars.push(new Yme);this.logger=e}equals(e){for(let r=0;r<ja;r++)if(!this.chars[r].equals(e.chars[r]))return!1;return!0}copy(e){for(let r=0;r<ja;r++)this.chars[r].copy(e.chars[r])}isEmpty(){let e=!0;for(let r=0;r<ja;r++)if(!this.chars[r].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ja&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ja)}moveCursor(e){const r=this.pos+e;if(e>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const r=ZG(e);if(this.pos>=ja){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(e){let r;for(r=e;r<ja;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let r=!0;for(let n=0;n<ja;n++){const i=this.chars[n].uchar;i!==" "&&(r=!1),e.push(i)}return r?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class SS{constructor(e){this.rows=[],this.currRow=os-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<os;r++)this.rows.push(new qme(e));this.logger=e}reset(){for(let e=0;e<os;e++)this.rows[e].clear();this.currRow=os-1}equals(e){let r=!0;for(let n=0;n<os;n++)if(!this.rows[n].equals(e.rows[n])){r=!1;break}return r}copy(e){for(let r=0;r<os;r++)this.rows[r].copy(e.rows[r])}isEmpty(){let e=!0;for(let r=0;r<os;r++)if(!this.rows[r].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ft(e));let r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let o=0;o<os;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[r-this.nrRollUpRows+u+1].copy(a.rows[s+u])}}this.currRow=r;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ft(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const r=[];let n="",i=-1;for(let s=0;s<os;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?r.push("Row "+i+": '"+a+"'"):r.push(a.trim()))}return r.length>0&&(e?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}}class AD{constructor(e,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new SS(n),this.nonDisplayedMemory=new SS(n),this.lastOutputScreen=new SS(n),this.currRollUpRow=this.displayedMemory.rows[os-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[os-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const r={flash:!1};if(r.underline=e%2===1,r.italics=e>=46,r.italics)r.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=i[n]}this.logger.log(2,"MIDROW: "+Ft(r)),this.writeScreen.setPen(r)}outputDataUpdate(e=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class fD{constructor(e,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Zme(),this.logger=void 0;const i=this.logger=new Wme;this.channels=[null,new AD(e,r,i),new AD(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,r){this.channels[e].setHandler(r)}addData(e,r){this.logger.time=e;for(let n=0;n<r.length;n+=2){const i=r[n]&127,s=r[n+1]&127;let a=!1,o=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+xc([r[n],r[n+1]])+"] -> ("+xc([i,s])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(Xme(i,s,l)){v0(null,null,l),this.logger.log(3,()=>"Repeated command ("+xc([i,s])+") is dropped");continue}v0(i,s,this.cmdHistory),a=this.parseCmd(i,s),a||(a=this.parseMidrow(i,s)),a||(a=this.parsePAC(i,s)),a||(a=this.parseBackgroundAttributes(i,s))}else v0(null,null,l);if(!a&&(o=this.parseChars(i,s),o)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+xc([i,s])+" orig: "+xc([r[n],r[n+1]]))}}parseCmd(e,r){const n=(e===20||e===28||e===21||e===29)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=33&&r<=35;if(!(n||i))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?r===32?a.ccRCL():r===33?a.ccBS():r===34?a.ccAOF():r===35?a.ccAON():r===36?a.ccDER():r===37?a.ccRU(2):r===38?a.ccRU(3):r===39?a.ccRU(4):r===40?a.ccFON():r===41?a.ccRDC():r===42?a.ccTR():r===43?a.ccRTD():r===44?a.ccEDM():r===45?a.ccCR():r===46?a.ccENM():r===47&&a.ccEOC():a.ccTO(r-32),this.currentChannel=s,!0}parseMidrow(e,r){let n=0;if((e===17||e===25)&&r>=32&&r<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+xc([e,r])+")"),!0):!1}return!1}parsePAC(e,r){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&r>=64&&r<=127,s=(e===16||e===24)&&r>=64&&r<=95;if(!(i||s))return!1;const a=e<=23?1:2;r>=64&&r<=95?n=a===1?Hme[e]:Vme[e]:n=a===1?Kme[e]:Gme[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,r)),this.currentChannel=a,!0):!1}interpretPAC(e,r){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return r>95?n=r-96:n=r-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,r){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=r+80:s===18?a=r+112:a=r+144,this.logger.log(2,()=>"Special char '"+ZG(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=r===0?[e]:[e,r]);return i&&this.logger.log(3,()=>"Char codes =  "+xc(i).join(",")),i}parseBackgroundAttributes(e,r){const n=(e===16||e===24)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=45&&r<=47;if(!(n||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((r-32)/2),a.background=zme[s],r%2===1&&(a.background=a.background+"_semi")):r===45?a.background="transparent":(a.foreground="black",r===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const r=this.channels[e];r&&r.reset()}v0(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let r=0;r<this.channels.length;r++){const n=this.channels[r];n&&n.cueSplitAtTime(e)}}}function v0(t,e,r){r.a=t,r.b=e}function Xme(t,e,r){return r.a===t&&r.b===e}function Zme(){return{a:null,b:null}}var vP=function(){if(fy!=null&&fy.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function r(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const u=l.toLowerCase();return~o.indexOf(u)?u:!1}function n(o){return r(t,o)}function i(o){return r(e,o)}function s(o,...l){let u=1;for(;u<arguments.length;u++){const d=arguments[u];for(const A in d)o[A]=d[A]}return o}function a(o,l,u){const d=this,A={enumerable:!0};d.hasBeenReset=!1;let f="",h=!1,m=o,p=l,g=u,x=null,v="",y=!0,w="auto",b="start",S=50,C="middle",T=50,B="middle";Object.defineProperty(d,"id",s({},A,{get:function(){return f},set:function(_){f=""+_}})),Object.defineProperty(d,"pauseOnExit",s({},A,{get:function(){return h},set:function(_){h=!!_}})),Object.defineProperty(d,"startTime",s({},A,{get:function(){return m},set:function(_){if(typeof _!="number")throw new TypeError("Start time must be set to a number.");m=_,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",s({},A,{get:function(){return p},set:function(_){if(typeof _!="number")throw new TypeError("End time must be set to a number.");p=_,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",s({},A,{get:function(){return g},set:function(_){g=""+_,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",s({},A,{get:function(){return x},set:function(_){x=_,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",s({},A,{get:function(){return v},set:function(_){const I=n(_);if(I===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=I,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",s({},A,{get:function(){return y},set:function(_){y=!!_,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",s({},A,{get:function(){return w},set:function(_){if(typeof _!="number"&&_!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");w=_,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",s({},A,{get:function(){return b},set:function(_){const I=i(_);if(!I)throw new SyntaxError("An invalid or illegal string was specified.");b=I,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",s({},A,{get:function(){return S},set:function(_){if(_<0||_>100)throw new Error("Position must be between 0 and 100.");S=_,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",s({},A,{get:function(){return C},set:function(_){const I=i(_);if(!I)throw new SyntaxError("An invalid or illegal string was specified.");C=I,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",s({},A,{get:function(){return T},set:function(_){if(_<0||_>100)throw new Error("Size must be between 0 and 100.");T=_,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",s({},A,{get:function(){return B},set:function(_){const I=i(_);if(!I)throw new SyntaxError("An invalid or illegal string was specified.");B=I,this.hasBeenReset=!0}})),d.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class Jme{decode(e,r){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function e9(t){function e(n,i,s,a){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class ege{constructor(){this.values=Object.create(null)}set(e,r){!this.get(e)&&r!==""&&(this.values[e]=r)}get(e,r,n){return n?this.has(e)?this.values[e]:r[n]:this.has(e)?this.values[e]:r}has(e){return e in this.values}alt(e,r,n){for(let i=0;i<n.length;++i)if(r===n[i]){this.set(e,r);break}}integer(e,r){/^-?\d+$/.test(r)&&this.set(e,parseInt(r,10))}percent(e,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const n=parseFloat(r);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function t9(t,e,r,n){const i=n?t.split(n):[t];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(r);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const $B=new vP(0,0,""),y0=$B.align==="middle"?"middle":"center";function tge(t,e,r){const n=t;function i(){const o=e9(t);if(o===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){const u=new ege;t9(o,function(f,h){let m;switch(f){case"region":for(let p=r.length-1;p>=0;p--)if(r[p].id===h){u.set(f,r[p].region);break}break;case"vertical":u.alt(f,h,["rl","lr"]);break;case"line":m=h.split(","),u.integer(f,m[0]),u.percent(f,m[0])&&u.set("snapToLines",!1),u.alt(f,m[0],["auto"]),m.length===2&&u.alt("lineAlign",m[1],["start",y0,"end"]);break;case"position":m=h.split(","),u.percent(f,m[0]),m.length===2&&u.alt("positionAlign",m[1],["start",y0,"end","line-left","line-right","auto"]);break;case"size":u.percent(f,h);break;case"align":u.alt(f,h,["start",y0,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let d=u.get("line","auto");d==="auto"&&$B.line===-1&&(d=-1),l.line=d,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",y0);let A=u.get("position","auto");A==="auto"&&$B.position===50&&(A=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=A}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),a(),e.endTime=i(),a(),s(t,e)}function r9(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class rge{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Jme,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));function n(){let s=r.buffer,a=0;for(s=r9(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,r.buffer=s.slice(a),o}function i(s){t9(s,function(a,o){},/:/)}try{let s="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;s=n();const o=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let a=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:s=n(),r.state){case"HEADER":/:/.test(s)?i(s):s||(r.state="ID");continue;case"NOTE":s||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){r.state="NOTE";break}if(!s)continue;if(r.cue=new vP(0,0,""),r.state="CUE",s.indexOf("-->")===-1){r.cue.id=s;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{tge(s,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=s}continue;case"BADCUE":s||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){e.onparsingerror&&e.onparsingerror(r)}return e.onflush&&e.onflush(),this}}const nge=/\r\n|\n\r|\n|\r/g,CS=function(e,r,n=0){return e.slice(n,n+r.length)===r},ige=function(e){let r=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Te(r)||!Te(n)||!Te(i)||!Te(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return r+=1e3*n,r+=60*1e3*i,r+=60*60*1e3*s,r};function yP(t,e,r){return lp(t.toString())+lp(e.toString())+lp(r)}const sge=function(e,r,n){let i=e[r],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function age(t,e,r,n,i,s,a){const o=new rge,l=bi(new Uint8Array(t)).trim().replace(nge,`
`).split(`
`),u=[],d=e?Ape(e.baseTime,e.timescale):0;let A="00:00.000",f=0,h=0,m,p=!0;o.oncue=function(g){const x=r[n];let v=r.ccOffset;const y=(f-d)/9e4;if(x!=null&&x.new&&(h!==void 0?v=r.ccOffset=x.start:sge(r,n,y)),y){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}v=y-r.presentationOffset}const w=g.endTime-g.startTime,b=ai((g.startTime+v-h)*9e4,i*9e4)/9e4;g.startTime=Math.max(b,0),g.endTime=Math.max(b+w,0);const S=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(S)),g.id||(g.id=yP(g.startTime,g.endTime,S)),g.endTime>0&&u.push(g)},o.onparsingerror=function(g){m=g},o.onflush=function(){if(m){a(m);return}s(u)},l.forEach(g=>{if(p)if(CS(g,"X-TIMESTAMP-MAP=")){p=!1,g.slice(16).split(",").forEach(x=>{CS(x,"LOCAL:")?A=x.slice(6):CS(x,"MPEGTS:")&&(f=parseInt(x.slice(7)))});try{h=ige(A)/1e3}catch(x){m=x}return}else g===""&&(p=!1);o.parse(g+`
`)}),o.flush()}const TS="stpp.ttml.im1t",n9=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,i9=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,oge={left:"start",center:"center",right:"end",start:"start",end:"end"};function hD(t,e,r,n){const i=nt(new Uint8Array(t),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(o=>bi(o)),a=dpe(e.baseTime,1,e.timescale);try{s.forEach(o=>r(lge(o,a)))}catch(o){n(o)}}function lge(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((A,f)=>(A[f]=i.getAttribute(`ttp:${f}`)||s[f],A),{}),o=i.getAttribute("xml:space")!=="preserve",l=pD(BS(i,"styling","style")),u=pD(BS(i,"layout","region")),d=BS(i,"body","[begin]");return[].map.call(d,A=>{const f=s9(A,o);if(!f||!A.hasAttribute("begin"))return null;const h=NS(A.getAttribute("begin"),a),m=NS(A.getAttribute("dur"),a);let p=NS(A.getAttribute("end"),a);if(h===null)throw mD(A);if(p===null){if(m===null)throw mD(A);p=h+m}const g=new vP(h-e,p-e,f);g.id=yP(g.startTime,g.endTime,g.text);const x=u[A.getAttribute("region")],v=l[A.getAttribute("style")],y=cge(x,v,l),{textAlign:w}=y;if(w){const b=oge[w];b&&(g.lineAlign=b),g.align=w}return jt(g,y),g}).filter(A=>A!==null)}function BS(t,e,r){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function pD(t){return t.reduce((e,r)=>{const n=r.getAttribute("xml:id");return n&&(e[n]=r),e},{})}function s9(t,e){return[].slice.call(t.childNodes).reduce((r,n,i)=>{var s;return n.nodeName==="br"&&i?r+`
`:(s=n.childNodes)!=null&&s.length?s9(n,e):e?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function cge(t,e,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&r.hasOwnProperty(a)&&(i=r[a]),s.reduce((o,l)=>{const u=_S(e,n,l)||_S(t,n,l)||_S(i,n,l);return u&&(o[l]=u),o},{})}function _S(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function mD(t){return new Error(`Could not parse ttml timestamp ${t}`)}function NS(t,e){if(!t)return null;let r=e9(t);return r===null&&(n9.test(t)?r=uge(t,e):i9.test(t)&&(r=dge(t,e))),r}function uge(t,e){const r=n9.exec(t),n=(r[4]|0)+(r[5]|0)/e.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/e.frameRate}function dge(t,e){const r=i9.exec(t),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class b0{constructor(e,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,r,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class Age{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=xD(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this),e.on(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(P.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this),e.off(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(P.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new b0(this,"textTrack1"),r=new b0(this,"textTrack2"),n=new b0(this,"textTrack3"),i=new b0(this,"textTrack4");this.cea608Parser1=new fD(1,e,r),this.cea608Parser2=new fD(3,n,i)}addCues(e,r,n,i,s){let a=!1;for(let o=s.length;o--;){const l=s[o],u=fge(l[0],l[1],r,n);if(u>=0&&(l[0]=Math.min(l[0],r),l[1]=Math.max(l[1],n),a=!0,u/(n-r)>.5))return}if(a||s.push([r,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,r,n,i)}else{const o=this.Cues.newCue(null,r,n,i);this.hls.trigger(P.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:s,trackId:a}){const{unparsedVttFrags:o}=this;n===ke.MAIN&&(this.initPTS[r.cc]={baseTime:i,timescale:s,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(P.FRAG_LOADED,l):this.hls.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,r){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const s=n.textTracks[i];if(gD(s,{name:e,lang:r,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:r,captionsTracks:n,media:i}=this,{label:s,languageCode:a}=r[e],o=this.getExistingTrack(s,a);if(o)n[e]=o,jd(n[e]),YG(n[e],i);else{const l=this.createTextTrack("captions",s,a);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const r=this.captionsProperties[e];if(!r)return;const n=r.label,i={_id:e,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,r,n){const i=this.media;if(i)return i.addTextTrack(e,r,n)}onMediaAttaching(e,r){this.media=r.media,r.mediaSource||this._cleanTracks()}onMediaDetaching(e,r){const n=!!r.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(s=>{jd(i[s]),delete i[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=xD(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const r=e.textTracks;if(r)for(let n=0;n<r.length;n++)jd(r[n])}onSubtitleTracksUpdated(e,r){const n=r.subtitleTracks||[],i=n.some(s=>s.textCodec===TS);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(MG(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?nv(a.textTracks):null;if(this.tracks.forEach((l,u)=>{let d;if(o){let A=null;for(let f=0;f<o.length;f++)if(o[f]&&gD(o[f],l)){A=o[f],o[f]=null;break}A&&(d=A)}if(d)jd(d);else{const A=a9(l);d=this.createTextTrack(A,l.name,l.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),o!=null&&o.length){const l=o.filter(u=>u!==null).map(u=>u.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const r=this.hls.levels[e.level];return r==null?void 0:r.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,r){if(this.enabled&&r.frag.type===ke.MAIN){var n,i;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:u}=r.frag,d=(n=(i=r.part)==null?void 0:i.index)!=null?n:-1;s&&a&&(u!==o+1||u===o&&d!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=d}}onFragLoaded(e,r){const{frag:n,payload:i}=r;if(n.type===ke.SUBTITLE)if(i.byteLength){const s=n.decryptdata,a="stats"in r;if(s==null||!s.encrypted||a){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===TS?this._parseIMSC1(n,i):this._parseVTTs(r)}}else this.hls.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,r){const n=this.hls;hD(r,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var r;const{frag:n,payload:i}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[n.cc]&&o===-1){a.push(e);return}const l=this.hls,u=(r=n.initSegment)!=null&&r.data?Yi(n.initSegment.data,new Uint8Array(i)).buffer:i;age(u,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,d=>{this._appendCues(d,n.level),l.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},d=>{const A=d.message==="Missing initPTS for VTT MPEGTS";A?a.push(e):this._fallbackToIMSC1(n,i),l.logger.log(`Failed to parse VTT cue: ${d}`),!(A&&o>n.cc)&&l.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:d})})}_fallbackToIMSC1(e,r){const n=this.tracks[e.level];n.textCodec||hD(r,this.initPTS[e.cc],()=>{n.textCodec=TS,this._parseIMSC1(e,r)},()=>{n.textCodec="wvtt"})}_appendCues(e,r){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[r];if(!i||i.mode==="disabled")return;e.forEach(s=>qG(i,s))}else{const i=this.tracks[r];if(!i)return;const s=i.default?"default":"subtitles"+r;n.trigger(P.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,r){const{frag:n}=r;n.type===ke.SUBTITLE&&this.onFragLoaded(P.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,r){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=r;if(!(n.type===ke.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let s=0;s<i.length;s++){const a=i[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(i[s].pts,o[0]),this.cea608Parser2.addData(i[s].pts,o[1])}}}onBufferFlushing(e,{startOffset:r,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>UB(o[l],r,n))}if(this.config.renderTextTracksNatively&&r===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>UB(o[l],r,i))}}}extractCea608Data(e){const r=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const a=e[i++],o=127&e[i++],l=127&e[i++];if(o===0&&l===0)continue;if((4&a)!==0){const d=3&a;(d===0||d===1)&&(r[d].push(o),r[d].push(l))}}return r}}function a9(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function gD(t,e){return!!t&&t.kind===a9(e)&&MB(e,t)}function fge(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}function xD(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const hge=/\s/,pge={newCue(t,e,r,n){const i=[];let s,a,o,l,u;const d=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(s=n.rows[f],o=!0,l=0,u="",!s.isEmpty()){var A;for(let p=0;p<s.chars.length;p++)hge.test(s.chars[p].uchar)&&o?l++:(u+=s.chars[p].uchar,o=!1);s.cueStartTime=e,e===r&&(r+=1e-4),l>=16?l--:l++;const h=r9(u.trim()),m=yP(e,r,h);t!=null&&(A=t.cues)!=null&&A.getCueById(m)||(a=new d(e,r,h),a.id=m,a.line=f+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(a))}return t&&i.length&&(i.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),i.forEach(f=>qG(t,f))),i}};function mge(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const gge=/(\d+)-(\d+)\/(\d+)/;class vD{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||bge,this.controller=new self.AbortController,this.stats=new ZI}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,r,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=xge(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:u}=r.loadPolicy;this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),r.timeout=l&&Te(l)?l:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},r.timeout),(nm(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(A=>{var f;this.response=this.loader=A;const h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},u-(h-i.loading.start)),!A.ok){const{status:p,statusText:g}=A;throw new wge(g||"fetch, bad network response",p,A)}i.loading.first=h,i.total=yge(A.headers)||i.total;const m=(f=this.callbacks)==null?void 0:f.onProgress;return m&&Te(r.highWaterMark)?this.loadProgressively(A,i,e,r.highWaterMark,m):a?A.arrayBuffer():e.responseType==="json"?A.json():A.text()}).then(A=>{var f,h;const m=this.response;if(!m)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const p=A[o];p&&(i.loaded=i.total=p);const g={url:m.url,data:A,code:m.status},x=(f=this.callbacks)==null?void 0:f.onProgress;x&&!Te(r.highWaterMark)&&x(i,e,A,m),(h=this.callbacks)==null||h.onSuccess(g,i,e,m)}).catch(A=>{var f;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const h=A&&A.code||0,m=A?A.message:null;(f=this.callbacks)==null||f.onError({code:h,text:m},e,A?A.details:null,i)})}getCacheAge(){let e=null;if(this.response){const r=this.response.headers.get("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,r,n,i=0,s){const a=new mG,o=e.body.getReader(),l=()=>o.read().then(u=>{if(u.done)return a.dataLength&&s(r,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=u.value,A=d.length;return r.loaded+=A,A<i||a.dataLength?(a.push(d),a.dataLength>=i&&s(r,n,a.flush().buffer,e)):s(r,n,d.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function xge(t,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(jt({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}function vge(t){const e=gge.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function yge(t){const e=t.get("Content-Range");if(e){const n=vge(e);if(Te(n))return n}const r=t.get("Content-Length");if(r)return parseInt(r)}function bge(t,e){return new self.Request(t.url,e)}class wge extends Error{constructor(e,r,n){super(e),this.code=void 0,this.details=void 0,this.code=r,this.details=n}}const Ege=/^age:\s*[\d.]+\s*$/im;class o9{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ZI,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:r}=this;if(!e||!r)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,r.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",r.url,!0),s(n,r.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,r,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:a.message},r,n,i)}):this.openAndSendXhr(n,r,e)}openAndSendXhr(e,r,n){e.readyState||e.open("GET",r.url,!0);const i=r.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&Te(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:r,stats:n}=this;if(!e||!r)return;const i=r.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const u=r.status,d=r.responseType==="text"?r.responseText:null;if(u>=200&&u<300){const m=d??r.response;if(m!=null){var a,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const p=r.responseType==="arraybuffer"?m.byteLength:m.length;n.loaded=n.total=p,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const g=(a=this.callbacks)==null?void 0:a.onProgress;g&&g(n,e,m,r);const x={url:r.responseURL,data:m,code:u};(o=this.callbacks)==null||o.onSuccess(x,n,e,r);return}}const A=s.loadPolicy.errorRetry,f=n.retry,h={url:e.url,data:void 0,code:u};if(dy(A,f,!1,h))this.retry(A);else{var l;Nt.error(`${u} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:u,text:r.statusText},e,r,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(dy(e,r,!0))this.retry(e);else{var n;Nt.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:r,stats:n}=this;this.retryDelay=rP(e,n.retry),n.retry++,Nt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r==null?void 0:r.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Ege.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Sge={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Cge=Bt(Bt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:o9,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Dfe,bufferController:Bpe,capLevelController:mP,errorController:Qfe,fpsController:_me,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:sG,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:Sge},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Tge()),{},{subtitleStreamController:Ume,subtitleTrackController:Pme,timelineController:Age,audioStreamController:Epe,audioTrackController:Spe,emeController:tA,cmcdController:Sme,contentSteeringController:Tme,interstitialsController:Fme});function Tge(){return{cueHandler:pge,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Bge(t,e,r){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=QB(t),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,u=[];s.forEach(d=>{const A=`${a}Loading${d}`,f=e[A];if(f!==void 0&&l){u.push(A);const h=n[o].default;switch(e[o]={default:h},d){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),u.length&&r.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${o}": ${Ft(e[o])}`)}),Bt(Bt({},n),e)}function QB(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(QB):Object.keys(t).reduce((e,r)=>(e[r]=QB(t[r]),e),{}):t}function _ge(t,e){const r=t.loader;r!==vD&&r!==o9?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):mge()&&(t.loader=vD,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const iv=2,Nge=.1,Ige=.05,Pge=100;class Rge extends eG{constructor(e,r){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(P.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=r,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,r){this.setInterval(Pge),this.mediaSource=r.mediaSource;const n=this.media=r.media;kn(n,"playing",this.onMediaPlaying),kn(n,"waiting",this.onMediaWaiting),kn(n,"ended",this.onMediaEnded)}onMediaDetaching(e,r){this.clearInterval();const{media:n}=this;n&&(zn(n,"playing",this.onMediaPlaying),zn(n,"waiting",this.onMediaWaiting),zn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,r){this.buffered=r.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const r=this.media.currentTime;this.poll(r,this.lastCurrentTime),this.lastCurrentTime=r}poll(e,r){var n,i;const s=(n=this.hls)==null?void 0:n.config;if(!s)return;const a=this.media;if(!a)return;const{seeking:o}=a,l=this.seeking&&!o,u=!this.seeking&&o,d=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==r){r&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!d&&e>r&&this.nudgeOnVideoHole(e,r)),this.waiting===0&&this.stallResolved(e);return}if(u||l){l&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(P.MEDIA_ENDED,{stalled:!1}));return}if(!Xe.getBuffered(a).length){this.nudgeRetry=0;return}const A=Xe.bufferInfo(a,e,0),f=A.nextStart||0,h=this.fragmentTracker;if(o&&h&&this.hls){const S=yD(this.hls.inFlightFragments,e),C=A.len>iv,T=!f||S||f-e>iv&&!h.getPartialFragment(e);if(C||T)return;this.moved=!1}const m=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&h){if(!(A.len>0)&&!f)return;const C=Math.max(f,A.start||0)-e,B=!!(m!=null&&m.live)?m.targetduration*2:iv,_=w0(e,h);if(C>0&&(C<=B||_)){a.paused||this._trySkipBufferHole(_);return}}const p=s.detectStallWithCurrentTimeMs,g=self.performance.now(),x=this.waiting;let v=this.stalled;if(v===null)if(x>0&&g-x<p)v=this.stalled=x;else{this.stalled=g;return}const y=g-v;if(!o&&(y>=p||x)&&this.hls){var w;if(((w=this.mediaSource)==null?void 0:w.readyState)==="ended"&&!(m!=null&&m.live)&&Math.abs(e-((m==null?void 0:m.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(P.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(A),!this.media||!this.hls)return}const b=Xe.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(b,y,e)}stallResolved(e){const r=this.stalled;if(r&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-r;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(P.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,r){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const s=Xe.bufferedInfo(Xe.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&r>=s.start){const a=Xe.timeRangesToArray(i),o=Xe.bufferedInfo(a,r,0).bufferedIndex;if(o>-1&&o<a.length-1){const l=Xe.bufferedInfo(a,e,0).bufferedIndex,u=a[o].end,d=a[o+1].start;if((l===-1||l>o)&&d-u<1&&e-u<2){const A=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${d} buffered index: ${l}`);this.warn(A.message),this.media.currentTime+=1e-6;let f=w0(e,this.fragmentTracker);f&&"fragment"in f?f=f.fragment:f||(f=void 0);const h=Xe.bufferInfo(this.media,e,0);this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:A,reason:A.message,frag:f,buffer:h.len,bufferInfo:h})}}}}}_tryFixBufferStall(e,r,n){var i,s;const{fragmentTracker:a,media:o}=this,l=(i=this.hls)==null?void 0:i.config;if(!o||!a||!l)return;const u=(s=this.hls)==null?void 0:s.latestLevelDetails,d=w0(n,a);if((d||u!=null&&u.live&&n<u.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const A=e.buffered,f=this.adjacentTraversal(e,n);(A&&A.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-n<l.maxBufferHole||f))&&(r>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,r){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const s=n.getFragAtPos(r,ke.MAIN),a=n.getFragAtPos(i,ke.MAIN);if(s&&a)return a.sn-s.sn<2}return!1}_reportStall(e){const{hls:r,media:n,stallReported:i,stalled:s}=this;if(!i&&s!==null&&n&&r){this.stallReported=!0;const a=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Ft(e)})`);this.warn(a.message),r.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var r;const{fragmentTracker:n,media:i}=this,s=(r=this.hls)==null?void 0:r.config;if(!i||!n||!s)return 0;const a=i.currentTime,o=Xe.bufferInfo(i,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){const d=o.len<=s.maxBufferHole,A=o.len>0&&o.len<1&&i.readyState<3,f=l-a;if(f>0&&(d||A)){if(f>s.maxBufferHole){let m=!1;if(a===0){const p=n.getAppendedFrag(0,ke.MAIN);p&&l<p.end&&(m=!0)}if(!m&&e){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||yD(this.hls.inFlightFragments,l))return 0;let g=!1,x=e.end;for(;x<l;){const v=w0(x,n);if(v)x+=v.duration;else{g=!0;break}}if(g)return 0}}const h=Math.max(l+Ige,a+Nge);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${h}`),this.moved=!0,i.currentTime=h,!(e!=null&&e.gap)){const m=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${h}`),p={type:Ue.MEDIA_ERROR,details:Y.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:m,reason:m.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?p.part=e:p.frag=e),this.hls.trigger(P.ERROR,p)}return h}}return 0}_tryNudgeBuffer(e){const{hls:r,media:n,nudgeRetry:i}=this,s=r==null?void 0:r.config;if(!n||!s)return 0;const a=n.currentTime;if(this.nudgeRetry++,i<s.nudgeMaxRetry){const o=a+(i+1)*s.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),n.currentTime=o,r.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(o.message),r.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function yD(t,e){const r=bD(t.main);if(r&&r.start<=e)return r;const n=bD(t.audio);return n&&n.start<=e?n:null}function bD(t){if(!t)return null;switch(t.state){case se.IDLE:case se.STOPPED:case se.ENDED:case se.ERROR:return null}return t.frag}function w0(t,e){return e.getAppendedFrag(t,ke.MAIN)||e.getPartialFragment(t)}const kge=.25;function HB(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function IS(t,e,r,n,i){let s=new t(e,r,"");try{s.value=n,i&&(s.type=i)}catch{s=new t(e,r,Ft(i?Bt({type:i},n):n))}return s}const E0=(()=>{const t=HB();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Lge{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(P.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(P.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(P.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,r){var n;this.media=r.media,((n=r.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const r=(e=this.hls)==null?void 0:e.latestLevelDetails;r&&this.updateDateRangeCues(r)}onMediaDetaching(e,r){this.media=null,!r.transferMedia&&(this.id3Track&&(this.removeCues&&jd(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const r=this.getID3Track(e.textTracks);return r.mode="hidden",r}getID3Track(e){if(this.media){for(let r=0;r<e.length;r++){const n=e[r];if(n.kind==="metadata"&&n.label==="id3")return YG(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,r){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:s}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=HB();if(a)for(let o=0;o<s.length;o++){const l=s[o].type;if(l===Ai.emsg&&!n||!i)continue;const u=EG(s[o].data),d=s[o].pts;let A=d+s[o].duration;A>E0&&(A=E0),A-d<=0&&(A=d+kge);for(let h=0;h<u.length;h++){const m=u[h];if(!SG(m)){this.updateId3CueEnds(d,l);const p=IS(a,d,A,m,l);p&&this.id3Track.addCue(p)}}}}updateId3CueEnds(e,r){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){const a=i[s];a.type===r&&a.startTime<e&&a.endTime===E0&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:r,endOffset:n,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let u;i==="audio"?u=d=>d.type===Ai.audioId3&&l:i==="video"?u=d=>d.type===Ai.emsg&&o:u=d=>d.type===Ai.audioId3&&l||d.type===Ai.emsg&&o,UB(s,r,n,u)}}onLevelUpdated(e,{details:r}){this.updateDateRangeCues(r,!0)}onLevelPtsUpdated(e,r){Math.abs(r.drift)>.01&&this.updateDateRangeCues(r.details)}updateDateRangeCues(e,r){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:s,interstitialsController:a}=this.hls.config;if(!s)return;const o=HB();if(n&&i&&!a){const{fragmentStart:p,fragmentEnd:g}=e;let x=this.assetCue;x?(x.startTime=p,x.endTime=g):o&&(x=this.assetCue=IS(o,p,g,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),x&&(x.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(x),x.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:u}=e,d=Object.keys(u);let A=this.dateRangeCuesAppended;if(l&&r){var f;if((f=l.cues)!=null&&f.length){const p=Object.keys(A).filter(g=>!d.includes(g));for(let g=p.length;g--;){var h;const x=p[g],v=(h=A[x])==null?void 0:h.cues;delete A[x],v&&Object.keys(v).forEach(y=>{const w=v[y];if(w){w.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(w)}catch{}}})}}else A=this.dateRangeCuesAppended={}}const m=e.fragments[e.fragments.length-1];if(!(d.length===0||!Te(m==null?void 0:m.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let p=0;p<d.length;p++){const g=d[p],x=u[g],v=x.startTime,y=A[g],w=(y==null?void 0:y.cues)||{};let b=(y==null?void 0:y.durationKnown)||!1,S=E0;const{duration:C,endDate:T}=x;if(T&&C!==null)S=v+C,b=!0;else if(x.endOnNext&&!b){const _=d.reduce((I,L)=>{if(L!==x.id){const N=u[L];if(N.class===x.class&&N.startDate>x.startDate&&(!I||x.startDate<I.startDate))return N}return I},null);_&&(S=_.startTime,b=!0)}const B=Object.keys(x.attr);for(let _=0;_<B.length;_++){const I=B[_];if(!the(I))continue;const L=w[I];if(L)b&&!(y!=null&&y.durationKnown)?L.endTime=S:Math.abs(L.startTime-v)>.01&&(L.startTime=v,L.endTime=S);else if(o){let N=x.attr[I];rhe(I)&&(N=LV(N));const M=IS(o,v,S,{key:I,data:N},Ai.dateRange);M&&(M.id=g,this.id3Track.addCue(M),w[I]=M,a&&(I==="X-ASSET-LIST"||I==="X-ASSET-URL")&&M.addEventListener("enter",this.onEventCueEnter))}}A[g]={cues:w,dateRange:x,durationKnown:b}}}}}class jge{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:r}=this,n=this.levelDetails;if(!r||!n)return;this.currentTime=r.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const l=i-o,u=Math.min(this.maxLatency,o+n.targetduration);if(l<u&&l>.05&&this.forwardBufferLength>1){const A=Math.min(2,Math.max(1,a)),f=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,h=Math.min(A,Math.max(1,f));this.changeMediaPlaybackRate(r,h)}else r.playbackRate!==1&&r.playbackRate!==0&&this.changeMediaPlaybackRate(r,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const r=this.levelDetails;return r?e.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:r,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let u=o&&n||r;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=s!==void 0?s:a*i);const d=i;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),r=this.targetLatency;if(e===null||r===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,s=e-r-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const r=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-r,0)}get forwardBufferLength(){const{media:e}=this,r=this.levelDetails;if(!e||!r)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(P.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(P.ERROR,this.onError,this))}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:r}){r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,r){var n;r.details===Y.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,r){var n,i;e.playbackRate!==r&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${r}`),e.playbackRate=r)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class Mge extends pP{constructor(e,r){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,r){this.resetLevels()}onManifestLoaded(e,r){const n=this.hls.config.preferManagedMediaSource,i=[],s={},a={};let o=!1,l=!1,u=!1;r.levels.forEach(d=>{const A=d.attrs;let{audioCodec:f,videoCodec:h}=d;f&&(d.audioCodec=f=oy(f,n)||void 0),h&&(h=d.videoCodec=xfe(h));const{width:m,height:p,unknownCodecs:g}=d,x=(g==null?void 0:g.length)||0;if(o||(o=!!(m&&p)),l||(l=!!h),u||(u=!!f),x||f&&!this.isAudioSupported(f)||h&&!this.isVideoSupported(h)){this.log(`Some or all CODECS not supported "${A.CODECS}"`);return}const{CODECS:v,"FRAME-RATE":y,"HDCP-LEVEL":w,"PATHWAY-ID":b,RESOLUTION:S,"VIDEO-RANGE":C}=A,B=`${`${b||"."}-`}${d.bitrate}-${S}-${y}-${v}-${C}-${w}`;if(s[B])if(s[B].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const _=a[B]+=1;d.attrs["PATHWAY-ID"]=new Array(_+1).join(".");const I=this.createLevel(d);s[B]=I,i.push(I)}else s[B].addGroupId("audio",A.AUDIO),s[B].addGroupId("text",A.SUBTITLES);else{const _=this.createLevel(d);s[B]=_,a[B]=1,i.push(_)}}),this.filterAndSortMediaOptions(i,r,o,l,u)}createLevel(e){const r=new em(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),r.supportedResult=GV(i,[])}return r}isAudioSupported(e){return Zp(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Zp(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,r,n,i,s){var a;let o=[],l=[],u=e;const d=((a=r.stats)==null?void 0:a.parsing)||{};if((n||i)&&s&&(u=u.filter(({videoCodec:v,videoRange:y,width:w,height:b})=>(!!v||!!(w&&b))&&_fe(y))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let v="no level with compatible codecs found in manifest",y=v;r.levels.length&&(y=`one or more CODECS in variant not supported: ${Ft(r.levels.map(b=>b.attrs.CODECS).filter((b,S,C)=>C.indexOf(b)===S))}`,this.warn(y),v+=` (${y})`);const w=new Error(v);this.hls.trigger(P.ERROR,{type:Ue.MEDIA_ERROR,details:Y.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:w,reason:y})}}),d.end=performance.now();return}r.audioTracks&&(o=r.audioTracks.filter(v=>!v.audioCodec||this.isAudioSupported(v.audioCodec)),wD(o)),r.subtitles&&(l=r.subtitles,wD(l));const A=u.slice(0);u.sort((v,y)=>{if(v.attrs["HDCP-LEVEL"]!==y.attrs["HDCP-LEVEL"])return(v.attrs["HDCP-LEVEL"]||"")>(y.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&v.height!==y.height)return v.height-y.height;if(v.frameRate!==y.frameRate)return v.frameRate-y.frameRate;if(v.videoRange!==y.videoRange)return ly.indexOf(v.videoRange)-ly.indexOf(y.videoRange);if(v.videoCodec!==y.videoCodec){const w=fM(v.videoCodec),b=fM(y.videoCodec);if(w!==b)return b-w}if(v.uri===y.uri&&v.codecSet!==y.codecSet){const w=ay(v.codecSet),b=ay(y.codecSet);if(w!==b)return b-w}return v.averageBitrate!==y.averageBitrate?v.averageBitrate-y.averageBitrate:0});let f=A[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==A.length)){for(let v=0;v<A.length;v++)if(A[v].pathwayId===u[0].pathwayId){f=A[v];break}}this._levels=u;for(let v=0;v<u.length;v++)if(u[v]===f){var h;this._firstLevel=v;const y=f.bitrate,w=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${y}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const b=Math.min(y,this.hls.config.abrEwmaDefaultEstimateMax);b>w&&w===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=b)}break}const m=s&&!i,p=this.hls.config,g=!!(p.audioStreamController&&p.audioTrackController),x={levels:u,audioTracks:o,subtitleTracks:l,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:s,video:i,altAudio:g&&!m&&o.some(v=>!!v.url)};d.end=performance.now(),this.hls.trigger(P.MANIFEST_PARSED,x)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const r=this._levels;if(r.length===0)return;if(e<0||e>=r.length){const d=new Error("invalid level idx"),A=e<0;if(this.hls.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.LEVEL_SWITCH_ERROR,level:e,fatal:A,error:d,reason:d.message}),A)return;e=Math.min(e,r.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=r[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&i&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(P.LEVEL_SWITCHING,l);const u=a.details;if(!u||u.live){const d=this.switchParams(a.uri,i==null?void 0:i.details,u);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const r=this.steering.pathways(),n=e.filter(i=>r.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${r}`);return}this.steering.pathwayPriority=n}}onError(e,r){r.fatal||!r.context||r.context.type===at.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(e,{frag:r}){if(r!==void 0&&r.type===ke.MAIN){const n=r.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const i=this._levels[r.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,r){var n;const{level:i,details:s}=r,a=r.levelInfo;if(!a){var o;this.warn(`Invalid level index ${i}`),(o=r.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||r.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===r.details&&l.advanced&&(l=void 0),this.playlistLoaded(i,r,l)}else(n=r.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=this.getUrlWithDirectives(e.uri,r),i=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,o=a==null?void 0:a.age;this.log(`Loading level index ${i}${(r==null?void 0:r.msn)!==void 0?" at sn "+r.msn+" part "+r.part:""}${s?" Pathway "+s:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(P.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var r;if(this._levels.length===1)return;const n=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));fG(n),this._levels=n,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(P.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:r}){this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:r,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(P.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function wD(t){const e={};t.forEach(r=>{const n=r.groupId||"";r.id=e[n]=e[n]||0,e[n]++})}function l9(){return self.SourceBuffer||self.WebKitSourceBuffer}function c9(){if(!tc())return!1;const e=l9();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Dge(){if(!c9())return!1;const t=tc();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Jp(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Jp(e,"audio"))))}function Oge(){var t;const e=l9();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const Fge=100;class Uge extends oP{constructor(e,r,n){super(e,r,n,"stream-controller",ke.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,s=i?i.currentTime:null;if(s===null||!Te(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(i,s,ke.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,r){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(Fge),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this._hasEnoughToStart=!!r}n>0&&e===-1&&!r&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=se.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=se.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case se.WAITING_LEVEL:{const{levels:e,level:r}=this,n=e==null?void 0:e[r],i=n==null?void 0:n.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=se.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=se.IDLE;break}break}case se.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===se.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:r,levels:n,media:i}=this;if(r===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const a=n[s],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const p={};this.altAudio===2&&(p.type="video"),this.hls.trigger(P.BUFFER_EOS,p),this.state=se.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const u=a.details;if(!u||this.state===se.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=se.WAITING_LEVEL,this.startFragRequested=!1;return}const d=o.len,A=this.getMaxBufferLength(a.maxBitrate);if(d>=A)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:o.end;let h=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&h&&vr(h)&&this.fragmentTracker.getState(h)!==Lr.OK){var m;const g=((m=this.backtrackFragment)!=null?m:h).sn-u.startSN,x=u.fragments[g-1];x&&h.cc===x.cc&&(h=x,this.fragmentTracker.removeFragment(x))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){const g=this.audioOnly&&!this.altAudio?Mt.AUDIO:Mt.VIDEO,x=(g===Mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;x&&this.afterBufferFlushed(x,g,ke.MAIN)}h=this.getNextFragmentLoopLoading(h,u,o,ke.MAIN,A)}h&&(h.initSegment&&!h.initSegment.data&&!this.bitrateTest&&(h=h.initSegment),this.loadFragment(h,a,f))}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);i===Lr.NOT_LOADED||i===Lr.PARTIAL?vr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,r)):super.loadFragment(e,r,n):this._loadInitSegment(e,r):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ke.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:r}=this;if(r!=null&&r.readyState){let n;const i=this.getAppendedFrag(r.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!r.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],u=this.fragLastKbps;u&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:n=0}else n=0;const a=this.getBufferedFrag(r.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,d=Math.max(a.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case se.KEY_LOADING:case se.FRAG_LOADING:case se.FRAG_LOADING_WAITING_RETRY:case se.PARSING:case se.PARSED:this.state=se.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,r){super.flushMainBuffer(e,r,this.altAudio===2?"video":null)}onMediaAttached(e,r){super.onMediaAttached(e,r);const n=r.media;kn(n,"playing",this.onMediaPlaying),kn(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,r){const{media:n}=this;n&&(zn(n,"playing",this.onMediaPlaying),zn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,r),!r.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(P.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,r){let n=!1,i=!1;for(let s=0;s<r.levels.length;s++){const a=r.levels[s].audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!Oge(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(e,r){const{levels:n}=this;if(!n||this.state!==se.IDLE)return;const i=r.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=se.WAITING_LEVEL)}onLevelLoaded(e,r){var n;const{levels:i,startFragRequested:s}=this,a=r.level,o=r.details,l=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const u=r.levelInfo,d=this.fragCurrent;d&&(this.state===se.FRAG_LOADING||this.state===se.FRAG_LOADING_WAITING_RETRY)&&d.level!==r.level&&d.loader&&this.abortCurrentFrag();let A=0;if(o.live||(n=u.details)!=null&&n.live){var f;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;A=this.alignPlaylists(o,u.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(u.details=o,this.levelLastLoaded=u,s||this.setStartPosition(o,A),this.hls.trigger(P.LEVEL_UPDATED,{details:o,level:a}),this.state===se.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=se.IDLE}s&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:r,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=s>=a-r.maxFragLookUpTolerance&&s<=o;if(i!==null&&n.duration>i&&(s<i||!l)){const d=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration;if((!l&&n.readyState<4||s<o-d)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const A=Xe.bufferInfo(n,i,0);if(!((u=A.buffered)!=null&&u.length)){n.currentTime=i;return}if(A.start<=s){n.currentTime=i;return}const{nextStart:h}=Xe.bufferedInfo(A.buffered,s,0);h&&(n.currentTime=h)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const u=o.videoCodec,d=l.PTSKnown||!l.live,A=(r=n.initSegment)==null?void 0:r.data,f=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new jG(this.hls,ke.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=i?i.index:-1,p=m!==-1,g=new iP(n.level,n.sn,n.stats.chunkCount,s.byteLength,m,p),x=this.initPTS[n.cc];h.push(s,A,f,u,n,i,l.totalduration,d,g,x)}onAudioTrackSwitching(e,r){const n=this.hls,i=this.altAudio!==0;if(cy(r.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(P.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(P.AUDIO_TRACK_SWITCHED,r)}),n.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(P.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(e,r){const n=cy(r.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,r){const n=r.tracks;let i,s,a=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(s=o,i=l,o==="video"){const u=n[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,r){const{frag:n,part:i}=r,s=n.type===ke.MAIN;if(s){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===se.PARSED&&(this.state=se.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),vr(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const a=this.media;a&&(!this._hasEnoughToStart&&Xe.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,r){var n;if(r.fatal){this.state=se.ERROR;return}switch(r.details){case Y.FRAG_GAP:case Y.FRAG_PARSING_ERROR:case Y.FRAG_DECRYPT_ERROR:case Y.FRAG_LOAD_ERROR:case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_ERROR:case Y.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ke.MAIN,r);break;case Y.LEVEL_LOAD_ERROR:case Y.LEVEL_LOAD_TIMEOUT:case Y.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===se.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===at.LEVEL&&(this.state=se.IDLE);break;case Y.BUFFER_ADD_CODEC_ERROR:case Y.BUFFER_APPEND_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.resetLoadingState();break;case Y.BUFFER_FULL_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Y.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onFragLoadEmergencyAborted(){this.state=se.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:r}){if(r!==Mt.AUDIO||!this.altAudio){const n=(r===Mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,r,ke.MAIN),this.tick())}}onLevelsUpdated(e,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const r=e.currentTime;let n=this.startPosition;if(n>=0&&r<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const s=this.getLevelDetails(),a=Xe.getBuffered(e),o=a.length?a.start(0):0,l=o-n,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<u||this.loadingParts&&l<2*((s==null?void 0:s.partTarget)||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),r<n&&(this.log(`seek to target start position ${n} from current time ${r} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let r=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(e,r){e.bitrateTest=!0,this._doFragLoad(e,r).then(n=>{const{hls:i}=this,s=n==null?void 0:n.frag;if(!s||this.fragContextChanged(s))return;r.fragmentError=0,this.state=se.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(P.FRAG_LOADED,n),s.bitrateTest=!1}).catch(n=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const r=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:o,part:l,level:u}=a,{video:d,text:A,id3:f,initSegment:h}=i,{details:m}=u,p=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=se.PARSING,h){const g=h.tracks;if(g){const w=o.initSegment||o;if(this.unhandledEncryptionError(h,o))return;this._bufferInitSegment(u,g,w,s),n.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:r,tracks:g})}const x=h.initPTS,v=h.timescale,y=this.initPTS[o.cc];if(Te(x)&&(!y||y.baseTime!==x||y.timescale!==v)){const w=h.trackId;this.initPTS[o.cc]={baseTime:x,timescale:v,trackId:w},n.trigger(P.INIT_PTS_FOUND,{frag:o,id:r,initPTS:x,timescale:v,trackId:w})}}if(d&&m){p&&d.type==="audiovideo"&&this.logMuxedErr(o);const g=m.fragments[o.sn-1-m.startSN],x=o.sn===m.startSN,v=!g||o.cc>g.cc;if(i.independent!==!1){const{startPTS:y,endPTS:w,startDTS:b,endDTS:S}=d;if(l)l.elementaryStreams[d.type]={startPTS:y,endPTS:w,startDTS:b,endDTS:S};else if(d.firstKeyFrame&&d.independent&&s.id===1&&!v&&(this.couldBacktrack=!0),d.dropped&&d.independent){const C=this.getMainFwdBufferInfo(),T=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,B=d.firstKeyFramePTS?d.firstKeyFramePTS:y;if(!x&&T<B-this.config.maxBufferHole&&!v){this.backtrack(o);return}else v&&(o.gap=!0);o.setElementaryStreamInfo(d.type,o.start,w,o.start,S,!0)}else x&&y-(m.appliedTimelineOffset||0)>iv&&(o.gap=!0);o.setElementaryStreamInfo(d.type,y,w,b,S),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(d,o,l,s,x||v)}else if(x||v)o.gap=!0;else{this.backtrack(o);return}}if(p){const{startPTS:g,endPTS:x,startDTS:v,endDTS:y}=p;l&&(l.elementaryStreams[Mt.AUDIO]={startPTS:g,endPTS:x,startDTS:v,endDTS:y}),o.setElementaryStreamInfo(Mt.AUDIO,g,x,v,y),this.bufferFragmentData(p,o,l,s)}if(m&&f!=null&&f.samples.length){const g={id:r,frag:o,details:m,samples:f.samples};n.trigger(P.FRAG_PARSING_METADATA,g)}if(m&&A){const g={id:r,frag:o,details:m,samples:A.samples};n.trigger(P.FRAG_PARSING_USERDATA,g)}}logMuxedErr(e){this.warn(`${vr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,r,n,i){if(this.state!==se.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&(delete r.audio,r.audiovideo&&this.logMuxedErr(n));const{audio:s,video:a,audiovideo:o}=r;if(s){const u=e.audioCodec;let d=Xx(s.codec,u);d==="mp4a"&&(d="mp4a.40.5");const A=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){d&&(d.indexOf("mp4a.40.5")!==-1?d="mp4a.40.2":d="mp4a.40.5");const f=s.metadata;f&&"channelCount"in f&&(f.channelCount||1)!==1&&A.indexOf("firefox")===-1&&(d="mp4a.40.5")}d&&d.indexOf("mp4a.40.5")!==-1&&A.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(d="mp4a.40.2",this.log(`Android: force audio codec to ${d}`)),u&&u!==d&&this.log(`Swapping manifest audio codec "${u}" for "${d}"`),s.levelCodec=d,s.id=ke.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${d||""}/${u||""}/${s.codec}]`),delete r.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=ke.MAIN;const u=a.codec;if((u==null?void 0:u.length)===4)switch(u){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${a.codec!==u?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete r.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete r.video,delete r.audio);const l=Object.keys(r);if(l.length){if(this.hls.trigger(P.BUFFER_CODECS,r),!this.hls)return;l.forEach(u=>{const A=r[u].initSegment;A!=null&&A.byteLength&&this.hls.trigger(P.BUFFER_APPENDING,{type:u,data:A,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,ke.MAIN)}get maxBufferLength(){const{levels:e,level:r}=this,n=e==null?void 0:e[r];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=se.IDLE}checkFragmentChanged(){const e=this.media;let r=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Xe.isBuffered(e,n)?r=this.getAppendedFrag(n):Xe.isBuffered(e,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;const i=this.fragPlaying,s=r.level;(!i||r.sn!==i.sn||i.level!==s)&&(this.fragPlaying=r,this.hls.trigger(P.FRAG_CHANGED,{frag:r}),(!i||i.level!==s)&&this.hls.trigger(P.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Te(r)?this.getAppendedFrag(r):null}get currentProgramDateTime(){var e;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Te(r)){const n=this.getLevelDetails(),i=this.currentFrag||(n?Nu(null,n.fragments,r):null);if(i){const s=i.programDateTime;if(s!==null){const a=s+(r-i.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class $ge extends Zi{constructor(e,r){super("key-loader",r),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var r;if(e&&e!==((r=i.context)==null?void 0:r.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e].loader;r&&r.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,r=Y.KEY_LOAD_ERROR,n,i,s){return new Ga({type:Ue.NETWORK_ERROR,details:r,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,r,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(r.length)for(let i=0,s=r.length;i<s;i++){const a=r[i];if(e.cc<=a.cc&&(!vr(e)||!vr(a)||e.sn<a.sn)||!n&&i==s-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const l=Jx(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const i=kh(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(r=>this.loadInternal(e,r)):this.loadInternal(e)}loadInternal(e,r){var n,i;r&&e.setKeyFormat(r);const s=e.decryptdata;if(!s){const u=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Y.KEY_LOAD_ERROR,u))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Y.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const o=PS(s);let l=this.keyIdToKeyInfo[o];if((n=l)!=null&&n.decryptdata.key)return s.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(i=l)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(d=>{const{keyInfo:A}=d;return s.key=A.decryptdata.key,{frag:e,keyInfo:A}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${s.keyId?" keyId: "+nn(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,Y.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,r){const n={frag:r,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=r.initSegment)!=null&&i.data){const a=afe(r.initSegment.data);if(a.length){let o=a[0];o.some(l=>l!==0)?(this.log(`Using keyId found in init segment ${nn(o)}`),$l.setKeyIdForUri(e.decryptdata.uri,o)):(o=$l.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${nn(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!vr(r))return Promise.resolve(n);const s=this.emeController.loadKey(n);return(e.keyLoadPromise=s.then(a=>(e.mediaKeySessionContext=a,n))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=r),a})}return Promise.resolve(n)}loadKeyHTTP(e,r){const n=this.config,i=n.loader,s=new i(n);return r.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:r,responseType:"arraybuffer",url:e.decryptdata.uri},u=n.keyLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},A={onSuccess:(f,h,m,p)=>{const{frag:g,keyInfo:x}=m,v=PS(x.decryptdata);if(!g.decryptdata||x!==this.keyIdToKeyInfo[v])return o(this.createKeyLoadError(g,Y.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),p));x.decryptdata.key=g.decryptdata.key=new Uint8Array(f.data),g.keyLoader=null,x.loader=null,a({frag:g,keyInfo:x})},onError:(f,h,m,p)=>{this.resetLoader(h),o(this.createKeyLoadError(r,Y.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),m,Bt({url:l.url,data:void 0},f)))},onTimeout:(f,h,m)=>{this.resetLoader(h),o(this.createKeyLoadError(r,Y.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(f,h,m)=>{this.resetLoader(h),o(this.createKeyLoadError(r,Y.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};s.load(l,d,A)})}resetLoader(e){const{frag:r,keyInfo:n,url:i}=e,s=n.loader;r.keyLoader===s&&(r.keyLoader=null,n.loader=null);const a=PS(n.decryptdata)||i;delete this.keyIdToKeyInfo[a],s&&s.destroy()}}function PS(t){if(t.keyFormat!==sn.FAIRPLAY){const e=t.keyId;if(e)return nn(e)}return t.uri}function ED(t){const{type:e}=t;switch(e){case at.AUDIO_TRACK:return ke.AUDIO;case at.SUBTITLE_TRACK:return ke.SUBTITLE;default:return ke.MAIN}}function RS(t,e){let r=t.url;return(r===void 0||r.indexOf("data:")===0)&&(r=e.url),r}class Qge{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const r=this.hls.config,n=r.pLoader,i=r.loader,s=n||i,a=new s(r);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,r){const{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:at.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,r){const{id:n,level:i,pathwayId:s,url:a,deliveryDirectives:o,levelInfo:l}=r;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:at.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,r){const{id:n,groupId:i,url:s,deliveryDirectives:a,track:o}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:at.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,r){const{id:n,groupId:i,url:s,deliveryDirectives:a,track:o}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:at.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,r){const n=this.loaders[at.LEVEL];if(n){const i=n.context;i&&!r.levels.some(s=>s===i.levelOrTrack)&&(n.abort(),delete this.loaders[at.LEVEL])}}load(e){var r;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const u=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===at.MANIFEST?s=n.manifestLoadPolicy.default:s=jt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Te((r=e.deliveryDirectives)==null?void 0:r.part)){let u;if(e.type===at.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===at.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===at.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const d=u.partTarget,A=u.targetduration;if(d&&A){const f=Math.max(d*3,A*.8)*1e3;s=jt({},s,{maxTimeToFirstByteMs:Math.min(f,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(u,d,A,f)=>{const h=this.getInternalLoader(A);this.resetInternalLoader(A.type);const m=u.data;d.parsing.start=performance.now(),aa.isMediaPlaylist(m)||A.type!==at.MANIFEST?this.handleTrackOrLevelPlaylist(u,d,A,f||null,h):this.handleMasterPlaylist(u,d,A,f)},onError:(u,d,A,f)=>{this.handleNetworkError(d,A,!1,u,f)},onTimeout:(u,d,A)=>{this.handleNetworkError(d,A,!0,void 0,u)}};i.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:r},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${r}`),this.hls.startLoad(r))}handleMasterPlaylist(e,r,n,i){const s=this.hls,a=e.data,o=RS(e,n),l=aa.parseMasterPlaylist(a,o);if(l.playlistParsingError){r.parsing.end=performance.now(),this.handleManifestParsingError(e,n,l.playlistParsingError,i,r);return}const{contentSteering:u,levels:d,sessionData:A,sessionKeys:f,startTimeOffset:h,variableList:m}=l;this.variableList=m,d.forEach(v=>{const{unknownCodecs:y}=v;if(y){const{preferManagedMediaSource:w}=this.hls.config;let{audioCodec:b,videoCodec:S}=v;for(let C=y.length;C--;){const T=y[C];Zp(T,"audio",w)?(v.audioCodec=b=b?`${b},${T}`:T,DA.audio[b.substring(0,4)]=2,y.splice(C,1)):Zp(T,"video",w)&&(v.videoCodec=S=S?`${S},${T}`:T,DA.video[S.substring(0,4)]=2,y.splice(C,1))}}});const{AUDIO:p=[],SUBTITLES:g,"CLOSED-CAPTIONS":x}=aa.parseMasterPlaylistMedia(a,o,l);p.length&&!p.some(y=>!y.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new nr({}),bitrate:0,url:""})),s.trigger(P.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:x,contentSteering:u,url:o,stats:r,networkDetails:i,sessionData:A,sessionKeys:f,startTimeOffset:h,variableList:m})}handleTrackOrLevelPlaylist(e,r,n,i,s){const a=this.hls,{id:o,level:l,type:u}=n,d=RS(e,n),A=Te(l)?l:Te(o)?o:0,f=ED(n),h=aa.parseLevelPlaylist(e.data,d,A,f,0,this.variableList);if(u===at.MANIFEST){const m={attrs:new nr({}),bitrate:0,details:h,name:"",url:d};h.requestScheduled=r.loading.start+uG(h,0),a.trigger(P.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:d,stats:r,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,r,n,i,s)}handleManifestParsingError(e,r,n,i,s){this.hls.trigger(P.ERROR,{type:Ue.NETWORK_ERROR,details:Y.MANIFEST_PARSING_ERROR,fatal:r.type===at.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:r,networkDetails:i,stats:s})}handleNetworkError(e,r,n=!1,i,s){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===at.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===at.AUDIO_TRACK||e.type===at.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=Y.UNKNOWN,u=!1;const d=this.getInternalLoader(e);switch(e.type){case at.MANIFEST:l=n?Y.MANIFEST_LOAD_TIMEOUT:Y.MANIFEST_LOAD_ERROR,u=!0;break;case at.LEVEL:l=n?Y.LEVEL_LOAD_TIMEOUT:Y.LEVEL_LOAD_ERROR,u=!1;break;case at.AUDIO_TRACK:l=n?Y.AUDIO_TRACK_LOAD_TIMEOUT:Y.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case at.SUBTITLE_TRACK:l=n?Y.SUBTITLE_TRACK_LOAD_TIMEOUT:Y.SUBTITLE_LOAD_ERROR,u=!1;break}d&&this.resetInternalLoader(e.type);const A={type:Ue.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:d,context:e,error:o,networkDetails:r,stats:s};if(i){const f=(r==null?void 0:r.url)||e.url;A.response=Bt({url:f,data:void 0},i)}this.hls.trigger(P.ERROR,A)}handlePlaylistLoaded(e,r,n,i,s,a){const o=this.hls,{type:l,level:u,levelOrTrack:d,id:A,groupId:f,deliveryDirectives:h}=i,m=RS(r,i),p=ED(i);let g=typeof i.level=="number"&&p===ke.MAIN?u:void 0;const x=e.playlistParsingError;if(x){if(this.hls.logger.warn(`${x} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(P.ERROR,{type:Ue.NETWORK_ERROR,details:Y.LEVEL_PARSING_ERROR,fatal:!1,url:m,error:x,reason:x.message,response:r,context:i,level:g,parent:p,networkDetails:s,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const v=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(P.ERROR,{type:Ue.NETWORK_ERROR,details:Y.LEVEL_EMPTY_ERROR,fatal:!1,url:m,error:v,reason:v.message,response:r,context:i,level:g,parent:p,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case at.MANIFEST:case at.LEVEL:if(g){if(!d)g=0;else if(d!==o.levels[g]){const v=o.levels.indexOf(d);v>-1&&(g=v)}}o.trigger(P.LEVEL_LOADED,{details:e,levelInfo:d||o.levels[0],level:g||0,id:A||0,stats:n,networkDetails:s,deliveryDirectives:h,withoutMultiVariant:l===at.MANIFEST});break;case at.AUDIO_TRACK:o.trigger(P.AUDIO_TRACK_LOADED,{details:e,track:d,id:A||0,groupId:f||"",stats:n,networkDetails:s,deliveryDirectives:h});break;case at.SUBTITLE_TRACK:o.trigger(P.SUBTITLE_TRACK_LOADED,{details:e,track:d,id:A||0,groupId:f||"",stats:n,networkDetails:s,deliveryDirectives:h});break}}}class er{static get version(){return tm}static isMSESupported(){return c9()}static isSupported(){return Dge()}static getMediaSource(){return tc()}static get Events(){return P}static get MetadataSchema(){return Ai}static get ErrorTypes(){return Ue}static get ErrorDetails(){return Y}static get DefaultConfig(){return er.defaultConfig?er.defaultConfig:Cge}static set DefaultConfig(e){er.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new lP,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const r=this.logger=WAe(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=Bge(er.DefaultConfig,e,r);this.userConfig=e,n.progressive&&_ge(n,r);const{abrController:i,bufferController:s,capLevelController:a,errorController:o,fpsController:l}=n,u=new o(this),d=this.abrController=new i(this),A=new Hfe(this),f=n.interstitialsController,h=f?this.interstitialsController=new f(this,er):null,m=this.bufferController=new s(this,A),p=this.capLevelController=new a(this),g=new l(this),x=new Qge(this),v=n.contentSteeringController,y=v?new v(this):null,w=this.levelController=new Mge(this,y),b=new Lge(this),S=new $ge(this.config,this.logger),C=this.streamController=new Uge(this,A,S),T=this.gapController=new Rge(this,A);p.setStreamController(C),g.setStreamController(C);const B=[x,w,C];h&&B.splice(1,0,h),y&&B.splice(1,0,y),this.networkControllers=B;const _=[d,m,T,p,g,b,A];this.audioTrackController=this.createController(n.audioTrackController,B);const I=n.audioStreamController;I&&B.push(this.audioStreamController=new I(this,A,S)),this.subtitleTrackController=this.createController(n.subtitleTrackController,B);const L=n.subtitleStreamController;L&&B.push(this.subtititleStreamController=new L(this,A,S)),this.createController(n.timelineController,_),S.emeController=this.emeController=this.createController(n.emeController,_),this.cmcdController=this.createController(n.cmcdController,_),this.latencyController=this.createController(jge,_),this.coreComponents=_,B.push(u);const N=u.onErrorOut;typeof N=="function"&&this.on(P.ERROR,N,u),this.on(P.MANIFEST_LOADED,x.onManifestLoaded,x)}createController(e,r){if(e){const n=new e(this);return r&&r.push(n),n}return null}on(e,r,n=this){this._emitter.on(e,r,n)}once(e,r,n=this){this._emitter.once(e,r,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,r,n=this,i){this._emitter.off(e,r,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,r,n){return this._emitter.emit(e,r,n)}trigger(e,r){if(this.config.debug)return this.emit(e,e,r);try{return this.emit(e,e,r)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===P.ERROR;this.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(P.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(P.ERROR,{type:Ue.OTHER_ERROR,details:Y.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const r="media"in e,n=r?e.media:e,i=r?e:{media:n};this._media=n,this.trigger(P.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(P.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(P.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const r=this.media,n=this._url,i=this._url=XI.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),r&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(P.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,r){this.logger.log(`startLoad(${e+(r?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,r),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[ke.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[ke.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[ke.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,r=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),r&&this.startLoad(r))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Rme()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const r=!!e;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Bfe(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:r}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=r)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:r,maxHdcpLevel:n}=this;let i;if(r===-1&&e!=null&&e.length?i=e.length-1:i=r,n)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var r;return((r=this.audioTrackController)==null?void 0:r.setAudioOption(e))||null}setSubtitleOption(e){var r;return((r=this.subtitleTrackController)==null?void 0:r.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const r=this.audioTrackController;r&&(r.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const r=this.subtitleTrackController;r&&(r.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,r=this.allAudioTracks){const n=YV(r);return zV(e,n,navigator.mediaCapabilities)}}er.defaultConfig=void 0;const bP=({events:t,isFullPage:e=!1,isOverlay:r=!1})=>{const[n,i]=Q.useState(!1),s=t.length,a=t.filter(k=>k.eventName==="pass_start"||k.eventName==="pass_end").length,o=t.filter(k=>{var O;return k.eventName==="Successful Pass"||k.eventName==="PASS_SUCCESS"||k.eventName==="pass_end"&&!((O=k.subType)!=null&&O.includes("INCOMPLETE"))}).length,l=0,u=t.filter(k=>k.eventName==="shot_start"||k.eventName==="shot_outcome").length,d=t.filter(k=>k.eventName==="interception"||k.eventName==="recovery").length,A=t.filter(k=>k.eventName==="turnover"||k.eventName==="loss").length,f=d+A,h=t.filter(k=>k.eventName==="foul"||k.eventName==="foul_committed").length,m=t.filter(k=>{var O;return(O=k.eventName)==null?void 0:O.includes("duel")}).length,p=t.filter(k=>k.eventName==="loose_ball").length,g=t.filter(k=>k.zone&&k.zone>0),x=[1,4,7,10,13,16],v=[2,5,8,11,14,17],y=[3,6,9,12,15,18],w=g.filter(k=>x.includes(k.zone)).length,b=g.filter(k=>v.includes(k.zone)).length,S=g.filter(k=>y.includes(k.zone)).length,C=g.length||1,T=(w/C*100).toFixed(0),B=(b/C*100).toFixed(0),_=(S/C*100).toFixed(0),I=t.filter(k=>k.subType==="SHORT").length,L=t.filter(k=>k.subType==="LONG").length,N=t.filter(k=>k.eventName==="phase_buildup").length,R=t.filter(k=>(k.eventName==="interception"||k.eventName==="recovery")&&k.zone&&k.zone>=13).length,M=[{title:"Passes",value:a,color:"text-blue-400",subtext:` ${o}`},{title:"Shots",value:u,color:"text-orange-400"},{title:"Possession",value:f,color:"text-purple-400"},{title:"Goals",value:t.filter(k=>k.eventName==="goal").length,color:"text-emerald-400"},{title:"Fouls",value:h,color:"text-yellow-400"}];return r?n?c.jsx("div",{className:"absolute top-4 left-4 z-50 cursor-pointer group",onClick:()=>i(!1),children:c.jsxs("div",{className:"bg-black/60 backdrop-blur-md border border-white/10 rounded-lg p-2 flex items-center gap-2 hover:bg-black/80 transition-all shadow-xl",children:[c.jsx(un,{className:"w-4 h-4 text-emerald-400"}),c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-white",children:"Stats"})]})}):c.jsx("div",{className:"absolute top-4 left-4 z-50 w-[240px] animate-in slide-in-from-left-4 duration-200",children:c.jsxs("div",{className:"bg-black/80 backdrop-blur-md border border-white/10 rounded-xl overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10 bg-white/5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wi,{className:"w-3 h-3 text-emerald-400"}),c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Live Stats"})]}),c.jsx("button",{onClick:k=>{k.stopPropagation(),i(!0)},className:"text-muted-foreground hover:text-white transition-colors",children:c.jsx(f8,{className:"w-3 h-3 rotate-180"})})]}),c.jsx("div",{className:"p-2 space-y-1.5",children:M.map(k=>c.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded bg-white/5 border border-white/5",children:[c.jsx("span",{className:"text-[9px] uppercase text-muted-foreground font-bold tracking-wider",children:k.title}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:Z("text-sm font-black font-mono",k.color),children:k.value}),k.subtext&&c.jsx("span",{className:"text-[8px] text-muted-foreground/50",children:k.subtext})]})]},k.title))}),c.jsxs("div",{className:"px-3 py-1.5 bg-emerald-500/10 border-t border-white/5 flex justify-between items-center text-[9px]",children:[c.jsx("span",{className:"text-emerald-400 font-bold uppercase tracking-wider",children:"Total Events"}),c.jsx("span",{className:"text-white font-mono",children:s})]})]})}):c.jsxs("div",{className:"space-y-4",children:[e&&c.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-white/5",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-3xl font-black tracking-tight text-white uppercase flex items-center gap-3",children:[c.jsx(un,{className:"w-7 h-7 text-emerald-400"}),"Match Analytics"]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Real-time performance tracking"})]}),c.jsx("div",{className:"flex items-center gap-3 bg-gradient-to-r from-emerald-500/10 to-blue-500/10 px-4 py-3 rounded-lg border border-white/5",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mb-1",children:"Total Events"}),c.jsx("div",{className:"text-2xl font-black text-emerald-400 font-mono",children:s})]})})]}),c.jsxs("div",{children:[c.jsx(Hge,{title:"Match Statistics",icon:Wi}),c.jsxs("div",{className:`grid gap-2 ${e?"grid-cols-2 md:grid-cols-4 lg:grid-cols-7":"grid-cols-2 md:grid-cols-3 lg:grid-cols-7"}`,children:[c.jsx(vc,{title:"Passes",value:a,subtext:` ${o} |  ${l}`,color:"text-blue-400",bgGradient:"from-blue-500/10 to-blue-600/5"}),c.jsx(vc,{title:"Shots",value:u,color:"text-orange-400",bgGradient:"from-orange-500/10 to-orange-600/5"}),c.jsx(vc,{title:"Possession",value:f,color:"text-purple-400",bgGradient:"from-purple-500/10 to-purple-600/5"}),c.jsx(vc,{title:"Recoveries",value:d,subtext:"Won",color:"text-green-400",bgGradient:"from-green-500/10 to-green-600/5",trend:"up"}),c.jsx(vc,{title:"Losses",value:A,subtext:"Lost",color:"text-red-400",bgGradient:"from-red-500/10 to-red-600/5",trend:"down"}),c.jsx(vc,{title:"Fouls",value:h,color:"text-yellow-400",bgGradient:"from-yellow-500/10 to-yellow-600/5"}),c.jsx(vc,{title:"Duels",value:m,subtext:`50/50: ${p}`,color:"text-indigo-400",bgGradient:"from-indigo-500/10 to-indigo-600/5"})]})]}),e&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-2",children:[c.jsx(kS,{title:"Passing Circuits",subtitle:"Field distribution analysis",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-black text-blue-400",children:[T,"%"]}),c.jsx("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mt-1",children:"Left"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-black text-white",children:[B,"%"]}),c.jsx("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mt-1",children:"Center"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-black text-red-400",children:[_,"%"]}),c.jsx("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mt-1",children:"Right"})]})]}),c.jsx("div",{className:"relative w-full h-4 bg-slate-900/60 rounded-full overflow-hidden shadow-inner border border-white/5",children:c.jsxs("div",{className:"absolute inset-0 flex",children:[c.jsx("div",{style:{width:`${T}%`},className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-700 ease-out"}),c.jsx("div",{style:{width:`${B}%`},className:"h-full bg-gradient-to-r from-white/40 to-white/30 transition-all duration-700 ease-out"}),c.jsx("div",{style:{width:`${_}%`},className:"h-full bg-gradient-to-r from-red-400 to-red-500 transition-all duration-700 ease-out"})]})})]})}),c.jsx(kS,{title:"Style of Play",subtitle:"Tactical approach metrics",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-transparent p-3 rounded-lg border border-blue-500/20",children:[c.jsx("div",{className:"text-[10px] uppercase text-blue-400 tracking-wider mb-1.5",children:"Short Range"}),c.jsx("div",{className:"text-3xl font-black text-blue-400",children:I})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-transparent p-3 rounded-lg border border-purple-500/20",children:[c.jsx("div",{className:"text-[10px] uppercase text-purple-400 tracking-wider mb-1.5",children:"Long Range"}),c.jsx("div",{className:"text-3xl font-black text-purple-400",children:L})]})]}),c.jsxs("div",{className:"pt-3 border-t border-white/5 flex justify-between items-center",children:[c.jsx("span",{className:"text-[10px] uppercase text-muted-foreground tracking-wider",children:"Buildup Phases"}),c.jsx("span",{className:"text-xl font-black text-emerald-400",children:N})]})]})}),c.jsx(kS,{title:"Defensive Intensity",subtitle:"Pressing effectiveness",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-end gap-3",children:[c.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-br from-red-400 to-orange-400",children:R}),c.jsx("div",{className:"pb-2",children:c.jsx(cg,{className:"w-6 h-6 text-red-400"})})]}),c.jsx("div",{className:"text-[11px] uppercase text-muted-foreground tracking-wider",children:"High-Press Recoveries"}),c.jsx("div",{className:"text-[10px] text-muted-foreground/70 leading-relaxed pt-2 border-t border-white/5",children:"Counter-pressing effectiveness in the attacking third of the pitch."})]})})]})]})},Hge=({title:t,subtitle:e,icon:r})=>c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r&&c.jsx(r,{className:"w-4 h-4 text-emerald-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest",children:t}),e&&c.jsx("p",{className:"text-[8px] text-muted-foreground/50 uppercase tracking-wider",children:e})]})]}),vc=({title:t,value:e,subtext:r,color:n,bgGradient:i,trend:s,isTime:a})=>c.jsxs(Fe,{className:Z("relative p-3 bg-slate-900/50 border-white/10 backdrop-blur-sm","transition-all duration-300 hover:scale-[1.02] hover:border-white/20","hover:shadow-lg hover:shadow-black/20 group cursor-pointer overflow-hidden"),children:[c.jsx("div",{className:Z("absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300",i||"from-white/5 to-transparent")}),c.jsx("div",{className:Z("absolute top-0 right-0 w-16 h-16 opacity-10 blur-2xl rounded-full","translate-x-1/2 -translate-y-1/2 bg-current transition-all duration-300","group-hover:opacity-20 group-hover:scale-150",n)}),c.jsxs("div",{className:"relative z-10",children:[c.jsx(Dt,{className:"p-0 mb-2",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx(Ot,{className:"text-[9px] text-muted-foreground/70 uppercase font-black tracking-[0.12em] group-hover:text-muted-foreground transition-colors leading-tight",children:t}),s&&c.jsx("div",{className:Z("mt-0.5",s==="up"?"text-green-400":"text-red-400"),children:s==="up"?c.jsx(cg,{className:"w-3 h-3"}):c.jsx(f8,{className:"w-3 h-3"})}),a&&c.jsx(Qv,{className:"w-3 h-3 text-muted-foreground/50 mt-0.5"})]})}),c.jsxs(vt,{className:"p-0",children:[c.jsx("div",{className:Z("text-2xl font-black tracking-tight transition-all duration-300","group-hover:scale-105 origin-left leading-none",a?"font-mono":"",n),children:e}),r&&c.jsx("div",{className:"text-[8px] text-muted-foreground/50 mt-1.5 font-medium uppercase tracking-wide group-hover:text-muted-foreground/70 transition-colors leading-tight",children:r})]})]})]}),kS=({title:t,subtitle:e,children:r})=>c.jsxs(Fe,{className:"p-5 bg-gradient-to-br from-slate-900/70 to-slate-900/40 border-white/10 backdrop-blur-md hover:border-white/20 transition-all duration-300 hover:shadow-xl hover:shadow-black/20",children:[c.jsxs(Dt,{className:"p-0 mb-4",children:[c.jsx(Ot,{className:"text-[11px] text-white uppercase font-black tracking-widest",children:t}),e&&c.jsx("p",{className:"text-[9px] text-muted-foreground/60 uppercase tracking-wider mt-1",children:e})]}),c.jsx(vt,{className:"p-0",children:r})]}),eo=({id:t,label:e,children:r,isEditMode:n,isHidden:i=!1,onToggleVisibility:s,className:a})=>!n&&i?null:c.jsxs("div",{id:t,className:Z("relative transition-all duration-300",a,n&&"ring-2 ring-dashed ring-slate-600 rounded-lg p-1",n&&i&&"opacity-50 grayscale ring-red-900/50 bg-red-950/10"),children:[n&&c.jsx("div",{className:"absolute -top-3 left-3 z-[100] flex items-center gap-1",children:c.jsxs("div",{className:Z("px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider flex items-center gap-2 shadow-sm border",i?"bg-red-950 text-red-400 border-red-800":"bg-slate-800 text-slate-200 border-slate-600"),children:[c.jsx(une,{className:"h-3 w-3 opacity-50 cursor-move"}),c.jsx("span",{children:e||t}),c.jsx("div",{className:"h-3 w-px bg-white/10 mx-1"}),c.jsx("button",{onClick:o=>{o.stopPropagation(),s==null||s(t)},className:"hover:text-white transition-colors",children:i?c.jsx(ine,{className:"h-3 w-3"}):c.jsx(Wo,{className:"h-3 w-3"})})]})}),n&&i&&c.jsx("div",{className:"absolute inset-0 z-[10] bg-slate-950/20 backdrop-blur-[1px] rounded-lg pointer-events-none"}),r]}),Kge=!1,Vge={"Game Capture":["Game Capture","Capture de jeu","Game","Jeu","Game Capture Source"],"Camera Feed":["Camera Feed","Priphrique de capture vido","Camera","Camra","Video Capture Device"],"Display Capture":["Display Capture","Capture d'cran","Screen","cran","Display","Monitor"]},u9=Q.forwardRef(({onClose:t,events:e=[],showLiveToasts:r=!0,variant:n="default",isEditMode:i=!1,layoutConfig:s={},onToggleVisibility:a},o)=>{var Pe,be;const l=E.useRef(null),u=E.useRef(null),d=E.useRef(null),{socket:A}=Cf(),{user:f}=Ta(),{streamUrl:h,setStreamUrl:m,useStreamProxy:p,setUseStreamProxy:g,matchTime:x,currentPossession:v,events:y}=Yr(),w=le=>{const Ee=Math.floor(le/60),ve=le%60;return`${Ee.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`},b=(f==null?void 0:f.role)==="admin",[S,C]=E.useState(!1),[T,B]=E.useState(!1),[_,I]=E.useState(1),[L,N]=E.useState(!1),[R,M]=E.useState(null),[k,O]=E.useState(!0),j=E.useRef(null),D=E.useRef(null),F=E.useRef(0),[$,U]=E.useState(!1),[K,V]=E.useState(!1),[q,H]=E.useState(`ws://${window.location.hostname}:4455`),[z,ae]=E.useState(""),[X,ne]=E.useState(!1),[ee,G]=E.useState([]);E.useState(window.location.protocol==="https:"),E.useState(!1);const ge=E.useRef(new Map);E.useEffect(()=>{if(!A){console.warn(" Socket is null");return}const le=()=>{console.log(" Socket connected:",A.id)},Ee=pe=>{console.error(" Socket connection error:",pe),M(`Socket connection error: ${pe.message||"Unknown error"}`)},ve=pe=>{console.warn(" Socket disconnected:",pe),$&&(U(!1),V(!1),M("Socket disconnected. OBS connection lost."))};return A.on("connect",le),A.on("connect_error",Ee),A.on("disconnect",ve),console.log(" Socket status:",{connected:A.connected,id:A.id}),()=>{A.off("connect",le),A.off("connect_error",Ee),A.off("disconnect",ve)}},[A,$]),E.useEffect(()=>{const le=l.current;if(console.log(" Player useEffect triggered",{hasVideo:!!le,streamUrl:h,useStreamProxy:p,isLoading:T}),!le||!h){console.log(" Skipping player init: video or streamUrl missing");return}B(!0),M(null);let Ee=h;const ve=window.location.protocol==="https:",pe=h.startsWith("http:");if(h.includes("type=m3u")){M("Playlist Mode: Please use the 'Channels' browser to select a specific live channel."),B(!1);return}let re="";try{re=new URL(h).origin}catch{re="http://tgrpro25.xyz:8080"}if(Ee=`${window.location.origin}/api/proxy?url=${encodeURIComponent(h)}`,console.log(" Using CORS Proxy for stream (Auto-detected if HTTPS):",Ee),ve&&pe&&!p&&(console.log(" Auto-switching to proxy due to Mixed Content (HTTPS -> HTTP)"),g(!0)),er.isSupported()){console.log(" Initializing HLS.js with new IPTV config..."),j.current&&(console.log(" Destroying old HLS instance"),j.current.destroy());const Ke=new er({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90,maxBufferLength:30,maxMaxBufferLength:60,liveSyncDurationCount:3,liveMaxLatencyDurationCount:5,debug:!1,xhrSetup:(xe,Oe)=>{if(p||ve&&Oe.startsWith("http:")){let xt=Oe;if(Oe&&!Oe.includes("/api/proxy")){xt=`${window.location.origin}/api/proxy?url=${encodeURIComponent(Oe)}`;const br=xe.open;xe.open=function(){const Fn=Array.prototype.slice.call(arguments);return Fn[1]=xt,br.apply(this,Fn)}}}try{xe.setRequestHeader("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"),xe.setRequestHeader("Accept","*/*"),re&&xe.setRequestHeader("Referer",`${re}/`)}catch{}}});Ke.loadSource(Ee),Ke.attachMedia(le),j.current=Ke,Ke.on(er.Events.MANIFEST_PARSED,()=>{console.log(" HLS Manifest Parsed Success"),le.play().catch(xe=>{console.log("Autoplay blocked/failed:",xe.message)}),B(!1),C(!0)}),Ke.on(er.Events.ERROR,(xe,Oe)=>{if(console.error(" HLS Error Event:",Oe.type,Oe.details,Oe.fatal),Oe.fatal)switch(Oe.type){case er.ErrorTypes.NETWORK_ERROR:console.error("Fatal network error - recovering..."),Ke.startLoad();break;case er.ErrorTypes.MEDIA_ERROR:console.error("Fatal media error - recovering..."),Ke.recoverMediaError();break;default:console.error("Unrecoverable error - destroying"),Ke.destroy(),j.current=null,M(`Video Stream Error: ${Oe.details}`),B(!1),C(!1);break}})}else le.canPlayType("application/vnd.apple.mpegurl")?(console.log(" Initializing Native Safari HLS..."),le.src=Ee,le.addEventListener("loadedmetadata",()=>{le.play(),B(!1),C(!0)})):(console.error(" HLS is NOT supported in this browser"),M("Your browser does not support HLS playback."),B(!1));return()=>{j.current&&(console.log(" Cleaning up HLS on effect exit"),j.current.destroy(),j.current=null)}},[h,p]);const ye=async(le=!1)=>{if($){try{le||console.log(" Refreshing OBS scene list...");const Ee=await Me("GetSceneList");if(Ee&&Ee.scenes){const ve=Ee.scenes.map(pe=>pe.sceneName);return G(ve),le||(console.log(" Available OBS Scenes:",ve),Ge.success("Scene list updated",{duration:2e3})),ve}}catch(Ee){console.warn("Failed to fetch OBS scenes:",Ee),le||Ge.error("Failed to refresh scenes")}return[]}};E.useEffect(()=>{if(!A){console.warn(" Socket not available for OBS listeners");return}const le=async({address:Ke})=>{console.log(" Connected to OBS via Proxy:",Ke),window.__obsConnectionTimeout&&(clearTimeout(window.__obsConnectionTimeout),delete window.__obsConnectionTimeout),U(!0),ne(!1),M(null),await ye(!0);try{localStorage.setItem("obsAddress",q),localStorage.setItem("obsPassword",z)}catch(xe){console.warn("Failed to save OBS settings to localStorage:",xe)}Ge.success("OBS Connected Successfully")},Ee=()=>{console.log(" OBS Proxy Disconnected"),U(!1),V(!1),d.current=null,ge.current.forEach(({timeout:Ke,reject:xe})=>{clearTimeout(Ke),xe(new Error("OBS disconnected"))}),ge.current.clear(),Ge.error("OBS Disconnected")},ve=({message:Ke,code:xe,requestId:Oe})=>{if(console.error(" OBS Proxy Error:",{message:Ke,code:xe,requestId:Oe}),window.__obsConnectionTimeout&&(clearTimeout(window.__obsConnectionTimeout),delete window.__obsConnectionTimeout),Oe&&ge.current.has(Oe)){const st=ge.current.get(Oe);st&&(clearTimeout(st.timeout),st.reject(new Error(Ke||"OBS request failed")),ge.current.delete(Oe))}else{let st=Ke||"An unknown error occurred";xe==="ECONNREFUSED"?st="Cannot connect to OBS. Check if OBS is running and WebSocket is enabled.":xe==="ETIMEDOUT"&&(st="Connection timeout. Check OBS address and firewall."),M(`OBS Error: ${st}`),ne(!1),Ge.error(st)}},pe=({event:Ke,data:xe})=>{if(console.log(" OBS Event:",Ke,xe),Ke==="RecordStateChanged"){const Oe=xe.outputActive;V(Oe),Ge.success(Oe?"Recording started":"Recording stopped")}else(Ke==="SceneListChanged"||Ke==="SceneNameChanged")&&ye(!0)},re=({response:Ke,requestId:xe})=>{if(ge.current.has(xe)){const Oe=ge.current.get(xe);Oe&&(clearTimeout(Oe.timeout),Oe.resolve(Ke),ge.current.delete(xe))}};return A.on("obs-proxy-connected",le),A.on("obs-proxy-disconnected",Ee),A.on("obs-proxy-error",ve),A.on("obs-proxy-event",pe),A.on("obs-proxy-response",re),()=>{A.off("obs-proxy-connected",le),A.off("obs-proxy-disconnected",Ee),A.off("obs-proxy-error",ve),A.off("obs-proxy-event",pe),A.off("obs-proxy-response",re)}},[A,q,z,$]);const Me=async(le,Ee)=>{if(!$)throw new Error("OBS not connected");if(!A||!A.connected)throw new Error("Socket connection lost");const ve=`${Date.now()}-${Math.random().toString(36).substring(7)}`;return new Promise((pe,re)=>{const Ke=setTimeout(()=>{ge.current.has(ve)&&(ge.current.delete(ve),re(new Error(`OBS request timeout: ${le}`)))},15e3);ge.current.set(ve,{resolve:pe,reject:re,timeout:Ke}),A.emit("obs-proxy-call",{requestType:le,requestData:Ee,requestId:ve})})},ce=async()=>{if(!$){Ge.error("OBS not connected");return}try{K?(await Me("StopRecord"),V(!1)):(await Me("StartRecord"),V(!0))}catch(le){const Ee=`Recording error: ${le.message||"Unknown error"}`;M(Ee),Ge.error(Ee)}},Be=async le=>{if(!$){Ge.error("OBS not connected");return}const Ee=Date.now();if(D.current===le&&Ee-F.current<2e3){console.log(` Guard: Skipping redundant switch to "${le}"`);return}D.current=le,F.current=Ee;try{const ve=Vge[le]||[le];let pe="",re=ee;re.length===0&&(re=await ye(!0)),console.log(` Attempting switch for: ${le} (Variations: ${ve.join(", ")})`);const Ke=xe=>{for(const Oe of ve){const st=xe.find(xt=>xt.toLowerCase()===Oe.toLowerCase());if(st)return st}for(const Oe of ve){const st=xe.find(xt=>xt.toLowerCase().includes(Oe.toLowerCase()));if(st)return st}return""};if(pe=Ke(re),pe||(console.log(" No match in current list. Refreshing scenes and retrying..."),re=await ye(!0),pe=Ke(re)),!pe){console.log(" Searching within scene items..."),Ge.loading("Scanning OBS for matching source...",{duration:2e3});for(const xe of re){try{const Oe=await Me("GetSceneItemList",{sceneName:xe});if(Oe&&Oe.sceneItems)for(const st of Oe.sceneItems){const xt=st.sourceName||st.itemName;if(ve.some(br=>xt.toLowerCase()===br.toLowerCase()||xt.toLowerCase().includes(br.toLowerCase()))){pe=xe,console.log(` Found source match "${xt}" in scene "${xe}"`);break}}}catch{}if(pe)break}}if(pe&&!re.includes(pe)&&(pe=re.find(xe=>xe.toLowerCase()===pe.toLowerCase())||""),!pe)throw new Error(`Could not find a scene mapped to "${le}". Available: ${re.join(", ")}`);console.log(` Finalizing OBS switch to scene: ${pe}`),await Me("SetCurrentProgramScene",{sceneName:pe}),Ge.success(`Switched to scene: ${pe}`)}catch(ve){console.error(`Failed to switch to ${le}:`,ve);let pe=ve.message||"Unknown error";pe.includes("is not a scene")&&(pe=`Target "${le}" is not a valid OBS scene.`),Ge.error(`Switch error: ${pe}`)}};Q.useImperativeHandle(o,()=>({toggleRecording:ce,handleSourceSwitch:Be})),E.useEffect(()=>{try{const le=localStorage.getItem("obsAddress"),Ee=localStorage.getItem("obsPassword");le&&H(le),Ee&&ae(Ee)}catch{}},[]);const _e=()=>{const le=l.current;le&&(S?le.pause():le.play())},He=le=>{const Ee=l.current;if(!Ee)return;const ve=le[0];Ee.volume=ve,I(ve),N(ve===0)},Se=()=>{const le=u.current;le&&(document.fullscreenElement?document.exitFullscreen():le.requestFullscreen())},it=le=>{const Ee=l.current;Ee&&(Ee.currentTime=Math.max(0,Ee.currentTime+le))},Ce=y[0],[Qe,me]=E.useState(!1);return E.useEffect(()=>{if(Ce){me(!0);const le=setTimeout(()=>me(!1),3e3);return()=>clearTimeout(le)}},[Ce==null?void 0:Ce.id]),n==="streamlined"?c.jsxs("div",{ref:u,className:"relative w-full h-full bg-black group overflow-hidden",children:[c.jsx("video",{ref:l,className:"w-full h-full object-contain",autoPlay:!0,muted:L,playsInline:!0,crossOrigin:"anonymous"}),k&&c.jsx(I8,{position:"top-center",expand:!0,richColors:!0,closeButton:!0}),k&&Qe&&Ce&&c.jsx("div",{className:"absolute top-6 left-6 z-50 animate-in fade-in slide-in-from-left-4 duration-500",children:c.jsxs("div",{className:"bg-black/60 backdrop-blur-xl border border-primary/40 rounded-xl p-4 shadow-2xl flex items-center gap-4",children:[c.jsx("div",{className:"bg-primary/20 p-2.5 rounded-lg border border-primary/30",children:c.jsx(un,{className:"w-6 h-6 text-primary animate-pulse"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-primary font-bold uppercase tracking-widest leading-none mb-1",children:"Last Action"}),c.jsx("div",{className:"text-xl font-black text-white uppercase tracking-tight leading-none italic",children:Ce.eventName.replace(/_/g," ")}),c.jsx("div",{className:"text-[10px] text-slate-400 mt-1 font-mono",children:(Pe=Ce.player)!=null&&Pe.name?`#${Ce.player.id} ${Ce.player.name}`:Ce.team.replace("_"," ")})]})]})}),c.jsx(eo,{id:"live-stats",label:"Live Stats Overlay",isEditMode:i,isHidden:(be=s["live-stats"])==null?void 0:be.hidden,onToggleVisibility:a,className:"absolute top-4 left-4 z-[45]",children:c.jsx(bP,{events:e,isOverlay:!0})}),c.jsxs("div",{className:"absolute top-6 right-6 z-50 flex flex-col items-end gap-3 pointer-events-none",children:[c.jsxs("div",{className:"bg-black/60 backdrop-blur-xl border border-white/10 rounded-xl px-4 py-2 flex items-center gap-3",children:[c.jsx(Qp,{className:"w-4 h-4 text-primary"}),c.jsx("span",{className:"text-2xl font-mono font-bold text-white tracking-widest leading-none",children:w(x||0)})]}),v&&v.passCount>0&&c.jsxs("div",{className:"bg-primary/95 backdrop-blur-md rounded-lg px-3 py-1.5 flex items-center gap-2 border border-primary animate-in fade-in slide-in-from-right-4",children:[c.jsx(PA,{className:"w-3.5 h-3.5 text-white"}),c.jsxs("span",{className:"text-[11px] font-bold text-white uppercase tracking-wider",children:[v.passCount," PASSES"]}),c.jsx("div",{className:"w-px h-3 bg-white/30 mx-1"}),c.jsxs("span",{className:"text-[10px] text-white/80 font-medium",children:[v.buildUpSpeed||"MEDIUM"," SPEED"]})]})]}),c.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-black/20 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col justify-between p-4 z-40",children:[c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{className:"flex items-center gap-2 bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/10",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse"}),c.jsx("span",{className:"text-[10px] font-bold tracking-widest text-white uppercase",children:"Live Stream"})]})}),c.jsxs("div",{className:"flex items-center gap-4 bg-black/40 backdrop-blur-md p-3 rounded-2xl border border-white/10 shadow-2xl",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"h-10 w-10 text-white hover:bg-white/20 hover:scale-110 transition-transform",onClick:_e,children:S?c.jsx(Kv,{className:"w-6 h-6 fill-current"}):c.jsx(ho,{className:"w-6 h-6 fill-current"})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white/70 hover:text-white",onClick:()=>it(-5),children:c.jsx(po,{className:"w-4 h-4"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white/70 hover:text-white",onClick:()=>it(5),children:c.jsx(kne,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-1 px-2",children:[c.jsx(WT,{className:"w-5 h-5 text-slate-300"}),c.jsx(SB,{value:[_],max:1,step:.01,onValueChange:He,className:"w-full cursor-pointer"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[t&&c.jsx(te,{variant:"ghost",size:"icon",onClick:t,className:"h-10 w-10 text-white hover:bg-red-500/20 hover:text-red-400 transition-colors",children:c.jsx(At,{className:"w-6 h-6"})}),c.jsx(te,{variant:"ghost",size:"icon",className:Z("h-10 w-10 transition-all",k?"text-primary":"text-white/40"),onClick:()=>O(!k),title:"Toggle Live Feedback",children:c.jsx(RA,{className:"w-5 h-5"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-10 w-10 text-white hover:bg-white/20 transition-all",onClick:Se,children:c.jsx(zT,{className:"w-6 h-6"})})]})]})]}),T&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60",children:c.jsx(bu,{className:"h-10 w-10 animate-spin text-primary"})}),R&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 p-4 text-center",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx(Qu,{className:"w-10 h-10 text-destructive mx-auto"}),c.jsx("p",{className:"text-xs text-slate-300",children:R}),c.jsx(te,{size:"sm",variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})})]}):c.jsx(Fe,{className:"w-full max-w-4xl mx-auto bg-slate-900 text-white border-slate-800",children:c.jsxs(vt,{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[c.jsx(RA,{className:"w-6 h-6 text-red-500"}),"Live Stream Player"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[h&&S&&c.jsx(We,{variant:"destructive",className:"animate-pulse",children:"LIVE"}),$&&K&&c.jsx(We,{variant:"destructive",className:"bg-red-600 animate-pulse",children:"REC"}),t&&c.jsx(te,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 text-slate-400 hover:text-white hover:bg-slate-800",children:c.jsx(At,{className:"w-4 h-4"})})]})]}),b&&c.jsxs("div",{className:"space-y-4 pt-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(bo,{htmlFor:"stream-url",className:"text-slate-400 uppercase text-xs font-bold tracking-wider flex items-center gap-2",children:[c.jsx(A8,{className:"w-3 h-3 text-blue-400"}),"Stream Configuration"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(jr,{id:"stream-url",value:h,onChange:le=>m(le.target.value),placeholder:"Paste your .m3u8 or .ts link here...",className:"bg-slate-950 border-slate-800 h-9 text-xs flex-1 shadow-inner focus:border-blue-500/50 transition-colors"}),c.jsx(te,{size:"sm",variant:"outline",className:"h-9 px-3 text-[10px] border-slate-700 hover:bg-slate-800",onClick:()=>m("https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"),children:"Test Link"})]})]}),c.jsxs("div",{className:"flex items-center justify-between bg-blue-900/10 border border-blue-500/20 rounded-md px-3 py-2",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(We,{variant:"outline",className:"text-[9px] h-4 bg-blue-500/10 text-blue-400 border-blue-500/30",children:"CORS Bypass"}),c.jsx(bo,{className:"text-[11px] font-bold text-slate-300",children:"Enable Stream Proxy"})]}),c.jsx("p",{className:"text-[9px] text-slate-500",children:'Enable if the video fails to load or shows a "CORS" error.'})]}),c.jsx(qI,{checked:p,onCheckedChange:g,className:"data-[state=checked]:bg-blue-600"})]}),Kge]}),c.jsxs("div",{ref:u,className:"relative aspect-video bg-black rounded-lg overflow-hidden border border-slate-800 shadow-2xl group",children:[c.jsx("video",{ref:l,className:"w-full h-full object-contain",playsInline:!0}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:_e,className:"text-white hover:bg-white/20",disabled:T,children:S?c.jsx(Kv,{className:"w-6 h-6"}):c.jsx(ho,{className:"w-6 h-6"})}),c.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c.jsx(WT,{className:"w-4 h-4 text-slate-300"}),c.jsx(SB,{value:[_],max:1,step:.1,onValueChange:He,className:"w-24"})]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:Se,className:"text-white hover:bg-white/20",children:c.jsx(zT,{className:"w-6 h-6"})})]})})]})]})})});u9.displayName="LiveStreamPlayer";function Gge({streamUrl:t,channelName:e,isOpen:r,onClose:n,isEmbedded:i=!1}){const{setStreamUrl:s}=Yr(),[a,o]=E.useState(!1),[l,u]=E.useState(.8),[d,A]=E.useState(!1),[f,h]=E.useState(!1),[m,p]=E.useState(!0),[g,x]=E.useState(!1),[v,y]=E.useState(!0),w=E.useRef(null),b=E.useRef(null),S=E.useRef(null),C=E.useRef(null),T=()=>{s(t),Ge.success(`Transferred "${e}" to Live Player`),i||n()},B=E.useCallback(async()=>{p(!0),x(!1),o(!1);try{const j=`${hr}/api/proxy?url=${encodeURIComponent(t)}`,D=w.current;if(!D)return;try{D.pause(),D.currentTime=0,D.src="",D.load()}catch{}if(await new Promise(F=>setTimeout(F,100)),er.isSupported()){S.current&&(S.current.destroy(),S.current=null);const F=new er({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90,maxBufferLength:30,maxMaxBufferLength:60,liveSyncDurationCount:3,liveMaxLatencyDurationCount:5,debug:!1,fragLoadingTimeOut:2e4,manifestLoadingTimeOut:1e4,levelLoadingTimeOut:1e4,xhrSetup:($,U)=>{let K=U;U&&!U.includes("/api/proxy")&&(K=`${hr}/api/proxy?url=${encodeURIComponent(U)}`);const V=$.open;$.open=function(q,H){return V.call(this,q,K)};try{$.setRequestHeader("Accept","*/*")}catch(q){console.warn("Failed to set Accept header:",q)}}});S.current=F,F.on(er.Events.MEDIA_ATTACHED,()=>{console.log("[HLS] Media attached to video element")}),F.on(er.Events.MANIFEST_PARSED,async($,U)=>{console.log("[HLS] Manifest parsed, levels:",U.levels.length),p(!1),x(!1);try{await D.play(),console.log("[HLS] Playback started")}catch(K){console.error("[HLS] Autoplay failed:",K)}}),F.on(er.Events.LEVEL_LOADED,($,U)=>{console.log("[HLS] Level loaded:",U.level,"fragments:",U.details.fragments.length)}),F.on(er.Events.FRAG_LOADING,($,U)=>{console.log("[HLS] Loading fragment:",U.frag.sn)}),F.on(er.Events.FRAG_LOADED,($,U)=>{console.log("[HLS] Fragment loaded:",U.frag.sn)}),F.on(er.Events.ERROR,($,U)=>{if(console.error("[HLS] Error:",U.type,U.details,U.fatal),U.fatal)switch(p(!1),U.type){case er.ErrorTypes.NETWORK_ERROR:console.error("[HLS] Fatal network error, trying to recover"),setTimeout(()=>{S.current&&S.current.startLoad()},1e3);break;case er.ErrorTypes.MEDIA_ERROR:console.error("[HLS] Fatal media error, trying to recover"),S.current&&S.current.recoverMediaError();break;default:x(!0),o(!1),w.current&&w.current.pause(),S.current&&(S.current.destroy(),S.current=null);break}}),F.attachMedia(D),await new Promise($=>{F.once(er.Events.MEDIA_ATTACHED,()=>$()),setTimeout(()=>$(),5e3)}),console.log("[HLS] Loading source:",j),F.loadSource(j)}else if(D.canPlayType("application/vnd.apple.mpegurl"))console.log("[Native] Using native HLS support"),D.src=j,D.addEventListener("loadedmetadata",()=>{console.log("[Native] Metadata loaded"),p(!1)},{once:!0}),D.addEventListener("canplay",async()=>{console.log("[Native] Can play");try{await D.play()}catch(F){console.error("[Native] Play failed:",F)}},{once:!0});else throw new Error("HLS is not supported in this browser")}catch(j){console.error("[Player] Load stream error:",j),p(!1),x(!0),o(!1),w.current&&w.current.pause(),S.current&&(S.current.destroy(),S.current=null)}},[t]),_=E.useCallback(()=>{C.current&&clearTimeout(C.current),y(!0),C.current=setTimeout(()=>{a&&y(!1)},3e3)},[a]),I=E.useCallback(()=>{_()},[_]),L=E.useCallback(async()=>{const j=w.current;if(j){try{if(j.paused){if(m||g)return;await j.play()}else j.pause()}catch{}_()}},[g,m,_]),N=E.useCallback(j=>{const D=w.current;D&&(u(j),D.volume=j,A(j===0),_())},[_]),R=E.useCallback(()=>{const j=w.current;j&&(d?(j.volume=.8,u(.8),A(!1)):(j.volume=0,A(!0)),_())},[d,_]),M=E.useCallback(()=>{const j=b.current;if(!j)return;if(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement){const F=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen;F&&F.call(document)}else{const F=j.requestFullscreen||j.webkitRequestFullscreen||j.msRequestFullscreen;F&&F.call(j)}_()},[_]);E.useEffect(()=>{const j=()=>{const D=document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;h(!!D),D||y(!0)};return document.addEventListener("fullscreenchange",j),document.addEventListener("webkitfullscreenchange",j),document.addEventListener("MSFullscreenChange",j),()=>{document.removeEventListener("fullscreenchange",j),document.removeEventListener("webkitfullscreenchange",j),document.removeEventListener("MSFullscreenChange",j)}},[]);const k=async()=>{const j=w.current;if(j){if(g){x(!1),p(!0),o(!1),S.current&&(S.current.destroy(),S.current=null);try{j.pause(),j.currentTime=0,j.src="",j.load()}catch{}setTimeout(()=>B(),200)}else try{j.currentTime=0,j.paused||await j.play()}catch{}_()}};if(E.useEffect(()=>{const j=D=>{D.key==="Escape"&&r&&!i?n():D.key===" "&&r?(D.preventDefault(),L()):D.key==="f"&&r&&(D.preventDefault(),M())};return r&&(document.addEventListener("keydown",j),i||(document.body.style.overflow="hidden")),()=>{document.removeEventListener("keydown",j),i||(document.body.style.overflow="unset")}},[M,L,i,r,n]),E.useEffect(()=>{if(!(!r||!w.current))return B(),()=>{S.current&&(S.current.destroy(),S.current=null)}},[r,B]),E.useEffect(()=>{const j=w.current;if(!j)return;const D=()=>{console.log("[Video] Play event"),o(!0)},F=()=>{console.log("[Video] Pause event"),o(!1)},$=V=>{console.error("[Video] Error event:",V),p(!1),x(!0),o(!1),w.current&&w.current.pause(),S.current&&(S.current.destroy(),S.current=null)},U=()=>{console.log("[Video] Waiting for data")},K=()=>{console.log("[Video] Can play")};return j.addEventListener("play",D),j.addEventListener("pause",F),j.addEventListener("error",$),j.addEventListener("waiting",U),j.addEventListener("canplay",K),()=>{j.removeEventListener("play",D),j.removeEventListener("pause",F),j.removeEventListener("error",$),j.removeEventListener("waiting",U),j.removeEventListener("canplay",K)}},[r]),!r)return null;const O=c.jsx("div",{ref:b,className:`flex h-full w-full items-center justify-center overflow-hidden bg-black ${f?"":"rounded-lg"}`,children:c.jsxs("div",{className:`relative flex w-full items-center justify-center bg-black ${!f&&"aspect-video"}`,onMouseMove:I,onMouseLeave:()=>{a&&y(!1)},children:[c.jsx("video",{ref:w,className:"h-full w-full object-contain bg-black",autoPlay:!0,muted:d,playsInline:!0,crossOrigin:"anonymous"}),m&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-6",children:[c.jsx("div",{className:"relative",children:c.jsx(bu,{className:"h-16 w-16 animate-spin text-blue-500"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-lg font-semibold text-white",children:"Loading Stream"}),c.jsx("p",{className:"text-sm text-slate-300 mt-1",children:"Please wait..."})]})]})}),g&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-6 text-center max-w-md mx-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"rounded-full bg-red-500/20 p-6",children:c.jsx(At,{className:"h-12 w-12 text-red-400"})}),c.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-500 animate-pulse"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Stream Failed to Load"}),c.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"This channel is currently unavailable or there is a temporary issue. Check the console for details."})]}),c.jsxs("button",{onClick:k,className:"flex items-center gap-2 rounded-xl bg-blue-600 px-6 py-3 text-sm font-medium text-white hover:bg-blue-500 transition-colors",children:[c.jsx(po,{className:"h-4 w-4"}),"Try Again"]})]})}),c.jsxs("div",{className:`absolute inset-0 flex flex-col justify-between bg-gradient-to-t from-black/80 via-transparent to-black/40 transition-opacity duration-300 ${v?"opacity-100":"opacity-0"}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse"}),c.jsx("span",{className:"text-xs font-medium text-white bg-red-500/20 px-2 py-1 rounded-full border border-red-500/30",children:"LIVE"})]}),c.jsx("h2",{className:"text-sm font-semibold text-white truncate max-w-xs",children:e})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:T,className:"flex items-center gap-2 rounded-lg bg-blue-600/80 px-3 py-2 text-xs font-bold text-white hover:bg-blue-500 transition-colors backdrop-blur-sm shadow-lg border border-blue-400/30",title:"Send to Main Player",children:[c.jsx(RA,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"SEND TO LIVE PLAYER"})]}),c.jsx("button",{onClick:R,className:"rounded-lg bg-black/60 p-2 text-white hover:bg-black/80 transition-colors backdrop-blur-sm",title:d?"Unmute":"Mute",children:d?c.jsx(Wne,{className:"h-4 w-4"}):c.jsx(WT,{className:"h-4 w-4"})}),!i&&c.jsx("button",{onClick:n,className:"rounded-lg bg-black/60 p-2 text-white hover:bg-black/80 transition-colors backdrop-blur-sm",title:"Close (ESC)",children:c.jsx(At,{className:"h-4 w-4"})})]})]}),c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:L,className:"rounded-lg bg-black/60 p-2 text-white hover:bg-black/80 transition-colors backdrop-blur-sm",children:a?c.jsx(Kv,{className:"h-4 w-4"}):c.jsx(ho,{className:"h-4 w-4"})}),c.jsx("button",{onClick:k,className:"rounded-lg bg-black/60 p-2 text-white hover:bg-black/80 transition-colors backdrop-blur-sm",title:"Restart",children:c.jsx(po,{className:"h-4 w-4"})}),c.jsx("div",{className:"flex items-center gap-2 ml-2",children:c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d?0:l,onChange:j=>N(parseFloat(j.target.value)),className:"w-20 h-1 bg-white/20 rounded-lg appearance-none cursor-pointer accent-blue-500",title:`Volume: ${Math.round((d?0:l)*100)}%`})})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:M,className:"rounded-lg bg-black/60 p-2 text-white hover:bg-black/80 transition-colors backdrop-blur-sm",title:"Fullscreen (F)",children:f?c.jsx(Sne,{className:"h-4 w-4"}):c.jsx(zT,{className:"h-4 w-4"})})})]})})]})]})});return i?O:No.createPortal(c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/95 backdrop-blur-md",children:c.jsx("div",{className:"w-full h-full max-w-5xl max-h-[80vh] px-4 flex items-center",children:O})}),document.body)}const zge=({selectedStream:t,isPlayerOpen:e,onClosePlayer:r})=>c.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:t&&e?c.jsx("div",{className:"h-full w-full bg-black",children:c.jsx(Gge,{streamUrl:t.streamUrl,channelName:t.name,isOpen:!0,onClose:r,isEmbedded:!0})}):c.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-900/50",children:c.jsxs("div",{className:"text-center text-slate-400",children:[c.jsx(Vv,{className:"h-16 w-16 mx-auto mb-4 text-slate-500"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Video Player"}),c.jsx("p",{className:"text-sm",children:"Select a channel to play"})]})})}),Wge=({categories:t,selectedCategoryId:e,onCategorySelect:r,isSidebarOpen:n,isMenuCollapsed:i,onToggleMenuCollapsed:s,totals:a})=>c.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 bg-slate-900/95 backdrop-blur-md border-r border-white/10 transition-all duration-300 ease-in-out shadow-2xl shadow-black/40 lg:shadow-none ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"} ${i?"w-16":"w-64"}`,children:c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/10",children:[!i&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vv,{className:"h-5 w-5 text-blue-500"}),c.jsx("span",{className:"font-semibold text-white",children:"IPTV"})]}),c.jsx("button",{onClick:s,className:"rounded-md p-1.5 text-slate-400 hover:text-white transition-colors",title:i?"Expand menu":"Collapse menu",children:i?c.jsx(Io,{className:"h-4 w-4"}):c.jsx(oI,{className:"h-4 w-4"})})]}),!i&&c.jsx("div",{className:"p-3 border-b border-white/10",children:c.jsxs("div",{className:"flex gap-4 text-xs text-slate-400",children:[c.jsxs("span",{children:[a.totalCategories," categories"]}),c.jsxs("span",{children:[a.totalStreams," channels"]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:t.map(o=>c.jsx("button",{onClick:()=>r(o.id),className:`w-full rounded-md p-2 mb-1 text-left transition-all ${e===o.id?"bg-blue-600 text-white":"text-slate-300 hover:bg-white/10 hover:text-white"}`,title:o.name,children:i?c.jsx("span",{className:"text-xs font-bold",children:o.name.charAt(0).toUpperCase()}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium truncate",children:o.name}),c.jsx("span",{className:"text-xs text-slate-400",children:o.streams.length})]})},o.id))})]})}),Yge=({stream:t,onPlay:e,isFavorite:r,onToggleFavorite:n,isActive:i})=>{const[s,a]=E.useState(!1),o=E.useCallback(()=>e(t),[e,t]),l=E.useCallback(u=>{u.stopPropagation(),window.open(t.streamUrl,"_blank","noopener,noreferrer")},[t.streamUrl]);return c.jsxs("div",{className:`group flex items-center gap-2 rounded-md p-2 transition-all hover:border-blue-500/50 hover:bg-white/10 ${i?"border-blue-500 bg-blue-500/20 shadow-lg shadow-blue-500/20":"border-white/10 bg-white/5"}`,children:[c.jsx("div",{className:"relative h-8 w-8 shrink-0 overflow-hidden rounded-md bg-gradient-to-tr from-slate-800 to-slate-700",children:t.streamIcon&&!s?c.jsx("img",{src:t.streamIcon,alt:t.name,className:"h-full w-full object-contain object-center p-0.5",onError:()=>a(!0)}):c.jsx("div",{className:"flex h-full w-full items-center justify-center",children:c.jsx("span",{className:`text-xs font-semibold uppercase ${i?"text-white/80":"text-white/60"}`,children:t.name.charAt(0)})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:`truncate text-xs font-semibold transition-colors ${i?"text-white":"text-white group-hover:text-blue-400"}`,children:t.name}),c.jsx("p",{className:`text-xs ${i?"text-white/80":"text-slate-400"}`,children:t.streamType==="live"?"Live":t.streamType})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),n()},className:`group/btn inline-flex items-center gap-1 rounded-md px-1.5 py-1 text-xs font-medium transition ${r?"text-red-400 hover:text-red-300":"text-slate-500 hover:text-slate-300"}`,title:r?"Remove from favorites":"Add to favorites",children:r?c.jsx(Ane,{className:"h-3 w-3"}):c.jsx(dne,{className:"h-3 w-3"})}),c.jsx("button",{type:"button",onClick:o,className:`group/btn inline-flex items-center gap-1 rounded-md bg-blue-600 px-2 py-1 text-xs font-medium text-white transition hover:bg-blue-500 ${i&&"ring-2 ring-blue-500/60 ring-offset-1 ring-offset-slate-900"}`,title:"Play channel",children:c.jsx(ho,{className:"h-3 w-3 transition-transform group-hover/btn:scale-110"})}),c.jsx("button",{type:"button",onClick:l,className:"group/btn inline-flex items-center gap-1 rounded-md border border-white/20 bg-white/5 px-1.5 py-1 text-xs font-medium text-white transition hover:bg-white/10",title:"Open in new tab",children:c.jsx(uI,{className:"h-3 w-3 transition-transform group-hover/btn:scale-110"})})]})]})},SD="react-iptv-favorites";function qge(){const[t,e]=E.useState([]);E.useEffect(()=>{try{const a=localStorage.getItem(SD);a&&e(JSON.parse(a))}catch{}},[]);const r=E.useCallback(a=>{e(a);try{localStorage.setItem(SD,JSON.stringify(a))}catch{}},[]),n=E.useCallback(a=>t.includes(a),[t]),i=E.useCallback(a=>{const o=t.includes(a)?t.filter(l=>l!==a):[...t,a];r(o)},[t,r]),s=E.useCallback(a=>a.filter(o=>t.includes(o.id)),[t]);return{favorites:t,isChannelFavorite:n,toggleChannelFavorite:i,getFavoriteChannels:s}}const Xge=({selectedCategory:t,searchTerm:e,onSearchChange:r,showChannelFavorites:n,onToggleChannelFavorites:i,isChannelPanelCollapsed:s,onToggleChannelPanelCollapsed:a,onPlayStream:o,activeStreamId:l})=>{const{isChannelFavorite:u,toggleChannelFavorite:d,getFavoriteChannels:A}=qge(),f=E.useMemo(()=>{if(!t)return[];let h=t.streams;const m=e.trim().toLowerCase();m&&(h=h.filter(b=>b.name.toLowerCase().includes(m)));const p=h.filter(b=>b.name.toLowerCase().startsWith("tr")),g=h.filter(b=>!b.name.toLowerCase().startsWith("tr")),x=A(p),v=A(g),y=p.filter(b=>!x.some(S=>S.id===b.id)),w=g.filter(b=>!v.some(S=>S.id===b.id));return n?[...x,...v]:[...x,...y,...v,...w]},[t,e,n,A]);return c.jsx("aside",{className:`fixed lg:static inset-y-0 right-0 z-50 bg-slate-900/95 backdrop-blur-md border-l border-white/10 transition-transform duration-300 ease-in-out shadow-2xl shadow-black/40 lg:shadow-none ${s?"translate-x-full lg:translate-x-0":"translate-x-0"} ${s?"w-12":"w-[85vw] max-w-sm sm:w-80 lg:w-72"}`,children:c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 border-b border-white/10",children:[!s&&c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h2",{className:"text-base sm:text-lg font-semibold text-white",children:(t==null?void 0:t.name)||"Channels"}),c.jsx("button",{onClick:i,className:`rounded-md p-1 sm:p-1.5 transition-colors ${n?"bg-yellow-500/20 text-yellow-400":"bg-white/5 text-slate-400 hover:text-white"}`,title:n?"Show all channels":"Show favorites only",children:n?c.jsx(Hne,{className:"h-3 w-3 sm:h-4 sm:w-4"}):c.jsx(Qne,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),c.jsxs("div",{className:"relative",children:[c.jsx($p,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-slate-500"}),c.jsx("input",{value:e,onChange:h=>r(h.target.value),placeholder:"Search channels...",className:"w-full rounded-md border border-white/10 bg-slate-950/60 py-1.5 sm:py-2 pl-7 pr-2 text-xs text-white shadow-inner placeholder:text-slate-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500/30"})]}),c.jsxs("p",{className:"text-xs text-slate-300 mt-1",children:[f.length," channels found"]})]}),c.jsx("button",{onClick:a,className:"rounded-md p-1 sm:p-1.5 text-slate-400 hover:text-white transition-colors",title:s?"Expand panel":"Collapse panel",children:s?c.jsx(Io,{className:"h-3 w-3 sm:h-4 sm:w-4"}):c.jsx(oI,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),!s&&c.jsx("div",{className:"flex-1 min-h-0 p-2 sm:p-3",children:c.jsx("div",{className:"h-full overflow-y-auto space-y-1 pr-2 scrollbar-thin",children:f.length===0?c.jsx("div",{className:"rounded-lg border border-dashed border-white/10 bg-white/5 p-4 text-center text-slate-400",children:c.jsx("p",{className:"text-xs",children:"No channels found for selected category."})}):f.map(h=>c.jsx(Yge,{stream:h,onPlay:o,isFavorite:u(h.id),onToggleFavorite:()=>d(h.id),isActive:l===h.id},h.id))})}),s&&c.jsxs("div",{className:"flex-1 flex flex-col items-center py-4 space-y-2",children:[c.jsx("div",{className:"rounded-md p-2 bg-white/5 text-slate-400",children:c.jsx($p,{className:"h-4 w-4"})}),c.jsx("div",{className:"text-xs text-slate-500 text-center",children:f.length})]})]})})},Zge=({isSidebarOpen:t,onToggleSidebar:e,onToggleChannelList:r})=>c.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 flex items-center justify-between bg-slate-900/95 backdrop-blur-md border-b border-white/10 px-4 py-3",children:[c.jsx("button",{onClick:e,className:`rounded-md p-2 transition-colors ${t?"bg-blue-600 text-white":"text-slate-400 hover:text-white hover:bg-white/10"}`,title:"Toggle categories",children:c.jsx(bne,{className:"h-5 w-5"})}),c.jsx("span",{className:"text-white font-semibold",children:"IPTV Player"}),c.jsx("button",{onClick:r,className:"rounded-md p-2 text-slate-400 hover:text-white hover:bg-white/10 transition-colors",title:"Toggle channel list",children:c.jsx(AI,{className:"h-5 w-5"})})]}),CD="react-iptv-categories-cache",Jge=5*60*1e3,TD=(t,e)=>{const r=new URL(e.apiBase),n=new URLSearchParams({username:e.username,password:e.password,...Object.fromEntries(Object.entries(t).map(([s,a])=>[s,String(a)]))});return r.search=n.toString(),`${hr}/api/proxy?url=${encodeURIComponent(r.toString())}`},e0e=(t,e)=>{const r=new URL(e.apiBase),n=`${r.protocol}//${r.host}`;return t.map(i=>{var u;const s=((u=i.stream_type)==null?void 0:u.toLowerCase())??"live",a=s==="live"?"m3u8":"mp4",l=`${n}/${s==="live"?"live":"movie"}/${e.username}/${e.password}/${i.stream_id}.${a}`;return{id:i.stream_id,name:i.name,streamType:s,streamIcon:i.stream_icon??null,added:i.added,streamUrl:l}}).sort((i,s)=>i.name.localeCompare(s.name,"tr",{sensitivity:"base"}))};function t0e(){var V;const{credentials:t,isConfigured:e}=eK(),{setStreamUrl:r,setUseVideoMode:n,setVideoMode:i}=Yr(),{user:s}=Ta(),[a,o]=E.useState([]),[l,u]=E.useState(!0),[d,A]=E.useState(null),f=E.useMemo(()=>[...a].sort((q,H)=>q.name.localeCompare(H.name,"tr",{sensitivity:"base"})),[a]),[h,m]=E.useState(((V=f[0])==null?void 0:V.id)??""),[p,g]=E.useState(""),[x,v]=E.useState(!1),[y,w]=E.useState(null),[b,S]=E.useState(!1),[C,T]=E.useState(!1),[B,_]=E.useState(!1),[I,L]=E.useState(!1),[N,R]=E.useState(!1),M=E.useMemo(()=>t?btoa(JSON.stringify(t)).slice(0,16):"",[t]),k=E.useCallback(async(q=!1)=>{if(!t){u(!1);return}u(!0),A(null);try{if(!q){const ce=localStorage.getItem(CD);if(ce){const Be=JSON.parse(ce),_e=Date.now()-Be.timestamp>Jge,He=Be.credentialsHash===M;if(!_e&&He&&Be.categories.length>0){o(Be.categories),Be.categories.length>0&&!h&&m(Be.categories[0].id),u(!1);return}}}const H=TD({action:"get_live_categories"},t),z=TD({action:"get_live_streams"},t);console.log(" Optimizing IPTV loading: Fetching categories and all streams in parallel...");const[ae,X]=await Promise.all([fetch(H),fetch(z)]);if(!ae.ok||!X.ok)throw new Error("Failed to fetch IPTV data");const[ne,ee]=await Promise.all([ae.json(),X.json()]);console.log(` Fetched ${ne.length} categories and ${ee.length} streams`);const G={};ee.forEach(ce=>{const Be=ce.category_id;G[Be]||(G[Be]=[]),G[Be].push(ce)});const ye=ne.map((ce,Be)=>{const _e=G[ce.category_id]||[];return{id:ce.category_id,name:ce.category_name,parentId:ce.parent_id,order:Number.parseInt(ce.category_id,10)||Be,streams:e0e(_e,t)}}).filter(ce=>ce.streams.length>0).sort((ce,Be)=>ce.name.localeCompare(Be.name,"tr",{sensitivity:"base"})),Me={categories:ye,timestamp:Date.now(),credentialsHash:M};localStorage.setItem(CD,JSON.stringify(Me)),o(ye),ye.length>0&&!h&&m(ye[0].id)}catch(H){A(H instanceof Error?H.message:"Error loading categories")}finally{u(!1)}},[t,h,M]);E.useEffect(()=>{e&&t?k():u(!1)},[k,e,t]);const O=E.useCallback(()=>{T(q=>{const H=!q;return H&&_(!1),H})},[]),j=E.useCallback(()=>{_(q=>{const H=!q;return H&&T(!1),H})},[]),D=E.useMemo(()=>h?f.find(q=>q.id===h)??f[0]:f[0],[f,h]),F=(y==null?void 0:y.id)??null,$=E.useMemo(()=>({totalStreams:a.reduce((q,H)=>q+H.streams.length,0),totalCategories:a.length}),[a]),U=E.useCallback(q=>{w(q),S(!0),_(!1),(s==null?void 0:s.role)==="admin"&&(r(q.streamUrl),i("live"),n(!0),Ge.success(`Broadcasting channel: ${q.name}`))},[s,r,i,n]),K=E.useCallback(()=>{S(!1),w(null)},[]);return e?l?c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-slate-950",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-slate-400 mb-4",children:"Loading IPTV data..."}),c.jsx(te,{variant:"outline",size:"sm",onClick:()=>k(!0),className:"text-xs",children:"Force Retry"})]})}):d?c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-slate-950",children:c.jsxs("div",{className:"text-center max-w-md mx-4",children:[c.jsx("div",{className:"rounded-full bg-red-500/20 p-6 mb-6 mx-auto w-fit",children:c.jsx(Qu,{className:"h-12 w-12 text-red-400"})}),c.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"IPTV Data Failed to Load"}),c.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed",children:d}),c.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 rounded-xl bg-blue-600 px-6 py-3 text-sm font-medium text-white hover:bg-blue-500 transition-colors mx-auto",children:[c.jsx(Xl,{className:"h-4 w-4"}),"Try Again"]})]})}):a.length===0?c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-slate-950",children:c.jsxs("div",{className:"text-center max-w-md mx-4",children:[c.jsx("div",{className:"rounded-full bg-slate-500/20 p-6 mb-6 mx-auto w-fit",children:c.jsx(Vv,{className:"h-12 w-12 text-slate-400"})}),c.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"No Categories Found"}),c.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed",children:"Your IPTV service doesn't have any categories or you don't have access."}),c.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 rounded-xl bg-blue-600 px-6 py-3 text-sm font-medium text-white hover:bg-blue-500 transition-colors mx-auto",children:[c.jsx(Xl,{className:"h-4 w-4"}),"Refresh"]})]})}):c.jsxs("div",{className:"flex h-full w-full flex-col bg-slate-950 lg:flex-row",children:[c.jsx(Zge,{isSidebarOpen:C,onToggleSidebar:O,onToggleChannelList:j}),(C||B)&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm lg:hidden",onClick:()=>{T(!1),_(!1)}}),c.jsx(Wge,{categories:f,selectedCategoryId:h,onCategorySelect:q=>{m(q),g(""),T(!1)},isSidebarOpen:C,isMenuCollapsed:I,onToggleMenuCollapsed:()=>L(!I),totals:$}),c.jsx(Xge,{selectedCategory:D,searchTerm:p,onSearchChange:g,showChannelFavorites:x,onToggleChannelFavorites:()=>v(!x),isChannelPanelCollapsed:N,onToggleChannelPanelCollapsed:()=>R(!N),onPlayStream:U,activeStreamId:F}),c.jsx(zge,{selectedStream:y,isPlayerOpen:b,onClosePlayer:K})]}):c.jsx("div",{className:"flex h-full w-full items-center justify-center bg-slate-950",children:c.jsxs("div",{className:"text-center max-w-md mx-4",children:[c.jsx("div",{className:"rounded-full bg-slate-500/20 p-6 mb-6 mx-auto w-fit",children:c.jsx(Vv,{className:"h-12 w-12 text-slate-400"})}),c.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"IPTV Not Configured"}),c.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed",children:"Please configure your IPTV service credentials to access channels."})]})})}const r0e=[{id:"1",title:"FIFA World Cup 2026 Qualifiers",subtitle:"Argentina vs Brazil",thumbnail:"https://images.fifa.com/image/upload/t_l1/v1700147648/fifacom/Qualifiers_2026.jpg",type:"live",date:"LIVE NOW",streamUrl:"https://demo.unified-streaming.com/k8s/live/stable/sintel.isml/.m3u8",category:"Qualifiers"},{id:"2",title:"FIFA Club World Cup",subtitle:"Manchester City vs Al Ahly",thumbnail:"https://images.fifa.com/image/upload/t_l1/v1698765432/fifacom/CWC_2023.jpg",type:"archive",date:"20 Dec 2023",streamUrl:"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",category:"Club World Cup"},{id:"3",title:"FIFA Women's World Cup",subtitle:"Spain vs England - Final",thumbnail:"https://images.fifa.com/image/upload/t_l1/v1692523456/fifacom/WWC_Final.jpg",type:"archive",date:"20 Aug 2023",streamUrl:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",category:"Women's World Cup"},{id:"4",title:"U-17 World Cup Highlights",subtitle:"Germany vs France",thumbnail:"https://images.fifa.com/image/upload/t_l1/v1701543210/fifacom/U17_Final.jpg",type:"highlight",date:"02 Dec 2023",streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8",category:"U-17 World Cup"}];function n0e(){const{setStreamUrl:t,setVideoMode:e,setUseVideoMode:r}=Yr(),{user:n}=Ta(),[i,s]=E.useState(""),[a,o]=E.useState("grid"),[l,u]=E.useState("all"),d=E.useMemo(()=>r0e.filter(f=>{const h=f.title.toLowerCase().includes(i.toLowerCase())||f.subtitle.toLowerCase().includes(i.toLowerCase()),m=l==="all"||f.type===l;return h&&m}),[i,l]),A=f=>{(n==null?void 0:n.role)==="admin"?(t(f.streamUrl),e("fifaplus"),r(!0),Ge.success(`FIFA+ Selected: ${f.title} - ${f.subtitle}`)):Ge.error("Only administrators can broadcast FIFA+ streams")};return c.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-slate-100 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-white/5 bg-slate-900/50 backdrop-blur-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-primary/20 rounded-2xl border border-primary/30",children:c.jsx(wu,{className:"w-6 h-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"FIFA+ Source"}),c.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest",children:"Digital Content Archive"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative w-full md:w-80",children:[c.jsx($p,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),c.jsx(jr,{value:i,onChange:f=>s(f.target.value),placeholder:"Search events, matches, teams...",className:"bg-slate-800/50 border-white/10 pl-10 h-10 text-sm focus:ring-primary/20"})]}),c.jsxs("div",{className:"flex items-center bg-slate-800/40 rounded-lg p-1 border border-white/5",children:[c.jsx(te,{variant:"ghost",size:"icon",className:Z("h-8 w-8",a==="grid"?"bg-slate-700 text-white":"text-slate-400"),onClick:()=>o("grid"),children:c.jsx(pne,{className:"w-4 h-4"})}),c.jsx(te,{variant:"ghost",size:"icon",className:Z("h-8 w-8",a==="list"?"bg-slate-700 text-white":"text-slate-400"),onClick:()=>o("list"),children:c.jsx(AI,{className:"w-4 h-4"})})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-6 overflow-x-auto pb-2 no-scrollbar",children:[c.jsx(te,{variant:l==="all"?"default":"outline",size:"sm",onClick:()=>u("all"),className:"rounded-full h-8 px-4 text-xs font-bold uppercase tracking-wider",children:"All Content"}),c.jsxs(te,{variant:l==="live"?"default":"outline",size:"sm",onClick:()=>u("live"),className:"rounded-full h-8 px-4 text-xs font-bold uppercase tracking-wider gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),"Live"]}),c.jsx(te,{variant:l==="archive"?"default":"outline",size:"sm",onClick:()=>u("archive"),className:"rounded-full h-8 px-4 text-xs font-bold uppercase tracking-wider",children:"Full Matches"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:d.length>0?c.jsx("div",{className:Z("grid gap-6",a==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:d.map(f=>c.jsxs("div",{className:Z("group relative bg-slate-900/40 border border-white/5 rounded-2xl overflow-hidden transition-all hover:border-primary/50 hover:shadow-2xl hover:shadow-primary/10",a==="list"&&"flex gap-6 h-48"),children:[c.jsxs("div",{className:Z("relative overflow-hidden",a==="grid"?"aspect-video":"w-80 h-full"),children:[c.jsx("img",{src:f.thumbnail,alt:f.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent opacity-60"}),f.type==="live"&&c.jsx(We,{className:"absolute top-3 left-3 bg-red-600 hover:bg-red-700 text-white border-none px-2 py-0.5 text-[10px] font-black italic",children:"LIVE"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px]",children:c.jsx(te,{size:"icon",className:"h-14 w-14 rounded-full bg-primary hover:bg-primary/90 text-white shadow-xl scale-90 group-hover:scale-100 transition-transform",onClick:()=>A(f),children:c.jsx(ho,{className:"w-8 h-8 fill-current ml-1"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col justify-between flex-1",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(We,{variant:"outline",className:"text-[9px] border-white/10 text-slate-400 font-bold uppercase py-0 leading-none",children:f.category}),c.jsx("span",{className:"text-[10px] text-slate-500 font-mono italic",children:f.date})]}),c.jsx("h3",{className:"font-bold text-slate-100 group-hover:text-primary transition-colors leading-tight mb-1",children:f.title}),c.jsx("p",{className:"text-sm text-slate-400 font-medium",children:f.subtitle})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs(te,{variant:"ghost",size:"sm",className:"h-8 px-0 text-xs font-bold text-slate-500 hover:text-white transition-colors gap-2",children:[c.jsx(o8,{className:"w-3.5 h-3.5"}),"Details"]}),c.jsxs(te,{variant:"ghost",size:"sm",className:"h-8 group/link text-xs font-bold text-primary opacity-0 group-hover:opacity-100 transition-all gap-2",onClick:()=>window.open(`https://www.fifa.com/fifaplus/en/watch/${f.id}`,"_blank"),children:[c.jsx(uI,{className:"w-3.5 h-3.5 transition-transform group-hover/link:-translate-y-0.5 group-hover/link:translate-x-0.5"}),"Watch on FIFA+"]})]})]})]},f.id))}):c.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-slate-900 rounded-full flex items-center justify-center mb-6 border border-white/5",children:c.jsx($p,{className:"w-8 h-8 text-slate-700"})}),c.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No matching events found"}),c.jsxs("p",{className:"text-slate-400 max-w-md mx-auto",children:[`We couldn't find anything matching "`,i,'". Try checking your spelling or using more general terms.']}),c.jsx(te,{variant:"link",className:"mt-4 text-primary font-bold",onClick:()=>{s(""),u("all")},children:"Reset Search"})]})}),c.jsxs("div",{className:"p-4 border-t border-white/5 bg-slate-900/30 flex items-center justify-between px-6",children:[c.jsxs("div",{className:"flex items-center gap-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(a8,{className:"w-3 h-3"})," Recent Activity"]}),c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(s8,{className:"w-3 h-3"})," International Feed"]})]}),c.jsx("div",{className:"text-[10px] text-slate-600 italic",children:"All trademarks belong to their respective owners."})]})]})}const i0e=()=>{const[t,e]=E.useState(!0),{events:r}=Tf(),{liveMappings:n,postMatchMappings:i}=E.useMemo(()=>{const s=[],a=[];return r.forEach(o=>{o.gamepadMappings&&o.gamepadMappings.forEach(l=>{const u=l.modifier?`${l.modifier}+${pi[l.buttonIndex]}`:pi[l.buttonIndex],d={eventName:o.eventName,eventDescription:o.label,buttonLabel:u};(l.mode==="LIVE"||l.mode==="BOTH")&&s.push(d),(l.mode==="POST"||l.mode==="BOTH")&&a.push(d)})}),{liveMappings:s,postMatchMappings:a}},[r]);return t?c.jsxs("div",{className:"fixed top-0 right-0 h-screen w-80 bg-black/20 backdrop-blur-sm z-50 p-4 overflow-y-auto text-white border-l border-white/10 shadow-2xl transition-all duration-300 pointer-events-none hover:pointer-events-auto hover:bg-black/40",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pointer-events-auto",children:[c.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-green-400",children:"Tacta Control Map"}),c.jsx("button",{onClick:()=>e(!1),className:"text-xs bg-white/10 hover:bg-white/20 px-2 py-1 rounded",children:"Hide"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-400 mb-2 border-b border-white/10 pb-1",children:"Live Mode (Gamepad)"}),c.jsx("div",{className:"grid gap-2 text-xs",children:n.map((s,a)=>c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300 font-mono",children:s.eventDescription}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-green-300 min-w-[24px] text-center",children:s.buttonLabel})]},`${s.eventName}-${a}`))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-gray-400 mb-2 border-b border-white/10 pb-1",children:"Post-Match (Keyboard)"}),c.jsxs("div",{className:"grid gap-2 text-xs",children:[c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300",children:"Play / Pause"}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-yellow-300",children:"Space"})]}),c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300",children:"Pass End"}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-yellow-300",children:"1"})]}),c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300",children:"Key Pass"}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-yellow-300",children:"Shift+1"})]}),c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300",children:"Assist"}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-yellow-300",children:"Ctrl+1"})]}),c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300",children:"Shot Outcome"}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-yellow-300",children:"2"})]}),c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300",children:"Tactical Tags (Q/W/E/R/Z)"}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-yellow-300",children:"Keys"})]})]}),c.jsx("h3",{className:"text-xs font-semibold text-gray-400 mt-4 mb-2 border-b border-white/10 pb-1",children:"Post-Match (Gamepad)"}),c.jsx("div",{className:"grid gap-2 text-xs",children:i.map((s,a)=>c.jsxs("div",{className:"flex justify-between items-center hover:bg-white/5 p-1 rounded",children:[c.jsx("span",{className:"text-gray-300 font-mono",children:s.eventDescription}),c.jsx("span",{className:"font-bold bg-white/10 px-1.5 rounded text-blue-300 min-w-[24px] text-center",children:s.buttonLabel})]},`${s.eventName}-${a}`))})]})]})]}):c.jsx("div",{className:"fixed bottom-4 right-4 z-50 bg-black/50 text-white p-2 rounded cursor-pointer hover:bg-black/70 text-xs",onClick:()=>e(!0),children:"Show Mappings"})},s0e=({zoomLevel:t,eventNotifications:e,showRoster:r,teams:n,selectedTeam:i,teamNames:s,onCloseRoster:a,onPlayerSelect:o,visiblePlayers:l=[],passingPredictions:u=[],tacticalAlerts:d=[],showHeatmap:A=!1})=>c.jsxs(c.Fragment,{children:[t>1&&c.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs font-mono pointer-events-none z-20",children:[t.toFixed(1),"x"]}),l.map((f,h)=>{const m=f.team==="BALL";return c.jsxs("div",{className:"absolute pointer-events-none transition-all duration-75",style:{left:`${f.x}%`,top:`${f.y}%`,transform:m?"translate(-50%, -50%)":"translate(-50%, -100%)",zIndex:m?50:10},children:[m?c.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full border border-black shadow-lg animate-pulse"}):c.jsx("div",{className:`
                                w-4 h-4 rounded-full border-2 shadow-sm flex items-center justify-center
                                ${f.team==="A"?"bg-red-500/50 border-red-400":"bg-blue-500/50 border-blue-400"}
                                ${f.is_sprinting?"animate-pulse ring-2 ring-yellow-400":""}
                            `,children:c.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),f.speed&&f.speed>(m?2:7.2)&&c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 bg-black/60 text-white text-[8px] px-1 rounded whitespace-nowrap backdrop-blur-sm",children:[(f.speed*3.6).toFixed(1)," km/h"]})]},`${f.id}-${h}`)}),u.map((f,h)=>{const m=l.find(g=>g.id===f.ball_carrier_id),p=l.find(g=>g.id===f.receiver_id);return!m||!p||f.probability<.4?null:c.jsxs("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",zIndex:5},children:[c.jsx("line",{x1:`${m.x}%`,y1:`${m.y}%`,x2:`${p.x}%`,y2:`${p.y}%`,stroke:"rgba(255, 255, 0, 0.6)",strokeWidth:"2",strokeDasharray:"5,5",opacity:f.probability}),c.jsx("circle",{cx:`${p.x}%`,cy:`${p.y}%`,r:"8",fill:"rgba(255, 255, 0, 0.3)",stroke:"rgba(255, 255, 0, 0.8)",strokeWidth:"2"})]},`pass-${h}`)}),A&&l.length>0&&c.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:3},children:l.filter(f=>f.team!=="BALL").map((f,h)=>c.jsx("div",{className:"absolute rounded-full",style:{left:`${f.x}%`,top:`${f.y}%`,width:"60px",height:"60px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${f.team==="A"?"rgba(255,0,0,0.3)":"rgba(0,0,255,0.3)"} 0%, transparent 70%)`,filter:"blur(8px)"}},`heat-${h}`))}),c.jsx("div",{className:"absolute top-20 right-4 pointer-events-none z-30 space-y-2 w-72",children:d.slice(-3).map(f=>c.jsx("div",{className:`bg-black/80 backdrop-blur-sm text-white px-3 py-2 rounded-lg border-l-4 shadow-lg animate-in slide-in-from-right
                            ${f.severity==="high"?"border-red-500":f.severity==="medium"?"border-yellow-500":"border-blue-500"}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-bold text-xs uppercase",children:f.event_type.replace("_"," ")}),c.jsx("div",{className:"text-[10px] text-gray-300",children:f.description})]}),c.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded
                                ${f.severity==="high"?"bg-red-500/20 text-red-300":f.severity==="medium"?"bg-yellow-500/20 text-yellow-300":"bg-blue-500/20 text-blue-300"}`,children:f.team})]})},f.id))}),c.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 pointer-events-none z-30 space-y-2 w-96",children:e.map(f=>{const h=Date.now()-f.timestamp,m=Math.max(0,1-h/3e3),p=h/3e3*-20;return c.jsx("div",{className:"bg-black/80 backdrop-blur-sm text-white px-4 py-3 rounded-lg border-l-4 border-primary shadow-lg",style:{opacity:m,transform:`translateY(${p}px)`,transition:"opacity 0.1s, transform 0.1s"},children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-bold text-lg",children:f.event.eventName}),c.jsxs("div",{className:"text-sm text-gray-300 flex items-center gap-2",children:[c.jsx("span",{children:f.event.team==="TEAM_A"?(s==null?void 0:s.teamA)||"Team A":(s==null?void 0:s.teamB)||"Team B"}),f.event.player&&c.jsxs("span",{children:[" ",f.event.player.name]}),f.event.matchTime&&c.jsxs("span",{children:[" ",f.event.matchTime]})]})]}),f.event.isCalculated&&c.jsx("div",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:"AUTO"})]})},f.id)})}),r&&n&&i&&n.get(i)&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:a,className:"absolute top-2 right-2 h-6 w-6 flex items-center justify-center bg-black/30 hover:bg-black/50 rounded-full text-white/60 hover:text-white transition-colors z-40 pointer-events-auto",children:""}),c.jsx("div",{className:"absolute top-4 left-4 bottom-4 flex flex-col gap-2 pointer-events-none z-30",children:(()=>{var h;const f=[1,2,5,6,7,8,9,10,11,15,22];return(h=n.get(i))==null?void 0:h.PlayerData.filter(m=>f.includes(m.Number||0)).sort((m,p)=>{const g=f.indexOf(m.Number||0),x=f.indexOf(p.Number||0);return g-x}).slice(0,11).map(m=>c.jsx("div",{onClick:()=>o==null?void 0:o(m.ID),className:"bg-black/20 backdrop-blur-sm rounded-md p-1.5 hover:bg-black/30 transition-all border border-white/10 hover:border-primary/30 pointer-events-auto cursor-pointer hover:scale-105 active:scale-95",children:c.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[c.jsx("div",{className:"w-7 h-7 bg-primary/20 rounded-full flex items-center justify-center font-bold text-primary text-xs",children:m.Number||"?"}),c.jsx("div",{className:"text-center",children:c.jsx("div",{className:"font-semibold text-[9px] text-white/90",children:m.Surname})})]})},m.ID))})()}),(()=>{var m;const f=[1,2,5,6,7,8,9,10,11,15,22],h=(m=n.get(i))==null?void 0:m.PlayerData.filter(p=>!f.includes(p.Number||0)).sort((p,g)=>(p.Number||99)-(g.Number||99)).slice(0,7);return h&&h.length>0&&c.jsx("div",{className:"absolute top-4 right-4 bottom-4 flex flex-col gap-2 pointer-events-none z-30",children:h.map(p=>c.jsx("div",{onClick:()=>o==null?void 0:o(p.ID),className:"bg-black/15 backdrop-blur-sm rounded-md p-1.5 hover:bg-black/25 transition-all border border-white/5 hover:border-white/15 pointer-events-auto cursor-pointer hover:scale-105 active:scale-95",children:c.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[c.jsx("div",{className:"w-6 h-6 bg-gray-500/20 rounded-full flex items-center justify-center font-bold text-gray-300 text-[10px]",children:p.Number||"?"}),c.jsx("div",{className:"text-center",children:c.jsx("div",{className:"font-medium text-[8px] text-white/70",children:p.Surname})})]})},p.ID))})})()]})]}),d9=({isVisible:t,roster:e,selectedIndex:r,team:n})=>t?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs(Fe,{className:"w-[800px] bg-zinc-900/95 border-zinc-700 p-6 shadow-2xl pointer-events-auto",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-white uppercase tracking-wider",children:["Select Player ",c.jsxs("span",{className:n==="TEAM_A"?"text-blue-400":"text-red-400",children:["(",n==="TEAM_A"?"Home":"Away",")"]})]}),c.jsx("p",{className:"text-zinc-400 text-sm",children:"Use D-Pad to Select  A to Confirm  B to Cancel"})]}),c.jsx("div",{className:"grid grid-cols-5 gap-3",children:e.map((i,s)=>c.jsxs("div",{className:`
                                relative p-3 rounded-lg border transition-all duration-200 flex flex-col items-center gap-2
                                ${s===r?"bg-white text-black border-white scale-105 shadow-[0_0_15px_rgba(255,255,255,0.3)] z-10":"bg-zinc-800 text-zinc-300 border-zinc-700 opacity-80"}
                            `,children:[c.jsx("span",{className:`
                                text-2xl font-black 
                                ${s===r?"text-black":"text-zinc-500"}
                            `,children:i.number}),c.jsx("span",{className:"text-xs font-medium truncate w-full text-center",children:i.name}),c.jsx(We,{variant:"outline",className:`
                                    text-[10px] px-1 py-0 h-4 border-0
                                    ${s===r?"bg-black/10 text-black":"bg-zinc-700 text-zinc-400"}
                                `,children:i.position})]},i.id))})]})}):null,BD=[{id:"goals",label:"Goals & Shots",types:["goal","shot","save"],color:"bg-red-500",height:40},{id:"passing",label:"Passing",types:["pass"],color:"bg-blue-500",height:30},{id:"defense",label:"Defense",types:["interception","tackle","foul","duel"],color:"bg-orange-500",height:30},{id:"other",label:"Other",types:["turnover","offside","loose_ball"],color:"bg-zinc-500",height:30}],a0e=({duration:t,currentTime:e,events:r,onSeek:n,variant:i="pro"})=>{const s=E.useRef(null),[a,o]=E.useState(!1),[l,u]=E.useState(1),d=p=>{if(!s.current||t===0)return;const g=y=>{const w=s.current.getBoundingClientRect(),S=Math.max(0,Math.min(y-w.left,w.width))/w.width;n(S*t)};g(p.clientX);const x=y=>{y.preventDefault(),g(y.clientX)},v=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",v)},A=p=>{const g=Math.floor(p/60),x=Math.floor(p%60);return`${g}:${x.toString().padStart(2,"0")}`},f=E.useMemo(()=>{const p={goals:[],passing:[],defense:[],other:[]};return r.forEach(g=>{var y;const x=((y=g.eventName)==null?void 0:y.toLowerCase())||"";if(!g.videoTime)return;let v=!1;for(const w of BD)if(w.types.some(b=>x.includes(b))){p[w.id].push(g),v=!0;break}v||p.other.push(g)}),p},[r]),h=p=>{const g=p.toLowerCase();return g.includes("pass")?c.jsx(ql,{className:"w-3 h-3 text-blue-200"}):g.includes("shot")?c.jsx(Wi,{className:"w-3 h-3 text-red-200"}):g.includes("goal")?c.jsx(wu,{className:"w-3 h-3 text-yellow-200"}):g.includes("foul")?c.jsx(mo,{className:"w-3 h-3 text-orange-200"}):g.includes("interception")?c.jsx(Zl,{className:"w-3 h-3 text-green-200"}):g.includes("turnover")?c.jsx(ene,{className:"w-3 h-3 text-gray-300"}):c.jsx(lI,{className:"w-2 h-2 text-white/50"})},m=E.useMemo(()=>{if(!t)return[];const p=t>600?60:10,g=l>2?p/2:p,x=[];for(let v=0;v<=t;v+=g)x.push({time:v,label:A(v),left:v/t*100});return x},[t,l]);return i==="minimal"?c.jsxs("div",{ref:s,className:"w-full h-8 bg-black/60 backdrop-blur-md border-t border-white/10 relative group cursor-pointer flex items-center px-4 select-none",onMouseDown:d,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[c.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-1 bg-primary-500/20 -translate-y-1/2 rounded-full mx-4 overflow-visible",children:c.jsx("div",{className:"h-full bg-primary rounded-full relative",style:{width:`${e/(t||1)*100}%`},children:c.jsx("div",{className:"absolute right-0 top-1/2 w-3 h-3 bg-white rounded-full -translate-y-1/2 shadow transition-transform scale-0 group-hover:scale-100"})})}),r.map(p=>{const g=(p.videoTime||0)/(t||1)*100;return g<0||g>100?null:c.jsx("div",{className:"absolute top-1/2 w-1.5 h-1.5 rounded-full -translate-y-1/2 -ml-[3px] bg-white/60 pointer-events-none",style:{left:`${g}%`}},p.id)})]}):c.jsxs("div",{className:"w-full bg-zinc-950 border-t border-zinc-800 flex flex-col select-none relative group h-48",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[c.jsxs("div",{className:"absolute top-2 right-2 z-50 flex items-center gap-1 bg-black/80 rounded p-1 border border-white/10 shadow-lg",children:[c.jsx("button",{onClick:()=>u(p=>Math.max(1,p-.5)),className:"p-1 hover:bg-white/20 rounded text-white disabled:opacity-50",disabled:l<=1,title:"Zoom Out",children:c.jsx(x8,{className:"w-3 h-3"})}),c.jsxs("span",{className:"text-[10px] font-mono w-8 text-center text-white",children:[Math.round(l*100),"%"]}),c.jsx("button",{onClick:()=>u(p=>Math.min(10,p+.5)),className:"p-1 hover:bg-white/20 rounded text-white",title:"Zoom In",children:c.jsx(g8,{className:"w-3 h-3"})})]}),c.jsx("div",{className:"flex-1 w-full overflow-x-auto overflow-y-hidden relative custom-scrollbar",children:c.jsxs("div",{style:{width:`${l*100}%`},className:"h-full flex flex-col relative transition-all duration-200 ease-out",children:[c.jsx("div",{className:"h-6 bg-zinc-900 border-b border-zinc-800 relative w-full overflow-hidden text-[10px] text-zinc-500 font-mono flex-shrink-0",children:m.map(p=>c.jsx("div",{className:"absolute top-0 h-full border-l border-zinc-700 pl-1 pt-1",style:{left:`${p.left}%`},children:p.label},p.time))}),c.jsxs("div",{ref:s,className:"flex-1 relative w-full cursor-crosshair bg-zinc-900/50",onMouseDown:d,children:[BD.map((p,g)=>{var x;return c.jsxs("div",{className:"w-full border-b border-zinc-800 relative box-border flex items-center px-2",style:{height:`${p.height}px`},children:[c.jsx("div",{className:"sticky left-2 text-[10px] font-bold text-zinc-600 uppercase tracking-wider pointer-events-none z-10 w-20 bg-zinc-900/50 backdrop-blur-sm px-1 rounded",children:p.label}),(x=f[p.id])==null?void 0:x.map(v=>{const y=(v.videoTime||0)/(t||1)*100;return c.jsx("div",{className:`absolute top-1 bottom-1 w-1 min-w-[4px] rounded-sm hover:w-6 hover:z-20 transition-all cursor-pointer group/event flex items-center justify-center ${p.color.replace("bg-","bg-opacity-60 bg-")}`,style:{left:`${y}%`},title:`${v.eventName} @ ${A(v.videoTime||0)}`,children:c.jsx("div",{className:"hidden group-hover/event:flex w-full h-full items-center justify-center bg-black/80 rounded border border-white/20",children:h(v.eventName)})},v.id)})]},p.id)}),c.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-red-500 z-30 pointer-events-none shadow-[0_0_10px_rgba(239,68,68,0.5)]",style:{left:`${e/(t||1)*100}%`},children:c.jsx("div",{className:"absolute -top-3 -translate-x-1/2 text-[9px] bg-red-600 text-white px-1 rounded-sm font-mono whitespace-nowrap z-40",children:A(e)})})]})]})})]})},o0e=t=>{const e=t.toLowerCase();return e.includes("goal")?wu:e.includes("pass")?ql:e.includes("shot")?cI:e.includes("foul")?mo:e.includes("offside")?i8:e.includes("sub")?Xl:e.includes("penalty")?c8:e.includes("corner")?t8:un},A9=({events:t})=>{const[e,r]=E.useState([]),n=E.useRef(null);return E.useEffect(()=>{if(t.length>0){const i=t[0];if(i.id!==n.current){n.current=i.id,r(a=>[i,...a].slice(0,3));const s=setTimeout(()=>{r(a=>a.filter(o=>o.id!==i.id))},5e3);return()=>clearTimeout(s)}}},[t]),e.length===0?null:c.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:e.map((i,s)=>{const a=o0e(i.eventName),l=i.team==="TEAM_A"?"border-l-primary":"border-l-destructive";return c.jsxs("div",{className:Z("bg-background/95 backdrop-blur border border-border rounded-lg shadow-lg p-3 w-[280px]","border-l-4 transition-all duration-500 transform origin-bottom-right",l,"animate-in slide-in-from-right-10 fade-in zoom-in-95"),children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(a,{className:"w-4 h-4"}),c.jsx("span",{className:"font-bold text-sm",children:i.eventName})]}),c.jsx("span",{className:"text-[10px] font-mono text-muted-foreground",children:i.matchTime})]}),i.player&&c.jsx("div",{className:"text-xs text-muted-foreground mt-1 ml-6",children:i.player.name})]},i.id)})})},l0e=({videoFile:t,videoUrl:e,events:r,onTimeUpdate:n,seekTo:i,isPlaying:s,onPlayPause:a,onSeekComplete:o,onSeek:l,axes:u,buttons:d,teams:A,selectedTeam:f,teamNames:h,onPlayerSelect:m,onAnalysisComplete:p,quickSelectorState:g,currentTime:x=0,timelineVariant:v="minimal",showLiveToasts:y=!0,analysisMode:w,isEditMode:b=!1,layoutConfig:S={},onToggleVisibility:C})=>{var Tn,Qr;const T=E.useRef(null),B=E.useRef(!1),_=E.useRef(!1),I=E.useRef(!1),L=E.useRef(!1),{toast:N}=lc(),R=E.useRef(null),[M,k]=E.useState(1),[O,j]=E.useState({x:0,y:0}),[D,F]=E.useState(!1),[$,U]=E.useState({x:0,y:0}),[K,V]=E.useState(0),[q,H]=E.useState(null),[z,ae]=E.useState([]),[X,ne]=E.useState(!1),[ee,G]=E.useState(null),[ge,ye]=E.useState([]),[Me,ce]=E.useState(""),[Be,_e]=E.useState(!1),[He,Se]=E.useState(!1),[it,Ce]=E.useState(!1),[Qe,me]=E.useState(!1),[Pe,be]=E.useState([]),[le,Ee]=E.useState([]),[ve,pe]=E.useState(!1),re=t==null?void 0:t.type.startsWith("image/");E.useEffect(()=>{if(t){const $e=URL.createObjectURL(t);return H($e),()=>URL.revokeObjectURL($e)}else e&&H(`${hr}${e}`)},[t,e]),E.useEffect(()=>{const $e=()=>{pe(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",$e),()=>document.removeEventListener("fullscreenchange",$e)},[]),E.useEffect(()=>{i!=null&&T.current&&(Number.isFinite(i)?(console.log(` Seeking to: ${i}`),T.current.currentTime=i,o==null||o()):console.warn(" Ignored seekTo with non-finite value:",i))},[i,o]),E.useEffect(()=>{if(!(ee!=null&&ee.tracks)||!T.current)return;const Ae=setInterval(()=>{var ct;const fe=T.current.currentTime,ue=((ct=ee.metadata)==null?void 0:ct.fps)||30,de=Math.floor(fe*ue),rt=[];Object.entries(ee.tracks).forEach(([Rt,pr])=>{var ti,Yu;const Et=pr.find(aE=>aE.frame===de);Et&&rt.push({id:parseInt(Rt),x:Et.x/(((ti=ee.metadata)==null?void 0:ti.width)||1920)*100,y:Et.y/(((Yu=ee.metadata)==null?void 0:Yu.height)||1080)*100,team:Et.team,confidence:Et.confidence,speed:Et.velocity,is_sprinting:Et.is_sprinting})}),ye(rt)},100);return()=>clearInterval(Ae)},[ee]);const Ke=async()=>{var fe;if(!t){N({title:"Analysis Failed",description:"Please load a video first.",variant:"destructive"});return}N({title:"Starting Analysis",description:He?"Analyzing entire video...":`Analyzing ${r.length} event clips.`});const $e=new FormData;if($e.append("video",t),!He&&r.length>0){const ue=r.map(de=>({start:Math.max(0,(de.videoTime||0)-5),end:(de.videoTime||0)+5}));$e.append("clips",JSON.stringify(ue))}it&&$e.append("generate_annotated_video","true");const Ae={};Me&&(Ae["x-remote-url"]=Me);try{const de=await(await fetch(`${Cu}/api/analyze-match`,{method:"POST",headers:Ae,body:$e})).json();if(de.success){if(G(de.results),p==null||p(de.results),de.results.passing_predictions&&be(de.results.passing_predictions),de.results.tactical_alerts){const ct=de.results.tactical_alerts.map((Rt,pr)=>({...Rt,id:+`${Date.now()}${Math.floor(Math.random()*1e3)}${pr}`,timestamp:Date.now()}));Ee(ct)}let rt=`Tracked ${Object.keys(de.results.tracks||{}).length} players.`;(fe=de.results.metadata)!=null&&fe.annotated_video&&(rt+=` Video saved: ${de.results.metadata.annotated_video} `),N({title:"Analysis Complete",description:rt})}else throw new Error(de.error||"Analysis failed")}catch(ue){console.error(ue),N({title:"Error",description:"Failed to run analysis. Check console.",variant:"destructive"})}},xe=E.useCallback($e=>{var ue;if(!T.current)return;if(!T.current.paused){console.info(" Frame step skipped - video is playing");return}const Ae=(ue=ee==null?void 0:ee.metadata)!=null&&ue.fps?1/ee.metadata.fps:.04,fe=$e==="forward"?T.current.currentTime+Ae:T.current.currentTime-Ae;Number.isFinite(fe)&&(T.current.currentTime=Math.max(0,Math.min(fe,T.current.duration)),n(T.current.currentTime))},[n,(Tn=ee==null?void 0:ee.metadata)==null?void 0:Tn.fps]),Oe=()=>k($e=>Math.min($e+.5,4)),st=()=>{k($e=>{const Ae=Math.max($e-.5,1);return Ae===1&&j({x:0,y:0}),Ae})},xt=()=>{k(1),j({x:0,y:0})},Xr=$e=>{M>1&&(F(!0),U({x:$e.clientX-O.x,y:$e.clientY-O.y}))},br=$e=>{D&&M>1&&j({x:$e.clientX-$.x,y:$e.clientY-$.y})},Fn=()=>F(!1),Os=()=>F(!1);return E.useEffect(()=>{var rt;if(!d||!u||g!=null&&g.isOpen)return;const $e=d[7],Ae=d[6];if($e!=null&&$e.pressed&&Oe(),Ae!=null&&Ae.pressed&&st(),M>1&&u.length>=4){const ct=u[2],Rt=u[3],pr=.2;(Math.abs(ct)>pr||Math.abs(Rt)>pr)&&j(Et=>({x:Et.x+ct*10,y:Et.y+Rt*10}))}const fe=d[9];fe!=null&&fe.pressed&&!B.current&&(a==null||a(!s),N({title:s?" Paused":" Playing",duration:1e3})),B.current=(fe==null?void 0:fe.pressed)||!1;const ue=d[8];if(ue!=null&&ue.pressed&&!_.current&&(document.fullscreenElement?document.exitFullscreen():(rt=R.current)==null||rt.requestFullscreen().catch(ct=>{console.error(`Error attempting to enable fullscreen: ${ct.message} `)})),_.current=(ue==null?void 0:ue.pressed)||!1,w==="POST_MATCH"&&!s){const ct=d[14];ct!=null&&ct.pressed&&!I.current&&xe("backward"),I.current=(ct==null?void 0:ct.pressed)||!1;const Rt=d[15];Rt!=null&&Rt.pressed&&!L.current&&xe("forward"),L.current=(Rt==null?void 0:Rt.pressed)||!1}else I.current&&(I.current=!1),L.current&&(L.current=!1);if(u.length>=1){const ct=u[0],Rt=.25;if(Math.abs(ct)>Rt){if(T.current){if(ct>0){const pr=1+(ct-Rt)*3;Math.abs(T.current.playbackRate-pr)>.1&&(T.current.playbackRate=pr),T.current.paused&&(T.current.play(),a==null||a(!0))}else if(!s){const pr=(Math.abs(ct)-Rt)*.1,Et=Math.max(0,T.current.currentTime-pr);Math.abs(T.current.currentTime-Et)>.01&&(T.current.currentTime=Et)}}}else T.current&&T.current.playbackRate!==1&&(T.current.playbackRate=1)}},[d,u,M,s,a,g,xe,w]),E.useEffect(()=>{if(!T.current||!q)return;(async()=>{var Ae,fe,ue;try{s&&((Ae=T.current)!=null&&Ae.paused)?await T.current.play():!s&&!((fe=T.current)!=null&&fe.paused)&&((ue=T.current)==null||ue.pause())}catch(de){console.error("Play/Pause failed:",de)}})()},[s,q]),c.jsxs("div",{ref:R,className:"relative group bg-black rounded-lg overflow-hidden shadow-xl ring-1 ring-white/10 h-full flex items-center justify-center transition-all duration-300",onMouseDown:Xr,onMouseMove:br,onMouseUp:Fn,onMouseLeave:Os,style:{cursor:M>1?D?"grabbing":"grab":"default"},children:[g&&c.jsx(d9,{isVisible:g.isOpen,roster:g.roster,selectedIndex:g.selectedIndex,team:g.team}),ve&&c.jsx(i0e,{}),c.jsxs("div",{className:"relative w-full h-full transition-transform duration-200 ease-out",style:{transform:`scale(${M}) translate(${O.x}px, ${O.y}px)`,cursor:M>1?"move":"default"},children:[re?c.jsx("img",{src:q||void 0,className:"w-full h-full object-contain pointer-events-none",alt:"Match capture"}):c.jsx("video",{ref:T,className:"w-full h-full object-contain",src:q||void 0,controls:!1,onLoadedMetadata:$e=>V($e.currentTarget.duration),onTimeUpdate:$e=>n($e.currentTarget.currentTime),onPlay:()=>a==null?void 0:a(!0),onPause:()=>a==null?void 0:a(!1),onSeeked:$e=>l==null?void 0:l($e.currentTarget.currentTime)}),c.jsx(s0e,{zoomLevel:M,eventNotifications:z,showRoster:X,teams:A,selectedTeam:f,teamNames:h,onCloseRoster:()=>ne(!1),visiblePlayers:ge,passingPredictions:Pe,tacticalAlerts:le,showHeatmap:Qe,onPlayerSelect:m}),c.jsx(eo,{id:"live-stats",label:"Live Stats Overlay",isEditMode:b,isHidden:(Qr=S["live-stats"])==null?void 0:Qr.hidden,onToggleVisibility:C,className:"absolute top-4 left-4 z-[45] pointer-events-auto",children:c.jsx(bP,{events:r,isOverlay:!0})})]}),q&&c.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2 z-50",children:[c.jsxs("div",{className:"flex gap-1 bg-black/50 p-1 rounded-lg backdrop-blur-sm",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:Oe,className:"h-8 w-8 text-white hover:bg-white/20",title:"Zoom In",children:c.jsx(g8,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:st,className:"h-8 w-8 text-white hover:bg-white/20",title:"Zoom Out",children:c.jsx(x8,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:xt,className:"h-8 w-8 text-white hover:bg-white/20",title:"Reset Zoom",children:c.jsx(po,{className:"h-4 w-4"})}),!re&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-px bg-white/20 mx-1"}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>xe("backward"),className:"h-8 w-8 text-white hover:bg-white/20",title:"Prev Frame",children:c.jsx(Dne,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>xe("forward"),className:"h-8 w-8 text-white hover:bg-white/20",title:"Next Frame",children:c.jsx(One,{className:"h-4 w-4"})})]})]}),M>1&&c.jsxs("div",{className:"bg-black/50 px-2 py-1 rounded text-xs text-white text-center backdrop-blur-sm",children:[Math.round(M*100),"%"]})]}),q&&c.jsx("div",{className:"absolute bottom-24 left-4 flex gap-2",children:c.jsxs(te,{variant:Qe?"default":"ghost",size:"sm",onClick:()=>me(!Qe),className:"gap-1 bg-black/50 hover:bg-black/70 text-white",children:[c.jsx(one,{className:"h-4 w-4 text-orange-400"}),c.jsx("span",{className:"hidden sm:inline",children:"Heatmap"})]})}),Be&&c.jsxs("div",{className:"absolute top-4 right-4 p-3 bg-card rounded-lg border space-y-3 max-w-sm z-50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold text-sm",children:"Analysis Settings"}),c.jsx(te,{variant:"ghost",size:"sm",onClick:()=>_e(!1),children:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Analysis Mode"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"fullVideo",checked:He,onChange:$e=>Se($e.target.checked),className:"h-4 w-4"}),c.jsx("label",{htmlFor:"fullVideo",className:"text-sm cursor-pointer select-none",children:"Analyze Full Video (Realtime Tracking)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Video Generation"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"generateVideo",checked:it,onChange:$e=>Ce($e.target.checked),className:"h-4 w-4"}),c.jsx("label",{htmlFor:"generateVideo",className:"text-sm cursor-pointer select-none",children:"Generate Annotated Video File"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Remote Server URL (RunPod / Kaggle)"}),c.jsx("div",{className:"flex gap-2",children:c.jsx("input",{type:"text",placeholder:"https://xyz.ngrok-free.app",value:Me,onChange:$e=>ce($e.target.value),className:"flex-1 text-sm bg-background border rounded px-2 py-1"})}),c.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Leave empty for local processing."})]}),c.jsxs(te,{onClick:Ke,disabled:!t,className:"w-full",children:[c.jsx(hI,{className:"w-4 h-4 mr-2"}),"Run Analysis"]})]}),c.jsx(te,{variant:"secondary",size:"icon",onClick:()=>_e(!Be),className:"absolute top-4 right-4 z-40",children:c.jsx(fI,{className:"w-4 h-4"})}),!re&&c.jsx("div",{className:"absolute bottom-0 left-0 w-full z-[60]",children:c.jsx(a0e,{duration:K,currentTime:x,events:r,variant:v,onSeek:$e=>{Number.isFinite($e)?(T.current&&(T.current.currentTime=$e),l==null||l($e)):console.warn(" Ignored Timeline seek with non-finite value:",$e)}})}),ve&&c.jsxs(c.Fragment,{children:[y&&c.jsx(A9,{events:r}),c.jsx(N8,{}),c.jsx(P8,{})]})]})};function c0e(t,e){if(t.length<4||e.length<4||t.length!==e.length)return null;const r=_D(t),n=_D(e),i=t.map(g=>$c(g,r)),s=e.map(g=>$c(g,n)),a=i.length,o=[],l=[];for(let g=0;g<a;g++){const{x,y:v}=i[g],{x:y,y:w}=s[g];o.push([x,v,1,0,0,0,-x*y,-v*y]),l.push(y),o.push([0,0,0,x,v,1,-x*w,-v*w]),l.push(w)}const u=u0e(o),d=LS(u,o),A=d0e(u,l),f=A0e(d,A);if(!f)return null;const h=[[f[0],f[1],f[2]],[f[3],f[4],f[5]],[f[6],f[7],1]],m=f9(n);if(!m)return null;const p=LS(m,h);return LS(p,r)}function _D(t){const e=t.length;let r=0,n=0;for(const a of t)r+=a.x,n+=a.y;r/=e,n/=e;let i=0;for(const a of t){const o=a.x-r,l=a.y-n;i+=Math.sqrt(o*o+l*l)}i/=e;const s=i>1e-10?Math.sqrt(2)/i:1;return[[s,0,-s*r],[0,s,-s*n],[0,0,1]]}function u0e(t){const e=t.length,r=t[0].length,n=Array.from({length:r},()=>new Array(e).fill(0));for(let i=0;i<e;i++)for(let s=0;s<r;s++)n[s][i]=t[i][s];return n}function LS(t,e){const r=t.length,n=t[0].length,i=e[0].length,s=Array.from({length:r},()=>new Array(i).fill(0));for(let a=0;a<r;a++)for(let o=0;o<i;o++)for(let l=0;l<n;l++)s[a][o]+=t[a][l]*e[l][o];return s}function d0e(t,e){const r=t.length,n=t[0].length,i=new Array(r).fill(0);for(let s=0;s<r;s++)for(let a=0;a<n;a++)i[s]+=t[s][a]*e[a];return i}function $c(t,e){const[r,n,i]=e[0],[s,a,o]=e[1],[l,u,d]=e[2],A=l*t.x+u*t.y+d;return{x:(r*t.x+n*t.y+i)/A,y:(s*t.x+a*t.y+o)/A}}function A0e(t,e){const r=e.length;for(let i=0;i<r;i++){let s=i;for(let a=i+1;a<r;a++)Math.abs(t[a][i])>Math.abs(t[s][i])&&(s=a);if([t[i],t[s]]=[t[s],t[i]],[e[i],e[s]]=[e[s],e[i]],Math.abs(t[i][i])<1e-10)return null;for(let a=i+1;a<r;a++){const o=t[a][i]/t[i][i];e[a]-=o*e[i];for(let l=i;l<r;l++)t[a][l]-=o*t[i][l]}}const n=new Array(r).fill(0);for(let i=r-1;i>=0;i--){let s=0;for(let a=i+1;a<r;a++)s+=t[i][a]*n[a];n[i]=(e[i]-s)/t[i][i]}return n}function f9(t){const[[e,r,n],[i,s,a],[o,l,u]]=t,d=e*(s*u-a*l)-r*(i*u-a*o)+n*(i*l-s*o);if(Math.abs(d)<1e-10)return null;const A=1/d;return[[(s*u-a*l)*A,(n*l-r*u)*A,(r*a-n*s)*A],[(a*o-i*u)*A,(e*u-n*o)*A,(n*i-e*a)*A],[(i*l-s*o)*A,(o*r-e*l)*A,(e*s-r*i)*A]]}const f0e=t=>{const[e,r]=E.useState([]),{setCalibrationMatrix:n}=Yr(),[i,s]=E.useState([]),[a,o]=E.useState(null),l=E.useMemo(()=>e.filter(w=>t>=w.startTime&&t<=w.endTime),[e,t]),u=E.useCallback(w=>{const b=`ann-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,S={...w,id:b};r(C=>[...C,S])},[]),d=E.useCallback((w,b)=>{r(S=>S.map(C=>{if(C.id!==w)return C;const T={...C,...b};return T.type!==C.type?(console.error("Cannot change annotation type"),C):T}))},[]),A=E.useCallback(w=>{r(b=>b.filter(S=>S.id!==w))},[]),f=E.useCallback(()=>{r([])},[]),h=E.useCallback(()=>JSON.stringify(e,null,2),[e]),m=E.useCallback(w=>{try{const b=JSON.parse(w);r(b)}catch(b){console.error("Failed to import annotations:",b)}},[]),p=E.useCallback(w=>{if(w.length>=4){const b=w.map(T=>T.src),S=w.map(T=>T.dst),C=c0e(b,S);o(C),n(C)}else o(null),n(null)},[n]),g=E.useCallback((w,b)=>{s(S=>{const C=[...S,{src:w,dst:b}];return p(C),C})},[p]),x=E.useCallback(w=>{s(w),p(w)},[p]),v=E.useCallback(()=>{s([]),o(null),n(null)},[n]),y=E.useCallback(()=>{s(w=>{const b=w.slice(0,-1);return p(b),b})},[p]);return{annotations:e,activeAnnotations:l,calibration:{pairs:i,matrix:a},addAnnotation:u,updateAnnotation:d,deleteAnnotation:A,clearAnnotations:f,addCalibrationPair:g,removeLastCalibrationPair:y,setCalibrationPairs:x,clearCalibration:v,exportAnnotations:h,importAnnotations:m}},h9=({annotations:t,videoWidth:e,videoHeight:r,calibrationMatrix:n,calibrationPoints:i,onAnnotationClick:s})=>{const a=o=>{var p,g,x;const{id:l,type:u,style:d}=o,A={stroke:d.color,strokeWidth:d.strokeWidth,opacity:d.opacity,fill:"none",strokeDasharray:d.dashed?"8,4":"none",className:d.glow?"drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]":"",onClick:()=>s==null?void 0:s(l),style:{cursor:s?"pointer":"default"}},f=n?f9(n):null,h=v=>f?$c(v,f):v,m=(v,y,w,b)=>{if(!f){const B=w*10;return c.jsx("circle",{cx:v,cy:y,r:B,...A,fill:d.color,fillOpacity:d.fillOpacity||.2},l)}const S=[],C=32;for(let B=0;B<=C;B++){const _=B/C*Math.PI*2,I=v+w*Math.cos(_),L=y+w*Math.sin(_);S.push(h({x:I,y:L}))}const T=`M ${S[0].x} ${S[0].y} `+S.slice(1).map(B=>`L ${B.x} ${B.y}`).join(" ");return c.jsx("path",{d:T,...A,fill:d.color,fillOpacity:d.fillOpacity||.2},l)};switch(u){case"arrow":{let{x1:v,y1:y,x2:w,y2:b}=o.data;if(o.pitchCoords&&o.pitchCoords.endX!==void 0&&o.pitchCoords.endY!==void 0&&f){const B=h({x:o.pitchCoords.x,y:o.pitchCoords.y}),_=h({x:o.pitchCoords.endX,y:o.pitchCoords.endY});v=B.x,y=B.y,w=_.x,b=_.y}const S=Math.atan2(b-y,w-v),C=15,T=Math.PI/6;return c.jsxs("g",{...A,children:[c.jsx("line",{x1:v,y1:y,x2:w,y2:b}),c.jsx("line",{x1:w,y1:b,x2:w-C*Math.cos(S-T),y2:b-C*Math.sin(S-T)}),c.jsx("line",{x1:w,y1:b,x2:w-C*Math.cos(S+T),y2:b-C*Math.sin(S+T)})]},l)}case"circle":{if(o.pitchCoords&&f){const v=o.data.radius/10;return m(o.pitchCoords.x,o.pitchCoords.y,v)}return c.jsx("circle",{...A,cx:o.data.cx,cy:o.data.cy,r:o.data.radius,fill:d.color,fillOpacity:d.fillOpacity||.1},l)}case"spotlight":{const{radius:v}=o.data,y=((p=o.pitchCoords)==null?void 0:p.x)||0,w=((g=o.pitchCoords)==null?void 0:g.y)||0;if(!f)return null;const b=h({x:y,y:w}),S=v/10,C=m(y,w,S),T={x:b.x,y:b.y-100};return c.jsxs("g",{children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:`grad-${l}`,x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:d.color,stopOpacity:.6}),c.jsx("stop",{offset:"100%",stopColor:d.color,stopOpacity:0})]})}),C,c.jsx("path",{d:`M ${b.x-30} ${b.y} L ${T.x-20} ${T.y} L ${T.x+20} ${T.y} L ${b.x+30} ${b.y} Z`,fill:`url(#grad-${l})`,stroke:"none",style:{filter:"blur(4px)"}})]},l)}case"zone":{const{points:v}=o.data;let y=v;if((x=o.pitchCoords)!=null&&x.points&&f&&(y=o.pitchCoords.points.map(b=>h(b))),y.length<3)return null;const w=`M ${y[0].x} ${y[0].y} `+y.slice(1).map(b=>`L ${b.x} ${b.y}`).join(" ")+" Z";return c.jsx("path",{...A,d:w,fill:d.color,fillOpacity:d.fillOpacity||.3,strokeDasharray:d.dashed?"10,5":"none"},l)}case"marker":{let{x:v,y,label:w}=o.data;if(o.pitchCoords&&f){const b=h({x:o.pitchCoords.x,y:o.pitchCoords.y});v=b.x,y=b.y}return c.jsxs("g",{...A,children:[c.jsx("circle",{cx:v,cy:y,r:6,fill:d.color,stroke:"white",strokeWidth:"2"}),w&&c.jsx("text",{x:v,y:y-12,fill:"white",fontSize:"12",fontWeight:"bold",textAnchor:"middle",style:{filter:"drop-shadow(0 0 4px black)"},children:w})]},l)}case"rectangle":{let{x:v,y,width:w,height:b}=o.data;if(o.pitchCoords&&o.pitchCoords.endX!==void 0&&o.pitchCoords.endY!==void 0&&f){const S=h({x:o.pitchCoords.x,y:o.pitchCoords.y}),C=h({x:o.pitchCoords.endX,y:o.pitchCoords.endY});v=Math.min(S.x,C.x),y=Math.min(S.y,C.y),w=Math.abs(C.x-S.x),b=Math.abs(C.y-S.y)}return c.jsx("rect",{...A,x:v,y,width:w,height:b,fill:d.color,fillOpacity:d.fillOpacity||.1},l)}case"text":{const{x:v,y,text:w,fontSize:b}=o.data;return c.jsx("text",{...A,x:v,y,fontSize:b,fill:d.color,stroke:"none",fontFamily:"Arial, sans-serif",fontWeight:"bold",textAnchor:"middle",children:w},l)}case"player-track":{const{points:v}=o.data;if(v.length<2)return null;const y=v.map((w,b)=>`${b===0?"M":"L"} ${w.x} ${w.y}`).join(" ");return c.jsxs("g",{...A,children:[c.jsx("path",{d:y,fill:"none"}),v.map((w,b)=>c.jsx("circle",{cx:w.x,cy:w.y,r:3,fill:d.color,opacity:d.opacity},`${l}-point-${b}`))]},l)}case"ruler":{let{x1:v,y1:y,x2:w,y2:b}=o.data,S;if(o.pitchCoords&&o.pitchCoords.endX!==void 0&&o.pitchCoords.endY!==void 0&&f){const C=h({x:o.pitchCoords.x,y:o.pitchCoords.y}),T=h({x:o.pitchCoords.endX,y:o.pitchCoords.endY});v=C.x,y=C.y,w=T.x,b=T.y;const B=o.pitchCoords.endX-o.pitchCoords.x,_=o.pitchCoords.endY-o.pitchCoords.y;S=Math.sqrt(B*B+_*_).toFixed(1)}else{const C=w-v,T=b-y;S=(Math.sqrt(C*C+T*T)/10).toFixed(1)}return c.jsxs("g",{...A,children:[c.jsx("line",{x1:v,y1:y,x2:w,y2:b,strokeDasharray:"5,5"}),c.jsx("circle",{cx:v,cy:y,r:4,fill:d.color}),c.jsx("circle",{cx:w,cy:b,r:4,fill:d.color}),c.jsxs("text",{x:(v+w)/2,y:(y+b)/2-12,fill:"black",fontSize:"14",fontWeight:"bold",textAnchor:"middle",style:{filter:"drop-shadow(0 0 2px white)"},children:[S,"m"]}),c.jsxs("text",{x:(v+w)/2,y:(y+b)/2-12,fill:d.color,fontSize:"14",fontWeight:"bold",textAnchor:"middle",children:[S,"m"]})]},l)}default:return null}};return c.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:c.jsxs("svg",{className:"max-w-full max-h-full",viewBox:`0 0 ${e} ${r}`,preserveAspectRatio:"xMidYMid meet",style:{pointerEvents:s?"auto":"none",aspectRatio:`${e} / ${r}`,width:"100%",height:"100%",objectFit:"contain"},children:[t.map(a),i&&i.map((o,l)=>c.jsxs("g",{children:[c.jsx("circle",{cx:o.x,cy:o.y,r:4,fill:"#eab308",stroke:"white",strokeWidth:"1.5"}),c.jsxs("text",{x:o.x,y:o.y+15,fill:"#eab308",fontSize:"10",fontWeight:"bold",textAnchor:"middle",style:{filter:"drop-shadow(0 0 2px black)"},children:["PT ",l+1]})]},`calib-pt-${l}`))]})})},p9=(t,e,r)=>{const n=t.width,i=t.height,s=n/i,a=e/r;let o,l,u,d;return a>s?(o=n,l=n/a,u=0,d=(i-l)/2):(l=i,o=i*a,u=(n-o)/2,d=0),{renderWidth:o,renderHeight:l,offsetX:u,offsetY:d}},KB=(t,e,r,n,i)=>{const{renderWidth:s,renderHeight:a,offsetX:o,offsetY:l}=p9(r,n,i),u=t-r.left,d=e-r.top;return{x:(u-o)/s*n,y:(d-l)/a*i,isOutOfBounds:u<o||u>o+s||d<l||d>l+a}},h0e=(t,e,r,n)=>{const{renderWidth:i,renderHeight:s,offsetX:a,offsetY:o}=p9(e,r,n),l=a+t.x/r*i,u=o+t.y/n*s;return{left:`${l/e.width*100}%`,top:`${u/e.height*100}%`}},p0e=({activeTool:t,color:e,strokeWidth:r,videoWidth:n,videoHeight:i,currentTime:s,calibration:a,onAddAnnotation:o})=>{const[l,u]=E.useState(!1),[d,A]=E.useState(null),[f,h]=E.useState(null),m=E.useRef(null),p=y=>{if(console.log("InteractionLayer: MouseDown",{activeTool:t,clientX:y.clientX,clientY:y.clientY}),t==="select"||t==="calibration")return;const w=m.current.getBoundingClientRect(),b=KB(y.clientX,y.clientY,w,n,i);if(console.log("InteractionLayer: calculated coords",b),b.isOutOfBounds){console.log("InteractionLayer: Out of bounds");return}A(b),h(b),u(!0)},g=y=>{if(!l||!d)return;const w=KB(y.clientX,y.clientY,m.current.getBoundingClientRect(),n,i);h(w)},x=()=>{if(!l||!d||!f)return;const y={color:e,strokeWidth:r,opacity:1,fillOpacity:.25,glow:t==="spotlight"||t==="arrow",dashed:t==="ruler"};let w=null,b=null;if(a.matrix){const S=$c(d,a.matrix),C=$c(f,a.matrix);if(t==="arrow")w={type:"arrow",data:{x1:d.x,y1:d.y,x2:f.x,y2:f.y}},b={x:S.x,y:S.y,endX:C.x,endY:C.y};else if(t==="circle"){const T=Math.sqrt(Math.pow(C.x-S.x,2)+Math.pow(C.y-S.y,2));w={type:"circle",data:{cx:d.x,cy:d.y,radius:T*10}},b={x:S.x,y:S.y}}else if(t==="spotlight"){const T=Math.sqrt(Math.pow(C.x-S.x,2)+Math.pow(C.y-S.y,2));w={type:"spotlight",data:{cx:d.x,cy:d.y,radius:T*12}},b={x:S.x,y:S.y}}else if(t==="zone"){const T=Math.min(S.x,C.x),B=Math.max(S.x,C.x),_=Math.min(S.y,C.y),I=Math.max(S.y,C.y),L=[{x:T,y:_},{x:B,y:_},{x:B,y:I},{x:T,y:I}];w={type:"zone",data:{points:[]}},b={points:L}}else t==="marker"&&(w={type:"marker",data:{x:f.x,y:f.y,label:"INFO"}},b={x:C.x,y:C.y})}w&&o({...w,startTime:s,endTime:s+8,style:y,pitchCoords:b}),u(!1),A(null)},v=Q.useMemo(()=>{if(!l||!d||!f)return null;const y={color:e,strokeWidth:r,opacity:.7,fillOpacity:.2,glow:t==="spotlight"||t==="arrow",dashed:t==="ruler"};let w={},b=null;if(a.matrix){const S=$c(d,a.matrix),C=$c(f,a.matrix);if(t==="arrow")w={x1:d.x,y1:d.y,x2:f.x,y2:f.y},b={x:S.x,y:S.y,endX:C.x,endY:C.y};else if(t==="circle"){const T=Math.sqrt(Math.pow(C.x-S.x,2)+Math.pow(C.y-S.y,2));w={cx:d.x,cy:d.y,radius:T*10},b={x:S.x,y:S.y}}else if(t==="spotlight"){const T=Math.sqrt(Math.pow(C.x-S.x,2)+Math.pow(C.y-S.y,2));w={cx:d.x,cy:d.y,radius:T*12},b={x:S.x,y:S.y}}else if(t==="zone"){const T=Math.min(S.x,C.x),B=Math.max(S.x,C.x),_=Math.min(S.y,C.y),I=Math.max(S.y,C.y),L=[{x:T,y:_},{x:B,y:_},{x:B,y:I},{x:T,y:I}];w={points:[]},b={points:L}}else t==="marker"?(w={x:f.x,y:f.y,label:"INFO"},b={x:C.x,y:C.y}):t==="ruler"&&(w={x1:d.x,y1:d.y,x2:f.x,y2:f.y},b={x:S.x,y:S.y,endX:C.x,endY:C.y})}else t==="arrow"?w={x1:d.x,y1:d.y,x2:f.x,y2:f.y}:t==="circle"?w={cx:d.x,cy:d.y,radius:Math.hypot(f.x-d.x,f.y-d.y)}:t==="ruler"&&(w={x1:d.x,y1:d.y,x2:f.x,y2:f.y});return Object.keys(w).length===0&&!b?null:{id:"preview",type:t,data:w,style:y,pitchCoords:b,startTime:0,endTime:0}},[l,d,f,t,e,r,a.matrix]);return c.jsx("div",{ref:m,className:"absolute inset-0 z-[100] cursor-crosshair",onMouseDown:p,onMouseMove:g,onMouseUp:x,children:c.jsx(h9,{annotations:v?[v]:[],videoWidth:n,videoHeight:i,calibrationPoints:a.pairs.map(y=>y.src),calibrationMatrix:a.matrix})})},m0e=({trackingData:t,currentTime:e,videoWidth:r,videoHeight:n,onTrackPlayer:i,onClose:s})=>{const[a,o]=E.useState(null),[l,u]=E.useState(!1),[d,A]=E.useState([]),f=()=>{var w;if(!(t!=null&&t.tracks))return[];const x=((w=t.metadata)==null?void 0:w.fps)||30,v=Math.floor(e*x),y=[];return Object.entries(t.tracks).forEach(([b,S])=>{const C=S.find(T=>T.frame===v);C&&y.push({id:parseInt(b),x:C.x,y:C.y,team:C.team})}),y},h=x=>{if(!(t!=null&&t.tracks))return;const v=t.tracks[x];if(!v)return;const y=v.map(w=>({time:w.timestamp,x:w.x,y:w.y}));o(x),i(x,y)},m=x=>{if(!l)return;const y=x.currentTarget.getBoundingClientRect(),w=(x.clientX-y.left)/y.width*r,b=(x.clientY-y.top)/y.height*n,S={time:e,x:w,y:b},C=[...d,S];A(C)},p=()=>{if(d.length<2)return;const x=Date.now();i(x,d),A([]),u(!1)},g=f();return c.jsxs("div",{className:"absolute top-0 left-0 w-full h-full z-40",children:[c.jsxs("div",{className:"absolute top-4 right-4 bg-black/80 backdrop-blur-sm rounded-lg p-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"text-white font-semibold text-sm",children:"Player Tracker"}),c.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"h-6 w-6 text-white hover:bg-white/20",children:c.jsx(At,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:l?"ghost":"default",size:"sm",onClick:()=>u(!1),className:"flex-1 text-xs",children:"AI Track"}),c.jsx(te,{variant:l?"default":"ghost",size:"sm",onClick:()=>u(!0),className:"flex-1 text-xs",children:"Manual"})]}),!l&&c.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-1",children:[c.jsx("p",{className:"text-white/70 text-xs mb-1",children:"Select a player:"}),g.map(x=>c.jsxs("button",{onClick:()=>h(x.id),className:`w-full px-2 py-1 rounded text-xs text-left ${a===x.id?"bg-blue-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:["Player ",x.id," (",x.team,")"]},x.id)),g.length===0&&c.jsx("p",{className:"text-white/50 text-xs",children:"No players detected at this time"})]}),l&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-white/70 text-xs",children:"Click on the player to track them. Navigate frame-by-frame and click again."}),c.jsxs("p",{className:"text-white text-xs",children:["Points: ",d.length]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{size:"sm",onClick:p,disabled:d.length<2,className:"flex-1 text-xs",children:"Save Track"}),c.jsx(te,{variant:"ghost",size:"sm",onClick:()=>A([]),className:"flex-1 text-xs",children:"Clear"})]})]})]}),l&&c.jsx("svg",{className:"absolute top-0 left-0 w-full h-full cursor-crosshair",viewBox:`0 0 ${r} ${n}`,preserveAspectRatio:"xMidYMid meet",onClick:m,children:d.map((x,v)=>c.jsx("circle",{cx:x.x,cy:x.y,r:5,fill:"#00FF00",stroke:"#FFFFFF",strokeWidth:2},v))}),!l&&c.jsx("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",viewBox:`0 0 ${r} ${n}`,preserveAspectRatio:"xMidYMid meet",children:g.map(x=>c.jsxs("g",{children:[c.jsx("circle",{cx:x.x,cy:x.y,r:20,fill:"none",stroke:a===x.id?"#00FF00":"#FFFF00",strokeWidth:2,opacity:.7}),c.jsx(Wi,{x:x.x-10,y:x.y-10,width:20,height:20,className:"text-yellow-400"})]},x.id))})]})},g0e=[{x:0,y:0,name:"Corner: Top-Left"},{x:105,y:0,name:"Corner: Top-Right"},{x:105,y:68,name:"Corner: Bottom-Right"},{x:0,y:68,name:"Corner: Bottom-Left"},{x:52.5,y:0,name:"Halfway: Top"},{x:52.5,y:34,name:"Halfway: Center"},{x:52.5,y:68,name:"Halfway: Bottom"},{x:43.35,y:34,name:"Center Circle: Left"},{x:61.65,y:34,name:"Center Circle: Right"},{x:52.5,y:24.85,name:"Center Circle: Top"},{x:52.5,y:43.15,name:"Center Circle: Bottom"},{x:11,y:34,name:"Left Penalty Spot"},{x:0,y:13.84,name:"Left Penalty: Top"},{x:0,y:54.16,name:"Left Penalty: Bottom"},{x:16.5,y:13.84,name:"Left Penalty Area: Far-Top"},{x:16.5,y:54.16,name:"Left Penalty Area: Far-Bottom"},{x:0,y:24.84,name:"Left Goal Area: Top"},{x:0,y:43.16,name:"Left Goal Area: Bottom"},{x:5.5,y:24.84,name:"Left Goal Area: Far-Top"},{x:5.5,y:43.16,name:"Left Goal Area: Far-Bottom"},{x:94,y:34,name:"Right Penalty Spot"},{x:105,y:13.84,name:"Right Penalty: Top"},{x:105,y:54.16,name:"Right Penalty: Bottom"},{x:88.5,y:13.84,name:"Right Penalty Area: Far-Top"},{x:88.5,y:54.16,name:"Right Penalty Area: Far-Bottom"},{x:105,y:24.84,name:"Right Goal Area: Top"},{x:105,y:43.16,name:"Right Goal Area: Bottom"},{x:99.5,y:24.84,name:"Right Goal Area: Far-Top"},{x:99.5,y:43.16,name:"Right Goal Area: Far-Bottom"},{x:26.25,y:0,name:"Top Touchline: 1/4"},{x:78.75,y:0,name:"Top Touchline: 3/4"},{x:26.25,y:68,name:"Bottom Touchline: 1/4"},{x:78.75,y:68,name:"Bottom Touchline: 3/4"}];function VB({className:t="",onPointClick:e,onPlayerClick:r,selectedPoint:n,playerPositions:i=[],calibrationPoints:s=[],showLandmarks:a=!0}){const o=E.useRef(null),[l,u]=E.useState(null),[d,A]=E.useState(null),f=p=>{if(!e||!o.current)return;const g=o.current.getBoundingClientRect(),x=(p.clientX-g.left)/g.width*105,v=(p.clientY-g.top)/g.height*68;e({x,y:v})},h=p=>{if(!o.current)return;const g=o.current.getBoundingClientRect(),x=(p.clientX-g.left)/g.width*105,v=(p.clientY-g.top)/g.height*68;u({x,y:v})},m=(p,g)=>{g.stopPropagation(),e&&e({x:p.x,y:p.y})};return c.jsxs("div",{className:`relative aspect-[105/68] rounded-xl overflow-hidden shadow-2xl ${t}`,children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 via-gray-700 to-gray-900 p-4",children:c.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden shadow-inner",children:[c.jsxs("svg",{ref:o,viewBox:"0 0 105 68",className:"w-full h-full cursor-crosshair",onClick:f,onMouseMove:h,onMouseLeave:()=>u(null),children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"grassGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#1a5c2e"}),c.jsx("stop",{offset:"50%",stopColor:"#247a3d"}),c.jsx("stop",{offset:"100%",stopColor:"#1a5c2e"})]}),c.jsxs("radialGradient",{id:"spotlight",cx:"50%",cy:"50%",children:[c.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.08)"}),c.jsx("stop",{offset:"70%",stopColor:"rgba(255,255,255,0)"})]}),c.jsx("filter",{id:"shadow",children:c.jsx("feDropShadow",{dx:"0",dy:"0.2",stdDeviation:"0.3",floodOpacity:"0.5"})}),c.jsxs("filter",{id:"glow",children:[c.jsx("feGaussianBlur",{stdDeviation:"0.8",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsx("pattern",{id:"netPattern",width:"1.5",height:"1.5",patternUnits:"userSpaceOnUse",children:c.jsx("path",{d:"M 0 0 L 1.5 1.5 M 1.5 0 L 0 1.5",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.1"})})]}),c.jsx("rect",{x:"0",y:"0",width:"105",height:"68",fill:"url(#grassGradient)"}),[...Array(15)].map((p,g)=>c.jsx("rect",{x:g*7,y:"0",width:"7",height:"68",fill:g%2===0?"rgba(26,92,46,0.3)":"rgba(36,122,61,0.3)"},`stripe-${g}`)),c.jsx("rect",{x:"0",y:"0",width:"105",height:"68",fill:"url(#spotlight)"}),c.jsx("rect",{x:"2",y:"2",width:"101",height:"64",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("line",{x1:"52.5",y1:"2",x2:"52.5",y2:"66",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("circle",{cx:"52.5",cy:"34",r:"9.15",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("circle",{cx:"52.5",cy:"34",r:"0.4",fill:"white",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("rect",{x:"2",y:"13.5",width:"16.5",height:"41",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("rect",{x:"86.5",y:"13.5",width:"16.5",height:"41",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("rect",{x:"2",y:"23.5",width:"5.5",height:"21",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("rect",{x:"97",y:"23.5",width:"5.5",height:"21",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("circle",{cx:"13",cy:"34",r:"0.4",fill:"white",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("circle",{cx:"92",cy:"34",r:"0.4",fill:"white",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("path",{d:"M 18.5 24.85 A 9.15 9.15 0 0 1 18.5 43.15",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("path",{d:"M 86.5 24.85 A 9.15 9.15 0 0 0 86.5 43.15",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95",filter:"url(#shadow)"}),c.jsx("path",{d:"M 2 3 A 1 1 0 0 0 3 2",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95"}),c.jsx("path",{d:"M 2 65 A 1 1 0 0 1 3 66",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95"}),c.jsx("path",{d:"M 103 3 A 1 1 0 0 1 102 2",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95"}),c.jsx("path",{d:"M 103 65 A 1 1 0 0 0 102 66",fill:"none",stroke:"white",strokeWidth:"0.25",opacity:"0.95"}),c.jsxs("g",{filter:"url(#shadow)",children:[c.jsx("line",{x1:"2.5",y1:"2.5",x2:"2.5",y2:"0.5",stroke:"#888",strokeWidth:"0.15"}),c.jsx("path",{d:"M 2.5 0.5 L 3.5 1 L 2.5 1.5 Z",fill:"#fbbf24"}),c.jsx("line",{x1:"2.5",y1:"65.5",x2:"2.5",y2:"67.5",stroke:"#888",strokeWidth:"0.15"}),c.jsx("path",{d:"M 2.5 67.5 L 3.5 67 L 2.5 66.5 Z",fill:"#fbbf24"}),c.jsx("line",{x1:"102.5",y1:"2.5",x2:"102.5",y2:"0.5",stroke:"#888",strokeWidth:"0.15"}),c.jsx("path",{d:"M 102.5 0.5 L 101.5 1 L 102.5 1.5 Z",fill:"#fbbf24"}),c.jsx("line",{x1:"102.5",y1:"65.5",x2:"102.5",y2:"67.5",stroke:"#888",strokeWidth:"0.15"}),c.jsx("path",{d:"M 102.5 67.5 L 101.5 67 L 102.5 66.5 Z",fill:"#fbbf24"})]}),c.jsxs("g",{filter:"url(#shadow)",children:[c.jsx("rect",{x:"-2",y:"26.5",width:"4",height:"15",fill:"none",stroke:"white",strokeWidth:"0.3",opacity:"0.9"}),c.jsx("rect",{x:"-2",y:"26.5",width:"4",height:"15",fill:"url(#netPattern)",opacity:"0.4"}),c.jsx("line",{x1:"-2",y1:"26.5",x2:"2",y2:"28",stroke:"white",strokeWidth:"0.15",opacity:"0.5"}),c.jsx("line",{x1:"-2",y1:"41.5",x2:"2",y2:"40",stroke:"white",strokeWidth:"0.15",opacity:"0.5"})]}),c.jsxs("g",{filter:"url(#shadow)",children:[c.jsx("rect",{x:"103",y:"26.5",width:"4",height:"15",fill:"none",stroke:"white",strokeWidth:"0.3",opacity:"0.9"}),c.jsx("rect",{x:"103",y:"26.5",width:"4",height:"15",fill:"url(#netPattern)",opacity:"0.4"}),c.jsx("line",{x1:"107",y1:"26.5",x2:"103",y2:"28",stroke:"white",strokeWidth:"0.15",opacity:"0.5"}),c.jsx("line",{x1:"107",y1:"41.5",x2:"103",y2:"40",stroke:"white",strokeWidth:"0.15",opacity:"0.5"})]}),i.map((p,g)=>{const x=p.team==="BALL";return c.jsxs("g",{filter:"url(#shadow)",children:[c.jsx("circle",{cx:p.x,cy:p.y,r:x?"0.8":"1.2",fill:x?"#fbbf24":p.team==="A"?"#ef4444":"#3b82f6",stroke:"white",strokeWidth:x?"0.15":"0.25",className:"cursor-pointer transition-all hover:r-[1.5]",onClick:v=>{v.stopPropagation(),r&&r(p)}}),!x&&c.jsx("circle",{cx:p.x,cy:p.y,r:"1.8",fill:"none",stroke:p.team==="A"?"#ef4444":"#3b82f6",strokeWidth:"0.15",opacity:"0.3"}),x&&c.jsx("circle",{cx:p.x,cy:p.y,r:"1.2",fill:"none",stroke:"#fbbf24",strokeWidth:"0.1",opacity:"0.5",className:"animate-pulse"})]},`player-${g}`)}),s.map((p,g)=>c.jsxs("g",{filter:"url(#shadow)",children:[c.jsx("circle",{cx:p.pitch.x,cy:p.pitch.y,r:"1.5",fill:"#eab308",stroke:"white",strokeWidth:"0.3"}),c.jsx("text",{x:p.pitch.x,y:p.pitch.y,dy:"0.5",textAnchor:"middle",fontSize:"1.5",fill:"black",fontWeight:"bold",children:p.label})]},`calib-${g}`)),a&&g0e.map((p,g)=>c.jsxs("g",{className:"cursor-pointer",onClick:x=>m(p,x),onMouseEnter:()=>A(p.name),onMouseLeave:()=>A(null),children:[c.jsx("circle",{cx:p.x,cy:p.y,r:"1.2",fill:d===p.name?"#22c55e":"rgba(59, 130, 246, 0.8)",stroke:"white",strokeWidth:"0.2",className:"transition-all duration-150"}),d===p.name&&c.jsx("circle",{cx:p.x,cy:p.y,r:"2",fill:"none",stroke:"#22c55e",strokeWidth:"0.3",className:"animate-pulse"})]},`landmark-${g}`)),n&&c.jsxs("g",{filter:"url(#glow)",children:[c.jsx("circle",{cx:n.x,cy:n.y,r:"1.5",fill:"none",stroke:"#eab308",strokeWidth:"0.4",className:"animate-pulse"}),c.jsx("circle",{cx:n.x,cy:n.y,r:"2.5",fill:"none",stroke:"#eab308",strokeWidth:"0.2",opacity:"0.5",className:"animate-pulse"})]})]}),l&&c.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 backdrop-blur-sm text-white text-xs px-3 py-1.5 rounded-lg pointer-events-none border border-white/20 shadow-lg",children:c.jsxs("span",{className:"font-mono",children:["X: ",l.x.toFixed(1),"  Y: ",l.y.toFixed(1)]})}),d&&c.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-green-600/90 backdrop-blur-sm text-white text-xs px-3 py-1.5 rounded-lg pointer-events-none border border-white/30 shadow-lg font-medium",children:d})]})}),c.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 bg-yellow-200/20 blur-xl rounded-full"}),c.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 bg-yellow-200/20 blur-xl rounded-full"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 bg-yellow-200/20 blur-xl rounded-full"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-yellow-200/20 blur-xl rounded-full"})]})}const x0e={TLC:{x:0,y:0,name:"Top-Left Corner"},TRC:{x:105,y:0,name:"Top-Right Corner"},BLC:{x:0,y:68,name:"Bottom-Left Corner"},BRC:{x:105,y:68,name:"Bottom-Right Corner"},TMC:{x:52.5,y:0,name:"Halfway Line Top"},BMC:{x:52.5,y:68,name:"Halfway Line Bottom"},CC:{x:52.5,y:34,name:"Center Circle Center"},CCL:{x:43.35,y:34,name:"Center Circle Left"},CCR:{x:61.65,y:34,name:"Center Circle Right"},CCT:{x:52.5,y:24.85,name:"Center Circle Top"},CCB:{x:52.5,y:43.15,name:"Center Circle Bottom"},LPA_TL:{x:0,y:13.84,name:"Left Penalty Top-Left"},LPA_BL:{x:0,y:54.16,name:"Left Penalty Bottom-Left"},LPA_TR:{x:16.5,y:13.84,name:"Left Penalty Top-Right"},LPA_BR:{x:16.5,y:54.16,name:"Left Penalty Bottom-Right"},LPS:{x:11,y:34,name:"Left Penalty Spot"},RPA_TL:{x:88.5,y:13.84,name:"Right Penalty Top-Left"},RPA_BL:{x:88.5,y:54.16,name:"Right Penalty Bottom-Left"},RPA_TR:{x:105,y:13.84,name:"Right Penalty Top-Right"},RPA_BR:{x:105,y:54.16,name:"Right Penalty Bottom-Right"},RPS:{x:94,y:34,name:"Right Penalty Spot"},LGA_TL:{x:0,y:24.84,name:"Left Goal Area Top-Left"},LGA_BL:{x:0,y:43.16,name:"Left Goal Area Bottom-Left"},LGA_TR:{x:5.5,y:24.84,name:"Left Goal Area Top-Right"},LGA_BR:{x:5.5,y:43.16,name:"Left Goal Area Bottom-Right"},RGA_TL:{x:99.5,y:24.84,name:"Right Goal Area Top-Left"},RGA_BL:{x:99.5,y:43.16,name:"Right Goal Area Bottom-Left"},RGA_TR:{x:105,y:24.84,name:"Right Goal Area Top-Right"},RGA_BR:{x:105,y:43.16,name:"Right Goal Area Bottom-Right"}};async function v0e(t){const e=await fetch(`${hr}/api/detect-keypoints`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t})});if(!e.ok){const r=await e.json().catch(()=>({error:"Unknown error"}));throw new Error(r.error||`API request failed: ${e.status}`)}return e.json()}async function ND(t,e,r=!1){const n=new FormData;n.append("image",t),n.append("high_contrast",r?"true":"false");const i=await fetch(`${hr}/api/detect-players`,{method:"POST",body:n});if(!i.ok){const s=await i.json().catch(()=>({error:"Unknown error"}));throw new Error(s.error||`API request failed: ${i.status}`)}return i.json()}function y0e(t,e=.5){const r=[];for(const n of t){if(n.confidence<e)continue;const i=x0e[n.class];if(!i){console.warn(`Unknown keypoint class: ${n.class}`);continue}r.push({src:{x:n.x,y:n.y},dst:{x:i.x,y:i.y},class:n.class,confidence:n.confidence,isAutoDetected:!0})}return r.sort((n,i)=>i.confidence-n.confidence),r}const b0e=({videoUrl:t,isImage:e=!1,currentTime:r=0,onAddPair:n,onRemoveLast:i,onClear:s,onClose:a,currentPairs:o,onAutoDetect:l})=>{const[u,d]=E.useState(null),[A,f]=E.useState({w:0,h:0}),[h,m]=E.useState(!1),{setRealtimeDetections:p}=Yr(),[g,x]=E.useState(null),[v,y]=E.useState([]),[w,b]=E.useState([]),[S,C]=E.useState(!1),T=E.useRef(null),B=E.useRef(null),_=E.useRef(null),I=D=>{f({w:D.currentTarget.videoWidth,h:D.currentTarget.videoHeight}),D.currentTarget.currentTime=r},L=D=>{f({w:D.currentTarget.naturalWidth,h:D.currentTarget.naturalHeight})};E.useEffect(()=>{!e&&T.current&&r!==void 0&&(T.current.currentTime=r)},[r,e]),E.useEffect(()=>{o.length>=4&&w.length===0&&!h&&R()},[o.length]);const N=async()=>{const D=document.createElement("canvas");if(e&&B.current){D.width=B.current.naturalWidth,D.height=B.current.naturalHeight;const $=D.getContext("2d");if(!$)throw new Error("Could not get canvas context");$.drawImage(B.current,0,0)}else if(T.current){D.width=T.current.videoWidth,D.height=T.current.videoHeight;const $=D.getContext("2d");if(!$)throw new Error("Could not get canvas context");$.drawImage(T.current,0,0)}else throw new Error("No media element available");return D.toDataURL("image/jpeg",.9).split(",")[1]},R=async(D=o)=>{if(!(!t||D.length<4))try{const F=await N(),$=await ND(F,void 0,S);$.success&&(b($.players),p($.players))}catch(F){console.warn("On-demand player detection failed:",F)}},M=D=>{if(!_.current||A.w===0)return;const F=KB(D.clientX,D.clientY,_.current.getBoundingClientRect(),A.w,A.h);F.isOutOfBounds||d({x:F.x,y:F.y})},k=async()=>{m(!0),x(null);try{const D=await N(),F=await v0e(D);if(!F.predictions||F.predictions.length===0){x("No pitch keypoints detected. Try with a clearer view of the pitch.");return}const $=y0e(F.predictions,.3);if($.length===0){x("Detected keypoints could not be mapped to pitch coordinates.");return}y($),$.forEach(K=>n(K.src,K.dst));const U=await ND(D,void 0,S);U.success&&(b(U.players),p(U.players)),l&&l($.map(K=>({src:K.src,dst:K.dst})))}catch(D){console.error("Auto-detection failed:",D),x(D instanceof Error?D.message:"Detection failed. Check API configuration.")}finally{m(!1)}},O=(D,F,$,U)=>{if(!_.current||A.w===0)return null;const K=h0e(D,_.current.getBoundingClientRect(),A.w,A.h);return c.jsx("div",{className:`absolute w-5 h-5 ${$} rounded-full border border-white flex items-center justify-center text-[9px] font-bold shadow-lg -translate-x-1/2 -translate-y-1/2 z-20`,style:K,title:U?`Confidence: ${(U*100).toFixed(0)}%`:void 0,children:F},`${D.x}-${D.y}-${F}`)},j=D=>v.some(F=>Math.abs(F.src.x-D.src.x)<5&&Math.abs(F.src.y-D.src.y)<5);return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-8 backdrop-blur-md",children:c.jsxs(Fe,{className:"w-full max-w-6xl bg-zinc-950 border-zinc-800 text-white overflow-hidden flex flex-col h-[85vh]",children:[c.jsxs("div",{className:"p-4 border-b border-zinc-800 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h2",{className:"text-xl font-bold",children:["Calibration Step ",o.length+1]}),v.length>0&&c.jsxs("span",{className:"text-xs bg-green-600/20 text-green-400 px-2 py-1 rounded-full",children:[v.length," auto-detected"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mr-2 px-3 py-1.5 bg-zinc-900 rounded-md border border-zinc-800",children:[c.jsx("input",{type:"checkbox",id:"high-contrast",checked:S,onChange:D=>C(D.target.checked),className:"w-4 h-4 rounded border-zinc-700 bg-zinc-800 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:"high-contrast",className:"text-xs font-medium text-zinc-300 cursor-pointer",children:"High Contrast Teams"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"default",size:"sm",onClick:k,disabled:h||!t,className:"bg-purple-600 hover:bg-purple-700",children:h?c.jsxs(c.Fragment,{children:[c.jsx(bu,{className:"w-4 h-4 mr-2 animate-spin"}),"Detecting..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Yne,{className:"w-4 h-4 mr-2"}),"Auto-Detect"]})}),c.jsxs(te,{variant:"outline",size:"sm",onClick:i,disabled:o.length===0,children:[c.jsx(h8,{className:"w-4 h-4 mr-2"})," Undo"]}),c.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{s(),y([]),b([])},children:[c.jsx(po,{className:"w-4 h-4 mr-2"})," Reset"]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:a,children:c.jsx(At,{className:"w-5 h-5"})})]})]})]}),g&&c.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-900/30 border border-red-700 rounded-lg flex items-center gap-3",children:[c.jsx(Qu,{className:"w-5 h-5 text-red-400 shrink-0"}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"text-sm text-red-300",children:g})}),c.jsx(te,{variant:"ghost",size:"sm",onClick:()=>x(null),children:c.jsx(At,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex-1 flex gap-6 p-6 overflow-hidden bg-black/50",children:[c.jsxs("div",{ref:_,className:"relative flex-1 bg-zinc-900 rounded-xl overflow-hidden cursor-crosshair border border-zinc-800",onClick:M,children:[t&&(e?c.jsx("img",{ref:B,src:t,onLoad:L,className:"w-full h-full object-contain pointer-events-none",alt:"Calibration",crossOrigin:"anonymous"}):c.jsx("video",{ref:T,src:t,onLoadedMetadata:I,className:"w-full h-full object-contain pointer-events-none",crossOrigin:"anonymous"})),h&&c.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-30",children:c.jsxs("div",{className:"text-center",children:[c.jsx(bu,{className:"w-12 h-12 text-purple-400 animate-spin mx-auto mb-3"}),c.jsx("p",{className:"text-white font-medium",children:"Detecting pitch keypoints..."}),c.jsx("p",{className:"text-zinc-400 text-sm",children:"Using Roboflow AI"})]})}),u&&O(u,"!","bg-yellow-500 animate-pulse"),o.map((D,F)=>{var U;const $=j(D);return O(D.src,F+1,$?"bg-green-500":"bg-blue-600",$?(U=v.find(K=>Math.abs(K.src.x-D.src.x)<5))==null?void 0:U.confidence:void 0)})]}),c.jsxs("div",{className:"w-[420px] flex flex-col gap-4",children:[c.jsx(VB,{className:"flex-1",onPointClick:D=>{u&&(n(u,D),d(null))},calibrationPoints:o.map((D,F)=>({pitch:D.dst,label:F+1})),playerPositions:w.map(D=>({x:D.pitch_coords?D.pitch_coords[0]:-1,y:D.pitch_coords?D.pitch_coords[1]:-1,team:D.team})).filter(D=>D.x!==-1)}),c.jsxs("div",{className:"bg-zinc-900/50 rounded-lg p-3 text-xs",children:[c.jsx("p",{className:"text-zinc-400 mb-2 font-medium",children:"Legend:"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border border-white"}),c.jsx("span",{className:"text-zinc-300",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full border border-white"}),c.jsx("span",{className:"text-zinc-300",children:"Manual"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full border border-white"}),c.jsx("span",{className:"text-zinc-300",children:"Pending"})]})]})]})]})]}),c.jsxs("div",{className:"p-4 bg-zinc-950 border-t border-zinc-800 flex justify-between items-center",children:[c.jsx("p",{className:"text-xs text-zinc-500",children:o.length>=4?` ${o.length} points mapped - calibration ready`:`Need at least 4 points (${4-o.length} more required)`}),c.jsx(te,{disabled:o.length<4,onClick:a,className:"px-12 bg-blue-600 hover:bg-blue-700",children:"Save Calibration"})]})]})})},w0e=({activeTool:t,onToolChange:e,color:r,onColorChange:n,strokeWidth:i,onStrokeWidthChange:s,onClear:a,onUndo:o,onExport:l,onImport:u})=>{const d=[{name:"Selection",tools:[{id:"select",icon:c.jsx(Cne,{className:"w-4 h-4"}),label:"Selection"},{id:"calibration",icon:c.jsx(Wi,{className:"w-4 h-4 text-yellow-500"}),label:"Calibration"}]},{name:"Tactical Tools",tools:[{id:"spotlight",icon:c.jsx(cI,{className:"w-4 h-4 text-cyan-400"}),label:"Spotlight"},{id:"zone",icon:c.jsx(vne,{className:"w-4 h-4"}),label:"Tactical Zone"},{id:"arrow",icon:c.jsx(ql,{className:"w-4 h-4"}),label:"Tactical Line"},{id:"ruler",icon:c.jsx(Lne,{className:"w-4 h-4"}),label:"Distance"}]},{name:"Shapes & Text",tools:[{id:"circle",icon:c.jsx(lI,{className:"w-4 h-4"}),label:"Circle"},{id:"marker",icon:c.jsx(p8,{className:"w-4 h-4 text-orange-400"}),label:"Player Marker"},{id:"text",icon:c.jsx(Kne,{className:"w-4 h-4"}),label:"Annotation"}]}],A=[{name:"Power Red",hex:"#FF3B30"},{name:"Neon Green",hex:"#34C759"},{name:"Tactical Blue",hex:"#007AFF"},{name:"Safety Yellow",hex:"#FFD60A"},{name:"Cyber Cyan",hex:"#00FBFF"},{name:"Direct Orange",hex:"#FF9F0A"},{name:"Clean White",hex:"#FFFFFF"},{name:"Stealth Black",hex:"#000000"}];return c.jsxs("div",{className:"absolute top-16 right-4 bottom-24 bg-slate-900/40 backdrop-blur-2xl rounded-2xl p-4 flex flex-col gap-6 z-50 border border-white/10 shadow-2xl overflow-y-auto custom-scrollbar w-[80px] select-none hover:w-[220px] transition-all duration-300 group/sidebar",children:[c.jsxs("div",{className:"flex items-center gap-3 px-2 mb-2",children:[c.jsx("div",{className:"h-8 w-8 rounded-lg bg-cyan-500/20 flex items-center justify-center border border-cyan-500/30",children:c.jsx(Eu,{className:"h-4 w-4 text-cyan-400"})}),c.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-white opacity-0 group-hover/sidebar:opacity-100 transition-opacity whitespace-nowrap",children:"Tactical OS"})]}),d.map((f,h)=>c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-[10px] uppercase text-white/40 font-black tracking-widest px-2 opacity-0 group-hover/sidebar:opacity-100 transition-opacity",children:f.name}),c.jsx("div",{className:"flex flex-col gap-1",children:f.tools.map(m=>c.jsxs(te,{variant:t===m.id?"default":"ghost",size:"sm",onClick:()=>e(m.id),className:Z("h-10 justify-start px-3 transition-all rounded-xl",t===m.id?"bg-cyan-500 text-white shadow-lg shadow-cyan-500/20 scale-[1.02]":"text-slate-400 hover:text-white hover:bg-white/5"),children:[c.jsx("div",{className:"min-w-[24px] flex justify-center",children:m.icon}),c.jsx("span",{className:"ml-3 text-xs font-bold opacity-0 group-hover/sidebar:opacity-100 transition-opacity whitespace-nowrap",children:m.label})]},m.id))})]},h)),c.jsxs("div",{className:"flex flex-col gap-3 pt-4 border-t border-white/5",children:[c.jsx("span",{className:"text-[10px] uppercase text-white/40 font-black tracking-widest px-2 opacity-0 group-hover/sidebar:opacity-100 transition-opacity",children:"Palette"}),c.jsx("div",{className:"grid grid-cols-2 group-hover/sidebar:grid-cols-4 gap-2 px-1",children:A.map(f=>c.jsx("button",{onClick:()=>n(f.hex),className:Z("w-6 h-6 rounded-full border-2 transition-transform hover:scale-125",r===f.hex?"border-white scale-110 shadow-lg":"border-white/10"),style:{backgroundColor:f.hex},title:f.name},f.hex))})]}),c.jsxs("div",{className:"flex flex-col gap-3 pt-4 border-t border-white/5",children:[c.jsx("span",{className:"text-[10px] uppercase text-white/40 font-black tracking-widest px-2 opacity-0 group-hover/sidebar:opacity-100 transition-opacity",children:"Thickness"}),c.jsx("input",{type:"range",min:"1",max:"12",step:"1",value:i,onChange:f=>s(Number(f.target.value)),className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer accent-cyan-400"})]}),c.jsx("div",{className:"mt-auto flex flex-col gap-2 border-t border-white/5 pt-4",children:c.jsxs("div",{className:"flex gap-1 group-hover/sidebar:flex-row flex-col items-center group-hover/sidebar:justify-between",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8 text-slate-400 hover:text-white rounded-lg",children:c.jsx(Vne,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8 text-red-400 hover:bg-red-400/10 rounded-lg",children:c.jsx(iu,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8 text-slate-400 hover:text-white rounded-lg",children:c.jsx(n8,{className:"h-4 w-4"})}),c.jsxs("label",{className:"h-8 w-8 flex items-center justify-center text-slate-400 hover:text-white cursor-pointer rounded-lg hover:bg-white/5",children:[c.jsx(Aw,{className:"h-4 w-4"}),c.jsx("input",{type:"file",accept:".json",onChange:f=>u(f.target.files[0]),className:"hidden"})]})]})})]})},E0e=t=>{var K;const[e,r]=E.useState(0),[n,i]=E.useState(!1),[s,a]=E.useState(!1),[o,l]=E.useState("select"),[u,d]=E.useState("#FF0000"),[A,f]=E.useState(3),[h,m]=E.useState(t.trackingData),[p,g]=E.useState(!1),[x,v]=E.useState({width:1920,height:1080}),[y,w]=E.useState(null),b=E.useRef(null);E.useEffect(()=>{if(!t.videoFile){w(null);return}const V=t.videoFile.type.startsWith("image/"),q=URL.createObjectURL(t.videoFile);if(w(q),V){const H=new Image;H.onload=()=>{v({width:H.naturalWidth,height:H.naturalHeight})},H.src=q}else{const H=document.createElement("video");H.onloadedmetadata=()=>{v({width:H.videoWidth,height:H.videoHeight})},H.src=q}return()=>{URL.revokeObjectURL(q)}},[t.videoFile]),E.useEffect(()=>{t.trackingData&&m(t.trackingData)},[t.trackingData]);const{annotations:S,activeAnnotations:C,calibration:T,addAnnotation:B,deleteAnnotation:_,clearAnnotations:I,addCalibrationPair:L,removeLastCalibrationPair:N,setCalibrationPairs:R,clearCalibration:M,exportAnnotations:k,importAnnotations:O}=f0e(e),j=E.useCallback(V=>{r(V),t.onTimeUpdate(V)},[t.onTimeUpdate]),D=()=>{const V=k(),q=new Blob([V],{type:"application/json"}),H=URL.createObjectURL(q),z=document.createElement("a");z.href=H,z.download="annotations.json",z.click(),URL.revokeObjectURL(H)},F=V=>{const q=new FileReader;q.onload=H=>{var ae;const z=(ae=H.target)==null?void 0:ae.result;O(z)},q.readAsText(V)},$=(V,q)=>{B({type:"player-track",startTime:q[0].time,endTime:q[q.length-1].time,data:{playerId:V,points:q,manual:!0},style:{color:u,strokeWidth:A,opacity:.8}}),a(!1)},U=()=>{S.length>0&&_(S[S.length-1].id)};return c.jsxs("div",{ref:b,className:"relative w-full h-full",children:[c.jsx(l0e,{...t,currentTime:e,timelineVariant:t.timelineVariant,onTimeUpdate:j,onAnalysisComplete:V=>m(V),showLiveToasts:t.showLiveToasts,analysisMode:t.analysisMode,isEditMode:t.isEditMode,layoutConfig:t.layoutConfig,onToggleVisibility:t.onToggleVisibility}),n&&c.jsx(h9,{annotations:C,videoWidth:x.width,videoHeight:x.height,calibrationMatrix:T.matrix,calibrationPoints:T.pairs.map(V=>V.src),onAnnotationClick:V=>console.log("Clicked annotation:",V)}),n&&o!=="select"&&o!=="calibration"&&!s&&c.jsx(p0e,{activeTool:o,color:u,strokeWidth:A,videoWidth:x.width,videoHeight:x.height,currentTime:e,calibration:T,onAddAnnotation:B}),p&&c.jsx(b0e,{videoUrl:y||t.videoUrl,isImage:((K=t.videoFile)==null?void 0:K.type.startsWith("image/"))??!1,currentTime:e,currentPairs:T.pairs,onAddPair:L,onRemoveLast:N,onClear:M,onClose:()=>g(!1)}),s&&c.jsx(m0e,{trackingData:h,currentTime:e,videoWidth:1920,videoHeight:1080,onTrackPlayer:$,onClose:()=>a(!1)}),n&&!s&&c.jsx(w0e,{activeTool:o,onToolChange:V=>{V==="calibration"?g(!0):(l(V),V==="player-track"&&a(!0))},color:u,onColorChange:d,strokeWidth:A,onStrokeWidthChange:f,onClear:I,onUndo:U,onExport:D,onImport:F}),!p&&!s&&c.jsx(te,{variant:n?"default":"secondary",onClick:()=>i(!n),className:Z("absolute top-6 left-1/2 -translate-x-1/2 z-40 h-10 px-4 rounded-xl font-bold uppercase tracking-widest text-[10px] transition-all border",n?"bg-red-500 hover:bg-red-600 border-red-400 text-white shadow-lg shadow-red-500/20":"bg-slate-900/80 hover:bg-slate-800 border-white/10 text-white backdrop-blur-md"),children:n?c.jsxs(c.Fragment,{children:[c.jsx(At,{className:"w-4 h-4 mr-2"}),"Exit Design Mode"]}):c.jsxs(c.Fragment,{children:[c.jsx(d8,{className:"w-4 h-4 mr-2 text-cyan-400"}),"Tactical Layers"]})})]})},S0e=({onVideoUpload:t,currentVideo:e,onClearVideo:r})=>{const n=E.useRef(null),{toast:i}=lc(),s=u=>{var A;const d=(A=u.target.files)==null?void 0:A[0];d&&a(d)},a=u=>{if(!u.type.startsWith("video/")&&!u.type.startsWith("image/")){i({title:"Invalid File",description:"Please select a valid video or image file",variant:"destructive"});return}const d=2*1024*1024*1024;if(u.size>d){i({title:"File Too Large",description:"Video file must be less than 2GB",variant:"destructive"});return}t(u),i({title:"Video Loaded",description:`${u.name} ready for analysis`})},o=u=>{u.preventDefault();const d=u.dataTransfer.files[0];d&&a(d)},l=u=>{u.preventDefault()};return c.jsx("div",{className:"flex items-center gap-2",children:e?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(m8,{className:"h-3 w-3 md:h-4 md:w-4 text-green-500"}),c.jsx("span",{className:"text-xs hidden md:inline max-w-[100px] truncate",title:e.name,children:e.name}),c.jsx(te,{variant:"ghost",size:"sm",onClick:r,className:"h-6 w-6 p-0",title:"Clear video",children:c.jsx(At,{className:"h-3 w-3"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("input",{ref:n,type:"file",accept:"video/*,image/*",onChange:s,className:"hidden"}),c.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{var u;return(u=n.current)==null?void 0:u.click()},onDrop:o,onDragOver:l,className:"gap-1 text-xs",title:"Upload match video/image",children:[c.jsx(Aw,{className:"h-3 w-3 md:h-4 md:w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Upload Media"})]})]})})},C0e=({thirdsZone:t,className:e})=>{const{activeThird:r,previewZone:n,confirmedZone:i}=t,s=o=>{const l=n===o,u=i===o,A=(o<=6?"DEFENSE":o<=12?"MIDFIELD":"ATTACK")===r;return c.jsx("div",{className:Z("w-6 h-5 flex items-center justify-center text-[8px] font-bold rounded-sm transition-all duration-150","bg-black/40 border border-white/10",A&&"border-primary/50 bg-primary/10",l&&"bg-primary border-primary text-primary-foreground scale-110 shadow-lg shadow-primary/30 z-10",u&&!l&&"bg-green-500/30 border-green-500/50 text-green-400"),children:o},o)},a=(o,l,u)=>{const d=r===o;return c.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[c.jsx("span",{className:Z("text-[7px] font-black uppercase tracking-wider transition-colors",d?"text-primary":"text-muted-foreground/50"),children:u}),c.jsxs("div",{className:"grid grid-cols-3 gap-0.5",children:[s(l),s(l+1),s(l+2),s(l+3),s(l+4),s(l+5)]})]})};return c.jsxs("div",{className:Z("flex items-center gap-1 p-2 rounded-lg bg-black/60 backdrop-blur-md border border-white/10 shadow-xl",e),children:[a("DEFENSE",1,"LT: DEF"),c.jsx("div",{className:"w-px h-10 bg-white/10"}),a("MIDFIELD",7,"MID"),c.jsx("div",{className:"w-px h-10 bg-white/10"}),a("ATTACK",13,"RT: ATK")]})};var jS="rovingFocusGroup.onEntryFocus",T0e={bubbles:!1,cancelable:!0},pg="RovingFocusGroup",[GB,m9,B0e]=sw(pg),[_0e,$w]=Cn(pg,[B0e]),[N0e,I0e]=_0e(pg),g9=E.forwardRef((t,e)=>c.jsx(GB.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(GB.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(P0e,{...t,ref:e})})}));g9.displayName=pg;var P0e=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...A}=t,f=E.useRef(null),h=qe(e,f),m=Bf(s),[p,g]=zi({prop:a,defaultProp:o??null,onChange:l,caller:pg}),[x,v]=E.useState(!1),y=Dr(u),w=m9(r),b=E.useRef(!1),[S,C]=E.useState(0);return E.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(jS,y),()=>T.removeEventListener(jS,y)},[y]),c.jsx(N0e,{scope:r,orientation:n,dir:m,loop:i,currentTabStopId:p,onItemFocus:E.useCallback(T=>g(T),[g]),onItemShiftTab:E.useCallback(()=>v(!0),[]),onFocusableItemAdd:E.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:E.useCallback(()=>C(T=>T-1),[]),children:c.jsx(De.div,{tabIndex:x||S===0?-1:0,"data-orientation":n,...A,ref:h,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{b.current=!0}),onFocus:Ie(t.onFocus,T=>{const B=!b.current;if(T.target===T.currentTarget&&B&&!x){const _=new CustomEvent(jS,T0e);if(T.currentTarget.dispatchEvent(_),!_.defaultPrevented){const I=w().filter(k=>k.focusable),L=I.find(k=>k.active),N=I.find(k=>k.id===p),M=[L,N,...I].filter(Boolean).map(k=>k.ref.current);y9(M,d)}}b.current=!1}),onBlur:Ie(t.onBlur,()=>v(!1))})})}),x9="RovingFocusGroupItem",v9=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:a,...o}=t,l=da(),u=s||l,d=I0e(x9,r),A=d.currentTabStopId===u,f=m9(r),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:p}=d;return E.useEffect(()=>{if(n)return h(),()=>m()},[n,h,m]),c.jsx(GB.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:c.jsx(De.span,{tabIndex:A?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:Ie(t.onMouseDown,g=>{n?d.onItemFocus(u):g.preventDefault()}),onFocus:Ie(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ie(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=L0e(g,d.orientation,d.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=f().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const w=y.indexOf(g.currentTarget);y=d.loop?j0e(y,w+1):y.slice(w+1)}setTimeout(()=>y9(y))}}),children:typeof a=="function"?a({isCurrentTabStop:A,hasTabStop:p!=null}):a})})});v9.displayName=x9;var R0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k0e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function L0e(t,e,r){const n=k0e(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return R0e[n]}function y9(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function j0e(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var b9=g9,w9=v9,wP="Radio",[M0e,E9]=Cn(wP),[D0e,O0e]=M0e(wP),S9=E.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:i=!1,required:s,disabled:a,value:o="on",onCheck:l,form:u,...d}=t,[A,f]=E.useState(null),h=qe(e,g=>f(g)),m=E.useRef(!1),p=A?u||!!A.closest("form"):!0;return c.jsxs(D0e,{scope:r,checked:i,disabled:a,children:[c.jsx(De.button,{type:"button",role:"radio","aria-checked":i,"data-state":_9(i),"data-disabled":a?"":void 0,disabled:a,value:o,...d,ref:h,onClick:Ie(t.onClick,g=>{i||l==null||l(),p&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})}),p&&c.jsx(B9,{control:A,bubbles:!m.current,name:n,value:o,checked:i,required:s,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});S9.displayName=wP;var C9="RadioIndicator",T9=E.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...i}=t,s=O0e(C9,r);return c.jsx(Jn,{present:n||s.checked,children:c.jsx(De.span,{"data-state":_9(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});T9.displayName=C9;var F0e="RadioBubbleInput",B9=E.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...i},s)=>{const a=E.useRef(null),o=qe(a,s),l=hg(r),u=dg(e);return E.useEffect(()=>{const d=a.current;if(!d)return;const A=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(A,"checked").set;if(l!==r&&h){const m=new Event("click",{bubbles:n});h.call(d,r),d.dispatchEvent(m)}},[l,r,n]),c.jsx(De.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});B9.displayName=F0e;function _9(t){return t?"checked":"unchecked"}var U0e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Qw="RadioGroup",[$0e,UZe]=Cn(Qw,[$w,E9]),N9=$w(),I9=E9(),[Q0e,H0e]=$0e(Qw),P9=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:i,value:s,required:a=!1,disabled:o=!1,orientation:l,dir:u,loop:d=!0,onValueChange:A,...f}=t,h=N9(r),m=Bf(u),[p,g]=zi({prop:s,defaultProp:i??null,onChange:A,caller:Qw});return c.jsx(Q0e,{scope:r,name:n,required:a,disabled:o,value:p,onValueChange:g,children:c.jsx(b9,{asChild:!0,...h,orientation:l,dir:m,loop:d,children:c.jsx(De.div,{role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":o?"":void 0,dir:m,...f,ref:e})})})});P9.displayName=Qw;var R9="RadioGroupItem",k9=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...i}=t,s=H0e(R9,r),a=s.disabled||n,o=N9(r),l=I9(r),u=E.useRef(null),d=qe(e,u),A=s.value===i.value,f=E.useRef(!1);return E.useEffect(()=>{const h=p=>{U0e.includes(p.key)&&(f.current=!0)},m=()=>f.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",m)}},[]),c.jsx(w9,{asChild:!0,...o,focusable:!a,active:A,children:c.jsx(S9,{disabled:a,required:s.required,checked:A,...l,...i,name:s.name,ref:d,onCheck:()=>s.onValueChange(i.value),onKeyDown:Ie(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Ie(i.onFocus,()=>{var h;f.current&&((h=u.current)==null||h.click())})})})});k9.displayName=R9;var K0e="RadioGroupIndicator",L9=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,i=I9(r);return c.jsx(T9,{...i,...n,ref:e})});L9.displayName=K0e;var j9=P9,M9=k9,V0e=L9;const D9=E.forwardRef(({className:t,...e},r)=>c.jsx(j9,{className:Z("grid gap-2",t),...e,ref:r}));D9.displayName=j9.displayName;const zB=E.forwardRef(({className:t,...e},r)=>c.jsx(M9,{ref:r,className:Z("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:c.jsx(V0e,{className:"flex items-center justify-center",children:c.jsx(lI,{className:"h-2.5 w-2.5 fill-current text-current"})})}));zB.displayName=M9.displayName;const G0e=()=>{const{socket:t}=Cf(),{matchTime:e}=Yr(),[r,n]=E.useState("HOME"),i=a=>{const o=Math.floor(a/60),l=a%60;return`${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},s=()=>{const a=new Date().toISOString(),o=i(e||0),l={type:"SPOTTER_PING",target:r,timestamp:a,matchTime:o,id:Date.now()};t==null||t.emit("spotter-ping",l),Ge.success(`Ping recorded at ${o}`),"vibrate"in navigator&&navigator.vibrate(50)};return c.jsxs("div",{className:"flex flex-col h-full bg-slate-950/80 backdrop-blur-3xl p-6 gap-8 items-center justify-center border-l border-white/5",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:c.jsx(Pne,{className:"w-6 h-6 text-primary animate-pulse"})}),c.jsx("h2",{className:"text-xl font-bold uppercase tracking-tighter text-white",children:"Spotter Assist"}),c.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest font-medium",children:"Voice is Primary  Tap for Timing"})]}),c.jsxs(D9,{value:r,onValueChange:a=>n(a),className:"grid grid-cols-2 gap-4 w-full max-w-xs",children:[c.jsxs("div",{className:"flex items-center space-x-2 bg-slate-900/50 p-4 rounded-xl border border-white/5 cursor-pointer hover:bg-slate-900 transition-colors",children:[c.jsx(zB,{value:"HOME",id:"home",className:"sr-only"}),c.jsx(bo,{htmlFor:"home",className:`w-full text-center font-bold cursor-pointer ${r==="HOME"?"text-primary":"text-slate-500"}`,children:"HOME"})]}),c.jsxs("div",{className:"flex items-center space-x-2 bg-slate-900/50 p-4 rounded-xl border border-white/5 cursor-pointer hover:bg-slate-900 transition-colors",children:[c.jsx(zB,{value:"AWAY",id:"away",className:"sr-only"}),c.jsx(bo,{htmlFor:"away",className:`w-full text-center font-bold cursor-pointer ${r==="AWAY"?"text-destructive":"text-slate-500"}`,children:"AWAY"})]})]}),c.jsx(te,{onClick:s,className:"w-64 h-64 rounded-full border-[12px] border-white/10 bg-slate-900 hover:bg-slate-800 shadow-[0_0_50px_rgba(var(--primary),0.3)] group transition-all duration-300 active:scale-95 active:border-primary/50",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(cw,{className:"w-12 h-12 text-primary group-hover:scale-110 transition-transform"}),c.jsx("span",{className:"text-3xl font-black italic tracking-tighter text-white",children:"PING"})]})}),c.jsx("div",{className:"text-[10px] text-slate-500 font-mono text-center max-w-[200px]",children:"This will send a high-precision timestamp to the Logger for verification."})]})},Ba=kK,EP=Xue,z0e=LK,O9=E.forwardRef(({className:t,...e},r)=>c.jsx(Nw,{ref:r,className:Z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));O9.displayName=Nw.displayName;const Rs=E.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(z0e,{children:[c.jsx(O9,{}),c.jsxs(Iw,{ref:n,className:Z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,c.jsxs(jK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[c.jsx(At,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rs.displayName=Iw.displayName;const ks=({className:t,...e})=>c.jsx("div",{className:Z("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ks.displayName="DialogHeader";const mg=({className:t,...e})=>c.jsx("div",{className:Z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});mg.displayName="DialogFooter";const Ls=E.forwardRef(({className:t,...e},r)=>c.jsx(Pw,{ref:r,className:Z("text-lg font-semibold leading-none tracking-tight",t),...e}));Ls.displayName=Pw.displayName;const Nf=E.forwardRef(({className:t,...e},r)=>c.jsx(Rw,{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));Nf.displayName=Rw.displayName;function W0e(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var SP="ScrollArea",[F9,$Ze]=Cn(SP),[Y0e,Ji]=F9(SP),U9=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:s=600,...a}=t,[o,l]=E.useState(null),[u,d]=E.useState(null),[A,f]=E.useState(null),[h,m]=E.useState(null),[p,g]=E.useState(null),[x,v]=E.useState(0),[y,w]=E.useState(0),[b,S]=E.useState(!1),[C,T]=E.useState(!1),B=qe(e,I=>l(I)),_=Bf(i);return c.jsx(Y0e,{scope:r,type:n,dir:_,scrollHideDelay:s,scrollArea:o,viewport:u,onViewportChange:d,content:A,onContentChange:f,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:b,onScrollbarXEnabledChange:S,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w,children:c.jsx(De.div,{dir:_,...a,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":y+"px",...t.style}})})});U9.displayName=SP;var $9="ScrollAreaViewport",Q9=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:i,...s}=t,a=Ji($9,r),o=E.useRef(null),l=qe(e,o,a.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),c.jsx(De.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Q9.displayName=$9;var _a="ScrollAreaScrollbar",CP=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ji(_a,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,o=t.orientation==="horizontal";return E.useEffect(()=>(o?s(!0):a(!0),()=>{o?s(!1):a(!1)}),[o,s,a]),i.type==="hover"?c.jsx(q0e,{...n,ref:e,forceMount:r}):i.type==="scroll"?c.jsx(X0e,{...n,ref:e,forceMount:r}):i.type==="auto"?c.jsx(H9,{...n,ref:e,forceMount:r}):i.type==="always"?c.jsx(TP,{...n,ref:e}):null});CP.displayName=_a;var q0e=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ji(_a,t.__scopeScrollArea),[s,a]=E.useState(!1);return E.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),a(!0)},d=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),c.jsx(Jn,{present:r||s,children:c.jsx(H9,{"data-state":s?"visible":"hidden",...n,ref:e})})}),X0e=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ji(_a,t.__scopeScrollArea),s=t.orientation==="horizontal",a=Kw(()=>l("SCROLL_END"),100),[o,l]=W0e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay,l]),E.useEffect(()=>{const u=i.viewport,d=s?"scrollLeft":"scrollTop";if(u){let A=u[d];const f=()=>{const h=u[d];A!==h&&(l("SCROLL"),a()),A=h};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,l,a]),c.jsx(Jn,{present:r||o!=="hidden",children:c.jsx(TP,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Ie(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ie(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),H9=E.forwardRef((t,e)=>{const r=Ji(_a,t.__scopeScrollArea),{forceMount:n,...i}=t,[s,a]=E.useState(!1),o=t.orientation==="horizontal",l=Kw(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;a(o?u:d)}},10);return FA(r.viewport,l),FA(r.content,l),c.jsx(Jn,{present:n||s,children:c.jsx(TP,{"data-state":s?"visible":"hidden",...i,ref:e})})}),TP=E.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=Ji(_a,t.__scopeScrollArea),s=E.useRef(null),a=E.useRef(0),[o,l]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=W9(o.viewport,o.content),d={...n,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function A(f,h){return nxe(f,a.current,o,h)}return r==="horizontal"?c.jsx(Z0e,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollLeft,h=ID(f,o,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=A(f,i.dir))}}):r==="vertical"?c.jsx(J0e,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollTop,h=ID(f,o);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=A(f))}}):null}),Z0e=E.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,s=Ji(_a,t.__scopeScrollArea),[a,o]=E.useState(),l=E.useRef(null),u=qe(e,l,s.onScrollbarXChange);return E.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(V9,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Hw(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,A)=>{if(s.viewport){const f=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),q9(f,A)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:xy(a.paddingLeft),paddingEnd:xy(a.paddingRight)}})}})}),J0e=E.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,s=Ji(_a,t.__scopeScrollArea),[a,o]=E.useState(),l=E.useRef(null),u=qe(e,l,s.onScrollbarYChange);return E.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(V9,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Hw(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,A)=>{if(s.viewport){const f=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),q9(f,A)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:xy(a.paddingTop),paddingEnd:xy(a.paddingBottom)}})}})}),[exe,K9]=F9(_a),V9=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:A,...f}=t,h=Ji(_a,r),[m,p]=E.useState(null),g=qe(e,B=>p(B)),x=E.useRef(null),v=E.useRef(""),y=h.viewport,w=n.content-n.viewport,b=Dr(d),S=Dr(l),C=Kw(A,10);function T(B){if(x.current){const _=B.clientX-x.current.left,I=B.clientY-x.current.top;u({x:_,y:I})}}return E.useEffect(()=>{const B=_=>{const I=_.target;(m==null?void 0:m.contains(I))&&b(_,w)};return document.addEventListener("wheel",B,{passive:!1}),()=>document.removeEventListener("wheel",B,{passive:!1})},[y,m,w,b]),E.useEffect(S,[n,S]),FA(m,C),FA(h.content,C),c.jsx(exe,{scope:r,scrollbar:m,hasThumb:i,onThumbChange:Dr(s),onThumbPointerUp:Dr(a),onThumbPositionChange:S,onThumbPointerDown:Dr(o),children:c.jsx(De.div,{...f,ref:g,style:{position:"absolute",...f.style},onPointerDown:Ie(t.onPointerDown,B=>{B.button===0&&(B.target.setPointerCapture(B.pointerId),x.current=m.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),T(B))}),onPointerMove:Ie(t.onPointerMove,T),onPointerUp:Ie(t.onPointerUp,B=>{const _=B.target;_.hasPointerCapture(B.pointerId)&&_.releasePointerCapture(B.pointerId),document.body.style.webkitUserSelect=v.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),gy="ScrollAreaThumb",G9=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=K9(gy,t.__scopeScrollArea);return c.jsx(Jn,{present:r||i.hasThumb,children:c.jsx(txe,{ref:e,...n})})}),txe=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,s=Ji(gy,r),a=K9(gy,r),{onThumbPositionChange:o}=a,l=qe(e,A=>a.onThumbChange(A)),u=E.useRef(void 0),d=Kw(()=>{u.current&&(u.current(),u.current=void 0)},100);return E.useEffect(()=>{const A=s.viewport;if(A){const f=()=>{if(d(),!u.current){const h=ixe(A,o);u.current=h,o()}};return o(),A.addEventListener("scroll",f),()=>A.removeEventListener("scroll",f)}},[s.viewport,d,o]),c.jsx(De.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ie(t.onPointerDownCapture,A=>{const h=A.target.getBoundingClientRect(),m=A.clientX-h.left,p=A.clientY-h.top;a.onThumbPointerDown({x:m,y:p})}),onPointerUp:Ie(t.onPointerUp,a.onThumbPointerUp)})});G9.displayName=gy;var BP="ScrollAreaCorner",z9=E.forwardRef((t,e)=>{const r=Ji(BP,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?c.jsx(rxe,{...t,ref:e}):null});z9.displayName=BP;var rxe=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=Ji(BP,r),[s,a]=E.useState(0),[o,l]=E.useState(0),u=!!(s&&o);return FA(i.scrollbarX,()=>{var A;const d=((A=i.scrollbarX)==null?void 0:A.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),FA(i.scrollbarY,()=>{var A;const d=((A=i.scrollbarY)==null?void 0:A.offsetWidth)||0;i.onCornerWidthChange(d),a(d)}),u?c.jsx(De.div,{...n,ref:e,style:{width:s,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function xy(t){return t?parseInt(t,10):0}function W9(t,e){const r=t/e;return isNaN(r)?0:r}function Hw(t){const e=W9(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function nxe(t,e,r,n="ltr"){const i=Hw(r),s=i/2,a=e||s,o=i-a,l=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-o,d=r.content-r.viewport,A=n==="ltr"?[0,d]:[d*-1,0];return Y9([l,u],A)(t)}function ID(t,e,r="ltr"){const n=Hw(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,o=s-n,l=r==="ltr"?[0,a]:[a*-1,0],u=Xp(t,l);return Y9([0,a],[0,o])(u)}function Y9(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function q9(t,e){return t>0&&t<e}var ixe=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},a=r.left!==s.left,o=r.top!==s.top;(a||o)&&e(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function Kw(t,e){const r=Dr(t),n=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),E.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function FA(t,e){const r=Dr(e);Ur(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}var X9=U9,sxe=Q9,axe=z9;const Zn=E.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(X9,{ref:n,className:Z("relative overflow-hidden",t),...r,children:[c.jsx(sxe,{className:"h-full w-full rounded-[inherit]",children:e}),c.jsx(Z9,{}),c.jsx(axe,{})]}));Zn.displayName=X9.displayName;const Z9=E.forwardRef(({className:t,orientation:e="vertical",...r},n)=>c.jsx(CP,{ref:n,orientation:e,className:Z("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:c.jsx(G9,{className:"relative flex-1 rounded-full bg-border"})}));Z9.displayName=CP.displayName;const oxe={524:" ",670:" ",678:" ",755:"  ",694:" ",676:" ",674:" ",672:" ",409:" ",677:" ",657:" ",675:" ",758:" ",680:" ",673:" ",653:" "},lxe=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 219 222",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",children:[c.jsx("path",{d:"M100.626 3.77393C106.013 0.962563 112.401 0.874376 117.851 3.51025L118.374 3.77393L206.526 49.7817C212.861 53.0876 216.832 59.6407 216.832 66.7856V155.345C216.832 162.267 213.105 168.632 207.113 172.029L206.526 172.348L118.374 218.357C112.987 221.168 106.599 221.256 101.149 218.621L100.626 218.357L12.4736 172.348C6.13957 169.042 2.1681 162.49 2.16797 155.345V66.7856C2.16797 59.8639 5.89495 53.4977 11.8867 50.1011L12.4736 49.7817L100.626 3.77393Z",stroke:"white",strokeWidth:"2.70765"}),c.jsx("path",{d:"M101.361 18.1094C106.461 15.4474 112.541 15.4474 117.642 18.1094L193.171 57.5293C198.981 60.5617 202.624 66.5724 202.624 73.1264V149.004C202.624 155.558 198.981 161.569 193.171 164.601L117.642 204.021C112.541 206.683 106.461 206.683 101.361 204.021L25.832 164.601C20.0218 161.569 16.3788 155.558 16.3788 149.004V73.1263C16.3788 66.5724 20.0218 60.5617 25.832 57.5293L101.361 18.1094Z",fill:"#A70912"})]}),cxe=({onUpload:t})=>{const[e,r]=E.useState(!1),[n,i]=E.useState(!1),[s,a]=E.useState({}),[o,l]=E.useState(null);E.useEffect(()=>{const f=localStorage.getItem("lfp_scraped_data");if(f)try{a(JSON.parse(f))}catch(h){console.error("Failed to parse stored teams",h)}},[]);const u=f=>{var p;const h=(p=f.target.files)==null?void 0:p[0];if(!h)return;const m=new FileReader;m.onload=g=>{var x;try{const v=JSON.parse((x=g.target)==null?void 0:x.result),y=new Map;let w=0;if(v.Clubs&&Array.isArray(v.Clubs))v.Clubs.forEach(S=>{const C=oxe[S.ClubID]||S.ClubName;y.set(C,{teamName:C,PlayerData:S.Players}),w+=S.Players.length});else if(v.PlayerData){const b=h.name.replace(".json","");y.set(b,v),w=v.PlayerData.length}else Object.keys(v).forEach(b=>{if(v[b].PlayerData){const S=v[b].name||b;y.set(S,v[b]),w+=v[b].PlayerData.length}});t(y),Ge.success("Teams loaded successfully",{description:`${y.size} team(s), ${w} players imported`})}catch{Ge.error("Invalid JSON file")}},m.readAsText(h),f.target.value=""},d=async()=>{r(!0);const f=Ge.loading("Connecting to LFP.dz...",{description:"Scraping live data (this may take a minute)..."});try{const h=await fetch(`${hr}/api/scrape-lfp`);if(!h.ok)throw new Error("Scraping failed");const m=await h.json(),p=Object.keys(m).length;if(p===0){Ge.error("No data found",{id:f,description:"Could not extract teams from LFP.dz"}),r(!1);return}localStorage.setItem("lfp_scraped_data",JSON.stringify(m)),a(m),Ge.success("LFP Data Updated",{id:f,description:`Successfully cached ${p} teams. Ready to select.`}),i(!0)}catch(h){console.error("Failed to load LFP teams:",h),Ge.error("Scraping Failed",{id:f,description:"Could not connect to LFP.dz or parse data."})}finally{r(!1)}},A=()=>{if(!o||!s[o])return;const f=s[o],h=new Map;h.set(f.teamName,f),t(h),i(!1),Ge.success(`Loaded ${f.teamName}`,{description:`${f.PlayerData.length} players imported.`})};return c.jsxs("div",{className:"space-y-2",children:[c.jsx(Fe,{className:"p-4 border-2 border-dashed border-primary/30 bg-card/50 hover:border-primary/60 transition-colors",children:c.jsxs("label",{className:"cursor-pointer flex items-center justify-center gap-3 py-2",children:[c.jsx(Aw,{className:"w-5 h-5 text-primary"}),c.jsx("span",{className:"text-sm font-medium text-foreground",children:"Upload Team JSON"}),c.jsx("input",{type:"file",accept:".json",onChange:u,className:"hidden"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("button",{onClick:d,disabled:e,className:"flex items-center justify-center gap-2 p-2 rounded-md bg-emerald-600/20 hover:bg-emerald-600/30 border border-emerald-600/50 text-emerald-500 hover:text-emerald-400 transition-all text-xs font-semibold uppercase tracking-wider disabled:opacity-50",children:[e?c.jsx(Xl,{className:"w-4 h-4 animate-spin"}):c.jsx(lxe,{}),e?"Scraping...":"Update LFP Data"]}),c.jsxs("button",{onClick:()=>i(!0),disabled:Object.keys(s).length===0,className:"flex items-center justify-center gap-2 p-2 rounded-md bg-blue-600/20 hover:bg-blue-600/30 border border-blue-600/50 text-blue-500 hover:text-blue-400 transition-all text-xs font-semibold uppercase tracking-wider disabled:opacity-50",children:[c.jsx(AI,{className:"w-3 h-3"}),"Select Team"]})]}),c.jsx(Ba,{open:n,onOpenChange:i,children:c.jsxs(Rs,{className:"sm:max-w-[425px] bg-slate-900 border-slate-700 text-slate-100",children:[c.jsxs(ks,{children:[c.jsx(Ls,{children:"Select Ligue 1 Team"}),c.jsx(Nf,{className:"text-slate-400",children:"Choose a team from the cached LFP data to load into the analyzer."})]}),c.jsx(Zn,{className:"h-[300px] w-full rounded-md border border-slate-700 p-2 bg-slate-950/50",children:c.jsx("div",{className:"flex flex-col gap-1",children:Object.keys(s).length===0?c.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:'No data cached. Click "Update Data" first.'}):Object.values(s).map(f=>c.jsxs("button",{onClick:()=>l(f.teamName),className:`flex items-center justify-between p-3 rounded-md text-sm transition-colors ${o===f.teamName?"bg-emerald-600/30 border border-emerald-500/50 text-emerald-400":"hover:bg-slate-800 border border-transparent text-slate-300"}`,children:[c.jsx("span",{className:"font-medium",children:f.teamName}),c.jsxs("span",{className:"text-xs opacity-70 bg-slate-900 px-2 py-0.5 rounded-full",children:[f.PlayerData.length," players"]}),o===f.teamName&&c.jsx(Gd,{className:"w-4 h-4 ml-2"})]},f.teamName))})}),c.jsx(mg,{children:c.jsxs("div",{className:"flex justify-between w-full items-center",children:[c.jsxs("span",{className:"text-xs text-slate-500",children:[Object.keys(s).length," teams cached"]}),c.jsx(te,{onClick:A,disabled:!o,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:"Load Team"})]})})]})})]})},uxe=({teams:t,selectedTeam:e,onSelectTeam:r})=>t.length===0?c.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No teams available. Please upload a team roster."}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Select a Team"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(n=>c.jsxs(Fe,{className:`p-6 cursor-pointer transition-colors flex items-center gap-4 group border-2 ${e===n?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>r(n),children:[c.jsx("div",{className:"p-3 rounded-full bg-primary/10 group-hover:bg-primary/20 transition-colors",children:c.jsx(go,{className:"w-6 h-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-lg",children:n}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to view roster"})]})]},n))})]});var Vw="Tabs",[dxe,QZe]=Cn(Vw,[$w]),J9=$w(),[Axe,_P]=dxe(Vw),ez=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...u}=t,d=Bf(o),[A,f]=zi({prop:n,onChange:i,defaultProp:s??"",caller:Vw});return c.jsx(Axe,{scope:r,baseId:da(),value:A,onValueChange:f,orientation:a,dir:d,activationMode:l,children:c.jsx(De.div,{dir:d,"data-orientation":a,...u,ref:e})})});ez.displayName=Vw;var tz="TabsList",rz=E.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,s=_P(tz,r),a=J9(r);return c.jsx(b9,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:c.jsx(De.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});rz.displayName=tz;var nz="TabsTrigger",iz=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=t,a=_P(nz,r),o=J9(r),l=oz(a.baseId,n),u=lz(a.baseId,n),d=n===a.value;return c.jsx(w9,{asChild:!0,...o,focusable:!i,active:d,children:c.jsx(De.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:Ie(t.onMouseDown,A=>{!i&&A.button===0&&A.ctrlKey===!1?a.onValueChange(n):A.preventDefault()}),onKeyDown:Ie(t.onKeyDown,A=>{[" ","Enter"].includes(A.key)&&a.onValueChange(n)}),onFocus:Ie(t.onFocus,()=>{const A=a.activationMode!=="manual";!d&&!i&&A&&a.onValueChange(n)})})})});iz.displayName=nz;var sz="TabsContent",az=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...a}=t,o=_P(sz,r),l=oz(o.baseId,n),u=lz(o.baseId,n),d=n===o.value,A=E.useRef(d);return E.useEffect(()=>{const f=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(f)},[]),c.jsx(Jn,{present:i||d,children:({present:f})=>c.jsx(De.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:A.current?"0s":void 0},children:f&&s})})});az.displayName=sz;function oz(t,e){return`${t}-trigger-${e}`}function lz(t,e){return`${t}-content-${e}`}var fxe=ez,cz=rz,uz=iz,dz=az;const gg=fxe,If=E.forwardRef(({className:t,...e},r)=>c.jsx(cz,{ref:r,className:Z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));If.displayName=cz.displayName;const Cs=E.forwardRef(({className:t,...e},r)=>c.jsx(uz,{ref:r,className:Z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Cs.displayName=uz.displayName;const yn=E.forwardRef(({className:t,...e},r)=>c.jsx(dz,{ref:r,className:Z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));yn.displayName=dz.displayName;const Az=[{key:"1",eventName:"pass_end",description:"Pass Completed",category:"Possession"},{key:"1",modifier:"Shift",eventName:"key_pass",description:"Key Pass",category:"Possession"},{key:"1",modifier:"Ctrl",eventName:"assist",description:"Assist",category:"Possession"},{key:"1",modifier:"Alt",eventName:"pre_assist",description:"Pre-Assist",category:"Possession"},{key:"2",eventName:"shot_outcome",description:"Shot Outcome",category:"Shots"},{key:"2",modifier:"Shift",eventName:"goal",description:"Goal Scored",category:"Shots"},{key:"3",eventName:"dribble_success",description:"Dribble Success",category:"Dribbling"},{key:"3",modifier:"Shift",eventName:"dribble_fail",description:"Dribble Failure",category:"Dribbling"},{key:"4",eventName:"duel_ground",description:"Ground Duel",category:"Defense"},{key:"5",eventName:"duel_aerial",description:"Aerial Duel",category:"Defense"},{key:"P",eventName:"pressing_success",description:"Pressing Success",category:"Defense"},{key:"P",modifier:"Shift",eventName:"pressing_fail",description:"Pressing Failure",category:"Defense"},{key:"Q",eventName:"phase_buildup_end",description:"Build-Up Phase",category:"Phases"},{key:"W",eventName:"phase_consolidation",description:"Consolidation",category:"Phases"},{key:"E",eventName:"phase_final_third",description:"Final Third",category:"Phases"},{key:"M",eventName:"phase_midblock",description:"Mid Block",category:"Phases"},{key:"L",eventName:"phase_lowblock",description:"Low Block",category:"Phases"},{key:"Z",eventName:"transition_end",description:"Transition End",category:"Transitions"},{key:"O",eventName:"off_ball_run",description:"Off-Ball Run",category:"Off-Ball"},{key:"O",modifier:"Shift",eventName:"overlap",description:"Overlap",category:"Off-Ball"},{key:"O",modifier:"Alt",eventName:"underlap",description:"Underlap",category:"Off-Ball"},{key:"T",eventName:"third_man_run",description:"Third Man Run",category:"Off-Ball"},{key:"D",eventName:"dummy_run",description:"Dummy Run",category:"Off-Ball"},{key:"C",eventName:"chance_created",description:"Chance Created",category:"Performance"},{key:"R",eventName:"pressing_resistance",description:"Press Resistance",category:"Tactical"},{key:"F",eventName:"timestamp_fix",description:"Fix Timestamp",category:"Workflow"},{key:"Enter",eventName:"ai_accept",description:"AI Accept",category:"Workflow"},{key:"Backspace",eventName:"ai_reject",description:"AI Reject",category:"Workflow"}],hxe=({onKeyPress:t})=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Keyboard Shortcuts"}),c.jsx(We,{variant:"outline",className:"text-[10px]",children:"Live & Post-Match"})]}),c.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Az.map((e,r)=>{const n=e.modifier?`${e.modifier}+${e.key}`:e.key;return c.jsx(Fe,{onClick:()=>t==null?void 0:t(e.eventName,n),className:"p-1.5 border border-zinc-700 bg-zinc-900/50 hover:bg-zinc-800 hover:border-primary/50 cursor-pointer transition-all text-center select-none",children:c.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[c.jsx("span",{className:"text-sm font-mono font-bold text-primary",children:n}),c.jsx("span",{className:"text-[9px] text-muted-foreground leading-tight line-clamp-1",children:e.description})]})},`${e.key}-${e.modifier||""}-${r}`)})})]}),fz=({mappings:t,pressedButtons:e,onUpdateMapping:r,onResetMappings:n})=>{const[i,s]=E.useState(null),[a,o]=E.useState(!1),{events:l}=Tf(),{combos:u,holds:d}=E.useMemo(()=>{const m=[],p=[];return l.forEach(g=>{g.gamepadMappings&&g.gamepadMappings.forEach(x=>{x.modifier?m.push({buttonLabel:`${x.modifier}+${pi[x.buttonIndex]}`,eventName:g.eventName,eventDescription:g.label}):x.isHold&&p.push({buttonLabel:`Hold ${pi[x.buttonIndex]}`,eventName:g.eventName,eventDescription:g.label})})}),{combos:m,holds:p}},[l]);E.useEffect(()=>{if(i&&e.length>0){const m=e[0];r(m,i),s(null)}},[e,i,r]);const A=m=>c.jsxs("div",{className:"flex flex-col p-2 border rounded-md bg-secondary/20 hover:bg-secondary/40 transition-colors",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[c.jsx("span",{className:"font-medium text-xs truncate text-primary flex-1",title:m.eventName,children:m.eventName.replace(/_/g," ")}),c.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded whitespace-nowrap ${i===m.eventName?"bg-primary text-primary-foreground animate-pulse":"bg-muted text-muted-foreground"}`,children:m.index===-1?"-":pi[m.index]||`B${m.index}`})]}),c.jsx("div",{className:"text-[9px] text-muted-foreground truncate mb-2",title:m.eventDescription,children:m.eventDescription}),c.jsx(te,{variant:i===m.eventName?"destructive":"outline",size:"sm",className:"h-6 text-[10px] w-full",onClick:()=>s(m.eventName),disabled:i!==null&&i!==m.eventName,children:i===m.eventName?"Cancel":"Remap"})]},m.eventName),f=(m,p,g,x)=>c.jsxs("div",{className:"flex flex-col p-2 border border-dashed rounded-md bg-muted/10 opacity-80",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[c.jsx("span",{className:"font-medium text-xs truncate text-primary flex-1",title:p,children:p.replace(/_/g," ")}),c.jsx("span",{className:"text-[10px] font-mono px-1.5 py-0.5 rounded bg-muted text-muted-foreground whitespace-nowrap",children:m})]}),c.jsxs("div",{className:"text-[9px] text-muted-foreground truncate mb-2 flex items-center gap-1",children:[x,g]}),c.jsx(te,{variant:"ghost",size:"sm",className:"h-6 text-[10px] w-full cursor-not-allowed",disabled:!0,children:"Dynamic"})]},p),h=Az.reduce((m,p)=>{const g=p.category||"Other";return m[g]||(m[g]=[]),m[g].push(p),m},{});return c.jsxs(Ba,{open:a,onOpenChange:m=>{o(m),m||s(null)},children:[c.jsx(EP,{asChild:!0,children:c.jsxs(te,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(A8,{className:"w-4 h-4"}),"Controller Config"]})}),c.jsxs(Rs,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col p-6",children:[c.jsxs(ks,{className:"pb-4",children:[c.jsxs(Ls,{className:"flex items-center gap-2",children:[c.jsx(cl,{className:"w-5 h-5 text-primary"}),"Input Configuration"]}),c.jsx(Nf,{children:"Configure your bindings for Gamepad and Keyboard."})]}),c.jsxs(gg,{defaultValue:"controller",className:"flex-1 flex flex-col overflow-hidden",children:[c.jsxs(If,{className:"grid w-full grid-cols-2 mb-4",children:[c.jsxs(Cs,{value:"controller",className:"gap-2",children:[c.jsx(PA,{className:"w-4 h-4"})," Controller"]}),c.jsxs(Cs,{value:"keyboard",className:"gap-2",children:[c.jsx(jL,{className:"w-4 h-4"})," Keyboard"]})]}),c.jsx(yn,{value:"controller",className:"flex-1 overflow-y-auto pr-2",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-semibold uppercase text-muted-foreground flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," Face & Triggers"]}),c.jsx("div",{className:"grid gap-2",children:t.filter(m=>m.index>=0&&m.index<=3||m.index>=4&&m.index<=7).map(A)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-semibold uppercase text-muted-foreground flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," D-Pad & System"]}),c.jsx("div",{className:"grid gap-2",children:t.filter(m=>m.index>=12&&m.index<=15||m.index>=8&&m.index<=11).map(A)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-semibold uppercase text-muted-foreground flex items-center gap-2",children:[c.jsx(Eu,{className:"w-3 h-3 text-yellow-500"})," Combos (Dynamic)"]}),c.jsx("div",{className:"grid gap-2",children:u.map((m,p)=>f(m.buttonLabel,m.eventName,m.eventDescription))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-semibold uppercase text-muted-foreground flex items-center gap-2",children:[c.jsx(Qp,{className:"w-3 h-3 text-purple-500"})," Holds (Dynamic)"]}),c.jsx("div",{className:"grid gap-2",children:d.map((m,p)=>f(m.buttonLabel,m.eventName,m.eventDescription))})]})]})}),c.jsxs(yn,{value:"keyboard",className:"flex-1 overflow-y-auto pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-4",children:Object.entries(h).map(([m,p])=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-semibold uppercase text-muted-foreground flex items-center gap-2",children:[c.jsx(jL,{className:"w-3 h-3"})," ",m]}),c.jsx("div",{className:"grid gap-2",children:p.map((g,x)=>c.jsxs("div",{className:"flex flex-col p-2 border rounded-md bg-secondary/10 opacity-90",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[c.jsx("span",{className:"font-medium text-xs truncate text-primary flex-1",children:g.description}),c.jsxs("span",{className:"text-[10px] font-mono px-1.5 py-0.5 rounded bg-muted text-foreground whitespace-nowrap border border-white/5",children:[g.modifier?`${g.modifier}+`:"",g.key]})]}),c.jsx("div",{className:"text-[9px] text-muted-foreground truncate flex items-center justify-between",children:c.jsx("span",{children:g.eventName})})]},`${g.eventName}-${x}`))})]},m))}),c.jsx("div",{className:"mt-4 p-3 rounded-lg border border-yellow-500/20 bg-yellow-500/5 text-yellow-500/80 text-xs text-center",children:"Keyboard bindings are currently standard and follow the TACTA Analysis Protocol. Re-binding coming soon."})]})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t mt-4",children:[c.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[c.jsx(PA,{className:"w-3 h-3"}),e.length>0?`Pressed: ${e.map(m=>pi[m]||m).join(", ")}`:"Press controller buttons to test input"]}),c.jsxs(te,{variant:"ghost",size:"sm",onClick:n,className:"text-destructive hover:text-destructive",children:[c.jsx(po,{className:"w-3 h-3 mr-2"}),"Reset Defaults"]})]})]})]})},pxe=t=>{switch(t){case"Basic":return"bg-blue-500/10 border-blue-500/40 hover:border-blue-400";case"Modifier":return"bg-purple-500/10 border-purple-500/40 hover:border-purple-400";case"Hold":return"bg-amber-500/10 border-amber-500/40 hover:border-amber-400";case"D-Pad":return"bg-emerald-500/10 border-emerald-500/40 hover:border-emerald-400";default:return"bg-zinc-800 border-zinc-700"}},S0=t=>{switch(t){case"Basic":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"Modifier":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"Hold":return"bg-amber-500/20 text-amber-300 border-amber-500/30";case"D-Pad":return"bg-emerald-500/20 text-emerald-300 border-emerald-500/30";default:return""}},mxe=({onButtonPress:t,pressedButtons:e=[]})=>{const{events:r}=Tf(),n=E.useMemo(()=>{const u=[];return r.forEach(d=>{d.gamepadMappings&&d.gamepadMappings.forEach(A=>{let f="Basic",h=pi[A.buttonIndex];A.modifier?(f="Modifier",h=`${A.modifier}+${pi[A.buttonIndex]}`):A.isHold?(f="Hold",h=`${pi[A.buttonIndex]} (Hold)`):A.buttonIndex>=12&&A.buttonIndex<=15&&(f="D-Pad"),u.push({button:h,eventName:d.eventName,description:d.label,category:f,modifier:A.modifier})})}),u},[r]),i=n.filter(u=>u.category==="Basic"),s=n.filter(u=>u.category==="D-Pad"),a=n.filter(u=>u.category==="Modifier"),o=n.filter(u=>u.category==="Hold"),l=(u,d)=>c.jsx(Fe,{onClick:()=>t==null?void 0:t(u.eventName,u.button),className:`p-1.5 border transition-all cursor-pointer select-none min-h-[54px] flex flex-col justify-center ${pxe(u.category)}`,children:c.jsxs("div",{className:"flex flex-col items-center gap-0.5 text-center",children:[c.jsx("span",{className:"text-xs font-mono font-bold text-primary leading-none",children:u.button}),c.jsx("span",{className:"text-[8px] sm:text-[9px] text-muted-foreground leading-tight line-clamp-2 font-medium",children:u.description})]})},`${u.button}-${d}`);return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-1.5",children:[c.jsx(PA,{className:"w-3.5 h-3.5"}),"Controller Mappings"]}),c.jsx(We,{variant:"outline",className:"text-[10px]",children:"Live Config"})]}),i.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(We,{variant:"outline",className:`text-[9px] ${S0("Basic")}`,children:"Basic"}),c.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Face, Shoulder, Triggers"})]}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-1",children:i.map((u,d)=>l(u,d))})]}),s.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(We,{variant:"outline",className:`text-[9px] ${S0("D-Pad")}`,children:"D-Pad"}),c.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Tactical Phases"})]}),c.jsx("div",{className:"grid grid-cols-4 gap-1",children:s.map((u,d)=>l(u,d))})]}),a.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(We,{variant:"outline",className:`text-[9px] ${S0("Modifier")}`,children:"Combos"}),c.jsx("span",{className:"text-[9px] text-muted-foreground",children:"RT+, LT+, View+"})]}),c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-1",children:a.map((u,d)=>l(u,d))})]}),o.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(We,{variant:"outline",className:`text-[9px] ${S0("Hold")}`,children:"Hold"}),c.jsx("span",{className:"text-[9px] text-muted-foreground",children:"500ms+ Press"})]}),c.jsx("div",{className:"grid grid-cols-2 gap-1",children:o.map((u,d)=>l(u,d))})]}),c.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-zinc-800 text-[9px] text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-sm bg-blue-500/30 border border-blue-500/50"}),c.jsx("span",{children:"Basic"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-sm bg-emerald-500/30 border border-emerald-500/50"}),c.jsx("span",{children:"D-Pad"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-sm bg-purple-500/30 border border-purple-500/50"}),c.jsx("span",{children:"Combo"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-sm bg-amber-500/30 border border-amber-500/50"}),c.jsx("span",{children:"Hold"})]})]})]})},gxe=({userRole:t,isEditMode:e,layoutConfig:r,toggleComponentVisibility:n,teams:i,selectedTeam:s,onTeamUpload:a,onSelectTeam:o,trackingMode:l,keyboardBuffer:u,showMappings:d,mappings:A,pressedButtons:f,onUpdateMapping:h,onResetMappings:m,handleGameEvent:p,isEditingMode:g,setIsEditingMode:x,hasPermission:v})=>{var y,w,b,S;return c.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 flex flex-col gap-3 h-full min-h-0",children:t==="eye_spotter"?c.jsx(eo,{id:"spotter-panel",label:"Spotter Panel",isEditMode:e,isHidden:(y=r["spotter-panel"])==null?void 0:y.hidden,onToggleVisibility:n,className:"h-full",children:c.jsx(G0e,{})}):c.jsxs(eo,{id:"left-tools",label:"Team Tools",isEditMode:e,isHidden:(w=r["left-tools"])==null?void 0:w.hidden,onToggleVisibility:n,className:"flex-1 min-h-0 overflow-y-auto pr-1 space-y-2 no-scrollbar",children:[t!=="live_tagger"&&c.jsx("div",{id:"team-upload-section",children:c.jsx(cxe,{onUpload:a})}),i.size>0&&c.jsx("div",{id:"team-grid-section",children:c.jsx(uxe,{teams:Array.from(i.keys()),selectedTeam:s,onSelectTeam:o})}),l==="LIVE"&&u&&c.jsxs("div",{id:"live-voice-buffer",className:"bg-black/90 border border-primary p-2 rounded-lg text-center shadow-lg",children:[c.jsx("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-semibold",children:"Voice Buffer"}),c.jsxs("div",{className:"text-2xl font-mono font-bold text-primary mt-0.5",children:["#",u]})]}),d&&(l==="LIVE"||l==="POST_MATCH")&&c.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-left-4 duration-300",children:[l==="POST_MATCH"&&v("dashboard.post.edit")&&c.jsx(te,{variant:g?"secondary":"outline",size:"sm",className:"w-full h-7 text-[11px]",onClick:()=>x(!g),children:g?"Exit Edit":"Edit Events"}),l==="LIVE"?c.jsxs("div",{id:"controller-config-section",className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between px-1",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:"Overlays"}),c.jsxs(te,{variant:"ghost",size:"sm",className:Z("h-7 px-2 gap-2 text-[10px] font-bold uppercase transition-all",(b=r["live-stats"])!=null&&b.hidden?"text-slate-500":"text-cyan-400 bg-cyan-400/10"),onClick:()=>n("live-stats"),children:[c.jsx(RA,{className:"h-3 w-3"}),"Live Stats"]})]}),c.jsx(fz,{mappings:A,pressedButtons:f,onUpdateMapping:h,onResetMappings:m})]}),c.jsx(mxe,{onButtonPress:(C,T)=>p(C,T),pressedButtons:f})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"px-1 flex flex-col gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:"Overlays"}),c.jsxs(te,{variant:"ghost",size:"sm",className:Z("h-7 px-2 gap-2 text-[10px] font-bold uppercase transition-all",(S=r["live-stats"])!=null&&S.hidden?"text-slate-500":"text-cyan-400 bg-cyan-400/10"),onClick:()=>n("live-stats"),children:[c.jsx(RA,{className:"h-3 w-3"}),"Live Stats"]})]}),c.jsx(hxe,{onKeyPress:(C,T)=>p(C,`Key:${T}`)})]})]})]})})},xxe=({value:t,onChange:e})=>c.jsx("div",{className:"grid grid-cols-3 gap-1 w-full max-w-[200px] mx-auto aspect-[3/4] bg-slate-900/50 p-2 rounded-lg border border-white/10",children:Array.from({length:6*3}).map((i,s)=>{const a=s+1,o=t===a;return c.jsx("button",{onClick:()=>e(a),className:Z("rounded text-[10px] font-bold flex items-center justify-center transition-all","hover:bg-primary/20 hover:text-primary",o?"bg-primary text-black font-black shadow-[0_0_10px_rgba(34,197,94,0.4)]":"bg-white/5 text-slate-500"),children:a},a)})}),vxe=({systemEvents:t,onExport:e})=>{const{socket:r}=Cf(),[n,i]=E.useState([]);E.useState("");const[s,a]=E.useState(null),[o,l]=E.useState({zone:0});E.useEffect(()=>{if(!r)return;const f=h=>{const m={id:h.id,time:h.matchTime,eventName:"Spotter Ping",target:h.target,source:"PING"};i(p=>[m,...p]),Ge.info(`Reality Flag: Spotter Ping ${h.target}`)};return r.on("spotter-ping",f),()=>{r.off("spotter-ping",f)}},[r]);const u=(f,h="HOME")=>{const m={id:Date.now(),time:"LIVE",eventName:f,target:h,source:"VOICE"};i(p=>[m,...p])},d=f=>{a(f),l({zone:f.zone||0,note:f.validationNotes||""})},A=()=>{s&&(s.zone=o.zone,s.validationNotes=o.note,s.isValidated=!0,Ge.success(`Updated Event #${s.id}: Zone ${o.zone}`),a(null))};return c.jsxs("div",{className:"flex flex-col h-full bg-slate-950/20 gap-4 p-4 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:c.jsx(tne,{className:"w-5 h-5 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-sm font-bold uppercase tracking-tight text-white",children:"System Audit Log"}),c.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"REALITY vs SYSTEM MIRROR"})]})]}),c.jsx("div",{className:"flex gap-2 items-center",children:c.jsxs(te,{variant:"outline",size:"sm",className:"h-8 text-[10px] gap-2 border-white/5 bg-slate-900/50",onClick:e,children:[c.jsx(sne,{className:"w-3.5 h-3.5"})," EXPORT REPORT"]})})]}),c.jsxs("div",{className:"grid grid-cols-2 flex-1 min-h-0 gap-4",children:[c.jsxs(Fe,{className:"flex flex-col bg-slate-900/30 border-white/5 overflow-hidden",children:[c.jsxs("div",{className:"p-3 border-b border-white/5 bg-slate-800/50 flex items-center justify-between",children:[c.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest flex items-center gap-2 text-primary",children:[c.jsx(Hv,{className:"w-3 h-3"})," Reality Feed"]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>u("Possession","HOME"),className:"text-[9px] px-2 py-0.5 rounded-full bg-primary/20 text-primary border border-primary/30",children:"HOME"}),c.jsx("button",{onClick:()=>u("Possession","AWAY"),className:"text-[9px] px-2 py-0.5 rounded-full bg-destructive/20 text-destructive border border-destructive/30",children:"AWAY"})]})]}),c.jsx(Zn,{className:"flex-1 p-2",children:c.jsxs("div",{className:"space-y-2",children:[n.map(f=>c.jsxs("div",{className:"p-2 rounded-lg bg-slate-800/20 border border-white/5 flex items-center justify-between animate-in slide-in-from-left-2 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(We,{variant:"outline",className:"text-[9px] font-mono h-4 px-1 border-white/10",children:f.time}),c.jsx("span",{className:"text-[11px] font-bold",children:f.eventName}),c.jsx("span",{className:Z("text-[9px] font-black",f.target==="HOME"?"text-primary":"text-destructive"),children:f.target})]}),c.jsx("div",{className:"flex items-center gap-1 opacity-50",children:c.jsx("span",{className:"text-[8px] uppercase font-bold",children:f.source})})]},f.id)),n.length===0&&c.jsx("div",{className:"h-32 flex items-center justify-center text-[10px] text-slate-500 italic",children:"Waiting for Spotter voice/ping..."})]})})]}),c.jsxs(Fe,{className:"flex flex-col bg-slate-900/30 border-white/5 overflow-hidden",children:[c.jsxs("div",{className:"p-3 border-b border-white/5 bg-slate-800/50",children:[c.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest flex items-center gap-2 text-emerald-400",children:[c.jsx(un,{className:"w-3 h-3"})," System Feed"]}),c.jsx("span",{className:"ml-auto text-[9px] text-slate-500 italic px-2",children:"Click Event to Edit"})]}),c.jsx(Zn,{className:"flex-1 p-2",children:c.jsxs("div",{className:"space-y-2",children:[t.slice(0,50).map((f,h)=>c.jsxs("div",{onClick:()=>d(f),className:"p-2 rounded-lg bg-slate-800/40 border border-white/5 space-y-2 hover:bg-white/5 cursor-pointer transition-colors group",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(We,{variant:"outline",className:"text-[9px] font-mono h-4 px-1 border-white/10",children:f.matchTime||"00:00"}),c.jsx("span",{className:"text-[11px] font-bold uppercase",children:f.eventName})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[f.zone&&c.jsxs(We,{variant:"secondary",className:"text-[9px] h-4 px-1 bg-white/10",children:["Z",f.zone]}),c.jsx(We,{className:"bg-emerald-500/20 text-emerald-500 border-none text-[8px] h-4 group-hover:bg-emerald-500 group-hover:text-black transition-colors",children:"EDIT"})]})]}),f.isCalculated&&c.jsx("div",{className:"flex gap-2",children:c.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-blue-500 font-bold bg-blue-500/10 px-1.5 py-0.5 rounded",children:[c.jsx(un,{className:"w-3 h-3"})," CALCULATED"]})})]},f.id)),t.length===0&&c.jsx("div",{className:"h-32 flex items-center justify-center text-[10px] text-slate-500 italic",children:"No system events recorded."})]})})]})]}),c.jsx(Ba,{open:!!s,onOpenChange:f=>!f&&a(null),children:c.jsxs(Rs,{className:"bg-slate-900 border-white/10 text-white sm:max-w-md",children:[c.jsx(ks,{children:c.jsxs(Ls,{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{children:["Edit Event: ",c.jsx("span",{className:"text-primary",children:s==null?void 0:s.eventName})]}),c.jsx(We,{variant:"outline",className:"font-mono bg-black/20",children:s==null?void 0:s.matchTime})]})}),c.jsx("div",{className:"grid gap-4 py-4",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(bo,{className:"text-xs text-slate-400",children:"Tactical Zone"}),c.jsx(xxe,{value:o.zone,onChange:f=>l(h=>({...h,zone:f}))}),c.jsxs("div",{className:"text-center text-xs font-mono text-slate-500",children:["Current: ",o.zone?`Zone ${o.zone}`:"None"]})]}),c.jsxs("div",{className:"flex-1 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(bo,{className:"text-xs text-slate-400",children:"Validation Notes"}),c.jsx(jr,{value:o.note,onChange:f=>l(h=>({...h,note:f.target.value})),className:"bg-black/20 border-white/10 text-xs h-8",placeholder:"Reason for change..."})]}),c.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded text-[10px] text-red-300",children:c.jsx("p",{children:"Changing zones will affect analytics heatmaps and passing networks linked to this event."})})]})]})}),c.jsxs(mg,{children:[c.jsx(te,{size:"sm",variant:"ghost",className:"h-8 text-xs hover:bg-white/10",onClick:()=>a(null),children:"Cancel"}),c.jsx(te,{size:"sm",className:"h-8 text-xs bg-primary text-black hover:bg-primary/90",onClick:A,children:"Save Changes"})]})]})}),c.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 p-3 rounded-xl flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Qu,{className:"w-5 h-5 text-destructive"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] font-bold text-destructive uppercase",children:"Audit Alert"}),c.jsx("p",{className:"text-[11px] font-medium text-white",children:"3 Missed events detected in last phase."})]})]}),c.jsx(te,{variant:"destructive",size:"sm",className:"h-7 text-[10px] font-black italic",children:"MARK MISSED"})]})]})},yxe=t=>{const e=t.toLowerCase();return e.includes("goal")?wu:e.includes("pass")?ql:e.includes("shot")?cI:e.includes("foul")?mo:e.includes("offside")?i8:e.includes("sub")?Xl:e.includes("penalty")?c8:e.includes("corner")?t8:un},bxe=({events:t,teamNames:e,onUndoEvent:r,onMissedEvent:n,onToggleDelay:i,onEventClick:s,editingEventId:a})=>{const{user:o}=Ta(),[l,u]=E.useState(Date.now()),d=E.useRef(null),A=(o==null?void 0:o.role)==="logger"||(o==null?void 0:o.role)==="admin",f=[...t].reverse().slice(0,30);return E.useEffect(()=>{if(d.current){const h=d.current.querySelector("[data-radix-scroll-area-viewport]");h&&(h.scrollTop=0)}},[t]),E.useEffect(()=>{const h=setInterval(()=>u(Date.now()),1e3);return()=>clearInterval(h)},[]),c.jsxs(Fe,{className:"h-full flex flex-col border-none bg-transparent shadow-none",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 pb-2",children:[c.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[c.jsx(un,{className:"w-5 h-5 text-primary animate-pulse"}),c.jsx("span",{className:"tracking-tight",children:"Match Feed"})]}),c.jsx("div",{className:"flex gap-3 text-xs font-semibold",children:c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary animate-pulse"}),(e==null?void 0:e.teamA)??"Team A"]})})]}),A&&c.jsxs("div",{className:"px-4 pb-2 flex gap-2",children:[c.jsxs(te,{variant:"outline",size:"sm",className:"flex-1 h-8 gap-2 border-orange-500/30 text-orange-600 hover:bg-orange-500/10 text-[10px] font-bold uppercase tracking-wider",onClick:()=>{n&&n()},children:[c.jsx(Jre,{className:"w-3.5 h-3.5"}),"Missed Event"]}),c.jsxs(te,{variant:"outline",size:"sm",className:"flex-1 h-8 gap-2 border-blue-500/30 text-blue-600 hover:bg-blue-500/10 text-[10px] font-bold uppercase tracking-wider",onClick:()=>{},children:[c.jsx(o8,{className:"w-3.5 h-3.5"}),"Audit Note"]})]}),c.jsx(Zn,{className:"flex-1 px-4",ref:d,children:c.jsxs("div",{className:"relative space-y-4 py-4 pl-5",children:[c.jsx("div",{className:"absolute left-3 top-4 bottom-4 w-[3px] bg-gradient-to-b from-primary/20 via-border to-destructive/20 rounded-full"}),f.length===0?c.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm italic",children:["Match hasn't started yet.",c.jsx("br",{}),"Waiting for events"]}):f.map((h,m)=>{const p=yxe(h.eventName||""),x=h.team==="TEAM_A"?"bg-primary":"bg-destructive",y=l-new Date(h.timestamp).getTime()<1e4&&!h.isCalculated;return c.jsxs("div",{className:Z("relative flex gap-4 group transition-all animate-in fade-in slide-in-from-left-4 duration-300"),children:[c.jsx("div",{className:Z("absolute left-0 mt-2 w-3.5 h-3.5 rounded-full border-2 border-background shadow-lg z-10 transition-transform group-hover:scale-125",x)}),c.jsxs("div",{className:Z("flex-1 rounded-xl border border-border/50 bg-card/40 backdrop-blur-md p-3 shadow-sm transition-all duration-300","hover:shadow-md hover:bg-card/60 group/card relative overflow-hidden",a===h.id&&"ring-2 ring-yellow-400 bg-yellow-400/5"),onClick:()=>s==null?void 0:s(h),children:[c.jsx("div",{className:Z("absolute top-0 left-0 w-1 h-full opacity-30 group-hover/card:opacity-100 transition-opacity",x)}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:Z("p-1.5 rounded-lg shadow-sm text-white",x),children:c.jsx(p,{className:"w-3.5 h-3.5"})}),c.jsx("span",{className:"font-bold text-xs uppercase tracking-tight",children:h.eventName})]}),c.jsxs("span",{className:"text-xs font-mono text-muted-foreground flex items-center gap-1",children:[c.jsx(Qv,{className:"w-3 h-3"}),h.matchTime||"00:00"]})]}),h.isPendingZone&&c.jsxs("div",{className:"flex items-center gap-1.5 mt-1 text-amber-500 animate-pulse",children:[c.jsx(cw,{className:"w-3 h-3"}),c.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:"Awaiting Zone"})]}),c.jsxs("div",{className:"flex justify-between items-end mt-3",children:[c.jsx("div",{children:h.player?c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium",children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-muted flex items-center justify-center font-semibold shadow-inner",children:h.player.name.charAt(0)}),h.player.name]}):c.jsx("span",{className:"text-xs text-muted-foreground italic",children:"No player assigned"})}),A&&!h.isCalculated&&c.jsx(te,{variant:"ghost",size:"icon",className:Z("h-7 w-7 transition-all ml-1",h.isDelayed?"text-orange-500 bg-orange-500/10":"text-muted-foreground hover:text-blue-500 hover:bg-blue-500/10"),title:"Mark as Delayed",onClick:w=>{w.stopPropagation(),i&&i(h.id)},children:c.jsx(Qv,{className:"w-3.5 h-3.5"})}),y&&r&&c.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-all",onClick:()=>r(h.id),children:c.jsx(h8,{className:"w-3.5 h-3.5"})})]})]})]},`${h.id}-${m}`)})]})})]})},wxe=({players:t,selectedPlayerId:e,onSelectPlayer:r,teamName:n,startingNumbers:i})=>{const a=i||[1,2,3,4,5,6,7,8,9,10,11],o=t.filter(l=>a.includes(l.Number)).sort((l,u)=>l.Number-u.Number);return c.jsxs(Fe,{className:"h-auto flex flex-col border-r border-border bg-card rounded-none border-y-0 border-l-0",children:[c.jsxs("div",{className:"p-4 border-b border-border",children:[c.jsx("h2",{className:"font-semibold text-lg",children:"Starting XI"}),c.jsx("p",{className:"text-sm text-muted-foreground truncate",children:n})]}),c.jsx(Zn,{className:"flex-1",children:c.jsx("div",{className:"p-1 grid grid-cols-3 gap-1",children:o.map(l=>c.jsxs("div",{onClick:()=>r(l.ID),className:`flex flex-col items-center justify-center p-1 rounded cursor-pointer transition-all border h-16 ${e===l.ID?"bg-primary/20 border-primary":"bg-card hover:bg-secondary/50 border-border hover:border-primary/30"}`,children:[c.jsx("span",{className:"text-lg font-bold font-mono text-primary leading-none",children:l.Number||"#"}),c.jsx("p",{className:"font-medium text-[10px] text-center leading-tight line-clamp-1 w-full px-0.5 mt-0.5",children:l.Surname})]},l.ID))})})]})},Exe=({videoFile:t,currentVideoTime:e,matchName:r="Unknown Match",preSelectedEvent:n})=>{const{toast:i}=lc(),[s,a]=E.useState(!1),[o,l]=E.useState([]),[u,d]=E.useState(""),A=n||"General",f=x=>{const v=Math.floor(x/60),y=Math.floor(x%60);return`${v.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},h=x=>{const v=x.match(/^(\d+):(\d{2})$/);if(v)return parseInt(v[1])*60+parseInt(v[2]);const y=parseFloat(x);return isNaN(y)?null:y},m=async x=>{if(!t){i({title:"No Video",description:"Please load a video file first",variant:"destructive"});return}const v=x??e;a(!0);try{const y=new FormData;y.append("video",t),y.append("timestamp_seconds",v.toString()),y.append("match_name",r),y.append("event_type",A==="General"?"":A),y.append("window_seconds","10.0");const b=await(await fetch(`${Cu}/api/crowd/request-review-upload`,{method:"POST",body:y})).json();if(b.success)i({title:" Sent to Crowd!",description:`Clip at ${f(v)} queued for fan annotation.`}),l(S=>[...S,{clip_id:b.clip_id,filename:b.clip_filename,stage:"crowd_voting",status:"pending",consensus_event:null,vote_count:0,required_votes:10,vote_breakdown:{}}]);else throw new Error(b.error||"Failed to send clip")}catch(y){console.error("Crowd review error:",y),i({title:"Error",description:y instanceof Error?y.message:"Failed to send clip for review",variant:"destructive"})}finally{a(!1)}},p=async x=>{try{const y=await(await fetch(`${Cu}/api/crowd/status/${x}`)).json();y.success&&l(w=>w.map(b=>b.clip_id===x?{...b,stage:y.stage,status:y.status,consensus_event:y.consensus_event,vote_count:y.vote_count,vote_breakdown:y.vote_breakdown}:b))}catch(v){console.error("Status check error:",v)}},g=()=>{const x=h(u);x!==null?(m(x),d("")):i({title:"Invalid Format",description:"Use MM:SS or seconds (e.g., 45:30 or 2730)",variant:"destructive"})};return c.jsxs(Fe,{className:"p-4 bg-card/50 border-2 border-primary/20 mt-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(go,{className:"w-5 h-5 text-primary"}),c.jsx("h3",{className:"font-bold text-sm uppercase tracking-wider",children:"Crowd Annotation"}),c.jsxs(We,{variant:"outline",className:"ml-auto text-[10px]",children:[o.length," pending"]})]}),n&&c.jsxs("div",{className:"mb-4 p-2 bg-primary/5 rounded border border-primary/20",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-bold block mb-1",children:"Active Event Context"}),c.jsx(We,{variant:"secondary",className:"text-[11px] font-bold uppercase",children:n})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"flex gap-2",children:c.jsxs(te,{onClick:()=>m(),disabled:s||!t,className:"flex-1 gap-2",variant:"default",children:[s?c.jsx(bu,{className:"w-4 h-4 animate-spin"}):c.jsx(jne,{className:"w-4 h-4"}),"Send to Fans (",f(e),")"]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(jr,{placeholder:"MM:SS or seconds",value:u,onChange:x=>d(x.target.value),className:"h-9 text-xs"}),c.jsx(te,{onClick:g,disabled:!u||s,variant:"outline",size:"sm",className:"h-9",children:c.jsx(Qv,{className:"w-4 h-4"})})]}),!t&&c.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Load a video to enable crowd annotation"})]}),o.length>0&&c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx("span",{className:"text-[10px] text-muted-foreground uppercase font-bold",children:"Pending Reviews"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:o.map(x=>c.jsxs("div",{className:"p-2 bg-muted/50 rounded-lg border border-border/50 text-xs",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"font-mono",children:["#",x.clip_id]}),c.jsxs("div",{className:"flex items-center gap-2",children:[x.status==="confirmed"?c.jsxs(We,{variant:"default",className:"bg-green-500 text-[10px]",children:[c.jsx(e8,{className:"w-3 h-3 mr-1"}),x.consensus_event]}):x.status==="ambiguous"?c.jsxs(We,{variant:"destructive",className:"text-[10px]",children:[c.jsx(Qu,{className:"w-3 h-3 mr-1"}),"Ambiguous"]}):c.jsxs(We,{variant:"secondary",className:"text-[10px]",children:[c.jsx(Ene,{className:"w-3 h-3 mr-1"}),x.vote_count,"/",x.required_votes," votes"]}),c.jsx(te,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>p(x.clip_id),title:"Refresh status",children:c.jsx(Xl,{className:"w-3 h-3"})})]})]}),Object.keys(x.vote_breakdown).length>0&&c.jsx("div",{className:"mt-2 flex gap-1 flex-wrap",children:Object.entries(x.vote_breakdown).map(([v,y])=>c.jsxs(We,{variant:"outline",className:"text-[9px]",children:[v,": ",y]},v))})]},x.clip_id))})]})]})};class WB extends E.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error(`[SafetyBoundary] Error in ${this.props.name}:`,e,r)}render(){var e;return this.state.hasError?c.jsxs("div",{className:"p-2 m-1 bg-destructive/20 border border-destructive/50 rounded text-destructive text-[10px] font-mono overflow-auto max-h-[100px]",children:[c.jsxs("strong",{children:[this.props.name," Crash:"]})," ",(e=this.state.error)==null?void 0:e.message]}):this.props.children}}const Sxe=({userRole:t,isEditMode:e,layoutConfig:r,toggleComponentVisibility:n,events:i,setEvents:s,teams:a,selectedTeam:o,teamNames:l,onPlayerSelect:u,trackingMode:d,useVideoMode:A,videoFile:f,videoTime:h,lastEventButtonLabel:m})=>{var p,g,x,v;return t==="eye_spotter"?null:c.jsx("div",{className:"hidden lg:flex lg:col-span-3 flex-col gap-3 h-full min-h-0",children:t==="logger"?c.jsx(eo,{id:"logger-audit",label:"Logger Audit",isEditMode:e,isHidden:(p=r["logger-audit"])==null?void 0:p.hidden,onToggleVisibility:n,className:"flex-1",children:c.jsx(vxe,{systemEvents:i,onExport:()=>Ge.success("Audit Report Exported")})}):c.jsxs(c.Fragment,{children:[c.jsx(eo,{id:"predictor-stats",label:"Prediction Engine",isEditMode:e,isHidden:(g=r["predictor-stats"])==null?void 0:g.hidden,onToggleVisibility:n,className:"shrink-0",children:c.jsx(cV,{className:"shrink-0"})}),c.jsx(eo,{id:"event-log",label:"Event Log",isEditMode:e,isHidden:(x=r["event-log"])==null?void 0:x.hidden,onToggleVisibility:n,className:"flex-1 min-h-0",children:c.jsx("div",{id:"event-log-container",className:"h-full",children:c.jsx(WB,{name:"EventLog",children:c.jsx(bxe,{events:i,onUndoEvent:y=>{s(w=>w.filter(b=>b.id!==y)),Ge.success("Event removed from log")},onMissedEvent:()=>{const y={id:+`${Date.now()}${Math.floor(Math.random()*1e3)}`,timestamp:new Date().toISOString(),eventName:"missed_event",team:o||"TEAM_A",buttonLabel:"LOGGER",isMissed:!0,mode:d};s(w=>[...w,y]),Ge.warning("Missed event recorded in audit log")},onToggleDelay:y=>{s(w=>w.map(b=>b.id===y?{...b,isDelayed:!b.isDelayed}:b)),Ge.info("Event delay flag toggled")},teamNames:l})})})}),c.jsx(eo,{id:"right-panel-bottom",label:"Context & Review",isEditMode:e,isHidden:(v=r["right-panel-bottom"])==null?void 0:v.hidden,onToggleVisibility:n,className:"flex-1 min-h-0 overflow-y-auto pl-1 no-scrollbar",children:c.jsxs("div",{id:"context-review-section",className:"h-full",children:[a.get(o)?c.jsx(WB,{name:"PlayerSelectionSidebar",children:c.jsx(wxe,{players:a.get(o).PlayerData,selectedPlayerId:null,onSelectPlayer:u,teamName:o})}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground opacity-30 border border-dashed rounded-lg bg-card/30",children:[c.jsx(mne,{className:"w-8 h-8 mb-2"}),c.jsxs("span",{className:"text-[10px] font-medium text-center",children:["Select a team",c.jsx("br",{}),"to view roster"]})]}),A&&d==="POST_MATCH"&&c.jsx(Exe,{videoFile:f,currentVideoTime:h,matchName:Array.from(a.keys()).join(" vs ")||"Unknown Match",preSelectedEvent:m})]})})]})})},Cxe=({userRole:t,isEditMode:e,layoutConfig:r,toggleComponentVisibility:n,teams:i,selectedTeam:s,handleTeamUpload:a,handleTeamSelect:o,trackingMode:l,keyboardBuffer:u,showMappings:d,mappings:A,pressedButtons:f,updateMapping:h,resetMappings:m,handleGameEvent:p,isEditingMode:g,setIsEditingMode:x,hasPermission:v,showAnalysisView:y,videoMode:w,useVideoMode:b,isIPTVConfigured:S,livePlayerRef:C,events:T,showFeed:B,setUseVideoMode:_,setVideoMode:I,showIPTVBrowser:L,setShowIPTVBrowser:N,showFIFAPlusBrowser:R,setShowFIFAPlusBrowser:M,videoFile:k,remoteVideoUrl:O,videoTime:j,setVideoTime:D,seekTime:F,setSeekTime:$,isVideoPlaying:U,setIsVideoPlaying:K,socket:V,axes:q,buttons:H,teamNames:z,handlePlayerSelect:ae,analysisResults:X,quickSelectorState:ne,thirdsZone:ee,setVideoFile:G,setServerVideoPath:ge,sessionMode:ye,setShowAdminWaitingRoom:Me,togglePiP:ce,toggleWatchMatch:Be,setEvents:_e,lastEventButtonLabel:He})=>{var Ce,Qe,me,Pe,be,le,Ee;const Se=t==="eye_spotter"?(Ce=r["spotter-panel"])==null?void 0:Ce.hidden:(Qe=r["left-tools"])==null?void 0:Qe.hidden,it=t==="eye_spotter"?!0:t==="logger"?(me=r["logger-audit"])==null?void 0:me.hidden:((Pe=r["predictor-stats"])==null?void 0:Pe.hidden)&&((be=r["event-log"])==null?void 0:be.hidden)&&((le=r["right-panel-bottom"])==null?void 0:le.hidden);return c.jsxs("div",{className:"flex-1 min-h-0 p-3 grid grid-cols-12 gap-3 relative z-10",children:[!Se&&c.jsx(gxe,{userRole:t,isEditMode:e,layoutConfig:r,toggleComponentVisibility:n,teams:i,selectedTeam:s,onTeamUpload:a,onSelectTeam:o,trackingMode:l,keyboardBuffer:u,showMappings:d,mappings:A,pressedButtons:f,onUpdateMapping:h,onResetMappings:m,handleGameEvent:p,isEditingMode:g,setIsEditingMode:x,hasPermission:v}),c.jsxs("div",{className:Z("flex flex-col gap-3 h-full min-h-0 overflow-y-auto custom-scrollbar transition-all duration-300",t==="eye_spotter"||Se&&it?"col-span-12":Se?"col-span-12 md:col-span-12 lg:col-span-9":it?"col-span-12 md:col-span-9 lg:col-span-10":"col-span-12 md:col-span-9 lg:col-span-7"),children:[c.jsx(eo,{id:"main-video",label:"Live Feed / Video Player",isEditMode:e,isHidden:(Ee=r["main-video"])==null?void 0:Ee.hidden,onToggleVisibility:n,className:"flex-1 min-h-0 relative bg-black rounded-lg overflow-hidden shadow-2xl border border-border/20 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full relative",children:c.jsx("div",{className:y?"grid grid-cols-3 gap-2 h-full":"h-full",children:(w==="live"||w==="fifaplus")&&S?c.jsxs("div",{className:"w-full h-full relative group",children:[c.jsx(u9,{ref:C,events:T,showLiveToasts:B,variant:"streamlined",onClose:()=>{_(!1),I("upload")},isEditMode:e,layoutConfig:r,onToggleVisibility:n}),c.jsxs("div",{className:"absolute top-2 right-12 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-[60]",children:[c.jsxs(te,{variant:"secondary",size:"sm",className:"h-7 gap-1.5",onClick:()=>N(!0),children:[c.jsx(cl,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:"Channels"})]}),c.jsxs(te,{variant:"secondary",size:"sm",className:"h-7 gap-1.5 bg-blue-600/20 hover:bg-blue-600/40 text-blue-400 border-blue-500/30",onClick:()=>M(!0),children:[c.jsx(wu,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:"FIFA+"})]})]}),L&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-background/80 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"fixed inset-4 z-[101] bg-slate-950 rounded-2xl border border-white/10 shadow-2xl overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"h-12 border-b border-white/5 flex items-center justify-between px-4 bg-slate-900/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cl,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"IPTV Channel Browser"})]}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-white",onClick:()=>N(!1),children:c.jsx(At,{size:18})})]}),c.jsx("div",{className:"flex-1 min-h-0",children:c.jsx(t0e,{})})]})}),R&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-background/80 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"fixed inset-4 z-[101] bg-slate-950 rounded-2xl border border-white/10 shadow-2xl overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"h-12 border-b border-white/5 flex items-center justify-between px-4 bg-slate-900/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wu,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"FIFA+ Digital Browser"})]}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-white",onClick:()=>M(!1),children:c.jsx(At,{size:18})})]}),c.jsx("div",{className:"flex-1 min-h-0",children:c.jsx(n0e,{})})]})})]}):b?c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx(E0e,{videoFile:k,videoUrl:O,events:T,onTimeUpdate:D,seekTo:F,isPlaying:U,onPlayPause:ve=>{K(ve),V&&t==="admin"&&(ve?V.emit("video-play",j):V.emit("video-pause",j))},onSeekComplete:()=>$(null),onSeek:ve=>{$(ve),V&&t==="admin"&&V.emit("video-seek",ve)},axes:q,buttons:H,teams:i,selectedTeam:s,teamNames:z,onPlayerSelect:ae,trackingData:X,quickSelectorState:ne,timelineVariant:g?"pro":"minimal",showLiveToasts:B,analysisMode:l,isEditMode:e,layoutConfig:r,onToggleVisibility:n}),(ee.previewZone!==null||ee.activeThird!=="MIDFIELD")&&c.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 z-[51] pointer-events-none animate-in fade-in slide-in-from-bottom-2 duration-300",children:c.jsx(C0e,{thirdsZone:ee})}),t==="admin"&&c.jsxs(te,{variant:"secondary",size:"sm",className:"absolute top-4 right-4 z-[100] gap-2 bg-slate-900/90 hover:bg-slate-800 text-white border border-white/20 backdrop-blur-md shadow-2xl transition-all",onClick:()=>{_(!1),G(null),I("upload"),V==null||V.emit("video-mode-sync",{mode:"upload",useVideoMode:!1})},children:[c.jsx(Aw,{className:"h-4 w-4"})," Change Source"]})]}):c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm z-50",children:c.jsxs("div",{className:"bg-card/90 p-6 rounded-xl border border-border/50 shadow-2xl flex flex-col items-center gap-4 max-w-md w-full animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground tracking-tight",children:"Media Source"}),c.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Select a video source to begin the analysis session."})]}),c.jsxs(gg,{defaultValue:"upload",className:"w-full",children:[c.jsxs(If,{className:"grid w-full grid-cols-2",children:[c.jsx(Cs,{value:"upload",className:"text-xs",children:"Upload Video"}),c.jsx(Cs,{value:"live",className:"text-xs",disabled:!v("dashboard.live.stream.view"),children:"Live Stream"})]}),c.jsx(yn,{value:"upload",className:"mt-4",children:t==="admin"||t==="operational_analyst"?c.jsx("div",{className:"bg-muted/20 border-2 border-dashed border-muted-foreground/10 rounded-lg p-4 hover:bg-muted/30 transition-colors",children:c.jsx(S0e,{onVideoUpload:async ve=>{G(ve),_(!0),I("upload");const pe=new FormData;pe.append("video",ve);try{const re=await fetch(`${hr}/api/upload-video`,{method:"POST",body:pe}),Ke=re.headers.get("content-type");if(!Ke||!Ke.includes("application/json"))throw new Error("Server returned non-JSON response (likely a 500/404 error page)");const xe=await re.json();if(xe.success)ge(xe.filePath),V==null||V.emit("video-loaded",xe.videoUrl),V==null||V.emit("video-mode-sync",{mode:"upload",useVideoMode:!0}),ye==="collab"&&Me(!0),Ge.success("Video uploaded successfully");else throw new Error(xe.error||"Upload failed")}catch(re){console.error("Upload error:",re),Ge.error(`Upload failed: ${re.message}`)}},currentVideo:k,onClearVideo:()=>{G(null),_(!1),ge(null)}})}):c.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-muted/10 rounded-lg border border-border/20",children:[c.jsx(un,{className:"h-8 w-8 text-muted-foreground mb-3 animate-pulse"}),c.jsx("p",{className:"text-sm font-medium",children:"Waiting for Host"}),c.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"The session host will upload the analysis video."}),c.jsxs("p",{className:"text-[9px] text-muted-foreground/50 mt-4 uppercase tracking-widest",children:["Your Role: ",t||"Guest"]})]})}),c.jsx(yn,{value:"live",className:"mt-4 space-y-3",children:c.jsxs("div",{className:"bg-muted/20 border border-border/50 rounded-lg p-6 flex flex-col items-center gap-3 text-center",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-red-500/10 flex items-center justify-center",children:c.jsx(RA,{className:"h-5 w-5 text-red-500 animate-pulse"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Live Broadcast"}),c.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Connect to the secured IPTV feed for real-time analysis."})]}),t==="admin"?c.jsxs(te,{className:"w-full mt-2 gap-2",variant:"default",onClick:()=>{I("live"),_(!0),V==null||V.emit("video-mode-sync",{mode:"live",useVideoMode:!0}),ye==="collab"&&Me(!0)},children:[c.jsx(cl,{className:"h-4 w-4"}),"Launch Player"]}):c.jsxs("div",{className:"w-full mt-2 p-3 bg-slate-950/50 rounded flex items-center justify-center gap-2",children:[c.jsx(bu,{className:"h-4 w-4 animate-spin text-muted-foreground"}),c.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Waiting for Live Stream..."})]})]})})]})]})})})})}),c.jsx("div",{className:"h-10 shrink-0 flex items-center justify-between px-2 bg-card/50 rounded-lg border border-border/50",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(te,{variant:"ghost",size:"sm",className:"h-7 gap-1.5 transition-colors text-muted-foreground hover:text-primary",onClick:ce,children:[c.jsx(cl,{className:"h-3.5 w-3.5"})," ",c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Pop Out"})]}),c.jsxs(te,{variant:"ghost",size:"sm",className:"h-7 gap-1.5 transition-colors text-muted-foreground hover:text-primary",onClick:Be,children:[c.jsx(cl,{className:"h-3.5 w-3.5"})," ",c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Watch"})]})]})})]}),!it&&c.jsx(Sxe,{userRole:t,isEditMode:e,layoutConfig:r,toggleComponentVisibility:n,events:T,setEvents:_e,teams:i,selectedTeam:s,teamNames:z,onPlayerSelect:ae,trackingMode:l,useVideoMode:b,videoFile:k,videoTime:j,lastEventButtonLabel:He})]})},Txe=({events:t})=>{const e=t.reduce((o,l)=>(l.psychology&&(o[l.psychology]=(o[l.psychology]||0)+1),o),{}),r=t.filter(o=>o.psychology==="SPIRIT").length,n=t.filter(o=>o.psychology==="FEAR").length,i=t.filter(o=>o.psychology==="EGO").length,a=t.filter(o=>o.contextualFactor==="Post-Goal").filter(o=>o.semanticIndicator==="Defensive Block Height"&&o.intensity==="LOW").length;return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4",children:[c.jsxs(Fe,{className:"p-4 bg-background/50 backdrop-blur-sm border-primary/20",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[c.jsx(yu,{className:"w-4 h-4"})," Team Psychological Radar"]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(MS,{label:"Spirit",value:e.SPIRIT||0,total:t.length,color:"bg-orange-500",icon:c.jsx(Eu,{className:"w-3 h-3"})}),c.jsx(MS,{label:"Focus/Ego",value:e.EGO||0,total:t.length,color:"bg-blue-600",icon:c.jsx(Wi,{className:"w-3 h-3"})}),c.jsx(MS,{label:"Fragility/Fear",value:e.FEAR||0,total:t.length,color:"bg-amber-600",icon:c.jsx(mo,{className:"w-3 h-3"})})]})]}),c.jsxs(Fe,{className:"p-4 bg-background/50 backdrop-blur-sm border-primary/20",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[c.jsx(cg,{className:"w-4 h-4"})," Momentum Signal"]})}),c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-4xl font-black italic text-primary",children:r>n?"DOMINANT":"VULNERABLE"}),c.jsxs("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mt-1",children:["Based on ",t.length," semantic observations"]})]})]}),c.jsxs(Fe,{className:"p-4 bg-background/50 backdrop-blur-sm border-destructive/20 col-span-1 md:col-span-2",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-destructive flex items-center gap-2",children:[c.jsx(mo,{className:"w-4 h-4"})," Strategic Vulnerability"]})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-destructive/5 p-3 rounded-lg border border-destructive/10 text-center",children:[c.jsx("div",{className:"text-2xl font-black text-destructive",children:a}),c.jsxs("div",{className:"text-[9px] uppercase font-bold opacity-70",children:["Sustained Low Block",c.jsx("br",{}),"Post-Goal Score"]})]}),c.jsxs("div",{className:"flex-1 bg-primary/5 p-3 rounded-lg border border-primary/10 text-center",children:[c.jsx("div",{className:"text-2xl font-black text-primary",children:i}),c.jsxs("div",{className:"text-[9px] uppercase font-bold opacity-70",children:["Losses due to",c.jsx("br",{}),"Decision Inefficiency"]})]})]})]})]})},MS=({label:t,value:e,total:r,color:n,icon:i})=>{const s=r>0?e/r*100:0;return c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex justify-between items-center text-[9px] uppercase font-bold",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[i," ",t]}),c.jsxs("span",{children:[e," (",Math.round(s),"%)"]})]}),c.jsx("div",{className:"w-full h-1.5 bg-muted rounded-full overflow-hidden",children:c.jsx("div",{className:Z("h-full transition-all duration-1000",n),style:{width:`${s}%`}})})]})},Bxe=({events:t})=>c.jsxs("div",{className:"flex-1 p-0 overflow-y-auto custom-scrollbar bg-background/50 backdrop-blur-3xl",children:[c.jsx(Txe,{events:t}),c.jsx("div",{className:"p-6 pt-0",children:c.jsx(bP,{events:t,isFullPage:!0})})]}),hz=E.forwardRef(({className:t,...e},r)=>c.jsx("textarea",{className:Z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));hz.displayName="Textarea";const _xe=[{id:1,category:"Phase de jeu",eventName:"Possession offensive",isRealTime:!0,isPostMatch:!0,clipDuration:45,preRoll:5},{id:2,category:"Phase de jeu",eventName:"Possession dfensive",isRealTime:!0,isPostMatch:!0,clipDuration:40,preRoll:5},{id:3,category:"Phase de jeu",eventName:"Transition OFF-DEF",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:4,category:"Phase de jeu",eventName:"Transition DEF-OFF",isRealTime:!0,isPostMatch:!0,clipDuration:15,preRoll:5},{id:5,category:"Phase de jeu",eventName:"Phase arrte offensive",isRealTime:!0,isPostMatch:!0,clipDuration:30,preRoll:5},{id:6,category:"Phase de jeu",eventName:"Phase arrte dfensive",isRealTime:!0,isPostMatch:!0,clipDuration:30,preRoll:5},{id:7,category:"Offensive",eventName:"Attaque place",isRealTime:!1,isPostMatch:!0,clipDuration:45,preRoll:10},{id:8,category:"Offensive",eventName:"Contre-attaque",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:9,category:"Offensive",eventName:"Attaque rapide",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:10,category:"Offensive",eventName:"Jeu direct",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:3},{id:11,category:"Offensive",eventName:"Pressing haut-Rcup-Attaque",isRealTime:!0,isPostMatch:!0,clipDuration:15,preRoll:5},{id:12,category:"Finalisation",eventName:"But marqu",isRealTime:!0,isPostMatch:!0,clipDuration:35,preRoll:15},{id:13,category:"Finalisation",eventName:"Tir cadr sauv",isRealTime:!0,isPostMatch:!0,clipDuration:15,preRoll:5},{id:14,category:"Finalisation",eventName:"Tir non cadr",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:15,category:"Finalisation",eventName:"Tir contr",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:16,category:"Finalisation",eventName:"Occasion franche",isRealTime:!0,isPostMatch:!0,clipDuration:18,preRoll:8},{id:17,category:"Finalisation",eventName:"Occasion moyenne",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:5},{id:18,category:"Finalisation",eventName:"Passe dcisive",isRealTime:!1,isPostMatch:!0,clipDuration:18,preRoll:8},{id:19,category:"Finalisation",eventName:"Passe cl",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:5},{id:20,category:"Finalisation",eventName:"Centre",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:21,category:"Finalisation",eventName:"Centre rentrant",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:5},{id:22,category:"Finalisation",eventName:"Centre sortant",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:5},{id:23,category:"Construction",eventName:"Relance gardien courte",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:24,category:"Construction",eventName:"Relance gardien longue",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:25,category:"Construction",eventName:"Construction 3 dfenseurs",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:26,category:"Construction",eventName:"Construction 2 dfenseurs",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:27,category:"Construction",eventName:"Passe progressive",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:28,category:"Construction",eventName:"Circulation latrale",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:29,category:"Construction",eventName:"Combinaison courte (une-deux)",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:30,category:"Construction",eventName:"Combinaison  3+ joueurs",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:3},{id:31,category:"Technique",eventName:"Dribble russi",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:32,category:"Technique",eventName:"Dribble rat",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:33,category:"Technique",eventName:"Passe courte russie",isRealTime:!1,isPostMatch:!0,clipDuration:4,preRoll:2},{id:34,category:"Technique",eventName:"Passe moyenne russie",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:35,category:"Technique",eventName:"Passe longue russie",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:36,category:"Technique",eventName:"Passe en profondeur",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:37,category:"Technique",eventName:"Contrle orient",isRealTime:!1,isPostMatch:!0,clipDuration:4,preRoll:2},{id:38,category:"Technique",eventName:"Mauvais contrle",isRealTime:!1,isPostMatch:!0,clipDuration:4,preRoll:2},{id:39,category:"Technique",eventName:"Passe rate/intercepte",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:40,category:"Technique",eventName:"Geste technique spectaculaire",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:41,category:"Perte",eventName:"Interception adverse",isRealTime:!0,isPostMatch:!0,clipDuration:6,preRoll:2},{id:42,category:"Perte",eventName:"Mauvaise passe",isRealTime:!0,isPostMatch:!0,clipDuration:5,preRoll:2},{id:43,category:"Perte",eventName:"Mauvais contrle-Perte",isRealTime:!1,isPostMatch:!0,clipDuration:4,preRoll:2},{id:44,category:"Perte",eventName:"Duel perdu",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:45,category:"Perte",eventName:"Perte sous pression",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:3},{id:46,category:"Perte",eventName:"Faute commise",isRealTime:!0,isPostMatch:!0,clipDuration:8,preRoll:3},{id:47,category:"Perte",eventName:"Hors-jeu signal",isRealTime:!0,isPostMatch:!0,clipDuration:10,preRoll:5},{id:48,category:"Dfense",eventName:"Bloc bas organis",isRealTime:!1,isPostMatch:!0,clipDuration:30,preRoll:5},{id:49,category:"Dfense",eventName:"Bloc mdian",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:50,category:"Dfense",eventName:"Pressing haut collectif",isRealTime:!0,isPostMatch:!0,clipDuration:15,preRoll:5},{id:51,category:"Dfense",eventName:"Pressing mdian",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:5},{id:52,category:"Dfense",eventName:"Repli dfensif organis",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:5},{id:53,category:"Dfense",eventName:"Repli dfensif dsorganis",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:5},{id:54,category:"Dfense",eventName:"Interception propre",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:55,category:"Dfense",eventName:"Tacle russi",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:56,category:"Dfense",eventName:"Tacle rat/Faute",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:3},{id:57,category:"Dfense",eventName:"Duel arien gagn",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:58,category:"Dfense",eventName:"Duel arien perdu",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:59,category:"Dfense",eventName:"Duel au sol gagn",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:60,category:"Dfense",eventName:"Duel au sol perdu",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:61,category:"Dfense",eventName:"Hors-jeu provoqu",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:5},{id:62,category:"Dfense",eventName:"Couverture dfensive",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:3},{id:63,category:"Dfense",eventName:"Rcupration haute",isRealTime:!0,isPostMatch:!0,clipDuration:8,preRoll:3},{id:64,category:"Dfense",eventName:"Rcupration mdiane",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:3},{id:65,category:"Dfense",eventName:"Rcupration basse",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:3},{id:66,category:"Dfense",eventName:"But encaiss",isRealTime:!0,isPostMatch:!0,clipDuration:40,preRoll:20},{id:67,category:"Dfense",eventName:"Tir adverse cadr",isRealTime:!0,isPostMatch:!0,clipDuration:15,preRoll:5},{id:68,category:"Dfense",eventName:"Tir adverse non cadr",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:69,category:"Dfense",eventName:"Occasion adverse",isRealTime:!0,isPostMatch:!0,clipDuration:18,preRoll:8},{id:70,category:"Dfense",eventName:"Corner concd",isRealTime:!0,isPostMatch:!0,clipDuration:10,preRoll:5},{id:71,category:"Dfense",eventName:"Coup franc concd dangereux",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:72,category:"Dfense",eventName:"Coup franc concd non dangereux",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:3},{id:73,category:"Dfense",eventName:"Pnalty concd",isRealTime:!0,isPostMatch:!0,clipDuration:25,preRoll:5},{id:74,category:"PA Offensive",eventName:"Corner pour - Rentrant",isRealTime:!0,isPostMatch:!0,clipDuration:20,preRoll:2},{id:75,category:"PA Offensive",eventName:"Corner pour - Sortant",isRealTime:!0,isPostMatch:!0,clipDuration:20,preRoll:2},{id:76,category:"PA Offensive",eventName:"Corner pour - Court",isRealTime:!1,isPostMatch:!0,clipDuration:18,preRoll:2},{id:77,category:"PA Offensive",eventName:"Corner pour - Variante",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:2},{id:78,category:"PA Offensive",eventName:"Coup franc direct cadr",isRealTime:!0,isPostMatch:!0,clipDuration:18,preRoll:5},{id:79,category:"PA Offensive",eventName:"Coup franc direct non cadr",isRealTime:!0,isPostMatch:!0,clipDuration:12,preRoll:5},{id:80,category:"PA Offensive",eventName:"Coup franc indirect (centre)",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:81,category:"PA Offensive",eventName:"Coup franc indirect (combinaison)",isRealTime:!1,isPostMatch:!0,clipDuration:18,preRoll:5},{id:82,category:"PA Offensive",eventName:"Pnalty pour",isRealTime:!0,isPostMatch:!0,clipDuration:35,preRoll:5},{id:83,category:"PA Offensive",eventName:"Touche offensive longue",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:84,category:"PA Offensive",eventName:"Touche offensive courte",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:85,category:"PA Offensive",eventName:"Remise 6 mtres adverse",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:86,category:"PA Dfensive",eventName:"Corner contre - Dfense zonale",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:87,category:"PA Dfensive",eventName:"Corner contre - Dfense individuelle",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:88,category:"PA Dfensive",eventName:"Corner contre - Dfense mixte",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:89,category:"PA Dfensive",eventName:"Coup franc contre - Mur",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:90,category:"PA Dfensive",eventName:"Coup franc contre - Sans mur",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:2},{id:91,category:"PA Dfensive",eventName:"Pnalty contre",isRealTime:!0,isPostMatch:!0,clipDuration:30,preRoll:5},{id:92,category:"PA Dfensive",eventName:"Touche dfensive - Marquage serr",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:93,category:"PA Dfensive",eventName:"Touche dfensive - Laisser jouer",isRealTime:!1,isPostMatch:!0,clipDuration:30,preRoll:2},{id:94,category:"Gardien",eventName:"Arrt rflexe",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:95,category:"Gardien",eventName:"Arrt classique",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:96,category:"Gardien",eventName:"Sortie arienne russie",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:97,category:"Gardien",eventName:"Sortie arienne rate",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:98,category:"Gardien",eventName:"Sortie aux pieds russie",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:99,category:"Gardien",eventName:"Sortie aux pieds rate",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:100,category:"Gardien",eventName:"Un contre un gagn",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:101,category:"Gardien",eventName:"Un contre un perdu",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:102,category:"Gardien",eventName:"Relance courte au pied",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:103,category:"Gardien",eventName:"Relance longue au pied",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:104,category:"Gardien",eventName:"Relance main prcise",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:105,category:"Gardien",eventName:"Relance main imprcise",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:106,category:"Gardien",eventName:"Communication dfensive",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:2},{id:107,category:"Mouvement",eventName:"Appel de balle intelligent",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:108,category:"Mouvement",eventName:"Appel de balle ignor",isRealTime:!1,isPostMatch:!0,clipDuration:5,preRoll:2},{id:109,category:"Mouvement",eventName:"Course en profondeur",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:110,category:"Mouvement",eventName:"Dcrochage",isRealTime:!1,isPostMatch:!0,clipDuration:6,preRoll:2},{id:111,category:"Mouvement",eventName:"Appel-contre-appel",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:112,category:"Mouvement",eventName:"Soutien offensif",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:113,category:"Mouvement",eventName:"Replacement dfensif rapide",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:114,category:"Mouvement",eventName:"Replacement dfensif lent",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:2},{id:115,category:"Discipline",eventName:"Carton jaune",isRealTime:!0,isPostMatch:!0,clipDuration:15,preRoll:2},{id:116,category:"Discipline",eventName:"Carton rouge direct",isRealTime:!0,isPostMatch:!0,clipDuration:20,preRoll:3},{id:117,category:"Discipline",eventName:"Second carton jaune-Rouge",isRealTime:!0,isPostMatch:!0,clipDuration:20,preRoll:3},{id:118,category:"Discipline",eventName:"Faute tactique",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:3},{id:119,category:"Discipline",eventName:"Simulation/Plongeon",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:3},{id:120,category:"Discipline",eventName:"Protestation",isRealTime:!1,isPostMatch:!0,clipDuration:12,preRoll:3},{id:121,category:"Match",eventName:"Dbut 1re mi-temps",isRealTime:!0,isPostMatch:!0,clipDuration:5,preRoll:2},{id:122,category:"Match",eventName:"Fin 1re mi-temps",isRealTime:!0,isPostMatch:!0,clipDuration:5,preRoll:2},{id:123,category:"Match",eventName:"Dbut 2me mi-temps",isRealTime:!0,isPostMatch:!0,clipDuration:5,preRoll:2},{id:124,category:"Match",eventName:"Fin 2me mi-temps",isRealTime:!0,isPostMatch:!0,clipDuration:5,preRoll:2},{id:125,category:"Match",eventName:"Temps additionnel",isRealTime:!0,isPostMatch:!0,clipDuration:60,preRoll:5},{id:126,category:"Match",eventName:"Blessure joueur",isRealTime:!0,isPostMatch:!0,clipDuration:120,preRoll:10},{id:127,category:"Match",eventName:"Remplacement",isRealTime:!0,isPostMatch:!0,clipDuration:30,preRoll:5},{id:128,category:"Match",eventName:"Changement tactique",isRealTime:!0,isPostMatch:!0,clipDuration:180,preRoll:10},{id:129,category:"Match",eventName:"Boisson technique",isRealTime:!0,isPostMatch:!0,clipDuration:90,preRoll:5},{id:130,category:"Match",eventName:"Incident arbitrage",isRealTime:!0,isPostMatch:!0,clipDuration:30,preRoll:5},{id:131,category:"Psycho",eventName:"Clbration but",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:2},{id:132,category:"Psycho",eventName:"Frustration visible",isRealTime:!1,isPostMatch:!0,clipDuration:8,preRoll:2},{id:133,category:"Psycho",eventName:"Encouragement collectif",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:134,category:"Psycho",eventName:"Conflit interne quipe",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:135,category:"Psycho",eventName:"Altercation adverse",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:136,category:"Physique",eventName:"Sprint longue distance (>30m)",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:137,category:"Physique",eventName:"Effort dfensif intense",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:3},{id:138,category:"Physique",eventName:"Signe de fatigue",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:2},{id:139,category:"Physique",eventName:"Rcupration lente aprs effort",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:140,category:"Tactique",eventName:"Supriorit numrique cre",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:141,category:"Tactique",eventName:"Infriorit numrique subie",isRealTime:!1,isPostMatch:!0,clipDuration:20,preRoll:5},{id:142,category:"Tactique",eventName:"Changement systme en jeu",isRealTime:!1,isPostMatch:!0,clipDuration:300,preRoll:15},{id:143,category:"Tactique",eventName:"Automatisme travaill russi",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:5},{id:144,category:"Tactique",eventName:"Automatisme travaill rat",isRealTime:!1,isPostMatch:!0,clipDuration:15,preRoll:5},{id:145,category:"Tactique",eventName:"Exploitation faiblesse adverse",isRealTime:!1,isPostMatch:!0,clipDuration:25,preRoll:5},{id:146,category:"Tactique",eventName:"Adaptation tactique russie",isRealTime:!1,isPostMatch:!0,clipDuration:180,preRoll:10},{id:147,category:"Tactique",eventName:"Non-adaptation problmatique",isRealTime:!1,isPostMatch:!0,clipDuration:180,preRoll:10},{id:148,category:"Zone",eventName:"Zone dfensive gauche",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:149,category:"Zone",eventName:"Zone dfensive centre",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:150,category:"Zone",eventName:"Zone dfensive droite",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:151,category:"Zone",eventName:"Zone mdiane gauche",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:152,category:"Zone",eventName:"Zone mdiane centre",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:153,category:"Zone",eventName:"Zone mdiane droite",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:154,category:"Zone",eventName:"Zone offensive gauche",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:155,category:"Zone",eventName:"Zone offensive centre",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:156,category:"Zone",eventName:"Zone offensive droite",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:157,category:"Zone",eventName:"Grande surface adverse",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:158,category:"Zone",eventName:"Petite surface adverse",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:159,category:"Zone",eventName:"Couloir latral gauche complet",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0},{id:160,category:"Zone",eventName:"Couloir latral droit complet",isRealTime:!1,isPostMatch:!0,clipDuration:10,preRoll:0}],Nxe=(t,e,r=Ld)=>{const n=r.find(A=>A.eventName===t.eventName);if(!n)return"";let i=t.matchTime||"00:00";i.includes("+")&&(i=i.split("+")[0]);const[s,a]=i.split(":"),o=s?s.padStart(2,"0"):"00",l=a?a.padStart(2,"0"):"00";let u=n.filenameConvention.replace("MIN",o).replace("SEC",l);return`${n.folderPath.replace("DATE",e)}${u}`},Ixe=({events:t,availablePlayers:e=[],videoFile:r,matchName:n,onUpdateEvent:i,onAddEvent:s,onSeekToEvent:a})=>{var L;const{toast:o}=lc(),[l,u]=E.useState(null),[d,A]=E.useState("all"),[f,h]=E.useState(""),[m,p]=E.useState(null),{events:g}=Tf(),x=g.length>0?g:_xe,v=N=>{const R=N.toLowerCase();return R.includes("goal")?"bg-green-500/20 text-green-600 border-green-500/30":R.includes("pass")?"bg-blue-500/20 text-blue-600 border-blue-500/30":R.includes("foul")||R.includes("card")?"bg-red-500/20 text-red-600 border-red-500/30":R.includes("offside")?"bg-orange-500/20 text-orange-600 border-orange-500/30":R.includes("defense")||R.includes("press")?"bg-purple-500/20 text-purple-600 border-purple-500/30":"bg-muted text-muted-foreground border-border"},y=E.useMemo(()=>{const N=t.length,R=t.filter(j=>j.isValidated).length,M=t.filter(j=>!j.player).length,k=t.filter(j=>j.qualityRating&&j.qualityRating<2).length,O=t.filter((j,D)=>{if(j.eventName!=="pass_start")return!1;const F=t.slice(0,D).reverse().find($=>["pass_end","pass_start","turnover"].includes($.eventName));return!F||F.eventName!=="pass_end"}).length;return{total:N,validated:R,missingPlayer:M,lowQuality:k,orphanedPasses:O}},[t]),w=E.useMemo(()=>t.filter(N=>{var O;const R=N.eventName==="pass_start"&&(()=>{const j=t.findIndex(F=>F.id===N.id),D=t.slice(0,j).reverse().find(F=>["pass_end","pass_start","turnover"].includes(F.eventName));return!D||D.eventName!=="pass_end"})(),M=d==="all"||d==="pending"&&!N.isValidated||d==="validated"&&N.isValidated||d==="incomplete"&&R,k=(N.eventName||"").toLowerCase().includes(f.toLowerCase())||(((O=N.player)==null?void 0:O.name)||"").toLowerCase().includes(f.toLowerCase());return M&&k}),[t,d,f]),b=t.find(N=>N.id===l),S=async N=>{var R,M;if(!(!r||N.videoTime===void 0))try{o({title:"Extracting Clip...",description:`Saving sequence for ${N.eventName}`});const k=((R=n.match(/\d{4}-\d{2}-\d{2}/))==null?void 0:R[0])||new Date().toISOString().split("T")[0],O=Nxe(N,k,x),j=O.startsWith("/")?O.slice(1):O,D=x.find(V=>V.eventName===N.eventName),F=D!=null&&D.defaultDuration?D.defaultDuration[1]:(D==null?void 0:D.clipDuration)||10,K=await(await fetch(`${hr}/api/extract-clip`,{method:"POST",headers:xl,body:JSON.stringify({videoPath:`./public/uploads/${r.name}`,startTime:Math.max(0,N.videoTime-5),duration:F,outputRelativePath:j,eventType:N.eventName,eventName:`${N.team||"Match"}_${((M=N.player)==null?void 0:M.name)||"Player"}`})})).json();if(K.success)o({title:"Clip Extracted",description:"Saved to "+K.url});else throw new Error(K.error)}catch(k){console.error(k),o({title:"Extraction Failed",description:"Could not save clip.",variant:"destructive"})}},C=N=>{const R=!N.isValidated;i({...N,isValidated:R,reviewedBy:"Early Tester"}),R&&S(N)},T=()=>{const N=w.filter(R=>!R.isValidated);N.length!==0&&(N.forEach(R=>{i({...R,isValidated:!0,reviewedBy:"Lead Analyst"})}),o({title:"Bulk Verification Complete",description:`Validated ${N.length} events.`}))},B=async N=>{if(!r){o({title:"Error",description:"Load a video file first.",variant:"destructive"});return}if(!["goal","shot","foul","offside","penalty","corner","red_card","yellow_card","pass_start","handball"].some(k=>N.eventName.toLowerCase().includes(k))){o({title:"Not a Tactical Event",description:"Only critical tactical events (Goals, Fouls, Shots, etc.) are sent to the crowd.",variant:"destructive"});return}p(N.id);try{const k=new FormData;k.append("video",r),k.append("timestamp_seconds",(N.videoTime||0).toString()),k.append("match_name",n),k.append("event_type",N.eventName),k.append("window_seconds","8.0");const j=await(await fetch(`${Cu}/api/crowd/request-review-upload`,{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:k})).json();if(j.success)o({title:"Sent to Crowd!",description:`Analyst request for '${N.eventName}' broadcasted to fans.`}),i({...N,validationNotes:(N.validationNotes||"")+`
[Crowd Review Requested]`});else throw new Error(j.error)}catch(k){o({title:"Request Failed",description:k instanceof Error?k.message:"Failed to sync with crowd API",variant:"destructive"})}finally{p(null)}},_=N=>{N.videoTime!==void 0&&(a(N.videoTime),u(N.id))},I=N=>{const R={id:+`${Date.now()}${Math.floor(Math.random()*1e3)}`,timestamp:new Date().toISOString(),eventName:"pass_end",team:N.team,buttonLabel:"Validation Fix",matchTime:N.matchTime,videoTime:N.videoTime!==void 0?N.videoTime+2:void 0,player:N.player,mode:N.mode,isValidated:!0,reviewedBy:"Lead Analyst (Manual Fix)"};s(R),o({title:"Pass End Registered",description:"A pass_end event has been inserted after the start point."})};return c.jsxs("div",{className:"flex flex-col h-full gap-4 text-sm",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[c.jsxs(Fe,{className:"p-2 bg-card/50 border-2 border-primary/20 flex flex-col gap-1",children:[c.jsx("span",{className:"text-[9px] text-muted-foreground uppercase font-bold",children:"Validation Progress"}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("span",{className:"text-lg font-black",children:y.validated}),c.jsxs("span",{className:"text-muted-foreground mb-1 text-[10px]",children:["/ ",y.total]}),c.jsxs(We,{className:"ml-auto mb-0",variant:"outline",children:[Math.round(y.validated/y.total*100||0),"%"]})]})]}),c.jsxs(Fe,{className:"p-2 bg-yellow-500/5 border-2 border-yellow-500/20 flex flex-col gap-1",children:[c.jsxs("span",{className:"text-[9px] text-yellow-600 uppercase font-bold flex items-center gap-1",children:[c.jsx(Qu,{className:"w-3 h-3"})," Missing Players"]}),c.jsx("span",{className:"text-lg font-black text-yellow-600",children:y.missingPlayer})]}),c.jsxs(Fe,{className:"p-2 bg-blue-500/5 border-2 border-blue-500/20 flex flex-col gap-1",children:[c.jsxs("span",{className:"text-[9px] text-blue-600 uppercase font-bold flex items-center gap-1",children:[c.jsx(dw,{className:"w-3 h-3"})," QA Passed"]}),c.jsx("span",{className:"text-lg font-black text-blue-600",children:y.validated})]}),c.jsxs(Fe,{className:"p-2 bg-destructive/5 border-2 border-destructive/20 flex flex-col gap-1",children:[c.jsxs("span",{className:"text-[9px] text-destructive uppercase font-bold flex items-center gap-1",children:[c.jsx(mo,{className:"w-3 h-3"})," Flagged (Low Qual)"]}),c.jsx("span",{className:"text-lg font-black text-destructive",children:y.lowQuality})]}),c.jsxs(Fe,{className:"p-2 bg-orange-500/5 border-2 border-orange-500/20 flex flex-col gap-1",children:[c.jsxs("span",{className:"text-[9px] text-orange-600 uppercase font-bold flex items-center gap-1",children:[c.jsx(DL,{className:"w-3 h-3"})," Incomplete Passes"]}),c.jsx("span",{className:"text-lg font-black text-orange-600",children:y.orphanedPasses})]})]}),c.jsxs("div",{className:"flex gap-4 flex-1 min-h-0",children:[c.jsxs(Fe,{className:"w-full md:w-2/3 flex flex-col overflow-hidden bg-card/30 backdrop-blur-md border-border/50",children:[c.jsxs("div",{className:"p-4 border-b flex flex-wrap items-center justify-between gap-4 bg-muted/20",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-background p-1 rounded-lg border",children:[c.jsx(te,{variant:d==="all"?"secondary":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>A("all"),children:"All"}),c.jsx(te,{variant:d==="pending"?"secondary":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>A("pending"),children:"Pending"}),c.jsx(te,{variant:d==="validated"?"secondary":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>A("validated"),children:"Validated"}),c.jsx(te,{variant:d==="incomplete"?"secondary":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>A("incomplete"),children:"Incomplete"})]}),c.jsxs("div",{className:"flex-1 relative min-w-[200px]",children:[c.jsx($p,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),c.jsx(jr,{placeholder:"Search events or players...",className:"pl-9 h-9 text-xs bg-background",value:f,onChange:N=>h(N.target.value)})]}),c.jsxs(te,{variant:"outline",size:"sm",className:"h-9 gap-2 border-primary/30 hover:bg-primary/5",onClick:T,children:[c.jsx(Fne,{className:"w-4 h-4 text-primary"}),"Verify All (",w.filter(N=>!N.isValidated).length,")"]})]}),c.jsx(Zn,{className:"flex-1",children:c.jsx("div",{className:"divide-y divide-border/50",children:w.map(N=>{var R;return c.jsxs("div",{onClick:()=>u(N.id),className:Z("p-3 flex items-center gap-4 hover:bg-primary/5 transition-all cursor-pointer group",l===N.id&&"bg-primary/10 border-r-4 border-r-primary shadow-inner"),children:[c.jsx("div",{className:Z("w-2 h-2 rounded-full shrink-0",N.isValidated?"bg-green-500":N.eventName==="pass_start"&&(()=>{const M=t.findIndex(O=>O.id===N.id),k=t.slice(0,M).reverse().find(O=>["pass_end","pass_start","turnover"].includes(O.eventName));return!k||k.eventName!=="pass_end"})()?"bg-orange-500 animate-bounce":"bg-yellow-500 animate-pulse")}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx(We,{variant:"outline",className:Z("text-[10px] px-1.5 font-bold uppercase",v(N.eventName)),children:N.eventName}),N.psychology&&c.jsx("span",{className:Z("text-[8px] px-1 rounded-sm font-black uppercase text-white",N.psychology==="SPIRIT"?"bg-orange-600":N.psychology==="EGO"?"bg-blue-600":N.psychology==="FEAR"?"bg-amber-600":"bg-neutral-600"),children:N.psychology}),N.semanticIndicator&&c.jsx("span",{className:"text-[8px] px-1 rounded-sm bg-primary/20 text-primary border border-primary/30 font-bold uppercase truncate max-w-[80px]",children:N.semanticIndicator}),N.eventName==="pass_start"&&(()=>{const M=t.findIndex(O=>O.id===N.id),k=t.slice(0,M).reverse().find(O=>["pass_end","pass_start","turnover"].includes(O.eventName));return!k||k.eventName!=="pass_end"})()&&c.jsxs(We,{variant:"destructive",className:"text-[8px] h-4 flex items-center gap-1 font-black",children:[c.jsx(DL,{className:"w-2 h-2"})," MISSING END"]}),c.jsxs("span",{className:"text-[10px] opacity-70 font-mono ml-auto",children:["@",N.matchTime]})]}),c.jsxs("div",{className:"text-xs font-medium mt-1 truncate",children:[((R=N.player)==null?void 0:R.name)||c.jsx("span",{className:"text-destructive italic",children:"Anonymous Player"}),c.jsx("span",{className:"text-muted-foreground mx-1",children:""}),c.jsx("span",{className:"text-muted-foreground",children:N.corridor||"Zone N/A"})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-background",title:"Sync Player",onClick:M=>{M.stopPropagation(),N.videoTime!==void 0&&a(N.videoTime)},children:c.jsx(uI,{className:"w-4 h-4"})}),c.jsx(te,{variant:"ghost",size:"icon",className:Z("h-8 w-8 hover:bg-blue-500/10 hover:text-blue-600",m===N.id&&"animate-spin"),title:"Send to Fan Voting",onClick:M=>{M.stopPropagation(),B(N)},disabled:m!==null,children:m===N.id?c.jsx(bu,{className:"w-4 h-4"}):c.jsx(go,{className:"w-4 h-4"})}),N.eventName==="pass_start"&&(()=>{const M=t.findIndex(O=>O.id===N.id),k=t.slice(M+1).find(O=>["pass_end","pass_start","turnover"].includes(O.eventName));return!k||k.eventName!=="pass_end"})()&&c.jsx(te,{variant:"outline",size:"sm",className:"h-7 px-2 text-[10px] bg-orange-500/10 text-orange-600 border-orange-500/30 hover:bg-orange-500/20",onClick:M=>{M.stopPropagation(),_(N)},children:"RESOLVE"}),c.jsx(te,{variant:N.isValidated?"ghost":"default",size:"sm",className:"h-7 px-3 text-[10px] font-bold",onClick:M=>{M.stopPropagation(),C(N)},children:N.isValidated?"REFUTE":"VERIFY"})]})]},N.id)})})})]}),c.jsxs("div",{className:"hidden md:flex w-1/3 flex-col gap-4",children:[c.jsx(Fe,{className:"flex-1 p-4 bg-card shadow-xl border-2 border-primary/5 flex flex-col",children:b?c.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between pb-2 border-b",children:[c.jsxs("h4",{className:"font-bold flex items-center gap-2 uppercase tracking-tighter text-xs",children:[c.jsx(Nne,{className:"w-4 h-4 text-primary"})," Event Correction"]}),c.jsxs(We,{className:"bg-primary/10 text-primary border-primary/20 text-[9px]",children:["ID: ",b.id.toString().slice(-6)]})]}),c.jsx(Zn,{className:"flex-1 pr-2",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Event Type"}),c.jsxs("select",{className:"w-full h-8 bg-muted/30 rounded-md text-xs border border-border px-2",value:b.eventName,onChange:N=>{const R=N.target.value;x.find(M=>M.eventName===R),i({...b,eventName:R,validationNotes:b.validationNotes||""})},children:[c.jsxs("option",{value:b.eventName,children:[b.eventName," (Current)"]}),Array.from(new Set(x.map(N=>N.category))).map(N=>c.jsx("optgroup",{label:N,children:x.filter(R=>R.category===N).map(R=>c.jsx("option",{value:R.eventName,children:R.eventName},R.id))},N))]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Position (TS)"}),c.jsx(jr,{defaultValue:b.matchTime,className:"h-8 text-xs bg-muted/30"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Assign Actor"}),c.jsxs("select",{className:"w-full h-8 bg-muted/30 rounded-md text-xs border border-border px-2 focus:ring-1 ring-primary",value:((L=b.player)==null?void 0:L.id)||"",onChange:N=>{const R=parseInt(N.target.value),M=e.find(k=>k.id===R);M&&i({...b,player:{id:M.id,name:M.name}})},children:[c.jsx("option",{value:"",children:"Select Local Player..."}),e.map(N=>c.jsx("option",{value:N.id,children:N.name},N.id))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Quality Vetting"}),c.jsx("select",{className:"w-full h-8 bg-muted/30 rounded-md text-xs border border-border px-2",defaultValue:b.qualityRating,children:[1,2,3,4,5].map(N=>c.jsxs("option",{value:N,children:["Lvl ",N," - ",N>3?"High":"Low"]},N))})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Tempo"}),c.jsx(We,{variant:"secondary",className:"h-8 w-full justify-center text-[10px] bg-muted/50",children:b.tempo||"MODERATE"})]})]}),c.jsxs("div",{className:"space-y-1 pt-2 border-t border-dashed",children:[c.jsxs("label",{className:"text-[10px] text-primary uppercase font-black flex items-center gap-1",children:[c.jsx(un,{className:"w-3 h-3"})," Semantic Intelligence Layer"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] text-muted-foreground uppercase font-bold",children:"Tactical Indicator"}),c.jsxs("select",{className:"w-full h-8 bg-primary/5 rounded-md text-[10px] border border-primary/20 px-2",value:b.semanticIndicator||"",onChange:N=>i({...b,semanticIndicator:N.target.value}),children:[c.jsx("option",{value:"",children:"None"}),c.jsx("option",{value:"Defensive Block Height",children:"Defensive Block Height"}),c.jsx("option",{value:"Momentum Shift",children:"Momentum Shift"}),c.jsx("option",{value:"Width/Depth Ratio",children:"Width/Depth Ratio"}),c.jsx("option",{value:"Transition Vulnerability",children:"Transition Vulnerability"}),c.jsx("option",{value:"Decision Efficiency",children:"Decision Efficiency"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] text-muted-foreground uppercase font-bold",children:"Psychology"}),c.jsxs("select",{className:"w-full h-8 bg-orange-500/5 rounded-md text-[10px] border border-orange-500/20 px-2",value:b.psychology||"",onChange:N=>i({...b,psychology:N.target.value}),children:[c.jsx("option",{value:"",children:"Neutral"}),c.jsx("option",{value:"SPIRIT",children:"Spirit  (Duels/Recoveries)"}),c.jsx("option",{value:"EGO",children:"Ego  (Selfish Actions)"}),c.jsx("option",{value:"FEAR",children:"Fear  (Backpasses)"}),c.jsx("option",{value:"COMA",children:"Coma  (Simple Losses)"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] text-muted-foreground uppercase font-bold",children:"Intensity / Impact"}),c.jsx("div",{className:"flex gap-1",children:["LOW","MEDIUM","HIGH"].map(N=>c.jsx(te,{variant:b.intensity===N?"default":"outline",size:"sm",className:"flex-1 h-7 text-[9px] px-0",onClick:()=>i({...b,intensity:N}),children:N},N))})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] text-muted-foreground uppercase font-bold",children:"Contextual Factor"}),c.jsxs("select",{className:"w-full h-8 bg-muted/30 rounded-md text-[10px] border border-border px-2",value:b.contextualFactor||"",onChange:N=>i({...b,contextualFactor:N.target.value}),children:[c.jsx("option",{value:"",children:"Normal Play"}),c.jsx("option",{value:"Post-Goal",children:"Post-Goal Balance"}),c.jsx("option",{value:"Ref Decision",children:"Ref Decision Impact"}),c.jsx("option",{value:"Final Minutes",children:"Clutch / Final Minutes"}),c.jsx("option",{value:"Symmetry Break",children:"Symmetry Break"})]})]})]})]}),c.jsxs("div",{className:"space-y-1 border-t border-dashed pt-2",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Editorial Notes"}),c.jsx(hz,{placeholder:"Describe corrections, context, or visual details...",className:"min-h-[80px] text-xs bg-muted/10 resize-none",defaultValue:b.validationNotes,onBlur:N=>i({...b,validationNotes:N.target.value})})]})]})}),c.jsxs("div",{className:"pt-4 flex gap-2 border-t mt-auto",children:[b.eventName==="pass_start"&&(()=>{const N=t.findIndex(M=>M.id===b.id),R=t.slice(0,N).reverse().find(M=>["pass_end","pass_start","turnover"].includes(M.eventName));return!R||R.eventName!=="pass_end"})()&&c.jsxs(te,{variant:"secondary",className:"flex-1 h-10 gap-2 font-bold uppercase tracking-widest text-[10px] bg-orange-500/10 text-orange-600 border-orange-500/20 hover:bg-orange-500/20",onClick:()=>I(b),children:[c.jsx(qne,{className:"w-4 h-4"})," Register Reception"]}),c.jsxs(te,{variant:"default",className:"flex-1 h-10 gap-2 font-bold uppercase tracking-widest text-[10px]",onClick:()=>{o({title:"Draft Saved",description:"Changes recorded locally."})},children:[c.jsx($x,{className:"w-4 h-4"})," Save Metadata"]}),c.jsx(te,{variant:"outline",size:"icon",className:"h-10 w-10 text-destructive hover:bg-destructive/10",children:c.jsx(Une,{className:"w-5 h-5"})})]})]}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground italic gap-2 text-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/30 flex items-center justify-center border-2 border-dashed border-border mb-2",children:c.jsx(Io,{className:"w-8 h-8 opacity-20"})}),c.jsx("span",{className:"text-xs uppercase font-bold tracking-widest opacity-50",children:"Validation Queue Idle"}),c.jsxs("span",{className:"text-[10px]",children:["Select an event from the left list",c.jsx("br",{}),"to modify its properties."]})]})}),c.jsxs(Fe,{className:"h-40 flex flex-col overflow-hidden bg-muted/20 border-border/50",children:[c.jsxs("div",{className:"p-2 px-3 border-b bg-muted/50 flex items-center justify-between",children:[c.jsxs("span",{className:"text-[10px] font-black uppercase text-secondary-foreground flex items-center gap-1",children:[c.jsx(a8,{className:"w-3 h-3"})," QA Audit Trail"]}),c.jsx("span",{className:"text-[9px] font-medium opacity-60 italic",children:n})]}),c.jsx(Zn,{className:"flex-1",children:c.jsxs("div",{className:"p-2 flex flex-col gap-1.5",children:[t.filter(N=>N.isValidated).slice(-3).map(N=>c.jsxs("div",{className:"text-[10px] bg-background/50 p-2 rounded border border-border/30 shadow-sm flex items-center gap-2",children:[c.jsx(e8,{className:"w-3 h-3 text-green-500"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"font-bold",children:N.eventName})," verified by ",N.reviewedBy||"System"]})]},N.id)),t.filter(N=>N.isValidated).length===0&&c.jsx("div",{className:"text-[10px] text-center opacity-40 py-4",children:"No validation activity logs."})]})})]})]})]})]})},Pxe=({events:t,videoFile:e,teamNames:r,availablePlayers:n,setEvents:i,socket:s,setSeekTime:a,setTrackingMode:o,setActiveView:l})=>c.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col",children:[c.jsx("div",{className:"mb-4 flex items-center justify-between",children:c.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider text-primary flex items-center gap-2",children:[c.jsx(dw,{className:"h-5 w-5"})," Validation Suite"]})}),c.jsx("div",{className:"flex-1 min-h-0 bg-card/40 backdrop-blur-xl rounded-xl border border-border/50 p-4 overflow-y-auto",children:c.jsx(Ixe,{events:t,videoFile:e,matchName:`${r.teamA} vs ${r.teamB}`,availablePlayers:n,onUpdateEvent:u=>{i(d=>d.map(A=>A.id===u.id?u:A)),s==null||s.emit("update-event",u)},onAddEvent:u=>{i(d=>[u,...d].sort((A,f)=>{const h=A.videoTime??0;return(f.videoTime??0)-h})),s==null||s.emit("new-event",u)},onSeekToEvent:u=>{a(u),o("POST_MATCH"),l("dashboard")}})})]});var Rxe=Array.isArray,ei=Rxe,kxe=typeof Rg=="object"&&Rg&&Rg.Object===Object&&Rg,pz=kxe,Lxe=pz,jxe=typeof self=="object"&&self&&self.Object===Object&&self,Mxe=Lxe||jxe||Function("return this")(),Na=Mxe,Dxe=Na,Oxe=Dxe.Symbol,xg=Oxe,PD=xg,mz=Object.prototype,Fxe=mz.hasOwnProperty,Uxe=mz.toString,ah=PD?PD.toStringTag:void 0;function $xe(t){var e=Fxe.call(t,ah),r=t[ah];try{t[ah]=void 0;var n=!0}catch{}var i=Uxe.call(t);return n&&(e?t[ah]=r:delete t[ah]),i}var Qxe=$xe,Hxe=Object.prototype,Kxe=Hxe.toString;function Vxe(t){return Kxe.call(t)}var Gxe=Vxe,RD=xg,zxe=Qxe,Wxe=Gxe,Yxe="[object Null]",qxe="[object Undefined]",kD=RD?RD.toStringTag:void 0;function Xxe(t){return t==null?t===void 0?qxe:Yxe:kD&&kD in Object(t)?zxe(t):Wxe(t)}var Po=Xxe;function Zxe(t){return t!=null&&typeof t=="object"}var Ro=Zxe,Jxe=Po,eve=Ro,tve="[object Symbol]";function rve(t){return typeof t=="symbol"||eve(t)&&Jxe(t)==tve}var Pf=rve,nve=ei,ive=Pf,sve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ave=/^\w*$/;function ove(t,e){if(nve(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||ive(t)?!0:ave.test(t)||!sve.test(t)||e!=null&&t in Object(e)}var NP=ove;function lve(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cc=lve;const Rf=$t(cc);var cve=Po,uve=cc,dve="[object AsyncFunction]",Ave="[object Function]",fve="[object GeneratorFunction]",hve="[object Proxy]";function pve(t){if(!uve(t))return!1;var e=cve(t);return e==Ave||e==fve||e==dve||e==hve}var IP=pve;const ot=$t(IP);var mve=Na,gve=mve["__core-js_shared__"],xve=gve,DS=xve,LD=function(){var t=/[^.]+$/.exec(DS&&DS.keys&&DS.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vve(t){return!!LD&&LD in t}var yve=vve,bve=Function.prototype,wve=bve.toString;function Eve(t){if(t!=null){try{return wve.call(t)}catch{}try{return t+""}catch{}}return""}var gz=Eve,Sve=IP,Cve=yve,Tve=cc,Bve=gz,_ve=/[\\^$.*+?()[\]{}|]/g,Nve=/^\[object .+?Constructor\]$/,Ive=Function.prototype,Pve=Object.prototype,Rve=Ive.toString,kve=Pve.hasOwnProperty,Lve=RegExp("^"+Rve.call(kve).replace(_ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jve(t){if(!Tve(t)||Cve(t))return!1;var e=Sve(t)?Lve:Nve;return e.test(Bve(t))}var Mve=jve;function Dve(t,e){return t==null?void 0:t[e]}var Ove=Dve,Fve=Mve,Uve=Ove;function $ve(t,e){var r=Uve(t,e);return Fve(r)?r:void 0}var Ku=$ve,Qve=Ku,Hve=Qve(Object,"create"),Gw=Hve,jD=Gw;function Kve(){this.__data__=jD?jD(null):{},this.size=0}var Vve=Kve;function Gve(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var zve=Gve,Wve=Gw,Yve="__lodash_hash_undefined__",qve=Object.prototype,Xve=qve.hasOwnProperty;function Zve(t){var e=this.__data__;if(Wve){var r=e[t];return r===Yve?void 0:r}return Xve.call(e,t)?e[t]:void 0}var Jve=Zve,eye=Gw,tye=Object.prototype,rye=tye.hasOwnProperty;function nye(t){var e=this.__data__;return eye?e[t]!==void 0:rye.call(e,t)}var iye=nye,sye=Gw,aye="__lodash_hash_undefined__";function oye(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=sye&&e===void 0?aye:e,this}var lye=oye,cye=Vve,uye=zve,dye=Jve,Aye=iye,fye=lye;function kf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}kf.prototype.clear=cye;kf.prototype.delete=uye;kf.prototype.get=dye;kf.prototype.has=Aye;kf.prototype.set=fye;var hye=kf;function pye(){this.__data__=[],this.size=0}var mye=pye;function gye(t,e){return t===e||t!==t&&e!==e}var PP=gye,xye=PP;function vye(t,e){for(var r=t.length;r--;)if(xye(t[r][0],e))return r;return-1}var zw=vye,yye=zw,bye=Array.prototype,wye=bye.splice;function Eye(t){var e=this.__data__,r=yye(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():wye.call(e,r,1),--this.size,!0}var Sye=Eye,Cye=zw;function Tye(t){var e=this.__data__,r=Cye(e,t);return r<0?void 0:e[r][1]}var Bye=Tye,_ye=zw;function Nye(t){return _ye(this.__data__,t)>-1}var Iye=Nye,Pye=zw;function Rye(t,e){var r=this.__data__,n=Pye(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var kye=Rye,Lye=mye,jye=Sye,Mye=Bye,Dye=Iye,Oye=kye;function Lf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Lf.prototype.clear=Lye;Lf.prototype.delete=jye;Lf.prototype.get=Mye;Lf.prototype.has=Dye;Lf.prototype.set=Oye;var Ww=Lf,Fye=Ku,Uye=Na,$ye=Fye(Uye,"Map"),RP=$ye,MD=hye,Qye=Ww,Hye=RP;function Kye(){this.size=0,this.__data__={hash:new MD,map:new(Hye||Qye),string:new MD}}var Vye=Kye;function Gye(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var zye=Gye,Wye=zye;function Yye(t,e){var r=t.__data__;return Wye(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Yw=Yye,qye=Yw;function Xye(t){var e=qye(this,t).delete(t);return this.size-=e?1:0,e}var Zye=Xye,Jye=Yw;function ebe(t){return Jye(this,t).get(t)}var tbe=ebe,rbe=Yw;function nbe(t){return rbe(this,t).has(t)}var ibe=nbe,sbe=Yw;function abe(t,e){var r=sbe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var obe=abe,lbe=Vye,cbe=Zye,ube=tbe,dbe=ibe,Abe=obe;function jf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jf.prototype.clear=lbe;jf.prototype.delete=cbe;jf.prototype.get=ube;jf.prototype.has=dbe;jf.prototype.set=Abe;var kP=jf,xz=kP,fbe="Expected a function";function LP(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(fbe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(LP.Cache||xz),r}LP.Cache=xz;var vz=LP;const hbe=$t(vz);var pbe=vz,mbe=500;function gbe(t){var e=pbe(t,function(n){return r.size===mbe&&r.clear(),n}),r=e.cache;return e}var xbe=gbe,vbe=xbe,ybe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bbe=/\\(\\)?/g,wbe=vbe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ybe,function(r,n,i,s){e.push(i?s.replace(bbe,"$1"):n||r)}),e}),Ebe=wbe;function Sbe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var jP=Sbe,DD=xg,Cbe=jP,Tbe=ei,Bbe=Pf,_be=1/0,OD=DD?DD.prototype:void 0,FD=OD?OD.toString:void 0;function yz(t){if(typeof t=="string")return t;if(Tbe(t))return Cbe(t,yz)+"";if(Bbe(t))return FD?FD.call(t):"";var e=t+"";return e=="0"&&1/t==-_be?"-0":e}var Nbe=yz,Ibe=Nbe;function Pbe(t){return t==null?"":Ibe(t)}var bz=Pbe,Rbe=ei,kbe=NP,Lbe=Ebe,jbe=bz;function Mbe(t,e){return Rbe(t)?t:kbe(t,e)?[t]:Lbe(jbe(t))}var wz=Mbe,Dbe=Pf,Obe=1/0;function Fbe(t){if(typeof t=="string"||Dbe(t))return t;var e=t+"";return e=="0"&&1/t==-Obe?"-0":e}var qw=Fbe,Ube=wz,$be=qw;function Qbe(t,e){e=Ube(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[$be(e[r++])];return r&&r==n?t:void 0}var MP=Qbe,Hbe=MP;function Kbe(t,e,r){var n=t==null?void 0:Hbe(t,e);return n===void 0?r:n}var Ez=Kbe;const Ki=$t(Ez);function Vbe(t){return t==null}var Gbe=Vbe;const ht=$t(Gbe);var zbe=Po,Wbe=ei,Ybe=Ro,qbe="[object String]";function Xbe(t){return typeof t=="string"||!Wbe(t)&&Ybe(t)&&zbe(t)==qbe}var Zbe=Xbe;const Iu=$t(Zbe);var Sz={exports:{}},Pt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DP=Symbol.for("react.element"),OP=Symbol.for("react.portal"),Xw=Symbol.for("react.fragment"),Zw=Symbol.for("react.strict_mode"),Jw=Symbol.for("react.profiler"),e1=Symbol.for("react.provider"),t1=Symbol.for("react.context"),Jbe=Symbol.for("react.server_context"),r1=Symbol.for("react.forward_ref"),n1=Symbol.for("react.suspense"),i1=Symbol.for("react.suspense_list"),s1=Symbol.for("react.memo"),a1=Symbol.for("react.lazy"),ewe=Symbol.for("react.offscreen"),Cz;Cz=Symbol.for("react.module.reference");function es(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case DP:switch(t=t.type,t){case Xw:case Jw:case Zw:case n1:case i1:return t;default:switch(t=t&&t.$$typeof,t){case Jbe:case t1:case r1:case a1:case s1:case e1:return t;default:return e}}case OP:return e}}}Pt.ContextConsumer=t1;Pt.ContextProvider=e1;Pt.Element=DP;Pt.ForwardRef=r1;Pt.Fragment=Xw;Pt.Lazy=a1;Pt.Memo=s1;Pt.Portal=OP;Pt.Profiler=Jw;Pt.StrictMode=Zw;Pt.Suspense=n1;Pt.SuspenseList=i1;Pt.isAsyncMode=function(){return!1};Pt.isConcurrentMode=function(){return!1};Pt.isContextConsumer=function(t){return es(t)===t1};Pt.isContextProvider=function(t){return es(t)===e1};Pt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===DP};Pt.isForwardRef=function(t){return es(t)===r1};Pt.isFragment=function(t){return es(t)===Xw};Pt.isLazy=function(t){return es(t)===a1};Pt.isMemo=function(t){return es(t)===s1};Pt.isPortal=function(t){return es(t)===OP};Pt.isProfiler=function(t){return es(t)===Jw};Pt.isStrictMode=function(t){return es(t)===Zw};Pt.isSuspense=function(t){return es(t)===n1};Pt.isSuspenseList=function(t){return es(t)===i1};Pt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Xw||t===Jw||t===Zw||t===n1||t===i1||t===ewe||typeof t=="object"&&t!==null&&(t.$$typeof===a1||t.$$typeof===s1||t.$$typeof===e1||t.$$typeof===t1||t.$$typeof===r1||t.$$typeof===Cz||t.getModuleId!==void 0)};Pt.typeOf=es;Sz.exports=Pt;var twe=Sz.exports,rwe=Po,nwe=Ro,iwe="[object Number]";function swe(t){return typeof t=="number"||nwe(t)&&rwe(t)==iwe}var Tz=swe;const awe=$t(Tz);var owe=Tz;function lwe(t){return owe(t)&&t!=+t}var cwe=lwe;const Mf=$t(cwe);var vs=function(e){return e===0?0:e>0?1:-1},Qc=function(e){return Iu(e)&&e.indexOf("%")===e.length-1},we=function(e){return awe(e)&&!Mf(e)},uwe=function(e){return ht(e)},Fr=function(e){return we(e)||Iu(e)},dwe=0,vg=function(e){var r=++dwe;return"".concat(e||"").concat(r)},Pu=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(e)&&!Iu(e))return n;var s;if(Qc(e)){var a=e.indexOf("%");s=r*parseFloat(e.slice(0,a))/100}else s=+e;return Mf(s)&&(s=n),i&&s>r&&(s=r),s},vd=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Awe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Mi=function(e,r){return we(e)&&we(r)?function(n){return e+n*(r-e)}:function(){return r}};function vy(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Ki(n,e))===r})}var fwe=function(e,r){return we(e)&&we(r)?e-r:Iu(e)&&Iu(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function nA(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function YB(t){"@babel/helpers - typeof";return YB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YB(t)}var hwe=["viewBox","children"],pwe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],UD=["points","pathLength"],OS={svg:hwe,polygon:UD,polyline:UD},FP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],yy=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),!Rf(n))return null;var i={};return Object.keys(n).forEach(function(s){FP.includes(s)&&(i[s]=r||function(a){return n[s](n,a)})}),i},mwe=function(e,r,n){return function(i){return e(r,n,i),null}},by=function(e,r,n){if(!Rf(e)||YB(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];FP.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=mwe(a,r,n))}),i},gwe=["children"],xwe=["children"];function $D(t,e){if(t==null)return{};var r=vwe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qB(t){"@babel/helpers - typeof";return qB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qB(t)}var QD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},so=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},HD=null,FS=null,UP=function t(e){if(e===HD&&Array.isArray(FS))return FS;var r=[];return E.Children.forEach(e,function(n){ht(n)||(twe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),FS=r,HD=e,r};function Ts(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return so(i)}):n=[so(e)],UP(t).forEach(function(i){var s=Ki(i,"type.displayName")||Ki(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function li(t,e){var r=Ts(t,e);return r&&r[0]}var KD=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!we(n)||n<=0||!we(i)||i<=0)},ywe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],bwe=function(e){return e&&e.type&&Iu(e.type)&&ywe.indexOf(e.type)>=0},wwe=function(e){return e&&qB(e)==="object"&&"clipDot"in e},Ewe=function(e,r,n,i){var s,a=(s=OS==null?void 0:OS[i])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!ot(e)&&(i&&a.includes(r)||pwe.includes(r))||n&&FP.includes(r)},ft=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!Rf(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;Ewe((o=i)===null||o===void 0?void 0:o[a],a,r,n)&&(s[a]=i[a])}),s},XB=function t(e,r){if(e===r)return!0;var n=E.Children.count(e);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return VD(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=e[i],a=r[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!VD(s,a))return!1}return!0},VD=function(e,r){if(ht(e)&&ht(r))return!0;if(!ht(e)&&!ht(r)){var n=e.props||{},i=n.children,s=$D(n,gwe),a=r.props||{},o=a.children,l=$D(a,xwe);return i&&o?nA(s,l)&&XB(i,o):!i&&!o?nA(s,l):!1}return!1},GD=function(e,r){var n=[],i={};return UP(e).forEach(function(s,a){if(bwe(s))n.push(s);else if(s){var o=so(s.type),l=r[o]||{},u=l.handler,d=l.once;if(u&&(!d||!i[o])){var A=u(s,o,a);n.push(A),i[o]=!0}}}),n},Swe=function(e){var r=e&&e.type;return r&&QD[r]?QD[r]:null},Cwe=function(e,r){return UP(r).indexOf(e)},Twe=["children","width","height","viewBox","className","style","title","desc"];function ZB(){return ZB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZB.apply(this,arguments)}function Bwe(t,e){if(t==null)return{};var r=_we(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _we(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JB(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,l=t.desc,u=Bwe(t,Twe),d=i||{width:r,height:n,x:0,y:0},A=gt("recharts-surface",s);return Q.createElement("svg",ZB({},ft(u,!0,"svg"),{className:A,width:r,height:n,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Q.createElement("title",null,o),Q.createElement("desc",null,l),e)}var Nwe=["children","className"];function e_(){return e_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e_.apply(this,arguments)}function Iwe(t,e){if(t==null)return{};var r=Pwe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var or=Q.forwardRef(function(t,e){var r=t.children,n=t.className,i=Iwe(t,Nwe),s=gt("recharts-layer",n);return Q.createElement("g",e_({className:s},ft(i,!0),{ref:e}),r)}),lu=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function Rwe(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}var kwe=Rwe,Lwe=kwe;function jwe(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Lwe(t,e,r)}var Mwe=jwe,Dwe="\\ud800-\\udfff",Owe="\\u0300-\\u036f",Fwe="\\ufe20-\\ufe2f",Uwe="\\u20d0-\\u20ff",$we=Owe+Fwe+Uwe,Qwe="\\ufe0e\\ufe0f",Hwe="\\u200d",Kwe=RegExp("["+Hwe+Dwe+$we+Qwe+"]");function Vwe(t){return Kwe.test(t)}var Bz=Vwe;function Gwe(t){return t.split("")}var zwe=Gwe,_z="\\ud800-\\udfff",Wwe="\\u0300-\\u036f",Ywe="\\ufe20-\\ufe2f",qwe="\\u20d0-\\u20ff",Xwe=Wwe+Ywe+qwe,Zwe="\\ufe0e\\ufe0f",Jwe="["+_z+"]",t_="["+Xwe+"]",r_="\\ud83c[\\udffb-\\udfff]",e1e="(?:"+t_+"|"+r_+")",Nz="[^"+_z+"]",Iz="(?:\\ud83c[\\udde6-\\uddff]){2}",Pz="[\\ud800-\\udbff][\\udc00-\\udfff]",t1e="\\u200d",Rz=e1e+"?",kz="["+Zwe+"]?",r1e="(?:"+t1e+"(?:"+[Nz,Iz,Pz].join("|")+")"+kz+Rz+")*",n1e=kz+Rz+r1e,i1e="(?:"+[Nz+t_+"?",t_,Iz,Pz,Jwe].join("|")+")",s1e=RegExp(r_+"(?="+r_+")|"+i1e+n1e,"g");function a1e(t){return t.match(s1e)||[]}var o1e=a1e,l1e=zwe,c1e=Bz,u1e=o1e;function d1e(t){return c1e(t)?u1e(t):l1e(t)}var A1e=d1e,f1e=Mwe,h1e=Bz,p1e=A1e,m1e=bz;function g1e(t){return function(e){e=m1e(e);var r=h1e(e)?p1e(e):void 0,n=r?r[0]:e.charAt(0),i=r?f1e(r,1).join(""):e.slice(1);return n[t]()+i}}var x1e=g1e,v1e=x1e,y1e=v1e("toUpperCase"),b1e=y1e;const o1=$t(b1e);function Qt(t){return function(){return t}}const Lz=Math.cos,wy=Math.sin,js=Math.sqrt,Ey=Math.PI,l1=2*Ey,n_=Math.PI,i_=2*n_,Pc=1e-6,w1e=i_-Pc;function jz(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function E1e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return jz;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class S1e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?jz:E1e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=n-e,u=i-r,d=a-e,A=o-r,f=d*d+A*A;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Pc)if(!(Math.abs(A*l-u*d)>Pc)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-a,m=i-o,p=l*l+u*u,g=h*h+m*m,x=Math.sqrt(p),v=Math.sqrt(f),y=s*Math.tan((n_-Math.acos((p+f-g)/(2*x*v)))/2),w=y/v,b=y/x;Math.abs(w-1)>Pc&&this._append`L${e+w*d},${r+w*A}`,this._append`A${s},${s},0,0,${+(A*h>d*m)},${this._x1=e+b*l},${this._y1=r+b*u}`}}arc(e,r,n,i,s,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),u=e+o,d=r+l,A=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Pc||Math.abs(this._y1-d)>Pc)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%i_+i_),f>w1e?this._append`A${n},${n},0,1,${A},${e-o},${r-l}A${n},${n},0,1,${A},${this._x1=u},${this._y1=d}`:f>Pc&&this._append`A${n},${n},0,${+(f>=n_)},${A},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function $P(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new S1e(e)}function QP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mz(t){this._context=t}Mz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function c1(t){return new Mz(t)}function Dz(t){return t[0]}function Oz(t){return t[1]}function Fz(t,e){var r=Qt(!0),n=null,i=c1,s=null,a=$P(o);t=typeof t=="function"?t:t===void 0?Dz:Qt(t),e=typeof e=="function"?e:e===void 0?Oz:Qt(e);function o(l){var u,d=(l=QP(l)).length,A,f=!1,h;for(n==null&&(s=i(h=a())),u=0;u<=d;++u)!(u<d&&r(A=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(A,u,l),+e(A,u,l));if(h)return s=null,h+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Qt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Qt(+l),o):e},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Qt(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),o):n},o}function C0(t,e,r){var n=null,i=Qt(!0),s=null,a=c1,o=null,l=$P(u);t=typeof t=="function"?t:t===void 0?Dz:Qt(+t),e=typeof e=="function"?e:Qt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Oz:Qt(+r);function u(A){var f,h,m,p=(A=QP(A)).length,g,x=!1,v,y=new Array(p),w=new Array(p);for(s==null&&(o=a(v=l())),f=0;f<=p;++f){if(!(f<p&&i(g=A[f],f,A))===x)if(x=!x)h=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=f-1;m>=h;--m)o.point(y[m],w[m]);o.lineEnd(),o.areaEnd()}x&&(y[f]=+t(g,f,A),w[f]=+e(g,f,A),o.point(n?+n(g,f,A):y[f],r?+r(g,f,A):w[f]))}if(v)return o=null,v+""||null}function d(){return Fz().defined(i).curve(a).context(s)}return u.x=function(A){return arguments.length?(t=typeof A=="function"?A:Qt(+A),n=null,u):t},u.x0=function(A){return arguments.length?(t=typeof A=="function"?A:Qt(+A),u):t},u.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:Qt(+A),u):n},u.y=function(A){return arguments.length?(e=typeof A=="function"?A:Qt(+A),r=null,u):e},u.y0=function(A){return arguments.length?(e=typeof A=="function"?A:Qt(+A),u):e},u.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:Qt(+A),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(A){return arguments.length?(i=typeof A=="function"?A:Qt(!!A),u):i},u.curve=function(A){return arguments.length?(a=A,s!=null&&(o=a(s)),u):a},u.context=function(A){return arguments.length?(A==null?s=o=null:o=a(s=A),u):s},u}class Uz{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function C1e(t){return new Uz(t,!0)}function T1e(t){return new Uz(t,!1)}const HP={draw(t,e){const r=js(e/Ey);t.moveTo(r,0),t.arc(0,0,r,0,l1)}},B1e={draw(t,e){const r=js(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},$z=js(1/3),_1e=$z*2,N1e={draw(t,e){const r=js(e/_1e),n=r*$z;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},I1e={draw(t,e){const r=js(e),n=-r/2;t.rect(n,n,r,r)}},P1e=.8908130915292852,Qz=wy(Ey/10)/wy(7*Ey/10),R1e=wy(l1/10)*Qz,k1e=-Lz(l1/10)*Qz,L1e={draw(t,e){const r=js(e*P1e),n=R1e*r,i=k1e*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const a=l1*s/5,o=Lz(a),l=wy(a);t.lineTo(l*r,-o*r),t.lineTo(o*n-l*i,l*n+o*i)}t.closePath()}},US=js(3),j1e={draw(t,e){const r=-js(e/(US*3));t.moveTo(0,r*2),t.lineTo(-US*r,-r),t.lineTo(US*r,-r),t.closePath()}},Bi=-.5,_i=js(3)/2,s_=1/js(12),M1e=(s_/2+1)*3,D1e={draw(t,e){const r=js(e/M1e),n=r/2,i=r*s_,s=n,a=r*s_+r,o=-s,l=a;t.moveTo(n,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(Bi*n-_i*i,_i*n+Bi*i),t.lineTo(Bi*s-_i*a,_i*s+Bi*a),t.lineTo(Bi*o-_i*l,_i*o+Bi*l),t.lineTo(Bi*n+_i*i,Bi*i-_i*n),t.lineTo(Bi*s+_i*a,Bi*a-_i*s),t.lineTo(Bi*o+_i*l,Bi*l-_i*o),t.closePath()}};function O1e(t,e){let r=null,n=$P(i);t=typeof t=="function"?t:Qt(t||HP),e=typeof e=="function"?e:Qt(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Qt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Qt(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Sy(){}function Cy(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Hz(t){this._context=t}Hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function F1e(t){return new Hz(t)}function Kz(t){this._context=t}Kz.prototype={areaStart:Sy,areaEnd:Sy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Cy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function U1e(t){return new Kz(t)}function Vz(t){this._context=t}Vz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Cy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $1e(t){return new Vz(t)}function Gz(t){this._context=t}Gz.prototype={areaStart:Sy,areaEnd:Sy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Q1e(t){return new Gz(t)}function zD(t){return t<0?-1:1}function WD(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),a=(r-t._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(zD(s)+zD(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function YD(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function $S(t,e,r){var n=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-n)/3;t._context.bezierCurveTo(n+o,i+o*e,s-o,a-o*r,s,a)}function Ty(t){this._context=t}Ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$S(this,this._t0,YD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,$S(this,YD(this,r=WD(this,t,e)),r);break;default:$S(this,this._t0,r=WD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function zz(t){this._context=new Wz(t)}(zz.prototype=Object.create(Ty.prototype)).point=function(t,e){Ty.prototype.point.call(this,e,t)};function Wz(t){this._context=t}Wz.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function H1e(t){return new Ty(t)}function K1e(t){return new zz(t)}function Yz(t){this._context=t}Yz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=qD(t),i=qD(e),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function qD(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function V1e(t){return new Yz(t)}function u1(t,e){this._context=t,this._t=e}u1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function G1e(t){return new u1(t,.5)}function z1e(t){return new u1(t,0)}function W1e(t){return new u1(t,1)}function UA(t,e){if((a=t.length)>1)for(var r=1,n,i,s=t[e[0]],a,o=s.length;r<a;++r)for(i=s,s=t[e[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function a_(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Y1e(t,e){return t[e]}function q1e(t){const e=[];return e.key=t,e}function X1e(){var t=Qt([]),e=a_,r=UA,n=Y1e;function i(s){var a=Array.from(t.apply(this,arguments),q1e),o,l=a.length,u=-1,d;for(const A of s)for(o=0,++u;o<l;++o)(a[o][u]=[0,+n(A,a[o].key,u,s)]).data=A;for(o=0,d=QP(e(a));o<l;++o)a[d[o]].index=o;return r(a,d),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Qt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Qt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?a_:typeof s=="function"?s:Qt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??UA,i):r},i}function Z1e(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,a;i<s;++i){for(a=r=0;r<n;++r)a+=t[r][i][1]||0;if(a)for(r=0;r<n;++r)t[r][i][1]/=a}UA(t,e)}}function J1e(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var a=0,o=0;a<i;++a)o+=t[a][r][1]||0;n[r][1]+=n[r][0]=-o/2}UA(t,e)}}function eEe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,a;n<s;++n){for(var o=0,l=0,u=0;o<a;++o){for(var d=t[e[o]],A=d[n][1]||0,f=d[n-1][1]||0,h=(A-f)/2,m=0;m<o;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;h+=g-x}l+=A,u+=h*A}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,UA(t,e)}}function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}var tEe=["type","size","sizeType"];function o_(){return o_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o_.apply(this,arguments)}function XD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(r),!0).forEach(function(n){rEe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rEe(t,e,r){return e=nEe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nEe(t){var e=iEe(t,"string");return sm(e)=="symbol"?e:e+""}function iEe(t,e){if(sm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sEe(t,e){if(t==null)return{};var r=aEe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aEe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qz={symbolCircle:HP,symbolCross:B1e,symbolDiamond:N1e,symbolSquare:I1e,symbolStar:L1e,symbolTriangle:j1e,symbolWye:D1e},oEe=Math.PI/180,lEe=function(e){var r="symbol".concat(o1(e));return qz[r]||HP},cEe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*oEe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},uEe=function(e,r){qz["symbol".concat(o1(e))]=r},KP=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,l=sEe(e,tEe),u=ZD(ZD({},l),{},{type:n,size:s,sizeType:o}),d=function(){var g=lEe(n),x=O1e().type(g).size(cEe(s,o,n));return x()},A=u.className,f=u.cx,h=u.cy,m=ft(u,!0);return f===+f&&h===+h&&s===+s?Q.createElement("path",o_({},m,{className:gt("recharts-symbols",A),transform:"translate(".concat(f,", ").concat(h,")"),d:d()})):null};KP.registerSymbol=uEe;function $A(t){"@babel/helpers - typeof";return $A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$A(t)}function l_(){return l_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},l_.apply(this,arguments)}function JD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dEe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(r),!0).forEach(function(n){am(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fEe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zz(n.key),n)}}function hEe(t,e,r){return e&&fEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pEe(t,e,r){return e=By(e),mEe(t,Xz()?Reflect.construct(e,r||[],By(t).constructor):e.apply(t,r))}function mEe(t,e){if(e&&($A(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gEe(t)}function gEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xz=function(){return!!t})()}function By(t){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},By(t)}function xEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c_(t,e)}function c_(t,e){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},c_(t,e)}function am(t,e,r){return e=Zz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zz(t){var e=vEe(t,"string");return $A(e)=="symbol"?e:e+""}function vEe(t,e){if($A(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($A(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ni=32,VP=function(t){function e(){return AEe(this,e),pEe(this,e,arguments)}return xEe(e,t),hEe(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=Ni/2,a=Ni/6,o=Ni/3,l=n.inactive?i:n.color;if(n.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Ni,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Ni,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return Q.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ni/8,"h").concat(Ni,"v").concat(Ni*3/4,"h").concat(-Ni,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(n.legendIcon)){var u=dEe({},n);return delete u.legendIcon,Q.cloneElement(n.legendIcon,u)}return Q.createElement(KP,{fill:l,cx:s,cy:s,size:Ni,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Ni,height:Ni},A={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(h,m){var p=h.formatter||l,g=gt(am(am({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var x=ot(h.value)?null:h.value;lu(!ot(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return Q.createElement("li",l_({className:g,style:A,key:"legend-item-".concat(m)},by(n.props,h,m)),Q.createElement(JB,{width:a,height:a,viewBox:d,style:f},n.renderIcon(h)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},p?p(x,h,m):x))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,a=n.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(E.PureComponent);am(VP,"displayName","Legend");am(VP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var yEe=Ww;function bEe(){this.__data__=new yEe,this.size=0}var wEe=bEe;function EEe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var SEe=EEe;function CEe(t){return this.__data__.get(t)}var TEe=CEe;function BEe(t){return this.__data__.has(t)}var _Ee=BEe,NEe=Ww,IEe=RP,PEe=kP,REe=200;function kEe(t,e){var r=this.__data__;if(r instanceof NEe){var n=r.__data__;if(!IEe||n.length<REe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new PEe(n)}return r.set(t,e),this.size=r.size,this}var LEe=kEe,jEe=Ww,MEe=wEe,DEe=SEe,OEe=TEe,FEe=_Ee,UEe=LEe;function Df(t){var e=this.__data__=new jEe(t);this.size=e.size}Df.prototype.clear=MEe;Df.prototype.delete=DEe;Df.prototype.get=OEe;Df.prototype.has=FEe;Df.prototype.set=UEe;var Jz=Df,$Ee="__lodash_hash_undefined__";function QEe(t){return this.__data__.set(t,$Ee),this}var HEe=QEe;function KEe(t){return this.__data__.has(t)}var VEe=KEe,GEe=kP,zEe=HEe,WEe=VEe;function _y(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new GEe;++e<r;)this.add(t[e])}_y.prototype.add=_y.prototype.push=zEe;_y.prototype.has=WEe;var e7=_y;function YEe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var t7=YEe;function qEe(t,e){return t.has(e)}var r7=qEe,XEe=e7,ZEe=t7,JEe=r7,eSe=1,tSe=2;function rSe(t,e,r,n,i,s){var a=r&eSe,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var A=-1,f=!0,h=r&tSe?new XEe:void 0;for(s.set(t,e),s.set(e,t);++A<o;){var m=t[A],p=e[A];if(n)var g=a?n(p,m,A,e,t,s):n(m,p,A,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!ZEe(e,function(x,v){if(!JEe(h,v)&&(m===x||i(m,x,r,n,s)))return h.push(v)})){f=!1;break}}else if(!(m===p||i(m,p,r,n,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var n7=rSe,nSe=Na,iSe=nSe.Uint8Array,sSe=iSe;function aSe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var oSe=aSe;function lSe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var GP=lSe,eO=xg,tO=sSe,cSe=PP,uSe=n7,dSe=oSe,ASe=GP,fSe=1,hSe=2,pSe="[object Boolean]",mSe="[object Date]",gSe="[object Error]",xSe="[object Map]",vSe="[object Number]",ySe="[object RegExp]",bSe="[object Set]",wSe="[object String]",ESe="[object Symbol]",SSe="[object ArrayBuffer]",CSe="[object DataView]",rO=eO?eO.prototype:void 0,QS=rO?rO.valueOf:void 0;function TSe(t,e,r,n,i,s,a){switch(r){case CSe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case SSe:return!(t.byteLength!=e.byteLength||!s(new tO(t),new tO(e)));case pSe:case mSe:case vSe:return cSe(+t,+e);case gSe:return t.name==e.name&&t.message==e.message;case ySe:case wSe:return t==e+"";case xSe:var o=dSe;case bSe:var l=n&fSe;if(o||(o=ASe),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;n|=hSe,a.set(t,e);var d=uSe(o(t),o(e),n,i,s,a);return a.delete(t),d;case ESe:if(QS)return QS.call(t)==QS.call(e)}return!1}var BSe=TSe;function _Se(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var i7=_Se,NSe=i7,ISe=ei;function PSe(t,e,r){var n=e(t);return ISe(t)?n:NSe(n,r(t))}var RSe=PSe;function kSe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}var LSe=kSe;function jSe(){return[]}var MSe=jSe,DSe=LSe,OSe=MSe,FSe=Object.prototype,USe=FSe.propertyIsEnumerable,nO=Object.getOwnPropertySymbols,$Se=nO?function(t){return t==null?[]:(t=Object(t),DSe(nO(t),function(e){return USe.call(t,e)}))}:OSe,QSe=$Se;function HSe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var KSe=HSe,VSe=Po,GSe=Ro,zSe="[object Arguments]";function WSe(t){return GSe(t)&&VSe(t)==zSe}var YSe=WSe,iO=YSe,qSe=Ro,s7=Object.prototype,XSe=s7.hasOwnProperty,ZSe=s7.propertyIsEnumerable,JSe=iO(function(){return arguments}())?iO:function(t){return qSe(t)&&XSe.call(t,"callee")&&!ZSe.call(t,"callee")},zP=JSe,Ny={exports:{}};function eCe(){return!1}var tCe=eCe;Ny.exports;(function(t,e){var r=Na,n=tCe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?r.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||n;t.exports=u})(Ny,Ny.exports);var a7=Ny.exports,rCe=9007199254740991,nCe=/^(?:0|[1-9]\d*)$/;function iCe(t,e){var r=typeof t;return e=e??rCe,!!e&&(r=="number"||r!="symbol"&&nCe.test(t))&&t>-1&&t%1==0&&t<e}var WP=iCe,sCe=9007199254740991;function aCe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=sCe}var YP=aCe,oCe=Po,lCe=YP,cCe=Ro,uCe="[object Arguments]",dCe="[object Array]",ACe="[object Boolean]",fCe="[object Date]",hCe="[object Error]",pCe="[object Function]",mCe="[object Map]",gCe="[object Number]",xCe="[object Object]",vCe="[object RegExp]",yCe="[object Set]",bCe="[object String]",wCe="[object WeakMap]",ECe="[object ArrayBuffer]",SCe="[object DataView]",CCe="[object Float32Array]",TCe="[object Float64Array]",BCe="[object Int8Array]",_Ce="[object Int16Array]",NCe="[object Int32Array]",ICe="[object Uint8Array]",PCe="[object Uint8ClampedArray]",RCe="[object Uint16Array]",kCe="[object Uint32Array]",Wt={};Wt[CCe]=Wt[TCe]=Wt[BCe]=Wt[_Ce]=Wt[NCe]=Wt[ICe]=Wt[PCe]=Wt[RCe]=Wt[kCe]=!0;Wt[uCe]=Wt[dCe]=Wt[ECe]=Wt[ACe]=Wt[SCe]=Wt[fCe]=Wt[hCe]=Wt[pCe]=Wt[mCe]=Wt[gCe]=Wt[xCe]=Wt[vCe]=Wt[yCe]=Wt[bCe]=Wt[wCe]=!1;function LCe(t){return cCe(t)&&lCe(t.length)&&!!Wt[oCe(t)]}var jCe=LCe;function MCe(t){return function(e){return t(e)}}var o7=MCe,Iy={exports:{}};Iy.exports;(function(t,e){var r=pz,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s&&r.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Iy,Iy.exports);var DCe=Iy.exports,OCe=jCe,FCe=o7,sO=DCe,aO=sO&&sO.isTypedArray,UCe=aO?FCe(aO):OCe,l7=UCe,$Ce=KSe,QCe=zP,HCe=ei,KCe=a7,VCe=WP,GCe=l7,zCe=Object.prototype,WCe=zCe.hasOwnProperty;function YCe(t,e){var r=HCe(t),n=!r&&QCe(t),i=!r&&!n&&KCe(t),s=!r&&!n&&!i&&GCe(t),a=r||n||i||s,o=a?$Ce(t.length,String):[],l=o.length;for(var u in t)(e||WCe.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||VCe(u,l)))&&o.push(u);return o}var qCe=YCe,XCe=Object.prototype;function ZCe(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||XCe;return t===r}var JCe=ZCe;function eTe(t,e){return function(r){return t(e(r))}}var c7=eTe,tTe=c7,rTe=tTe(Object.keys,Object),nTe=rTe,iTe=JCe,sTe=nTe,aTe=Object.prototype,oTe=aTe.hasOwnProperty;function lTe(t){if(!iTe(t))return sTe(t);var e=[];for(var r in Object(t))oTe.call(t,r)&&r!="constructor"&&e.push(r);return e}var cTe=lTe,uTe=IP,dTe=YP;function ATe(t){return t!=null&&dTe(t.length)&&!uTe(t)}var d1=ATe,fTe=qCe,hTe=cTe,pTe=d1;function mTe(t){return pTe(t)?fTe(t):hTe(t)}var qP=mTe,gTe=RSe,xTe=QSe,vTe=qP;function yTe(t){return gTe(t,vTe,xTe)}var bTe=yTe,oO=bTe,wTe=1,ETe=Object.prototype,STe=ETe.hasOwnProperty;function CTe(t,e,r,n,i,s){var a=r&wTe,o=oO(t),l=o.length,u=oO(e),d=u.length;if(l!=d&&!a)return!1;for(var A=l;A--;){var f=o[A];if(!(a?f in e:STe.call(e,f)))return!1}var h=s.get(t),m=s.get(e);if(h&&m)return h==e&&m==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++A<l;){f=o[A];var x=t[f],v=e[f];if(n)var y=a?n(v,x,f,e,t,s):n(x,v,f,t,e,s);if(!(y===void 0?x===v||i(x,v,r,n,s):y)){p=!1;break}g||(g=f=="constructor")}if(p&&!g){var w=t.constructor,b=e.constructor;w!=b&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof b=="function"&&b instanceof b)&&(p=!1)}return s.delete(t),s.delete(e),p}var TTe=CTe,BTe=Ku,_Te=Na,NTe=BTe(_Te,"DataView"),ITe=NTe,PTe=Ku,RTe=Na,kTe=PTe(RTe,"Promise"),LTe=kTe,jTe=Ku,MTe=Na,DTe=jTe(MTe,"Set"),u7=DTe,OTe=Ku,FTe=Na,UTe=OTe(FTe,"WeakMap"),$Te=UTe,u_=ITe,d_=RP,A_=LTe,f_=u7,h_=$Te,d7=Po,Of=gz,lO="[object Map]",QTe="[object Object]",cO="[object Promise]",uO="[object Set]",dO="[object WeakMap]",AO="[object DataView]",HTe=Of(u_),KTe=Of(d_),VTe=Of(A_),GTe=Of(f_),zTe=Of(h_),Rc=d7;(u_&&Rc(new u_(new ArrayBuffer(1)))!=AO||d_&&Rc(new d_)!=lO||A_&&Rc(A_.resolve())!=cO||f_&&Rc(new f_)!=uO||h_&&Rc(new h_)!=dO)&&(Rc=function(t){var e=d7(t),r=e==QTe?t.constructor:void 0,n=r?Of(r):"";if(n)switch(n){case HTe:return AO;case KTe:return lO;case VTe:return cO;case GTe:return uO;case zTe:return dO}return e});var WTe=Rc,HS=Jz,YTe=n7,qTe=BSe,XTe=TTe,fO=WTe,hO=ei,pO=a7,ZTe=l7,JTe=1,mO="[object Arguments]",gO="[object Array]",T0="[object Object]",eBe=Object.prototype,xO=eBe.hasOwnProperty;function tBe(t,e,r,n,i,s){var a=hO(t),o=hO(e),l=a?gO:fO(t),u=o?gO:fO(e);l=l==mO?T0:l,u=u==mO?T0:u;var d=l==T0,A=u==T0,f=l==u;if(f&&pO(t)){if(!pO(e))return!1;a=!0,d=!1}if(f&&!d)return s||(s=new HS),a||ZTe(t)?YTe(t,e,r,n,i,s):qTe(t,e,l,r,n,i,s);if(!(r&JTe)){var h=d&&xO.call(t,"__wrapped__"),m=A&&xO.call(e,"__wrapped__");if(h||m){var p=h?t.value():t,g=m?e.value():e;return s||(s=new HS),i(p,g,r,n,s)}}return f?(s||(s=new HS),XTe(t,e,r,n,i,s)):!1}var rBe=tBe,nBe=rBe,vO=Ro;function A7(t,e,r,n,i){return t===e?!0:t==null||e==null||!vO(t)&&!vO(e)?t!==t&&e!==e:nBe(t,e,r,n,A7,i)}var XP=A7,iBe=Jz,sBe=XP,aBe=1,oBe=2;function lBe(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null)return!s;for(t=Object(t);i--;){var o=r[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=r[i];var l=o[0],u=t[l],d=o[1];if(a&&o[2]){if(u===void 0&&!(l in t))return!1}else{var A=new iBe;if(n)var f=n(u,d,l,t,e,A);if(!(f===void 0?sBe(d,u,aBe|oBe,n,A):f))return!1}}return!0}var cBe=lBe,uBe=cc;function dBe(t){return t===t&&!uBe(t)}var f7=dBe,ABe=f7,fBe=qP;function hBe(t){for(var e=fBe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,ABe(i)]}return e}var pBe=hBe;function mBe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var h7=mBe,gBe=cBe,xBe=pBe,vBe=h7;function yBe(t){var e=xBe(t);return e.length==1&&e[0][2]?vBe(e[0][0],e[0][1]):function(r){return r===t||gBe(r,t,e)}}var bBe=yBe;function wBe(t,e){return t!=null&&e in Object(t)}var EBe=wBe,SBe=wz,CBe=zP,TBe=ei,BBe=WP,_Be=YP,NBe=qw;function IBe(t,e,r){e=SBe(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var a=NBe(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&_Be(i)&&BBe(a,i)&&(TBe(t)||CBe(t)))}var PBe=IBe,RBe=EBe,kBe=PBe;function LBe(t,e){return t!=null&&kBe(t,e,RBe)}var jBe=LBe,MBe=XP,DBe=Ez,OBe=jBe,FBe=NP,UBe=f7,$Be=h7,QBe=qw,HBe=1,KBe=2;function VBe(t,e){return FBe(t)&&UBe(e)?$Be(QBe(t),e):function(r){var n=DBe(r,t);return n===void 0&&n===e?OBe(r,t):MBe(e,n,HBe|KBe)}}var GBe=VBe;function zBe(t){return t}var Ff=zBe;function WBe(t){return function(e){return e==null?void 0:e[t]}}var YBe=WBe,qBe=MP;function XBe(t){return function(e){return qBe(e,t)}}var ZBe=XBe,JBe=YBe,e_e=ZBe,t_e=NP,r_e=qw;function n_e(t){return t_e(t)?JBe(r_e(t)):e_e(t)}var i_e=n_e,s_e=bBe,a_e=GBe,o_e=Ff,l_e=ei,c_e=i_e;function u_e(t){return typeof t=="function"?t:t==null?o_e:typeof t=="object"?l_e(t)?a_e(t[0],t[1]):s_e(t):c_e(t)}var Uf=u_e;function d_e(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var A_e=d_e;function f_e(t){return t!==t}var h_e=f_e;function p_e(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var m_e=p_e,g_e=A_e,x_e=h_e,v_e=m_e;function y_e(t,e,r){return e===e?v_e(t,e,r):g_e(t,x_e,r)}var b_e=y_e,w_e=b_e;function E_e(t,e){var r=t==null?0:t.length;return!!r&&w_e(t,e,0)>-1}var S_e=E_e;function C_e(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var T_e=C_e;function B_e(){}var __e=B_e,KS=u7,N_e=__e,I_e=GP,P_e=1/0,R_e=KS&&1/I_e(new KS([,-0]))[1]==P_e?function(t){return new KS(t)}:N_e,k_e=R_e,L_e=e7,j_e=S_e,M_e=T_e,D_e=r7,O_e=k_e,F_e=GP,U_e=200;function $_e(t,e,r){var n=-1,i=j_e,s=t.length,a=!0,o=[],l=o;if(r)a=!1,i=M_e;else if(s>=U_e){var u=e?null:O_e(t);if(u)return F_e(u);a=!1,i=D_e,l=new L_e}else l=e?[]:o;e:for(;++n<s;){var d=t[n],A=e?e(d):d;if(d=r||d!==0?d:0,a&&A===A){for(var f=l.length;f--;)if(l[f]===A)continue e;e&&l.push(A),o.push(d)}else i(l,A,r)||(l!==o&&l.push(A),o.push(d))}return o}var Q_e=$_e,H_e=Uf,K_e=Q_e;function V_e(t,e){return t&&t.length?K_e(t,H_e(e)):[]}var G_e=V_e;const yO=$t(G_e);function p7(t,e,r){return e===!0?yO(t,r):ot(e)?yO(t,e):t}function QA(t){"@babel/helpers - typeof";return QA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QA(t)}var z_e=["ref"];function bO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bO(Object(r),!0).forEach(function(n){A1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function W_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g7(n.key),n)}}function Y_e(t,e,r){return e&&wO(t.prototype,e),r&&wO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function q_e(t,e,r){return e=Py(e),X_e(t,m7()?Reflect.construct(e,r||[],Py(t).constructor):e.apply(t,r))}function X_e(t,e){if(e&&(QA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z_e(t)}function Z_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m7=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Py(t)}function J_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p_(t,e)}function p_(t,e){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},p_(t,e)}function A1(t,e,r){return e=g7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g7(t){var e=eNe(t,"string");return QA(e)=="symbol"?e:e+""}function eNe(t,e){if(QA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(QA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tNe(t,e){if(t==null)return{};var r=rNe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nNe(t){return t.value}function iNe(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var r=tNe(e,z_e);return Q.createElement(VP,r)}var EO=1,iA=function(t){function e(){var r;W_e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=q_e(this,e,[].concat(i)),A1(r,"lastBoundingBox",{width:-1,height:-1}),r}return J_e(e,t),Y_e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>EO||Math.abs(i.height-this.lastBoundingBox.height)>EO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ma({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,A,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&s==="vertical"){var h=this.getBBoxSnapshot();A={left:((u||0)-h.width)/2}}else A=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();f={top:((d||0)-m.height)/2}}else f=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Ma(Ma({},A),f)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,A=Ma(Ma({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return Q.createElement("div",{className:"recharts-legend-wrapper",style:A,ref:function(h){n.wrapperNode=h}},iNe(s,Ma(Ma({},this.props),{},{payload:p7(d,u,nNe)})))}}],[{key:"getWithHeight",value:function(n,i){var s=Ma(Ma({},this.defaultProps),n.props),a=s.layout;return a==="vertical"&&we(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(E.PureComponent);A1(iA,"displayName","Legend");A1(iA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var SO=xg,sNe=zP,aNe=ei,CO=SO?SO.isConcatSpreadable:void 0;function oNe(t){return aNe(t)||sNe(t)||!!(CO&&t&&t[CO])}var lNe=oNe,cNe=i7,uNe=lNe;function x7(t,e,r,n,i){var s=-1,a=t.length;for(r||(r=uNe),i||(i=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?x7(o,e-1,r,n,i):cNe(i,o):n||(i[i.length]=o)}return i}var v7=x7;function dNe(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[t?o:++i];if(r(s[l],l,s)===!1)break}return e}}var ANe=dNe,fNe=ANe,hNe=fNe(),pNe=hNe,mNe=pNe,gNe=qP;function xNe(t,e){return t&&mNe(t,e,gNe)}var y7=xNe,vNe=d1;function yNe(t,e){return function(r,n){if(r==null)return r;if(!vNe(r))return t(r,n);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var bNe=yNe,wNe=y7,ENe=bNe,SNe=ENe(wNe),ZP=SNe,CNe=ZP,TNe=d1;function BNe(t,e){var r=-1,n=TNe(t)?Array(t.length):[];return CNe(t,function(i,s,a){n[++r]=e(i,s,a)}),n}var b7=BNe;function _Ne(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var NNe=_Ne,TO=Pf;function INe(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,s=TO(t),a=e!==void 0,o=e===null,l=e===e,u=TO(e);if(!o&&!u&&!s&&t>e||s&&a&&l&&!o&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!s&&!u&&t<e||u&&r&&i&&!n&&!s||o&&r&&i||!a&&i||!l)return-1}return 0}var PNe=INe,RNe=PNe;function kNe(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,a=i.length,o=r.length;++n<a;){var l=RNe(i[n],s[n]);if(l){if(n>=o)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return t.index-e.index}var LNe=kNe,VS=jP,jNe=MP,MNe=Uf,DNe=b7,ONe=NNe,FNe=o7,UNe=LNe,$Ne=Ff,QNe=ei;function HNe(t,e,r){e.length?e=VS(e,function(s){return QNe(s)?function(a){return jNe(a,s.length===1?s[0]:s)}:s}):e=[$Ne];var n=-1;e=VS(e,FNe(MNe));var i=DNe(t,function(s,a,o){var l=VS(e,function(u){return u(s)});return{criteria:l,index:++n,value:s}});return ONe(i,function(s,a){return UNe(s,a,r)})}var KNe=HNe;function VNe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var GNe=VNe,zNe=GNe,BO=Math.max;function WNe(t,e,r){return e=BO(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=BO(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(a),zNe(t,this,o)}}var YNe=WNe;function qNe(t){return function(){return t}}var XNe=qNe,ZNe=Ku,JNe=function(){try{var t=ZNe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),w7=JNe,e2e=XNe,_O=w7,t2e=Ff,r2e=_O?function(t,e){return _O(t,"toString",{configurable:!0,enumerable:!1,value:e2e(e),writable:!0})}:t2e,n2e=r2e,i2e=800,s2e=16,a2e=Date.now;function o2e(t){var e=0,r=0;return function(){var n=a2e(),i=s2e-(n-r);if(r=n,i>0){if(++e>=i2e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var l2e=o2e,c2e=n2e,u2e=l2e,d2e=u2e(c2e),A2e=d2e,f2e=Ff,h2e=YNe,p2e=A2e;function m2e(t,e){return p2e(h2e(t,e,f2e),t+"")}var g2e=m2e,x2e=PP,v2e=d1,y2e=WP,b2e=cc;function w2e(t,e,r){if(!b2e(r))return!1;var n=typeof e;return(n=="number"?v2e(r)&&y2e(e,r.length):n=="string"&&e in r)?x2e(r[e],t):!1}var f1=w2e,E2e=v7,S2e=KNe,C2e=g2e,NO=f1,T2e=C2e(function(t,e){if(t==null)return[];var r=e.length;return r>1&&NO(t,e[0],e[1])?e=[]:r>2&&NO(e[0],e[1],e[2])&&(e=[e[0]]),S2e(t,E2e(e,1),[])}),B2e=T2e;const JP=$t(B2e);function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}function m_(){return m_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m_.apply(this,arguments)}function _2e(t,e){return R2e(t)||P2e(t,e)||I2e(t,e)||N2e()}function N2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2e(t,e){if(t){if(typeof t=="string")return IO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IO(t,e)}}function IO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function R2e(t){if(Array.isArray(t))return t}function PO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PO(Object(r),!0).forEach(function(n){k2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k2e(t,e,r){return e=L2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L2e(t){var e=j2e(t,"string");return om(e)=="symbol"?e:e+""}function j2e(t,e){if(om(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(om(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M2e(t){return Array.isArray(t)&&Fr(t[0])&&Fr(t[1])?t.join(" ~ "):t}var D2e=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,l=e.labelStyle,u=l===void 0?{}:l,d=e.payload,A=e.formatter,f=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,p=e.label,g=e.labelFormatter,x=e.accessibilityLayer,v=x===void 0?!1:x,y=function(){if(d&&d.length){var L={padding:0,margin:0},N=(f?JP(d,f):d).map(function(R,M){if(R.type==="none")return null;var k=GS({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},o),O=R.formatter||A||M2e,j=R.value,D=R.name,F=j,$=D;if(O&&F!=null&&$!=null){var U=O(j,D,R,M,d);if(Array.isArray(U)){var K=_2e(U,2);F=K[0],$=K[1]}else F=U}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:k},Fr($)?Q.createElement("span",{className:"recharts-tooltip-item-name"},$):null,Fr($)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},F),Q.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:L},N)}return null},w=GS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),b=GS({margin:0},u),S=!ht(p),C=S?p:"",T=gt("recharts-default-tooltip",h),B=gt("recharts-tooltip-label",m);S&&g&&d!==void 0&&d!==null&&(C=g(p,d));var _=v?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",m_({className:T,style:w},_),Q.createElement("p",{className:B,style:b},Q.isValidElement(C)?C:"".concat(C)),y())};function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function B0(t,e,r){return e=O2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O2e(t){var e=F2e(t,"string");return lm(e)=="symbol"?e:e+""}function F2e(t,e){if(lm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oh="recharts-tooltip-wrapper",U2e={visibility:"hidden"};function $2e(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return gt(oh,B0(B0(B0(B0({},"".concat(oh,"-right"),we(r)&&e&&we(e.x)&&r>=e.x),"".concat(oh,"-left"),we(r)&&e&&we(e.x)&&r<e.x),"".concat(oh,"-bottom"),we(n)&&e&&we(e.y)&&n>=e.y),"".concat(oh,"-top"),we(n)&&e&&we(e.y)&&n<e.y))}function RO(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(s&&we(s[n]))return s[n];var d=r[n]-o-i,A=r[n]+i;if(e[n])return a[n]?d:A;if(a[n]){var f=d,h=l[n];return f<h?Math.max(A,l[n]):Math.max(d,l[n])}var m=A+o,p=l[n]+u;return m>p?Math.max(d,l[n]):Math.max(A,l[n])}function Q2e(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function H2e(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,d,A;return a.height>0&&a.width>0&&r?(d=RO({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),A=RO({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=Q2e({translateX:d,translateY:A,useTranslate3d:o})):u=U2e,{cssProperties:u,cssClasses:$2e({translateX:d,translateY:A,coordinate:r})}}function HA(t){"@babel/helpers - typeof";return HA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HA(t)}function kO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kO(Object(r),!0).forEach(function(n){x_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S7(n.key),n)}}function G2e(t,e,r){return e&&V2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z2e(t,e,r){return e=Ry(e),W2e(t,E7()?Reflect.construct(e,r||[],Ry(t).constructor):e.apply(t,r))}function W2e(t,e){if(e&&(HA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y2e(t)}function Y2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E7=function(){return!!t})()}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ry(t)}function q2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g_(t,e)}function g_(t,e){return g_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},g_(t,e)}function x_(t,e,r){return e=S7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S7(t){var e=X2e(t,"string");return HA(e)=="symbol"?e:e+""}function X2e(t,e){if(HA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(HA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jO=1,Z2e=function(t){function e(){var r;K2e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=z2e(this,e,[].concat(i)),x_(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),x_(r,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return q2e(e,t),G2e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>jO||Math.abs(n.height-this.state.lastBoundingBox.height)>jO)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,A=i.hasPayload,f=i.isAnimationActive,h=i.offset,m=i.position,p=i.reverseDirection,g=i.useTranslate3d,x=i.viewBox,v=i.wrapperStyle,y=H2e({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:x}),w=y.cssClasses,b=y.cssProperties,S=LO(LO({transition:f&&s?"transform ".concat(o,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&A?"visible":"hidden",position:"absolute",top:0,left:0},v);return Q.createElement("div",{tabIndex:-1,className:w,style:S,ref:function(T){n.wrapperNode=T}},u)}}])}(E.PureComponent),J2e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ao={isSsr:J2e(),get:function(e){return ao[e]},set:function(e,r){if(typeof e=="string")ao[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){ao[i]=e[i]})}}};function KA(t){"@babel/helpers - typeof";return KA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KA(t)}function MO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(r),!0).forEach(function(n){eR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tIe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T7(n.key),n)}}function rIe(t,e,r){return e&&tIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nIe(t,e,r){return e=ky(e),iIe(t,C7()?Reflect.construct(e,r||[],ky(t).constructor):e.apply(t,r))}function iIe(t,e){if(e&&(KA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sIe(t)}function sIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C7=function(){return!!t})()}function ky(t){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ky(t)}function aIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v_(t,e)}function v_(t,e){return v_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},v_(t,e)}function eR(t,e,r){return e=T7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T7(t){var e=oIe(t,"string");return KA(e)=="symbol"?e:e+""}function oIe(t,e){if(KA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(KA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lIe(t){return t.dataKey}function cIe(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(D2e,e)}var Ys=function(t){function e(){return eIe(this,e),nIe(this,e,arguments)}return aIe(e,t),rIe(e,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,A=i.filterNull,f=i.isAnimationActive,h=i.offset,m=i.payload,p=i.payloadUniqBy,g=i.position,x=i.reverseDirection,v=i.useTranslate3d,y=i.viewBox,w=i.wrapperStyle,b=m??[];A&&b.length&&(b=p7(m.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),p,lIe));var S=b.length>0;return Q.createElement(Z2e,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:f,active:s,coordinate:d,hasPayload:S,offset:h,position:g,reverseDirection:x,useTranslate3d:v,viewBox:y,wrapperStyle:w},cIe(u,DO(DO({},this.props),{},{payload:b})))}}])}(E.PureComponent);eR(Ys,"displayName","Tooltip");eR(Ys,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ao.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var uIe=Na,dIe=function(){return uIe.Date.now()},AIe=dIe,fIe=/\s/;function hIe(t){for(var e=t.length;e--&&fIe.test(t.charAt(e)););return e}var pIe=hIe,mIe=pIe,gIe=/^\s+/;function xIe(t){return t&&t.slice(0,mIe(t)+1).replace(gIe,"")}var vIe=xIe,yIe=vIe,OO=cc,bIe=Pf,FO=NaN,wIe=/^[-+]0x[0-9a-f]+$/i,EIe=/^0b[01]+$/i,SIe=/^0o[0-7]+$/i,CIe=parseInt;function TIe(t){if(typeof t=="number")return t;if(bIe(t))return FO;if(OO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=OO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yIe(t);var r=EIe.test(t);return r||SIe.test(t)?CIe(t.slice(2),r?2:8):wIe.test(t)?FO:+t}var B7=TIe,BIe=cc,zS=AIe,UO=B7,_Ie="Expected a function",NIe=Math.max,IIe=Math.min;function PIe(t,e,r){var n,i,s,a,o,l,u=0,d=!1,A=!1,f=!0;if(typeof t!="function")throw new TypeError(_Ie);e=UO(e)||0,BIe(r)&&(d=!!r.leading,A="maxWait"in r,s=A?NIe(UO(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function h(S){var C=n,T=i;return n=i=void 0,u=S,a=t.apply(T,C),a}function m(S){return u=S,o=setTimeout(x,e),d?h(S):a}function p(S){var C=S-l,T=S-u,B=e-C;return A?IIe(B,s-T):B}function g(S){var C=S-l,T=S-u;return l===void 0||C>=e||C<0||A&&T>=s}function x(){var S=zS();if(g(S))return v(S);o=setTimeout(x,p(S))}function v(S){return o=void 0,f&&n?h(S):(n=i=void 0,a)}function y(){o!==void 0&&clearTimeout(o),u=0,n=l=i=o=void 0}function w(){return o===void 0?a:v(zS())}function b(){var S=zS(),C=g(S);if(n=arguments,i=this,l=S,C){if(o===void 0)return m(l);if(A)return clearTimeout(o),o=setTimeout(x,e),h(l)}return o===void 0&&(o=setTimeout(x,e)),a}return b.cancel=y,b.flush=w,b}var RIe=PIe,kIe=RIe,LIe=cc,jIe="Expected a function";function MIe(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(jIe);return LIe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),kIe(t,e,{leading:n,maxWait:e,trailing:i})}var DIe=MIe;const _7=$t(DIe);function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function $O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(r),!0).forEach(function(n){OIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OIe(t,e,r){return e=FIe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FIe(t){var e=UIe(t,"string");return cm(e)=="symbol"?e:e+""}function UIe(t,e){if(cm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ie(t,e){return VIe(t)||KIe(t,e)||HIe(t,e)||QIe()}function QIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HIe(t,e){if(t){if(typeof t=="string")return QO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QO(t,e)}}function QO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KIe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function VIe(t){if(Array.isArray(t))return t}var GIe=E.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=t.width,a=s===void 0?"100%":s,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,A=t.minHeight,f=t.maxHeight,h=t.children,m=t.debounce,p=m===void 0?0:m,g=t.id,x=t.className,v=t.onResize,y=t.style,w=y===void 0?{}:y,b=E.useRef(null),S=E.useRef();S.current=v,E.useImperativeHandle(e,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var C=E.useState({containerWidth:i.width,containerHeight:i.height}),T=$Ie(C,2),B=T[0],_=T[1],I=E.useCallback(function(N,R){_(function(M){var k=Math.round(N),O=Math.round(R);return M.containerWidth===k&&M.containerHeight===O?M:{containerWidth:k,containerHeight:O}})},[]);E.useEffect(function(){var N=function(D){var F,$=D[0].contentRect,U=$.width,K=$.height;I(U,K),(F=S.current)===null||F===void 0||F.call(S,U,K)};p>0&&(N=_7(N,p,{trailing:!0,leading:!1}));var R=new ResizeObserver(N),M=b.current.getBoundingClientRect(),k=M.width,O=M.height;return I(k,O),R.observe(b.current),function(){R.disconnect()}},[I,p]);var L=E.useMemo(function(){var N=B.containerWidth,R=B.containerHeight;if(N<0||R<0)return null;lu(Qc(a)||Qc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),lu(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=Qc(a)?N:a,k=Qc(l)?R:l;r&&r>0&&(M?k=M/r:k&&(M=k*r),f&&k>f&&(k=f)),lu(M>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,k,a,l,d,A,r);var O=!Array.isArray(h)&&so(h.type).endsWith("Chart");return Q.Children.map(h,function(j){return Q.isValidElement(j)?E.cloneElement(j,_0({width:M,height:k},O?{style:_0({height:"100%",width:"100%",maxHeight:k,maxWidth:M},j.props.style)}:{})):j})},[r,h,l,f,A,d,B,a]);return Q.createElement("div",{id:g?"".concat(g):void 0,className:gt("recharts-responsive-container",x),style:_0(_0({},w),{},{width:a,height:l,minWidth:d,minHeight:A,maxHeight:f}),ref:b},L)}),N7=function(e){return null};N7.displayName="Cell";function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function HO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function y_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(r),!0).forEach(function(n){zIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zIe(t,e,r){return e=WIe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WIe(t){var e=YIe(t,"string");return um(e)=="symbol"?e:e+""}function YIe(t,e){if(um(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ad={widthCache:{},cacheCount:0},qIe=2e3,XIe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},KO="recharts_measurement_span";function ZIe(t){var e=y_({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var cp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ao.isSsr)return{width:0,height:0};var n=ZIe(r),i=JSON.stringify({text:e,copyStyle:n});if(ad.widthCache[i])return ad.widthCache[i];try{var s=document.getElementById(KO);s||(s=document.createElement("span"),s.setAttribute("id",KO),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=y_(y_({},XIe),n);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return ad.widthCache[i]=l,++ad.cacheCount>qIe&&(ad.cacheCount=0,ad.widthCache={}),l}catch{return{width:0,height:0}}},JIe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function dm(t){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(t)}function Ly(t,e){return nPe(t)||rPe(t,e)||tPe(t,e)||ePe()}function ePe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tPe(t,e){if(t){if(typeof t=="string")return VO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VO(t,e)}}function VO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rPe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function nPe(t){if(Array.isArray(t))return t}function iPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aPe(n.key),n)}}function sPe(t,e,r){return e&&GO(t.prototype,e),r&&GO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aPe(t){var e=oPe(t,"string");return dm(e)=="symbol"?e:e+""}function oPe(t,e){if(dm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,I7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uPe=Object.keys(I7),Md="NaN";function dPe(t,e){return t*I7[e]}var N0=function(){function t(e,r){iPe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!lPe.test(r)&&(this.num=NaN,this.unit=""),uPe.includes(r)&&(this.num=dPe(e,r),this.unit="px")}return sPe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=cPe.exec(r))!==null&&n!==void 0?n:[],s=Ly(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function P7(t){if(t.includes(Md))return Md;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=zO.exec(e))!==null&&r!==void 0?r:[],i=Ly(n,4),s=i[1],a=i[2],o=i[3],l=N0.parse(s??""),u=N0.parse(o??""),d=a==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Md;e=e.replace(zO,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var A,f=(A=WO.exec(e))!==null&&A!==void 0?A:[],h=Ly(f,4),m=h[1],p=h[2],g=h[3],x=N0.parse(m??""),v=N0.parse(g??""),y=p==="+"?x.add(v):x.subtract(v);if(y.isNaN())return Md;e=e.replace(WO,y.toString())}return e}var YO=/\(([^()]*)\)/;function APe(t){for(var e=t;e.includes("(");){var r=YO.exec(e),n=Ly(r,2),i=n[1];e=e.replace(YO,P7(i))}return e}function fPe(t){var e=t.replace(/\s+/g,"");return e=APe(e),e=P7(e),e}function hPe(t){try{return fPe(t)}catch{return Md}}function WS(t){var e=hPe(t.slice(5,-1));return e===Md?"":e}var pPe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mPe=["dx","dy","angle","className","breakAll"];function b_(){return b_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b_.apply(this,arguments)}function qO(t,e){if(t==null)return{};var r=gPe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function XO(t,e){return bPe(t)||yPe(t,e)||vPe(t,e)||xPe()}function xPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vPe(t,e){if(t){if(typeof t=="string")return ZO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZO(t,e)}}function ZO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yPe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function bPe(t){if(Array.isArray(t))return t}var R7=/[ \f\n\r\t\v\u2028\u2029]+/,k7=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var s=[];ht(r)||(n?s=r.toString().split(""):s=r.toString().split(R7));var a=s.map(function(l){return{word:l,width:cp(l,i).width}}),o=n?0:cp("",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},wPe=function(e,r,n,i,s){var a=e.maxLines,o=e.children,l=e.style,u=e.breakAll,d=we(a),A=o,f=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(k,O){var j=O.word,D=O.width,F=k[k.length-1];if(F&&(i==null||s||F.width+D+n<Number(i)))F.words.push(j),F.width+=D+n;else{var $={words:[j],width:D};k.push($)}return k},[])},h=f(r),m=function(M){return M.reduce(function(k,O){return k.width>O.width?k:O})};if(!d)return h;for(var p="",g=function(M){var k=A.slice(0,M),O=k7({breakAll:u,style:l,children:k+p}).wordsWithComputedWidth,j=f(O),D=j.length>a||m(j).width>Number(i);return[D,j]},x=0,v=A.length-1,y=0,w;x<=v&&y<=A.length-1;){var b=Math.floor((x+v)/2),S=b-1,C=g(S),T=XO(C,2),B=T[0],_=T[1],I=g(b),L=XO(I,1),N=L[0];if(!B&&!N&&(x=b+1),B&&N&&(v=b-1),!B&&N){w=_;break}y++}return w||h},JO=function(e){var r=ht(e)?[]:e.toString().split(R7);return[{words:r}]},EPe=function(e){var r=e.width,n=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((r||n)&&!ao.isSsr){var l,u,d=k7({breakAll:a,children:i,style:s});if(d){var A=d.wordsWithComputedWidth,f=d.spaceWidth;l=A,u=f}else return JO(i);return wPe({breakAll:a,children:i,maxLines:o,style:s},l,u,r,n)}return JO(i)},eF="#808080",jy=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,l=e.capHeight,u=l===void 0?"0.71em":l,d=e.scaleToFit,A=d===void 0?!1:d,f=e.textAnchor,h=f===void 0?"start":f,m=e.verticalAnchor,p=m===void 0?"end":m,g=e.fill,x=g===void 0?eF:g,v=qO(e,pPe),y=E.useMemo(function(){return EPe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:A,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,A,v.style,v.width]),w=v.dx,b=v.dy,S=v.angle,C=v.className,T=v.breakAll,B=qO(v,mPe);if(!Fr(n)||!Fr(s))return null;var _=n+(we(w)?w:0),I=s+(we(b)?b:0),L;switch(p){case"start":L=WS("calc(".concat(u,")"));break;case"middle":L=WS("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:L=WS("calc(".concat(y.length-1," * -").concat(o,")"));break}var N=[];if(A){var R=y[0].width,M=v.width;N.push("scale(".concat((we(M)?M/R:1)/R,")"))}return S&&N.push("rotate(".concat(S,", ").concat(_,", ").concat(I,")")),N.length&&(B.transform=N.join(" ")),Q.createElement("text",b_({},ft(B,!0),{x:_,y:I,className:gt("recharts-text",C),textAnchor:h,fill:x.includes("url")?eF:x}),y.map(function(k,O){var j=k.words.join(T?"":" ");return Q.createElement("tspan",{x:_,dy:O===0?L:o,key:"".concat(j,"-").concat(O)},j)}))};function Ql(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SPe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tR(t){let e,r,n;t.length!==2?(e=Ql,r=(o,l)=>Ql(t(o),l),n=(o,l)=>t(o)-l):(e=t===Ql||t===SPe?t:CPe,r=t,n=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const A=u+d>>>1;r(o[A],l)<0?u=A+1:d=A}while(u<d)}return u}function s(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const A=u+d>>>1;r(o[A],l)<=0?u=A+1:d=A}while(u<d)}return u}function a(o,l,u=0,d=o.length){const A=i(o,l,u,d-1);return A>u&&n(o[A-1],l)>-n(o[A],l)?A-1:A}return{left:i,center:a,right:s}}function CPe(){return 0}function L7(t){return t===null?NaN:+t}function*TPe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const BPe=tR(Ql),yg=BPe.right;tR(L7).center;class tF extends Map{constructor(e,r=IPe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(rF(this,e))}has(e){return super.has(rF(this,e))}set(e,r){return super.set(_Pe(this,e),r)}delete(e){return super.delete(NPe(this,e))}}function rF({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function _Pe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function NPe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function IPe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function PPe(t=Ql){if(t===Ql)return j7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function j7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const RPe=Math.sqrt(50),kPe=Math.sqrt(10),LPe=Math.sqrt(2);function My(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=RPe?10:s>=kPe?5:s>=LPe?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=r&&r<2?My(t,e,r*2):[o,l,u]}function w_(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,a]=n?My(e,t,r):My(t,e,r);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(n)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function E_(t,e,r){return e=+e,t=+t,r=+r,My(t,e,r)[2]}function S_(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?E_(e,t,r):E_(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function nF(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function iF(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function M7(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?j7:PPe(i);n>r;){if(n-r>600){const l=n-r+1,u=e-r+1,d=Math.log(l),A=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*A*(l-A)/l)*(u-l/2<0?-1:1),h=Math.max(r,Math.floor(e-u*A/l+f)),m=Math.min(n,Math.floor(e+(l-u)*A/l+f));M7(t,e,h,m,i)}const s=t[e];let a=r,o=n;for(lh(t,r,e),i(t[n],s)>0&&lh(t,r,n);a<o;){for(lh(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[r],s)===0?lh(t,r,o):(++o,lh(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1)}return t}function lh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function jPe(t,e,r){if(t=Float64Array.from(TPe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return iF(t);if(e>=1)return nF(t);var n,i=(n-1)*e,s=Math.floor(i),a=nF(M7(t,s).subarray(0,s+1)),o=iF(t.subarray(s+1));return a+(o-a)*(i-s)}}function MPe(t,e,r=L7){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),a=+r(t[s],s,t),o=+r(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function DPe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function ts(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ko(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const C_=Symbol("implicit");function rR(){var t=new tF,e=[],r=[],n=C_;function i(s){let a=t.get(s);if(a===void 0){if(n!==C_)return n;t.set(s,a=e.push(s)-1)}return r[a%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new tF;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return rR(e,r).unknown(n)},ts.apply(i,arguments),i}function Am(){var t=rR().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,a,o=!1,l=0,u=0,d=.5;delete t.unknown;function A(){var f=e().length,h=i<n,m=h?i:n,p=h?n:i;s=(p-m)/Math.max(1,f-l+u*2),o&&(s=Math.floor(s)),m+=(p-m-s*(f-l))*d,a=s*(1-l),o&&(m=Math.round(m),a=Math.round(a));var g=DPe(f).map(function(x){return m+s*x});return r(h?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),A()):e()},t.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,A()):[n,i]},t.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,o=!0,A()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(o=!!f,A()):o},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),A()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),A()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,A()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),A()):d},t.copy=function(){return Am(e(),[n,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},ts.apply(A(),arguments)}function D7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return D7(e())},t}function up(){return D7(Am.apply(null,arguments).paddingInner(1))}function nR(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function O7(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function bg(){}var fm=.7,Dy=1/fm,sA="\\s*([+-]?\\d+)\\s*",hm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OPe=/^#([0-9a-f]{3,8})$/,FPe=new RegExp(`^rgb\\(${sA},${sA},${sA}\\)$`),UPe=new RegExp(`^rgb\\(${ma},${ma},${ma}\\)$`),$Pe=new RegExp(`^rgba\\(${sA},${sA},${sA},${hm}\\)$`),QPe=new RegExp(`^rgba\\(${ma},${ma},${ma},${hm}\\)$`),HPe=new RegExp(`^hsl\\(${hm},${ma},${ma}\\)$`),KPe=new RegExp(`^hsla\\(${hm},${ma},${ma},${hm}\\)$`),sF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nR(bg,Ru,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aF,formatHex:aF,formatHex8:VPe,formatHsl:GPe,formatRgb:oF,toString:oF});function aF(){return this.rgb().formatHex()}function VPe(){return this.rgb().formatHex8()}function GPe(){return F7(this).formatHsl()}function oF(){return this.rgb().formatRgb()}function Ru(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=OPe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?lF(e):r===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?I0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?I0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=FPe.exec(t))?new Wn(e[1],e[2],e[3],1):(e=UPe.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$Pe.exec(t))?I0(e[1],e[2],e[3],e[4]):(e=QPe.exec(t))?I0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=HPe.exec(t))?dF(e[1],e[2]/100,e[3]/100,1):(e=KPe.exec(t))?dF(e[1],e[2]/100,e[3]/100,e[4]):sF.hasOwnProperty(t)?lF(sF[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function lF(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function I0(t,e,r,n){return n<=0&&(t=e=r=NaN),new Wn(t,e,r,n)}function zPe(t){return t instanceof bg||(t=Ru(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function T_(t,e,r,n){return arguments.length===1?zPe(t):new Wn(t,e,r,n??1)}function Wn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}nR(Wn,T_,O7(bg,{brighter(t){return t=t==null?Dy:Math.pow(Dy,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fm:Math.pow(fm,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(cu(this.r),cu(this.g),cu(this.b),Oy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cF,formatHex:cF,formatHex8:WPe,formatRgb:uF,toString:uF}));function cF(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}`}function WPe(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}${Hc((isNaN(this.opacity)?1:this.opacity)*255)}`}function uF(){const t=Oy(this.opacity);return`${t===1?"rgb(":"rgba("}${cu(this.r)}, ${cu(this.g)}, ${cu(this.b)}${t===1?")":`, ${t})`}`}function Oy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hc(t){return t=cu(t),(t<16?"0":"")+t.toString(16)}function dF(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new xs(t,e,r,n)}function F7(t){if(t instanceof xs)return new xs(t.h,t.s,t.l,t.opacity);if(t instanceof bg||(t=Ru(t)),!t)return new xs;if(t instanceof xs)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(r-n)/o+(r<n)*6:r===s?a=(n-e)/o+2:a=(e-r)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new xs(a,o,l,t.opacity)}function YPe(t,e,r,n){return arguments.length===1?F7(t):new xs(t,e,r,n??1)}function xs(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}nR(xs,YPe,O7(bg,{brighter(t){return t=t==null?Dy:Math.pow(Dy,t),new xs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fm:Math.pow(fm,t),new xs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Wn(YS(t>=240?t-240:t+120,i,n),YS(t,i,n),YS(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new xs(AF(this.h),P0(this.s),P0(this.l),Oy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oy(this.opacity);return`${t===1?"hsl(":"hsla("}${AF(this.h)}, ${P0(this.s)*100}%, ${P0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function AF(t){return t=(t||0)%360,t<0?t+360:t}function P0(t){return Math.max(0,Math.min(1,t||0))}function YS(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const iR=t=>()=>t;function qPe(t,e){return function(r){return t+r*e}}function XPe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function ZPe(t){return(t=+t)==1?U7:function(e,r){return r-e?XPe(e,r,t):iR(isNaN(e)?r:e)}}function U7(t,e){var r=e-t;return r?qPe(t,r):iR(isNaN(t)?e:t)}const Fy=function t(e){var r=ZPe(e);function n(i,s){var a=r((i=T_(i)).r,(s=T_(s)).r),o=r(i.g,s.g),l=r(i.b,s.b),u=U7(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=t,n}(1);function JPe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function eRe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tRe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=$f(t[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=i[a](o);return s}}function rRe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function gs(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function nRe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=$f(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var B_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qS=new RegExp(B_.source,"g");function iRe(t){return function(){return t}}function sRe(t){return function(e){return t(e)+""}}function $7(t,e){var r=B_.lastIndex=qS.lastIndex=0,n,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(n=B_.exec(t))&&(i=qS.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:gs(n,i)})),r=qS.lastIndex;return r<e.length&&(s=e.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?sRe(l[0].x):iRe(e):(e=l.length,function(u){for(var d=0,A;d<e;++d)o[(A=l[d]).i]=A.x(u);return o.join("")})}function $f(t,e){var r=typeof e,n;return e==null||r==="boolean"?iR(e):(r==="number"?gs:r==="string"?(n=Ru(e))?(e=n,Fy):$7:e instanceof Ru?Fy:e instanceof Date?rRe:eRe(e)?JPe:Array.isArray(e)?tRe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nRe:gs)(t,e)}function sR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var fF=180/Math.PI,__={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Q7(t,e,r,n,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*fF,skewX:Math.atan(l)*fF,scaleX:a,scaleY:o}}var R0;function aRe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?__:Q7(e.a,e.b,e.c,e.d,e.e,e.f)}function oRe(t){return t==null||(R0||(R0=document.createElementNS("http://www.w3.org/2000/svg","g")),R0.setAttribute("transform",t),!(t=R0.transform.baseVal.consolidate()))?__:(t=t.matrix,Q7(t.a,t.b,t.c,t.d,t.e,t.f))}function H7(t,e,r,n){function i(u){return u.length?u.pop()+" ":""}function s(u,d,A,f,h,m){if(u!==A||d!==f){var p=h.push("translate(",null,e,null,r);m.push({i:p-4,x:gs(u,A)},{i:p-2,x:gs(d,f)})}else(A||f)&&h.push("translate("+A+e+f+r)}function a(u,d,A,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:A.push(i(A)+"rotate(",null,n)-2,x:gs(u,d)})):d&&A.push(i(A)+"rotate("+d+n)}function o(u,d,A,f){u!==d?f.push({i:A.push(i(A)+"skewX(",null,n)-2,x:gs(u,d)}):d&&A.push(i(A)+"skewX("+d+n)}function l(u,d,A,f,h,m){if(u!==A||d!==f){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:gs(u,A)},{i:p-2,x:gs(d,f)})}else(A!==1||f!==1)&&h.push(i(h)+"scale("+A+","+f+")")}return function(u,d){var A=[],f=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,A,f),a(u.rotate,d.rotate,A,f),o(u.skewX,d.skewX,A,f),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,A,f),u=d=null,function(h){for(var m=-1,p=f.length,g;++m<p;)A[(g=f[m]).i]=g.x(h);return A.join("")}}}var lRe=H7(aRe,"px, ","px)","deg)"),cRe=H7(oRe,", ",")",")");function uRe(t,e){e===void 0&&(e=t,t=$f);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(a){var o=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[o](a-o)}}function dRe(t){return function(){return t}}function Uy(t){return+t}var hF=[0,1];function Ln(t){return t}function N_(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:dRe(isNaN(e)?NaN:.5)}function ARe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function fRe(t,e,r){var n=t[0],i=t[1],s=e[0],a=e[1];return i<n?(n=N_(i,n),s=r(a,s)):(n=N_(n,i),s=r(s,a)),function(o){return s(n(o))}}function hRe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=N_(t[a],t[a+1]),s[a]=r(e[a],e[a+1]);return function(o){var l=yg(t,o,1,n)-1;return s[l](i[l](o))}}function wg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function h1(){var t=hF,e=hF,r=$f,n,i,s,a=Ln,o,l,u;function d(){var f=Math.min(t.length,e.length);return a!==Ln&&(a=ARe(t[0],t[f-1])),o=f>2?hRe:fRe,l=u=null,A}function A(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(n),e,r)))(n(a(f)))}return A.invert=function(f){return a(i((u||(u=o(e,t.map(n),gs)))(f)))},A.domain=function(f){return arguments.length?(t=Array.from(f,Uy),d()):t.slice()},A.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},A.rangeRound=function(f){return e=Array.from(f),r=sR,d()},A.clamp=function(f){return arguments.length?(a=f?!0:Ln,d()):a!==Ln},A.interpolate=function(f){return arguments.length?(r=f,d()):r},A.unknown=function(f){return arguments.length?(s=f,A):s},function(f,h){return n=f,i=h,d()}}function aR(){return h1()(Ln,Ln)}function pRe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function $y(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function VA(t){return t=$y(Math.abs(t)),t?t[1]:NaN}function mRe(t,e){return function(r,n){for(var i=r.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function gRe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var xRe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pm(t){if(!(e=xRe.exec(t)))throw new Error("invalid format: "+t);var e;return new oR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}pm.prototype=oR.prototype;function oR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vRe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var K7;function yRe(t,e){var r=$y(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(K7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+$y(t,Math.max(0,e+s-1))[0]}function pF(t,e){var r=$y(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const mF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:pRe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pF(t*100,e),r:pF,s:yRe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gF(t){return t}var xF=Array.prototype.map,vF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bRe(t){var e=t.grouping===void 0||t.thousands===void 0?gF:mRe(xF.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?gF:gRe(xF.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(A){A=pm(A);var f=A.fill,h=A.align,m=A.sign,p=A.symbol,g=A.zero,x=A.width,v=A.comma,y=A.precision,w=A.trim,b=A.type;b==="n"?(v=!0,b="g"):mF[b]||(y===void 0&&(y=12),w=!0,b="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=p==="$"?r:p==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",C=p==="$"?n:/[%p]/.test(b)?a:"",T=mF[b],B=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function _(I){var L=S,N=C,R,M,k;if(b==="c")N=T(I)+N,I="";else{I=+I;var O=I<0||1/I<0;if(I=isNaN(I)?l:T(Math.abs(I),y),w&&(I=vRe(I)),O&&+I==0&&m!=="+"&&(O=!1),L=(O?m==="("?m:o:m==="-"||m==="("?"":m)+L,N=(b==="s"?vF[8+K7/3]:"")+N+(O&&m==="("?")":""),B){for(R=-1,M=I.length;++R<M;)if(k=I.charCodeAt(R),48>k||k>57){N=(k===46?i+I.slice(R+1):I.slice(R))+N,I=I.slice(0,R);break}}}v&&!g&&(I=e(I,1/0));var j=L.length+I.length+N.length,D=j<x?new Array(x-j+1).join(f):"";switch(v&&g&&(I=e(D+I,D.length?x-N.length:1/0),D=""),h){case"<":I=L+I+N+D;break;case"=":I=L+D+I+N;break;case"^":I=D.slice(0,j=D.length>>1)+L+I+N+D.slice(j);break;default:I=D+L+I+N;break}return s(I)}return _.toString=function(){return A+""},_}function d(A,f){var h=u((A=pm(A),A.type="f",A)),m=Math.max(-8,Math.min(8,Math.floor(VA(f)/3)))*3,p=Math.pow(10,-m),g=vF[8+m/3];return function(x){return h(p*x)+g}}return{format:u,formatPrefix:d}}var k0,lR,V7;wRe({thousands:",",grouping:[3],currency:["$",""]});function wRe(t){return k0=bRe(t),lR=k0.format,V7=k0.formatPrefix,k0}function ERe(t){return Math.max(0,-VA(Math.abs(t)))}function SRe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(VA(e)/3)))*3-VA(Math.abs(t)))}function CRe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,VA(e)-VA(t))+1}function G7(t,e,r,n){var i=S_(t,e,r),s;switch(n=pm(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=SRe(i,a))&&(n.precision=s),V7(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=CRe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=ERe(i))&&(n.precision=s-(n.type==="%")*2);break}}return lR(n)}function uc(t){var e=t.domain;return t.ticks=function(r){var n=e();return w_(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return G7(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,a=n[i],o=n[s],l,u,d=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);d-- >0;){if(u=E_(a,o,r),u===l)return n[i]=a,n[s]=o,e(n);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function Qy(){var t=aR();return t.copy=function(){return wg(t,Qy())},ts.apply(t,arguments),uc(t)}function z7(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Uy),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return z7(t).unknown(e)},t=arguments.length?Array.from(t,Uy):[0,1],uc(r)}function W7(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),t[r]=e.floor(i),t[n]=e.ceil(s),t}function yF(t){return Math.log(t)}function bF(t){return Math.exp(t)}function TRe(t){return-Math.log(-t)}function BRe(t){return-Math.exp(-t)}function _Re(t){return isFinite(t)?+("1e"+t):t<0?0:t}function NRe(t){return t===10?_Re:t===Math.E?Math.exp:e=>Math.pow(t,e)}function IRe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function wF(t){return(e,r)=>-t(-e,r)}function cR(t){const e=t(yF,bF),r=e.domain;let n=10,i,s;function a(){return i=IRe(n),s=NRe(n),r()[0]<0?(i=wF(i),s=wF(s),t(TRe,BRe)):t(yF,bF),e}return e.base=function(o){return arguments.length?(n=+o,a()):n},e.domain=function(o){return arguments.length?(r(o),a()):r()},e.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const A=d<u;A&&([u,d]=[d,u]);let f=i(u),h=i(d),m,p;const g=o==null?10:+o;let x=[];if(!(n%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(m=1;m<n;++m)if(p=f<0?m/s(-f):m*s(f),!(p<u)){if(p>d)break;x.push(p)}}else for(;f<=h;++f)for(m=n-1;m>=1;--m)if(p=f>0?m/s(-f):m*s(f),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=w_(u,d,g))}else x=w_(f,h,Math.min(h-f,g)).map(s);return A?x.reverse():x},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=pm(l)).precision==null&&(l.trim=!0),l=lR(l)),o===1/0)return l;const u=Math.max(1,n*o/e.ticks().length);return d=>{let A=d/s(Math.round(i(d)));return A*n<n-.5&&(A*=n),A<=u?l(d):""}},e.nice=()=>r(W7(r(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function Y7(){const t=cR(h1()).domain([1,10]);return t.copy=()=>wg(t,Y7()).base(t.base()),ts.apply(t,arguments),t}function EF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function SF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function uR(t){var e=1,r=t(EF(e),SF(e));return r.constant=function(n){return arguments.length?t(EF(e=+n),SF(e)):e},uc(r)}function q7(){var t=uR(h1());return t.copy=function(){return wg(t,q7()).constant(t.constant())},ts.apply(t,arguments)}function CF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function PRe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function RRe(t){return t<0?-t*t:t*t}function dR(t){var e=t(Ln,Ln),r=1;function n(){return r===1?t(Ln,Ln):r===.5?t(PRe,RRe):t(CF(r),CF(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},uc(e)}function AR(){var t=dR(h1());return t.copy=function(){return wg(t,AR()).exponent(t.exponent())},ts.apply(t,arguments),t}function kRe(){return AR.apply(null,arguments).exponent(.5)}function TF(t){return Math.sign(t)*t*t}function LRe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function X7(){var t=aR(),e=[0,1],r=!1,n;function i(s){var a=LRe(t(s));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(s){return t.invert(TF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Uy)).map(TF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return X7(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ts.apply(i,arguments),uc(i)}function Z7(){var t=[],e=[],r=[],n;function i(){var a=0,o=Math.max(1,e.length);for(r=new Array(o-1);++a<o;)r[a-1]=MPe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?n:e[yg(r,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ql),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Z7().domain(t).range(e).unknown(n)},ts.apply(s,arguments)}function J7(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[yg(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return J7().domain([t,e]).range(i).unknown(s)},ts.apply(uc(a),arguments)}function eW(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[yg(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return eW().domain(t).range(e).unknown(r)},ts.apply(i,arguments)}const XS=new Date,ZS=new Date;function $r(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let u;do l.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return l},i.filter=s=>$r(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),r&&(i.count=(s,a)=>(XS.setTime(+s),ZS.setTime(+a),t(XS),t(ZS),Math.floor(r(XS,ZS))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Hy=$r(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Hy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?$r(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Hy);Hy.range;const to=1e3,Fi=to*60,ro=Fi*60,wo=ro*24,fR=wo*7,BF=wo*30,JS=wo*365,Kc=$r(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getUTCSeconds());Kc.range;const hR=$r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*to)},(t,e)=>{t.setTime(+t+e*Fi)},(t,e)=>(e-t)/Fi,t=>t.getMinutes());hR.range;const pR=$r(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fi)},(t,e)=>(e-t)/Fi,t=>t.getUTCMinutes());pR.range;const mR=$r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*to-t.getMinutes()*Fi)},(t,e)=>{t.setTime(+t+e*ro)},(t,e)=>(e-t)/ro,t=>t.getHours());mR.range;const gR=$r(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ro)},(t,e)=>(e-t)/ro,t=>t.getUTCHours());gR.range;const Eg=$r(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fi)/wo,t=>t.getDate()-1);Eg.range;const p1=$r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wo,t=>t.getUTCDate()-1);p1.range;const tW=$r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wo,t=>Math.floor(t/wo));tW.range;function Vu(t){return $r(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Fi)/fR)}const m1=Vu(0),Ky=Vu(1),jRe=Vu(2),MRe=Vu(3),GA=Vu(4),DRe=Vu(5),ORe=Vu(6);m1.range;Ky.range;jRe.range;MRe.range;GA.range;DRe.range;ORe.range;function Gu(t){return $r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/fR)}const g1=Gu(0),Vy=Gu(1),FRe=Gu(2),URe=Gu(3),zA=Gu(4),$Re=Gu(5),QRe=Gu(6);g1.range;Vy.range;FRe.range;URe.range;zA.range;$Re.range;QRe.range;const xR=$r(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xR.range;const vR=$r(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());vR.range;const Eo=$r(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Eo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$r(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Eo.range;const So=$r(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());So.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:$r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});So.range;function rW(t,e,r,n,i,s){const a=[[Kc,1,to],[Kc,5,5*to],[Kc,15,15*to],[Kc,30,30*to],[s,1,Fi],[s,5,5*Fi],[s,15,15*Fi],[s,30,30*Fi],[i,1,ro],[i,3,3*ro],[i,6,6*ro],[i,12,12*ro],[n,1,wo],[n,2,2*wo],[r,1,fR],[e,1,BF],[e,3,3*BF],[t,1,JS]];function o(u,d,A){const f=d<u;f&&([u,d]=[d,u]);const h=A&&typeof A.range=="function"?A:l(u,d,A),m=h?h.range(u,+d+1):[];return f?m.reverse():m}function l(u,d,A){const f=Math.abs(d-u)/A,h=tR(([,,g])=>g).right(a,f);if(h===a.length)return t.every(S_(u/JS,d/JS,A));if(h===0)return Hy.every(Math.max(S_(u,d,A),1));const[m,p]=a[f/a[h-1][2]<a[h][2]/f?h-1:h];return m.every(p)}return[o,l]}const[HRe,KRe]=rW(So,vR,g1,tW,gR,pR),[VRe,GRe]=rW(Eo,xR,m1,Eg,mR,hR);function eC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ch(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function zRe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,u=uh(i),d=dh(i),A=uh(s),f=dh(s),h=uh(a),m=dh(a),p=uh(o),g=dh(o),x=uh(l),v=dh(l),y={a:O,A:j,b:D,B:F,c:null,d:kF,e:kF,f:mke,g:Tke,G:_ke,H:fke,I:hke,j:pke,L:nW,m:gke,M:xke,p:$,q:U,Q:MF,s:DF,S:vke,u:yke,U:bke,V:wke,w:Eke,W:Ske,x:null,X:null,y:Cke,Y:Bke,Z:Nke,"%":jF},w={a:K,A:V,b:q,B:H,c:null,d:LF,e:LF,f:kke,g:Hke,G:Vke,H:Ike,I:Pke,j:Rke,L:sW,m:Lke,M:jke,p:z,q:ae,Q:MF,s:DF,S:Mke,u:Dke,U:Oke,V:Fke,w:Uke,W:$ke,x:null,X:null,y:Qke,Y:Kke,Z:Gke,"%":jF},b={a:_,A:I,b:L,B:N,c:R,d:PF,e:PF,f:cke,g:IF,G:NF,H:RF,I:RF,j:ske,L:lke,m:ike,M:ake,p:B,q:nke,Q:dke,s:Ake,S:oke,u:ZRe,U:JRe,V:eke,w:XRe,W:tke,x:M,X:k,y:IF,Y:NF,Z:rke,"%":uke};y.x=S(r,y),y.X=S(n,y),y.c=S(e,y),w.x=S(r,w),w.X=S(n,w),w.c=S(e,w);function S(X,ne){return function(ee){var G=[],ge=-1,ye=0,Me=X.length,ce,Be,_e;for(ee instanceof Date||(ee=new Date(+ee));++ge<Me;)X.charCodeAt(ge)===37&&(G.push(X.slice(ye,ge)),(Be=_F[ce=X.charAt(++ge)])!=null?ce=X.charAt(++ge):Be=ce==="e"?" ":"0",(_e=ne[ce])&&(ce=_e(ee,Be)),G.push(ce),ye=ge+1);return G.push(X.slice(ye,ge)),G.join("")}}function C(X,ne){return function(ee){var G=ch(1900,void 0,1),ge=T(G,X,ee+="",0),ye,Me;if(ge!=ee.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(ne&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(ye=tC(ch(G.y,0,1)),Me=ye.getUTCDay(),ye=Me>4||Me===0?Vy.ceil(ye):Vy(ye),ye=p1.offset(ye,(G.V-1)*7),G.y=ye.getUTCFullYear(),G.m=ye.getUTCMonth(),G.d=ye.getUTCDate()+(G.w+6)%7):(ye=eC(ch(G.y,0,1)),Me=ye.getDay(),ye=Me>4||Me===0?Ky.ceil(ye):Ky(ye),ye=Eg.offset(ye,(G.V-1)*7),G.y=ye.getFullYear(),G.m=ye.getMonth(),G.d=ye.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),Me="Z"in G?tC(ch(G.y,0,1)).getUTCDay():eC(ch(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(Me+5)%7:G.w+G.U*7-(Me+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,tC(G)):eC(G)}}function T(X,ne,ee,G){for(var ge=0,ye=ne.length,Me=ee.length,ce,Be;ge<ye;){if(G>=Me)return-1;if(ce=ne.charCodeAt(ge++),ce===37){if(ce=ne.charAt(ge++),Be=b[ce in _F?ne.charAt(ge++):ce],!Be||(G=Be(X,ee,G))<0)return-1}else if(ce!=ee.charCodeAt(G++))return-1}return G}function B(X,ne,ee){var G=u.exec(ne.slice(ee));return G?(X.p=d.get(G[0].toLowerCase()),ee+G[0].length):-1}function _(X,ne,ee){var G=h.exec(ne.slice(ee));return G?(X.w=m.get(G[0].toLowerCase()),ee+G[0].length):-1}function I(X,ne,ee){var G=A.exec(ne.slice(ee));return G?(X.w=f.get(G[0].toLowerCase()),ee+G[0].length):-1}function L(X,ne,ee){var G=x.exec(ne.slice(ee));return G?(X.m=v.get(G[0].toLowerCase()),ee+G[0].length):-1}function N(X,ne,ee){var G=p.exec(ne.slice(ee));return G?(X.m=g.get(G[0].toLowerCase()),ee+G[0].length):-1}function R(X,ne,ee){return T(X,e,ne,ee)}function M(X,ne,ee){return T(X,r,ne,ee)}function k(X,ne,ee){return T(X,n,ne,ee)}function O(X){return a[X.getDay()]}function j(X){return s[X.getDay()]}function D(X){return l[X.getMonth()]}function F(X){return o[X.getMonth()]}function $(X){return i[+(X.getHours()>=12)]}function U(X){return 1+~~(X.getMonth()/3)}function K(X){return a[X.getUTCDay()]}function V(X){return s[X.getUTCDay()]}function q(X){return l[X.getUTCMonth()]}function H(X){return o[X.getUTCMonth()]}function z(X){return i[+(X.getUTCHours()>=12)]}function ae(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ne=S(X+="",y);return ne.toString=function(){return X},ne},parse:function(X){var ne=C(X+="",!1);return ne.toString=function(){return X},ne},utcFormat:function(X){var ne=S(X+="",w);return ne.toString=function(){return X},ne},utcParse:function(X){var ne=C(X+="",!0);return ne.toString=function(){return X},ne}}}var _F={"-":"",_:" ",0:"0"},qr=/^\s*\d+/,WRe=/^%/,YRe=/[\\^$*+?|[\]().{}]/g;function wt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function qRe(t){return t.replace(YRe,"\\$&")}function uh(t){return new RegExp("^(?:"+t.map(qRe).join("|")+")","i")}function dh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function XRe(t,e,r){var n=qr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function ZRe(t,e,r){var n=qr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function JRe(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function eke(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function tke(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function NF(t,e,r){var n=qr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function IF(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function rke(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function nke(t,e,r){var n=qr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function ike(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function PF(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function ske(t,e,r){var n=qr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function RF(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function ake(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function oke(t,e,r){var n=qr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function lke(t,e,r){var n=qr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function cke(t,e,r){var n=qr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function uke(t,e,r){var n=WRe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function dke(t,e,r){var n=qr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Ake(t,e,r){var n=qr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function kF(t,e){return wt(t.getDate(),e,2)}function fke(t,e){return wt(t.getHours(),e,2)}function hke(t,e){return wt(t.getHours()%12||12,e,2)}function pke(t,e){return wt(1+Eg.count(Eo(t),t),e,3)}function nW(t,e){return wt(t.getMilliseconds(),e,3)}function mke(t,e){return nW(t,e)+"000"}function gke(t,e){return wt(t.getMonth()+1,e,2)}function xke(t,e){return wt(t.getMinutes(),e,2)}function vke(t,e){return wt(t.getSeconds(),e,2)}function yke(t){var e=t.getDay();return e===0?7:e}function bke(t,e){return wt(m1.count(Eo(t)-1,t),e,2)}function iW(t){var e=t.getDay();return e>=4||e===0?GA(t):GA.ceil(t)}function wke(t,e){return t=iW(t),wt(GA.count(Eo(t),t)+(Eo(t).getDay()===4),e,2)}function Eke(t){return t.getDay()}function Ske(t,e){return wt(Ky.count(Eo(t)-1,t),e,2)}function Cke(t,e){return wt(t.getFullYear()%100,e,2)}function Tke(t,e){return t=iW(t),wt(t.getFullYear()%100,e,2)}function Bke(t,e){return wt(t.getFullYear()%1e4,e,4)}function _ke(t,e){var r=t.getDay();return t=r>=4||r===0?GA(t):GA.ceil(t),wt(t.getFullYear()%1e4,e,4)}function Nke(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wt(e/60|0,"0",2)+wt(e%60,"0",2)}function LF(t,e){return wt(t.getUTCDate(),e,2)}function Ike(t,e){return wt(t.getUTCHours(),e,2)}function Pke(t,e){return wt(t.getUTCHours()%12||12,e,2)}function Rke(t,e){return wt(1+p1.count(So(t),t),e,3)}function sW(t,e){return wt(t.getUTCMilliseconds(),e,3)}function kke(t,e){return sW(t,e)+"000"}function Lke(t,e){return wt(t.getUTCMonth()+1,e,2)}function jke(t,e){return wt(t.getUTCMinutes(),e,2)}function Mke(t,e){return wt(t.getUTCSeconds(),e,2)}function Dke(t){var e=t.getUTCDay();return e===0?7:e}function Oke(t,e){return wt(g1.count(So(t)-1,t),e,2)}function aW(t){var e=t.getUTCDay();return e>=4||e===0?zA(t):zA.ceil(t)}function Fke(t,e){return t=aW(t),wt(zA.count(So(t),t)+(So(t).getUTCDay()===4),e,2)}function Uke(t){return t.getUTCDay()}function $ke(t,e){return wt(Vy.count(So(t)-1,t),e,2)}function Qke(t,e){return wt(t.getUTCFullYear()%100,e,2)}function Hke(t,e){return t=aW(t),wt(t.getUTCFullYear()%100,e,2)}function Kke(t,e){return wt(t.getUTCFullYear()%1e4,e,4)}function Vke(t,e){var r=t.getUTCDay();return t=r>=4||r===0?zA(t):zA.ceil(t),wt(t.getUTCFullYear()%1e4,e,4)}function Gke(){return"+0000"}function jF(){return"%"}function MF(t){return+t}function DF(t){return Math.floor(+t/1e3)}var od,oW,lW;zke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zke(t){return od=zRe(t),oW=od.format,od.parse,lW=od.utcFormat,od.utcParse,od}function Wke(t){return new Date(t)}function Yke(t){return t instanceof Date?+t:+new Date(+t)}function yR(t,e,r,n,i,s,a,o,l,u){var d=aR(),A=d.invert,f=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),v=u("%b %d"),y=u("%B"),w=u("%Y");function b(S){return(l(S)<S?h:o(S)<S?m:a(S)<S?p:s(S)<S?g:n(S)<S?i(S)<S?x:v:r(S)<S?y:w)(S)}return d.invert=function(S){return new Date(A(S))},d.domain=function(S){return arguments.length?f(Array.from(S,Yke)):f().map(Wke)},d.ticks=function(S){var C=f();return t(C[0],C[C.length-1],S??10)},d.tickFormat=function(S,C){return C==null?b:u(C)},d.nice=function(S){var C=f();return(!S||typeof S.range!="function")&&(S=e(C[0],C[C.length-1],S??10)),S?f(W7(C,S)):d},d.copy=function(){return wg(d,yR(t,e,r,n,i,s,a,o,l,u))},d}function qke(){return ts.apply(yR(VRe,GRe,Eo,xR,m1,Eg,mR,hR,Kc,oW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Xke(){return ts.apply(yR(HRe,KRe,So,vR,g1,p1,gR,pR,Kc,lW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function x1(){var t=0,e=1,r,n,i,s,a=Ln,o=!1,l;function u(A){return A==null||isNaN(A=+A)?l:a(i===0?.5:(A=(s(A)-r)*i,o?Math.max(0,Math.min(1,A)):A))}u.domain=function(A){return arguments.length?([t,e]=A,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(A){return arguments.length?(o=!!A,u):o},u.interpolator=function(A){return arguments.length?(a=A,u):a};function d(A){return function(f){var h,m;return arguments.length?([h,m]=f,a=A(h,m),u):[a(0),a(1)]}}return u.range=d($f),u.rangeRound=d(sR),u.unknown=function(A){return arguments.length?(l=A,u):l},function(A){return s=A,r=A(t),n=A(e),i=r===n?0:1/(n-r),u}}function dc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cW(){var t=uc(x1()(Ln));return t.copy=function(){return dc(t,cW())},ko.apply(t,arguments)}function uW(){var t=cR(x1()).domain([1,10]);return t.copy=function(){return dc(t,uW()).base(t.base())},ko.apply(t,arguments)}function dW(){var t=uR(x1());return t.copy=function(){return dc(t,dW()).constant(t.constant())},ko.apply(t,arguments)}function bR(){var t=dR(x1());return t.copy=function(){return dc(t,bR()).exponent(t.exponent())},ko.apply(t,arguments)}function Zke(){return bR.apply(null,arguments).exponent(.5)}function AW(){var t=[],e=Ln;function r(n){if(n!=null&&!isNaN(n=+n))return e((yg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ql),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>jPe(t,s/n))},r.copy=function(){return AW(e).domain(t)},ko.apply(r,arguments)}function v1(){var t=0,e=.5,r=1,n=1,i,s,a,o,l,u=Ln,d,A=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-s)*(n*p<n*s?o:l),u(A?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,i=d(t=+t),s=d(e=+e),a=d(r=+r),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),n=s<i?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(A=!!p,h):A},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(g){var x,v,y;return arguments.length?([x,v,y]=g,u=uRe(p,[x,v,y]),h):[u(0),u(.5),u(1)]}}return h.range=m($f),h.rangeRound=m(sR),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return d=p,i=p(t),s=p(e),a=p(r),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),n=s<i?-1:1,h}}function fW(){var t=uc(v1()(Ln));return t.copy=function(){return dc(t,fW())},ko.apply(t,arguments)}function hW(){var t=cR(v1()).domain([.1,1,10]);return t.copy=function(){return dc(t,hW()).base(t.base())},ko.apply(t,arguments)}function pW(){var t=uR(v1());return t.copy=function(){return dc(t,pW()).constant(t.constant())},ko.apply(t,arguments)}function wR(){var t=dR(v1());return t.copy=function(){return dc(t,wR()).exponent(t.exponent())},ko.apply(t,arguments)}function Jke(){return wR.apply(null,arguments).exponent(.5)}const OF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Am,scaleDiverging:fW,scaleDivergingLog:hW,scaleDivergingPow:wR,scaleDivergingSqrt:Jke,scaleDivergingSymlog:pW,scaleIdentity:z7,scaleImplicit:C_,scaleLinear:Qy,scaleLog:Y7,scaleOrdinal:rR,scalePoint:up,scalePow:AR,scaleQuantile:Z7,scaleQuantize:J7,scaleRadial:X7,scaleSequential:cW,scaleSequentialLog:uW,scaleSequentialPow:bR,scaleSequentialQuantile:AW,scaleSequentialSqrt:Zke,scaleSequentialSymlog:dW,scaleSqrt:kRe,scaleSymlog:q7,scaleThreshold:eW,scaleTime:qke,scaleUtc:Xke,tickFormat:G7},Symbol.toStringTag,{value:"Module"}));var eLe=Pf;function tLe(t,e,r){for(var n=-1,i=t.length;++n<i;){var s=t[n],a=e(s);if(a!=null&&(o===void 0?a===a&&!eLe(a):r(a,o)))var o=a,l=s}return l}var mW=tLe;function rLe(t,e){return t>e}var nLe=rLe,iLe=mW,sLe=nLe,aLe=Ff;function oLe(t){return t&&t.length?iLe(t,aLe,sLe):void 0}var lLe=oLe;const bl=$t(lLe);function cLe(t,e){return t<e}var uLe=cLe,dLe=mW,ALe=uLe,fLe=Ff;function hLe(t){return t&&t.length?dLe(t,fLe,ALe):void 0}var pLe=hLe;const y1=$t(pLe);var mLe=jP,gLe=Uf,xLe=b7,vLe=ei;function yLe(t,e){var r=vLe(t)?mLe:xLe;return r(t,gLe(e))}var bLe=yLe,wLe=v7,ELe=bLe;function SLe(t,e){return wLe(ELe(t,e),1)}var CLe=SLe;const TLe=$t(CLe);var BLe=XP;function _Le(t,e){return BLe(t,e)}var NLe=_Le;const mm=$t(NLe);var Qf=1e9,ILe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SR,rr=!0,qi="[DecimalError] ",uu=qi+"Invalid argument: ",ER=qi+"Exponent out of range: ",Hf=Math.floor,kc=Math.pow,PLe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fi,Vr=1e7,Xt=7,gW=9007199254740991,Gy=Hf(gW/Xt),je={};je.absoluteValue=je.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};je.comparedTo=je.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};je.decimalPlaces=je.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Xt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};je.dividedBy=je.div=function(t){return oo(this,new this.constructor(t))};je.dividedToIntegerBy=je.idiv=function(t){var e=this,r=e.constructor;return Ut(oo(e,new r(t),0,1),r.precision)};je.equals=je.eq=function(t){return!this.cmp(t)};je.exponent=function(){return _r(this)};je.greaterThan=je.gt=function(t){return this.cmp(t)>0};je.greaterThanOrEqualTo=je.gte=function(t){return this.cmp(t)>=0};je.isInteger=je.isint=function(){return this.e>this.d.length-2};je.isNegative=je.isneg=function(){return this.s<0};je.isPositive=je.ispos=function(){return this.s>0};je.isZero=function(){return this.s===0};je.lessThan=je.lt=function(t){return this.cmp(t)<0};je.lessThanOrEqualTo=je.lte=function(t){return this.cmp(t)<1};je.logarithm=je.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(fi))throw Error(qi+"NaN");if(r.s<1)throw Error(qi+(r.s?"NaN":"-Infinity"));return r.eq(fi)?new n(0):(rr=!1,e=oo(gm(r,s),gm(t,s),s),rr=!0,Ut(e,i))};je.minus=je.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?yW(e,t):xW(e,(t.s=-t.s,t))};je.modulo=je.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(qi+"NaN");return r.s?(rr=!1,e=oo(r,t,0,1).times(t),rr=!0,r.minus(e)):Ut(new n(r),i)};je.naturalExponential=je.exp=function(){return vW(this)};je.naturalLogarithm=je.ln=function(){return gm(this)};je.negated=je.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};je.plus=je.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xW(e,t):yW(e,(t.s=-t.s,t))};je.precision=je.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(uu+t);if(e=_r(i)+1,n=i.d.length-1,r=n*Xt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};je.squareRoot=je.sqrt=function(){var t,e,r,n,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(qi+"NaN")}for(t=_r(o),rr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=oa(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Hf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=a=r+3;;)if(s=n,n=s.plus(oo(o,s,a+2)).times(.5),oa(s.d).slice(0,a)===(e=oa(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ut(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(e!="9999")break;a+=4}return rr=!0,Ut(n,r)};je.times=je.mul=function(t){var e,r,n,i,s,a,o,l,u,d=this,A=d.constructor,f=d.d,h=(t=new A(t)).d;if(!d.s||!t.s)return new A(0);for(t.s*=d.s,r=d.e+t.e,l=f.length,u=h.length,l<u&&(s=f,f=h,h=s,a=l,l=u,u=a),s=[],a=l+u,n=a;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=s[i]+h[n]*f[i-n-1]+e,s[i--]=o%Vr|0,e=o/Vr|0;s[i]=(s[i]+e)%Vr|0}for(;!s[--a];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,rr?Ut(t,A.precision):t};je.toDecimalPlaces=je.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Sa(t,0,Qf),e===void 0?e=n.rounding:Sa(e,0,8),Ut(r,t+_r(r)+1,e))};je.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=ku(n,!0):(Sa(t,0,Qf),e===void 0?e=i.rounding:Sa(e,0,8),n=Ut(new i(n),t+1,e),r=ku(n,!0,t+1)),r};je.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?ku(i):(Sa(t,0,Qf),e===void 0?e=s.rounding:Sa(e,0,8),n=Ut(new s(i),t+_r(i)+1,e),r=ku(n.abs(),!1,t+_r(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};je.toInteger=je.toint=function(){var t=this,e=t.constructor;return Ut(new e(t),_r(t)+1,e.rounding)};je.toNumber=function(){return+this};je.toPower=je.pow=function(t){var e,r,n,i,s,a,o=this,l=o.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(fi);if(o=new l(o),!o.s){if(t.s<1)throw Error(qi+"Infinity");return o}if(o.eq(fi))return o;if(n=l.precision,t.eq(fi))return Ut(o,n);if(e=t.e,r=t.d.length-1,a=e>=r,s=o.s,a){if((r=d<0?-d:d)<=gW){for(i=new l(fi),e=Math.ceil(n/Xt+4),rr=!1;r%2&&(i=i.times(o),UF(i.d,e)),r=Hf(r/2),r!==0;)o=o.times(o),UF(o.d,e);return rr=!0,t.s<0?new l(fi).div(i):Ut(i,n)}}else if(s<0)throw Error(qi+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,o.s=1,rr=!1,i=t.times(gm(o,n+u)),rr=!0,i=vW(i),i.s=s,i};je.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=_r(i),n=ku(i,r<=s.toExpNeg||r>=s.toExpPos)):(Sa(t,1,Qf),e===void 0?e=s.rounding:Sa(e,0,8),i=Ut(new s(i),t,e),r=_r(i),n=ku(i,t<=r||r<=s.toExpNeg,t)),n};je.toSignificantDigits=je.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Sa(t,1,Qf),e===void 0?e=n.rounding:Sa(e,0,8)),Ut(new n(r),t,e)};je.toString=je.valueOf=je.val=je.toJSON=je[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=_r(t),r=t.constructor;return ku(t,e<=r.toExpNeg||e>=r.toExpPos)};function xW(t,e){var r,n,i,s,a,o,l,u,d=t.constructor,A=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),rr?Ut(e,A):e;if(l=t.d,u=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(n=l,s=-s,o=u.length):(n=u,i=a,o=l.length),a=Math.ceil(A/Xt),o=a>o?a+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/Vr|0,l[s]%=Vr;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,rr?Ut(e,A):e}function Sa(t,e,r){if(t!==~~t||t<e||t>r)throw Error(uu+t)}function oa(t){var e,r,n,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)n=t[e]+"",r=Xt-n.length,r&&(s+=il(r)),s+=n;a=t[e],n=a+"",r=Xt-n.length,r&&(s+=il(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var oo=function(){function t(n,i){var s,a=0,o=n.length;for(n=n.slice();o--;)s=n[o]*i+a,n[o]=s%Vr|0,a=s/Vr|0;return a&&n.unshift(a),n}function e(n,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*Vr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var o,l,u,d,A,f,h,m,p,g,x,v,y,w,b,S,C,T,B=n.constructor,_=n.s==i.s?1:-1,I=n.d,L=i.d;if(!n.s)return new B(n);if(!i.s)throw Error(qi+"Division by zero");for(l=n.e-i.e,C=L.length,b=I.length,h=new B(_),m=h.d=[],u=0;L[u]==(I[u]||0);)++u;if(L[u]>(I[u]||0)&&--l,s==null?v=s=B.precision:a?v=s+(_r(n)-_r(i))+1:v=s,v<0)return new B(0);if(v=v/Xt+2|0,u=0,C==1)for(d=0,L=L[0],v++;(u<b||d)&&v--;u++)y=d*Vr+(I[u]||0),m[u]=y/L|0,d=y%L|0;else{for(d=Vr/(L[0]+1)|0,d>1&&(L=t(L,d),I=t(I,d),C=L.length,b=I.length),w=C,p=I.slice(0,C),g=p.length;g<C;)p[g++]=0;T=L.slice(),T.unshift(0),S=L[0],L[1]>=Vr/2&&++S;do d=0,o=e(L,p,C,g),o<0?(x=p[0],C!=g&&(x=x*Vr+(p[1]||0)),d=x/S|0,d>1?(d>=Vr&&(d=Vr-1),A=t(L,d),f=A.length,g=p.length,o=e(A,p,f,g),o==1&&(d--,r(A,C<f?T:L,f))):(d==0&&(o=d=1),A=L.slice()),f=A.length,f<g&&A.unshift(0),r(p,A,g),o==-1&&(g=p.length,o=e(L,p,C,g),o<1&&(d++,r(p,C<g?T:L,g))),g=p.length):o===0&&(d++,p=[0]),m[u++]=d,o&&p[0]?p[g++]=I[w]||0:(p=[I[w]],g=1);while((w++<b||p[0]!==void 0)&&v--)}return m[0]||m.shift(),h.e=l,Ut(h,a?s+_r(h)+1:s)}}();function vW(t,e){var r,n,i,s,a,o,l=0,u=0,d=t.constructor,A=d.precision;if(_r(t)>16)throw Error(ER+_r(t));if(!t.s)return new d(fi);for(e==null?(rr=!1,o=A):o=e,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(n=Math.log(kc(2,u))/Math.LN10*2+5|0,o+=n,r=i=s=new d(fi),d.precision=o;;){if(i=Ut(i.times(t),o),r=r.times(++l),a=s.plus(oo(i,r,o)),oa(a.d).slice(0,o)===oa(s.d).slice(0,o)){for(;u--;)s=Ut(s.times(s),o);return d.precision=A,e==null?(rr=!0,Ut(s,A)):s}s=a}}function _r(t){for(var e=t.e*Xt,r=t.d[0];r>=10;r/=10)e++;return e}function rC(t,e,r){if(e>t.LN10.sd())throw rr=!0,r&&(t.precision=r),Error(qi+"LN10 precision limit exceeded");return Ut(new t(t.LN10),e)}function il(t){for(var e="";t--;)e+="0";return e}function gm(t,e){var r,n,i,s,a,o,l,u,d,A=1,f=10,h=t,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(qi+(h.s?"NaN":"-Infinity"));if(h.eq(fi))return new p(0);if(e==null?(rr=!1,u=g):u=e,h.eq(10))return e==null&&(rr=!0),rC(p,u);if(u+=f,p.precision=u,r=oa(m),n=r.charAt(0),s=_r(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=oa(h.d),n=r.charAt(0),A++;s=_r(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return l=rC(p,u+2,g).times(s+""),h=gm(new p(n+"."+r.slice(1)),u-f).plus(l),p.precision=g,e==null?(rr=!0,Ut(h,g)):h;for(o=a=h=oo(h.minus(fi),h.plus(fi),u),d=Ut(h.times(h),u),i=3;;){if(a=Ut(a.times(d),u),l=o.plus(oo(a,new p(i),u)),oa(l.d).slice(0,u)===oa(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(rC(p,u+2,g).times(s+""))),o=oo(o,new p(A),u),p.precision=g,e==null?(rr=!0,Ut(o,g)):o;o=l,i+=2}}function FF(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Hf(r/Xt),t.d=[],n=(r+1)%Xt,r<0&&(n+=Xt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Xt;n<i;)t.d.push(+e.slice(n,n+=Xt));e=e.slice(n),n=Xt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),rr&&(t.e>Gy||t.e<-Gy))throw Error(ER+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ut(t,e,r){var n,i,s,a,o,l,u,d,A=t.d;for(a=1,s=A[0];s>=10;s/=10)a++;if(n=e-a,n<0)n+=Xt,i=e,u=A[d=0];else{if(d=Math.ceil((n+1)/Xt),s=A.length,d>=s)return t;for(u=s=A[d],a=1;s>=10;s/=10)a++;n%=Xt,i=n-Xt+a}if(r!==void 0&&(s=kc(10,a-i-1),o=u/s%10|0,l=e<0||A[d+1]!==void 0||u%s,l=r<4?(o||l)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?u/kc(10,a-i):0:A[d-1])%10&1||r==(t.s<0?8:7))),e<1||!A[0])return l?(s=_r(t),A.length=1,e=e-s-1,A[0]=kc(10,(Xt-e%Xt)%Xt),t.e=Hf(-e/Xt)||0):(A.length=1,A[0]=t.e=t.s=0),t;if(n==0?(A.length=d,s=1,d--):(A.length=d+1,s=kc(10,Xt-n),A[d]=i>0?(u/kc(10,a-i)%kc(10,i)|0)*s:0),l)for(;;)if(d==0){(A[0]+=s)==Vr&&(A[0]=1,++t.e);break}else{if(A[d]+=s,A[d]!=Vr)break;A[d--]=0,s=1}for(n=A.length;A[--n]===0;)A.pop();if(rr&&(t.e>Gy||t.e<-Gy))throw Error(ER+_r(t));return t}function yW(t,e){var r,n,i,s,a,o,l,u,d,A,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),rr?Ut(e,h):e;if(l=t.d,A=e.d,n=e.e,u=t.e,l=l.slice(),a=u-n,a){for(d=a<0,d?(r=l,a=-a,o=A.length):(r=A,n=u,o=l.length),i=Math.max(Math.ceil(h/Xt),o)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=A.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=A[i]){d=l[i]<A[i];break}a=0}for(d&&(r=l,l=A,A=r,e.s=-e.s),o=l.length,i=A.length-o;i>0;--i)l[o++]=0;for(i=A.length;i>a;){if(l[--i]<A[i]){for(s=i;s&&l[--s]===0;)l[s]=Vr-1;--l[s],l[i]+=Vr}l[i]-=A[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,rr?Ut(e,h):e):new f(0)}function ku(t,e,r){var n,i=_r(t),s=oa(t.d),a=s.length;return e?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+il(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+il(-i-1)+s,r&&(n=r-a)>0&&(s+=il(n))):i>=a?(s+=il(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+il(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=il(n))),t.s<0?"-"+s:s}function UF(t,e){if(t.length>e)return t.length=e,!0}function bW(t){var e,r,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(uu+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return FF(a,s.toString())}else if(typeof s!="string")throw Error(uu+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,PLe.test(s))FF(a,s);else throw Error(uu+s)}if(i.prototype=je,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bW,i.config=i.set=RLe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function RLe(t){if(!t||typeof t!="object")throw Error(qi+"Object expected");var e,r,n,i=["precision",1,Qf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Hf(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(uu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(uu+r+": "+n);return this}var SR=bW(ILe);fi=new SR(1);const kt=SR;function kLe(t){return DLe(t)||MLe(t)||jLe(t)||LLe()}function LLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jLe(t,e){if(t){if(typeof t=="string")return I_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I_(t,e)}}function MLe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function DLe(t){if(Array.isArray(t))return I_(t)}function I_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var OLe=function(e){return e},wW={"@@functional/placeholder":!0},EW=function(e){return e===wW},$F=function(e){return function r(){return arguments.length===0||arguments.length===1&&EW(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},FLe=function t(e,r){return e===1?r:$F(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==wW}).length;return a>=e?r.apply(void 0,i):t(e-a,$F(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=i.map(function(A){return EW(A)?l.shift():A});return r.apply(void 0,kLe(d).concat(l))}))})},b1=function(e){return FLe(e.length,e)},P_=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},ULe=b1(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),$Le=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return OLe;var i=r.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},R_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},SW=function(e){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r&&s.every(function(o,l){return o===r[l]})||(r=s,n=e.apply(void 0,s)),n}};function QLe(t){var e;return t===0?e=1:e=Math.floor(new kt(t).abs().log(10).toNumber())+1,e}function HLe(t,e,r){for(var n=new kt(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var KLe=b1(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),VLe=b1(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),GLe=b1(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const w1={rangeStep:HLe,getDigitCount:QLe,interpolateNumber:KLe,uninterpolateNumber:VLe,uninterpolateTruncation:GLe};function k_(t){return YLe(t)||WLe(t)||CW(t)||zLe()}function zLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WLe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function YLe(t){if(Array.isArray(t))return L_(t)}function xm(t,e){return ZLe(t)||XLe(t,e)||CW(t,e)||qLe()}function qLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CW(t,e){if(t){if(typeof t=="string")return L_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L_(t,e)}}function L_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function XLe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(r.push(o.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,s=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}}function ZLe(t){if(Array.isArray(t))return t}function TW(t){var e=xm(t,2),r=e[0],n=e[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function BW(t,e,r){if(t.lte(0))return new kt(0);var n=w1.getDigitCount(t.toNumber()),i=new kt(10).pow(n),s=t.div(i),a=n!==1?.05:.1,o=new kt(Math.ceil(s.div(a).toNumber())).add(r).mul(a),l=o.mul(i);return e?l:new kt(Math.ceil(l))}function JLe(t,e,r){var n=1,i=new kt(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new kt(10).pow(w1.getDigitCount(t)-1),i=new kt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new kt(Math.floor(t)))}else t===0?i=new kt(Math.floor((e-1)/2)):r||(i=new kt(Math.floor(t)));var a=Math.floor((e-1)/2),o=$Le(ULe(function(l){return i.add(new kt(l-a).mul(n)).toNumber()}),P_);return o(0,e)}function _W(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new kt(0),tickMin:new kt(0),tickMax:new kt(0)};var s=BW(new kt(e).sub(t).div(r-1),n,i),a;t<=0&&e>=0?a=new kt(0):(a=new kt(t).add(e).div(2),a=a.sub(new kt(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),l=Math.ceil(new kt(e).sub(a).div(s).toNumber()),u=o+l+1;return u>r?_W(t,e,r,n,i+1):(u<r&&(l=e>0?l+(r-u):l,o=e>0?o:o+(r-u)),{step:s,tickMin:a.sub(new kt(o).mul(s)),tickMax:a.add(new kt(l).mul(s))})}function eje(t){var e=xm(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=TW([r,n]),l=xm(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var A=d===1/0?[u].concat(k_(P_(0,i-1).map(function(){return 1/0}))):[].concat(k_(P_(0,i-1).map(function(){return-1/0})),[d]);return r>n?R_(A):A}if(u===d)return JLe(u,i,s);var f=_W(u,d,a,s),h=f.step,m=f.tickMin,p=f.tickMax,g=w1.rangeStep(m,p.add(new kt(.1).mul(h)),h);return r>n?R_(g):g}function tje(t,e){var r=xm(t,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=TW([n,i]),o=xm(a,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[n,i];if(l===u)return[l];var d=Math.max(e,2),A=BW(new kt(u).sub(l).div(d-1),s,0),f=[].concat(k_(w1.rangeStep(new kt(l),new kt(u).sub(new kt(.99).mul(A)),A)),[u]);return n>i?R_(f):f}var rje=SW(eje),nje=SW(tje),ije="Invariant failed";function Lu(t,e){throw new Error(ije)}var sje=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function WA(t){"@babel/helpers - typeof";return WA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WA(t)}function zy(){return zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zy.apply(this,arguments)}function aje(t,e){return uje(t)||cje(t,e)||lje(t,e)||oje()}function oje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lje(t,e){if(t){if(typeof t=="string")return QF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QF(t,e)}}function QF(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cje(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function uje(t){if(Array.isArray(t))return t}function dje(t,e){if(t==null)return{};var r=Aje(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Aje(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hje(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PW(n.key),n)}}function pje(t,e,r){return e&&hje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mje(t,e,r){return e=Wy(e),gje(t,NW()?Reflect.construct(e,r||[],Wy(t).constructor):e.apply(t,r))}function gje(t,e){if(e&&(WA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xje(t)}function xje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!t})()}function Wy(t){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wy(t)}function vje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j_(t,e)}function j_(t,e){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},j_(t,e)}function IW(t,e,r){return e=PW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PW(t){var e=yje(t,"string");return WA(e)=="symbol"?e:e+""}function yje(t,e){if(WA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(WA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E1=function(t){function e(){return fje(this,e),mje(this,e,arguments)}return vje(e,t),pje(e,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,a=n.width,o=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,A=n.yAxis,f=dje(n,sje),h=ft(f,!1);this.props.direction==="x"&&d.type!=="number"&&Lu();var m=l.map(function(p){var g=u(p,o),x=g.x,v=g.y,y=g.value,w=g.errorVal;if(!w)return null;var b=[],S,C;if(Array.isArray(w)){var T=aje(w,2);S=T[0],C=T[1]}else S=C=w;if(s==="vertical"){var B=d.scale,_=v+i,I=_+a,L=_-a,N=B(y-S),R=B(y+C);b.push({x1:R,y1:I,x2:R,y2:L}),b.push({x1:N,y1:_,x2:R,y2:_}),b.push({x1:N,y1:I,x2:N,y2:L})}else if(s==="horizontal"){var M=A.scale,k=x+i,O=k-a,j=k+a,D=M(y-S),F=M(y+C);b.push({x1:O,y1:F,x2:j,y2:F}),b.push({x1:k,y1:D,x2:k,y2:F}),b.push({x1:O,y1:D,x2:j,y2:D})}return Q.createElement(or,zy({className:"recharts-errorBar",key:"bar-".concat(b.map(function($){return"".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))},h),b.map(function($){return Q.createElement("line",zy({},$,{key:"line-".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))}))});return Q.createElement(or,{className:"recharts-errorBars"},m)}}])}(Q.Component);IW(E1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});IW(E1,"displayName","ErrorBar");function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}function HF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(r),!0).forEach(function(n){bje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bje(t,e,r){return e=wje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wje(t){var e=Eje(t,"string");return vm(e)=="symbol"?e:e+""}function Eje(t,e){if(vm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RW=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=li(r,iA);if(!a)return null;var o=iA.defaultProps,l=o!==void 0?yc(yc({},o),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(n||[]).reduce(function(d,A){var f=A.item,h=A.props,m=h.sectors||h.data||[];return d.concat(m.map(function(p){return{type:a.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var A=d.item,f=A.type.defaultProps,h=f!==void 0?yc(yc({},f),A.props):{},m=h.dataKey,p=h.name,g=h.legendType,x=h.hide;return{inactive:x,dataKey:m,type:l.iconType||g||"square",color:CR(A),value:p||m,payload:h}}),yc(yc(yc({},l),iA.getWithHeight(a,i)),{},{payload:u,item:a})};function ym(t){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function KF(t){return Bje(t)||Tje(t)||Cje(t)||Sje()}function Sje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cje(t,e){if(t){if(typeof t=="string")return M_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M_(t,e)}}function Tje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bje(t){if(Array.isArray(t))return M_(t)}function M_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function VF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(r),!0).forEach(function(n){aA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aA(t,e,r){return e=_je(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _je(t){var e=Nje(t,"string");return ym(e)=="symbol"?e:e+""}function Nje(t,e){if(ym(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ym(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ei(t,e,r){return ht(t)||ht(e)?r:Fr(e)?Ki(t,e,r):ot(e)?e(t):r}function dp(t,e,r,n){var i=TLe(t,function(o){return Ei(o,e)});if(r==="number"){var s=i.filter(function(o){return we(o)||parseFloat(o)});return s.length?[y1(s),bl(s)]:[1/0,-1/0]}var a=n?i.filter(function(o){return!ht(o)}):i;return a.map(function(o){return Fr(o)||o instanceof Date?o:""})}var Ije=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,A=i[u].coordinate,f=u>=o-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(vs(A-d)!==vs(f-A)){var m=[];if(vs(f-A)===vs(l[1]-l[0])){h=f;var p=A+l[1]-l[0];m[0]=Math.min(p,(p+d)/2),m[1]=Math.max(p,(p+d)/2)}else{h=d;var g=f+l[1]-l[0];m[0]=Math.min(A,(g+A)/2),m[1]=Math.max(A,(g+A)/2)}var x=[Math.min(A,(h+A)/2),Math.max(A,(h+A)/2)];if(e>x[0]&&e<=x[1]||e>=m[0]&&e<=m[1]){a=i[u].index;break}}else{var v=Math.min(d,f),y=Math.max(d,f);if(e>(v+A)/2&&e<=(y+A)/2){a=i[u].index;break}}}else for(var w=0;w<o;w++)if(w===0&&e<=(n[w].coordinate+n[w+1].coordinate)/2||w>0&&w<o-1&&e>(n[w].coordinate+n[w-1].coordinate)/2&&e<=(n[w].coordinate+n[w+1].coordinate)/2||w===o-1&&e>(n[w].coordinate+n[w-1].coordinate)/2){a=n[w].index;break}return a},CR=function(e){var r,n=e,i=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},Pje=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,u=o.length;l<u;l++)for(var d=s[o[l]].stackGroups,A=Object.keys(d),f=0,h=A.length;f<h;f++){var m=d[A[f]],p=m.items,g=m.cateAxisId,x=p.filter(function(C){return so(C.type).indexOf("Bar")>=0});if(x&&x.length){var v=x[0].type.defaultProps,y=v!==void 0?fr(fr({},v),x[0].props):x[0].props,w=y.barSize,b=y[g];a[b]||(a[b]=[]);var S=ht(w)?r:w;a[b].push({item:x[0],stackList:x.slice(1),barSize:ht(S)?void 0:Pu(S,n,0)})}}return a},Rje=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var u=Pu(r,i,0,!0),d,A=[];if(a[0].barSize===+a[0].barSize){var f=!1,h=i/l,m=a.reduce(function(w,b){return w+b.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&h>0&&(f=!0,h*=.9,m=l*h);var p=(i-m)/2>>0,g={offset:p-u,size:0};d=a.reduce(function(w,b){var S={item:b.item,position:{offset:g.offset+g.size+u,size:f?h:b.barSize}},C=[].concat(KF(w),[S]);return g=C[C.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(T){C.push({item:T,position:g})}),C},A)}else{var x=Pu(n,i,0,!0);i-2*x-(l-1)*u<=0&&(u=0);var v=(i-2*x-(l-1)*u)/l;v>1&&(v>>=0);var y=o===+o?Math.min(v,o):v;d=a.reduce(function(w,b,S){var C=[].concat(KF(w),[{item:b.item,position:{offset:x+(v+u)*S+(v-y)/2,size:y}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(T){C.push({item:T,position:C[C.length-1].position})}),C},A)}return d},kje=function(e,r,n,i){var s=n.children,a=n.width,o=n.margin,l=a-(o.left||0)-(o.right||0),u=RW({children:s,legendWidth:l});if(u){var d=i||{},A=d.width,f=d.height,h=u.align,m=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&m==="middle")&&h!=="center"&&we(e[h]))return fr(fr({},e),{},aA({},h,e[h]+(A||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&m!=="middle"&&we(e[m]))return fr(fr({},e),{},aA({},m,e[m]+(f||0)))}return e},Lje=function(e,r,n){return ht(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},kW=function(e,r,n,i,s){var a=r.props.children,o=Ts(a,E1).filter(function(u){return Lje(i,s,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var A=Ei(d,n);if(ht(A))return u;var f=Array.isArray(A)?[y1(A),bl(A)]:[A,A],h=l.reduce(function(m,p){var g=Ei(d,p,0),x=f[0]-Math.abs(Array.isArray(g)?g[0]:g),v=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(x,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},jje=function(e,r,n,i,s){var a=r.map(function(o){return kW(e,o,n,s,i)}).filter(function(o){return!ht(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},LW=function(e,r,n,i,s){var a=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&kW(e,l,u,i)||dp(e,u,n,s)});if(n==="number")return a.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,u){for(var d=0,A=u.length;d<A;d++)o[u[d]]||(o[u[d]]=!0,l.push(u[d]));return l},[])},jW=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},Vc=function(e,r,n){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?vs(o[0]-o[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(A){var f=s?s.indexOf(A):A;return{coordinate:i(f)+u,value:A,offset:u}});return d.filter(function(A){return!Mf(A.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(A,f){return{coordinate:i(A)+u,value:A,index:f,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(A){return{coordinate:i(A)+u,value:A,offset:u}}):i.domain().map(function(A,f){return{coordinate:i(A)+u,value:s?s[A]:A,index:f,offset:u}})},nC=new WeakMap,L0=function(e,r){if(typeof r!="function")return e;nC.has(e)||nC.set(e,new WeakMap);var n=nC.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},Mje=function(e,r,n){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:Am(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:Qy(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:up(),realScaleType:"point"}:s==="category"?{scale:Am(),realScaleType:"band"}:{scale:Qy(),realScaleType:"linear"};if(Iu(i)){var l="scale".concat(o1(i));return{scale:(OF[l]||up)(),realScaleType:OF[l]?l:"point"}}return ot(i)?{scale:i}:{scale:up(),realScaleType:"point"}},GF=1e-4,Dje=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),s=Math.min(i[0],i[1])-GF,a=Math.max(i[0],i[1])+GF,o=e(r[0]),l=e(r[n-1]);(o<s||o>a||l<s||l>a)&&e.domain([r[0],r[n-1]])}},Oje=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},Fje=function(e,r){if(!r||r.length!==2||!we(r[0])||!we(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!we(e[0])||e[0]<n)&&(s[0]=n),(!we(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},Uje=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,a=0,o=0;o<r;++o){var l=Mf(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1])}},$je=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,a=0;a<r;++a){var o=Mf(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=s,e[a][n][1]=s+o,s=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},Qje={sign:Uje,expand:Z1e,none:UA,silhouette:J1e,wiggle:eEe,positive:$je},Hje=function(e,r,n){var i=r.map(function(o){return o.props.dataKey}),s=Qje[n],a=X1e().keys(i).value(function(o,l){return+Ei(o,l,0)}).order(a_).offset(s);return a(e)},Kje=function(e,r,n,i,s,a){if(!e)return null;var o=a?r.reverse():r,l={},u=o.reduce(function(A,f){var h,m=(h=f.type)!==null&&h!==void 0&&h.defaultProps?fr(fr({},f.type.defaultProps),f.props):f.props,p=m.stackId,g=m.hide;if(g)return A;var x=m[n],v=A[x]||{hasStack:!1,stackGroups:{}};if(Fr(p)){var y=v.stackGroups[p]||{numericAxisId:n,cateAxisId:i,items:[]};y.items.push(f),v.hasStack=!0,v.stackGroups[p]=y}else v.stackGroups[vg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[f]};return fr(fr({},A),{},aA({},x,v))},l),d={};return Object.keys(u).reduce(function(A,f){var h=u[f];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,g){var x=h.stackGroups[g];return fr(fr({},p),{},aA({},g,{numericAxisId:n,cateAxisId:i,items:x.items,stackedData:Hje(e,x.items,s)}))},m)}return fr(fr({},A),{},aA({},f,h))},d)},Vje=function(e,r){var n=r.realScaleType,i=r.type,s=r.tickCount,a=r.originalDomain,o=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=rje(u,s,o);return e.domain([y1(d),bl(d)]),{niceTicks:d}}if(s&&i==="number"){var A=e.domain(),f=nje(A,s,o);return{niceTicks:f}}return null};function zF(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ht(i[e.dataKey])){var o=vy(r,"value",i[e.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=Ei(i,ht(a)?e.dataKey:a);return ht(l)?null:e.scale(l)}var WF=function(e){var r=e.axis,n=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(r.type==="category")return n[o]?n[o].coordinate+i:null;var l=Ei(a,r.dataKey,r.domain[o]);return ht(l)?null:r.scale(l)-s/2+i},Gje=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},zje=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Fr(s)){var a=r[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},Wje=function(e){return e.reduce(function(r,n){return[y1(n.concat([r[0]]).filter(we)),bl(n.concat([r[1]]).filter(we))]},[1/0,-1/0])},MW=function(e,r,n){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,l=o.reduce(function(u,d){var A=Wje(d.slice(r,n+1));return[Math.min(u[0],A[0]),Math.max(u[1],A[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},YF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,D_=function(e,r,n){if(ot(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(we(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(YF.test(e[0])){var s=+YF.exec(e[0])[1];i[0]=r[0]-s}else ot(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(we(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(qF.test(e[1])){var a=+qF.exec(e[1])[1];i[1]=r[1]+a}else ot(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},Yy=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var s=JP(r,function(A){return A.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var u=s[o],d=s[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},XF=function(e,r,n){return!e||!e.length||mm(e,Ki(n,"type.defaultProps.domain"))?r:e},DW=function(e,r){var n=e.type.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,i=n.dataKey,s=n.name,a=n.unit,o=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return fr(fr({},ft(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:CR(e),value:Ei(r,i),type:l,payload:r,chartType:u,hide:d})};function bm(t){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(t)}function ZF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(r),!0).forEach(function(n){Yje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yje(t,e,r){return e=qje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qje(t){var e=Xje(t,"string");return bm(e)=="symbol"?e:e+""}function Xje(t,e){if(bm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(bm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qy=Math.PI/180,Zje=function(e){return e*180/Math.PI},an=function(e,r,n,i){return{x:e+Math.cos(-qy*i)*n,y:r+Math.sin(-qy*i)*n}},Jje=function(e,r){var n=e.x,i=e.y,s=r.x,a=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-a,2))},eMe=function(e,r){var n=e.x,i=e.y,s=r.cx,a=r.cy,o=Jje({x:n,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(n-s)/o,u=Math.acos(l);return i>a&&(u=2*Math.PI-u),{radius:o,angle:Zje(u),angleInRadian:u}},tMe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),a=Math.min(i,s);return{startAngle:r-a*360,endAngle:n-a*360}},rMe=function(e,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},eU=function(e,r){var n=e.x,i=e.y,s=eMe({x:n,y:i},r),a=s.radius,o=s.angle,l=r.innerRadius,u=r.outerRadius;if(a<l||a>u)return!1;if(a===0)return!0;var d=tMe(r),A=d.startAngle,f=d.endAngle,h=o,m;if(A<=f){for(;h>f;)h-=360;for(;h<A;)h+=360;m=h>=A&&h<=f}else{for(;h>A;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=A}return m?JF(JF({},r),{},{radius:a,angle:rMe(h,r)}):null};function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}var nMe=["offset"];function iMe(t){return lMe(t)||oMe(t)||aMe(t)||sMe()}function sMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aMe(t,e){if(t){if(typeof t=="string")return O_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O_(t,e)}}function oMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lMe(t){if(Array.isArray(t))return O_(t)}function O_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cMe(t,e){if(t==null)return{};var r=uMe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uMe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(r),!0).forEach(function(n){dMe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dMe(t,e,r){return e=AMe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AMe(t){var e=fMe(t,"string");return wm(e)=="symbol"?e:e+""}function fMe(t,e){if(wm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Em.apply(this,arguments)}var hMe=function(e){var r=e.value,n=e.formatter,i=ht(e.children)?r:e.children;return ot(n)?n(i):i},pMe=function(e,r){var n=vs(r-e),i=Math.min(Math.abs(r-e),360);return n*i},mMe=function(e,r,n){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,l=s,u=l.cx,d=l.cy,A=l.innerRadius,f=l.outerRadius,h=l.startAngle,m=l.endAngle,p=l.clockWise,g=(A+f)/2,x=pMe(h,m),v=x>=0?1:-1,y,w;i==="insideStart"?(y=h+v*a,w=p):i==="insideEnd"?(y=m-v*a,w=!p):i==="end"&&(y=m+v*a,w=p),w=x<=0?w:!w;var b=an(u,d,g,y),S=an(u,d,g,y+(w?1:-1)*359),C="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(S.x,",").concat(S.y),T=ht(e.id)?vg("recharts-radial-line-"):e.id;return Q.createElement("text",Em({},n,{dominantBaseline:"central",className:gt("recharts-radial-bar-label",o)}),Q.createElement("defs",null,Q.createElement("path",{id:T,d:C})),Q.createElement("textPath",{xlinkHref:"#".concat(T)},r))},gMe=function(e){var r=e.viewBox,n=e.offset,i=e.position,s=r,a=s.cx,o=s.cy,l=s.innerRadius,u=s.outerRadius,d=s.startAngle,A=s.endAngle,f=(d+A)/2;if(i==="outside"){var h=an(a,o,u+n,f),m=h.x,p=h.y;return{x:m,y:p,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,x=an(a,o,g,f),v=x.x,y=x.y;return{x:v,y,textAnchor:"middle",verticalAnchor:"middle"}},xMe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,s=e.position,a=r,o=a.x,l=a.y,u=a.width,d=a.height,A=d>=0?1:-1,f=A*i,h=A>0?"end":"start",m=A>0?"start":"end",p=u>=0?1:-1,g=p*i,x=p>0?"end":"start",v=p>0?"start":"end";if(s==="top"){var y={x:o+u/2,y:l-A*i,textAnchor:"middle",verticalAnchor:h};return Pr(Pr({},y),n?{height:Math.max(l-n.y,0),width:u}:{})}if(s==="bottom"){var w={x:o+u/2,y:l+d+f,textAnchor:"middle",verticalAnchor:m};return Pr(Pr({},w),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(s==="left"){var b={x:o-g,y:l+d/2,textAnchor:x,verticalAnchor:"middle"};return Pr(Pr({},b),n?{width:Math.max(b.x-n.x,0),height:d}:{})}if(s==="right"){var S={x:o+u+g,y:l+d/2,textAnchor:v,verticalAnchor:"middle"};return Pr(Pr({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var C=n?{width:u,height:d}:{};return s==="insideLeft"?Pr({x:o+g,y:l+d/2,textAnchor:v,verticalAnchor:"middle"},C):s==="insideRight"?Pr({x:o+u-g,y:l+d/2,textAnchor:x,verticalAnchor:"middle"},C):s==="insideTop"?Pr({x:o+u/2,y:l+f,textAnchor:"middle",verticalAnchor:m},C):s==="insideBottom"?Pr({x:o+u/2,y:l+d-f,textAnchor:"middle",verticalAnchor:h},C):s==="insideTopLeft"?Pr({x:o+g,y:l+f,textAnchor:v,verticalAnchor:m},C):s==="insideTopRight"?Pr({x:o+u-g,y:l+f,textAnchor:x,verticalAnchor:m},C):s==="insideBottomLeft"?Pr({x:o+g,y:l+d-f,textAnchor:v,verticalAnchor:h},C):s==="insideBottomRight"?Pr({x:o+u-g,y:l+d-f,textAnchor:x,verticalAnchor:h},C):Rf(s)&&(we(s.x)||Qc(s.x))&&(we(s.y)||Qc(s.y))?Pr({x:o+Pu(s.x,u),y:l+Pu(s.y,d),textAnchor:"end",verticalAnchor:"end"},C):Pr({x:o+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},vMe=function(e){return"cx"in e&&we(e.cx)};function bn(t){var e=t.offset,r=e===void 0?5:e,n=cMe(t,nMe),i=Pr({offset:r},n),s=i.viewBox,a=i.position,o=i.value,l=i.children,u=i.content,d=i.className,A=d===void 0?"":d,f=i.textBreakAll;if(!s||ht(o)&&ht(l)&&!E.isValidElement(u)&&!ot(u))return null;if(E.isValidElement(u))return E.cloneElement(u,i);var h;if(ot(u)){if(h=E.createElement(u,i),E.isValidElement(h))return h}else h=hMe(i);var m=vMe(s),p=ft(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return mMe(i,h,p);var g=m?gMe(i):xMe(i);return Q.createElement(jy,Em({className:gt("recharts-label",A)},p,g,{breakAll:f}),h)}bn.displayName="Label";var OW=function(e){var r=e.cx,n=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,d=e.outerRadius,A=e.x,f=e.y,h=e.top,m=e.left,p=e.width,g=e.height,x=e.clockWise,v=e.labelViewBox;if(v)return v;if(we(p)&&we(g)){if(we(A)&&we(f))return{x:A,y:f,width:p,height:g};if(we(h)&&we(m))return{x:h,y:m,width:p,height:g}}return we(A)&&we(f)?{x:A,y:f,width:0,height:0}:we(r)&&we(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},yMe=function(e,r){return e?e===!0?Q.createElement(bn,{key:"label-implicit",viewBox:r}):Fr(e)?Q.createElement(bn,{key:"label-implicit",viewBox:r,value:e}):E.isValidElement(e)?e.type===bn?E.cloneElement(e,{key:"label-implicit",viewBox:r}):Q.createElement(bn,{key:"label-implicit",content:e,viewBox:r}):ot(e)?Q.createElement(bn,{key:"label-implicit",content:e,viewBox:r}):Rf(e)?Q.createElement(bn,Em({viewBox:r},e,{key:"label-implicit"})):null:null},bMe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,s=OW(e),a=Ts(i,bn).map(function(l,u){return E.cloneElement(l,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return a;var o=yMe(e.label,r||s);return[o].concat(iMe(a))};bn.parseViewBox=OW;bn.renderCallByParent=bMe;function wMe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var EMe=wMe;const SMe=$t(EMe);function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}var CMe=["valueAccessor"],TMe=["data","dataKey","clockWise","id","textBreakAll"];function BMe(t){return PMe(t)||IMe(t)||NMe(t)||_Me()}function _Me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NMe(t,e){if(t){if(typeof t=="string")return F_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F_(t,e)}}function IMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PMe(t){if(Array.isArray(t))return F_(t)}function F_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xy.apply(this,arguments)}function rU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(r),!0).forEach(function(n){RMe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RMe(t,e,r){return e=kMe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kMe(t){var e=LMe(t,"string");return Sm(e)=="symbol"?e:e+""}function LMe(t,e){if(Sm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iU(t,e){if(t==null)return{};var r=jMe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jMe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var MMe=function(e){return Array.isArray(e.value)?SMe(e.value):e.value};function Hl(t){var e=t.valueAccessor,r=e===void 0?MMe:e,n=iU(t,CMe),i=n.data,s=n.dataKey,a=n.clockWise,o=n.id,l=n.textBreakAll,u=iU(n,TMe);return!i||!i.length?null:Q.createElement(or,{className:"recharts-label-list"},i.map(function(d,A){var f=ht(s)?r(d,A):Ei(d&&d.payload,s),h=ht(o)?{}:{id:"".concat(o,"-").concat(A)};return Q.createElement(bn,Xy({},ft(d,!0),u,h,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:bn.parseViewBox(ht(a)?d:nU(nU({},d),{},{clockWise:a})),key:"label-".concat(A),index:A}))}))}Hl.displayName="LabelList";function DMe(t,e){return t?t===!0?Q.createElement(Hl,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||ot(t)?Q.createElement(Hl,{key:"labelList-implicit",data:e,content:t}):Rf(t)?Q.createElement(Hl,Xy({data:e},t,{key:"labelList-implicit"})):null:null}function OMe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Ts(n,Hl).map(function(a,o){return E.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!r)return i;var s=DMe(t.label,e);return[s].concat(BMe(i))}Hl.renderCallByParent=OMe;function Cm(t){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cm(t)}function U_(){return U_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U_.apply(this,arguments)}function sU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(r),!0).forEach(function(n){FMe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FMe(t,e,r){return e=UMe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UMe(t){var e=$Me(t,"string");return Cm(e)=="symbol"?e:e+""}function $Me(t,e){if(Cm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QMe=function(e,r){var n=vs(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},j0=function(e){var r=e.cx,n=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,d=l*(o?1:-1)+i,A=Math.asin(l/d)/qy,f=u?s:s+a*A,h=an(r,n,d,f),m=an(r,n,i,f),p=u?s-a*A:s,g=an(r,n,d*Math.cos(A*qy),p);return{center:h,circleTangency:m,lineTangency:g,theta:A}},FW=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,l=QMe(a,o),u=a+l,d=an(r,n,s,a),A=an(r,n,s,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(i>0){var h=an(r,n,i,a),m=an(r,n,i,u);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},HMe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,A=vs(d-u),f=j0({cx:r,cy:n,radius:s,angle:u,sign:A,cornerRadius:a,cornerIsExternal:l}),h=f.circleTangency,m=f.lineTangency,p=f.theta,g=j0({cx:r,cy:n,radius:s,angle:d,sign:-A,cornerRadius:a,cornerIsExternal:l}),x=g.circleTangency,v=g.lineTangency,y=g.theta,w=l?Math.abs(u-d):Math.abs(u-d)-p-y;if(w<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):FW({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(A<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(w>180),",").concat(+(A<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(A<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var S=j0({cx:r,cy:n,radius:i,angle:u,sign:A,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),C=S.circleTangency,T=S.lineTangency,B=S.theta,_=j0({cx:r,cy:n,radius:i,angle:d,sign:-A,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),I=_.circleTangency,L=_.lineTangency,N=_.theta,R=l?Math.abs(u-d):Math.abs(u-d)-B-N;if(R<0&&a===0)return"".concat(b,"L").concat(r,",").concat(n,"Z");b+="L".concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(A<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(A>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(A<0),",").concat(T.x,",").concat(T.y,"Z")}else b+="L".concat(r,",").concat(n,"Z");return b},KMe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UW=function(e){var r=aU(aU({},KMe),e),n=r.cx,i=r.cy,s=r.innerRadius,a=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,A=r.endAngle,f=r.className;if(a<s||d===A)return null;var h=gt("recharts-sector",f),m=a-s,p=Pu(o,m,0,!0),g;return p>0&&Math.abs(d-A)<360?g=HMe({cx:n,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(p,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:A}):g=FW({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:A}),Q.createElement("path",U_({},ft(r,!0),{className:h,d:g,role:"img"}))};function Tm(t){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(t)}function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$_.apply(this,arguments)}function oU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(r),!0).forEach(function(n){VMe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VMe(t,e,r){return e=GMe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GMe(t){var e=zMe(t,"string");return Tm(e)=="symbol"?e:e+""}function zMe(t,e){if(Tm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cU={curveBasisClosed:U1e,curveBasisOpen:$1e,curveBasis:F1e,curveBumpX:C1e,curveBumpY:T1e,curveLinearClosed:Q1e,curveLinear:c1,curveMonotoneX:H1e,curveMonotoneY:K1e,curveNatural:V1e,curveStep:G1e,curveStepAfter:W1e,curveStepBefore:z1e},M0=function(e){return e.x===+e.x&&e.y===+e.y},Ah=function(e){return e.x},fh=function(e){return e.y},WMe=function(e,r){if(ot(e))return e;var n="curve".concat(o1(e));return(n==="curveMonotone"||n==="curveBump")&&r?cU["".concat(n).concat(r==="vertical"?"Y":"X")]:cU[n]||c1},YMe=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,d=WMe(n,o),A=u?s.filter(function(p){return M0(p)}):s,f;if(Array.isArray(a)){var h=u?a.filter(function(p){return M0(p)}):a,m=A.map(function(p,g){return lU(lU({},p),{},{base:h[g]})});return o==="vertical"?f=C0().y(fh).x1(Ah).x0(function(p){return p.base.x}):f=C0().x(Ah).y1(fh).y0(function(p){return p.base.y}),f.defined(M0).curve(d),f(m)}return o==="vertical"&&we(a)?f=C0().y(fh).x1(Ah).x0(a):we(a)?f=C0().x(Ah).y1(fh).y0(a):f=Fz().x(Ah).y(fh),f.defined(M0).curve(d),f(A)},Ap=function(e){var r=e.className,n=e.points,i=e.path,s=e.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?YMe(e):i;return E.createElement("path",$_({},ft(e,!1),yy(e),{className:gt("recharts-curve",r),d:a,ref:s}))},$W={exports:{}},qMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XMe=qMe,ZMe=XMe;function QW(){}function HW(){}HW.resetWarningCache=QW;var JMe=function(){function t(n,i,s,a,o,l){if(l!==ZMe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:HW,resetWarningCache:QW};return r.PropTypes=r,r};$W.exports=JMe();var eDe=$W.exports;const St=$t(eDe);var tDe=Object.getOwnPropertyNames,rDe=Object.getOwnPropertySymbols,nDe=Object.prototype.hasOwnProperty;function uU(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function D0(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var s=i.cache,a=s.get(r),o=s.get(n);if(a&&o)return a===n&&o===r;s.set(r,n),s.set(n,r);var l=t(r,n,i);return s.delete(r),s.delete(n),l}}function dU(t){return tDe(t).concat(rDe(t))}var iDe=Object.hasOwn||function(t,e){return nDe.call(t,e)};function zu(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var sDe="__v",aDe="__o",oDe="_owner",AU=Object.getOwnPropertyDescriptor,fU=Object.keys;function lDe(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function cDe(t,e){return zu(t.getTime(),e.getTime())}function uDe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function dDe(t,e){return t===e}function hU(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.entries(),a,o,l=0;(a=s.next())&&!a.done;){for(var u=e.entries(),d=!1,A=0;(o=u.next())&&!o.done;){if(i[A]){A++;continue}var f=a.value,h=o.value;if(r.equals(f[0],h[0],l,A,t,e,r)&&r.equals(f[1],h[1],f[0],h[0],t,e,r)){d=i[A]=!0;break}A++}if(!d)return!1;l++}return!0}var ADe=zu;function fDe(t,e,r){var n=fU(t),i=n.length;if(fU(e).length!==i)return!1;for(;i-- >0;)if(!KW(t,e,r,n[i]))return!1;return!0}function hh(t,e,r){var n=dU(t),i=n.length;if(dU(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=n[i],!KW(t,e,r,s)||(a=AU(t,s),o=AU(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function hDe(t,e){return zu(t.valueOf(),e.valueOf())}function pDe(t,e){return t.source===e.source&&t.flags===e.flags}function pU(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var l=e.values(),u=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&r.equals(a.value,o.value,a.value,o.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function mDe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function gDe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function KW(t,e,r,n){return(n===oDe||n===aDe||n===sDe)&&(t.$$typeof||e.$$typeof)?!0:iDe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var xDe="[object Arguments]",vDe="[object Boolean]",yDe="[object Date]",bDe="[object Error]",wDe="[object Map]",EDe="[object Number]",SDe="[object Object]",CDe="[object RegExp]",TDe="[object Set]",BDe="[object String]",_De="[object URL]",NDe=Array.isArray,mU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,gU=Object.assign,IDe=Object.prototype.toString.call.bind(Object.prototype.toString);function PDe(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,A=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(m,p,g){if(m===p)return!0;if(m==null||p==null)return!1;var x=typeof m;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?a(m,p,g):x==="function"?i(m,p,g):!1;var v=m.constructor;if(v!==p.constructor)return!1;if(v===Object)return o(m,p,g);if(NDe(m))return e(m,p,g);if(mU!=null&&mU(m))return A(m,p,g);if(v===Date)return r(m,p,g);if(v===RegExp)return u(m,p,g);if(v===Map)return s(m,p,g);if(v===Set)return d(m,p,g);var y=IDe(m);return y===yDe?r(m,p,g):y===CDe?u(m,p,g):y===wDe?s(m,p,g):y===TDe?d(m,p,g):y===SDe?typeof m.then!="function"&&typeof p.then!="function"&&o(m,p,g):y===_De?f(m,p,g):y===bDe?n(m,p,g):y===xDe?o(m,p,g):y===vDe||y===EDe||y===BDe?l(m,p,g):!1}}function RDe(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?hh:lDe,areDatesEqual:cDe,areErrorsEqual:uDe,areFunctionsEqual:dDe,areMapsEqual:n?uU(hU,hh):hU,areNumbersEqual:ADe,areObjectsEqual:n?hh:fDe,arePrimitiveWrappersEqual:hDe,areRegExpsEqual:pDe,areSetsEqual:n?uU(pU,hh):pU,areTypedArraysEqual:n?hh:mDe,areUrlsEqual:gDe};if(r&&(i=gU({},i,r(i))),e){var s=D0(i.areArraysEqual),a=D0(i.areMapsEqual),o=D0(i.areObjectsEqual),l=D0(i.areSetsEqual);i=gU({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function kDe(t){return function(e,r,n,i,s,a,o){return t(e,r,o)}}function LDe(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,s=t.strict;if(n)return function(l,u){var d=n(),A=d.cache,f=A===void 0?e?new WeakMap:void 0:A,h=d.meta;return r(l,u,{cache:f,equals:i,meta:h,strict:s})};if(e)return function(l,u){return r(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return r(l,u,a)}}var jDe=Ac();Ac({strict:!0});Ac({circular:!0});Ac({circular:!0,strict:!0});Ac({createInternalComparator:function(){return zu}});Ac({strict:!0,createInternalComparator:function(){return zu}});Ac({circular:!0,createInternalComparator:function(){return zu}});Ac({circular:!0,createInternalComparator:function(){return zu},strict:!0});function Ac(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=RDe(t),l=PDe(o),u=n?n(l):kDe(l);return LDe({circular:r,comparator:l,createState:i,equals:u,strict:a})}function MDe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function xU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>e?(t(s),r=-1):MDe(i)};requestAnimationFrame(n)}function Q_(t){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q_(t)}function DDe(t){return $De(t)||UDe(t)||FDe(t)||ODe()}function ODe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FDe(t,e){if(t){if(typeof t=="string")return vU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vU(t,e)}}function vU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function UDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $De(t){if(Array.isArray(t))return t}function QDe(){var t={},e=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,o=DDe(a),l=o[0],u=o.slice(1);if(typeof l=="number"){xU(i.bind(null,u),l);return}i(l),xU(i.bind(null,u));return}Q_(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Bm(t){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(t)}function yU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(r),!0).forEach(function(n){VW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VW(t,e,r){return e=HDe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HDe(t){var e=KDe(t,"string");return Bm(e)==="symbol"?e:String(e)}function KDe(t,e){if(Bm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VDe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},GDe=function(e){return e},zDe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},fp=function(e,r){return Object.keys(r).reduce(function(n,i){return bU(bU({},n),{},VW({},i,e(i,r[i])))},{})},wU=function(e,r,n){return e.map(function(i){return"".concat(zDe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function WDe(t,e){return XDe(t)||qDe(t,e)||GW(t,e)||YDe()}function YDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qDe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function XDe(t){if(Array.isArray(t))return t}function ZDe(t){return tOe(t)||eOe(t)||GW(t)||JDe()}function JDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GW(t,e){if(t){if(typeof t=="string")return H_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H_(t,e)}}function eOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tOe(t){if(Array.isArray(t))return H_(t)}function H_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Zy=1e-4,zW=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},WW=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},EU=function(e,r){return function(n){var i=zW(e,r);return WW(i,n)}},rOe=function(e,r){return function(n){var i=zW(e,r),s=[].concat(ZDe(i.map(function(a,o){return a*o}).slice(1)),[0]);return WW(s,n)}},SU=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],s=r[1],a=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=WDe(u,4);i=d[0],s=d[1],a=d[2],o=d[3]}}}var A=EU(i,a),f=EU(s,o),h=rOe(i,a),m=function(x){return x>1?1:x<0?0:x},p=function(x){for(var v=x>1?1:x,y=v,w=0;w<8;++w){var b=A(y)-v,S=h(y);if(Math.abs(b-v)<Zy||S<Zy)return f(y);y=m(y-b/S)}return f(y)};return p.isStepper=!1,p},nOe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,l=function(d,A,f){var h=-(d-A)*n,m=f*s,p=f+(h-m)*o/1e3,g=f*o/1e3+d;return Math.abs(g-A)<Zy&&Math.abs(p)<Zy?[A,0]:[g,p]};return l.isStepper=!0,l.dt=o,l},iOe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SU(i);case"spring":return nOe();default:if(i.split("(")[0]==="cubic-bezier")return SU(i)}return typeof i=="function"?i:null};function _m(t){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(t)}function CU(t){return oOe(t)||aOe(t)||YW(t)||sOe()}function sOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oOe(t){if(Array.isArray(t))return V_(t)}function TU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(r),!0).forEach(function(n){K_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K_(t,e,r){return e=lOe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lOe(t){var e=cOe(t,"string");return _m(e)==="symbol"?e:String(e)}function cOe(t,e){if(_m(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_m(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uOe(t,e){return fOe(t)||AOe(t,e)||YW(t,e)||dOe()}function dOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YW(t,e){if(t){if(typeof t=="string")return V_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V_(t,e)}}function V_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function AOe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function fOe(t){if(Array.isArray(t))return t}var Jy=function(e,r,n){return e+(r-e)*n},G_=function(e){var r=e.from,n=e.to;return r!==n},hOe=function t(e,r,n){var i=fp(function(s,a){if(G_(a)){var o=e(a.from,a.to,a.velocity),l=uOe(o,2),u=l[0],d=l[1];return Jr(Jr({},a),{},{from:u,velocity:d})}return a},r);return n<1?fp(function(s,a){return G_(a)?Jr(Jr({},a),{},{velocity:Jy(a.velocity,i[s].velocity,n),from:Jy(a.from,i[s].from,n)}):a},r):t(e,i,n-1)};const pOe=function(t,e,r,n,i){var s=VDe(t,e),a=s.reduce(function(g,x){return Jr(Jr({},g),{},K_({},x,[t[x],e[x]]))},{}),o=s.reduce(function(g,x){return Jr(Jr({},g),{},K_({},x,{from:t[x],velocity:0,to:e[x]}))},{}),l=-1,u,d,A=function(){return null},f=function(){return fp(function(x,v){return v.from},o)},h=function(){return!Object.values(o).filter(G_).length},m=function(x){u||(u=x);var v=x-u,y=v/r.dt;o=hOe(r,o,y),i(Jr(Jr(Jr({},t),e),f())),u=x,h()||(l=requestAnimationFrame(A))},p=function(x){d||(d=x);var v=(x-d)/n,y=fp(function(b,S){return Jy.apply(void 0,CU(S).concat([r(v)]))},a);if(i(Jr(Jr(Jr({},t),e),y)),v<1)l=requestAnimationFrame(A);else{var w=fp(function(b,S){return Jy.apply(void 0,CU(S).concat([r(1)]))},a);i(Jr(Jr(Jr({},t),e),w))}};return A=r.isStepper?m:p,function(){return requestAnimationFrame(A),function(){cancelAnimationFrame(l)}}};function YA(t){"@babel/helpers - typeof";return YA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YA(t)}var mOe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function gOe(t,e){if(t==null)return{};var r=xOe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xOe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function iC(t){return wOe(t)||bOe(t)||yOe(t)||vOe()}function vOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yOe(t,e){if(t){if(typeof t=="string")return z_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z_(t,e)}}function bOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wOe(t){if(Array.isArray(t))return z_(t)}function z_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function BU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ss(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(r),!0).forEach(function(n){Lh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lh(t,e,r){return e=qW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SOe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qW(n.key),n)}}function COe(t,e,r){return e&&SOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qW(t){var e=TOe(t,"string");return YA(e)==="symbol"?e:String(e)}function TOe(t,e){if(YA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(YA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W_(t,e)}function W_(t,e){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},W_(t,e)}function _Oe(t){var e=NOe();return function(){var n=eb(t),i;if(e){var s=eb(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Y_(this,i)}}function Y_(t,e){if(e&&(YA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q_(t)}function q_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eb(t)}var Co=function(t){BOe(r,t);var e=_Oe(r);function r(n,i){var s;EOe(this,r),s=e.call(this,n,i);var a=s.props,o=a.isActive,l=a.attributeName,u=a.from,d=a.to,A=a.steps,f=a.children,h=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(q_(s)),s.changeStyle=s.changeStyle.bind(q_(s)),!o||h<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:d}),Y_(s);if(A&&A.length)s.state={style:A[0].style};else if(u){if(typeof f=="function")return s.state={style:u},Y_(s);s.state={style:l?Lh({},l,u):u}}else s.state={style:{}};return s}return COe(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,d=s.to,A=s.from,f=this.state.style;if(o){if(!a){var h={style:l?Lh({},l,d):d};this.state&&f&&(l&&f[l]!==d||!l&&f!==d)&&this.setState(h);return}if(!(jDe(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||u?A:i.to;if(this.state&&f){var g={style:l?Lh({},l,p):p};(l&&f[l]!==p||!l&&f!==p)&&this.setState(g)}this.runAnimation(ss(ss({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,u=i.easing,d=i.begin,A=i.onAnimationEnd,f=i.onAnimationStart,h=pOe(a,o,iOe(u),l,this.changeStyle),m=function(){s.stopJSAnimation=h()};this.manager.start([f,d,m,l,A])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,u=a[0],d=u.style,A=u.duration,f=A===void 0?0:A,h=function(p,g,x){if(x===0)return p;var v=g.duration,y=g.easing,w=y===void 0?"ease":y,b=g.style,S=g.properties,C=g.onAnimationEnd,T=x>0?a[x-1]:g,B=S||Object.keys(b);if(typeof w=="function"||w==="spring")return[].concat(iC(p),[s.runJSAnimation.bind(s,{from:T.style,to:b,duration:v,easing:w}),v]);var _=wU(B,v,w),I=ss(ss(ss({},T.style),b),{},{transition:_});return[].concat(iC(p),[I,v,C]).filter(GDe)};return this.manager.start([l].concat(iC(a.reduce(h,[d,Math.max(f,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=QDe());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,A=i.onAnimationEnd,f=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=o?Lh({},o,l):l,g=wU(Object.keys(p),a,u);m.start([d,s,ss(ss({},p),{},{transition:g}),a,A])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=gOe(i,mOe),u=E.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!o||u===0||a<=0)return s;var A=function(h){var m=h.props,p=m.style,g=p===void 0?{}:p,x=m.className,v=E.cloneElement(h,ss(ss({},l),{},{style:ss(ss({},g),d),className:x}));return v};return u===1?A(E.Children.only(s)):Q.createElement("div",null,E.Children.map(s,function(f){return A(f)}))}}]),r}(E.PureComponent);Co.displayName="Animate";Co.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Co.propTypes={from:St.oneOfType([St.object,St.string]),to:St.oneOfType([St.object,St.string]),attributeName:St.string,duration:St.number,begin:St.number,easing:St.oneOfType([St.string,St.func]),steps:St.arrayOf(St.shape({duration:St.number.isRequired,style:St.object.isRequired,easing:St.oneOfType([St.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),St.func]),properties:St.arrayOf("string"),onAnimationEnd:St.func})),children:St.oneOfType([St.node,St.func]),isActive:St.bool,canBegin:St.bool,onAnimationEnd:St.func,shouldReAnimate:St.bool,onAnimationStart:St.func,onAnimationReStart:St.func};function Nm(t){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nm(t)}function tb(){return tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tb.apply(this,arguments)}function IOe(t,e){return LOe(t)||kOe(t,e)||ROe(t,e)||POe()}function POe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ROe(t,e){if(t){if(typeof t=="string")return _U(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _U(t,e)}}function _U(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kOe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function LOe(t){if(Array.isArray(t))return t}function NU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(r),!0).forEach(function(n){jOe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jOe(t,e,r){return e=MOe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MOe(t){var e=DOe(t,"string");return Nm(e)=="symbol"?e:e+""}function DOe(t,e){if(Nm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PU=function(e,r,n,i,s){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),o=i>=0?1:-1,l=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(a>0&&s instanceof Array){for(var A=[0,0,0,0],f=0,h=4;f<h;f++)A[f]=s[f]>a?a:s[f];d="M".concat(e,",").concat(r+o*A[0]),A[0]>0&&(d+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(u,",").concat(e+l*A[0],",").concat(r)),d+="L ".concat(e+n-l*A[1],",").concat(r),A[1]>0&&(d+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+o*A[1])),d+="L ".concat(e+n,",").concat(r+i-o*A[2]),A[2]>0&&(d+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(u,`,
        `).concat(e+n-l*A[2],",").concat(r+i)),d+="L ".concat(e+l*A[3],",").concat(r+i),A[3]>0&&(d+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+i-o*A[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var m=Math.min(a,s);d="M ".concat(e,",").concat(r+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+l*m,",").concat(r,`
            L `).concat(e+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n,",").concat(r+o*m,`
            L `).concat(e+n,",").concat(r+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n-l*m,",").concat(r+i,`
            L `).concat(e+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(r+i-o*m," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},OOe=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,s=r.x,a=r.y,o=r.width,l=r.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(s,s+o),d=Math.max(s,s+o),A=Math.min(a,a+l),f=Math.max(a,a+l);return n>=u&&n<=d&&i>=A&&i<=f}return!1},FOe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TR=function(e){var r=IU(IU({},FOe),e),n=E.useRef(),i=E.useState(-1),s=IOe(i,2),a=s[0],o=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&o(w)}catch{}},[]);var l=r.x,u=r.y,d=r.width,A=r.height,f=r.radius,h=r.className,m=r.animationEasing,p=r.animationDuration,g=r.animationBegin,x=r.isAnimationActive,v=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||A!==+A||d===0||A===0)return null;var y=gt("recharts-rectangle",h);return v?Q.createElement(Co,{canBegin:a>0,from:{width:d,height:A,x:l,y:u},to:{width:d,height:A,x:l,y:u},duration:p,animationEasing:m,isActive:v},function(w){var b=w.width,S=w.height,C=w.x,T=w.y;return Q.createElement(Co,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:x,easing:m},Q.createElement("path",tb({},ft(r,!0),{className:y,d:PU(C,T,b,S,f),ref:n})))}):Q.createElement("path",tb({},ft(r,!0),{className:y,d:PU(l,u,d,A,f)}))};function X_(){return X_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},X_.apply(this,arguments)}var BR=function(e){var r=e.cx,n=e.cy,i=e.r,s=e.className,a=gt("recharts-dot",s);return r===+r&&n===+n&&i===+i?E.createElement("circle",X_({},ft(e,!1),yy(e),{className:a,cx:r,cy:n,r:i})):null};function Im(t){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(t)}var UOe=["x","y","top","left","width","height","className"];function Z_(){return Z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z_.apply(this,arguments)}function RU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $Oe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(r),!0).forEach(function(n){QOe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QOe(t,e,r){return e=HOe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HOe(t){var e=KOe(t,"string");return Im(e)=="symbol"?e:e+""}function KOe(t,e){if(Im(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Im(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VOe(t,e){if(t==null)return{};var r=GOe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function GOe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var zOe=function(e,r,n,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},WOe=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,l=e.left,u=l===void 0?0:l,d=e.width,A=d===void 0?0:d,f=e.height,h=f===void 0?0:f,m=e.className,p=VOe(e,UOe),g=$Oe({x:n,y:s,top:o,left:u,width:A,height:h},p);return!we(n)||!we(s)||!we(A)||!we(h)||!we(o)||!we(u)?null:Q.createElement("path",Z_({},ft(g,!0),{className:gt("recharts-cross",m),d:zOe(n,s,A,h,o,u)}))},YOe=c7,qOe=YOe(Object.getPrototypeOf,Object),XOe=qOe,ZOe=Po,JOe=XOe,eFe=Ro,tFe="[object Object]",rFe=Function.prototype,nFe=Object.prototype,XW=rFe.toString,iFe=nFe.hasOwnProperty,sFe=XW.call(Object);function aFe(t){if(!eFe(t)||ZOe(t)!=tFe)return!1;var e=JOe(t);if(e===null)return!0;var r=iFe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&XW.call(r)==sFe}var oFe=aFe;const lFe=$t(oFe);var cFe=Po,uFe=Ro,dFe="[object Boolean]";function AFe(t){return t===!0||t===!1||uFe(t)&&cFe(t)==dFe}var fFe=AFe;const hFe=$t(fFe);function Pm(t){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pm(t)}function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rb.apply(this,arguments)}function pFe(t,e){return vFe(t)||xFe(t,e)||gFe(t,e)||mFe()}function mFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gFe(t,e){if(t){if(typeof t=="string")return kU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kU(t,e)}}function kU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xFe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function vFe(t){if(Array.isArray(t))return t}function LU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(r),!0).forEach(function(n){yFe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yFe(t,e,r){return e=bFe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bFe(t){var e=wFe(t,"string");return Pm(e)=="symbol"?e:e+""}function wFe(t,e){if(Pm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Pm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MU=function(e,r,n,i,s){var a=n-i,o;return o="M ".concat(e,",").concat(r),o+="L ".concat(e+n,",").concat(r),o+="L ".concat(e+n-a/2,",").concat(r+s),o+="L ".concat(e+n-a/2-i,",").concat(r+s),o+="L ".concat(e,",").concat(r," Z"),o},EFe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SFe=function(e){var r=jU(jU({},EFe),e),n=E.useRef(),i=E.useState(-1),s=pFe(i,2),a=s[0],o=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&o(y)}catch{}},[]);var l=r.x,u=r.y,d=r.upperWidth,A=r.lowerWidth,f=r.height,h=r.className,m=r.animationEasing,p=r.animationDuration,g=r.animationBegin,x=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||A!==+A||f!==+f||d===0&&A===0||f===0)return null;var v=gt("recharts-trapezoid",h);return x?Q.createElement(Co,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:d,lowerWidth:A,height:f,x:l,y:u},duration:p,animationEasing:m,isActive:x},function(y){var w=y.upperWidth,b=y.lowerWidth,S=y.height,C=y.x,T=y.y;return Q.createElement(Co,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:m},Q.createElement("path",rb({},ft(r,!0),{className:v,d:MU(C,T,w,b,S),ref:n})))}):Q.createElement("g",null,Q.createElement("path",rb({},ft(r,!0),{className:v,d:MU(l,u,d,A,f)})))},CFe=["option","shapeType","propTransformer","activeClassName","isActive"];function Rm(t){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rm(t)}function TFe(t,e){if(t==null)return{};var r=BFe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BFe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function DU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(r),!0).forEach(function(n){_Fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Fe(t,e,r){return e=NFe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NFe(t){var e=IFe(t,"string");return Rm(e)=="symbol"?e:e+""}function IFe(t,e){if(Rm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PFe(t,e){return nb(nb({},e),t)}function RFe(t,e){return t==="symbols"}function OU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return Q.createElement(TR,r);case"trapezoid":return Q.createElement(SFe,r);case"sector":return Q.createElement(UW,r);case"symbols":if(RFe(e))return Q.createElement(KP,r);break;default:return null}}function kFe(t){return E.isValidElement(t)?t.props:t}function LFe(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?PFe:n,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,l=TFe(t,CFe),u;if(E.isValidElement(e))u=E.cloneElement(e,nb(nb({},l),kFe(e)));else if(ot(e))u=e(l);else if(lFe(e)&&!hFe(e)){var d=i(e,l);u=Q.createElement(OU,{shapeType:r,elementProps:d})}else{var A=l;u=Q.createElement(OU,{shapeType:r,elementProps:A})}return o?Q.createElement(or,{className:a},u):u}function S1(t,e){return e!=null&&"trapezoids"in t.props}function C1(t,e){return e!=null&&"sectors"in t.props}function km(t,e){return e!=null&&"points"in t.props}function jFe(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&s}function MFe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function DFe(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function OFe(t,e){var r;return S1(t,e)?r=jFe:C1(t,e)?r=MFe:km(t,e)&&(r=DFe),r}function FFe(t,e){var r;return S1(t,e)?r="trapezoids":C1(t,e)?r="sectors":km(t,e)&&(r="points"),r}function UFe(t,e){if(S1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(C1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return km(t,e)?e.payload:{}}function $Fe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=FFe(r,e),s=UFe(r,e),a=n.filter(function(l,u){var d=mm(s,l),A=r.props[i].filter(function(m){var p=OFe(r,e);return p(m,e)}),f=r.props[i].indexOf(A[A.length-1]),h=u===f;return d&&h}),o=n.indexOf(a[a.length-1]);return o}var QFe=Math.ceil,HFe=Math.max;function KFe(t,e,r,n){for(var i=-1,s=HFe(QFe((e-t)/(r||1)),0),a=Array(s);s--;)a[n?s:++i]=t,t+=r;return a}var VFe=KFe,GFe=B7,FU=1/0,zFe=17976931348623157e292;function WFe(t){if(!t)return t===0?t:0;if(t=GFe(t),t===FU||t===-FU){var e=t<0?-1:1;return e*zFe}return t===t?t:0}var YFe=WFe,qFe=VFe,XFe=f1,sC=YFe;function ZFe(t){return function(e,r,n){return n&&typeof n!="number"&&XFe(e,r,n)&&(r=n=void 0),e=sC(e),r===void 0?(r=e,e=0):r=sC(r),n=n===void 0?e<r?1:-1:sC(n),qFe(e,r,n,t)}}var JFe=ZFe,eUe=JFe,tUe=eUe(),rUe=tUe;const ib=$t(rUe);function Lm(t){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(t)}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $U(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){ZW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZW(t,e,r){return e=nUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nUe(t){var e=iUe(t,"string");return Lm(e)=="symbol"?e:e+""}function iUe(t,e){if(Lm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sUe=["Webkit","Moz","O","ms"],aUe=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=sUe.reduce(function(s,a){return $U($U({},s),{},ZW({},a+n,r))},{});return i[e]=r,i};function qA(t){"@babel/helpers - typeof";return qA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qA(t)}function sb(){return sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sb.apply(this,arguments)}function QU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(r),!0).forEach(function(n){si(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eY(n.key),n)}}function lUe(t,e,r){return e&&HU(t.prototype,e),r&&HU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cUe(t,e,r){return e=ab(e),uUe(t,JW()?Reflect.construct(e,r||[],ab(t).constructor):e.apply(t,r))}function uUe(t,e){if(e&&(qA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dUe(t)}function dUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JW=function(){return!!t})()}function ab(t){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ab(t)}function AUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J_(t,e)}function J_(t,e){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},J_(t,e)}function si(t,e,r){return e=eY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eY(t){var e=fUe(t,"string");return qA(e)=="symbol"?e:e+""}function fUe(t,e){if(qA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hUe=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=up().domain(ib(0,l)).range([s,s+a-o]),d=u.domain().map(function(A){return u(A)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},KU=function(e){return e.changedTouches&&!!e.changedTouches.length},XA=function(t){function e(r){var n;return oUe(this,e),n=cUe(this,e,[r]),si(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),si(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),si(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),n.detachDragEndListener()}),si(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),si(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),si(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),si(n,"handleSlideDragStart",function(i){var s=KU(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return AUe(e,t),lUe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,a=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,d=u.length-1,A=Math.min(i,s),f=Math.max(i,s),h=e.getIndexInRange(a,A),m=e.getIndexInRange(a,f);return{startIndex:h-h%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=Ei(s[n],o,n);return ot(a)?a(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,u=l.x,d=l.width,A=l.travellerWidth,f=l.startIndex,h=l.endIndex,m=l.onChange,p=n.pageX-s;p>0?p=Math.min(p,u+d-A-o,u+d-A-a):p<0&&(p=Math.max(p,u-a,u-o));var g=this.getIndex({startX:a+p,endX:o+p});(g.startIndex!==f||g.endIndex!==h)&&m&&m(g),this.setState({startX:a+p,endX:o+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=KU(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[a],d=this.props,A=d.x,f=d.width,h=d.travellerWidth,m=d.onChange,p=d.gap,g=d.data,x={startX:this.state.startX,endX:this.state.endX},v=n.pageX-s;v>0?v=Math.min(v,A+f-h-u):v<0&&(v=Math.max(v,A-u)),x[a]=u+v;var y=this.getIndex(x),w=y.startIndex,b=y.endIndex,S=function(){var T=g.length-1;return a==="startX"&&(o>l?w%p===0:b%p===0)||o<l&&b===T||a==="endX"&&(o>l?b%p===0:w%p===0)||o>l&&b===T};this.setState(si(si({},a,u+v),"brushMoveStartX",n.pageX),function(){m&&S()&&m(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,u=a.endX,d=this.state[i],A=o.indexOf(d);if(A!==-1){var f=A+n;if(!(f===-1||f>=o.length)){var h=o[f];i==="startX"&&h>=u||i==="endX"&&h<=l||this.setState(si({},i,h),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.fill,u=n.stroke;return Q.createElement("rect",{stroke:u,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.data,u=n.children,d=n.padding,A=E.Children.only(u);return A?Q.cloneElement(A,{x:i,y:s,width:a,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,a,o=this,l=this.props,u=l.y,d=l.travellerWidth,A=l.height,f=l.traveller,h=l.ariaLabel,m=l.data,p=l.startIndex,g=l.endIndex,x=Math.max(n,this.props.x),v=aC(aC({},ft(this.props,!1)),{},{x,y:u,width:d,height:A}),y=h||"Min value: ".concat((s=m[p])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=m[g])===null||a===void 0?void 0:a.name);return Q.createElement(or,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),o.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,v))}},{key:"renderSlide",value:function(n,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,u=s.travellerWidth,d=Math.min(n,i)+u,A=Math.max(Math.abs(i-n)-u,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:a,width:A,height:o})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,a=n.y,o=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,A=d.startX,f=d.endX,h=5,m={pointerEvents:"none",fill:u};return Q.createElement(or,{className:"recharts-brush-texts"},Q.createElement(jy,sb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(A,f)-h,y:a+o/2},m),this.getTextOfTick(i)),Q.createElement(jy,sb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(A,f)+l+h,y:a+o/2},m),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,a=n.children,o=n.x,l=n.y,u=n.width,d=n.height,A=n.alwaysShowText,f=this.state,h=f.startX,m=f.endX,p=f.isTextActive,g=f.isSlideMoving,x=f.isTravellerMoving,v=f.isTravellerFocused;if(!i||!i.length||!we(o)||!we(l)||!we(u)||!we(d)||u<=0||d<=0)return null;var y=gt("recharts-brush",s),w=Q.Children.count(a)===1,b=aUe("userSelect","none");return Q.createElement(or,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(p||g||x||v||A)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,a=n.width,o=n.height,l=n.stroke,u=Math.floor(s+o/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),Q.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return Q.isValidElement(n)?s=Q.cloneElement(n,i):ot(n)?s=n(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,a=n.width,o=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,A=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return aC({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:a},s&&s.length?hUe({data:s,width:a,x:o,travellerWidth:l,startIndex:d,endIndex:A}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var f=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);n[l]>i?o=l:a=l}return i>=n[o]?o:a}}])}(E.PureComponent);si(XA,"displayName","Brush");si(XA,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var pUe=ZP;function mUe(t,e){var r;return pUe(t,function(n,i,s){return r=e(n,i,s),!r}),!!r}var gUe=mUe,xUe=t7,vUe=Uf,yUe=gUe,bUe=ei,wUe=f1;function EUe(t,e,r){var n=bUe(t)?xUe:yUe;return r&&wUe(t,e,r)&&(e=void 0),n(t,vUe(e))}var SUe=EUe;const CUe=$t(SUe);var ga=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},VU=w7;function TUe(t,e,r){e=="__proto__"&&VU?VU(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var BUe=TUe,_Ue=BUe,NUe=y7,IUe=Uf;function PUe(t,e){var r={};return e=IUe(e),NUe(t,function(n,i,s){_Ue(r,i,e(n,i,s))}),r}var RUe=PUe;const kUe=$t(RUe);function LUe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var jUe=LUe,MUe=ZP;function DUe(t,e){var r=!0;return MUe(t,function(n,i,s){return r=!!e(n,i,s),r}),r}var OUe=DUe,FUe=jUe,UUe=OUe,$Ue=Uf,QUe=ei,HUe=f1;function KUe(t,e,r){var n=QUe(t)?FUe:UUe;return r&&HUe(t,e,r)&&(e=void 0),n(t,$Ue(e))}var VUe=KUe;const GUe=$t(VUe);var zUe=["x","y"];function jm(t){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(t)}function eN(){return eN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eN.apply(this,arguments)}function GU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ph(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(r),!0).forEach(function(n){WUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WUe(t,e,r){return e=YUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YUe(t){var e=qUe(t,"string");return jm(e)=="symbol"?e:e+""}function qUe(t,e){if(jm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XUe(t,e){if(t==null)return{};var r=ZUe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ZUe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JUe(t,e){var r=t.x,n=t.y,i=XUe(t,zUe),s="".concat(r),a=parseInt(s,10),o="".concat(n),l=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),A="".concat(e.width||i.width),f=parseInt(A,10);return ph(ph(ph(ph(ph({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function zU(t){return Q.createElement(LFe,eN({shapeType:"rectangle",propTransformer:JUe,activeClassName:"recharts-active-bar"},t))}var e4e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var s=we(n)||uwe(n);return s?e(n,i):(s||Lu(),r)}},t4e=["value","background"],tY;function ZA(t){"@babel/helpers - typeof";return ZA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZA(t)}function r4e(t,e){if(t==null)return{};var r=n4e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function n4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ob(){return ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ob.apply(this,arguments)}function WU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(r),!0).forEach(function(n){wl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nY(n.key),n)}}function s4e(t,e,r){return e&&YU(t.prototype,e),r&&YU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a4e(t,e,r){return e=lb(e),o4e(t,rY()?Reflect.construct(e,r||[],lb(t).constructor):e.apply(t,r))}function o4e(t,e){if(e&&(ZA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l4e(t)}function l4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rY=function(){return!!t})()}function lb(t){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(t)}function c4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tN(t,e)}function tN(t,e){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tN(t,e)}function wl(t,e,r){return e=nY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nY(t){var e=u4e(t,"string");return ZA(e)=="symbol"?e:e+""}function u4e(t,e){if(ZA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ZA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sg=function(t){function e(){var r;i4e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=a4e(this,e,[].concat(i)),wl(r,"state",{isAnimationFinished:!1}),wl(r,"id",vg("recharts-bar-")),wl(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),wl(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return c4e(e,t),s4e(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,u=s.activeBar,d=ft(this.props,!1);return n&&n.map(function(A,f){var h=f===l,m=h?u:a,p=wr(wr(wr({},d),A),{},{isActive:h,option:m,index:f,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Q.createElement(or,ob({className:"recharts-bar-rectangle"},by(i.props,A,f),{key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(f)}),Q.createElement(zU,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,A=i.animationId,f=this.state.prevData;return Q.createElement(Co,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(A),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,p=s.map(function(g,x){var v=f&&f[x];if(v){var y=Mi(v.x,g.x),w=Mi(v.y,g.y),b=Mi(v.width,g.width),S=Mi(v.height,g.height);return wr(wr({},g),{},{x:y(m),y:w(m),width:b(m),height:S(m)})}if(a==="horizontal"){var C=Mi(0,g.height),T=C(m);return wr(wr({},g),{},{y:g.y+g.height-T,height:T})}var B=Mi(0,g.width),_=B(m);return wr(wr({},g),{},{width:_})});return Q.createElement(or,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!mm(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=ft(this.props.background,!1);return s.map(function(u,d){u.value;var A=u.background,f=r4e(u,t4e);if(!A)return null;var h=wr(wr(wr(wr(wr({},f),{},{fill:"#eee"},A),l),by(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return Q.createElement(zU,ob({key:"background-bar-".concat(d),option:n.props.background,isActive:d===o},h))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,u=s.layout,d=s.children,A=Ts(d,E1);if(!A)return null;var f=u==="vertical"?a[0].height/2:a[0].width/2,h=function(g,x){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:Ei(g,x)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return Q.createElement(or,m,A.map(function(p){return Q.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:a,xAxis:o,yAxis:l,layout:u,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,a=n.className,o=n.xAxis,l=n.yAxis,u=n.left,d=n.top,A=n.width,f=n.height,h=n.isAnimationActive,m=n.background,p=n.id;if(i||!s||!s.length)return null;var g=this.state.isAnimationFinished,x=gt("recharts-bar",a),v=o&&o.allowDataOverflow,y=l&&l.allowDataOverflow,w=v||y,b=ht(p)?this.id:p;return Q.createElement(or,{className:x},v||y?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(b)},Q.createElement("rect",{x:v?u:u-A/2,y:y?d:d-f/2,width:v?A:A*2,height:y?f:f*2}))):null,Q.createElement(or,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(b,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,b),(!h||g)&&Hl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(E.PureComponent);tY=Sg;wl(Sg,"displayName","Bar");wl(Sg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ao.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});wl(Sg,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,A=t.displayedData,f=t.offset,h=Oje(n,r);if(!h)return null;var m=e.layout,p=r.type.defaultProps,g=p!==void 0?wr(wr({},p),r.props):r.props,x=g.dataKey,v=g.children,y=g.minPointSize,w=m==="horizontal"?a:s,b=u?w.scale.domain():null,S=Gje({numericAxis:w}),C=Ts(v,N7),T=A.map(function(B,_){var I,L,N,R,M,k;u?I=Fje(u[d+_],b):(I=Ei(B,x),Array.isArray(I)||(I=[S,I]));var O=e4e(y,tY.defaultProps.minPointSize)(I[1],_);if(m==="horizontal"){var j,D=[a.scale(I[0]),a.scale(I[1])],F=D[0],$=D[1];L=WF({axis:s,ticks:o,bandSize:i,offset:h.offset,entry:B,index:_}),N=(j=$??F)!==null&&j!==void 0?j:void 0,R=h.size;var U=F-$;if(M=Number.isNaN(U)?0:U,k={x:L,y:a.y,width:R,height:a.height},Math.abs(O)>0&&Math.abs(M)<Math.abs(O)){var K=vs(M||O)*(Math.abs(O)-Math.abs(M));N-=K,M+=K}}else{var V=[s.scale(I[0]),s.scale(I[1])],q=V[0],H=V[1];if(L=q,N=WF({axis:a,ticks:l,bandSize:i,offset:h.offset,entry:B,index:_}),R=H-q,M=h.size,k={x:s.x,y:N,width:s.width,height:M},Math.abs(O)>0&&Math.abs(R)<Math.abs(O)){var z=vs(R||O)*(Math.abs(O)-Math.abs(R));R+=z}}return wr(wr(wr({},B),{},{x:L,y:N,width:R,height:M,value:u?I:I[1],payload:B,background:k},C&&C[_]&&C[_].props),{},{tooltipPayload:[DW(r,B)],tooltipPosition:{x:L+R/2,y:N+M/2}})});return wr({data:T,layout:m},f)});function Mm(t){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mm(t)}function d4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iY(n.key),n)}}function A4e(t,e,r){return e&&qU(t.prototype,e),r&&qU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ps(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(r),!0).forEach(function(n){T1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T1(t,e,r){return e=iY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iY(t){var e=f4e(t,"string");return Mm(e)=="symbol"?e:e+""}function f4e(t,e){if(Mm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Mm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h4e=function(e,r,n,i,s){var a=e.width,o=e.height,l=e.layout,u=e.children,d=Object.keys(r),A={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},f=!!li(u,Sg);return d.reduce(function(h,m){var p=r[m],g=p.orientation,x=p.domain,v=p.padding,y=v===void 0?{}:v,w=p.mirror,b=p.reversed,S="".concat(g).concat(w?"Mirror":""),C,T,B,_,I;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var L=x[1]-x[0],N=1/0,R=p.categoricalDomain.sort(fwe);if(R.forEach(function(V,q){q>0&&(N=Math.min((V||0)-(R[q-1]||0),N))}),Number.isFinite(N)){var M=N/L,k=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(C=M*k/2),p.padding==="no-gap"){var O=Pu(e.barCategoryGap,M*k),j=M*k/2;C=j-O-(j-O)/k*O}}}i==="xAxis"?T=[n.left+(y.left||0)+(C||0),n.left+n.width-(y.right||0)-(C||0)]:i==="yAxis"?T=l==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(C||0),n.top+n.height-(y.bottom||0)-(C||0)]:T=p.range,b&&(T=[T[1],T[0]]);var D=Mje(p,s,f),F=D.scale,$=D.realScaleType;F.domain(x).range(T),Dje(F);var U=Vje(F,ps(ps({},p),{},{realScaleType:$}));i==="xAxis"?(I=g==="top"&&!w||g==="bottom"&&w,B=n.left,_=A[S]-I*p.height):i==="yAxis"&&(I=g==="left"&&!w||g==="right"&&w,B=A[S]-I*p.width,_=n.top);var K=ps(ps(ps({},p),U),{},{realScaleType:$,x:B,y:_,scale:F,width:i==="xAxis"?n.width:p.width,height:i==="yAxis"?n.height:p.height});return K.bandSize=Yy(K,U),!p.hide&&i==="xAxis"?A[S]+=(I?-1:1)*K.height:p.hide||(A[S]+=(I?-1:1)*K.width),ps(ps({},h),{},T1({},m,K))},{})},sY=function(e,r){var n=e.x,i=e.y,s=r.x,a=r.y;return{x:Math.min(n,s),y:Math.min(i,a),width:Math.abs(s-n),height:Math.abs(a-i)}},p4e=function(e){var r=e.x1,n=e.y1,i=e.x2,s=e.y2;return sY({x:r,y:n},{x:i,y:s})},aY=function(){function t(e){d4e(this,t),this.scale=e}return A4e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();T1(aY,"EPS",1e-4);var _R=function(e){var r=Object.keys(e).reduce(function(n,i){return ps(ps({},n),{},T1({},i,aY.create(e[i])))},{});return ps(ps({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return kUe(i,function(l,u){return r[u].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return GUe(i,function(s,a){return r[a].isInRange(s)})}})};function m4e(t){return(t%180+180)%180}var g4e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=m4e(i),a=s*Math.PI/180,o=Math.atan(n/r),l=a>o&&a<Math.PI-o?n/Math.sin(a):r/Math.cos(a);return Math.abs(l)},x4e=hbe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),oY=E.createContext(void 0),lY=E.createContext(void 0),cY=E.createContext(void 0),v4e=E.createContext({}),uY=E.createContext(void 0),dY=E.createContext(0),AY=E.createContext(0),ZU=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,a=e.clipPathId,o=e.children,l=e.width,u=e.height,d=x4e(s);return Q.createElement(oY.Provider,{value:n},Q.createElement(lY.Provider,{value:i},Q.createElement(v4e.Provider,{value:s},Q.createElement(cY.Provider,{value:d},Q.createElement(uY.Provider,{value:a},Q.createElement(dY.Provider,{value:u},Q.createElement(AY.Provider,{value:l},o)))))))},y4e=function(){return E.useContext(uY)},fY=function(e){var r=E.useContext(oY);r==null&&Lu();var n=r[e];return n==null&&Lu(),n},hY=function(e){var r=E.useContext(lY);r==null&&Lu();var n=r[e];return n==null&&Lu(),n},b4e=function(){var e=E.useContext(cY);return e},pY=function(){return E.useContext(AY)},mY=function(){return E.useContext(dY)};function JA(t){"@babel/helpers - typeof";return JA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JA(t)}function w4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xY(n.key),n)}}function S4e(t,e,r){return e&&E4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function C4e(t,e,r){return e=cb(e),T4e(t,gY()?Reflect.construct(e,r||[],cb(t).constructor):e.apply(t,r))}function T4e(t,e){if(e&&(JA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B4e(t)}function B4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gY=function(){return!!t})()}function cb(t){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cb(t)}function _4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rN(t,e)}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rN(t,e)}function JU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(r),!0).forEach(function(n){NR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NR(t,e,r){return e=xY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xY(t){var e=N4e(t,"string");return JA(e)=="symbol"?e:e+""}function N4e(t,e){if(JA(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(JA(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I4e(t,e){return L4e(t)||k4e(t,e)||R4e(t,e)||P4e()}function P4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R4e(t,e){if(t){if(typeof t=="string")return t4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t4(t,e)}}function t4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function k4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function L4e(t){if(Array.isArray(t))return t}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nN.apply(this,arguments)}var j4e=function(e,r){var n;return Q.isValidElement(e)?n=Q.cloneElement(e,r):ot(e)?n=e(r):n=Q.createElement("line",nN({},r,{className:"recharts-reference-line-line"})),n},M4e=function(e,r,n,i,s,a,o,l,u){var d=s.x,A=s.y,f=s.width,h=s.height;if(n){var m=u.y,p=e.y.apply(m,{position:a});if(ga(u,"discard")&&!e.y.isInRange(p))return null;var g=[{x:d+f,y:p},{x:d,y:p}];return l==="left"?g.reverse():g}if(r){var x=u.x,v=e.x.apply(x,{position:a});if(ga(u,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:A+h},{x:v,y:A}];return o==="top"?y.reverse():y}if(i){var w=u.segment,b=w.map(function(S){return e.apply(S,{position:a})});return ga(u,"discard")&&CUe(b,function(S){return!e.isInRange(S)})?null:b}return null};function D4e(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,l=t.alwaysShow,u=y4e(),d=fY(i),A=hY(s),f=b4e();if(!u||!f)return null;lu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=_R({x:d.scale,y:A.scale}),m=Fr(e),p=Fr(r),g=n&&n.length===2,x=M4e(h,m,p,g,f,t.position,d.orientation,A.orientation,t);if(!x)return null;var v=I4e(x,2),y=v[0],w=y.x,b=y.y,S=v[1],C=S.x,T=S.y,B=ga(t,"hidden")?"url(#".concat(u,")"):void 0,_=e4(e4({clipPath:B},ft(t,!0)),{},{x1:w,y1:b,x2:C,y2:T});return Q.createElement(or,{className:gt("recharts-reference-line",o)},j4e(a,_),bn.renderCallByParent(t,p4e({x1:w,y1:b,x2:C,y2:T})))}var B1=function(t){function e(){return w4e(this,e),C4e(this,e,arguments)}return _4e(e,t),S4e(e,[{key:"render",value:function(){return Q.createElement(D4e,this.props)}}])}(Q.Component);NR(B1,"displayName","ReferenceLine");NR(B1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function iN(){return iN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iN.apply(this,arguments)}function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function r4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function n4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r4(Object(r),!0).forEach(function(n){_1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yY(n.key),n)}}function U4e(t,e,r){return e&&F4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $4e(t,e,r){return e=ub(e),Q4e(t,vY()?Reflect.construct(e,r||[],ub(t).constructor):e.apply(t,r))}function Q4e(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H4e(t)}function H4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vY=function(){return!!t})()}function ub(t){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ub(t)}function K4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sN(t,e)}function sN(t,e){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sN(t,e)}function _1(t,e,r){return e=yY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yY(t){var e=V4e(t,"string");return ef(e)=="symbol"?e:e+""}function V4e(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G4e=function(e){var r=e.x,n=e.y,i=e.xAxis,s=e.yAxis,a=_R({x:i.scale,y:s.scale}),o=a.apply({x:r,y:n},{bandAware:!0});return ga(e,"discard")&&!a.isInRange(o)?null:o},N1=function(t){function e(){return O4e(this,e),$4e(this,e,arguments)}return K4e(e,t),U4e(e,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,a=n.r,o=n.alwaysShow,l=n.clipPathId,u=Fr(i),d=Fr(s);if(lu(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var A=G4e(this.props);if(!A)return null;var f=A.x,h=A.y,m=this.props,p=m.shape,g=m.className,x=ga(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=n4(n4({clipPath:x},ft(this.props,!0)),{},{cx:f,cy:h});return Q.createElement(or,{className:gt("recharts-reference-dot",g)},e.renderDot(p,v),bn.renderCallByParent(this.props,{x:f-a,y:h-a,width:2*a,height:2*a}))}}])}(Q.Component);_1(N1,"displayName","ReferenceDot");_1(N1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_1(N1,"renderDot",function(t,e){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,e):ot(t)?r=t(e):r=Q.createElement(BR,iN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aN.apply(this,arguments)}function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function i4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function s4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(r),!0).forEach(function(n){I1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wY(n.key),n)}}function Y4e(t,e,r){return e&&W4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q4e(t,e,r){return e=db(e),X4e(t,bY()?Reflect.construct(e,r||[],db(t).constructor):e.apply(t,r))}function X4e(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z4e(t)}function Z4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bY=function(){return!!t})()}function db(t){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},db(t)}function J4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oN(t,e)}function oN(t,e){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oN(t,e)}function I1(t,e,r){return e=wY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wY(t){var e=e5e(t,"string");return tf(e)=="symbol"?e:e+""}function e5e(t,e){if(tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t5e=function(e,r,n,i,s){var a=s.x1,o=s.x2,l=s.y1,u=s.y2,d=s.xAxis,A=s.yAxis;if(!d||!A)return null;var f=_R({x:d.scale,y:A.scale}),h={x:e?f.x.apply(a,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:r?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return ga(s,"discard")&&(!f.isInRange(h)||!f.isInRange(m))?null:sY(h,m)},P1=function(t){function e(){return z4e(this,e),q4e(this,e,arguments)}return J4e(e,t),Y4e(e,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,a=n.y1,o=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;lu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=Fr(i),f=Fr(s),h=Fr(a),m=Fr(o),p=this.props.shape;if(!A&&!f&&!h&&!m&&!p)return null;var g=t5e(A,f,h,m,this.props);if(!g&&!p)return null;var x=ga(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Q.createElement(or,{className:gt("recharts-reference-area",l)},e.renderRect(p,s4(s4({clipPath:x},ft(this.props,!0)),g)),bn.renderCallByParent(this.props,g))}}])}(Q.Component);I1(P1,"displayName","ReferenceArea");I1(P1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});I1(P1,"renderRect",function(t,e){var r;return Q.isValidElement(t)?r=Q.cloneElement(t,e):ot(t)?r=t(e):r=Q.createElement(TR,aN({},e,{className:"recharts-reference-area-rect"})),r});function EY(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function r5e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return g4e(n,r)}function n5e(t,e,r){var n=r==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}function Ab(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-i)<=0}function i5e(t,e){return EY(t,e+1)}function s5e(t,e,r,n,i){for(var s=(n||[]).slice(),a=e.start,o=e.end,l=0,u=1,d=a,A=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:EY(n,u)};var p=l,g,x=function(){return g===void 0&&(g=r(m,p)),g},v=m.coordinate,y=l===0||Ab(t,v,x,d,o);y||(l=0,d=a,u+=1),y&&(d=v+t*(x()/2+i),l+=u)},f;u<=s.length;)if(f=A(),f)return f.v;return[]}function Dm(t){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(t)}function a4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(r),!0).forEach(function(n){a5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a5e(t,e,r){return e=o5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o5e(t){var e=l5e(t,"string");return Dm(e)=="symbol"?e:e+""}function l5e(t,e){if(Dm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c5e(t,e,r,n,i){for(var s=(n||[]).slice(),a=s.length,o=e.start,l=e.end,u=function(f){var h=s[f],m,p=function(){return m===void 0&&(m=r(h,f)),m};if(f===a-1){var g=t*(h.coordinate+t*p()/2-l);s[f]=h=gn(gn({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else s[f]=h=gn(gn({},h),{},{tickCoord:h.coordinate});var x=Ab(t,h.tickCoord,p,o,l);x&&(l=h.tickCoord-t*(p()/2+i),s[f]=gn(gn({},h),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function u5e(t,e,r,n,i,s){var a=(n||[]).slice(),o=a.length,l=e.start,u=e.end;if(s){var d=n[o-1],A=r(d,o-1),f=t*(d.coordinate+t*A/2-u);a[o-1]=d=gn(gn({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var h=Ab(t,d.tickCoord,function(){return A},l,u);h&&(u=d.tickCoord-t*(A/2+i),a[o-1]=gn(gn({},d),{},{isShow:!0}))}for(var m=s?o-1:o,p=function(v){var y=a[v],w,b=function(){return w===void 0&&(w=r(y,v)),w};if(v===0){var S=t*(y.coordinate-t*b()/2-l);a[v]=y=gn(gn({},y),{},{tickCoord:S<0?y.coordinate-S*t:y.coordinate})}else a[v]=y=gn(gn({},y),{},{tickCoord:y.coordinate});var C=Ab(t,y.tickCoord,b,l,u);C&&(l=y.tickCoord+t*(b()/2+i),a[v]=gn(gn({},y),{},{isShow:!0}))},g=0;g<m;g++)p(g);return a}function d5e(t,e,r){var n=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,d=t.unit,A=t.angle;if(!i||!i.length||!n)return[];if(we(l)||ao.isSsr)return i5e(i,typeof l=="number"&&we(l)?l:0);var f=[],h=o==="top"||o==="bottom"?"width":"height",m=d&&h==="width"?cp(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},p=function(y,w){var b=ot(u)?u(y.value,w):y.value;return h==="width"?r5e(cp(b,{fontSize:e,letterSpacing:r}),m,A):cp(b,{fontSize:e,letterSpacing:r})[h]},g=i.length>=2?vs(i[1].coordinate-i[0].coordinate):1,x=n5e(s,g,h);return l==="equidistantPreserveStart"?s5e(g,x,p,i,a):(l==="preserveStart"||l==="preserveStartEnd"?f=u5e(g,x,p,i,a,l==="preserveStartEnd"):f=c5e(g,x,p,i,a),f.filter(function(v){return v.isShow}))}var A5e=["viewBox"],f5e=["viewBox"],h5e=["ticks"];function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dd.apply(this,arguments)}function o4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ir(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o4(Object(r),!0).forEach(function(n){IR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oC(t,e){if(t==null)return{};var r=p5e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function m5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CY(n.key),n)}}function g5e(t,e,r){return e&&l4(t.prototype,e),r&&l4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function x5e(t,e,r){return e=fb(e),v5e(t,SY()?Reflect.construct(e,r||[],fb(t).constructor):e.apply(t,r))}function v5e(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y5e(t)}function y5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SY=function(){return!!t})()}function fb(t){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fb(t)}function b5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lN(t,e)}function lN(t,e){return lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lN(t,e)}function IR(t,e,r){return e=CY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CY(t){var e=w5e(t,"string");return rf(e)=="symbol"?e:e+""}function w5e(t,e){if(rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R1=function(t){function e(r){var n;return m5e(this,e),n=x5e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return b5e(e,t),g5e(e,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,a=oC(n,A5e),o=this.props,l=o.viewBox,u=oC(o,f5e);return!nA(s,l)||!nA(a,u)||!nA(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,u=i.orientation,d=i.tickSize,A=i.mirror,f=i.tickMargin,h,m,p,g,x,v,y=A?-1:1,w=n.tickSize||d,b=we(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=m=n.coordinate,g=a+ +!A*l,p=g-y*w,v=p-y*f,x=b;break;case"left":p=g=n.coordinate,m=s+ +!A*o,h=m-y*w,x=h-y*f,v=b;break;case"right":p=g=n.coordinate,m=s+ +A*o,h=m+y*w,x=h+y*f,v=b;break;default:h=m=n.coordinate,g=a+ +A*l,p=g+y*w,v=p+y*f,x=b;break}return{line:{x1:h,y1:p,x2:m,y2:g},tick:{x,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,o=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,A=Ir(Ir(Ir({},ft(this.props,!1)),ft(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);A=Ir(Ir({},A),{},{x1:i,y1:s+f*o,x2:i+a,y2:s+f*o})}else{var h=+(l==="left"&&!u||l==="right"&&u);A=Ir(Ir({},A),{},{x1:i+h*a,y1:s,x2:i+h*a,y2:s+o})}return Q.createElement("line",Dd({},A,{className:gt("recharts-cartesian-axis-line",Ki(d,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var a=this,o=this.props,l=o.tickLine,u=o.stroke,d=o.tick,A=o.tickFormatter,f=o.unit,h=d5e(Ir(Ir({},this.props),{},{ticks:n}),i,s),m=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=ft(this.props,!1),x=ft(d,!1),v=Ir(Ir({},g),{},{fill:"none"},ft(l,!1)),y=h.map(function(w,b){var S=a.getTickLineCoord(w),C=S.line,T=S.tick,B=Ir(Ir(Ir(Ir({textAnchor:m,verticalAnchor:p},g),{},{stroke:"none",fill:u},x),T),{},{index:b,payload:w,visibleTicksCount:h.length,tickFormatter:A});return Q.createElement(or,Dd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},by(a.props,w,b)),l&&Q.createElement("line",Dd({},v,C,{className:gt("recharts-cartesian-axis-tick-line",Ki(l,"className"))})),d&&e.renderTickItem(d,B,"".concat(ot(A)?A(w.value,b):w.value).concat(f||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var A=this.props,f=A.ticks,h=oC(A,h5e),m=f;return ot(l)&&(m=f&&f.length>0?l(this.props):l(h)),a<=0||o<=0||!m||!m.length?null:Q.createElement(or,{className:gt("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),bn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var a,o=gt(i.className,"recharts-cartesian-axis-tick-value");return Q.isValidElement(n)?a=Q.cloneElement(n,Ir(Ir({},i),{},{className:o})):ot(n)?a=n(Ir(Ir({},i),{},{className:o})):a=Q.createElement(jy,Dd({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(E.Component);IR(R1,"displayName","CartesianAxis");IR(R1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var E5e=["layout","type","stroke","connectNulls","isRange","ref"],S5e=["key"],TY;function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function BY(t,e){if(t==null)return{};var r=C5e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gc.apply(this,arguments)}function c4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(r),!0).forEach(function(n){la(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NY(n.key),n)}}function B5e(t,e,r){return e&&u4(t.prototype,e),r&&u4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _5e(t,e,r){return e=hb(e),N5e(t,_Y()?Reflect.construct(e,r||[],hb(t).constructor):e.apply(t,r))}function N5e(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I5e(t)}function I5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_Y=function(){return!!t})()}function hb(t){return hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hb(t)}function P5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cN(t,e)}function cN(t,e){return cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cN(t,e)}function la(t,e,r){return e=NY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NY(t){var e=R5e(t,"string");return nf(e)=="symbol"?e:e+""}function R5e(t,e){if(nf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fc=function(t){function e(){var r;T5e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=_5e(this,e,[].concat(i)),la(r,"state",{isAnimationFinished:!0}),la(r,"id",vg("recharts-area-")),la(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ot(a)&&a()}),la(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ot(a)&&a()}),r}return P5e(e,t),B5e(e,[{key:"renderDots",value:function(n,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var l=this.props,u=l.dot,d=l.points,A=l.dataKey,f=ft(this.props,!1),h=ft(u,!0),m=d.map(function(g,x){var v=Xo(Xo(Xo({key:"dot-".concat(x),r:3},f),h),{},{index:x,cx:g.x,cy:g.y,dataKey:A,value:g.value,payload:g.payload,points:d});return e.renderDotItem(u,v)}),p={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Q.createElement(or,Gc({className:"recharts-area-dots"},p),m)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].x,u=a[a.length-1].x,d=n*Math.abs(l-u),A=bl(a.map(function(f){return f.y||0}));return we(s)&&typeof s=="number"?A=Math.max(s,A):s&&Array.isArray(s)&&s.length&&(A=Math.max(bl(s.map(function(f){return f.y||0})),A)),we(A)?Q.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(A+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].y,u=a[a.length-1].y,d=n*Math.abs(l-u),A=bl(a.map(function(f){return f.x||0}));return we(s)&&typeof s=="number"?A=Math.max(s,A):s&&Array.isArray(s)&&s.length&&(A=Math.max(bl(s.map(function(f){return f.x||0})),A)),we(A)?Q.createElement("rect",{x:0,y:l<u?l:l-d,width:A+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,s,a){var o=this.props,l=o.layout,u=o.type,d=o.stroke,A=o.connectNulls,f=o.isRange;o.ref;var h=BY(o,E5e);return Q.createElement(or,{clipPath:s?"url(#clipPath-".concat(a,")"):null},Q.createElement(Ap,Gc({},ft(h,!0),{points:n,connectNulls:A,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&Q.createElement(Ap,Gc({},ft(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:A,fill:"none",points:n})),d!=="none"&&f&&Q.createElement(Ap,Gc({},ft(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:A,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var s=this,a=this.props,o=a.points,l=a.baseLine,u=a.isAnimationActive,d=a.animationBegin,A=a.animationDuration,f=a.animationEasing,h=a.animationId,m=this.state,p=m.prevPoints,g=m.prevBaseLine;return Q.createElement(Co,{begin:d,duration:A,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t;if(p){var y=p.length/o.length,w=o.map(function(T,B){var _=Math.floor(B*y);if(p[_]){var I=p[_],L=Mi(I.x,T.x),N=Mi(I.y,T.y);return Xo(Xo({},T),{},{x:L(v),y:N(v)})}return T}),b;if(we(l)&&typeof l=="number"){var S=Mi(g,l);b=S(v)}else if(ht(l)||Mf(l)){var C=Mi(g,0);b=C(v)}else b=l.map(function(T,B){var _=Math.floor(B*y);if(g[_]){var I=g[_],L=Mi(I.x,T.x),N=Mi(I.y,T.y);return Xo(Xo({},T),{},{x:L(v),y:N(v)})}return T});return s.renderAreaStatically(w,b,n,i)}return Q.createElement(or,null,Q.createElement("defs",null,Q.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(v))),Q.createElement(or,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,l,n,i)))})}},{key:"renderArea",value:function(n,i){var s=this.props,a=s.points,o=s.baseLine,l=s.isAnimationActive,u=this.state,d=u.prevPoints,A=u.prevBaseLine,f=u.totalLength;return l&&a&&a.length&&(!d&&f>0||!mm(d,a)||!mm(A,o))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(a,o,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,u=i.top,d=i.left,A=i.xAxis,f=i.yAxis,h=i.width,m=i.height,p=i.isAnimationActive,g=i.id;if(s||!o||!o.length)return null;var x=this.state.isAnimationFinished,v=o.length===1,y=gt("recharts-area",l),w=A&&A.allowDataOverflow,b=f&&f.allowDataOverflow,S=w||b,C=ht(g)?this.id:g,T=(n=ft(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},B=T.r,_=B===void 0?3:B,I=T.strokeWidth,L=I===void 0?2:I,N=wwe(a)?a:{},R=N.clipDot,M=R===void 0?!0:R,k=_*2+L;return Q.createElement(or,{className:y},w||b?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(C)},Q.createElement("rect",{x:w?d:d-h/2,y:b?u:u-m/2,width:w?h:h*2,height:b?m:m*2})),!M&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(C)},Q.createElement("rect",{x:d-k/2,y:u-k/2,width:h+k,height:m+k}))):null,v?null:this.renderArea(S,C),(a||v)&&this.renderDots(S,M,C),(!p||x)&&Hl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(E.PureComponent);TY=fc;la(fc,"displayName","Area");la(fc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ao.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});la(fc,"getBaseValue",function(t,e,r,n){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(we(o)&&typeof o=="number")return o;var l=i==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),A=Math.min(u[0],u[1]);return o==="dataMin"?A:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});la(fc,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,l=t.dataKey,u=t.stackedData,d=t.dataStartIndex,A=t.displayedData,f=t.offset,h=e.layout,m=u&&u.length,p=TY.getBaseValue(e,r,n,i),g=h==="horizontal",x=!1,v=A.map(function(w,b){var S;m?S=u[d+b]:(S=Ei(w,l),Array.isArray(S)?x=!0:S=[p,S]);var C=S[1]==null||m&&Ei(w,l)==null;return g?{x:zF({axis:n,ticks:s,bandSize:o,entry:w,index:b}),y:C?null:i.scale(S[1]),value:S,payload:w}:{x:C?null:n.scale(S[1]),y:zF({axis:i,ticks:a,bandSize:o,entry:w,index:b}),value:S,payload:w}}),y;return m||x?y=v.map(function(w){var b=Array.isArray(w.value)?w.value[0]:null;return g?{x:w.x,y:b!=null&&w.y!=null?i.scale(b):null}:{x:b!=null?n.scale(b):null,y:w.y}}):y=g?i.scale(p):n.scale(p),Xo({points:v,baseLine:y,layout:h,isRange:x},f)});la(fc,"renderDotItem",function(t,e){var r;if(Q.isValidElement(t))r=Q.cloneElement(t,e);else if(ot(t))r=t(e);else{var n=gt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=BY(e,S5e);r=Q.createElement(BR,Gc({},s,{key:i,className:n}))}return r});function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function k5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RY(n.key),n)}}function j5e(t,e,r){return e&&L5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function M5e(t,e,r){return e=pb(e),D5e(t,IY()?Reflect.construct(e,r||[],pb(t).constructor):e.apply(t,r))}function D5e(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O5e(t)}function O5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IY=function(){return!!t})()}function pb(t){return pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pb(t)}function F5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uN(t,e)}function uN(t,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uN(t,e)}function PY(t,e,r){return e=RY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RY(t){var e=U5e(t,"string");return sf(e)=="symbol"?e:e+""}function U5e(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dN(){return dN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dN.apply(this,arguments)}function $5e(t){var e=t.xAxisId,r=pY(),n=mY(),i=fY(e);return i==null?null:E.createElement(R1,dN({},i,{className:gt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return Vc(a,!0)}}))}var k1=function(t){function e(){return k5e(this,e),M5e(this,e,arguments)}return F5e(e,t),j5e(e,[{key:"render",value:function(){return E.createElement($5e,this.props)}}])}(E.Component);PY(k1,"displayName","XAxis");PY(k1,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function Q5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jY(n.key),n)}}function K5e(t,e,r){return e&&H5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function V5e(t,e,r){return e=mb(e),G5e(t,kY()?Reflect.construct(e,r||[],mb(t).constructor):e.apply(t,r))}function G5e(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z5e(t)}function z5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kY=function(){return!!t})()}function mb(t){return mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mb(t)}function W5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AN(t,e)}function AN(t,e){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},AN(t,e)}function LY(t,e,r){return e=jY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jY(t){var e=Y5e(t,"string");return af(e)=="symbol"?e:e+""}function Y5e(t,e){if(af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fN.apply(this,arguments)}var q5e=function(e){var r=e.yAxisId,n=pY(),i=mY(),s=hY(r);return s==null?null:E.createElement(R1,fN({},s,{className:gt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return Vc(o,!0)}}))},L1=function(t){function e(){return Q5e(this,e),V5e(this,e,arguments)}return W5e(e,t),K5e(e,[{key:"render",value:function(){return E.createElement(q5e,this.props)}}])}(E.Component);LY(L1,"displayName","YAxis");LY(L1,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function d4(t){return e3e(t)||J5e(t)||Z5e(t)||X5e()}function X5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z5e(t,e){if(t){if(typeof t=="string")return hN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hN(t,e)}}function J5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e3e(t){if(Array.isArray(t))return hN(t)}function hN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pN=function(e,r,n,i,s){var a=Ts(e,B1),o=Ts(e,N1),l=[].concat(d4(a),d4(o)),u=Ts(e,P1),d="".concat(i,"Id"),A=i[0],f=r;if(l.length&&(f=l.reduce(function(p,g){if(g.props[d]===n&&ga(g.props,"extendDomain")&&we(g.props[A])){var x=g.props[A];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},f)),u.length){var h="".concat(A,"1"),m="".concat(A,"2");f=u.reduce(function(p,g){if(g.props[d]===n&&ga(g.props,"extendDomain")&&we(g.props[h])&&we(g.props[m])){var x=g.props[h],v=g.props[m];return[Math.min(p[0],x,v),Math.max(p[1],x,v)]}return p},f)}return s&&s.length&&(f=s.reduce(function(p,g){return we(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},f)),f},MY={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,A,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,A||l,f),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,A;if(this._eventsCount===0)return u;for(A in d=this._events)e.call(d,A)&&u.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,A=this._events[d];if(!A)return[];if(A.fn)return[A.fn];for(var f=0,h=A.length,m=new Array(h);f<h;f++)m[f]=A[f].fn;return m},o.prototype.listenerCount=function(u){var d=r?r+u:u,A=this._events[d];return A?A.fn?1:A.length:0},o.prototype.emit=function(u,d,A,f,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,v,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,A),!0;case 4:return g.fn.call(g.context,d,A,f),!0;case 5:return g.fn.call(g.context,d,A,f,h),!0;case 6:return g.fn.call(g.context,d,A,f,h,m),!0}for(y=1,v=new Array(x-1);y<x;y++)v[y-1]=arguments[y];g.fn.apply(g.context,v)}else{var w=g.length,b;for(y=0;y<w;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),x){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,d);break;case 3:g[y].fn.call(g[y].context,d,A);break;case 4:g[y].fn.call(g[y].context,d,A,f);break;default:if(!v)for(b=1,v=new Array(x-1);b<x;b++)v[b-1]=arguments[b];g[y].fn.apply(g[y].context,v)}}return!0},o.prototype.on=function(u,d,A){return s(this,u,d,A,!1)},o.prototype.once=function(u,d,A){return s(this,u,d,A,!0)},o.prototype.removeListener=function(u,d,A,f){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return a(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!f||m.once)&&(!A||m.context===A)&&a(this,h);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||f&&!m[p].once||A&&m[p].context!==A)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(MY);var t3e=MY.exports;const r3e=$t(t3e);var lC=new r3e,cC="recharts.syncMouseEvents";function Om(t){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Om(t)}function n3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DY(n.key),n)}}function s3e(t,e,r){return e&&i3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uC(t,e,r){return e=DY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DY(t){var e=a3e(t,"string");return Om(e)=="symbol"?e:e+""}function a3e(t,e){if(Om(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Om(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var o3e=function(){function t(){n3e(this,t),uC(this,"activeIndex",0),uC(this,"coordinateList",[]),uC(this,"layout","horizontal")}return s3e(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,a=r.container,o=a===void 0?null:a,l=r.layout,u=l===void 0?null:l,d=r.offset,A=d===void 0?null:d,f=r.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=A??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,A=s+l+u,f=a+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:A,pageY:f})}}}])}();function l3e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&we(n)&&we(i))return!0}return!1}function c3e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function OY(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,s=t.endAngle,a=an(e,r,n,i),o=an(e,r,n,s);return{points:[a,o],cx:e,cy:r,radius:n,startAngle:i,endAngle:s}}function u3e(t,e,r){var n,i,s,a;if(t==="horizontal")n=e.x,s=n,i=r.top,a=r.top+r.height;else if(t==="vertical")i=e.y,a=i,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,d=e.outerRadius,A=e.angle,f=an(o,l,u,A),h=an(o,l,d,A);n=f.x,i=f.y,s=h.x,a=h.y}else return OY(e);return[{x:n,y:i},{x:s,y:a}]}function Fm(t){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fm(t)}function A4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function O0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A4(Object(r),!0).forEach(function(n){d3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d3e(t,e,r){return e=A3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A3e(t){var e=f3e(t,"string");return Fm(e)=="symbol"?e:e+""}function f3e(t,e){if(Fm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h3e(t){var e,r,n=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,A=t.layout,f=t.chartName,h=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!s||!a||f!=="ScatterChart"&&i!=="axis")return null;var m,p=Ap;if(f==="ScatterChart")m=a,p=WOe;else if(f==="BarChart")m=c3e(A,a,l,d),p=TR;else if(A==="radial"){var g=OY(a),x=g.cx,v=g.cy,y=g.radius,w=g.startAngle,b=g.endAngle;m={cx:x,cy:v,startAngle:w,endAngle:b,innerRadius:y,outerRadius:y},p=UW}else m={points:u3e(A,a,l)},p=Ap;var S=O0(O0(O0(O0({stroke:"#ccc",pointerEvents:"none"},l),m),ft(h,!1)),{},{payload:o,payloadIndex:u,className:gt("recharts-tooltip-cursor",h.className)});return E.isValidElement(h)?E.cloneElement(h,S):E.createElement(p,S)}var p3e=["item"],m3e=["children","className","width","height","style","compact","title","desc"];function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Od.apply(this,arguments)}function f4(t,e){return v3e(t)||x3e(t,e)||UY(t,e)||g3e()}function g3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function v3e(t){if(Array.isArray(t))return t}function h4(t,e){if(t==null)return{};var r=y3e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function b3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Y(n.key),n)}}function E3e(t,e,r){return e&&w3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S3e(t,e,r){return e=gb(e),C3e(t,FY()?Reflect.construct(e,r||[],gb(t).constructor):e.apply(t,r))}function C3e(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T3e(t)}function T3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FY=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gb(t)}function B3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mN(t,e)}function mN(t,e){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mN(t,e)}function lf(t){return I3e(t)||N3e(t)||UY(t)||_3e()}function _3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UY(t,e){if(t){if(typeof t=="string")return gN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gN(t,e)}}function N3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I3e(t){if(Array.isArray(t))return gN(t)}function gN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ie(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p4(Object(r),!0).forEach(function(n){Ve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ve(t,e,r){return e=$Y(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Y(t){var e=P3e(t,"string");return of(e)=="symbol"?e:e+""}function P3e(t,e){if(of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R3e={xAxis:["bottom","top"],yAxis:["left","right"]},k3e={width:"100%",height:"100%"},QY={x:0,y:0};function F0(t){return t}var L3e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},j3e=function(e,r,n,i){var s=r.find(function(d){return d&&d.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return ie(ie(ie({},i),an(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,u=i.angle;return ie(ie(ie({},i),an(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return QY},j1=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,a=(n??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(lf(o),lf(u)):o},[]);return a.length>0?a:e&&e.length&&we(i)&&we(s)?e.slice(i,s+1):[]};function HY(t){return t==="number"?[0,"auto"]:void 0}var xN=function(e,r,n,i){var s=e.graphicalItems,a=e.tooltipAxis,o=j1(r,e);return n<0||!s||!s.length||n>=o.length?null:s.reduce(function(l,u){var d,A=(d=u.props.data)!==null&&d!==void 0?d:r;A&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(A=A.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(a.dataKey&&!a.allowDuplicatedCategory){var h=A===void 0?o:A;f=vy(h,a.dataKey,i)}else f=A&&A[n]||o[n];return f?[].concat(lf(l),[DW(u,f)]):l},[])},m4=function(e,r,n,i){var s=i||{x:e.chartX,y:e.chartY},a=L3e(s,n),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,d=Ije(a,o,u,l);if(d>=0&&u){var A=u[d]&&u[d].value,f=xN(e,r,d,A),h=j3e(n,o,d,s);return{activeTooltipIndex:d,activeLabel:A,activePayload:f,activeCoordinate:h}}return null},M3e=function(e,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,a=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,A=e.children,f=e.stackOffset,h=jW(d,s);return n.reduce(function(m,p){var g,x=p.type.defaultProps!==void 0?ie(ie({},p.type.defaultProps),p.props):p.props,v=x.type,y=x.dataKey,w=x.allowDataOverflow,b=x.allowDuplicatedCategory,S=x.scale,C=x.ticks,T=x.includeHidden,B=x[a];if(m[B])return m;var _=j1(e.data,{graphicalItems:i.filter(function(U){var K,V=a in U.props?U.props[a]:(K=U.type.defaultProps)===null||K===void 0?void 0:K[a];return V===B}),dataStartIndex:l,dataEndIndex:u}),I=_.length,L,N,R;l3e(x.domain,w,v)&&(L=D_(x.domain,null,w),h&&(v==="number"||S!=="auto")&&(R=dp(_,y,"category")));var M=HY(v);if(!L||L.length===0){var k,O=(k=x.domain)!==null&&k!==void 0?k:M;if(y){if(L=dp(_,y,v),v==="category"&&h){var j=Awe(L);b&&j?(N=L,L=ib(0,I)):b||(L=XF(O,L,p).reduce(function(U,K){return U.indexOf(K)>=0?U:[].concat(lf(U),[K])},[]))}else if(v==="category")b?L=L.filter(function(U){return U!==""&&!ht(U)}):L=XF(O,L,p).reduce(function(U,K){return U.indexOf(K)>=0||K===""||ht(K)?U:[].concat(lf(U),[K])},[]);else if(v==="number"){var D=jje(_,i.filter(function(U){var K,V,q=a in U.props?U.props[a]:(K=U.type.defaultProps)===null||K===void 0?void 0:K[a],H="hide"in U.props?U.props.hide:(V=U.type.defaultProps)===null||V===void 0?void 0:V.hide;return q===B&&(T||!H)}),y,s,d);D&&(L=D)}h&&(v==="number"||S!=="auto")&&(R=dp(_,y,"category"))}else h?L=ib(0,I):o&&o[B]&&o[B].hasStack&&v==="number"?L=f==="expand"?[0,1]:MW(o[B].stackGroups,l,u):L=LW(_,i.filter(function(U){var K=a in U.props?U.props[a]:U.type.defaultProps[a],V="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return K===B&&(T||!V)}),v,d,!0);if(v==="number")L=pN(A,L,B,s,C),O&&(L=D_(O,L,w));else if(v==="category"&&O){var F=O,$=L.every(function(U){return F.indexOf(U)>=0});$&&(L=F)}}return ie(ie({},m),{},Ve({},B,ie(ie({},x),{},{axisType:s,domain:L,categoricalDomain:R,duplicateDomain:N,originalDomain:(g=x.domain)!==null&&g!==void 0?g:M,isCategorical:h,layout:d})))},{})},D3e=function(e,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,a=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,A=e.children,f=j1(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),h=f.length,m=jW(d,s),p=-1;return n.reduce(function(g,x){var v=x.type.defaultProps!==void 0?ie(ie({},x.type.defaultProps),x.props):x.props,y=v[a],w=HY("number");if(!g[y]){p++;var b;return m?b=ib(0,h):o&&o[y]&&o[y].hasStack?(b=MW(o[y].stackGroups,l,u),b=pN(A,b,y,s)):(b=D_(w,LW(f,n.filter(function(S){var C,T,B=a in S.props?S.props[a]:(C=S.type.defaultProps)===null||C===void 0?void 0:C[a],_="hide"in S.props?S.props.hide:(T=S.type.defaultProps)===null||T===void 0?void 0:T.hide;return B===y&&!_}),"number",d),i.defaultProps.allowDataOverflow),b=pN(A,b,y,s)),ie(ie({},g),{},Ve({},y,ie(ie({axisType:s},i.defaultProps),{},{hide:!0,orientation:Ki(R3e,"".concat(s,".").concat(p%2),null),domain:b,originalDomain:w,isCategorical:m,layout:d})))}return g},{})},O3e=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,a=r.graphicalItems,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.children,A="".concat(i,"Id"),f=Ts(d,s),h={};return f&&f.length?h=M3e(e,{axes:f,graphicalItems:a,axisType:i,axisIdKey:A,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):a&&a.length&&(h=D3e(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:A,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),h},F3e=function(e){var r=vd(e),n=Vc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:JP(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Yy(r,n)}},g4=function(e){var r=e.children,n=e.defaultShowTooltip,i=li(r,XA),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},U3e=function(e){return!e||!e.length?!1:e.some(function(r){var n=so(r&&r.type);return n&&n.indexOf("Bar")>=0})},x4=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$3e=function(e,r){var n=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,l=o===void 0?{}:o,u=n.width,d=n.height,A=n.children,f=n.margin||{},h=li(A,XA),m=li(A,iA),p=Object.keys(l).reduce(function(b,S){var C=l[S],T=C.orientation;return!C.mirror&&!C.hide?ie(ie({},b),{},Ve({},T,b[T]+C.width)):b},{left:f.left||0,right:f.right||0}),g=Object.keys(a).reduce(function(b,S){var C=a[S],T=C.orientation;return!C.mirror&&!C.hide?ie(ie({},b),{},Ve({},T,Ki(b,"".concat(T))+C.height)):b},{top:f.top||0,bottom:f.bottom||0}),x=ie(ie({},g),p),v=x.bottom;h&&(x.bottom+=h.props.height||XA.defaultProps.height),m&&r&&(x=kje(x,i,n,r));var y=u-x.left-x.right,w=d-x.top-x.bottom;return ie(ie({brushBottom:v},x),{},{width:Math.max(y,0),height:Math.max(w,0)})},Q3e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},H3e=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,A=e.defaultProps,f=function(x,v){var y=v.graphicalItems,w=v.stackGroups,b=v.offset,S=v.updateId,C=v.dataStartIndex,T=v.dataEndIndex,B=x.barSize,_=x.layout,I=x.barGap,L=x.barCategoryGap,N=x.maxBarSize,R=x4(_),M=R.numericAxisName,k=R.cateAxisName,O=U3e(y),j=[];return y.forEach(function(D,F){var $=j1(x.data,{graphicalItems:[D],dataStartIndex:C,dataEndIndex:T}),U=D.type.defaultProps!==void 0?ie(ie({},D.type.defaultProps),D.props):D.props,K=U.dataKey,V=U.maxBarSize,q=U["".concat(M,"Id")],H=U["".concat(k,"Id")],z={},ae=l.reduce(function(it,Ce){var Qe=v["".concat(Ce.axisType,"Map")],me=U["".concat(Ce.axisType,"Id")];Qe&&Qe[me]||Ce.axisType==="zAxis"||Lu();var Pe=Qe[me];return ie(ie({},it),{},Ve(Ve({},Ce.axisType,Pe),"".concat(Ce.axisType,"Ticks"),Vc(Pe)))},z),X=ae[k],ne=ae["".concat(k,"Ticks")],ee=w&&w[q]&&w[q].hasStack&&zje(D,w[q].stackGroups),G=so(D.type).indexOf("Bar")>=0,ge=Yy(X,ne),ye=[],Me=O&&Pje({barSize:B,stackGroups:w,totalSize:Q3e(ae,k)});if(G){var ce,Be,_e=ht(V)?N:V,He=(ce=(Be=Yy(X,ne,!0))!==null&&Be!==void 0?Be:_e)!==null&&ce!==void 0?ce:0;ye=Rje({barGap:I,barCategoryGap:L,bandSize:He!==ge?He:ge,sizeList:Me[H],maxBarSize:_e}),He!==ge&&(ye=ye.map(function(it){return ie(ie({},it),{},{position:ie(ie({},it.position),{},{offset:it.position.offset-He/2})})}))}var Se=D&&D.type&&D.type.getComposedData;Se&&j.push({props:ie(ie({},Se(ie(ie({},ae),{},{displayedData:$,props:x,dataKey:K,item:D,bandSize:ge,barPosition:ye,offset:b,stackedData:ee,layout:_,dataStartIndex:C,dataEndIndex:T}))),{},Ve(Ve(Ve({key:D.key||"item-".concat(F)},M,ae[M]),k,ae[k]),"animationId",S)),childIndex:Cwe(D,x.children),item:D})}),j},h=function(x,v){var y=x.props,w=x.dataStartIndex,b=x.dataEndIndex,S=x.updateId;if(!KD({props:y}))return null;var C=y.children,T=y.layout,B=y.stackOffset,_=y.data,I=y.reverseStackOrder,L=x4(T),N=L.numericAxisName,R=L.cateAxisName,M=Ts(C,n),k=Kje(_,M,"".concat(N,"Id"),"".concat(R,"Id"),B,I),O=l.reduce(function(U,K){var V="".concat(K.axisType,"Map");return ie(ie({},U),{},Ve({},V,O3e(y,ie(ie({},K),{},{graphicalItems:M,stackGroups:K.axisType===N&&k,dataStartIndex:w,dataEndIndex:b}))))},{}),j=$3e(ie(ie({},O),{},{props:y,graphicalItems:M}),v==null?void 0:v.legendBBox);Object.keys(O).forEach(function(U){O[U]=d(y,O[U],j,U.replace("Map",""),r)});var D=O["".concat(R,"Map")],F=F3e(D),$=f(y,ie(ie({},O),{},{dataStartIndex:w,dataEndIndex:b,updateId:S,graphicalItems:M,stackGroups:k,offset:j}));return ie(ie({formattedGraphicalItems:$,graphicalItems:M,offset:j,stackGroups:k},F),O)},m=function(g){function x(v){var y,w,b;return b3e(this,x),b=S3e(this,x,[v]),Ve(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ve(b,"accessibilityManager",new o3e),Ve(b,"handleLegendBBoxUpdate",function(S){if(S){var C=b.state,T=C.dataStartIndex,B=C.dataEndIndex,_=C.updateId;b.setState(ie({legendBBox:S},h({props:b.props,dataStartIndex:T,dataEndIndex:B,updateId:_},ie(ie({},b.state),{},{legendBBox:S}))))}}),Ve(b,"handleReceiveSyncEvent",function(S,C,T){if(b.props.syncId===S){if(T===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(C)}}),Ve(b,"handleBrushChange",function(S){var C=S.startIndex,T=S.endIndex;if(C!==b.state.dataStartIndex||T!==b.state.dataEndIndex){var B=b.state.updateId;b.setState(function(){return ie({dataStartIndex:C,dataEndIndex:T},h({props:b.props,dataStartIndex:C,dataEndIndex:T,updateId:B},b.state))}),b.triggerSyncEvent({dataStartIndex:C,dataEndIndex:T})}}),Ve(b,"handleMouseEnter",function(S){var C=b.getMouseInfo(S);if(C){var T=ie(ie({},C),{},{isTooltipActive:!0});b.setState(T),b.triggerSyncEvent(T);var B=b.props.onMouseEnter;ot(B)&&B(T,S)}}),Ve(b,"triggeredAfterMouseMove",function(S){var C=b.getMouseInfo(S),T=C?ie(ie({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(T),b.triggerSyncEvent(T);var B=b.props.onMouseMove;ot(B)&&B(T,S)}),Ve(b,"handleItemMouseEnter",function(S){b.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ve(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Ve(b,"handleMouseMove",function(S){S.persist(),b.throttleTriggeredAfterMouseMove(S)}),Ve(b,"handleMouseLeave",function(S){b.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};b.setState(C),b.triggerSyncEvent(C);var T=b.props.onMouseLeave;ot(T)&&T(C,S)}),Ve(b,"handleOuterEvent",function(S){var C=Swe(S),T=Ki(b.props,"".concat(C));if(C&&ot(T)){var B,_;/.*touch.*/i.test(C)?_=b.getMouseInfo(S.changedTouches[0]):_=b.getMouseInfo(S),T((B=_)!==null&&B!==void 0?B:{},S)}}),Ve(b,"handleClick",function(S){var C=b.getMouseInfo(S);if(C){var T=ie(ie({},C),{},{isTooltipActive:!0});b.setState(T),b.triggerSyncEvent(T);var B=b.props.onClick;ot(B)&&B(T,S)}}),Ve(b,"handleMouseDown",function(S){var C=b.props.onMouseDown;if(ot(C)){var T=b.getMouseInfo(S);C(T,S)}}),Ve(b,"handleMouseUp",function(S){var C=b.props.onMouseUp;if(ot(C)){var T=b.getMouseInfo(S);C(T,S)}}),Ve(b,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ve(b,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.handleMouseDown(S.changedTouches[0])}),Ve(b,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.handleMouseUp(S.changedTouches[0])}),Ve(b,"handleDoubleClick",function(S){var C=b.props.onDoubleClick;if(ot(C)){var T=b.getMouseInfo(S);C(T,S)}}),Ve(b,"handleContextMenu",function(S){var C=b.props.onContextMenu;if(ot(C)){var T=b.getMouseInfo(S);C(T,S)}}),Ve(b,"triggerSyncEvent",function(S){b.props.syncId!==void 0&&lC.emit(cC,b.props.syncId,S,b.eventEmitterSymbol)}),Ve(b,"applySyncEvent",function(S){var C=b.props,T=C.layout,B=C.syncMethod,_=b.state.updateId,I=S.dataStartIndex,L=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)b.setState(ie({dataStartIndex:I,dataEndIndex:L},h({props:b.props,dataStartIndex:I,dataEndIndex:L,updateId:_},b.state)));else if(S.activeTooltipIndex!==void 0){var N=S.chartX,R=S.chartY,M=S.activeTooltipIndex,k=b.state,O=k.offset,j=k.tooltipTicks;if(!O)return;if(typeof B=="function")M=B(j,S);else if(B==="value"){M=-1;for(var D=0;D<j.length;D++)if(j[D].value===S.activeLabel){M=D;break}}var F=ie(ie({},O),{},{x:O.left,y:O.top}),$=Math.min(N,F.x+F.width),U=Math.min(R,F.y+F.height),K=j[M]&&j[M].value,V=xN(b.state,b.props.data,M),q=j[M]?{x:T==="horizontal"?j[M].coordinate:$,y:T==="horizontal"?U:j[M].coordinate}:QY;b.setState(ie(ie({},S),{},{activeLabel:K,activeCoordinate:q,activePayload:V,activeTooltipIndex:M}))}else b.setState(S)}),Ve(b,"renderCursor",function(S){var C,T=b.state,B=T.isTooltipActive,_=T.activeCoordinate,I=T.activePayload,L=T.offset,N=T.activeTooltipIndex,R=T.tooltipAxisBandSize,M=b.getTooltipEventType(),k=(C=S.props.active)!==null&&C!==void 0?C:B,O=b.props.layout,j=S.key||"_recharts-cursor";return Q.createElement(h3e,{key:j,activeCoordinate:_,activePayload:I,activeTooltipIndex:N,chartName:r,element:S,isActive:k,layout:O,offset:L,tooltipAxisBandSize:R,tooltipEventType:M})}),Ve(b,"renderPolarAxis",function(S,C,T){var B=Ki(S,"type.axisType"),_=Ki(b.state,"".concat(B,"Map")),I=S.type.defaultProps,L=I!==void 0?ie(ie({},I),S.props):S.props,N=_&&_[L["".concat(B,"Id")]];return E.cloneElement(S,ie(ie({},N),{},{className:gt(B,N.className),key:S.key||"".concat(C,"-").concat(T),ticks:Vc(N,!0)}))}),Ve(b,"renderPolarGrid",function(S){var C=S.props,T=C.radialLines,B=C.polarAngles,_=C.polarRadius,I=b.state,L=I.radiusAxisMap,N=I.angleAxisMap,R=vd(L),M=vd(N),k=M.cx,O=M.cy,j=M.innerRadius,D=M.outerRadius;return E.cloneElement(S,{polarAngles:Array.isArray(B)?B:Vc(M,!0).map(function(F){return F.coordinate}),polarRadius:Array.isArray(_)?_:Vc(R,!0).map(function(F){return F.coordinate}),cx:k,cy:O,innerRadius:j,outerRadius:D,key:S.key||"polar-grid",radialLines:T})}),Ve(b,"renderLegend",function(){var S=b.state.formattedGraphicalItems,C=b.props,T=C.children,B=C.width,_=C.height,I=b.props.margin||{},L=B-(I.left||0)-(I.right||0),N=RW({children:T,formattedGraphicalItems:S,legendWidth:L,legendContent:u});if(!N)return null;var R=N.item,M=h4(N,p3e);return E.cloneElement(R,ie(ie({},M),{},{chartWidth:B,chartHeight:_,margin:I,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Ve(b,"renderTooltip",function(){var S,C=b.props,T=C.children,B=C.accessibilityLayer,_=li(T,Ys);if(!_)return null;var I=b.state,L=I.isTooltipActive,N=I.activeCoordinate,R=I.activePayload,M=I.activeLabel,k=I.offset,O=(S=_.props.active)!==null&&S!==void 0?S:L;return E.cloneElement(_,{viewBox:ie(ie({},k),{},{x:k.left,y:k.top}),active:O,label:M,payload:O?R:[],coordinate:N,accessibilityLayer:B})}),Ve(b,"renderBrush",function(S){var C=b.props,T=C.margin,B=C.data,_=b.state,I=_.offset,L=_.dataStartIndex,N=_.dataEndIndex,R=_.updateId;return E.cloneElement(S,{key:S.key||"_recharts-brush",onChange:L0(b.handleBrushChange,S.props.onChange),data:B,x:we(S.props.x)?S.props.x:I.left,y:we(S.props.y)?S.props.y:I.top+I.height+I.brushBottom-(T.bottom||0),width:we(S.props.width)?S.props.width:I.width,startIndex:L,endIndex:N,updateId:"brush-".concat(R)})}),Ve(b,"renderReferenceElement",function(S,C,T){if(!S)return null;var B=b,_=B.clipPathId,I=b.state,L=I.xAxisMap,N=I.yAxisMap,R=I.offset,M=S.type.defaultProps||{},k=S.props,O=k.xAxisId,j=O===void 0?M.xAxisId:O,D=k.yAxisId,F=D===void 0?M.yAxisId:D;return E.cloneElement(S,{key:S.key||"".concat(C,"-").concat(T),xAxis:L[j],yAxis:N[F],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:_})}),Ve(b,"renderActivePoints",function(S){var C=S.item,T=S.activePoint,B=S.basePoint,_=S.childIndex,I=S.isRange,L=[],N=C.props.key,R=C.item.type.defaultProps!==void 0?ie(ie({},C.item.type.defaultProps),C.item.props):C.item.props,M=R.activeDot,k=R.dataKey,O=ie(ie({index:_,dataKey:k,cx:T.x,cy:T.y,r:4,fill:CR(C.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},ft(M,!1)),yy(M));return L.push(x.renderActiveDot(M,O,"".concat(N,"-activePoint-").concat(_))),B?L.push(x.renderActiveDot(M,ie(ie({},O),{},{cx:B.x,cy:B.y}),"".concat(N,"-basePoint-").concat(_))):I&&L.push(null),L}),Ve(b,"renderGraphicChild",function(S,C,T){var B=b.filterFormatItem(S,C,T);if(!B)return null;var _=b.getTooltipEventType(),I=b.state,L=I.isTooltipActive,N=I.tooltipAxis,R=I.activeTooltipIndex,M=I.activeLabel,k=b.props.children,O=li(k,Ys),j=B.props,D=j.points,F=j.isRange,$=j.baseLine,U=B.item.type.defaultProps!==void 0?ie(ie({},B.item.type.defaultProps),B.item.props):B.item.props,K=U.activeDot,V=U.hide,q=U.activeBar,H=U.activeShape,z=!!(!V&&L&&O&&(K||q||H)),ae={};_!=="axis"&&O&&O.props.trigger==="click"?ae={onClick:L0(b.handleItemMouseEnter,S.props.onClick)}:_!=="axis"&&(ae={onMouseLeave:L0(b.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:L0(b.handleItemMouseEnter,S.props.onMouseEnter)});var X=E.cloneElement(S,ie(ie({},B.props),ae));function ne(Ce){return typeof N.dataKey=="function"?N.dataKey(Ce.payload):null}if(z)if(R>=0){var ee,G;if(N.dataKey&&!N.allowDuplicatedCategory){var ge=typeof N.dataKey=="function"?ne:"payload.".concat(N.dataKey.toString());ee=vy(D,ge,M),G=F&&$&&vy($,ge,M)}else ee=D==null?void 0:D[R],G=F&&$&&$[R];if(H||q){var ye=S.props.activeIndex!==void 0?S.props.activeIndex:R;return[E.cloneElement(S,ie(ie(ie({},B.props),ae),{},{activeIndex:ye})),null,null]}if(!ht(ee))return[X].concat(lf(b.renderActivePoints({item:B,activePoint:ee,basePoint:G,childIndex:R,isRange:F})))}else{var Me,ce=(Me=b.getItemByXY(b.state.activeCoordinate))!==null&&Me!==void 0?Me:{graphicalItem:X},Be=ce.graphicalItem,_e=Be.item,He=_e===void 0?S:_e,Se=Be.childIndex,it=ie(ie(ie({},B.props),ae),{},{activeIndex:Se});return[E.cloneElement(He,it),null,null]}return F?[X,null,null]:[X,null]}),Ve(b,"renderCustomized",function(S,C,T){return E.cloneElement(S,ie(ie({key:"recharts-customized-".concat(T)},b.props),b.state))}),Ve(b,"renderMap",{CartesianGrid:{handler:F0,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:F0},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:F0},YAxis:{handler:F0},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((y=v.id)!==null&&y!==void 0?y:vg("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=_7(b.triggeredAfterMouseMove,(w=v.throttleDelay)!==null&&w!==void 0?w:1e3/60),b.state={},b}return B3e(x,g),E3e(x,[{key:"componentDidMount",value:function(){var y,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,w=y.children,b=y.data,S=y.height,C=y.layout,T=li(w,Ys);if(T){var B=T.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var _=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,I=xN(this.state,b,B,_),L=this.state.tooltipTicks[B].coordinate,N=(this.state.offset.top+S)/2,R=C==="horizontal",M=R?{x:L,y:N}:{y:L,x:N},k=this.state.formattedGraphicalItems.find(function(j){var D=j.item;return D.type.name==="Scatter"});k&&(M=ie(ie({},M),k.props.points[B].tooltipPosition),I=k.props.points[B].tooltipPayload);var O={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:_,activePayload:I,activeCoordinate:M};this.setState(O),this.renderCursor(T),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var b,S;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(y){XB([li(y.children,Ys)],[li(this.props.children,Ys)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=li(this.props.children,Ys);if(y&&typeof y.props.shared=="boolean"){var w=y.props.shared?"axis":"item";return o.indexOf(w)>=0?w:s}return s}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var w=this.container,b=w.getBoundingClientRect(),S=JIe(b),C={chartX:Math.round(y.pageX-S.left),chartY:Math.round(y.pageY-S.top)},T=b.width/w.offsetWidth||1,B=this.inRange(C.chartX,C.chartY,T);if(!B)return null;var _=this.state,I=_.xAxisMap,L=_.yAxisMap,N=this.getTooltipEventType(),R=m4(this.state,this.props.data,this.props.layout,B);if(N!=="axis"&&I&&L){var M=vd(I).scale,k=vd(L).scale,O=M&&M.invert?M.invert(C.chartX):null,j=k&&k.invert?k.invert(C.chartY):null;return ie(ie({},C),{},{xValue:O,yValue:j},R)}return R?ie(ie({},C),R):null}},{key:"inRange",value:function(y,w){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,C=y/b,T=w/b;if(S==="horizontal"||S==="vertical"){var B=this.state.offset,_=C>=B.left&&C<=B.left+B.width&&T>=B.top&&T<=B.top+B.height;return _?{x:C,y:T}:null}var I=this.state,L=I.angleAxisMap,N=I.radiusAxisMap;if(L&&N){var R=vd(L);return eU({x:C,y:T},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,w=this.getTooltipEventType(),b=li(y,Ys),S={};b&&w==="axis"&&(b.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=yy(this.props,this.handleOuterEvent);return ie(ie({},C),S)}},{key:"addListener",value:function(){lC.on(cC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){lC.removeListener(cC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,w,b){for(var S=this.state.formattedGraphicalItems,C=0,T=S.length;C<T;C++){var B=S[C];if(B.item===y||B.props.key===y.key||w===so(B.item.type)&&b===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,w=this.state.offset,b=w.left,S=w.top,C=w.height,T=w.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:y},Q.createElement("rect",{x:b,y:S,height:C,width:T})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(w,b){var S=f4(b,2),C=S[0],T=S[1];return ie(ie({},w),{},Ve({},C,T.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(w,b){var S=f4(b,2),C=S[0],T=S[1];return ie(ie({},w),{},Ve({},C,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(y){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(y){var w=this.state,b=w.formattedGraphicalItems,S=w.activeItem;if(b&&b.length)for(var C=0,T=b.length;C<T;C++){var B=b[C],_=B.props,I=B.item,L=I.type.defaultProps!==void 0?ie(ie({},I.type.defaultProps),I.props):I.props,N=so(I.type);if(N==="Bar"){var R=(_.data||[]).find(function(j){return OOe(y,j)});if(R)return{graphicalItem:B,payload:R}}else if(N==="RadialBar"){var M=(_.data||[]).find(function(j){return eU(y,j)});if(M)return{graphicalItem:B,payload:M}}else if(S1(B,S)||C1(B,S)||km(B,S)){var k=$Fe({graphicalItem:B,activeTooltipItem:S,itemData:L.data}),O=L.activeIndex===void 0?k:L.activeIndex;return{graphicalItem:ie(ie({},B),{},{childIndex:O}),payload:km(B,S)?L.data[k]:B.props.data[k]}}}return null}},{key:"render",value:function(){var y=this;if(!KD(this))return null;var w=this.props,b=w.children,S=w.className,C=w.width,T=w.height,B=w.style,_=w.compact,I=w.title,L=w.desc,N=h4(w,m3e),R=ft(N,!1);if(_)return Q.createElement(ZU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(JB,Od({},R,{width:C,height:T,title:I,desc:L}),this.renderClipPath(),GD(b,this.renderMap)));if(this.props.accessibilityLayer){var M,k;R.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,R.role=(k=this.props.role)!==null&&k!==void 0?k:"application",R.onKeyDown=function(j){y.accessibilityManager.keyboardEvent(j)},R.onFocus=function(){y.accessibilityManager.focus()}}var O=this.parseEventsOfWrapper();return Q.createElement(ZU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",Od({className:gt("recharts-wrapper",S),style:ie({position:"relative",cursor:"default",width:C,height:T},B)},O,{ref:function(D){y.container=D}}),Q.createElement(JB,Od({},R,{width:C,height:T,title:I,desc:L,style:k3e}),this.renderClipPath(),GD(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(E.Component);Ve(m,"displayName",r),Ve(m,"defaultProps",ie({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},A)),Ve(m,"getDerivedStateFromProps",function(g,x){var v=g.dataKey,y=g.data,w=g.children,b=g.width,S=g.height,C=g.layout,T=g.stackOffset,B=g.margin,_=x.dataStartIndex,I=x.dataEndIndex;if(x.updateId===void 0){var L=g4(g);return ie(ie(ie({},L),{},{updateId:0},h(ie(ie({props:g},L),{},{updateId:0}),x)),{},{prevDataKey:v,prevData:y,prevWidth:b,prevHeight:S,prevLayout:C,prevStackOffset:T,prevMargin:B,prevChildren:w})}if(v!==x.prevDataKey||y!==x.prevData||b!==x.prevWidth||S!==x.prevHeight||C!==x.prevLayout||T!==x.prevStackOffset||!nA(B,x.prevMargin)){var N=g4(g),R={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},M=ie(ie({},m4(x,y,C)),{},{updateId:x.updateId+1}),k=ie(ie(ie({},N),R),M);return ie(ie(ie({},k),h(ie({props:g},k),x)),{},{prevDataKey:v,prevData:y,prevWidth:b,prevHeight:S,prevLayout:C,prevStackOffset:T,prevMargin:B,prevChildren:w})}if(!XB(w,x.prevChildren)){var O,j,D,F,$=li(w,XA),U=$&&(O=(j=$.props)===null||j===void 0?void 0:j.startIndex)!==null&&O!==void 0?O:_,K=$&&(D=(F=$.props)===null||F===void 0?void 0:F.endIndex)!==null&&D!==void 0?D:I,V=U!==_||K!==I,q=!ht(y),H=q&&!V?x.updateId:x.updateId+1;return ie(ie({updateId:H},h(ie(ie({props:g},x),{},{updateId:H,dataStartIndex:U,dataEndIndex:K}),x)),{},{prevChildren:w,dataStartIndex:U,dataEndIndex:K})}return null}),Ve(m,"renderActiveDot",function(g,x,v){var y;return E.isValidElement(g)?y=E.cloneElement(g,x):ot(g)?y=g(x):y=Q.createElement(BR,x),Q.createElement(or,{className:"recharts-active-dot",key:v},y)});var p=E.forwardRef(function(x,v){return Q.createElement(m,Od({},x,{ref:v}))});return p.displayName=m.displayName,p},K3e=H3e({chartName:"AreaChart",GraphicalChild:fc,axisComponents:[{axisType:"xAxis",AxisComp:k1},{axisType:"yAxis",AxisComp:L1}],formatAxisMap:h4e});const V3e=({events:t})=>{const e=i=>{const s=i.eventName.toLowerCase();let a=0;return s.includes("goal")?a=10:s.includes("shot")?a=5:s.includes("dangerous")||s.includes("final_third")?a=3:s.includes("cross")?a=2:s.includes("pass")?a=1:s.includes("interception")||s.includes("recovery")?a=2:s.includes("turnover")||s.includes("loss")?a=-2:s.includes("foul")?a=-1:s.includes("card")&&(a=-5),i.team==="TEAM_A"?a:-a},n=E.useMemo(()=>t.map((i,s)=>{const a=Math.max(0,s-10),o=t.slice(a,s+1),l=o.reduce((u,d)=>u+e(d),0);return{time:i.matchTime||s,momentum:l/o.length,name:i.eventName}}),[t]).slice(-40);return c.jsx("div",{className:"w-full h-full min-h-[150px]",children:c.jsx(GIe,{width:"100%",height:"100%",children:c.jsxs(K3e,{data:n,children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"colorMomentum",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.8}),c.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.8})]})}),c.jsx(k1,{dataKey:"time",hide:!0}),c.jsx(L1,{domain:[-1,1],hide:!0}),c.jsx(Ys,{}),c.jsx(B1,{y:0,stroke:"#666",strokeDasharray:"3 3"}),c.jsx(fc,{type:"monotone",dataKey:"momentum",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorMomentum)"})]})})})};var G3e={value:()=>{}};function M1(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new sv(r)}function sv(t){this._=t}function z3e(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}sv.prototype=M1.prototype={constructor:sv,on:function(t,e){var r=this._,n=z3e(t+"",r),i,s=-1,a=n.length;if(arguments.length<2){for(;++s<a;)if((i=(t=n[s]).type)&&(i=W3e(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=n[s]).type)r[i]=v4(r[i],t.name,e);else if(e==null)for(i in r)r[i]=v4(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new sv(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,i=s.length;n<i;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,s=n.length;i<s;++i)n[i].value.apply(e,r)}};function W3e(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function v4(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=G3e,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var vN="http://www.w3.org/1999/xhtml";const y4={svg:"http://www.w3.org/2000/svg",xhtml:vN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function D1(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),y4.hasOwnProperty(e)?{space:y4[e],local:t}:t}function Y3e(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===vN&&e.documentElement.namespaceURI===vN?e.createElement(t):e.createElementNS(r,t)}}function q3e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function KY(t){var e=D1(t);return(e.local?q3e:Y3e)(e)}function X3e(){}function PR(t){return t==null?X3e:function(){return this.querySelector(t)}}function Z3e(t){typeof t!="function"&&(t=PR(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=new Array(a),l,u,d=0;d<a;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Si(n,this._parents)}function J3e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function e$e(){return[]}function VY(t){return t==null?e$e:function(){return this.querySelectorAll(t)}}function t$e(t){return function(){return J3e(t.apply(this,arguments))}}function r$e(t){typeof t=="function"?t=t$e(t):t=VY(t);for(var e=this._groups,r=e.length,n=[],i=[],s=0;s<r;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(n.push(t.call(l,l.__data__,u,a)),i.push(l));return new Si(n,i)}function GY(t){return function(){return this.matches(t)}}function zY(t){return function(e){return e.matches(t)}}var n$e=Array.prototype.find;function i$e(t){return function(){return n$e.call(this.children,t)}}function s$e(){return this.firstElementChild}function a$e(t){return this.select(t==null?s$e:i$e(typeof t=="function"?t:zY(t)))}var o$e=Array.prototype.filter;function l$e(){return Array.from(this.children)}function c$e(t){return function(){return o$e.call(this.children,t)}}function u$e(t){return this.selectAll(t==null?l$e:c$e(typeof t=="function"?t:zY(t)))}function d$e(t){typeof t!="function"&&(t=GY(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new Si(n,this._parents)}function WY(t){return new Array(t.length)}function A$e(){return new Si(this._enter||this._groups.map(WY),this._parents)}function xb(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xb.prototype={constructor:xb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function f$e(t){return function(){return t}}function h$e(t,e,r,n,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],n[a]=o):r[a]=new xb(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function p$e(t,e,r,n,i,s,a){var o,l,u=new Map,d=e.length,A=s.length,f=new Array(d),h;for(o=0;o<d;++o)(l=e[o])&&(f[o]=h=a.call(l,l.__data__,o,e)+"",u.has(h)?i[o]=l:u.set(h,l));for(o=0;o<A;++o)h=a.call(t,s[o],o,s)+"",(l=u.get(h))?(n[o]=l,l.__data__=s[o],u.delete(h)):r[o]=new xb(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(f[o])===l&&(i[o]=l)}function m$e(t){return t.__data__}function g$e(t,e){if(!arguments.length)return Array.from(this,m$e);var r=e?p$e:h$e,n=this._parents,i=this._groups;typeof t!="function"&&(t=f$e(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],A=i[u],f=A.length,h=x$e(t.call(d,d&&d.__data__,u,n)),m=h.length,p=o[u]=new Array(m),g=a[u]=new Array(m),x=l[u]=new Array(f);r(d,A,p,g,x,h,e);for(var v=0,y=0,w,b;v<m;++v)if(w=p[v]){for(v>=y&&(y=v+1);!(b=g[y])&&++y<m;);w._next=b||null}}return a=new Si(a,n),a._enter=o,a._exit=l,a}function x$e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function v$e(){return new Si(this._exit||this._groups.map(WY),this._parents)}function y$e(t,e,r){var n=this.enter(),i=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function b$e(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,s=n.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=r[l],d=n[l],A=u.length,f=o[l]=new Array(A),h,m=0;m<A;++m)(h=u[m]||d[m])&&(f[m]=h);for(;l<i;++l)o[l]=r[l];return new Si(o,this._parents)}function w$e(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,s=n[i],a;--i>=0;)(a=n[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function E$e(t){t||(t=S$e);function e(A,f){return A&&f?t(A.__data__,f.__data__):!A-!f}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var a=r[s],o=a.length,l=i[s]=new Array(o),u,d=0;d<o;++d)(u=a[d])&&(l[d]=u);l.sort(e)}return new Si(i,this._parents).order()}function S$e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function C$e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function T$e(){return Array.from(this)}function B$e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length;i<s;++i){var a=n[i];if(a)return a}return null}function _$e(){let t=0;for(const e of this)++t;return t}function N$e(){return!this.node()}function I$e(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function P$e(t){return function(){this.removeAttribute(t)}}function R$e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function k$e(t,e){return function(){this.setAttribute(t,e)}}function L$e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function j$e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function M$e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function D$e(t,e){var r=D1(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?R$e:P$e:typeof e=="function"?r.local?M$e:j$e:r.local?L$e:k$e)(r,e))}function YY(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function O$e(t){return function(){this.style.removeProperty(t)}}function F$e(t,e,r){return function(){this.style.setProperty(t,e,r)}}function U$e(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function $$e(t,e,r){return arguments.length>1?this.each((e==null?O$e:typeof e=="function"?U$e:F$e)(t,e,r??"")):cf(this.node(),t)}function cf(t,e){return t.style.getPropertyValue(e)||YY(t).getComputedStyle(t,null).getPropertyValue(e)}function Q$e(t){return function(){delete this[t]}}function H$e(t,e){return function(){this[t]=e}}function K$e(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function V$e(t,e){return arguments.length>1?this.each((e==null?Q$e:typeof e=="function"?K$e:H$e)(t,e)):this.node()[t]}function qY(t){return t.trim().split(/^|\s+/)}function RR(t){return t.classList||new XY(t)}function XY(t){this._node=t,this._names=qY(t.getAttribute("class")||"")}XY.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ZY(t,e){for(var r=RR(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function JY(t,e){for(var r=RR(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function G$e(t){return function(){ZY(this,t)}}function z$e(t){return function(){JY(this,t)}}function W$e(t,e){return function(){(e.apply(this,arguments)?ZY:JY)(this,t)}}function Y$e(t,e){var r=qY(t+"");if(arguments.length<2){for(var n=RR(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?W$e:e?G$e:z$e)(r,e))}function q$e(){this.textContent=""}function X$e(t){return function(){this.textContent=t}}function Z$e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function J$e(t){return arguments.length?this.each(t==null?q$e:(typeof t=="function"?Z$e:X$e)(t)):this.node().textContent}function eQe(){this.innerHTML=""}function tQe(t){return function(){this.innerHTML=t}}function rQe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function nQe(t){return arguments.length?this.each(t==null?eQe:(typeof t=="function"?rQe:tQe)(t)):this.node().innerHTML}function iQe(){this.nextSibling&&this.parentNode.appendChild(this)}function sQe(){return this.each(iQe)}function aQe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oQe(){return this.each(aQe)}function lQe(t){var e=typeof t=="function"?t:KY(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cQe(){return null}function uQe(t,e){var r=typeof t=="function"?t:KY(t),n=e==null?cQe:typeof e=="function"?e:PR(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function dQe(){var t=this.parentNode;t&&t.removeChild(this)}function AQe(){return this.each(dQe)}function fQe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function hQe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pQe(t){return this.select(t?hQe:fQe)}function mQe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function gQe(t){return function(e){t.call(this,e,this.__data__)}}function xQe(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function vQe(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,s;r<i;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function yQe(t,e,r){return function(){var n=this.__on,i,s=gQe(e);if(n){for(var a=0,o=n.length;a<o;++a)if((i=n[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=e;return}}this.addEventListener(t.type,s,r),i={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(i):this.__on=[i]}}function bQe(t,e,r){var n=xQe(t+""),i,s=n.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(i=0,d=o[l];i<s;++i)if((a=n[i]).type===d.type&&a.name===d.name)return d.value}return}for(o=e?yQe:vQe,i=0;i<s;++i)this.each(o(n[i],e,r));return this}function eq(t,e,r){var n=YY(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function wQe(t,e){return function(){return eq(this,t,e)}}function EQe(t,e){return function(){return eq(this,t,e.apply(this,arguments))}}function SQe(t,e){return this.each((typeof e=="function"?EQe:wQe)(t,e))}function*CQe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,s=n.length,a;i<s;++i)(a=n[i])&&(yield a)}var tq=[null];function Si(t,e){this._groups=t,this._parents=e}function Cg(){return new Si([[document.documentElement]],tq)}function TQe(){return this}Si.prototype=Cg.prototype={constructor:Si,select:Z3e,selectAll:r$e,selectChild:a$e,selectChildren:u$e,filter:d$e,data:g$e,enter:A$e,exit:v$e,join:y$e,merge:b$e,selection:TQe,order:w$e,sort:E$e,call:C$e,nodes:T$e,node:B$e,size:_$e,empty:N$e,each:I$e,attr:D$e,style:$$e,property:V$e,classed:Y$e,text:J$e,html:nQe,raise:sQe,lower:oQe,append:lQe,insert:uQe,remove:AQe,clone:pQe,datum:mQe,on:bQe,dispatch:SQe,[Symbol.iterator]:CQe};function Um(t){return typeof t=="string"?new Si([[document.querySelector(t)]],[document.documentElement]):new Si([[t]],tq)}function BQe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function b4(t,e){if(t=BQe(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const _Qe={passive:!1},$m={capture:!0,passive:!1};function dC(t){t.stopImmediatePropagation()}function oA(t){t.preventDefault(),t.stopImmediatePropagation()}function NQe(t){var e=t.document.documentElement,r=Um(t).on("dragstart.drag",oA,$m);"onselectstart"in e?r.on("selectstart.drag",oA,$m):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function IQe(t,e){var r=t.document.documentElement,n=Um(t).on("dragstart.drag",null);e&&(n.on("click.drag",oA,$m),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const U0=t=>()=>t;function yN(t,{sourceEvent:e,subject:r,target:n,identifier:i,active:s,x:a,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}yN.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function PQe(t){return!t.ctrlKey&&!t.button}function RQe(){return this.parentNode}function kQe(t,e){return e??{x:t.x,y:t.y}}function LQe(){return navigator.maxTouchPoints||"ontouchstart"in this}function jQe(){var t=PQe,e=RQe,r=kQe,n=LQe,i={},s=M1("start","drag","end"),a=0,o,l,u,d,A=0;function f(w){w.on("mousedown.drag",h).filter(n).on("touchstart.drag",g).on("touchmove.drag",x,_Qe).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,b){if(!(d||!t.call(this,w,b))){var S=y(this,e.call(this,w,b),w,b,"mouse");S&&(Um(w.view).on("mousemove.drag",m,$m).on("mouseup.drag",p,$m),NQe(w.view),dC(w),u=!1,o=w.clientX,l=w.clientY,S("start",w))}}function m(w){if(oA(w),!u){var b=w.clientX-o,S=w.clientY-l;u=b*b+S*S>A}i.mouse("drag",w)}function p(w){Um(w.view).on("mousemove.drag mouseup.drag",null),IQe(w.view,u),oA(w),i.mouse("end",w)}function g(w,b){if(t.call(this,w,b)){var S=w.changedTouches,C=e.call(this,w,b),T=S.length,B,_;for(B=0;B<T;++B)(_=y(this,C,w,b,S[B].identifier,S[B]))&&(dC(w),_("start",w,S[B]))}}function x(w){var b=w.changedTouches,S=b.length,C,T;for(C=0;C<S;++C)(T=i[b[C].identifier])&&(oA(w),T("drag",w,b[C]))}function v(w){var b=w.changedTouches,S=b.length,C,T;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<S;++C)(T=i[b[C].identifier])&&(dC(w),T("end",w,b[C]))}function y(w,b,S,C,T,B){var _=s.copy(),I=b4(B||S,b),L,N,R;if((R=r.call(w,new yN("beforestart",{sourceEvent:S,target:f,identifier:T,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:_}),C))!=null)return L=R.x-I[0]||0,N=R.y-I[1]||0,function M(k,O,j){var D=I,F;switch(k){case"start":i[T]=M,F=a++;break;case"end":delete i[T],--a;case"drag":I=b4(j||O,b),F=a;break}_.call(k,w,new yN(k,{sourceEvent:O,subject:R,target:f,identifier:T,active:F,x:I[0]+L,y:I[1]+N,dx:I[0]-D[0],dy:I[1]-D[1],dispatch:_}),C)}}return f.filter=function(w){return arguments.length?(t=typeof w=="function"?w:U0(!!w),f):t},f.container=function(w){return arguments.length?(e=typeof w=="function"?w:U0(w),f):e},f.subject=function(w){return arguments.length?(r=typeof w=="function"?w:U0(w),f):r},f.touchable=function(w){return arguments.length?(n=typeof w=="function"?w:U0(!!w),f):n},f.on=function(){var w=s.on.apply(s,arguments);return w===s?f:w},f.clickDistance=function(w){return arguments.length?(A=(w=+w)*w,f):Math.sqrt(A)},f}var uf=0,jh=0,mh=0,rq=1e3,vb,Mh,yb=0,ju=0,O1=0,Qm=typeof performance=="object"&&performance.now?performance:Date,nq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function kR(){return ju||(nq(MQe),ju=Qm.now()+O1)}function MQe(){ju=0}function bb(){this._call=this._time=this._next=null}bb.prototype=LR.prototype={constructor:bb,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?kR():+r)+(e==null?0:+e),!this._next&&Mh!==this&&(Mh?Mh._next=this:vb=this,Mh=this),this._call=t,this._time=r,bN()},stop:function(){this._call&&(this._call=null,this._time=1/0,bN())}};function LR(t,e,r){var n=new bb;return n.restart(t,e,r),n}function DQe(){kR(),++uf;for(var t=vb,e;t;)(e=ju-t._time)>=0&&t._call.call(void 0,e),t=t._next;--uf}function w4(){ju=(yb=Qm.now())+O1,uf=jh=0;try{DQe()}finally{uf=0,FQe(),ju=0}}function OQe(){var t=Qm.now(),e=t-yb;e>rq&&(O1-=e,yb=t)}function FQe(){for(var t,e=vb,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:vb=r);Mh=t,bN(n)}function bN(t){if(!uf){jh&&(jh=clearTimeout(jh));var e=t-ju;e>24?(t<1/0&&(jh=setTimeout(w4,t-Qm.now()-O1)),mh&&(mh=clearInterval(mh))):(mh||(yb=Qm.now(),mh=setInterval(OQe,rq)),uf=1,nq(w4))}}function E4(t,e,r){var n=new bb;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var UQe=M1("start","end","cancel","interrupt"),$Qe=[],iq=0,S4=1,wN=2,av=3,C4=4,EN=5,ov=6;function F1(t,e,r,n,i,s){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;QQe(t,r,{name:e,index:n,group:i,on:UQe,tween:$Qe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:iq})}function jR(t,e){var r=Ms(t,e);if(r.state>iq)throw new Error("too late; already scheduled");return r}function Ia(t,e){var r=Ms(t,e);if(r.state>av)throw new Error("too late; already running");return r}function Ms(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function QQe(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=LR(s,0,r.time);function s(u){r.state=S4,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var d,A,f,h;if(r.state!==S4)return l();for(d in n)if(h=n[d],h.name===r.name){if(h.state===av)return E4(a);h.state===C4?(h.state=ov,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[d]):+d<e&&(h.state=ov,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[d])}if(E4(function(){r.state===av&&(r.state=C4,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=wN,r.on.call("start",t,t.__data__,r.index,r.group),r.state===wN){for(r.state=av,i=new Array(f=r.tween.length),d=0,A=-1;d<f;++d)(h=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(i[++A]=h);i.length=A+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=EN,1),A=-1,f=i.length;++A<f;)i[A].call(t,d);r.state===EN&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=ov,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function HQe(t,e){var r=t.__transition,n,i,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){s=!1;continue}i=n.state>wN&&n.state<EN,n.state=ov,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}s&&delete t.__transition}}function KQe(t){return this.each(function(){HQe(this,t)})}function VQe(t,e){var r,n;return function(){var i=Ia(this,t),s=i.tween;if(s!==r){n=r=s;for(var a=0,o=n.length;a<o;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function GQe(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=Ia(this,t),a=s.tween;if(a!==n){i=(n=a).slice();for(var o={name:e,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}s.tween=i}}function zQe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Ms(this.node(),r).tween,i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===t)return a.value;return null}return this.each((e==null?VQe:GQe)(r,t,e))}function MR(t,e,r){var n=t._id;return t.each(function(){var i=Ia(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return Ms(i,n).value[e]}}function sq(t,e){var r;return(typeof e=="number"?gs:e instanceof Ru?Fy:(r=Ru(e))?(e=r,Fy):$7)(t,e)}function WQe(t){return function(){this.removeAttribute(t)}}function YQe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qQe(t,e,r){var n,i=r+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===n?s:s=e(n=a,r)}}function XQe(t,e,r){var n,i=r+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===n?s:s=e(n=a,r)}}function ZQe(t,e,r){var n,i,s;return function(){var a,o=r(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===n&&l===i?s:(i=l,s=e(n=a,o)))}}function JQe(t,e,r){var n,i,s;return function(){var a,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===n&&l===i?s:(i=l,s=e(n=a,o)))}}function eHe(t,e){var r=D1(t),n=r==="transform"?cRe:sq;return this.attrTween(t,typeof e=="function"?(r.local?JQe:ZQe)(r,n,MR(this,"attr."+t,e)):e==null?(r.local?YQe:WQe)(r):(r.local?XQe:qQe)(r,n,e))}function tHe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function rHe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function nHe(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&rHe(t,s)),r}return i._value=e,i}function iHe(t,e){var r,n;function i(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&tHe(t,s)),r}return i._value=e,i}function sHe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=D1(t);return this.tween(r,(n.local?nHe:iHe)(n,e))}function aHe(t,e){return function(){jR(this,t).delay=+e.apply(this,arguments)}}function oHe(t,e){return e=+e,function(){jR(this,t).delay=e}}function lHe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?aHe:oHe)(e,t)):Ms(this.node(),e).delay}function cHe(t,e){return function(){Ia(this,t).duration=+e.apply(this,arguments)}}function uHe(t,e){return e=+e,function(){Ia(this,t).duration=e}}function dHe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cHe:uHe)(e,t)):Ms(this.node(),e).duration}function AHe(t,e){if(typeof e!="function")throw new Error;return function(){Ia(this,t).ease=e}}function fHe(t){var e=this._id;return arguments.length?this.each(AHe(e,t)):Ms(this.node(),e).ease}function hHe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ia(this,t).ease=r}}function pHe(t){if(typeof t!="function")throw new Error;return this.each(hHe(this._id,t))}function mHe(t){typeof t!="function"&&(t=GY(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var s=e[i],a=s.length,o=n[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new To(n,this._parents,this._name,this._id)}function gHe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,s=Math.min(n,i),a=new Array(n),o=0;o<s;++o)for(var l=e[o],u=r[o],d=l.length,A=a[o]=new Array(d),f,h=0;h<d;++h)(f=l[h]||u[h])&&(A[h]=f);for(;o<n;++o)a[o]=e[o];return new To(a,this._parents,this._name,this._id)}function xHe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function vHe(t,e,r){var n,i,s=xHe(e)?jR:Ia;return function(){var a=s(this,t),o=a.on;o!==n&&(i=(n=o).copy()).on(e,r),a.on=i}}function yHe(t,e){var r=this._id;return arguments.length<2?Ms(this.node(),r).on.on(t):this.each(vHe(r,t,e))}function bHe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function wHe(){return this.on("end.remove",bHe(this._id))}function EHe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=PR(t));for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a)for(var o=n[a],l=o.length,u=s[a]=new Array(l),d,A,f=0;f<l;++f)(d=o[f])&&(A=t.call(d,d.__data__,f,o))&&("__data__"in d&&(A.__data__=d.__data__),u[f]=A,F1(u[f],e,r,f,u,Ms(d,r)));return new To(s,this._parents,e,r)}function SHe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=VY(t));for(var n=this._groups,i=n.length,s=[],a=[],o=0;o<i;++o)for(var l=n[o],u=l.length,d,A=0;A<u;++A)if(d=l[A]){for(var f=t.call(d,d.__data__,A,l),h,m=Ms(d,r),p=0,g=f.length;p<g;++p)(h=f[p])&&F1(h,e,r,p,f,m);s.push(f),a.push(d)}return new To(s,a,e,r)}var CHe=Cg.prototype.constructor;function THe(){return new CHe(this._groups,this._parents)}function BHe(t,e){var r,n,i;return function(){var s=cf(this,t),a=(this.style.removeProperty(t),cf(this,t));return s===a?null:s===r&&a===n?i:i=e(r=s,n=a)}}function aq(t){return function(){this.style.removeProperty(t)}}function _He(t,e,r){var n,i=r+"",s;return function(){var a=cf(this,t);return a===i?null:a===n?s:s=e(n=a,r)}}function NHe(t,e,r){var n,i,s;return function(){var a=cf(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),cf(this,t))),a===l?null:a===n&&l===i?s:(i=l,s=e(n=a,o))}}function IHe(t,e){var r,n,i,s="style."+e,a="end."+s,o;return function(){var l=Ia(this,t),u=l.on,d=l.value[s]==null?o||(o=aq(e)):void 0;(u!==r||i!==d)&&(n=(r=u).copy()).on(a,i=d),l.on=n}}function PHe(t,e,r){var n=(t+="")=="transform"?lRe:sq;return e==null?this.styleTween(t,BHe(t,n)).on("end.style."+t,aq(t)):typeof e=="function"?this.styleTween(t,NHe(t,n,MR(this,"style."+t,e))).each(IHe(this._id,t)):this.styleTween(t,_He(t,n,e),r).on("end.style."+t,null)}function RHe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function kHe(t,e,r){var n,i;function s(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&RHe(t,a,r)),n}return s._value=e,s}function LHe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,kHe(t,e,r??""))}function jHe(t){return function(){this.textContent=t}}function MHe(t){return function(){var e=t(this);this.textContent=e??""}}function DHe(t){return this.tween("text",typeof t=="function"?MHe(MR(this,"text",t)):jHe(t==null?"":t+""))}function OHe(t){return function(e){this.textContent=t.call(this,e)}}function FHe(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&OHe(i)),e}return n._value=t,n}function UHe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,FHe(t))}function $He(){for(var t=this._name,e=this._id,r=oq(),n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],o=a.length,l,u=0;u<o;++u)if(l=a[u]){var d=Ms(l,e);F1(l,t,r,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new To(n,this._parents,t,r)}function QHe(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};r.each(function(){var u=Ia(this,n),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&s()})}var HHe=0;function To(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function oq(){return++HHe}var Da=Cg.prototype;To.prototype={constructor:To,select:EHe,selectAll:SHe,selectChild:Da.selectChild,selectChildren:Da.selectChildren,filter:mHe,merge:gHe,selection:THe,transition:$He,call:Da.call,nodes:Da.nodes,node:Da.node,size:Da.size,empty:Da.empty,each:Da.each,on:yHe,attr:eHe,attrTween:sHe,style:PHe,styleTween:LHe,text:DHe,textTween:UHe,remove:wHe,tween:zQe,delay:lHe,duration:dHe,ease:fHe,easeVarying:pHe,end:QHe,[Symbol.iterator]:Da[Symbol.iterator]};function KHe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var VHe={time:null,delay:0,duration:250,ease:KHe};function GHe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function zHe(t){var e,r;t instanceof To?(e=t._id,t=t._name):(e=oq(),(r=VHe).time=kR(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&F1(l,t,e,u,a,r||GHe(l,e));return new To(n,this._parents,t,e)}Cg.prototype.interrupt=KQe;Cg.prototype.transition=zHe;function WHe(t,e){var r,n=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,a=r.length,o,l=0,u=0;for(s=0;s<a;++s)o=r[s],l+=o.x,u+=o.y;for(l=(l/a-t)*n,u=(u/a-e)*n,s=0;s<a;++s)o=r[s],o.x-=l,o.y-=u}return i.initialize=function(s){r=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(n=+s,i):n},i}function YHe(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return lq(this.cover(e,r),e,r,t)}function lq(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,s=t._root,a={data:n},o=t._x0,l=t._y0,u=t._x1,d=t._y1,A,f,h,m,p,g,x,v;if(!s)return t._root=a,t;for(;s.length;)if((p=e>=(A=(o+u)/2))?o=A:u=A,(g=r>=(f=(l+d)/2))?l=f:d=f,i=s,!(s=s[x=g<<1|p]))return i[x]=a,t;if(h=+t._x.call(null,s.data),m=+t._y.call(null,s.data),e===h&&r===m)return a.next=s,i?i[x]=a:t._root=a,t;do i=i?i[x]=new Array(4):t._root=new Array(4),(p=e>=(A=(o+u)/2))?o=A:u=A,(g=r>=(f=(l+d)/2))?l=f:d=f;while((x=g<<1|p)===(v=(m>=f)<<1|h>=A));return i[v]=s,i[x]=a,t}function qHe(t){var e,r,n=t.length,i,s,a=new Array(n),o=new Array(n),l=1/0,u=1/0,d=-1/0,A=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(s=+this._y.call(null,e))||(a[r]=i,o[r]=s,i<l&&(l=i),i>d&&(d=i),s<u&&(u=s),s>A&&(A=s));if(l>d||u>A)return this;for(this.cover(l,u).cover(d,A),r=0;r<n;++r)lq(this,a[r],o[r],t[r]);return this}function XHe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,s=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,s=(n=Math.floor(e))+1;else{for(var a=i-r||1,o=this._root,l,u;r>t||t>=i||n>e||e>=s;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:i=r+a,s=n+a;break;case 1:r=i-a,s=n+a;break;case 2:i=r+a,n=s-a;break;case 3:r=i-a,n=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=r,this._y0=n,this._x1=i,this._y1=s,this}function ZHe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function JHe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Rn(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function e8e(t,e,r){var n,i=this._x0,s=this._y0,a,o,l,u,d=this._x1,A=this._y1,f=[],h=this._root,m,p;for(h&&f.push(new Rn(h,i,s,d,A)),r==null?r=1/0:(i=t-r,s=e-r,d=t+r,A=e+r,r*=r);m=f.pop();)if(!(!(h=m.node)||(a=m.x0)>d||(o=m.y0)>A||(l=m.x1)<i||(u=m.y1)<s))if(h.length){var g=(a+l)/2,x=(o+u)/2;f.push(new Rn(h[3],g,x,l,u),new Rn(h[2],a,x,g,u),new Rn(h[1],g,o,l,x),new Rn(h[0],a,o,g,x)),(p=(e>=x)<<1|t>=g)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-p],f[f.length-1-p]=m)}else{var v=t-+this._x.call(null,h.data),y=e-+this._y.call(null,h.data),w=v*v+y*y;if(w<r){var b=Math.sqrt(r=w);i=t-b,s=e-b,d=t+b,A=e+b,n=h.data}}return n}function t8e(t){if(isNaN(d=+this._x.call(null,t))||isNaN(A=+this._y.call(null,t)))return this;var e,r=this._root,n,i,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,d,A,f,h,m,p,g,x;if(!r)return this;if(r.length)for(;;){if((m=d>=(f=(a+l)/2))?a=f:l=f,(p=A>=(h=(o+u)/2))?o=h:u=h,e=r,!(r=r[g=p<<1|m]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,x=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,i?(s?i.next=s:delete i.next,this):e?(s?e[g]=s:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[x]=r:this._root=r),this):(this._root=s,this)}function r8e(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function n8e(){return this._root}function i8e(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function s8e(t){var e=[],r,n=this._root,i,s,a,o,l;for(n&&e.push(new Rn(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,s=r.x0,a=r.y0,o=r.x1,l=r.y1)&&n.length){var u=(s+o)/2,d=(a+l)/2;(i=n[3])&&e.push(new Rn(i,u,d,o,l)),(i=n[2])&&e.push(new Rn(i,s,d,u,l)),(i=n[1])&&e.push(new Rn(i,u,a,o,d)),(i=n[0])&&e.push(new Rn(i,s,a,u,d))}return this}function a8e(t){var e=[],r=[],n;for(this._root&&e.push(new Rn(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var s,a=n.x0,o=n.y0,l=n.x1,u=n.y1,d=(a+l)/2,A=(o+u)/2;(s=i[0])&&e.push(new Rn(s,a,o,d,A)),(s=i[1])&&e.push(new Rn(s,d,o,l,A)),(s=i[2])&&e.push(new Rn(s,a,A,d,u)),(s=i[3])&&e.push(new Rn(s,d,A,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function o8e(t){return t[0]}function l8e(t){return arguments.length?(this._x=t,this):this._x}function c8e(t){return t[1]}function u8e(t){return arguments.length?(this._y=t,this):this._y}function DR(t,e,r){var n=new OR(e??o8e,r??c8e,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function OR(t,e,r,n,i,s){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=s,this._root=void 0}function T4(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var On=DR.prototype=OR.prototype;On.copy=function(){var t=new OR(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=T4(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=T4(n));return t};On.add=YHe;On.addAll=qHe;On.cover=XHe;On.data=ZHe;On.extent=JHe;On.find=e8e;On.remove=t8e;On.removeAll=r8e;On.root=n8e;On.size=i8e;On.visit=s8e;On.visitAfter=a8e;On.x=l8e;On.y=u8e;function du(t){return function(){return t}}function El(t){return(t()-.5)*1e-6}function d8e(t){return t.x+t.vx}function A8e(t){return t.y+t.vy}function f8e(t){var e,r,n,i=1,s=1;typeof t!="function"&&(t=du(t==null?1:+t));function a(){for(var u,d=e.length,A,f,h,m,p,g,x=0;x<s;++x)for(A=DR(e,d8e,A8e).visitAfter(o),u=0;u<d;++u)f=e[u],p=r[f.index],g=p*p,h=f.x+f.vx,m=f.y+f.vy,A.visit(v);function v(y,w,b,S,C){var T=y.data,B=y.r,_=p+B;if(T){if(T.index>f.index){var I=h-T.x-T.vx,L=m-T.y-T.vy,N=I*I+L*L;N<_*_&&(I===0&&(I=El(n),N+=I*I),L===0&&(L=El(n),N+=L*L),N=(_-(N=Math.sqrt(N)))/N*i,f.vx+=(I*=N)*(_=(B*=B)/(g+B)),f.vy+=(L*=N)*_,T.vx-=I*(_=1-_),T.vy-=L*_)}return}return w>h+_||S<h-_||b>m+_||C<m-_}}function o(u){if(u.data)return u.r=r[u.data.index];for(var d=u.r=0;d<4;++d)u[d]&&u[d].r>u.r&&(u.r=u[d].r)}function l(){if(e){var u,d=e.length,A;for(r=new Array(d),u=0;u<d;++u)A=e[u],r[A.index]=+t(A,u,e)}}return a.initialize=function(u,d){e=u,n=d,l()},a.iterations=function(u){return arguments.length?(s=+u,a):s},a.strength=function(u){return arguments.length?(i=+u,a):i},a.radius=function(u){return arguments.length?(t=typeof u=="function"?u:du(+u),l(),a):t},a}function h8e(t){return t.index}function B4(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function p8e(t){var e=h8e,r=A,n,i=du(30),s,a,o,l,u,d=1;t==null&&(t=[]);function A(g){return 1/Math.min(o[g.source.index],o[g.target.index])}function f(g){for(var x=0,v=t.length;x<d;++x)for(var y=0,w,b,S,C,T,B,_;y<v;++y)w=t[y],b=w.source,S=w.target,C=S.x+S.vx-b.x-b.vx||El(u),T=S.y+S.vy-b.y-b.vy||El(u),B=Math.sqrt(C*C+T*T),B=(B-s[y])/B*g*n[y],C*=B,T*=B,S.vx-=C*(_=l[y]),S.vy-=T*_,b.vx+=C*(_=1-_),b.vy+=T*_}function h(){if(a){var g,x=a.length,v=t.length,y=new Map(a.map((b,S)=>[e(b,S,a),b])),w;for(g=0,o=new Array(x);g<v;++g)w=t[g],w.index=g,typeof w.source!="object"&&(w.source=B4(y,w.source)),typeof w.target!="object"&&(w.target=B4(y,w.target)),o[w.source.index]=(o[w.source.index]||0)+1,o[w.target.index]=(o[w.target.index]||0)+1;for(g=0,l=new Array(v);g<v;++g)w=t[g],l[g]=o[w.source.index]/(o[w.source.index]+o[w.target.index]);n=new Array(v),m(),s=new Array(v),p()}}function m(){if(a)for(var g=0,x=t.length;g<x;++g)n[g]=+r(t[g],g,t)}function p(){if(a)for(var g=0,x=t.length;g<x;++g)s[g]=+i(t[g],g,t)}return f.initialize=function(g,x){a=g,u=x,h()},f.links=function(g){return arguments.length?(t=g,h(),f):t},f.id=function(g){return arguments.length?(e=g,f):e},f.iterations=function(g){return arguments.length?(d=+g,f):d},f.strength=function(g){return arguments.length?(r=typeof g=="function"?g:du(+g),m(),f):r},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:du(+g),p(),f):i},f}const m8e=1664525,g8e=1013904223,_4=4294967296;function x8e(){let t=1;return()=>(t=(m8e*t+g8e)%_4)/_4}function v8e(t){return t.x}function y8e(t){return t.y}var b8e=10,w8e=Math.PI*(3-Math.sqrt(5));function E8e(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),s=0,a=.6,o=new Map,l=LR(A),u=M1("tick","end"),d=x8e();t==null&&(t=[]);function A(){f(),u.call("tick",e),r<n&&(l.stop(),u.call("end",e))}function f(p){var g,x=t.length,v;p===void 0&&(p=1);for(var y=0;y<p;++y)for(r+=(s-r)*i,o.forEach(function(w){w(r)}),g=0;g<x;++g)v=t[g],v.fx==null?v.x+=v.vx*=a:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=a:(v.y=v.fy,v.vy=0);return e}function h(){for(var p=0,g=t.length,x;p<g;++p){if(x=t[p],x.index=p,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var v=b8e*Math.sqrt(.5+p),y=p*w8e;x.x=v*Math.cos(y),x.y=v*Math.sin(y)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function m(p){return p.initialize&&p.initialize(t,d),p}return h(),e={tick:f,restart:function(){return l.restart(A),e},stop:function(){return l.stop(),e},nodes:function(p){return arguments.length?(t=p,h(),o.forEach(m),e):t},alpha:function(p){return arguments.length?(r=+p,e):r},alphaMin:function(p){return arguments.length?(n=+p,e):n},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(s=+p,e):s},velocityDecay:function(p){return arguments.length?(a=1-p,e):1-a},randomSource:function(p){return arguments.length?(d=p,o.forEach(m),e):d},force:function(p,g){return arguments.length>1?(g==null?o.delete(p):o.set(p,m(g)),e):o.get(p)},find:function(p,g,x){var v=0,y=t.length,w,b,S,C,T;for(x==null?x=1/0:x*=x,v=0;v<y;++v)C=t[v],w=p-C.x,b=g-C.y,S=w*w+b*b,S<x&&(T=C,x=S);return T},on:function(p,g){return arguments.length>1?(u.on(p,g),e):u.on(p)}}}function S8e(){var t,e,r,n,i=du(-30),s,a=1,o=1/0,l=.81;function u(h){var m,p=t.length,g=DR(t,v8e,y8e).visitAfter(A);for(n=h,m=0;m<p;++m)e=t[m],g.visit(f)}function d(){if(t){var h,m=t.length,p;for(s=new Array(m),h=0;h<m;++h)p=t[h],s[p.index]=+i(p,h,t)}}function A(h){var m=0,p,g,x=0,v,y,w;if(h.length){for(v=y=w=0;w<4;++w)(p=h[w])&&(g=Math.abs(p.value))&&(m+=p.value,x+=g,v+=g*p.x,y+=g*p.y);h.x=v/x,h.y=y/x}else{p=h,p.x=p.data.x,p.y=p.data.y;do m+=s[p.data.index];while(p=p.next)}h.value=m}function f(h,m,p,g){if(!h.value)return!0;var x=h.x-e.x,v=h.y-e.y,y=g-m,w=x*x+v*v;if(y*y/l<w)return w<o&&(x===0&&(x=El(r),w+=x*x),v===0&&(v=El(r),w+=v*v),w<a&&(w=Math.sqrt(a*w)),e.vx+=x*h.value*n/w,e.vy+=v*h.value*n/w),!0;if(h.length||w>=o)return;(h.data!==e||h.next)&&(x===0&&(x=El(r),w+=x*x),v===0&&(v=El(r),w+=v*v),w<a&&(w=Math.sqrt(a*w)));do h.data!==e&&(y=s[h.data.index]*n/w,e.vx+=x*y,e.vy+=v*y);while(h=h.next)}return u.initialize=function(h,m){t=h,r=m,d()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:du(+h),d(),u):i},u.distanceMin=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.distanceMax=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function Dh(t,e,r){this.k=t,this.x=e,this.y=r}Dh.prototype={constructor:Dh,scale:function(t){return t===1?this:new Dh(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Dh(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dh.prototype;const C8e=t=>t.eventName==="PASS"||t.eventName==="Successful Pass"||t.eventName==="PASS_SUCCESS"||t.eventName==="pass_start"||t.eventName==="pass_end";function T8e(t,e){const r=e==null?void 0:e.find(n=>n.id!==void 0&&n.id===t||n.number!==void 0&&n.number===t);return(r==null?void 0:r.name)||`Player ${t}`}function B8e(t,e){const r=new Map;return t.forEach(n=>{const i=e.filter(a=>a.to===n.playerId).length,s=e.filter(a=>a.from===n.playerId).length;r.set(n.playerId,i*s)}),r}function _8e(t,e){return t<=1?0:e/(t*(t-1))}const N8e=(t,e)=>{t.forEach(r=>r.influence=1);for(let r=0;r<5;r++){const n=new Map;e.forEach(s=>{var l;const a=typeof s.source=="object"?s.source.playerId:s.source,o=typeof s.target=="object"?s.target.playerId:s.target;n.set(o,(n.get(o)||0)+(((l=t.find(u=>u.playerId===a))==null?void 0:l.influence)||0))});const i=Math.max(...Array.from(n.values()),1);t.forEach(s=>s.influence=(n.get(s.playerId)||0)/i)}};function I8e(t,e,r=[],n=8){const i=t.filter(b=>b.team===e&&C8e(b)).sort((b,S)=>(Number(b.videoTime)||Number(b.timestamp)||0)-(Number(S.videoTime)||Number(S.timestamp)||0));if(i.length===0)return N4(e);const s=i.filter(b=>{var S;return((S=b.player)==null?void 0:S.id)!==void 0});if(s.length===0)return N4(e);const a=[];for(let b=0;b<s.length-1;b++){const S=s[b],C=s[b+1],T=(Number(C.videoTime)||Number(C.timestamp)||0)-(Number(S.videoTime)||Number(S.timestamp)||0);S.player.id!==C.player.id&&T>=0&&T<n&&a.push({from:S.player.id,to:C.player.id})}const o=new Map;a.forEach(({from:b,to:S})=>{const C=`${b}-${S}`;o.has(C)?o.get(C).count++:o.set(C,{from:b,to:S,count:1,team:e,bidirectional:!1})});const l=Array.from(o.values());l.forEach(b=>{const S=`${b.to}-${b.from}`;o.has(S)&&(b.bidirectional=!0)});const u=new Map;l.forEach(b=>{[b.from,b.to].forEach(S=>{u.has(S)||u.set(S,{playerId:S,playerName:T8e(S,r),team:e,passesGiven:0,passesReceived:0,centrality:0,betweenness:0,totalInvolvement:0,influence:0,reliability:.8,threat:0,role:"Asset"})}),u.get(b.from).passesGiven+=b.count,u.get(b.to).passesReceived+=b.count,u.get(b.from).totalInvolvement+=b.count,u.get(b.to).totalInvolvement+=b.count});const d=Array.from(u.values()),A=B8e(d,l),f=Math.max(...Array.from(A.values()),1),h=new Map;t.filter(b=>{var S;return b.team===e&&((S=b.player)==null?void 0:S.id)}).forEach(b=>{if(b.qualityRating){const S=h.get(b.player.id)||[];S.push(b.qualityRating),h.set(b.player.id,S)}}),d.forEach(b=>{const S=b.passesGiven+b.passesReceived;b.centrality=d.length>1?S/((d.length-1)*2):0,b.betweenness=(A.get(b.playerId)||0)/f;const C=i.filter(_=>{var I;return((I=_.player)==null?void 0:I.id)===b.playerId}),T=C.filter(_=>(_.endX||0)>70).length;b.threat=T/(C.length||1);const B=h.get(b.playerId);B&&B.length>0?b.reliability=B.reduce((_,I)=>_+I,0)/(B.length*5):b.reliability=0,b.betweenness>.7?b.role="Tactical Hub":b.threat>.4?b.role="Incisive Outlet":b.passesGiven>b.passesReceived*1.5?b.role="Distributor":b.passesReceived>b.passesGiven*1.5?b.role="Target Asset":b.role="Connector"});const m=i.map(b=>Number(b.videoTime)||Number(b.timestamp)||0).filter(b=>b>0),p=m.length>1?Math.max(...m)-Math.min(...m):60,g=i.length/(p/60),x=i.filter(b=>(b.endX||0)>70).length,v=_8e(d.length,l.length),y=i.length>0?l.reduce((b,S)=>b+S.count,0)/i.length:0,w=l.length>0?l.reduce((b,S)=>b.count>S.count?b:S):null;return{team:e,connections:l,nodes:d,metrics:{totalPasses:l.reduce((b,S)=>b+S.count,0),uniquePassers:new Set(l.map(b=>b.from)).size,uniqueReceivers:new Set(l.map(b=>b.to)).size,avgPassesPerPlayer:d.length>0?Math.round(l.reduce((b,S)=>b+S.count,0)/d.length*10)/10:0,networkDensity:Math.round(v*100)/100,keyPasser:d.length>0?d.reduce((b,S)=>b.passesGiven>S.passesGiven?b:S):null,keyReceiver:d.length>0?d.reduce((b,S)=>b.passesReceived>S.passesReceived?b:S):null,mostCentralPlayer:d.length>0?d.reduce((b,S)=>b.betweenness>S.betweenness?b:S):null,mostFrequentConnection:w,bidirectionalConnections:l.filter(b=>b.bidirectional).length,transmissionRate:Math.round(g*10)/10,threatVectors:x,stabilityScore:y>.8?"OPTIMAL":y>.5?"STABLE":"FRAGILE",systemEntropy:v>.4?"LOW":v>.2?"STABLE":"HIGH"}}}function N4(t){return{team:t,connections:[],nodes:[],metrics:{totalPasses:0,uniquePassers:0,uniqueReceivers:0,avgPassesPerPlayer:0,networkDensity:0,keyPasser:null,keyReceiver:null,mostCentralPlayer:null,mostFrequentConnection:null,bidirectionalConnections:0,transmissionRate:0,threatVectors:0,stabilityScore:"N/A",systemEntropy:"N/A"}}}const P8e=({network:t,teamName:e="Team",width:r=800,height:n=600,showLabels:i=!0,highlightBidirectional:s=!0})=>{const a=E.useRef(null),[o,l]=E.useState(null);return E.useEffect(()=>{if(!a.current||t.nodes.length===0)return;const u=Um(a.current);u.selectAll("*").remove();const d=t.nodes.map(y=>({...y})),A=t.connections.map(y=>({source:y.from,target:y.to,weight:y.count,bidirectional:y.bidirectional}));N8e(d,A);const h=u.append("defs").append("filter").attr("id","neon-glow");h.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","blur");const m=h.append("feMerge");m.append("feMergeNode").attr("in","blur"),m.append("feMergeNode").attr("in","SourceGraphic");const p=E8e(d).force("link",p8e(A).id(y=>Number(y.playerId)).distance(150)).force("charge",S8e().strength(-1500)).force("center",WHe(r/2,n/2)).force("collision",f8e().radius(60)),g=u.append("g"),x=g.append("g").selectAll("path").data(A).enter().append("path").attr("stroke",y=>y.bidirectional&&s?"rgba(239, 68, 68, 0.6)":"rgba(34, 211, 238, 0.4)").attr("stroke-width",y=>Math.sqrt(y.weight)*3).attr("fill","none").attr("class",y=>y.weight>3?"animate-pulse":""),v=g.append("g").selectAll("g").data(d).enter().append("g").on("mouseenter",(y,w)=>l(w)).on("mouseleave",()=>l(null)).call(jQe().on("start",(y,w)=>{y.active||p.alphaTarget(.3).restart(),w.fx=w.x,w.fy=w.y}).on("drag",(y,w)=>{w.fx=y.x,w.fy=y.y}).on("end",(y,w)=>{y.active||p.alphaTarget(0),w.fx=null,w.fy=null}));return v.append("circle").attr("r",y=>20+(y.influence||0)*30).attr("fill","#0f172a").attr("stroke",y=>(y.influence||0)>.7?"#22d3ee":"#334155").attr("stroke-width",3).style("filter",y=>(y.influence||0)>.7?"url(#neon-glow)":"none"),v.append("text").attr("dy","0.35em").attr("text-anchor","middle").text(y=>y.playerName.split(" ").pop()||"").attr("fill","#f8fafc").style("font-size","11px").style("font-weight","900").style("text-transform","uppercase").style("pointer-events","none"),p.on("tick",()=>{x.attr("d",y=>{const w=y.target.x-y.source.x,b=y.target.y-y.source.y,S=Math.sqrt(w*w+b*b)*2;return`M${y.source.x},${y.source.y}A${S},${S} 0 0,1 ${y.target.x},${y.target.y}`}),v.attr("transform",y=>`translate(${y.x},${y.y})`)}),()=>{p.stop()}},[t,r,n,s]),t.nodes.length===0?c.jsxs(Fe,{className:"bg-[#020617] border-slate-800",children:[c.jsx(Dt,{children:c.jsx(Ot,{className:"text-cyan-400 uppercase italic",children:"Network Offline"})}),c.jsx(vt,{className:"h-40 flex items-center justify-center text-slate-500 font-mono text-xs",children:"SYSTEM_MESSAGE: NO_PASSING_DATA_IN_CURRENT_WINDOW"})]}):c.jsxs(Fe,{className:"bg-[#020617] border-slate-800 shadow-2xl overflow-hidden text-slate-200",children:[c.jsx(Dt,{className:"border-b border-slate-800 bg-slate-900/50 backdrop-blur-md",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs(Ot,{className:"text-2xl font-black tracking-tighter flex items-center gap-2 italic",children:[c.jsx(rne,{className:"text-cyan-400 w-6 h-6"}),"TACTICAL FLOW ",c.jsx("span",{className:"text-cyan-400",children:"OS"})]}),c.jsxs("div",{className:"text-[10px] text-slate-500 font-mono uppercase tracking-widest",children:[e," Network Synthesis // Nodes: ",t.nodes.length," // Flux: ",t.metrics.totalPasses]})]}),c.jsx("div",{className:"flex gap-4",children:c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs font-mono text-slate-500 uppercase",children:"Density"}),c.jsxs("div",{className:"text-lg font-black text-cyan-400",children:[(t.metrics.networkDensity*100).toFixed(1),"%"]})]})})]})}),c.jsxs(vt,{className:"p-0 relative",children:[c.jsx("svg",{ref:a,viewBox:`0 0 ${r} ${n}`,className:"w-full h-auto bg-[radial-gradient(#1e293b_1px,transparent_1px)] [background-size:25px_25px]"}),c.jsx("div",{className:"absolute top-6 left-6 space-y-2",children:t.nodes.sort((u,d)=>d.influence-u.influence).slice(0,3).map((u,d)=>c.jsxs("div",{className:"bg-slate-900/80 border border-slate-700 p-2 rounded-lg flex items-center gap-3 backdrop-blur-xl border-l-4 border-l-cyan-400 w-48",children:[c.jsxs("div",{className:"bg-cyan-500/10 text-cyan-400 text-[10px] font-black h-8 w-8 rounded flex items-center justify-center",children:["0",d+1]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("div",{className:"text-[9px] font-mono text-slate-500 uppercase truncate",children:["Primary ",u.role]}),c.jsx("div",{className:"text-xs font-bold uppercase italic truncate",children:u.playerName})]})]},u.playerId))}),o&&c.jsxs("div",{className:"absolute bottom-6 left-6 right-6 bg-cyan-950/40 border border-cyan-500/30 backdrop-blur-2xl p-4 rounded-xl flex justify-between animate-in fade-in slide-in-from-bottom-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"h-12 w-12 rounded-full border-2 border-cyan-400 flex items-center justify-center bg-cyan-400/10",children:c.jsx(un,{className:"text-cyan-400"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-black uppercase italic tracking-tighter",children:o.playerName}),c.jsxs("p",{className:"text-[10px] font-mono text-cyan-400 uppercase",children:["Influence: ",(o.influence*100).toFixed(1),"% // Role: ",o.role]})]})]}),c.jsxs("div",{className:"flex gap-8 text-right",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:"RELIABILITY"}),c.jsxs("div",{className:"text-xl font-black text-white",children:[Math.round(o.reliability*100),"%"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:"DELIVERED"}),c.jsx("div",{className:"text-xl font-black",children:o.passesGiven})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:"ACQUIRED"}),c.jsx("div",{className:"text-xl font-black",children:o.passesReceived})]})]})]})]}),c.jsx("div",{className:"bg-slate-900/80 p-6 grid grid-cols-4 gap-4 border-t border-slate-800",children:[{label:"Transmission Rate",val:`${t.metrics.transmissionRate} p/m`,icon:Eu},{label:"System Cohesion",val:`${(t.metrics.networkDensity*100).toFixed(0)}%`,icon:Mne},{label:"Entropy",val:t.metrics.systemEntropy,icon:Wi},{label:"Threat Vectors",val:t.metrics.threatVectors,icon:Io}].map((u,d)=>c.jsxs("div",{className:"space-y-1 border-r border-slate-800 last:border-0 px-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-mono text-slate-500 uppercase",children:[c.jsx(u.icon,{className:"w-3 h-3 text-cyan-500"})," ",u.label]}),c.jsx("div",{className:"text-lg font-black text-slate-200",children:u.val})]},d))}),c.jsxs("div",{className:"p-6 bg-slate-950/50",children:[c.jsxs("div",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-cyan-500 mb-4 flex items-center gap-3",children:[c.jsx("div",{className:"h-[1px] w-8 bg-cyan-500/50"})," Distribution Intelligence ",c.jsx("div",{className:"h-[1px] flex-1 bg-white/5"})]}),c.jsxs("div",{className:"border border-slate-800 rounded-lg overflow-hidden font-mono text-[11px]",children:[c.jsxs("div",{className:"bg-slate-900/50 grid grid-cols-5 p-3 font-bold text-slate-400 border-b border-slate-800",children:[c.jsx("div",{children:"ASSET_ID"}),c.jsx("div",{className:"text-center",children:"SENT"}),c.jsx("div",{className:"text-center",children:"RECV"}),c.jsx("div",{className:"text-center",children:"VOL"}),c.jsx("div",{className:"text-right",children:"CONNECTIVITY"})]}),t.nodes.sort((u,d)=>d.totalInvolvement-u.totalInvolvement).map(u=>c.jsxs("div",{className:"grid grid-cols-5 p-3 border-b border-slate-800/50 hover:bg-cyan-500/5 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[c.jsxs("span",{className:"text-cyan-500 opacity-50",children:["#",u.playerId]}),u.playerName.toUpperCase()]}),c.jsx("div",{className:"text-center",children:u.passesGiven}),c.jsx("div",{className:"text-center",children:u.passesReceived}),c.jsx("div",{className:"text-center font-bold text-cyan-400",children:u.totalInvolvement}),c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx("div",{className:"w-20 h-1 bg-slate-800 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-cyan-500",style:{width:`${u.centrality*100}%`}})}),c.jsxs("span",{className:"text-[9px] text-slate-500",children:[Math.round(u.centrality*100),"%"]})]})]},u.playerId))]})]})]})},R8e=({events:t,teamNames:e,teamARoster:r=[],teamBRoster:n=[]})=>{const[i,s]=E.useState("TEAM_A"),a=E.useMemo(()=>{const d=[],f=t.filter(h=>h.team===i&&h.x!==void 0&&h.y!==void 0).reduce((h,m)=>{var g;const p=((g=m.player)==null?void 0:g.id)||0;return h[p]||(h[p]=[]),h[p].push(m),h},{});return Object.keys(f).forEach(h=>{var x;const m=f[h],p=m.reduce((v,y)=>v+y.x,0)/m.length,g=m.reduce((v,y)=>v+y.y,0)/m.length;d.push({x:p,y:g,team:i==="TEAM_A"?"A":"B",id:h,name:((x=m[0].player)==null?void 0:x.name)||`P${h}`})}),d},[t,i]),o=E.useMemo(()=>{if(a.length<5)return"Analysing...";const d=a.filter(p=>p.x<35).length,A=a.filter(p=>p.x>=35&&p.x<70).length,f=a.filter(p=>p.x>=70).length,m=a.some(p=>p.x<15)?d-1:d;return m>0?`${m}-${A}-${f}`:"Searching..."},[a]),l=E.useMemo(()=>t.filter(d=>{if(d.team!==i||!d.eventName.toLowerCase().includes("pass")||d.x===void 0||d.endX===void 0)return!1;const A=d.x<70&&d.endX>=70,f=d.endX>=88.5&&d.endY>=13.85&&d.endY<=54.15;return A||f}),[t,i]),u=E.useMemo(()=>I8e(t,i,i==="TEAM_A"?r:n),[t,i,r,n]);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(un,{className:"w-5 h-5 text-primary"}),c.jsx("h2",{className:"text-xl font-bold uppercase tracking-tight",children:"Tactical Review"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:i==="TEAM_A"?"default":"outline",size:"sm",onClick:()=>s("TEAM_A"),children:e.teamA}),c.jsx(te,{variant:i==="TEAM_B"?"destructive":"outline",size:"sm",onClick:()=>s("TEAM_B"),children:e.teamB})]})]}),c.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[c.jsx("div",{className:"col-span-12 lg:col-span-8 space-y-4",children:c.jsxs(gg,{defaultValue:"positioning",className:"w-full",children:[c.jsxs(If,{className:"bg-muted/50 w-full justify-start border-b rounded-none h-12 p-0 px-4",children:[c.jsxs(Cs,{value:"positioning",className:"data-[state=active]:bg-primary/10 data-[state=active]:text-primary border-b-2 border-transparent data-[state=active]:border-primary rounded-none h-12 px-6",children:[c.jsx(Tne,{className:"w-4 h-4 mr-2"}),"Avg. Positioning"]}),c.jsxs(Cs,{value:"penetration",className:"data-[state=active]:bg-primary/10 data-[state=active]:text-primary border-b-2 border-transparent data-[state=active]:border-primary rounded-none h-12 px-6",children:[c.jsx(Gre,{className:"w-4 h-4 mr-2"}),"Penetration Map"]}),c.jsxs(Cs,{value:"network",className:"data-[state=active]:bg-primary/10 data-[state=active]:text-primary border-b-2 border-transparent data-[state=active]:border-primary rounded-none h-12 px-6",children:[c.jsx(Bne,{className:"w-4 h-4 mr-2"}),"Pass Network"]})]}),c.jsx(yn,{value:"positioning",className:"mt-4 pt-0",children:c.jsxs(Fe,{className:"border-2 border-primary/5 shadow-xl overflow-hidden bg-white/5 backdrop-blur-sm",children:[c.jsxs(Dt,{className:"p-4 pb-0",children:[c.jsx(Ot,{className:"text-sm font-medium",children:"Centroid Clusters"}),c.jsx(yi,{className:"text-xs",children:"Average locations of all logged touches per player"})]}),c.jsx(vt,{className:"p-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(VB,{playerPositions:a,className:"border border-white/10"}),c.jsx("svg",{viewBox:"0 0 105 68",className:"absolute inset-0 pointer-events-none p-4",children:a.map(d=>c.jsx("text",{x:d.x,y:d.y-3,textAnchor:"middle",className:"text-[2px] font-bold fill-white drop-shadow-md",children:d.name},d.id))})]})})]})}),c.jsx(yn,{value:"penetration",className:"mt-4 pt-0",children:c.jsxs(Fe,{className:"border-2 border-primary/5 shadow-xl overflow-hidden bg-white/5 backdrop-blur-sm",children:[c.jsxs(Dt,{className:"p-4 pb-0",children:[c.jsx(Ot,{className:"text-sm font-medium",children:"Vertical Penetration"}),c.jsx(yi,{className:"text-xs",children:"Passes entering the Final Third or the Box"})]}),c.jsx(vt,{className:"p-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(VB,{className:"border border-white/10"}),c.jsxs("svg",{viewBox:"0 0 105 68",className:"absolute inset-0 pointer-events-none p-4",children:[c.jsx("defs",{children:c.jsx("marker",{id:"arrow",markerWidth:"2",markerHeight:"2",refX:"1",refY:"1",orient:"auto",children:c.jsx("polyline",{points:"0,0 2,1 0,2",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"0.5"})})}),l.map((d,A)=>c.jsx("line",{x1:d.x,y1:d.y,x2:d.endX,y2:d.endY,stroke:"hsl(var(--primary))",strokeWidth:"0.4",opacity:"0.6",markerEnd:"url(#arrow)"},A))]})]})})]})}),c.jsx(yn,{value:"network",className:"mt-4 pt-0",children:c.jsxs(Fe,{className:"border-2 border-primary/5 shadow-xl overflow-hidden bg-white/5 backdrop-blur-sm",children:[c.jsxs(Dt,{className:"p-4 pb-0",children:[c.jsx(Ot,{className:"text-sm font-medium",children:"Passing Dynamics"}),c.jsx(yi,{className:"text-xs",children:"Visualizing the core distribution hubs"})]}),c.jsx(vt,{className:"p-4",children:c.jsx(P8e,{network:u,teamName:i==="TEAM_A"?e.teamA:e.teamB,width:700,height:450})})]})})]})}),c.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-4",children:[c.jsxs(Fe,{children:[c.jsx(Dt,{className:"p-4 pb-2",children:c.jsxs(Ot,{className:"text-sm font-bold flex items-center gap-2",children:[c.jsx(cg,{className:"w-4 h-4 text-primary"}),"Match Momentum"]})}),c.jsx(vt,{className:"p-4 pt-0",children:c.jsx("div",{className:"h-32",children:c.jsx(V3e,{events:t})})})]}),c.jsxs(Fe,{children:[c.jsx(Dt,{className:"p-4 pb-2",children:c.jsxs(Ot,{className:"text-sm font-bold flex items-center gap-2",children:[c.jsx(Wi,{className:"w-4 h-4 text-primary"}),"Efficiency Metrics"]})}),c.jsxs(vt,{className:"p-4 pt-0 space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/30",children:[c.jsx("div",{className:"text-xs text-muted-foreground",children:"Detected Formation"}),c.jsx("div",{className:"text-xl font-bold text-primary",children:o})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/30",children:[c.jsx("div",{className:"text-xs text-muted-foreground",children:"Line-Breaking Passes"}),c.jsx("div",{className:"text-xl font-bold text-primary",children:l.length})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/30",children:[c.jsx("div",{className:"text-xs text-muted-foreground",children:"Network Density"}),c.jsxs("div",{className:"text-xl font-bold text-primary",children:[(u.metrics.networkDensity*100).toFixed(0),"%"]})]}),c.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/30",children:[c.jsx("div",{className:"text-xs text-muted-foreground",children:"Transition Speed"}),c.jsx("div",{className:"text-xl font-bold text-primary",children:"High"})]})]})]}),c.jsxs(Fe,{className:"bg-primary/5 border-primary/10",children:[c.jsx(Dt,{className:"p-4 pb-2",children:c.jsx(Ot,{className:"text-sm font-bold text-primary",children:"Tactical Insight"})}),c.jsx(vt,{className:"p-4 pt-0",children:c.jsx("p",{className:"text-xs leading-relaxed text-muted-foreground",children:l.length>5?`${e[i==="TEAM_A"?"teamA":"teamB"]} is effectively exploiting the half-spaces and finding vertical lanes into the box.`:`${e[i==="TEAM_A"?"teamA":"teamB"]} is struggling to advance the ball centrally. Consider increasing lateral circulation to stretch the block.`})})]})]})]})]})},k8e=({events:t,teamNames:e,teamARoster:r,teamBRoster:n})=>c.jsxs("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar",children:[c.jsx("div",{className:"mb-6 flex items-center justify-between",children:c.jsxs("h2",{className:"text-xl font-bold uppercase tracking-wider text-primary flex items-center gap-2",children:[c.jsx(un,{className:"h-5 w-5"})," Tactical Review"]})}),c.jsx(R8e,{events:t,teamNames:e,teamARoster:(r==null?void 0:r.PlayerData)||[],teamBRoster:(n==null?void 0:n.PlayerData)||[]})]}),L8e=({mappings:t,pressedButtons:e,updateMapping:r,resetMappings:n,events:i})=>c.jsxs("div",{className:"flex-1 p-8 grid grid-cols-1 lg:grid-cols-2 gap-8 overflow-y-auto",children:[c.jsxs(Fe,{className:"bg-card/30 backdrop-blur-md",children:[c.jsx(Dt,{children:c.jsx(Ot,{children:"Button Mappings"})}),c.jsx(vt,{children:c.jsx(fz,{mappings:t,pressedButtons:e,onUpdateMapping:r,onResetMappings:n})})]}),c.jsxs(Fe,{className:"bg-card/30 backdrop-blur-md",children:[c.jsx(Dt,{children:c.jsx(Ot,{children:"System Log"})}),c.jsx(vt,{className:"h-[400px] overflow-y-auto font-mono text-[10px]",children:i.map((s,a)=>c.jsxs("div",{className:"border-b border-border/50 py-1 flex justify-between",children:[c.jsxs("span",{children:["[",s.timestamp.split("T")[1].split(".")[0],"] ",s.eventName]}),c.jsx("span",{className:"text-muted-foreground",children:s.team})]},a))})]})]}),lA=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{className:"relative w-full overflow-auto",children:c.jsx("table",{ref:r,className:Z("w-full caption-bottom text-sm",t),...e})}));lA.displayName="Table";const cA=E.forwardRef(({className:t,...e},r)=>c.jsx("thead",{ref:r,className:Z("[&_tr]:border-b",t),...e}));cA.displayName="TableHeader";const uA=E.forwardRef(({className:t,...e},r)=>c.jsx("tbody",{ref:r,className:Z("[&_tr:last-child]:border-0",t),...e}));uA.displayName="TableBody";const j8e=E.forwardRef(({className:t,...e},r)=>c.jsx("tfoot",{ref:r,className:Z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));j8e.displayName="TableFooter";const ci=E.forwardRef(({className:t,...e},r)=>c.jsx("tr",{ref:r,className:Z("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));ci.displayName="TableRow";const ir=E.forwardRef(({className:t,...e},r)=>c.jsx("th",{ref:r,className:Z("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));ir.displayName="TableHead";const qt=E.forwardRef(({className:t,...e},r)=>c.jsx("td",{ref:r,className:Z("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));qt.displayName="TableCell";const M8e=E.forwardRef(({className:t,...e},r)=>c.jsx("caption",{ref:r,className:Z("mt-4 text-sm text-muted-foreground",t),...e}));M8e.displayName="TableCaption";function D8e(){const[t,e]=E.useState([]),[r,n]=E.useState([]),[i,s]=E.useState([]),[a,o]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const[u,d]=await Promise.all([fetch(`${Cu}/api/community/leaderboard`,{headers:xl}),fetch(`${Cu}/api/community/clubs`,{headers:xl})]),A=await u.json(),f=await d.json();A.success&&(e(A.overall),n(A.monthly)),f.success&&s(f.clubs)}catch(u){console.error("Failed to fetch community data:",u)}finally{o(!1)}})()},[]),a?c.jsx("div",{className:"p-8 text-center text-muted-foreground animate-pulse font-mono tracking-widest uppercase",children:"Syncing Community Data..."}):c.jsxs("div",{className:"p-6 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight text-primary",children:"Community Hub"}),c.jsx("p",{className:"text-muted-foreground",children:"Compete, rank up, and support your club in the national analyst community."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-sm",children:[c.jsxs(Fe,{className:"border-primary/20 bg-card/30 backdrop-blur-md shadow-xl overflow-hidden group",children:[c.jsxs(Dt,{className:"bg-primary/5 border-b border-primary/10",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wu,{className:"h-5 w-5 text-yellow-500 group-hover:scale-110 transition-transform"}),c.jsx(Ot,{className:"text-base uppercase tracking-wider",children:"Top Analysts Monthly"})]}),c.jsx(We,{variant:"outline",className:"animate-pulse border-yellow-500/50 text-yellow-500",children:"Active"})]}),c.jsx(yi,{className:"text-xs",children:'Top 10 earn the "Analyste Or" badge'})]}),c.jsx(vt,{className:"p-0",children:c.jsxs(lA,{children:[c.jsx(cA,{children:c.jsxs(ci,{className:"hover:bg-transparent",children:[c.jsx(ir,{className:"w-12 text-center",children:"#"}),c.jsx(ir,{children:"User"}),c.jsx(ir,{className:"text-right",children:"XP"})]})}),c.jsxs(uA,{children:[r.map((l,u)=>c.jsxs(ci,{className:"hover:bg-primary/5 transition-colors border-primary/5",children:[c.jsx(qt,{className:"text-center font-mono font-bold text-muted-foreground",children:u===0?"":u===1?"":u===2?"":u+1}),c.jsx(qt,{className:"font-medium",children:l.nickname}),c.jsx(qt,{className:"text-right font-mono text-primary",children:l.xp})]},u)),r.length===0&&c.jsx(ci,{children:c.jsx(qt,{colSpan:3,className:"text-center py-8 text-muted-foreground opacity-50 italic",children:"No data this month"})})]})]})})]}),c.jsxs(Fe,{className:"border-blue-500/20 bg-card/30 backdrop-blur-md shadow-xl overflow-hidden group",children:[c.jsxs(Dt,{className:"bg-blue-500/5 border-b border-blue-500/10",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(go,{className:"h-5 w-5 text-blue-500 group-hover:scale-110 transition-transform"}),c.jsx(Ot,{className:"text-base uppercase tracking-wider",children:"Inter-Club Rankings"})]})}),c.jsx(yi,{className:"text-xs",children:"Combined XP of all club supporters"})]}),c.jsx(vt,{className:"p-0",children:c.jsxs(lA,{children:[c.jsx(cA,{children:c.jsxs(ci,{className:"hover:bg-transparent",children:[c.jsx(ir,{children:"Club"}),c.jsx(ir,{className:"text-center",children:"Members"}),c.jsx(ir,{className:"text-right",children:"Total XP"})]})}),c.jsxs(uA,{children:[i.map((l,u)=>c.jsxs(ci,{className:"hover:bg-blue-500/5 transition-colors border-blue-500/5",children:[c.jsx(qt,{className:"font-bold",children:l.name}),c.jsx(qt,{className:"text-center",children:c.jsxs("div",{className:"flex items-center justify-center gap-1 text-muted-foreground",children:[c.jsx(go,{className:"h-3 w-3"})," ",l.members]})}),c.jsx(qt,{className:"text-right font-mono text-blue-500",children:l.xp})]},u)),i.length===0&&c.jsx(ci,{children:c.jsx(qt,{colSpan:3,className:"text-center py-8 text-muted-foreground opacity-50 italic",children:"No clubs recorded"})})]})]})})]}),c.jsxs(Fe,{className:"border-purple-500/20 bg-card/30 backdrop-blur-md shadow-xl overflow-hidden group",children:[c.jsxs(Dt,{className:"bg-purple-500/5 border-b border-purple-500/10",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(yne,{className:"h-5 w-5 text-purple-500 group-hover:scale-110 transition-transform"}),c.jsx(Ot,{className:"text-base uppercase tracking-wider",children:"Hall of Fame"})]})}),c.jsx(yi,{className:"text-xs",children:"Legendary analyst status across all time"})]}),c.jsx(vt,{className:"p-0",children:c.jsxs(lA,{children:[c.jsx(cA,{children:c.jsxs(ci,{className:"hover:bg-transparent",children:[c.jsx(ir,{children:"User"}),c.jsx(ir,{className:"text-right",children:"Total XP"})]})}),c.jsx(uA,{children:t.map((l,u)=>c.jsxs(ci,{className:"hover:bg-purple-500/5 transition-colors border-purple-500/5",children:[c.jsxs(qt,{className:"font-medium flex items-center gap-2",children:[l.nickname,l.xp>1e3&&c.jsx(zre,{className:"h-3.5 w-3.5 text-purple-500"})]}),c.jsx(qt,{className:"text-right font-mono text-purple-500",children:l.xp})]},u))})]})})]})]})]})}const O8e=()=>{const[t,e]=E.useState([]),[r,n]=E.useState(!1),[i,s]=E.useState(null),a=async()=>{n(!0);try{const u=await fetch(`${hr}/api/videos`);if(u.ok){const d=await u.json();e(d)}}catch(u){console.error("Failed to fetch videos:",u)}finally{n(!1)}};E.useEffect(()=>{a()},[]);const o=u=>{if(u===0)return"0 B";const d=1024,A=["B","KB","MB","GB"],f=Math.floor(Math.log(u)/Math.log(d));return parseFloat((u/Math.pow(d,f)).toFixed(2))+" "+A[f]},l=(u,d,A,f)=>u.length===0&&!d?c.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500 text-xs",children:[c.jsx(GT,{className:"w-8 h-8 mb-2 opacity-20"}),"No extracted clips found."]}):c.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:u.map(h=>c.jsxs(Ba,{children:[c.jsx(EP,{asChild:!0,children:c.jsxs("div",{className:"group relative aspect-video bg-black/40 rounded-lg border border-white/5 overflow-hidden cursor-pointer hover:border-purple-500/50 transition-all hover:scale-[1.02]",onClick:()=>A(h),children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/40 transition-colors",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600/80 flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform",children:c.jsx(ho,{className:"w-4 h-4 text-white fill-current"})})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/90 to-transparent",children:[c.jsx("p",{className:"text-[10px] font-bold text-white truncate",children:h.filename}),c.jsxs("div",{className:"flex items-center justify-between text-[9px] text-slate-400 mt-0.5",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Yre,{className:"w-2 h-2"}),new Date(h.date).toLocaleDateString()]}),c.jsx("span",{children:f(h.size)})]})]})]})}),c.jsxs(Rs,{className:"max-w-4xl bg-black border-white/10 p-1",children:[c.jsx(ks,{className:"p-4 absolute top-0 left-0 z-10 w-full bg-gradient-to-b from-black/80 to-transparent pointer-events-none",children:c.jsx(Ls,{className:"text-white text-sm font-mono shadow-black drop-shadow-md",children:h.filename})}),c.jsx("div",{className:"aspect-video w-full bg-black flex items-center justify-center overflow-hidden rounded-sm",children:c.jsx("video",{src:`${hr}${h.url}`,controls:!0,autoPlay:!0,className:"w-full h-full object-contain"})}),c.jsxs("div",{className:"p-2 flex justify-between text-xs text-slate-400 font-mono bg-slate-900/50",children:[c.jsx("span",{children:new Date(h.date).toLocaleString()}),c.jsx("span",{children:f(h.size)})]})]})]},h.path))});return c.jsxs(Fe,{className:"h-full bg-slate-950 border-white/10 flex flex-col",children:[c.jsxs(Dt,{className:"p-4 border-b border-white/10 bg-slate-900/50 flex flex-row items-center justify-between",children:[c.jsxs(Ot,{className:"text-sm font-bold flex items-center gap-2 text-white",children:[c.jsx(GT,{className:"w-4 h-4 text-purple-400"}),"Video Library",c.jsx(We,{variant:"outline",className:"ml-2 bg-purple-500/10 text-purple-400 border-purple-500/20",children:t.length})]}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:a,disabled:r,children:c.jsx(Xl,{className:`w-3.5 h-3.5 ${r?"animate-spin":""}`})})]}),c.jsx(vt,{className:"p-0 flex-1 min-h-0 bg-slate-950/30",children:c.jsxs(gg,{defaultValue:"all",className:"h-full flex flex-col",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-white/5 flex items-center gap-2 overflow-x-auto no-scrollbar bg-slate-900/20",children:[c.jsx(dI,{className:"w-4 h-4 text-muted-foreground mr-2 shrink-0"}),c.jsxs(If,{className:"bg-transparent p-0 h-auto gap-2",children:[c.jsx(Cs,{value:"all",className:"data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300 border border-transparent data-[state=active]:border-purple-500/20 rounded-md px-3 py-1.5 h-auto text-xs",children:"All Clips"}),Array.from(new Set(t.map(u=>u.path.split(/[/\\]/)[0]))).filter(u=>u&&!u.endsWith(".mp4")).sort().map(u=>c.jsx(Cs,{value:u,className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-300 border border-transparent data-[state=active]:border-blue-500/20 rounded-md px-3 py-1.5 h-auto text-xs uppercase",children:u},u))]})]}),c.jsxs(Zn,{className:"flex-1 p-4",children:[c.jsx(yn,{value:"all",className:"m-0 mt-0",children:l(t,r,s,o)}),Array.from(new Set(t.map(u=>u.path.split(/[/\\]/)[0]))).map(u=>c.jsx(yn,{value:u,className:"m-0 mt-0",children:l(t.filter(d=>d.path.startsWith(u)),r,s,o)},u))]})]})})]})},F8e=({onSelectMode:t})=>c.jsx("div",{id:"session-mode-modal",className:"fixed inset-0 z-[100] bg-background/80 backdrop-blur-sm flex items-center justify-center p-4",children:c.jsxs(Fe,{className:"max-w-3xl w-full bg-card shadow-2xl border-primary/20 animate-in fade-in zoom-in duration-300",children:[c.jsxs(Dt,{className:"text-center pb-8 border-b border-border/50",children:[c.jsx(Ot,{className:"text-2xl md:text-3xl font-bold tracking-tight text-primary",children:"Select Session Mode"}),c.jsx(yi,{className:"text-base mt-2",children:"Choose how you would like to work in this session."})]}),c.jsxs(vt,{className:"grid md:grid-cols-2 gap-6 p-8",children:[c.jsxs("button",{className:"group relative flex flex-col items-center justify-center p-8 h-64 border-2 border-border rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all duration-200 text-center space-y-4",onClick:()=>t("collab"),children:[c.jsx("div",{className:"p-4 rounded-full bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors duration-200",children:c.jsx(go,{size:32})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-xl font-bold group-hover:text-primary transition-colors",children:"Collaboration"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Join the Voice Room and collaborate with others in real-time."})]}),c.jsx("div",{className:"absolute bottom-6 opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200",children:c.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold uppercase tracking-wider text-primary",children:["Start Session ",c.jsx(ql,{size:12})]})})]}),c.jsxs("button",{className:"group relative flex flex-col items-center justify-center p-8 h-64 border-2 border-border rounded-xl hover:border-muted-foreground/50 hover:bg-secondary/50 transition-all duration-200 text-center space-y-4",onClick:()=>t("individual"),children:[c.jsx("div",{className:"p-4 rounded-full bg-secondary text-secondary-foreground group-hover:bg-muted-foreground group-hover:text-white transition-colors duration-200",children:c.jsx(p8,{size:32})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-xl font-bold group-hover:text-foreground transition-colors",children:"Individual Work"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Work offline or independently without voice features."})]}),c.jsx("div",{className:"absolute bottom-6 opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200",children:c.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold uppercase tracking-wider text-muted-foreground",children:["Enter Dashboard ",c.jsx(ql,{size:12})]})})]})]})]})}),U8e=({connectedPeers:t,onStartSession:e})=>c.jsx("div",{className:"absolute inset-0 z-50 bg-background/60 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs(Fe,{className:"max-w-md w-full bg-card shadow-2xl border-primary/20 animate-in fade-in zoom-in duration-300",children:[c.jsxs(Dt,{className:"text-center border-b border-border/50 pb-6",children:[c.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:c.jsx(go,{className:"w-6 h-6 text-primary"})}),c.jsx(Ot,{className:"text-2xl font-bold tracking-tight",children:"Waiting Room"}),c.jsx(yi,{children:"Waiting for testers to join the voice room."})]}),c.jsx(vt,{className:"py-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between px-2 text-xs font-semibold uppercase text-muted-foreground tracking-wider",children:[c.jsx("span",{children:"Connected Users"}),c.jsxs("span",{children:[t.length," Online"]})]}),c.jsx("div",{className:"bg-muted/30 rounded-lg border border-border/50 p-2 min-h-[120px] max-h-[200px] overflow-y-auto space-y-1",children:t.length===0?c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground py-8 opacity-50",children:[c.jsx(Qx,{size:24,className:"mb-2"}),c.jsx("span",{className:"text-xs",children:"No users connected yet..."})]}):t.map((r,n)=>c.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-md bg-card border border-border/50 shadow-sm animate-in slide-in-from-bottom-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 text-indigo-500 flex items-center justify-center",children:c.jsx(Hv,{size:14})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-xs font-bold text-foreground",children:r.name}),c.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:r.role}),c.jsxs("div",{className:"text-[10px] text-green-500 font-medium flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"})," Connected"]})]})]},n))})]})}),c.jsxs(WI,{className:"pt-4 border-t border-border/50 flex flex-col gap-3",children:[c.jsxs(te,{className:"w-full gap-2 font-bold tracking-wide",size:"lg",onClick:e,children:[c.jsx(ho,{size:16,fill:"currentColor"})," START SESSION"]}),c.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"You can start the session at any time. Late joiners can still connect."})]})]})});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SN=function(t,e){return SN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},SN(t,e)};function Ds(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");SN(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var CN=function(){return CN=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},CN.apply(this,arguments)};function _n(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(d){try{u(n.next(d))}catch(A){a(A)}}function l(d){try{u(n.throw(d))}catch(A){a(A)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((n=n.apply(t,[])).next())})}function pn(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function $0(t,e,r){if(arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var Bo=function(){function t(e,r,n,i){this.left=e,this.top=r,this.width=n,this.height=i}return t.prototype.add=function(e,r,n,i){return new t(this.left+e,this.top+r,this.width+n,this.height+i)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(i){return i.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),U1=function(t,e){return Bo.fromClientRect(t,e.getBoundingClientRect())},$8e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),i=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Bo(0,0,n,i)},$1=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},gr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,s="";++i<r;){var a=t[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},I4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q8e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Q0=0;Q0<I4.length;Q0++)Q8e[I4.charCodeAt(Q0)]=Q0;var P4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H0=0;H0<P4.length;H0++)Oh[P4.charCodeAt(H0)]=H0;var H8e=function(t){var e=t.length*.75,r=t.length,n,i=0,s,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Oh[t.charCodeAt(n)],a=Oh[t.charCodeAt(n+1)],o=Oh[t.charCodeAt(n+2)],l=Oh[t.charCodeAt(n+3)],d[i++]=s<<2|a>>4,d[i++]=(a&15)<<4|o>>2,d[i++]=(o&3)<<6|l&63;return u},K8e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},V8e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Au=5,FR=11,AC=2,G8e=FR-Au,cq=65536>>Au,z8e=1<<Au,fC=z8e-1,W8e=1024>>Au,Y8e=cq+W8e,q8e=Y8e,X8e=32,Z8e=q8e+X8e,J8e=65536>>FR,e6e=1<<G8e,t6e=e6e-1,R4=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},r6e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},n6e=function(t,e){var r=H8e(t),n=Array.isArray(r)?V8e(r):new Uint32Array(r),i=Array.isArray(r)?K8e(r):new Uint16Array(r),s=24,a=R4(i,s/2,n[4]/2),o=n[5]===2?R4(i,(s+n[4])/2):r6e(n,Math.ceil((s+n[4])/4));return new i6e(n[0],n[1],n[2],n[3],a,o)},i6e=function(){function t(e,r,n,i,s,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Au],r=(r<<AC)+(e&fC),this.data[r];if(e<=65535)return r=this.index[cq+(e-55296>>Au)],r=(r<<AC)+(e&fC),this.data[r];if(e<this.highStart)return r=Z8e-J8e+(e>>FR),r=this.index[r],r+=e>>Au&t6e,r=this.index[r],r=(r<<AC)+(e&fC),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),k4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s6e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var K0=0;K0<k4.length;K0++)s6e[k4.charCodeAt(K0)]=K0;var a6e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",L4=50,o6e=1,uq=2,dq=3,l6e=4,c6e=5,j4=7,Aq=8,M4=9,Sl=10,TN=11,D4=12,BN=13,u6e=14,Fh=15,_N=16,V0=17,gh=18,d6e=19,O4=20,NN=21,xh=22,hC=23,ld=24,ni=25,Uh=26,$h=27,cd=28,A6e=29,Mc=30,f6e=31,G0=32,z0=33,IN=34,PN=35,RN=36,Hm=37,kN=38,lv=39,cv=40,pC=41,fq=42,h6e=43,p6e=[9001,65288],hq="!",dt="",W0="",LN=n6e(a6e),Oa=[Mc,RN],jN=[o6e,uq,dq,c6e],pq=[Sl,Aq],F4=[$h,Uh],m6e=jN.concat(pq),U4=[kN,lv,cv,IN,PN],g6e=[Fh,BN],x6e=function(t,e){e===void 0&&(e="strict");var r=[],n=[],i=[];return t.forEach(function(s,a){var o=LN.get(s);if(o>L4?(i.push(!0),o-=L4):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(a),r.push(_N);if(o===l6e||o===TN){if(a===0)return n.push(a),r.push(Mc);var l=r[a-1];return m6e.indexOf(l)===-1?(n.push(n[a-1]),r.push(l)):(n.push(a),r.push(Mc))}if(n.push(a),o===f6e)return r.push(e==="strict"?NN:Hm);if(o===fq||o===A6e)return r.push(Mc);if(o===h6e)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Hm):r.push(Mc);r.push(o)}),[n,r,i]},mC=function(t,e,r,n){var i=n[r];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var s=r;s<=n.length;){s++;var a=n[s];if(a===e)return!0;if(a!==Sl)break}if(i===Sl)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var a=n[l];if(a===e)return!0;if(a!==Sl)break}if(o!==Sl)break}return!1},$4=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===Sl)r--;else return n}return 0},v6e=function(t,e,r,n,i){if(r[n]===0)return dt;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return dt;var a=s-1,o=s+1,l=e[s],u=a>=0?e[a]:0,d=e[o];if(l===uq&&d===dq)return dt;if(jN.indexOf(l)!==-1)return hq;if(jN.indexOf(d)!==-1||pq.indexOf(d)!==-1)return dt;if($4(s,e)===Aq)return W0;if(LN.get(t[s])===TN||(l===G0||l===z0)&&LN.get(t[o])===TN||l===j4||d===j4||l===M4||[Sl,BN,Fh].indexOf(l)===-1&&d===M4||[V0,gh,d6e,ld,cd].indexOf(d)!==-1||$4(s,e)===xh||mC(hC,xh,s,e)||mC([V0,gh],NN,s,e)||mC(D4,D4,s,e))return dt;if(l===Sl)return W0;if(l===hC||d===hC)return dt;if(d===_N||l===_N)return W0;if([BN,Fh,NN].indexOf(d)!==-1||l===u6e||u===RN&&g6e.indexOf(l)!==-1||l===cd&&d===RN||d===O4||Oa.indexOf(d)!==-1&&l===ni||Oa.indexOf(l)!==-1&&d===ni||l===$h&&[Hm,G0,z0].indexOf(d)!==-1||[Hm,G0,z0].indexOf(l)!==-1&&d===Uh||Oa.indexOf(l)!==-1&&F4.indexOf(d)!==-1||F4.indexOf(l)!==-1&&Oa.indexOf(d)!==-1||[$h,Uh].indexOf(l)!==-1&&(d===ni||[xh,Fh].indexOf(d)!==-1&&e[o+1]===ni)||[xh,Fh].indexOf(l)!==-1&&d===ni||l===ni&&[ni,cd,ld].indexOf(d)!==-1)return dt;if([ni,cd,ld,V0,gh].indexOf(d)!==-1)for(var A=s;A>=0;){var f=e[A];if(f===ni)return dt;if([cd,ld].indexOf(f)!==-1)A--;else break}if([$h,Uh].indexOf(d)!==-1)for(var A=[V0,gh].indexOf(l)!==-1?a:s;A>=0;){var f=e[A];if(f===ni)return dt;if([cd,ld].indexOf(f)!==-1)A--;else break}if(kN===l&&[kN,lv,IN,PN].indexOf(d)!==-1||[lv,IN].indexOf(l)!==-1&&[lv,cv].indexOf(d)!==-1||[cv,PN].indexOf(l)!==-1&&d===cv||U4.indexOf(l)!==-1&&[O4,Uh].indexOf(d)!==-1||U4.indexOf(d)!==-1&&l===$h||Oa.indexOf(l)!==-1&&Oa.indexOf(d)!==-1||l===ld&&Oa.indexOf(d)!==-1||Oa.concat(ni).indexOf(l)!==-1&&d===xh&&p6e.indexOf(t[o])===-1||Oa.concat(ni).indexOf(d)!==-1&&l===gh)return dt;if(l===pC&&d===pC){for(var h=r[s],m=1;h>0&&(h--,e[h]===pC);)m++;if(m%2!==0)return dt}return l===G0&&d===z0?dt:W0},y6e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=x6e(t,e.lineBreak),n=r[0],i=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[ni,Mc,fq].indexOf(o)!==-1?Hm:o}));var a=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,i,a]},b6e=function(){function t(e,r,n,i){this.codePoints=e,this.required=r===hq,this.start=n,this.end=i}return t.prototype.slice=function(){return gr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),w6e=function(t,e){var r=$1(t),n=y6e(r,e),i=n[0],s=n[1],a=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=dt;u<o&&(d=v6e(r,s,i,++u,a))===dt;);if(d!==dt||u===o){var A=new b6e(r,d,l,u);return l=u,{value:A,done:!1}}return{done:!0,value:null}}}},E6e=1,S6e=2,Tg=4,Q4=8,wb=10,H4=47,hp=92,C6e=9,T6e=32,Y0=34,vh=61,B6e=35,_6e=36,N6e=37,q0=39,X0=40,yh=41,I6e=95,Hn=45,P6e=33,R6e=60,k6e=62,L6e=64,j6e=91,M6e=93,D6e=61,O6e=123,Z0=63,F6e=125,K4=124,U6e=126,$6e=128,V4=65533,gC=42,zc=43,Q6e=44,H6e=58,K6e=59,Km=46,V6e=0,G6e=8,z6e=11,W6e=14,Y6e=31,q6e=127,Qs=-1,mq=48,gq=97,xq=101,X6e=102,Z6e=117,J6e=122,vq=65,yq=69,bq=70,eKe=85,tKe=90,xn=function(t){return t>=mq&&t<=57},rKe=function(t){return t>=55296&&t<=57343},ud=function(t){return xn(t)||t>=vq&&t<=bq||t>=gq&&t<=X6e},nKe=function(t){return t>=gq&&t<=J6e},iKe=function(t){return t>=vq&&t<=tKe},sKe=function(t){return nKe(t)||iKe(t)},aKe=function(t){return t>=$6e},J0=function(t){return t===wb||t===C6e||t===T6e},Eb=function(t){return sKe(t)||aKe(t)||t===I6e},G4=function(t){return Eb(t)||xn(t)||t===Hn},oKe=function(t){return t>=V6e&&t<=G6e||t===z6e||t>=W6e&&t<=Y6e||t===q6e},sl=function(t,e){return t!==hp?!1:e!==wb},ex=function(t,e,r){return t===Hn?Eb(e)||sl(e,r):Eb(t)?!0:!!(t===hp&&sl(t,e))},xC=function(t,e,r){return t===zc||t===Hn?xn(e)?!0:e===Km&&xn(r):xn(t===Km?e:t)},lKe=function(t){var e=0,r=1;(t[e]===zc||t[e]===Hn)&&(t[e]===Hn&&(r=-1),e++);for(var n=[];xn(t[e]);)n.push(t[e++]);var i=n.length?parseInt(gr.apply(void 0,n),10):0;t[e]===Km&&e++;for(var s=[];xn(t[e]);)s.push(t[e++]);var a=s.length,o=a?parseInt(gr.apply(void 0,s),10):0;(t[e]===yq||t[e]===xq)&&e++;var l=1;(t[e]===zc||t[e]===Hn)&&(t[e]===Hn&&(l=-1),e++);for(var u=[];xn(t[e]);)u.push(t[e++]);var d=u.length?parseInt(gr.apply(void 0,u),10):0;return r*(i+o*Math.pow(10,-a))*Math.pow(10,l*d)},cKe={type:2},uKe={type:3},dKe={type:4},AKe={type:13},fKe={type:8},hKe={type:21},pKe={type:9},mKe={type:10},gKe={type:11},xKe={type:12},vKe={type:14},tx={type:23},yKe={type:1},bKe={type:25},wKe={type:24},EKe={type:26},SKe={type:27},CKe={type:28},TKe={type:29},BKe={type:31},MN={type:32},wq=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat($1(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==MN;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Y0:return this.consumeStringToken(Y0);case B6e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(G4(r)||sl(n,i)){var s=ex(r,n,i)?S6e:E6e,a=this.consumeName();return{type:5,value:a,flags:s}}break;case _6e:if(this.peekCodePoint(0)===vh)return this.consumeCodePoint(),AKe;break;case q0:return this.consumeStringToken(q0);case X0:return cKe;case yh:return uKe;case gC:if(this.peekCodePoint(0)===vh)return this.consumeCodePoint(),vKe;break;case zc:if(xC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Q6e:return dKe;case Hn:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(xC(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ex(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Hn&&u===k6e)return this.consumeCodePoint(),this.consumeCodePoint(),wKe;break;case Km:if(xC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case H4:if(this.peekCodePoint(0)===gC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===gC&&(d=this.consumeCodePoint(),d===H4))return this.consumeToken();if(d===Qs)return this.consumeToken()}break;case H6e:return EKe;case K6e:return SKe;case R6e:if(this.peekCodePoint(0)===P6e&&this.peekCodePoint(1)===Hn&&this.peekCodePoint(2)===Hn)return this.consumeCodePoint(),this.consumeCodePoint(),bKe;break;case L6e:var A=this.peekCodePoint(0),f=this.peekCodePoint(1),h=this.peekCodePoint(2);if(ex(A,f,h)){var a=this.consumeName();return{type:7,value:a}}break;case j6e:return CKe;case hp:if(sl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case M6e:return TKe;case D6e:if(this.peekCodePoint(0)===vh)return this.consumeCodePoint(),fKe;break;case O6e:return gKe;case F6e:return xKe;case Z6e:case eKe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===zc&&(ud(p)||p===Z0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case K4:if(this.peekCodePoint(0)===vh)return this.consumeCodePoint(),pKe;if(this.peekCodePoint(0)===K4)return this.consumeCodePoint(),hKe;break;case U6e:if(this.peekCodePoint(0)===vh)return this.consumeCodePoint(),mKe;break;case Qs:return MN}return J0(e)?(this.consumeWhiteSpace(),BKe):xn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Eb(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:gr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();ud(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Z0&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(gr.apply(void 0,e.map(function(l){return l===Z0?mq:l})),16),s=parseInt(gr.apply(void 0,e.map(function(l){return l===Z0?bq:l})),16);return{type:30,start:i,end:s}}var a=parseInt(gr.apply(void 0,e),16);if(this.peekCodePoint(0)===Hn&&ud(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];ud(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(gr.apply(void 0,o),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===X0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===X0?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qs)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===q0||r===Y0){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qs||this.peekCodePoint(0)===yh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tx)}for(;;){var i=this.consumeCodePoint();if(i===Qs||i===yh)return{type:22,value:gr.apply(void 0,e)};if(J0(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Qs||this.peekCodePoint(0)===yh?(this.consumeCodePoint(),{type:22,value:gr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),tx);if(i===Y0||i===q0||i===X0||oKe(i))return this.consumeBadUrlRemnants(),tx;if(i===hp)if(sl(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),tx;else e.push(i)}},t.prototype.consumeWhiteSpace=function(){for(;J0(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===yh||e===Qs)return;sl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var i=Math.min(r,e);n+=gr.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var i=this._value[n];if(i===Qs||i===void 0||i===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(i===wb)return this._value.splice(0,n),yKe;if(i===hp){var s=this._value[n+1];s!==Qs&&s!==void 0&&(s===wb?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):sl(i,s)&&(r+=this.consumeStringSlice(n),r+=gr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Tg,n=this.peekCodePoint(0);for((n===zc||n===Hn)&&e.push(this.consumeCodePoint());xn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===Km&&xn(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Q4;xn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===yq||n===xq)&&((i===zc||i===Hn)&&xn(s)||xn(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Q4;xn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[lKe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(ex(i,s,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return i===N6e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ud(e)){for(var r=gr(e);ud(this.peekCodePoint(0))&&r.length<6;)r+=gr(this.consumeCodePoint());J0(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||rKe(n)||n>1114111?V4:n}return e===Qs?V4:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(G4(r))e+=gr(r);else if(sl(r,this.peekCodePoint(0)))e+=gr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),Eq=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new wq;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||NKe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?MN:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Bg=function(t){return t.type===15},Kf=function(t){return t.type===17},Lt=function(t){return t.type===20},_Ke=function(t){return t.type===0},DN=function(t,e){return Lt(t)&&t.value===e},Sq=function(t){return t.type!==31},df=function(t){return t.type!==31&&t.type!==4},Pa=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},NKe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},nc=function(t){return t.type===17||t.type===15},Er=function(t){return t.type===16||nc(t)},Cq=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},on={type:17,number:0,flags:Tg},UR={type:16,number:50,flags:Tg},Cl={type:16,number:100,flags:Tg},Qh=function(t,e,r){var n=t[0],i=t[1];return[Ht(n,e),Ht(typeof i<"u"?i:n,r)]},Ht=function(t,e){if(t.type===16)return t.number/100*e;if(Bg(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Tq="deg",Bq="grad",_q="rad",Nq="turn",Q1={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Tq:return Math.PI*e.number/180;case Bq:return Math.PI/200*e.number;case _q:return e.number;case Nq:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Iq=function(t){return t.type===15&&(t.unit===Tq||t.unit===Bq||t.unit===_q||t.unit===Nq)},Pq=function(t){var e=t.filter(Lt).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[on,on];case"to top":case"bottom":return Ui(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[on,Cl];case"to right":case"left":return Ui(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Cl,Cl];case"to bottom":case"top":return Ui(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Cl,on];case"to left":case"right":return Ui(270)}return 0},Ui=function(t){return Math.PI*t/180},Kl={name:"color",parse:function(t,e){if(e.type===18){var r=IKe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return Tl(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return Tl(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return Tl(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return Tl(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var o=lo[e.value.toUpperCase()];if(typeof o<"u")return o}return lo.TRANSPARENT}},Vl=function(t){return(255&t)===0},Kr=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+n+","+r+","+e/255+")":"rgb("+i+","+n+","+r+")"},Tl=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},z4=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},W4=function(t,e){var r=e.filter(df);if(r.length===3){var n=r.map(z4),i=n[0],s=n[1],a=n[2];return Tl(i,s,a,1)}if(r.length===4){var o=r.map(z4),i=o[0],s=o[1],a=o[2],l=o[3];return Tl(i,s,a,l)}return 0};function vC(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var Y4=function(t,e){var r=e.filter(df),n=r[0],i=r[1],s=r[2],a=r[3],o=(n.type===17?Ui(n.number):Q1.parse(t,n))/(Math.PI*2),l=Er(i)?i.number/100:0,u=Er(s)?s.number/100:0,d=typeof a<"u"&&Er(a)?Ht(a,1):1;if(l===0)return Tl(u*255,u*255,u*255,1);var A=u<=.5?u*(l+1):u+l-u*l,f=u*2-A,h=vC(f,A,o+1/3),m=vC(f,A,o),p=vC(f,A,o-1/3);return Tl(h*255,m*255,p*255,d)},IKe={hsl:Y4,hsla:Y4,rgb:W4,rgba:W4},pp=function(t,e){return Kl.parse(t,Eq.create(e).parseComponentValue())},lo={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},PKe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Lt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},RKe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},H1=function(t,e){var r=Kl.parse(t,e[0]),n=e[1];return n&&Er(n)?{color:r,stop:n}:{color:r,stop:null}},q4=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=on),n.stop===null&&(n.stop=Cl);for(var i=[],s=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var l=Ht(o,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var u=null,a=0;a<i.length;a++){var d=i[a];if(d===null)u===null&&(u=a);else if(u!==null){for(var A=a-u,f=i[u-1],h=(d-f)/(A+1),m=1;m<=A;m++)i[u+m-1]=h*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,i[g]/e),0)}})},kKe=function(t,e,r){var n=e/2,i=r/2,s=Ht(t[0],e)-n,a=i-Ht(t[1],r);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},LKe=function(t,e,r){var n=typeof t=="number"?t:kKe(t,e,r),i=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,a=r/2,o=i/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[i,s-u,s+u,a-l,a+l]},as=function(t,e){return Math.sqrt(t*t+e*e)},X4=function(t,e,r,n,i){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(a,o){var l=o[0],u=o[1],d=as(r-l,n-u);return(i?d<a.optimumDistance:d>a.optimumDistance)?{optimumCorner:o,optimumDistance:d}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},jKe=function(t,e,r,n,i){var s=0,a=0;switch(t.size){case 0:t.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-i)));break;case 2:if(t.shape===0)s=a=Math.min(as(e,r),as(e,r-i),as(e-n,r),as(e-n,r-i));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-i))/Math.min(Math.abs(e),Math.abs(e-n)),l=X4(n,i,e,r,!0),u=l[0],d=l[1];s=as(u-e,(d-r)/o),a=o*s}break;case 1:t.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-i)));break;case 3:if(t.shape===0)s=a=Math.max(as(e,r),as(e,r-i),as(e-n,r),as(e-n,r-i));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-i))/Math.max(Math.abs(e),Math.abs(e-n)),A=X4(n,i,e,r,!1),u=A[0],d=A[1];s=as(u-e,(d-r)/o),a=o*s}break}return Array.isArray(t.size)&&(s=Ht(t.size[0],n),a=t.size.length===2?Ht(t.size[1],i):s),[s,a]},MKe=function(t,e){var r=Ui(180),n=[];return Pa(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){r=Pq(i);return}else if(Iq(a)){r=Q1.parse(t,a);return}}var o=H1(t,i);n.push(o)}),{angle:r,stops:n,type:1}},rx=function(t,e){var r=Ui(180),n=[];return Pa(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=Pq(i);return}else if(Iq(a)){r=(Q1.parse(t,a)+Ui(270))%Ui(360);return}}var o=H1(t,i);n.push(o)}),{angle:r,stops:n,type:1}},DKe=function(t,e){var r=Ui(180),n=[],i=1,s=0,a=3,o=[];return Pa(e).forEach(function(l,u){var d=l[0];if(u===0){if(Lt(d)&&d.value==="linear"){i=1;return}else if(Lt(d)&&d.value==="radial"){i=2;return}}if(d.type===18){if(d.name==="from"){var A=Kl.parse(t,d.values[0]);n.push({stop:on,color:A})}else if(d.name==="to"){var A=Kl.parse(t,d.values[0]);n.push({stop:Cl,color:A})}else if(d.name==="color-stop"){var f=d.values.filter(df);if(f.length===2){var A=Kl.parse(t,f[1]),h=f[0];Kf(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:A})}}}}),i===1?{angle:(r+Ui(180))%Ui(360),stops:n,type:i}:{size:a,shape:s,stops:n,position:o,type:i}},Rq="closest-side",kq="farthest-side",Lq="closest-corner",jq="farthest-corner",Mq="circle",Dq="ellipse",Oq="cover",Fq="contain",OKe=function(t,e){var r=0,n=3,i=[],s=[];return Pa(e).forEach(function(a,o){var l=!0;if(o===0){var u=!1;l=a.reduce(function(A,f){if(u)if(Lt(f))switch(f.value){case"center":return s.push(UR),A;case"top":case"left":return s.push(on),A;case"right":case"bottom":return s.push(Cl),A}else(Er(f)||nc(f))&&s.push(f);else if(Lt(f))switch(f.value){case Mq:return r=0,!1;case Dq:return r=1,!1;case"at":return u=!0,!1;case Rq:return n=0,!1;case Oq:case kq:return n=1,!1;case Fq:case Lq:return n=2,!1;case jq:return n=3,!1}else if(nc(f)||Er(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return A},l)}if(l){var d=H1(t,a);i.push(d)}}),{size:n,shape:r,stops:i,position:s,type:2}},nx=function(t,e){var r=0,n=3,i=[],s=[];return Pa(e).forEach(function(a,o){var l=!0;if(o===0?l=a.reduce(function(d,A){if(Lt(A))switch(A.value){case"center":return s.push(UR),!1;case"top":case"left":return s.push(on),!1;case"right":case"bottom":return s.push(Cl),!1}else if(Er(A)||nc(A))return s.push(A),!1;return d},l):o===1&&(l=a.reduce(function(d,A){if(Lt(A))switch(A.value){case Mq:return r=0,!1;case Dq:return r=1,!1;case Fq:case Rq:return n=0,!1;case kq:return n=1,!1;case Lq:return n=2,!1;case Oq:case jq:return n=3,!1}else if(nc(A)||Er(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return d},l)),l){var u=H1(t,a);i.push(u)}}),{size:n,shape:r,stops:i,position:s,type:2}},FKe=function(t){return t.type===1},UKe=function(t){return t.type===2},$R={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=Uq[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function $Ke(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Uq[t.name])}var Uq={"linear-gradient":MKe,"-moz-linear-gradient":rx,"-ms-linear-gradient":rx,"-o-linear-gradient":rx,"-webkit-linear-gradient":rx,"radial-gradient":OKe,"-moz-radial-gradient":nx,"-ms-radial-gradient":nx,"-o-radial-gradient":nx,"-webkit-radial-gradient":nx,"-webkit-gradient":DKe},QKe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return df(n)&&$Ke(n)}).map(function(n){return $R.parse(t,n)})}},HKe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Lt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},KKe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Pa(e).map(function(r){return r.filter(Er)}).map(Cq)}},VKe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Pa(e).map(function(r){return r.filter(Lt).map(function(n){return n.value}).join(" ")}).map(GKe)}},GKe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},dA;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(dA||(dA={}));var zKe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Pa(e).map(function(r){return r.filter(WKe)})}},WKe=function(t){return Lt(t)||Er(t)},K1=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},YKe=K1("top"),qKe=K1("right"),XKe=K1("bottom"),ZKe=K1("left"),V1=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return Cq(r.filter(Er))}}},JKe=V1("top-left"),eVe=V1("top-right"),tVe=V1("bottom-right"),rVe=V1("bottom-left"),G1=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nVe=G1("top"),iVe=G1("right"),sVe=G1("bottom"),aVe=G1("left"),z1=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Bg(r)?r.number:0}}},oVe=z1("top"),lVe=z1("right"),cVe=z1("bottom"),uVe=z1("left"),dVe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},AVe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},fVe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Lt).reduce(function(r,n){return r|hVe(n.value)},0)}},hVe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pVe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mVe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Sb;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Sb||(Sb={}));var gVe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Sb.STRICT;case"normal":default:return Sb.NORMAL}}},xVe={name:"line-height",initialValue:"normal",prefix:!1,type:4},Z4=function(t,e){return Lt(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Er(t)?Ht(t,e):e},vVe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:$R.parse(t,e)}},yVe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ON={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},W1=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},bVe=W1("top"),wVe=W1("right"),EVe=W1("bottom"),SVe=W1("left"),CVe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Lt).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},TVe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Y1=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},BVe=Y1("top"),_Ve=Y1("right"),NVe=Y1("bottom"),IVe=Y1("left"),PVe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},RVe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},kVe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&DN(e[0],"none")?[]:Pa(e).map(function(r){for(var n={color:lo.TRANSPARENT,offsetX:on,offsetY:on,blur:on},i=0,s=0;s<r.length;s++){var a=r[s];nc(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:n.blur=a,i++):n.color=Kl.parse(t,a)}return n})}},LVe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},jVe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=OVe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},MVe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},DVe=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,i,s,a,o]:null},OVe={matrix:MVe,matrix3d:DVe},J4={type:16,number:50,flags:Tg},FVe=[J4,J4],UVe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Er);return r.length!==2?FVe:[r[0],r[1]]}},$Ve={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},mp;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(mp||(mp={}));var QVe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return mp.BREAK_ALL;case"keep-all":return mp.KEEP_ALL;case"normal":default:return mp.NORMAL}}},HVe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Kf(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},$q={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},KVe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Kf(e)?e.number:1}},VVe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GVe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Lt).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},zVe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:r.push(i.value);break;case 17:r.push(i.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},WVe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},YVe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Kf(e))return e.number;if(Lt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},qVe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Lt).map(function(r){return r.value})}},XVe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Mr=function(t,e){return(t&e)!==0},ZVe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},JVe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],i=e.filter(Sq),s=0;s<i.length;s++){var a=i[s],o=i[s+1];if(a.type===20){var l=o&&Kf(o)?o.number:1;n.push({counter:a.value,increment:l})}}return n}},eGe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(Sq),i=0;i<n.length;i++){var s=n[i],a=n[i+1];if(Lt(s)&&s.value!=="none"){var o=a&&Kf(a)?a.number:0;r.push({counter:s.value,reset:o})}}return r}},tGe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Bg).map(function(r){return $q.parse(t,r)})}},rGe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],i=e.filter(_Ke);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var a=i[s].value,o=i[s+1].value;n.push({open:a,close:o})}return n}},e5=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},nGe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&DN(e[0],"none")?[]:Pa(e).map(function(r){for(var n={color:255,offsetX:on,offsetY:on,blur:on,spread:on,inset:!1},i=0,s=0;s<r.length;s++){var a=r[s];DN(a,"inset")?n.inset=!0:nc(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:i===2?n.blur=a:n.spread=a,i++):n.color=Kl.parse(t,a)}return n})}},iGe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Lt).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},sGe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},aGe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Bg(e)?e.number:0}},oGe=function(){function t(e,r){var n,i;this.animationDuration=Re(e,tGe,r.animationDuration),this.backgroundClip=Re(e,PKe,r.backgroundClip),this.backgroundColor=Re(e,RKe,r.backgroundColor),this.backgroundImage=Re(e,QKe,r.backgroundImage),this.backgroundOrigin=Re(e,HKe,r.backgroundOrigin),this.backgroundPosition=Re(e,KKe,r.backgroundPosition),this.backgroundRepeat=Re(e,VKe,r.backgroundRepeat),this.backgroundSize=Re(e,zKe,r.backgroundSize),this.borderTopColor=Re(e,YKe,r.borderTopColor),this.borderRightColor=Re(e,qKe,r.borderRightColor),this.borderBottomColor=Re(e,XKe,r.borderBottomColor),this.borderLeftColor=Re(e,ZKe,r.borderLeftColor),this.borderTopLeftRadius=Re(e,JKe,r.borderTopLeftRadius),this.borderTopRightRadius=Re(e,eVe,r.borderTopRightRadius),this.borderBottomRightRadius=Re(e,tVe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Re(e,rVe,r.borderBottomLeftRadius),this.borderTopStyle=Re(e,nVe,r.borderTopStyle),this.borderRightStyle=Re(e,iVe,r.borderRightStyle),this.borderBottomStyle=Re(e,sVe,r.borderBottomStyle),this.borderLeftStyle=Re(e,aVe,r.borderLeftStyle),this.borderTopWidth=Re(e,oVe,r.borderTopWidth),this.borderRightWidth=Re(e,lVe,r.borderRightWidth),this.borderBottomWidth=Re(e,cVe,r.borderBottomWidth),this.borderLeftWidth=Re(e,uVe,r.borderLeftWidth),this.boxShadow=Re(e,nGe,r.boxShadow),this.color=Re(e,dVe,r.color),this.direction=Re(e,AVe,r.direction),this.display=Re(e,fVe,r.display),this.float=Re(e,pVe,r.cssFloat),this.fontFamily=Re(e,zVe,r.fontFamily),this.fontSize=Re(e,WVe,r.fontSize),this.fontStyle=Re(e,XVe,r.fontStyle),this.fontVariant=Re(e,qVe,r.fontVariant),this.fontWeight=Re(e,YVe,r.fontWeight),this.letterSpacing=Re(e,mVe,r.letterSpacing),this.lineBreak=Re(e,gVe,r.lineBreak),this.lineHeight=Re(e,xVe,r.lineHeight),this.listStyleImage=Re(e,vVe,r.listStyleImage),this.listStylePosition=Re(e,yVe,r.listStylePosition),this.listStyleType=Re(e,ON,r.listStyleType),this.marginTop=Re(e,bVe,r.marginTop),this.marginRight=Re(e,wVe,r.marginRight),this.marginBottom=Re(e,EVe,r.marginBottom),this.marginLeft=Re(e,SVe,r.marginLeft),this.opacity=Re(e,KVe,r.opacity);var s=Re(e,CVe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Re(e,TVe,r.overflowWrap),this.paddingTop=Re(e,BVe,r.paddingTop),this.paddingRight=Re(e,_Ve,r.paddingRight),this.paddingBottom=Re(e,NVe,r.paddingBottom),this.paddingLeft=Re(e,IVe,r.paddingLeft),this.paintOrder=Re(e,iGe,r.paintOrder),this.position=Re(e,RVe,r.position),this.textAlign=Re(e,PVe,r.textAlign),this.textDecorationColor=Re(e,VVe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Re(e,GVe,(i=r.textDecorationLine)!==null&&i!==void 0?i:r.textDecoration),this.textShadow=Re(e,kVe,r.textShadow),this.textTransform=Re(e,LVe,r.textTransform),this.transform=Re(e,jVe,r.transform),this.transformOrigin=Re(e,UVe,r.transformOrigin),this.visibility=Re(e,$Ve,r.visibility),this.webkitTextStrokeColor=Re(e,sGe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Re(e,aGe,r.webkitTextStrokeWidth),this.wordBreak=Re(e,QVe,r.wordBreak),this.zIndex=Re(e,HVe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Vl(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Mr(this.display,4)||Mr(this.display,33554432)||Mr(this.display,268435456)||Mr(this.display,536870912)||Mr(this.display,67108864)||Mr(this.display,134217728)},t}(),lGe=function(){function t(e,r){this.content=Re(e,ZVe,r.content),this.quotes=Re(e,rGe,r.quotes)}return t}(),t5=function(){function t(e,r){this.counterIncrement=Re(e,JVe,r.counterIncrement),this.counterReset=Re(e,eGe,r.counterReset)}return t}(),Re=function(t,e,r){var n=new wq,i=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(i);var s=new Eq(n.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(t,Lt(a)?a.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Q1.parse(t,s.parseComponentValue());case"color":return Kl.parse(t,s.parseComponentValue());case"image":return $R.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return nc(o)?o:on;case"length-percentage":var l=s.parseComponentValue();return Er(l)?l:on;case"time":return $q.parse(t,s.parseComponentValue())}break}},cGe="data-html2canvas-debug",uGe=function(t){var e=t.getAttribute(cGe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},FN=function(t,e){var r=uGe(t);return r===1||e===r},Ra=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,FN(r,3))debugger;this.styles=new oGe(e,window.getComputedStyle(r,null)),QN(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=U1(this.context,r),FN(r,4)&&(this.flags|=16)}return t}(),dGe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",r5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ix=0;ix<r5.length;ix++)Hh[r5.charCodeAt(ix)]=ix;var AGe=function(t){var e=t.length*.75,r=t.length,n,i=0,s,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Hh[t.charCodeAt(n)],a=Hh[t.charCodeAt(n+1)],o=Hh[t.charCodeAt(n+2)],l=Hh[t.charCodeAt(n+3)],d[i++]=s<<2|a>>4,d[i++]=(a&15)<<4|o>>2,d[i++]=(o&3)<<6|l&63;return u},fGe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},hGe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},fu=5,QR=11,yC=2,pGe=QR-fu,Qq=65536>>fu,mGe=1<<fu,bC=mGe-1,gGe=1024>>fu,xGe=Qq+gGe,vGe=xGe,yGe=32,bGe=vGe+yGe,wGe=65536>>QR,EGe=1<<pGe,SGe=EGe-1,n5=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},CGe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},TGe=function(t,e){var r=AGe(t),n=Array.isArray(r)?hGe(r):new Uint32Array(r),i=Array.isArray(r)?fGe(r):new Uint16Array(r),s=24,a=n5(i,s/2,n[4]/2),o=n[5]===2?n5(i,(s+n[4])/2):CGe(n,Math.ceil((s+n[4])/4));return new BGe(n[0],n[1],n[2],n[3],a,o)},BGe=function(){function t(e,r,n,i,s,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>fu],r=(r<<yC)+(e&bC),this.data[r];if(e<=65535)return r=this.index[Qq+(e-55296>>fu)],r=(r<<yC)+(e&bC),this.data[r];if(e<this.highStart)return r=bGe-wGe+(e>>QR),r=this.index[r],r+=e>>fu&SGe,r=this.index[r],r=(r<<yC)+(e&bC),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),i5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_Ge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sx=0;sx<i5.length;sx++)_Ge[i5.charCodeAt(sx)]=sx;var NGe=1,wC=2,EC=3,s5=4,a5=5,IGe=7,o5=8,SC=9,CC=10,l5=11,c5=12,u5=13,d5=14,TC=15,PGe=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},RGe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,s="";++i<r;){var a=t[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},kGe=TGe(dGe),Pi="",BC="",LGe=function(t){return kGe.get(t)},jGe=function(t,e,r){var n=r-2,i=e[n],s=e[r-1],a=e[r];if(s===wC&&a===EC)return Pi;if(s===wC||s===EC||s===s5||a===wC||a===EC||a===s5)return BC;if(s===o5&&[o5,SC,l5,c5].indexOf(a)!==-1||(s===l5||s===SC)&&(a===SC||a===CC)||(s===c5||s===CC)&&a===CC||a===u5||a===a5||a===IGe||s===NGe)return Pi;if(s===u5&&a===d5){for(;i===a5;)i=e[--n];if(i===d5)return Pi}if(s===TC&&a===TC){for(var o=0;i===TC;)o++,i=e[--n];if(o%2===0)return Pi}return BC},MGe=function(t){var e=PGe(t),r=e.length,n=0,i=0,s=e.map(LGe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Pi;n<r&&(a=jGe(e,s,++n))===Pi;);if(a!==Pi||n===r){var o=RGe.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},DGe=function(t){for(var e=MGe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},OGe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var i=r.getBoundingClientRect(),s=Math.round(i.height);if(t.body.removeChild(n),s===e)return!0}}return!1},FGe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=$1(n.data).map(function(l){return gr(l)}),s=0,a={},o=i.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var A=d.x>a.x||d.y>a.y;return a=d,u===0?!0:A});return t.body.removeChild(e),o},UGe=function(){return typeof new Image().crossOrigin<"u"},$Ge=function(){return typeof new XMLHttpRequest().responseType=="string"},QGe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},A5=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},HGe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var i=new Image,s=e.toDataURL();i.src=s;var a=UN(r,r,0,0,i);return n.fillStyle="red",n.fillRect(0,0,r,r),f5(a).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",A5(l)?f5(UN(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),A5(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},UN=function(t,e,r,n,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},f5=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},rn={get SUPPORT_RANGE_BOUNDS(){var t=OGe(document);return Object.defineProperty(rn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=rn.SUPPORT_RANGE_BOUNDS&&FGe(document);return Object.defineProperty(rn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=QGe(document);return Object.defineProperty(rn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?HGe(document):Promise.resolve(!1);return Object.defineProperty(rn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=UGe();return Object.defineProperty(rn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=$Ge();return Object.defineProperty(rn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(rn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},gp=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),KGe=function(t,e,r,n){var i=zGe(e,r),s=[],a=0;return i.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(rn.SUPPORT_RANGE_BOUNDS){var l=h5(n,a,o.length).getClientRects();if(l.length>1){var u=HR(o),d=0;u.forEach(function(f){s.push(new gp(f,Bo.fromDOMRectList(t,h5(n,d+a,f.length).getClientRects()))),d+=f.length})}else s.push(new gp(o,Bo.fromDOMRectList(t,l)))}else{var A=n.splitText(o.length);s.push(new gp(o,VGe(t,n))),n=A}else rn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),s},VGe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var s=U1(t,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return Bo.EMPTY},h5=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(t,e),i.setEnd(t,e+r),i},HR=function(t){if(rn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return DGe(t)},GGe=function(t,e){if(rn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return YGe(t,e)},zGe=function(t,e){return e.letterSpacing!==0?HR(t):GGe(t,e)},WGe=[32,160,4961,65792,65793,4153,4241],YGe=function(t,e){for(var r=w6e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,s=function(){if(i.value){var a=i.value.slice(),o=$1(a),l="";o.forEach(function(u){WGe.indexOf(u)===-1?l+=gr(u):(l.length&&n.push(l),n.push(gr(u)),l="")}),l.length&&n.push(l)}};!(i=r.next()).done;)s();return n},qGe=function(){function t(e,r,n){this.text=XGe(r.data,n.textTransform),this.textBounds=KGe(e,this.text,n,r)}return t}(),XGe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(ZGe,JGe);case 2:return t.toUpperCase();default:return t}},ZGe=/(^|\s|:|-|\(|\))([a-z])/g,JGe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Hq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Ra),Kq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(Ra),Vq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this,s=new XMLSerializer,a=U1(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Ra),Gq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e}(Ra),$N=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(Ra),e9e=[{type:15,flags:0,unit:"px",number:3}],t9e=[{type:16,flags:0,number:50}],r9e=function(t){return t.width>t.height?new Bo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Bo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},n9e=function(t){var e=t.type===i9e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Cb="checkbox",Tb="radio",i9e="password",p5=707406591,KR=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=n9e(n),(i.type===Cb||i.type===Tb)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=r9e(i.bounds)),i.type){case Cb:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=e9e;break;case Tb:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=t9e;break}return i}return e}(Ra),zq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(Ra),Wq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e}(Ra),Yq=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=Xq(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?pp(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):lo.TRANSPARENT,a=n.contentWindow.document.body?pp(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):lo.TRANSPARENT;i.backgroundColor=Vl(s)?Vl(a)?i.styles.backgroundColor:a:s}}catch{}return i}return e}(Ra),s9e=["OL","UL","MENU"],uv=function(t,e,r,n){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,Zq(i)&&i.data.trim().length>0)r.textNodes.push(new qGe(t,i,r.styles));else if(Fd(i))if(rX(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return uv(t,o,r,n)});else{var a=qq(t,i);a.styles.isVisible()&&(a9e(i,a,n)?a.flags|=4:o9e(a.styles)&&(a.flags|=2),s9e.indexOf(i.tagName)!==-1&&(a.flags|=8),r.elements.push(a),i.slot,i.shadowRoot?uv(t,i.shadowRoot,a,n):!Bb(i)&&!Jq(i)&&!_b(i)&&uv(t,i,a,n))}},qq=function(t,e){return HN(e)?new Hq(t,e):eX(e)?new Kq(t,e):Jq(e)?new Vq(t,e):l9e(e)?new Gq(t,e):c9e(e)?new $N(t,e):u9e(e)?new KR(t,e):_b(e)?new zq(t,e):Bb(e)?new Wq(t,e):tX(e)?new Yq(t,e):new Ra(t,e)},Xq=function(t,e){var r=qq(t,e);return r.flags|=4,uv(t,e,r,r),r},a9e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||VR(t)&&r.styles.isTransparent()},o9e=function(t){return t.isPositioned()||t.isFloating()},Zq=function(t){return t.nodeType===Node.TEXT_NODE},Fd=function(t){return t.nodeType===Node.ELEMENT_NODE},QN=function(t){return Fd(t)&&typeof t.style<"u"&&!dv(t)},dv=function(t){return typeof t.className=="object"},l9e=function(t){return t.tagName==="LI"},c9e=function(t){return t.tagName==="OL"},u9e=function(t){return t.tagName==="INPUT"},d9e=function(t){return t.tagName==="HTML"},Jq=function(t){return t.tagName==="svg"},VR=function(t){return t.tagName==="BODY"},eX=function(t){return t.tagName==="CANVAS"},m5=function(t){return t.tagName==="VIDEO"},HN=function(t){return t.tagName==="IMG"},tX=function(t){return t.tagName==="IFRAME"},g5=function(t){return t.tagName==="STYLE"},A9e=function(t){return t.tagName==="SCRIPT"},Bb=function(t){return t.tagName==="TEXTAREA"},_b=function(t){return t.tagName==="SELECT"},rX=function(t){return t.tagName==="SLOT"},x5=function(t){return t.tagName.indexOf("-")>0},f9e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,i=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var a=[];return s&&i.forEach(function(o){var l=r.counters[o.counter];a.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),a},t}(),v5={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},y5={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},h9e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},p9e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dd=function(t,e,r,n,i,s){return t<e||t>r?Vm(t,i,s.length>0):n.integers.reduce(function(a,o,l){for(;t>=o;)t-=o,a+=n.values[l];return a},"")+s},nX=function(t,e,r,n){var i="";do r||t--,i=n(t)+i,t/=e;while(t*e>=e);return i},mr=function(t,e,r,n,i){var s=r-e+1;return(t<0?"-":"")+(nX(Math.abs(t),s,n,function(a){return gr(Math.floor(a%s)+e)})+i)},bc=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return nX(Math.abs(t),n,!1,function(i){return e[Math.floor(i%n)]})+r},yd=1,Zo=2,Jo=4,Kh=8,Fa=function(t,e,r,n,i,s){if(t<-9999||t>9999)return Vm(t,4,i.length>0);var a=Math.abs(t),o=i;if(a===0)return e[0]+o;for(var l=0;a>0&&l<=4;l++){var u=a%10;u===0&&Mr(s,yd)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Mr(s,Zo)||u===1&&l===1&&Mr(s,Jo)&&t>100||u===1&&l>1&&Mr(s,Kh)?o=e[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},b5="",w5="",E5="",_C="",Vm=function(t,e,r){var n=r?". ":"",i=r?"":"",s=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=mr(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return bc(t,"",i);case 6:return dd(t,1,3999,v5,3,n).toLowerCase();case 7:return dd(t,1,3999,v5,3,n);case 8:return mr(t,945,969,!1,n);case 9:return mr(t,97,122,!1,n);case 10:return mr(t,65,90,!1,n);case 11:return mr(t,1632,1641,!0,n);case 12:case 49:return dd(t,1,9999,y5,3,n);case 35:return dd(t,1,9999,y5,3,n).toLowerCase();case 13:return mr(t,2534,2543,!0,n);case 14:case 30:return mr(t,6112,6121,!0,n);case 15:return bc(t,"",i);case 16:return bc(t,"",i);case 17:case 48:return Fa(t,"",b5,"",i,Zo|Jo|Kh);case 47:return Fa(t,"",w5,"",i,yd|Zo|Jo|Kh);case 42:return Fa(t,"",b5,"",i,Zo|Jo|Kh);case 41:return Fa(t,"",w5,"",i,yd|Zo|Jo|Kh);case 26:return Fa(t,"","",E5,i,0);case 25:return Fa(t,"","",E5,i,yd|Zo|Jo);case 31:return Fa(t,"","",_C,s,yd|Zo|Jo);case 33:return Fa(t,"","",_C,s,0);case 32:return Fa(t,"","",_C,s,yd|Zo|Jo);case 18:return mr(t,2406,2415,!0,n);case 20:return dd(t,1,19999,p9e,3,n);case 21:return mr(t,2790,2799,!0,n);case 22:return mr(t,2662,2671,!0,n);case 22:return dd(t,1,10999,h9e,3,n);case 23:return bc(t,"");case 24:return bc(t,"");case 27:return mr(t,3302,3311,!0,n);case 28:return bc(t,"",i);case 29:return bc(t,"",i);case 34:return mr(t,3792,3801,!0,n);case 37:return mr(t,6160,6169,!0,n);case 38:return mr(t,4160,4169,!0,n);case 39:return mr(t,2918,2927,!0,n);case 40:return mr(t,1776,1785,!0,n);case 43:return mr(t,3046,3055,!0,n);case 44:return mr(t,3174,3183,!0,n);case 45:return mr(t,3664,3673,!0,n);case 46:return mr(t,3872,3881,!0,n);case 3:default:return mr(t,48,57,!0,n)}},iX="data-html2canvas-ignore",S5=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new f9e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,i=m9e(e,r);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=i.contentWindow,l=o.document,u=v9e(i).then(function(){return _n(n,void 0,void 0,function(){var d,A;return pn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(E9e),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,x9e(l)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,A)}).then(function(){return i})]:[2,i]}})})});return l.open(),l.write(b9e(document.doctype)+"<html></html>"),w9e(this.referenceElement.ownerDocument,s,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(FN(e,2))debugger;if(eX(e))return this.createCanvasClone(e);if(m5(e))return this.createVideoClone(e);if(g5(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return HN(r)&&(HN(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),x5(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return NC(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),a=i.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},t.prototype.appendChildNode=function(e,r,n){(!Fd(r)||!A9e(r)&&!r.hasAttribute(iX)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Fd(r)||!g5(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Fd(s)&&rX(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(o){return i.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(Zq(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Fd(e)&&(QN(e)||dv(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&QN(i)&&(this.clonedReferenceElement=i),VR(i)&&T9e(i);var l=this.counters.parse(new t5(this.context,s)),u=this.resolvePseudoContent(e,i,a,xp.BEFORE);x5(e)&&(r=!0),m5(e)||this.cloneChildNodes(e,i,r),u&&i.insertBefore(u,i.firstChild);var d=this.resolvePseudoContent(e,i,o,xp.AFTER);return d&&i.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||dv(e))&&!tX(e)||r)&&NC(s,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(Bb(e)||_b(e))&&(Bb(i)||_b(i))&&(i.value=e.value),i}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,i){var s=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new t5(this.context,n));var l=new lGe(this.context,n),u=o.createElement("html2canvaspseudoelement");NC(n,u),l.content.forEach(function(A){if(A.type===0)u.appendChild(o.createTextNode(A.value));else if(A.type===22){var f=o.createElement("img");f.src=A.value,f.style.opacity="1",u.appendChild(f)}else if(A.type===18){if(A.name==="attr"){var h=A.values.filter(Lt);h.length&&u.appendChild(o.createTextNode(e.getAttribute(h[0].value)||""))}else if(A.name==="counter"){var m=A.values.filter(df),p=m[0],g=m[1];if(p&&Lt(p)){var x=s.counters.getCounterValue(p.value),v=g&&Lt(g)?ON.parse(s.context,g.value):3;u.appendChild(o.createTextNode(Vm(x,v,!1)))}}else if(A.name==="counters"){var y=A.values.filter(df),p=y[0],w=y[1],g=y[2];if(p&&Lt(p)){var b=s.counters.getCounterValues(p.value),S=g&&Lt(g)?ON.parse(s.context,g.value):3,C=w&&w.type===0?w.value:"",T=b.map(function(I){return Vm(I,S,!1)}).join(C);u.appendChild(o.createTextNode(T))}}}else if(A.type===20)switch(A.value){case"open-quote":u.appendChild(o.createTextNode(e5(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(e5(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(A.value))}}),u.className=KN+" "+VN;var d=i===xp.BEFORE?" "+KN:" "+VN;return dv(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),xp;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(xp||(xp={}));var m9e=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(iX,"true"),t.body.appendChild(r),r},g9e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},x9e=function(t){return Promise.all([].slice.call(t.images,0).map(g9e))},v9e=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var i=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},y9e=["all","d","content"],NC=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);y9e.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},b9e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},w9e=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},E9e=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},S9e=":before",C9e=":after",KN="___html2canvas___pseudoelement_before",VN="___html2canvas___pseudoelement_after",C5=`{
    content: "" !important;
    display: none !important;
}`,T9e=function(t){B9e(t,"."+KN+S9e+C5+`
         .`+VN+C9e+C5)},B9e=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},sX=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),_9e=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(PC(e)||R9e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return _n(this,void 0,void 0,function(){var r,n,i,s,a=this;return pn(this,function(o){switch(o.label){case 0:return r=sX.isSameOrigin(e),n=!IC(e)&&this._options.useCORS===!0&&rn.SUPPORT_CORS_IMAGES&&!r,i=!IC(e)&&!r&&!PC(e)&&typeof this._options.proxy=="string"&&rn.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!IC(e)&&!PC(e)&&!i&&!n?[2]:(s=e,i?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(k9e(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),a._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(s,a){var o=rn.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(f){return a(f)},!1),A.readAsDataURL(l.response)}else a("Failed to proxy resource "+i+" with status code "+l.status)},l.onerror=a;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return a("Timed out ("+d+"ms) proxying "+i)}}l.send()})},t}(),N9e=/^data:image\/svg\+xml/i,I9e=/^data:image\/.*;base64,/i,P9e=/^data:image\/.*/i,R9e=function(t){return rn.SUPPORT_SVG_DRAWING||!L9e(t)},IC=function(t){return P9e.test(t)},k9e=function(t){return I9e.test(t)},PC=function(t){return t.substr(0,4)==="blob"},L9e=function(t){return t.substr(-3).toLowerCase()==="svg"||N9e.test(t)},Ne=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Ad=function(t,e,r){return new Ne(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},ax=function(){function t(e,r,n,i){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=i}return t.prototype.subdivide=function(e,r){var n=Ad(this.start,this.startControl,e),i=Ad(this.startControl,this.endControl,e),s=Ad(this.endControl,this.end,e),a=Ad(n,i,e),o=Ad(i,s,e),l=Ad(a,o,e);return r?new t(this.start,n,a,l):new t(l,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Di=function(t){return t.type===1},j9e=function(){function t(e){var r=e.styles,n=e.bounds,i=Qh(r.borderTopLeftRadius,n.width,n.height),s=i[0],a=i[1],o=Qh(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=Qh(r.borderBottomRightRadius,n.width,n.height),A=d[0],f=d[1],h=Qh(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],g=[];g.push((s+l)/n.width),g.push((m+A)/n.width),g.push((a+p)/n.height),g.push((u+f)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,a/=x,l/=x,u/=x,A/=x,f/=x,m/=x,p/=x);var v=n.width-l,y=n.height-f,w=n.width-A,b=n.height-p,S=r.borderTopWidth,C=r.borderRightWidth,T=r.borderBottomWidth,B=r.borderLeftWidth,_=Ht(r.paddingTop,e.bounds.width),I=Ht(r.paddingRight,e.bounds.width),L=Ht(r.paddingBottom,e.bounds.width),N=Ht(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Jt(n.left+B/3,n.top+S/3,s-B/3,a-S/3,Ct.TOP_LEFT):new Ne(n.left+B/3,n.top+S/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Jt(n.left+v,n.top+S/3,l-C/3,u-S/3,Ct.TOP_RIGHT):new Ne(n.left+n.width-C/3,n.top+S/3),this.bottomRightBorderDoubleOuterBox=A>0||f>0?Jt(n.left+w,n.top+y,A-C/3,f-T/3,Ct.BOTTOM_RIGHT):new Ne(n.left+n.width-C/3,n.top+n.height-T/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?Jt(n.left+B/3,n.top+b,m-B/3,p-T/3,Ct.BOTTOM_LEFT):new Ne(n.left+B/3,n.top+n.height-T/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Jt(n.left+B*2/3,n.top+S*2/3,s-B*2/3,a-S*2/3,Ct.TOP_LEFT):new Ne(n.left+B*2/3,n.top+S*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Jt(n.left+v,n.top+S*2/3,l-C*2/3,u-S*2/3,Ct.TOP_RIGHT):new Ne(n.left+n.width-C*2/3,n.top+S*2/3),this.bottomRightBorderDoubleInnerBox=A>0||f>0?Jt(n.left+w,n.top+y,A-C*2/3,f-T*2/3,Ct.BOTTOM_RIGHT):new Ne(n.left+n.width-C*2/3,n.top+n.height-T*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?Jt(n.left+B*2/3,n.top+b,m-B*2/3,p-T*2/3,Ct.BOTTOM_LEFT):new Ne(n.left+B*2/3,n.top+n.height-T*2/3),this.topLeftBorderStroke=s>0||a>0?Jt(n.left+B/2,n.top+S/2,s-B/2,a-S/2,Ct.TOP_LEFT):new Ne(n.left+B/2,n.top+S/2),this.topRightBorderStroke=s>0||a>0?Jt(n.left+v,n.top+S/2,l-C/2,u-S/2,Ct.TOP_RIGHT):new Ne(n.left+n.width-C/2,n.top+S/2),this.bottomRightBorderStroke=A>0||f>0?Jt(n.left+w,n.top+y,A-C/2,f-T/2,Ct.BOTTOM_RIGHT):new Ne(n.left+n.width-C/2,n.top+n.height-T/2),this.bottomLeftBorderStroke=m>0||p>0?Jt(n.left+B/2,n.top+b,m-B/2,p-T/2,Ct.BOTTOM_LEFT):new Ne(n.left+B/2,n.top+n.height-T/2),this.topLeftBorderBox=s>0||a>0?Jt(n.left,n.top,s,a,Ct.TOP_LEFT):new Ne(n.left,n.top),this.topRightBorderBox=l>0||u>0?Jt(n.left+v,n.top,l,u,Ct.TOP_RIGHT):new Ne(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||f>0?Jt(n.left+w,n.top+y,A,f,Ct.BOTTOM_RIGHT):new Ne(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?Jt(n.left,n.top+b,m,p,Ct.BOTTOM_LEFT):new Ne(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?Jt(n.left+B,n.top+S,Math.max(0,s-B),Math.max(0,a-S),Ct.TOP_LEFT):new Ne(n.left+B,n.top+S),this.topRightPaddingBox=l>0||u>0?Jt(n.left+Math.min(v,n.width-C),n.top+S,v>n.width+C?0:Math.max(0,l-C),Math.max(0,u-S),Ct.TOP_RIGHT):new Ne(n.left+n.width-C,n.top+S),this.bottomRightPaddingBox=A>0||f>0?Jt(n.left+Math.min(w,n.width-B),n.top+Math.min(y,n.height-T),Math.max(0,A-C),Math.max(0,f-T),Ct.BOTTOM_RIGHT):new Ne(n.left+n.width-C,n.top+n.height-T),this.bottomLeftPaddingBox=m>0||p>0?Jt(n.left+B,n.top+Math.min(b,n.height-T),Math.max(0,m-B),Math.max(0,p-T),Ct.BOTTOM_LEFT):new Ne(n.left+B,n.top+n.height-T),this.topLeftContentBox=s>0||a>0?Jt(n.left+B+N,n.top+S+_,Math.max(0,s-(B+N)),Math.max(0,a-(S+_)),Ct.TOP_LEFT):new Ne(n.left+B+N,n.top+S+_),this.topRightContentBox=l>0||u>0?Jt(n.left+Math.min(v,n.width+B+N),n.top+S+_,v>n.width+B+N?0:l-B+N,u-(S+_),Ct.TOP_RIGHT):new Ne(n.left+n.width-(C+I),n.top+S+_),this.bottomRightContentBox=A>0||f>0?Jt(n.left+Math.min(w,n.width-(B+N)),n.top+Math.min(y,n.height+S+_),Math.max(0,A-(C+I)),f-(T+L),Ct.BOTTOM_RIGHT):new Ne(n.left+n.width-(C+I),n.top+n.height-(T+L)),this.bottomLeftContentBox=m>0||p>0?Jt(n.left+B+N,n.top+b,Math.max(0,m-(B+N)),p-(T+L),Ct.BOTTOM_LEFT):new Ne(n.left+B+N,n.top+n.height-(T+L))}return t}(),Ct;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ct||(Ct={}));var Jt=function(t,e,r,n,i){var s=4*((Math.sqrt(2)-1)/3),a=r*s,o=n*s,l=t+r,u=e+n;switch(i){case Ct.TOP_LEFT:return new ax(new Ne(t,u),new Ne(t,u-o),new Ne(l-a,e),new Ne(l,e));case Ct.TOP_RIGHT:return new ax(new Ne(t,e),new Ne(t+a,e),new Ne(l,u-o),new Ne(l,u));case Ct.BOTTOM_RIGHT:return new ax(new Ne(l,e),new Ne(l,e+o),new Ne(t+a,u),new Ne(t,u));case Ct.BOTTOM_LEFT:default:return new ax(new Ne(l,u),new Ne(l-a,u),new Ne(t,e+o),new Ne(t,e))}},Nb=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},M9e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Ib=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},D9e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),ox=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),O9e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),F9e=function(t){return t.type===0},aX=function(t){return t.type===1},U9e=function(t){return t.type===2},T5=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},$9e=function(t,e,r,n,i){return t.map(function(s,a){switch(a){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+i);case 3:return s.add(e,r+i)}return s})},oX=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),lX=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new j9e(this.container),this.container.styles.opacity<1&&this.effects.push(new O9e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new D9e(n,i,s))}if(this.container.styles.overflowX!==0){var a=Nb(this.curves),o=Ib(this.curves);T5(a,o)?this.effects.push(new ox(a,6)):(this.effects.push(new ox(a,2)),this.effects.push(new ox(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!aX(l)});if(r||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=Nb(n.curves),o=Ib(n.curves);T5(a,o)||i.unshift(new ox(o,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(l){return Mr(l.target,e)})},t}(),GN=function(t,e,r,n){t.container.elements.forEach(function(i){var s=Mr(i.flags,4),a=Mr(i.flags,2),o=new lX(i,t);Mr(i.styles.display,2048)&&n.push(o);var l=Mr(i.flags,8)?[]:n;if(s||a){var u=s||i.styles.isPositioned()?r:e,d=new oX(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var A=i.styles.zIndex.order;if(A<0){var f=0;u.negativeZIndex.some(function(m,p){return A>m.element.container.styles.zIndex.order?(f=p,!1):f>0}),u.negativeZIndex.splice(f,0,d)}else if(A>0){var h=0;u.positiveZIndex.some(function(m,p){return A>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else i.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);GN(o,d,s?d:r,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),GN(o,e,r,l);Mr(i.flags,8)&&cX(i,l)})},cX=function(t,e){for(var r=t instanceof $N?t.start:1,n=t instanceof $N?t.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof Gq&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Vm(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},Q9e=function(t){var e=new lX(t,null),r=new oX(e),n=[];return GN(e,r,r,n),cX(e.container,n),r},B5=function(t,e){switch(e){case 0:return $i(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return $i(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return $i(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return $i(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},H9e=function(t,e){switch(e){case 0:return $i(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return $i(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return $i(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return $i(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},K9e=function(t,e){switch(e){case 0:return $i(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return $i(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return $i(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return $i(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},V9e=function(t,e){switch(e){case 0:return lx(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return lx(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return lx(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return lx(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},lx=function(t,e){var r=[];return Di(t)?r.push(t.subdivide(.5,!1)):r.push(t),Di(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},$i=function(t,e,r,n){var i=[];return Di(t)?i.push(t.subdivide(.5,!1)):i.push(t),Di(r)?i.push(r.subdivide(.5,!0)):i.push(r),Di(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Di(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},uX=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Pb=function(t){var e=t.styles,r=t.bounds,n=Ht(e.paddingLeft,r.width),i=Ht(e.paddingRight,r.width),s=Ht(e.paddingTop,r.width),a=Ht(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+s+a))},G9e=function(t,e){return t===0?e.bounds:t===2?Pb(e):uX(e)},z9e=function(t,e){return t===0?e.bounds:t===2?Pb(e):uX(e)},RC=function(t,e,r){var n=G9e(bd(t.styles.backgroundOrigin,e),t),i=z9e(bd(t.styles.backgroundClip,e),t),s=W9e(bd(t.styles.backgroundSize,e),r,n),a=s[0],o=s[1],l=Qh(bd(t.styles.backgroundPosition,e),n.width-a,n.height-o),u=Y9e(bd(t.styles.backgroundRepeat,e),l,s,n,i),d=Math.round(n.left+l[0]),A=Math.round(n.top+l[1]);return[u,d,A,a,o]},fd=function(t){return Lt(t)&&t.value===dA.AUTO},cx=function(t){return typeof t=="number"},W9e=function(t,e,r){var n=e[0],i=e[1],s=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(Er(a)&&o&&Er(o))return[Ht(a,r.width),Ht(o,r.height)];var l=cx(s);if(Lt(a)&&(a.value===dA.CONTAIN||a.value===dA.COVER)){if(cx(s)){var u=r.width/r.height;return u<s!=(a.value===dA.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=cx(n),A=cx(i),f=d||A;if(fd(a)&&(!o||fd(o))){if(d&&A)return[n,i];if(!l&&!f)return[r.width,r.height];if(f&&l){var h=d?n:i*s,m=A?i:n/s;return[h,m]}var p=d?n:r.width,g=A?i:r.height;return[p,g]}if(l){var x=0,v=0;return Er(a)?x=Ht(a,r.width):Er(o)&&(v=Ht(o,r.height)),fd(a)?x=v*s:(!o||fd(o))&&(v=x/s),[x,v]}var y=null,w=null;if(Er(a)?y=Ht(a,r.width):o&&Er(o)&&(w=Ht(o,r.height)),y!==null&&(!o||fd(o))&&(w=d&&A?y/n*i:r.height),w!==null&&fd(a)&&(y=d&&A?w/i*n:r.width),y!==null&&w!==null)return[y,w];throw new Error("Unable to calculate background-size for element")},bd=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},Y9e=function(t,e,r,n,i){var s=e[0],a=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Ne(Math.round(n.left),Math.round(n.top+a)),new Ne(Math.round(n.left+n.width),Math.round(n.top+a)),new Ne(Math.round(n.left+n.width),Math.round(l+n.top+a)),new Ne(Math.round(n.left),Math.round(l+n.top+a))];case 3:return[new Ne(Math.round(n.left+s),Math.round(n.top)),new Ne(Math.round(n.left+s+o),Math.round(n.top)),new Ne(Math.round(n.left+s+o),Math.round(n.height+n.top)),new Ne(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Ne(Math.round(n.left+s),Math.round(n.top+a)),new Ne(Math.round(n.left+s+o),Math.round(n.top+a)),new Ne(Math.round(n.left+s+o),Math.round(n.top+a+l)),new Ne(Math.round(n.left+s),Math.round(n.top+a+l))];default:return[new Ne(Math.round(i.left),Math.round(i.top)),new Ne(Math.round(i.left+i.width),Math.round(i.top)),new Ne(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ne(Math.round(i.left),Math.round(i.height+i.top))]}},q9e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_5="Hidden Text",X9e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),i.src=q9e,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(_5)),n.appendChild(s),n.appendChild(i);var o=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(_5)),n.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),dX=function(){function t(e,r){this.context=e,this.options=r}return t}(),Z9e=1e4,J9e=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new X9e(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(r){this.ctx.save(),U9e(r)&&(this.ctx.globalAlpha=r.opacity),F9e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),aX(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return _n(this,void 0,void 0,function(){var n;return pn(this,function(i){switch(i.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return _n(this,void 0,void 0,function(){return pn(this,function(n){switch(n.label){case 0:if(Mr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,i){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+i);else{var a=HR(r.text);a.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+i),o+s.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=ize(r.fontFamily).join(", "),s=Bg(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(r,n){return _n(this,void 0,void 0,function(){var i,s,a,o,l,u,d,A,f=this;return pn(this,function(h){return i=this.createFontStyle(n),s=i[0],a=i[1],o=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,o),u=l.baseline,d=l.middle,A=n.paintOrder,r.textBounds.forEach(function(m){A.forEach(function(p){switch(p){case 0:f.ctx.fillStyle=Kr(n.color),f.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){f.ctx.shadowColor=Kr(x.color),f.ctx.shadowOffsetX=x.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=x.offsetY.number*f.options.scale,f.ctx.shadowBlur=x.blur.number,f.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=Kr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=Kr(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,i){if(i&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Pb(r),a=Ib(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return _n(this,void 0,void 0,function(){var n,i,s,a,o,l,v,v,u,d,A,f,w,h,m,b,p,g,x,v,y,w,b;return pn(this,function(S){switch(S.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,i=r.curves,s=n.styles,a=0,o=n.textNodes,S.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,s)]):[3,4];case 2:S.sent(),S.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof Hq))return[3,8];S.label=5;case 5:return S.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return v=S.sent(),this.renderReplacedElement(n,i,v),[3,8];case 7:return S.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Kq&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof Vq))return[3,12];S.label=9;case 9:return S.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return v=S.sent(),this.renderReplacedElement(n,i,v),[3,12];case 11:return S.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Yq&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=S.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),S.label=14;case 14:if(n instanceof KR&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===Cb?n.checked&&(this.ctx.save(),this.path([new Ne(n.bounds.left+A*.39363,n.bounds.top+A*.79),new Ne(n.bounds.left+A*.16,n.bounds.top+A*.5549),new Ne(n.bounds.left+A*.27347,n.bounds.top+A*.44071),new Ne(n.bounds.left+A*.39694,n.bounds.top+A*.5649),new Ne(n.bounds.left+A*.72983,n.bounds.top+A*.23),new Ne(n.bounds.left+A*.84,n.bounds.top+A*.34085),new Ne(n.bounds.left+A*.39363,n.bounds.top+A*.79)]),this.ctx.fillStyle=Kr(p5),this.ctx.fill(),this.ctx.restore()):n.type===Tb&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Kr(p5),this.ctx.fill(),this.ctx.restore())),eze(n)&&n.value.length){switch(f=this.createFontStyle(s),w=f[0],h=f[1],m=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=Kr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=rze(n.styles.textAlign),b=Pb(n),p=0,n.styles.textAlign){case 1:p+=b.width/2;break;case 2:p+=b.width;break}g=b.add(p,0,0,-b.height/2+1),this.ctx.save(),this.path([new Ne(b.left,b.top),new Ne(b.left+b.width,b.top),new Ne(b.left+b.width,b.top+b.height),new Ne(b.left,b.top+b.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gp(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Mr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];v=void 0,y=x.url,S.label=15;case 15:return S.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=S.sent(),this.ctx.drawImage(v,n.bounds.left-(v.width+10),n.bounds.top),[3,18];case 17:return S.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Kr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",b=new Bo(n.bounds.left,n.bounds.top+Ht(n.styles.paddingTop,n.bounds.width),n.bounds.width,Z4(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gp(r.listValue,b),s.letterSpacing,Z4(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),S.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return _n(this,void 0,void 0,function(){var n,i,x,s,a,x,o,l,x,u,d,x,A,f,x,h,m,x,p,g,x;return pn(this,function(v){switch(v.label){case 0:if(Mr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:v.sent(),n=0,i=r.negativeZIndex,v.label=2;case 2:return n<i.length?(x=i[n],[4,this.renderStack(x)]):[3,5];case 3:v.sent(),v.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:v.sent(),s=0,a=r.nonInlineLevel,v.label=7;case 7:return s<a.length?(x=a[s],[4,this.renderNode(x)]):[3,10];case 8:v.sent(),v.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,v.label=11;case 11:return o<l.length?(x=l[o],[4,this.renderStack(x)]):[3,14];case 12:v.sent(),v.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,v.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:v.sent(),v.label=17;case 17:return u++,[3,15];case 18:A=0,f=r.inlineLevel,v.label=19;case 19:return A<f.length?(x=f[A],[4,this.renderNode(x)]):[3,22];case 20:v.sent(),v.label=21;case 21:return A++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return h<m.length?(x=m[h],[4,this.renderStack(x)]):[3,26];case 24:v.sent(),v.label=25;case 25:return h++,[3,23];case 26:p=0,g=r.positiveZIndex,v.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:v.sent(),v.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(i,s){var a=Di(i)?i.start:i;s===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Di(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(r,n,i,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(r,n,i){var s;if(r.width===n&&r.height===i)return r;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(r){return _n(this,void 0,void 0,function(){var n,i,s,a,o,l;return pn(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,i=function(d){var A,f,h,_,k,O,N,R,T,m,_,k,O,N,R,p,g,x,v,y,w,b,S,C,T,B,_,I,L,N,R,M,k,O,j,D,F,$,U,K,V,q;return pn(this,function(H){switch(H.label){case 0:if(d.type!==0)return[3,5];A=void 0,f=d.url,H.label=1;case 1:return H.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return A=H.sent(),[3,4];case 3:return H.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return A&&(h=RC(r,n,[A.width,A.height,A.width/A.height]),_=h[0],k=h[1],O=h[2],N=h[3],R=h[4],T=s.ctx.createPattern(s.resizeImage(A,N,R),"repeat"),s.renderRepeat(_,T,k,O)),[3,6];case 5:FKe(d)?(m=RC(r,n,[null,null,null]),_=m[0],k=m[1],O=m[2],N=m[3],R=m[4],p=LKe(d.angle,N,R),g=p[0],x=p[1],v=p[2],y=p[3],w=p[4],b=document.createElement("canvas"),b.width=N,b.height=R,S=b.getContext("2d"),C=S.createLinearGradient(x,y,v,w),q4(d.stops,g).forEach(function(z){return C.addColorStop(z.stop,Kr(z.color))}),S.fillStyle=C,S.fillRect(0,0,N,R),N>0&&R>0&&(T=s.ctx.createPattern(b,"repeat"),s.renderRepeat(_,T,k,O))):UKe(d)&&(B=RC(r,n,[null,null,null]),_=B[0],I=B[1],L=B[2],N=B[3],R=B[4],M=d.position.length===0?[UR]:d.position,k=Ht(M[0],N),O=Ht(M[M.length-1],R),j=jKe(d,k,O,N,R),D=j[0],F=j[1],D>0&&F>0&&($=s.ctx.createRadialGradient(I+k,L+O,0,I+k,L+O,D),q4(d.stops,D*2).forEach(function(z){return $.addColorStop(z.stop,Kr(z.color))}),s.path(_),s.ctx.fillStyle=$,D!==F?(U=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,V=F/D,q=1/V,s.ctx.save(),s.ctx.translate(U,K),s.ctx.transform(1,0,0,V,0,0),s.ctx.translate(-U,-K),s.ctx.fillRect(I,q*(L-K)+K,N,R*q),s.ctx.restore()):s.ctx.fill())),H.label=6;case 6:return n--,[2]}})},s=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return a<o.length?(l=o[a],[5,i(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,i){return _n(this,void 0,void 0,function(){return pn(this,function(s){return this.path(B5(i,n)),this.ctx.fillStyle=Kr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,i,s){return _n(this,void 0,void 0,function(){var a,o;return pn(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return a=H9e(s,i),this.path(a),this.ctx.fillStyle=Kr(r),this.ctx.fill(),o=K9e(s,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return _n(this,void 0,void 0,function(){var n,i,s,a,o,l,u,d,A=this;return pn(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,i=!Vl(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=tze(bd(n.backgroundClip,0),r.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Vl(n.backgroundColor)||(this.ctx.fillStyle=Kr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){A.ctx.save();var m=Nb(r.curves),p=h.inset?0:Z9e,g=$9e(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(A.path(m),A.ctx.clip(),A.mask(g)):(A.mask(m),A.ctx.clip(),A.path(g)),A.ctx.shadowOffsetX=h.offsetX.number+p,A.ctx.shadowOffsetY=h.offsetY.number,A.ctx.shadowColor=Kr(h.color),A.ctx.shadowBlur=h.blur.number,A.ctx.fillStyle=h.inset?Kr(h.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),f.label=2;case 2:o=0,l=0,u=s,f.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!Vl(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,i,s,a){return _n(this,void 0,void 0,function(){var o,l,u,d,A,f,h,m,p,g,x,v,y,w,b,S,b,S;return pn(this,function(C){return this.ctx.save(),o=V9e(s,i),l=B5(s,i),a===2&&(this.path(l),this.ctx.clip()),Di(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Di(l[1])?(A=l[1].end.x,f=l[1].end.y):(A=l[1].x,f=l[1].y),i===0||i===2?h=Math.abs(u-A):h=Math.abs(d-f),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(l.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,a===3&&(m=n,p=n),g=!0,h<=m*2?g=!1:h<=m*2+p?(x=h/(2*m+p),m*=x,p*=x):(v=Math.floor((h+p)/(m+p)),y=(h-v*m)/(v-1),w=(h-(v+1)*m)/v,p=w<=0||Math.abs(p-y)<Math.abs(p-w)?y:w),g&&(a===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Kr(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Di(l[0])&&(b=l[3],S=l[0],this.ctx.beginPath(),this.formatPath([new Ne(b.end.x,b.end.y),new Ne(S.start.x,S.start.y)]),this.ctx.stroke()),Di(l[1])&&(b=l[1],S=l[2],this.ctx.beginPath(),this.formatPath([new Ne(b.end.x,b.end.y),new Ne(S.start.x,S.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return _n(this,void 0,void 0,function(){var n;return pn(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Kr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Q9e(r),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(dX),eze=function(t){return t instanceof Wq||t instanceof zq?!0:t instanceof KR&&t.type!==Tb&&t.type!==Cb},tze=function(t,e){switch(t){case 0:return Nb(e);case 2:return M9e(e);case 1:default:return Ib(e)}},rze=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},nze=["-apple-system","system-ui"],ize=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return nze.indexOf(e)===-1}):t},sze=function(t){Ds(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(r){return _n(this,void 0,void 0,function(){var n,i;return pn(this,function(s){switch(s.label){case 0:return n=UN(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,aze(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Kr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(dX),aze=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},oze=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,$0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,$0([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,$0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,$0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),lze=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new oze({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new _9e(this,e)}return t.instanceCount=1,t}(),cze=function(t,e){return e===void 0&&(e={}),uze(t,e)};typeof window<"u"&&sX.setContext(window);var uze=function(t,e){return _n(void 0,void 0,void 0,function(){var r,n,i,s,a,o,l,u,d,A,f,h,m,p,g,x,v,y,w,b,C,S,C,T,B,_,I,L,N,R,M,k,O,j,D,F,$,U,K,V;return pn(this,function(q){switch(q.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(T=e.allowTaint)!==null&&T!==void 0?T:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(_=e.useCORS)!==null&&_!==void 0?_:!1},s=CN({logging:(I=e.logging)!==null&&I!==void 0?I:!0,cache:e.cache},i),a={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(N=e.windowHeight)!==null&&N!==void 0?N:n.innerHeight,scrollX:(R=e.scrollX)!==null&&R!==void 0?R:n.pageXOffset,scrollY:(M=e.scrollY)!==null&&M!==void 0?M:n.pageYOffset},o=new Bo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),l=new lze(s,o),u=(k=e.foreignObjectRendering)!==null&&k!==void 0?k:!1,d={allowTaint:(O=e.allowTaint)!==null&&O!==void 0?O:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),A=new S5(l,t,d),f=A.clonedReferenceElement,f?[4,A.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=q.sent(),m=VR(f)||d9e(f)?$8e(f.ownerDocument):U1(l,f),p=m.width,g=m.height,x=m.left,v=m.top,y=dze(l,f,e.backgroundColor),w={canvas:e.canvas,backgroundColor:y,scale:(D=(j=e.scale)!==null&&j!==void 0?j:n.devicePixelRatio)!==null&&D!==void 0?D:1,x:((F=e.x)!==null&&F!==void 0?F:0)+x,y:(($=e.y)!==null&&$!==void 0?$:0)+v,width:(U=e.width)!==null&&U!==void 0?U:Math.ceil(p),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(g)},u?(l.logger.debug("Document cloned, using foreign object rendering"),C=new sze(l,w),[4,C.render(f)]):[3,3];case 2:return b=q.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+x+","+v+" with size "+p+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),S=Xq(l,f),y===S.styles.backgroundColor&&(S.styles.backgroundColor=lo.TRANSPARENT),l.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),C=new J9e(l,w),[4,C.render(S)];case 4:b=q.sent(),q.label=5;case 5:return(!((V=e.removeContainer)!==null&&V!==void 0)||V)&&(S5.destroy(h)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,b]}})})},dze=function(t,e,r){var n=e.ownerDocument,i=n.documentElement?pp(t,getComputedStyle(n.documentElement).backgroundColor):lo.TRANSPARENT,s=n.body?pp(t,getComputedStyle(n.body).backgroundColor):lo.TRANSPARENT,a=typeof r=="string"?pp(t,r):r===null?lo.TRANSPARENT:4294967295;return e===n.documentElement?Vl(i)?Vl(s)?a:s:i:a};const Aze=()=>window.fabric,AX=E.createContext(void 0),fze=({children:t})=>{const[e,r]=E.useState(!1),[n,i]=E.useState([]),s=()=>r(!0),a=()=>r(!1),o=()=>i([]),l=E.useCallback(async(d,A)=>{if(!e)return;const f=Aze();if(!f){console.warn("Fabric.js not loaded from CDN");return}try{const h=d.closest(".dashboard-widget")||d.closest("#dashboard-header")||d.closest("#app-sidebar")||document.body,m=d.getBoundingClientRect(),p=h.getBoundingClientRect(),g=m.left-p.left,x=m.top-p.top,v=await cze(h,{useCORS:!0,scale:1}),y=new f.StaticCanvas(void 0,{width:v.width,height:v.height}),w=await f.FabricImage.fromURL(v.toDataURL());y.add(w);const b=new f.Rect({left:g,top:x,width:m.width,height:m.height,fill:"transparent",stroke:"#ef4444",strokeWidth:4,rx:4,ry:4});y.add(b),y.renderAll();const S={id:Math.random().toString(36).substr(2,9),timestamp:Date.now(),imageUrl:y.toDataURL({format:"png",multiplier:1}),targetLabel:A,action:"Click"};i(C=>[...C,S])}catch(h){console.error("AutoScribe Capture Failed:",h)}},[e]);E.useEffect(()=>{if(!e)return;const d=A=>{const f=A.target;if(f.closest(".scribe-ignore"))return;const h=f.getAttribute("aria-label")||f.innerText||f.title||"Element";l(f,h.trim())};return window.addEventListener("click",d,!0),()=>window.removeEventListener("click",d,!0)},[e,l]);const u=Q.useMemo(()=>({isRecording:e,startRecording:s,stopRecording:a,steps:n,clearSteps:o}),[e,n]);return c.jsx(AX.Provider,{value:u,children:t})},hze=()=>{const t=E.useContext(AX);if(!t)throw new Error("useScribe must be used within ScribeProvider");return t},pze=()=>{const{isRecording:t,startRecording:e,stopRecording:r,steps:n,clearSteps:i}=hze(),[s,a]=E.useState(null),o=()=>{if(n.length===0)return;const l=document.createElement("a");l.download=`scribe-doc-${Date.now()}.json`;const u=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});l.href=URL.createObjectURL(u),l.click()};return c.jsxs("div",{className:"flex-1 p-6 h-full flex flex-col gap-6 bg-slate-950/50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h2",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[c.jsx(ane,{className:"w-6 h-6 text-primary"}),"Auto-Scribe Documentation"]}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"Automatically generate step-by-step visual guides from your actions."})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[t?c.jsxs(te,{variant:"destructive",onClick:r,className:"gap-2 animate-pulse",children:[c.jsx($ne,{className:"w-4 h-4"})," Stop Recording"]}):c.jsxs(te,{variant:"default",onClick:e,className:"gap-2 bg-green-600 hover:bg-green-700",children:[c.jsx(ho,{className:"w-4 h-4"})," Start Auto-Scribe"]}),c.jsxs(te,{variant:"outline",onClick:i,disabled:n.length===0,className:"gap-2",children:[c.jsx(iu,{className:"w-4 h-4"})," Clear"]}),c.jsxs(te,{variant:"secondary",onClick:o,disabled:n.length===0,className:"gap-2",children:[c.jsx(n8,{className:"w-4 h-4"})," Export JSON"]})]})]}),c.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-6 overflow-hidden",children:[c.jsxs("div",{className:"col-span-12 lg:col-span-4 flex flex-col gap-4",children:[c.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-500",children:["Captured Steps (",n.length,")"]}),c.jsx(Zn,{className:"flex-1 rounded-lg border border-white/5 bg-white/5",children:c.jsx("div",{className:"p-4 space-y-3",children:n.length===0?c.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 border-2 border-dashed border-white/10 rounded-lg",children:[c.jsx(qre,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{className:"text-xs",children:"No steps captured yet."}),c.jsx("p",{className:"text-[10px] opacity-60",children:"Record actions to see them here."})]}):n.map((l,u)=>c.jsx(Fe,{className:`cursor-pointer transition-all border-white/10 hover:border-primary/50 group ${s===u?"ring-2 ring-primary bg-primary/5 border-primary/50":"bg-slate-900/50"}`,onClick:()=>a(u),children:c.jsxs(vt,{className:"p-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(We,{variant:"outline",className:"h-6 w-6 rounded-full flex items-center justify-center p-0 border-primary/30 text-primary",children:u+1}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("p",{className:"text-xs font-bold text-slate-200 line-clamp-1",children:[l.action,": ",l.targetLabel]}),c.jsx("p",{className:"text-[10px] text-slate-500 leading-none",children:new Date(l.timestamp).toLocaleTimeString()})]})]}),c.jsx(Io,{size:14,className:"text-slate-600 group-hover:text-primary"})]})},l.id))})})]}),c.jsx("div",{className:"col-span-12 lg:col-span-8 flex flex-col gap-4",children:s!==null?c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-500",children:"Step Preview"}),c.jsxs(Fe,{className:"flex-1 bg-slate-900 border-white/10 overflow-hidden relative group",children:[c.jsx(Dt,{className:"p-4 border-b border-white/5 bg-slate-950/50",children:c.jsx(Ot,{className:"text-sm font-bold flex items-center justify-between",children:c.jsxs("span",{children:["Step ",s+1,": ",n[s].action,' on "',n[s].targetLabel,'"']})})}),c.jsx(vt,{className:"p-0 h-full flex items-center justify-center bg-black/40",children:c.jsx("img",{src:n[s].imageUrl,alt:`Step ${s+1}`,className:"max-w-full max-h-full object-contain"})})]})]}):c.jsx("div",{className:"h-full flex items-center justify-center text-slate-500 border-2 border-dashed border-white/10 rounded-lg bg-slate-900/20",children:c.jsx("p",{className:"text-xs",children:"Select a step to preview the captured visual."})})})]})]})},mze=({events:t,onSelectEvent:e,onDismiss:r})=>t.length===0?null:c.jsxs(Fe,{className:"bg-black/60 backdrop-blur-md border-amber-500/30 shadow-lg p-2 max-w-sm",children:[c.jsx("div",{className:"flex items-center justify-between mb-2 px-2",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cw,{className:"w-4 h-4 text-amber-500 animate-pulse"}),c.jsxs("h3",{className:"text-[11px] font-bold uppercase tracking-wider text-amber-500",children:["Pending Zones (",t.length,")"]})]})}),c.jsx(Zn,{className:"h-[120px]",children:c.jsx("div",{className:"space-y-1 pr-3",children:t.map(n=>c.jsxs("div",{className:"group relative flex items-center justify-between bg-white/5 hover:bg-white/10 rounded border border-white/10 px-2 py-1.5 transition-all",children:[c.jsxs("div",{className:"flex-1 cursor-pointer pr-6",onClick:()=>e(n),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(We,{variant:"outline",className:`text-[9px] h-4 px-1 ${n.team==="TEAM_A"?"border-red-500/50 text-red-500":"border-blue-500/50 text-blue-500"}`,children:n.team==="TEAM_A"?"T.A":"T.B"}),c.jsx("span",{className:"text-[10px] font-medium text-zinc-100 truncate",children:n.eventName.replace(/_/g," ")})]}),c.jsx("div",{className:"text-[8px] text-zinc-500 mt-0.5 font-mono",children:new Date(n.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-zinc-500 hover:text-amber-500",onClick:()=>e(n),children:c.jsx(Io,{className:"w-4 h-4"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-zinc-500 hover:text-red-500",onClick:()=>r(n.id),children:c.jsx(At,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-amber-500/50 rounded-l"})]},n.id))})})]}),gze=({selectedZone:t,onConfirm:e,onCancel:r,eventName:n,pendingEvents:i,onSelectEvent:s})=>{const a=Array.from({length:18},(o,l)=>l+1);return c.jsxs("div",{className:"fixed inset-0 z-[100] flex bg-zinc-950/90 backdrop-blur-md animate-in fade-in duration-300 overflow-hidden",children:[c.jsxs("div",{className:"w-[350px] border-r border-white/10 bg-black/40 p-6 flex flex-col h-full shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:c.jsx(u8,{className:"w-5 h-5 text-amber-500"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:"EN ATTENTE"}),c.jsx("p",{className:"text-[10px] text-amber-500 font-bold uppercase tracking-widest opacity-70",children:"Assignation de zone"})]})]}),c.jsx(Zn,{className:"flex-1 -mx-2 px-2",children:c.jsx("div",{className:"space-y-3",children:i.length===0?c.jsxs("div",{className:"text-center py-20 opacity-30",children:[c.jsx(cw,{className:"w-12 h-12 mx-auto mb-4"}),c.jsx("p",{className:"text-xs uppercase tracking-widest font-bold",children:"Aucun vnement"})]}):i.map(o=>{var l;return c.jsxs("button",{onClick:()=>s(o),className:`w-full group relative flex flex-col gap-1 p-4 rounded-xl border transition-all text-left
                                        ${n===o.eventName&&((l=i.find(u=>u.eventName===n))==null?void 0:l.id)===o.id?"bg-amber-500/10 border-amber-500/50 shadow-lg shadow-amber-500/5":"bg-white/5 border-white/10 hover:border-white/20 hover:bg-white/[0.07]"}
                                    `,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(We,{variant:"outline",className:`text-[9px] h-4 px-1.5 ${o.team==="TEAM_A"?"border-red-500/40 text-red-500":"border-blue-500/40 text-blue-500"}`,children:o.team==="TEAM_A"?"TEAM A":"TEAM B"}),c.jsx("span",{className:"text-[9px] font-mono opacity-50 text-white",children:new Date(o.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),c.jsx("span",{className:"text-sm font-bold text-zinc-100 truncate mt-1",children:o.eventName.replace(/_/g," ").toUpperCase()})]},o.id)})})}),c.jsx("div",{className:"mt-8 p-4 bg-white/5 rounded-xl border border-white/10",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold text-zinc-400",children:[c.jsx("span",{children:" NAVIGUER"}),c.jsx("span",{className:"text-zinc-500 italic",children:"D-PAD"})]}),c.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold text-green-500",children:[c.jsx("span",{children:" CONFIRMER"}),c.jsx("span",{children:"BUTTON A"})]}),c.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold text-red-500",children:[c.jsx("span",{children:" ANNULER"}),c.jsx("span",{children:"BUTTON B"})]})]})})]}),c.jsxs("div",{className:"flex-1 relative flex items-center justify-center p-12 bg-[radial-gradient(circle_at_center,rgba(59,130,246,0.05)_0%,transparent_100%)]",children:[c.jsxs("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 text-center pointer-events-none",children:[c.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tighter opacity-20",children:"ZONE SELECTOR"}),c.jsx("div",{className:"h-1 w-24 bg-amber-500/30 mx-auto rounded-full"})]}),c.jsxs("div",{className:"relative w-full max-w-2xl aspect-[3/4] bg-emerald-950/20 rounded-[2rem] border-4 border-white/20 p-8 shadow-[0_0_100px_rgba(0,0,0,0.5)]",children:[c.jsxs("div",{className:"absolute inset-8 border-2 border-white/20 rounded-sm pointer-events-none",children:[c.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-white/10"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 border-2 border-white/10 rounded-full"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2 h-full relative z-10",children:a.map(o=>c.jsx("button",{onClick:()=>e(o),className:`
                                    flex items-center justify-center rounded-xl border-2 text-3xl font-black transition-all duration-300
                                    ${t===o?"bg-amber-500 border-white text-black scale-105 rotate-2 shadow-[0_0_40px_rgba(245,158,11,0.4)]":"bg-white/5 border-white/10 text-white/20 hover:bg-white/10 hover:border-white/30 hover:text-white/40"}
                                `,children:o},o))})]}),c.jsx("button",{onClick:r,className:"absolute top-8 right-8 p-4 bg-white/5 hover:bg-red-500/20 text-white rounded-full transition-colors border border-white/10 group",children:c.jsx(At,{className:"w-8 h-8 group-hover:scale-110 transition-transform"})})]})]})};function N5(t){var fk;const{user:e,activeView:r,setActiveView:n,hasPermission:i,trackingMode:s,setTrackingMode:a,isMatchActive:o,toggleMatch:l,matchTime:u,formatTime:d,voiceLanguage:A,setVoiceLanguage:f,isListening:h,toggleListening:m,isInRoom:p,joinVoiceRoom:g,leaveVoiceRoom:x,toggleMute:v,isMuted:y,peers:w,isEditMode:b,setIsEditMode:S,saveLayout:C,resetLayout:T,videoRef:B,videoStream:_,audioRef:I,layoutConfig:L,toggleComponentVisibility:N,teams:R,selectedTeam:M,handleTeamUpload:k,handleTeamSelect:O,keyboardBuffer:j,showMappings:D,mappings:F,pressedButtons:$,updateMapping:U,resetMappings:K,handleGameEvent:V,isEditingMode:q,setIsEditingMode:H,showAnalysisView:z,videoMode:ae,useVideoMode:X,isIPTVConfigured:ne,livePlayerRef:ee,events:G,showFeed:ge,setUseVideoMode:ye,setVideoMode:Me,showIPTVBrowser:ce,setShowIPTVBrowser:Be,showFIFAPlusBrowser:_e,setShowFIFAPlusBrowser:He,videoFile:Se,remoteVideoUrl:it,videoTime:Ce,setVideoTime:Qe,seekTime:me,setSeekTime:Pe,isVideoPlaying:be,setIsVideoPlaying:le,socket:Ee,axes:ve,buttons:pe,teamNames:re,handlePlayerSelect:Ke,analysisResults:xe,quickSelectorState:Oe,thirdsZone:st,setVideoFile:xt,setServerVideoPath:Xr,sessionMode:br,setSessionMode:Fn,showAdminWaitingRoom:Os,setShowAdminWaitingRoom:Tn,togglePiP:Qr,toggleWatchMatch:$e,setEvents:Ae,lastEventButtonLabel:fe,isSessionStarted:ue,setIsSessionStarted:de,selectedPendingEvent:rt,setSelectedPendingEvent:ct,handleDismissPending:Rt,handleAssignZone:pr,isPiP:Et=!1}=t,[ti,Yu]=Q.useState(!1);Q.useEffect(()=>{const hk=localStorage.getItem("tacta-guide-v3");if(console.log("[Tour] Checking guide status:",{hasSeenGuide:hk,isPiP:Et}),!hk&&!Et){console.log("[Tour] Triggering auto-start timer...");const xJ=setTimeout(()=>{console.log("[Tour] Starting guide now"),Yu(!0)},2500);return()=>clearTimeout(xJ)}},[Et]);const aE=Q.useCallback(()=>{console.log("[Tour] Guide finished or skipped"),Yu(!1),localStorage.setItem("tacta-guide-v3","true")},[]),gJ=Q.useCallback(()=>{console.log("[Tour] Manual start requested"),Yu(!0)},[]);return c.jsxs(FK,{children:[!Et&&c.jsx(sAe,{run:ti,onFinish:aE}),c.jsxs("div",{className:"flex h-screen w-screen bg-background overflow-hidden text-xs",children:[(e==null?void 0:e.role)!=="eye_spotter"&&c.jsx(oAe,{currentView:r,onViewChange:n}),c.jsxs(HK,{className:"flex flex-col relative min-w-0 flex-1 h-screen overflow-hidden",children:[c.jsx(AAe,{videoRef:B,videoStream:_}),c.jsx("audio",{ref:I,playsInline:!0,onCanPlay:()=>{var Nr;(Nr=I.current)==null||Nr.play().catch(()=>{})}}),c.jsx(dAe,{userRole:e==null?void 0:e.role,activeView:r,setActiveView:n,onStartGuide:gJ,hasPermission:i,trackingMode:s,setTrackingMode:a,isMatchActive:o,toggleMatch:l,matchTime:u,formatTime:d,voiceLanguage:A,setVoiceLanguage:f,isListening:h,toggleListening:m,isInRoom:p,joinVoiceRoom:g,leaveVoiceRoom:x,toggleMute:v,isMuted:y,peersCount:w.length,isEditMode:b,setIsEditMode:S,saveLayout:C,resetLayout:T}),c.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col",children:[r==="video_manager"?c.jsx("div",{className:"flex-1 p-4 bg-slate-950 overflow-hidden",children:c.jsx(O8e,{})}):r==="dashboard"?c.jsx(Cxe,{userRole:e==null?void 0:e.role,isEditMode:b,layoutConfig:L,toggleComponentVisibility:N,teams:R,selectedTeam:M,handleTeamUpload:k,handleTeamSelect:O,trackingMode:s,keyboardBuffer:j,showMappings:D,mappings:F,pressedButtons:$,updateMapping:U,resetMappings:K,handleGameEvent:V,isEditingMode:q,setIsEditingMode:H,hasPermission:i,showAnalysisView:z,videoMode:ae,useVideoMode:X,isIPTVConfigured:ne,livePlayerRef:ee,events:G,showFeed:ge,setUseVideoMode:ye,setVideoMode:Me,showIPTVBrowser:ce,setShowIPTVBrowser:Be,showFIFAPlusBrowser:_e,setShowFIFAPlusBrowser:He,videoFile:Se,remoteVideoUrl:it,videoTime:Ce,setVideoTime:Qe,seekTime:me,setSeekTime:Pe,isVideoPlaying:be,setIsVideoPlaying:le,socket:Ee,axes:ve,buttons:pe,teamNames:re,handlePlayerSelect:Ke,analysisResults:xe,quickSelectorState:Oe,thirdsZone:st,setVideoFile:xt,setServerVideoPath:Xr,sessionMode:br,setShowAdminWaitingRoom:Tn,togglePiP:Qr,toggleWatchMatch:$e,setEvents:Ae,lastEventButtonLabel:fe}):r==="analytics"?c.jsx(Bxe,{events:G}):r==="qa"?c.jsx(Pxe,{events:G,videoFile:Se,teamNames:re,availablePlayers:((fk=R.get(M))==null?void 0:fk.PlayerData.map(Nr=>({id:Nr.ID,name:`${Nr.Forename} ${Nr.Surname}`})))||[],setEvents:Ae,socket:Ee,setSeekTime:Nr=>{Pe(Nr),a("POST_MATCH"),n("dashboard")},setTrackingMode:a,setActiveView:n}):r==="tactics"?c.jsx(k8e,{events:G,teamNames:re,teamARoster:R.get(Array.from(R.keys())[0])||{PlayerData:[]},teamBRoster:R.get(Array.from(R.keys())[1])||{PlayerData:[]}}):r==="community"?c.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:c.jsx(D8e,{})}):r==="settings"?c.jsx(L8e,{mappings:F,pressedButtons:$,updateMapping:U,resetMappings:K,events:G}):r==="documentation"?c.jsx(pze,{}):null,br===null&&c.jsx(F8e,{onSelectMode:Nr=>{Fn(Nr),Nr==="collab"&&g()}}),c.jsx("div",{className:"fixed bottom-20 left-4 z-[100] flex flex-col gap-2 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:c.jsx(mze,{events:G.filter(Nr=>Nr.id!==-1&&Nr.isPendingZone),onSelectEvent:ct,onDismiss:Rt})})}),rt&&c.jsx(gze,{selectedZone:rt.zone||1,onConfirm:Nr=>pr(rt.id,Nr),onCancel:()=>ct(null),eventName:rt.eventName,pendingEvents:G.filter(Nr=>Nr.isPendingZone),onSelectEvent:ct}),Oe.isOpen&&c.jsx(d9,{isVisible:Oe.isOpen,roster:Oe.roster,selectedIndex:Oe.selectedIndex,team:Oe.team}),Os&&c.jsx(U8e,{connectedPeers:w,onStartSession:()=>{Tn(!1),de(!0),Ee==null||Ee.emit("start-session")}}),!ue&&br==="collab"&&(e==null?void 0:e.role)!=="admin"&&c.jsx("div",{className:"absolute inset-0 z-50 bg-background/60 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs(Fe,{className:"max-w-md w-full bg-card shadow-2xl border-primary/20 text-center p-8",children:[c.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:c.jsx(un,{className:"w-8 h-8 text-primary animate-pulse"})}),c.jsx("h2",{className:"text-xl font-bold mb-2",children:"Waiting for Admin"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"The session hasn't started yet. Please wait for the analyst to initialize the dashboard."})]})})]}),ge&&c.jsx(A9,{events:G})]})]})]})}function xze(){const t=Ta(),e=Yr(),r=Cf(),n=Kce(),i=jce(t,e,r);Mce(i);const s=Uce(i),a=Hce(s.handleEventLogged,i.gamepadConfig,i.setIsVideoPlaying),o={...i,...s,...a,...n},l=c.jsx(N5,{...o});return c.jsx(WB,{name:"IndexContent",children:c.jsxs(c.Fragment,{children:[l,i.pipWindow&&No.createPortal(c.jsx(N5,{...o,isPiP:!0}),i.pipWindow.document.body)]})})}function vze(){return c.jsx(xze,{})}var GR="Progress",zR=100,[yze,HZe]=Cn(GR),[bze,wze]=yze(GR),fX=E.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:s=Eze,...a}=t;(i||i===0)&&!I5(i)&&console.error(Sze(`${i}`,"Progress"));const o=I5(i)?i:zR;n!==null&&!P5(n,o)&&console.error(Cze(`${n}`,"Progress"));const l=P5(n,o)?n:null,u=Rb(l)?s(l,o):void 0;return c.jsx(bze,{scope:r,value:l,max:o,children:c.jsx(De.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Rb(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":mX(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});fX.displayName=GR;var hX="ProgressIndicator",pX=E.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,i=wze(hX,r);return c.jsx(De.div,{"data-state":mX(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});pX.displayName=hX;function Eze(t,e){return`${Math.round(t/e*100)}%`}function mX(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Rb(t){return typeof t=="number"}function I5(t){return Rb(t)&&!isNaN(t)&&t>0}function P5(t,e){return Rb(t)&&!isNaN(t)&&t<=e&&t>=0}function Sze(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${zR}\`.`}function Cze(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${zR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gX=fX,Tze=pX;const zN=E.forwardRef(({className:t,value:e,...r},n)=>c.jsx(gX,{ref:n,className:Z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:c.jsx(Tze,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));zN.displayName=gX.displayName;const Bze=()=>({offBallRuns:0,overlaps:0,underlaps:0,thirdManRuns:0,dummyRuns:0,runsPerPossession:0,offBallImpactIndex:0,spaceCreationEfficiency:0,zoneEntriesFinalThird:0,centralPenetrations:0,halfSpaceOccupation:0,centralThreatIndex:0,widthStretchScore:0,aiPrecisionRate:0,analystAgreementRate:0,aiReliabilityScore:0,dataTrustIndex:0,chancesCreated:0,keyPasses:0,xG:0,passCompletion:0,attackingProductivity:0,gameControlIndex:0,overloadsCreated:0,defensiveImbalance:0,tacticalSuperiorityIndex:0,chaosCreationRating:0,pressResistanceSuccess:0,restDefenseIntegrity:0,pressResistanceIndex:0,offsideFrequency:0,tacticalFouls:0,switchSuccess:0,fieldExploitationAbility:0,tacticalControlIndex:0,attackingEfficiencyIndex:0,defensiveOrganizationScore:0,teamIntelligenceRating:0,goals:0,shots:0,shotsOnTarget:0,passes:0,tackles:0,interceptions:0,clearances:0,duelsWon:0,duelsLost:0,fouls:0,cardsYellow:0,cardsRed:0,corners:0,possessionWon:0,possessionLost:0,switchesOfPlay:0,turnoversWon:0,pressTraps:0,carries:0}),R5=(t,e)=>{const r=Bze(),n=t.filter(f=>f.team===e);n.forEach(f=>{const h=f.eventName;h.includes("pass")&&r.passes++,h.includes("shot")&&r.shots++,h==="shot_outcome"&&r.shotsOnTarget++,h==="goal"&&(r.goals++,r.xG+=.8),(h==="tackle_success"||h==="duel_won")&&r.duelsWon++,h==="duel_lost"&&r.duelsLost++,h==="interception"&&r.interceptions++,h==="clearance"&&r.clearances++,h==="foul"&&r.fouls++,h==="card_yellow"&&r.cardsYellow++,h==="corner"&&r.corners++,h==="off_ball_run"&&r.offBallRuns++,h==="overlap"&&r.overlaps++,h==="underlap"&&r.underlaps++,h==="third_man"&&r.thirdManRuns++,h==="dummy_run"&&r.dummyRuns++,h==="key_pass"&&r.keyPasses++,h==="chance_created"&&r.chancesCreated++,h==="final_third_entry"&&r.zoneEntriesFinalThird++,h==="central_penetration"&&r.centralPenetrations++,h==="possession_won"&&r.possessionWon++,h==="possession_lost"&&r.possessionLost++});const i=r.duelsWon+r.duelsLost,s=i>0?r.duelsWon/i:.5;r.offBallImpactIndex=Math.min(100,Math.round((r.offBallRuns*5+r.overlaps*8+r.thirdManRuns*10)/2)),r.spaceCreationEfficiency=Math.min(100,Math.round(r.dummyRuns*12+r.widthStretchScore*.5+50)),r.centralThreatIndex=Math.min(100,Math.round(r.centralPenetrations*15+r.xG*10)),r.widthStretchScore=Math.min(100,Math.round(r.switchesOfPlay*10+r.overlaps*5));const a=n.filter(f=>f.qualityRating),o=a.length>0?a.reduce((f,h)=>f+(h.qualityRating||0),0)/a.length:0;r.aiPrecisionRate=a.length>0?Math.round(o/5*100):0;const l=n.filter(f=>f.isValidated);r.analystAgreementRate=n.length>0?Math.round(l.length/n.length*100):100;const u=n.length>0?l.length/n.length:0;r.aiReliabilityScore=Math.round(50+u*50);const d=Math.min(100,n.length/50*100);r.dataTrustIndex=Math.round((d+r.aiReliabilityScore)/2),r.attackingProductivity=Math.min(100,Math.round(r.xG*20+r.chancesCreated*10+r.shotsOnTarget*5)),r.gameControlIndex=Math.min(100,Math.round(r.passes*.1+s*50+r.possessionWon*2)),r.tacticalSuperiorityIndex=Math.min(100,Math.round(50+r.goals*10-r.fouls*2+r.turnoversWon*3)),r.tacticalControlIndex=Math.round((r.gameControlIndex+r.tacticalSuperiorityIndex)/2),r.attackingEfficiencyIndex=Math.min(100,Math.round((r.goals*30+r.xG*20)/(r.shots||1)*100)),r.defensiveOrganizationScore=Math.min(100,Math.round(r.interceptions*5+r.clearances*2+s*40)),r.teamIntelligenceRating=Math.min(100,Math.round(r.offBallRuns*2+r.pressTraps*5+r.dummyRuns*10+50)),r.runsPerPossession=r.possessionWon>0?parseFloat((r.offBallRuns/r.possessionWon).toFixed(2)):0;const A=n.filter(f=>f.corridor==="LHS"||f.corridor==="RHS").length;return r.halfSpaceOccupation=n.length>0?Math.round(A/n.length*100):0,r};function _ze(){const t=Sw(),{events:e,teams:r}=Yr(),[n,i]=E.useState("LIVE"),s={teamA:Array.from(r.keys())[0]||"Team A",teamB:Array.from(r.keys())[1]||"Team B"},a=E.useMemo(()=>R5(e,"TEAM_A"),[e]),o=E.useMemo(()=>R5(e,"TEAM_B"),[e]),l=e.length,u=e.filter(A=>A.team==="TEAM_A").length,d=l>0?Math.round(u/l*100):50;return c.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50",children:[c.jsx("header",{className:"border-b border-white/10 bg-slate-900/80 backdrop-blur-sm px-4 py-1.5 sticky top-0 z-50",children:c.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-white/10",onClick:()=>t("/"),children:c.jsx(XH,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(kL,{className:"w-4 h-4 text-emerald-400"}),c.jsx("span",{className:"text-sm font-bold tracking-tight",children:"ProAnalytics Suite"}),c.jsxs(We,{variant:"outline",className:"text-[10px] h-5 border-white/20 text-slate-400",children:[l," events"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-slate-800/50 p-0.5 rounded-lg border border-white/5",children:[c.jsx(te,{variant:n==="LIVE"?"secondary":"ghost",size:"sm",className:`h-6 text-[10px] px-3 ${n==="LIVE"?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"text-slate-400"}`,onClick:()=>i("LIVE"),children:" LIVE"}),c.jsx(te,{variant:n==="POST_MATCH"?"secondary":"ghost",size:"sm",className:`h-6 text-[10px] px-3 ${n==="POST_MATCH"?"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30":"text-slate-400"}`,onClick:()=>i("POST_MATCH"),children:" POST"})]})]})}),c.jsxs("main",{className:"max-w-7xl mx-auto p-4 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(k5,{team:s.teamA,goals:a.goals,xg:a.xG,color:"blue"}),c.jsx(Nze,{possessionA:d}),c.jsx(k5,{team:s.teamB,goals:o.goals,xg:o.xG,color:"red",isRight:!0})]}),n==="LIVE"&&c.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(un,{className:"w-5 h-5 text-red-500"})," Real-Time Feed"]}),c.jsx(We,{className:"bg-red-500/10 text-red-400 border-red-500/20 animate-pulse",children:" Live Recording"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[c.jsx(hd,{label:"Passes",valA:a.passes,valB:o.passes}),c.jsx(hd,{label:"Shots",valA:a.shots,valB:o.shots}),c.jsx(hd,{label:"Duels",valA:a.duelsWon,valB:o.duelsWon}),c.jsx(hd,{label:"Tackles",valA:a.tackles,valB:o.tackles}),c.jsx(hd,{label:"Intcpt",valA:a.interceptions,valB:o.interceptions}),c.jsx(hd,{label:"Corners",valA:a.corners,valB:o.corners})]}),c.jsxs(Fe,{className:"bg-slate-900/50 border-white/10",children:[c.jsx(Dt,{className:"border-b border-white/5 py-3",children:c.jsx(Ot,{className:"text-sm font-medium text-slate-300",children:"Recent Events"})}),c.jsx(vt,{className:"p-0",children:c.jsx("div",{className:"divide-y divide-white/5 max-h-[400px] overflow-y-auto",children:e.slice().reverse().slice(0,10).map((A,f)=>c.jsxs("div",{className:"flex items-center justify-between p-3 text-sm hover:bg-white/5",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(We,{variant:"outline",className:"font-mono text-[10px] border-white/20 text-slate-500",children:A.matchTime||"--:--"}),c.jsx("span",{className:`font-semibold ${A.team==="TEAM_A"?"text-blue-400":"text-red-400"}`,children:A.team==="TEAM_A"?s.teamA:s.teamB})]}),c.jsx("span",{className:"text-slate-300 flex items-center gap-2",children:c.jsx("span",{className:"capitalize",children:A.eventName.replace(/_/g," ")})})]},f))})})]})]}),n==="POST_MATCH"&&c.jsxs(gg,{defaultValue:"executive",className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs(If,{className:"bg-slate-900/50 border border-white/10 p-1 w-full justify-start overflow-x-auto h-auto grid grid-cols-3 md:grid-cols-6 gap-1",children:[c.jsx(pd,{value:"executive",icon:c.jsx(kL,{className:"w-3 h-3"}),label:"Executive"}),c.jsx(pd,{value:"offball",icon:c.jsx(lne,{className:"w-3 h-3"}),label:"Off-Ball"}),c.jsx(pd,{value:"space",icon:c.jsx(dI,{className:"w-3 h-3"}),label:"Space"}),c.jsx(pd,{value:"quality",icon:c.jsx(yu,{className:"w-3 h-3"}),label:"AI Quality"}),c.jsx(pd,{value:"outcome",icon:c.jsx(Wi,{className:"w-3 h-3"}),label:"Outcome"}),c.jsx(pd,{value:"tactical",icon:c.jsx(Zl,{className:"w-3 h-3"}),label:"Tactical"})]}),c.jsxs(yn,{value:"executive",className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(Ko,{label:"Tactical Control Index",scoreA:a.tacticalControlIndex,scoreB:o.tacticalControlIndex}),c.jsx(Ko,{label:"Attacking Efficiency",scoreA:a.attackingEfficiencyIndex,scoreB:o.attackingEfficiencyIndex}),c.jsx(Ko,{label:"Defensive Org.",scoreA:a.defensiveOrganizationScore,scoreB:o.defensiveOrganizationScore}),c.jsx(Ko,{label:"Team Intelligence",scoreA:a.teamIntelligenceRating,scoreB:o.teamIntelligenceRating})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(md,{title:"Key Performance Indicators",headers:["Metric",s.teamA,s.teamB],rows:[{label:"xG (Expected Goals)",valA:a.xG.toFixed(2),valB:o.xG.toFixed(2)},{label:"Chances Created",valA:a.chancesCreated,valB:o.chancesCreated},{label:"Off-Ball Impact",valA:a.offBallImpactIndex,valB:o.offBallImpactIndex,isIndex:!0},{label:"Press Resistance",valA:a.pressResistanceIndex,valB:o.pressResistanceIndex,isIndex:!0}]}),c.jsx(md,{title:"Game State Dominance",headers:["Phase",s.teamA,s.teamB],rows:[{label:"Possession Time",valA:`${d}%`,valB:`${100-d}%`},{label:"Field Tilt (Final 3rd)",valA:`${a.zoneEntriesFinalThird+o.zoneEntriesFinalThird>0?Math.round(a.zoneEntriesFinalThird/(a.zoneEntriesFinalThird+o.zoneEntriesFinalThird)*100):50}%`,valB:`${a.zoneEntriesFinalThird+o.zoneEntriesFinalThird>0?Math.round(o.zoneEntriesFinalThird/(a.zoneEntriesFinalThird+o.zoneEntriesFinalThird)*100):50}%`},{label:"Duels Won",valA:a.duelsWon,valB:o.duelsWon},{label:"Game Control Index",valA:a.gameControlIndex,valB:o.gameControlIndex,isIndex:!0}]})]})]}),c.jsxs(yn,{value:"offball",className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(wc,{title:"Off-Ball Impact",valA:a.offBallImpactIndex,valB:o.offBallImpactIndex,max:100,unit:"/100"}),c.jsx(wc,{title:"Space Creation",valA:a.spaceCreationEfficiency,valB:o.spaceCreationEfficiency,max:100,unit:"/100"}),c.jsx(wc,{title:"Total Runs",valA:a.offBallRuns,valB:o.offBallRuns,max:100})]}),c.jsx(md,{title:"Movement Types Breakdown",headers:["Run Type",s.teamA,s.teamB],rows:[{label:"Runs in Behind",valA:Math.round(a.offBallRuns*.4),valB:Math.round(o.offBallRuns*.3)},{label:"Checking Runs",valA:Math.round(a.offBallRuns*.3),valB:Math.round(o.offBallRuns*.4)},{label:"Overlaps",valA:a.overlaps,valB:o.overlaps},{label:"Underlaps",valA:a.underlaps,valB:o.underlaps},{label:"Third Man Runs",valA:a.thirdManRuns,valB:o.thirdManRuns},{label:"Dummy Runs",valA:a.dummyRuns,valB:o.dummyRuns}]})]}),c.jsxs(yn,{value:"space",className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Ko,{label:"Central Threat Index",scoreA:a.centralThreatIndex,scoreB:o.centralThreatIndex}),c.jsx(Ko,{label:"Width Utilization",scoreA:a.widthStretchScore,scoreB:o.widthStretchScore})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs(Fe,{className:"bg-slate-900/50 border-white/10",children:[c.jsx(Dt,{children:c.jsx(Ot,{className:"text-sm",children:"Zone Occupation"})}),c.jsx(vt,{children:c.jsxs("div",{className:"flex gap-1 h-32 items-end",children:[c.jsx("div",{className:"w-1/3 bg-blue-500/20 h-[40%] border-t border-blue-500 relative",children:c.jsx("span",{className:"absolute -top-6 text-[10px] w-full text-center",children:"Left HS"})}),c.jsx("div",{className:"w-1/3 bg-blue-500/40 h-[70%] border-t border-blue-500 relative",children:c.jsx("span",{className:"absolute -top-6 text-[10px] w-full text-center",children:"Central"})}),c.jsx("div",{className:"w-1/3 bg-blue-500/20 h-[30%] border-t border-blue-500 relative",children:c.jsx("span",{className:"absolute -top-6 text-[10px] w-full text-center",children:"Right HS"})})]})})]}),c.jsx(md,{title:"Penetration Metrics",headers:["Metric",s.teamA,s.teamB],rows:[{label:"Final Third Entries",valA:a.zoneEntriesFinalThird,valB:o.zoneEntriesFinalThird},{label:"Central Penetrations",valA:a.centralPenetrations,valB:o.centralPenetrations},{label:"Carries into Box",valA:Math.round(a.carries*.2),valB:Math.round(o.carries*.15)},{label:"Switch of Play",valA:a.switchesOfPlay,valB:o.switchesOfPlay}]})]})]}),c.jsxs(yn,{value:"quality",className:"space-y-6",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-3",children:[c.jsx(r8,{className:"w-8 h-8 text-emerald-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-emerald-400",children:"System Reliability Status: OPTIMAL"}),c.jsx("p",{className:"text-xs text-emerald-300/80",children:"All data streams validated against reference models."})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(wc,{title:"AI Precision",valA:a.aiPrecisionRate,valB:0,singleVal:!0,max:100,unit:"%"}),c.jsx(wc,{title:"Analyst Agreement",valA:a.analystAgreementRate,valB:0,singleVal:!0,max:100,unit:"%"}),c.jsx(wc,{title:"Data Trust Index",valA:a.dataTrustIndex,valB:0,singleVal:!0,max:100,unit:"/100"}),c.jsx(wc,{title:"Latency",valA:0,valB:0,singleVal:!0,max:500,unit:"ms",inverse:!0})]})]}),c.jsx(yn,{value:"outcome",className:"space-y-6",children:c.jsx(md,{title:"Attacking Output",headers:["Metric",s.teamA,s.teamB],rows:[{label:"Goals",valA:a.goals,valB:o.goals},{label:"exp. Goals (xG)",valA:a.xG.toFixed(2),valB:o.xG.toFixed(2)},{label:"Attacking Productivity",valA:a.attackingProductivity,valB:o.attackingProductivity,isIndex:!0},{label:"Shots / On Target",valA:`${a.shots} / ${a.shotsOnTarget}`,valB:`${o.shots} / ${o.shotsOnTarget}`},{label:"Goals / xG Delta",valA:(a.goals-a.xG).toFixed(2),valB:(o.goals-o.xG).toFixed(2)}]})}),c.jsxs(yn,{value:"tactical",className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Ko,{label:"Tactical Superiority",scoreA:a.tacticalSuperiorityIndex,scoreB:o.tacticalSuperiorityIndex}),c.jsx(Ko,{label:"Chaos Creation",scoreA:a.chaosCreationRating,scoreB:o.chaosCreationRating})]}),c.jsx(md,{title:"Situational Metrics",headers:["Metric",s.teamA,s.teamB],rows:[{label:"Overloads Created",valA:a.overloadsCreated,valB:o.overloadsCreated},{label:"Tackles Won",valA:a.tackles,valB:o.tackles},{label:"Interceptions",valA:a.interceptions,valB:o.interceptions},{label:"Press Resistance",valA:a.pressResistanceIndex,valB:o.pressResistanceIndex,isIndex:!0},{label:"Defensive Imbalance",valA:a.defensiveImbalance,valB:o.defensiveImbalance}]})]})]})]})]})}const k5=({team:t,goals:e,xg:r,color:n,isRight:i})=>c.jsx(Fe,{className:`bg-${n}-500/5 border-${n}-500/20`,children:c.jsxs(vt,{className:`p-4 ${i?"text-right":"text-left"}`,children:[c.jsx("h3",{className:`text-4xl font-bold text-${n}-400 mb-1`,children:e}),c.jsx("p",{className:"font-semibold text-slate-100 uppercase tracking-wider text-sm",children:t}),c.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["xG: ",c.jsx("span",{className:"text-slate-300",children:r.toFixed(2)})]})]})}),Nze=({possessionA:t})=>c.jsx(Fe,{className:"bg-slate-900/50 border-white/10 flex flex-col justify-center",children:c.jsxs(vt,{className:"p-4",children:[c.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-2 font-mono uppercase",children:[c.jsx("span",{children:"Possession"}),c.jsxs("span",{children:[t,"% vs ",100-t,"%"]})]}),c.jsxs("div",{className:"h-4 bg-slate-800 rounded-full overflow-hidden flex",children:[c.jsx("div",{style:{width:`${t}%`},className:"bg-blue-500 h-full"}),c.jsx("div",{style:{width:`${100-t}%`},className:"bg-red-500 h-full"})]})]})}),hd=({label:t,valA:e,valB:r})=>c.jsxs(Fe,{className:"bg-slate-900/50 border-white/10 p-3",children:[c.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest text-center mb-1",children:t}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("span",{className:"text-xl font-bold text-blue-400",children:e}),c.jsx("span",{className:"text-xs text-slate-600 mb-1",children:"vs"}),c.jsx("span",{className:"text-xl font-bold text-red-400",children:r})]})]}),Ko=({label:t,scoreA:e,scoreB:r})=>c.jsx(Fe,{className:"bg-slate-900/40 border-white/5",children:c.jsxs(vt,{className:"p-4",children:[c.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mb-3 text-center border-b border-white/5 pb-2",children:t}),c.jsxs("div",{className:"flex items-center justify-between gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-black text-blue-500",children:e}),c.jsx("div",{className:"text-[9px] text-white/20",children:"TEAM A"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-black text-red-500",children:r}),c.jsx("div",{className:"text-[9px] text-white/20",children:"TEAM B"})]})]}),c.jsxs("div",{className:"h-1.5 bg-slate-800 rounded-full mt-3 flex overflow-hidden",children:[c.jsx("div",{style:{width:`${e}%`},className:"bg-blue-500/50 h-full"}),c.jsx("div",{className:"flex-1"}),c.jsx("div",{style:{width:`${r}%`},className:"bg-red-500/50 h-full"})]})]})}),pd=({value:t,icon:e,label:r})=>c.jsxs(Cs,{value:t,className:"text-xs data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-400 data-[state=active]:border-emerald-500/30 border border-transparent flex items-center gap-2",children:[e,c.jsx("span",{className:"hidden md:inline",children:r})]}),md=({title:t,rows:e,headers:r})=>c.jsxs(Fe,{className:"bg-slate-900/40 border-white/10 overflow-hidden",children:[c.jsx(Dt,{className:"py-3 px-4 bg-slate-900/80 border-b border-white/5",children:c.jsxs(Ot,{className:"text-xs font-bold uppercase tracking-widest text-emerald-400/80 flex items-center gap-2",children:[c.jsx(dI,{className:"w-3 h-3"})," ",t]})}),c.jsx(vt,{className:"p-0",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-white/5 text-slate-400 text-xs",children:c.jsx("tr",{children:r.map((n,i)=>c.jsx("th",{className:`p-3 font-normal ${i>0?"text-center":""}`,children:n},i))})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:e.map((n,i)=>c.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[c.jsxs("td",{className:"p-3 text-slate-300 font-medium",children:[n.label,n.isIndex&&c.jsx(We,{className:"ml-2 bg-purple-500/20 text-purple-300 text-[9px] border-0",children:"INDEX"})]}),c.jsx("td",{className:"p-3 text-center font-mono text-blue-300",children:n.valA}),c.jsx("td",{className:"p-3 text-center font-mono text-red-300",children:n.valB})]},i))})]})})]}),wc=({title:t,valA:e,valB:r,max:n,unit:i="",singleVal:s=!1,inverse:a=!1})=>{const o=Math.min(100,e/n*100),l=Math.min(100,r/n*100);return c.jsxs(Fe,{className:"bg-slate-900/40 border-white/10 p-4",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-widest mb-2 truncate",children:t}),s?c.jsxs("div",{className:"flex items-baseline gap-1",children:[c.jsx("span",{className:`text-2xl font-bold ${e>90?"text-emerald-400":"text-slate-200"}`,children:e}),c.jsx("span",{className:"text-xs text-slate-600",children:i})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-blue-400 font-bold",children:[e,c.jsx("span",{className:"text-[9px] text-slate-600 font-normal ml-0.5",children:i})]}),c.jsx(zN,{value:o,className:"h-1.5 w-16 bg-slate-800 [&>div]:bg-blue-500"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-red-400 font-bold",children:[r,c.jsx("span",{className:"text-[9px] text-slate-600 font-normal ml-0.5",children:i})]}),c.jsx(zN,{value:l,className:"h-1.5 w-16 bg-slate-800 [&>div]:bg-red-500"})]})]})]})},Ize=[{id:"1",name:"CR Belouizdad",tier:"Elite",revenue:216e3,status:"Active"},{id:"2",name:"MC Alger",tier:"Elite",revenue:216e3,status:"Active"},{id:"3",name:"USM Alger",tier:"Elite",revenue:216e3,status:"Lead"},{id:"4",name:"JS Kabylie",tier:"Elite",revenue:216e3,status:"Lead"},{id:"5",name:"ES Setif",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"6",name:"MC Oran",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"7",name:"CS Constantine",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"8",name:"Paradou AC",tier:"Elite",revenue:216e3,status:"Active"},{id:"9",name:"JS Saoura",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"10",name:"ASO Chlef",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"11",name:"US Biskra",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"12",name:"NC Magra",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"13",name:"MC El Bayadh",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"14",name:"USM Khenchela",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"15",name:"ES Ben Aknoun",tier:"Elite",revenue:216e3,status:"Prospect"},{id:"16",name:"US Souf",tier:"Elite",revenue:216e3,status:"Prospect"}],kC={marketSegments:[{id:"1",name:"Ligue 1 Elite",count:16,price:216e3,penRate:67,constituents:Ize},{id:"2",name:"Ligue 1 Standard",count:32,price:144e3,penRate:30},{id:"3",name:"Ligue 2 Progressive",count:8,price:72e3,penRate:17},{id:"4",name:"FAF Centers",count:6,price:1e5,penRate:75}],competitors:[{id:"1",name:"Stats Perform/Opta",threat:"High",strength:"Global leader, 30+ sports",advantage:"Local compliance, FAF relations"},{id:"2",name:"Sportradar",threat:"High",strength:"85+ sports, video integration",advantage:"First-mover, training integration"},{id:"3",name:"Excel/Manual tools",threat:"Medium",strength:"Zero cost, familiarity",advantage:"Automation, compliance, insights"},{id:"4",name:"Hudl/Wyscout",threat:"Low",strength:"Video analysis focus",advantage:"Full SaaS platform, local support"}],risks:[{id:"1",name:"Adoption Resistance",prob:70,impact:"High",impactLevel:3,score:2.1,mitigation:"POC programs, FAF endorsement"},{id:"2",name:"Competitor Entry",prob:40,impact:"High",impactLevel:3,score:1.2,mitigation:"Community moat, exclusive partnerships"},{id:"3",name:"Regulatory Change",prob:30,impact:"Medium",impactLevel:2,score:.6,mitigation:"Flexible architecture, legal monitoring"},{id:"4",name:"Validation Failure",prob:40,impact:"Critical",impactLevel:4,score:1.6,mitigation:"Milestone-based funding, pivot"}],p_arpu:15e4,g_y1:6,g_y2:5,g_y3:3,g_y4:3,g_y5:2,ch_y1:15,ch_y2:12,ch_stable:8,g_pen:30,rev_saas:70,rev_train:25,rev_prof:5,c_head:3,c_hire:.5,c_sal:6e4,tax_cnas:35,c_pay_pct:63,c_infra_pct:10,c_mkt_pct:14,c_ops_pct:13,s_cycle:6,s_lead:40,s_demo:60,s_poc:70,s_comm:5,s_cac:48,s_lead_time:"1-2 months",s_demo_time:"2-4 weeks",s_poc_time:"3-6 months",ch_b2b:80,ch_inst:15,ch_ref:5,cash_delay:3,tax_tva:19,tax_ibs:19,f_margin:85,u_ltv:425,u_ltv_cac:8.9,u_breakeven:25,inv_seed:1,inv_pre:4,inv_a:17.5,bud_p1:400,bud_p2:800,bud_p3:600,bench_churn:"5-10% (B2B SaaS)",bench_nrr:"100-120%",bench_life:"36-60 months",target_cycle:"6-9 months",target_lead:"30-50%",target_demo:"50-70%",target_poc:"60-80%",target_conv:"10-20%"},L5=t=>{const e=t.marketSegments.reduce((x,v)=>x+v.count*v.price,0),r=e*.7,n=t.marketSegments.reduce((x,v)=>x+v.count*v.price*(v.penRate/100),0),i=[];let s=0;for(let x=1;x<=5;x++){const v=t[`g_y${x}`]||0,y=x===1?t.ch_y1/100:x===2?t.ch_y2/100:t.ch_stable/100;s=s*(1-y)+v;const w=1+(x-1)*.03,b=t.p_arpu*w,S=s*b,C=t.c_head+(x-1)*t.c_hire,_=C*t.c_sal*12*(1+t.tax_cnas/100)/(t.c_pay_pct/100),I=_*(t.c_pay_pct/100),L=_*(t.c_infra_pct/100),N=_*(t.c_mkt_pct/100),R=_*(t.c_ops_pct/100),M=S-_,k=M>0?M*t.tax_ibs/100:0,O=M-k;i.push({year:x,newClients:v,churnRate:y,activeClients:s,arpu:b,arr:S,headcount:C,personnel:I,infrastructure:L,marketing:N,operations:R,totalCosts:_,ebitda:M,tax:k,netIncome:O,margin:S>0?O/S*100:-100})}const a=i[4],o=t.p_arpu/(t.ch_stable/100),l=o/(t.s_cac*1e3),u=t.s_cac*1e3/(t.p_arpu/12*(t.f_margin/100)),d=1/(t.ch_stable/100)*12,A=100-t.ch_stable+5;let f=t.inv_seed*1e6;const h=[];for(let x=1;x<=5;x++){const v=i[x-1],y=x===1?.6:x===2?.8:.95,w=v.arr*y,b=v.totalCosts,S=w-b;f+=S,h.push({year:x,cashIn:w,cashOut:b,netCashFlow:S,cumulativeCash:f})}const m=Math.min(...h.map(x=>x.cumulativeCash)),p=a.totalCosts,g=p/t.p_arpu;return{years:i,cashFlow:h,y5:a,ltv:o,ltv_cac:l,paybackMonths:u,customerLifeMonths:d,nrr:A,tam:e,sam:r,som:n,minCash:m,breakEvenClients:g,breakEvenARR:p}},xX=E.createContext(void 0);function Pze({children:t}){const[e,r]=E.useState(kC),[n,i]=E.useState(L5(kC));E.useEffect(()=>{i(L5(e))},[e]);const s=(l,u)=>{r(d=>{const A=typeof d[l]=="number"?Number(u):u;return{...d,[l]:A}})},a=()=>{r(kC)},o=()=>{const l={timestamp:new Date().toISOString(),inputs:e,results:n},u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),A=document.createElement("a");A.href=d,A.download=`sportdata_kpis_${Date.now()}.json`,A.click()};return c.jsx(xX.Provider,{value:{kpi:e,metrics:n,updateKPI:s,resetDefaults:a,exportData:o},children:t})}function Lo(){const t=E.useContext(xX);if(!t)throw new Error("useKPI must be used within KPIProvider");return t}var q1="Collapsible",[Rze,KZe]=Cn(q1),[kze,WR]=Rze(q1),vX=E.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:s,onOpenChange:a,...o}=t,[l,u]=zi({prop:n,defaultProp:i??!1,onChange:a,caller:q1});return c.jsx(kze,{scope:r,disabled:s,contentId:da(),open:l,onOpenToggle:E.useCallback(()=>u(d=>!d),[u]),children:c.jsx(De.div,{"data-state":qR(l),"data-disabled":s?"":void 0,...o,ref:e})})});vX.displayName=q1;var yX="CollapsibleTrigger",bX=E.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,i=WR(yX,r);return c.jsx(De.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":qR(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:e,onClick:Ie(t.onClick,i.onOpenToggle)})});bX.displayName=yX;var YR="CollapsibleContent",wX=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=WR(YR,t.__scopeCollapsible);return c.jsx(Jn,{present:r||i.open,children:({present:s})=>c.jsx(Lze,{...n,ref:e,present:s})})});wX.displayName=YR;var Lze=E.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:i,...s}=t,a=WR(YR,r),[o,l]=E.useState(n),u=E.useRef(null),d=qe(e,u),A=E.useRef(0),f=A.current,h=E.useRef(0),m=h.current,p=a.open||o,g=E.useRef(p),x=E.useRef(void 0);return E.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),Ur(()=>{const v=u.current;if(v){x.current=x.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const y=v.getBoundingClientRect();A.current=y.height,h.current=y.width,g.current||(v.style.transitionDuration=x.current.transitionDuration,v.style.animationName=x.current.animationName),l(n)}},[a.open,n]),c.jsx(De.div,{"data-state":qR(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!p,...s,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...t.style},children:p&&i})});function qR(t){return t?"open":"closed"}var jze=vX;const Mze=jze,Dze=bX,Oze=wX,Vo=({title:t,isOpen:e,onToggle:r,children:n})=>c.jsxs(Mze,{open:e,onOpenChange:r,className:"border-b border-slate-700",children:[c.jsxs(Dze,{className:"flex w-full items-center justify-between bg-slate-800 px-5 py-3 text-xs font-bold uppercase text-slate-100 hover:bg-slate-700",children:[t,c.jsx(lg,{className:Z("h-4 w-4 transition-transform",e&&"rotate-180")})]}),c.jsx(Oze,{className:"bg-slate-900 p-5 space-y-2",children:n})]}),tt=({label:t,id:e,type:r="number",step:n})=>{const{kpi:i,updateKPI:s}=Lo(),a=i[e];return c.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[c.jsx("label",{className:"flex-1 text-slate-300",children:t}),c.jsx("input",{type:r,step:n,value:a,onChange:o=>s(e,o.target.value),className:"w-24 rounded border border-slate-600 bg-slate-800 px-2 py-1 text-right font-mono text-white focus:border-blue-500 focus:outline-none"})]})};function Fze(){const{resetDefaults:t,exportData:e}=Lo(),[r,n]=E.useState("market"),i=s=>{n(r===s?"":s)};return c.jsxs("div",{className:"flex h-screen w-[400px] flex-col border-r border-slate-700 bg-slate-800 text-white overflow-y-auto",children:[c.jsxs("div",{className:"border-b border-slate-700 bg-slate-900/50 p-5",children:[c.jsxs("h1",{className:"text-xl font-extrabold text-white",children:["SportData",c.jsx("span",{className:"text-blue-500",children:"Analytics"}),c.jsx("span",{className:"ml-2 rounded bg-blue-600 px-2 py-0.5 text-[10px] text-white",children:"KPI Engine v2.5"})]}),c.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Interactive Business Model Calculator"})]}),c.jsxs(Vo,{title:"1. Growth & Adoption",isOpen:r==="growth",onToggle:()=>i("growth"),children:[c.jsx(tt,{label:"New clients Y1",id:"g_y1"}),c.jsx(tt,{label:"New clients Y2",id:"g_y2"}),c.jsx(tt,{label:"New clients Y3",id:"g_y3"}),c.jsx(tt,{label:"New clients Y4",id:"g_y4"}),c.jsx(tt,{label:"New clients Y5",id:"g_y5"}),c.jsx(tt,{label:"Churn Y1 (%)",id:"ch_y1"}),c.jsx(tt,{label:"Churn Y2 (%)",id:"ch_y2"}),c.jsx(tt,{label:"Churn stable (%)",id:"ch_stable"})]}),c.jsxs(Vo,{title:"4. Revenue Streams",isOpen:r==="revenue",onToggle:()=>i("revenue"),children:[c.jsx(tt,{label:"SaaS subscriptions (%)",id:"rev_saas"}),c.jsx(tt,{label:"Training & cert (%)",id:"rev_train"}),c.jsx(tt,{label:"Prof services (%)",id:"rev_prof"})]}),c.jsxs(Vo,{title:"5. Operating Costs",isOpen:r==="costs",onToggle:()=>i("costs"),children:[c.jsx(tt,{label:"Team headcount Y1",id:"c_head"}),c.jsx(tt,{label:"Hires per year",id:"c_hire",step:"0.1"}),c.jsx(tt,{label:"Net salary/mo (DZD)",id:"c_sal"}),c.jsx(tt,{label:"CNAS load (%)",id:"tax_cnas"}),c.jsx(tt,{label:"Payroll % of costs",id:"c_pay_pct"}),c.jsx(tt,{label:"Infra % of costs",id:"c_infra_pct"}),c.jsx(tt,{label:"Marketing % of costs",id:"c_mkt_pct"}),c.jsx(tt,{label:"Ops % of costs",id:"c_ops_pct"})]}),c.jsxs(Vo,{title:"6. Sales KPIs",isOpen:r==="sales",onToggle:()=>i("sales"),children:[c.jsx(tt,{label:"Sales cycle (months)",id:"s_cycle"}),c.jsx(tt,{label:"LeadDemo conv (%)",id:"s_lead"}),c.jsx(tt,{label:"DemoPOC conv (%)",id:"s_demo"}),c.jsx(tt,{label:"POCClient conv (%)",id:"s_poc"}),c.jsx(tt,{label:"Sales comm (%)",id:"s_comm"}),c.jsx(tt,{label:"CAC (k DZD)",id:"s_cac"})]}),c.jsxs(Vo,{title:"7. Distribution Channels",isOpen:r==="channels",onToggle:()=>i("channels"),children:[c.jsx(tt,{label:"B2B Direct (%)",id:"ch_b2b"}),c.jsx(tt,{label:"Institutional (%)",id:"ch_inst"}),c.jsx(tt,{label:"Inter-club ref (%)",id:"ch_ref"})]}),c.jsxs(Vo,{title:"8. Fiscal & Cash Flow",isOpen:r==="fiscal",onToggle:()=>i("fiscal"),children:[c.jsx(tt,{label:"Payment delay (mo)",id:"cash_delay"}),c.jsx(tt,{label:"TVA (%)",id:"tax_tva"}),c.jsx(tt,{label:"IBS corp tax (%)",id:"tax_ibs"}),c.jsx(tt,{label:"Gross margin (%)",id:"f_margin"})]}),c.jsxs(Vo,{title:"9. Unit Economics",isOpen:r==="unit",onToggle:()=>i("unit"),children:[c.jsx(tt,{label:"LTV (k DZD)",id:"u_ltv"}),c.jsx(tt,{label:"LTV/CAC target",id:"u_ltv_cac",step:"0.1"}),c.jsx(tt,{label:"Break-even clients",id:"u_breakeven"})]}),c.jsxs(Vo,{title:"10. Funding Strategy",isOpen:r==="funding",onToggle:()=>i("funding"),children:[c.jsx(tt,{label:"Seed ask (M DZD)",id:"inv_seed",step:"0.1"}),c.jsx(tt,{label:"Pre-money val (M DZD)",id:"inv_pre",step:"0.1"}),c.jsx(tt,{label:"Series A ask (M DZD)",id:"inv_a",step:"0.5"}),c.jsx(tt,{label:"Phase 1 budget (k DZD)",id:"bud_p1"}),c.jsx(tt,{label:"Phase 2 budget (k DZD)",id:"bud_p2"}),c.jsx(tt,{label:"Phase 3 budget (k DZD)",id:"bud_p3"})]}),c.jsxs("div",{className:"mt-auto border-t border-slate-700 p-5 space-y-3",children:[c.jsxs(te,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>window.print(),children:[c.jsx(Ine,{className:"mr-2 h-4 w-4"})," Print Report"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(te,{variant:"outline",className:"border-slate-600 bg-transparent text-slate-300 hover:bg-slate-700",onClick:e,children:[c.jsx(uw,{className:"mr-2 h-4 w-4"})," Export"]}),c.jsxs(te,{variant:"outline",className:"border-slate-600 bg-transparent text-slate-300 hover:bg-slate-700",onClick:t,children:[c.jsx(po,{className:"mr-2 h-4 w-4"})," Reset"]})]})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function _g(t){return t+.5|0}const Bl=(t,e,r)=>Math.max(Math.min(t,r),e);function Vh(t){return Bl(_g(t*2.55),0,255)}function Gl(t){return Bl(_g(t*255),0,255)}function Ya(t){return Bl(_g(t/2.55)/100,0,1)}function j5(t){return Bl(_g(t*100),0,100)}const Ii={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},WN=[..."0123456789ABCDEF"],Uze=t=>WN[t&15],$ze=t=>WN[(t&240)>>4]+WN[t&15],ux=t=>(t&240)>>4===(t&15),Qze=t=>ux(t.r)&&ux(t.g)&&ux(t.b)&&ux(t.a);function Hze(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Ii[t[1]]*17,g:255&Ii[t[2]]*17,b:255&Ii[t[3]]*17,a:e===5?Ii[t[4]]*17:255}:(e===7||e===9)&&(r={r:Ii[t[1]]<<4|Ii[t[2]],g:Ii[t[3]]<<4|Ii[t[4]],b:Ii[t[5]]<<4|Ii[t[6]],a:e===9?Ii[t[7]]<<4|Ii[t[8]]:255})),r}const Kze=(t,e)=>t<255?e(t):"";function Vze(t){var e=Qze(t)?Uze:$ze;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Kze(t.a,e):void 0}const Gze=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EX(t,e,r){const n=e*Math.min(r,1-r),i=(s,a=(s+t/30)%12)=>r-n*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function zze(t,e,r){const n=(i,s=(i+t/60)%6)=>r-r*e*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function Wze(t,e,r){const n=EX(t,1,.5);let i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function Yze(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function XR(t){const r=t.r/255,n=t.g/255,i=t.b/255,s=Math.max(r,n,i),a=Math.min(r,n,i),o=(s+a)/2;let l,u,d;return s!==a&&(d=s-a,u=o>.5?d/(2-s-a):d/(s+a),l=Yze(r,n,i,d,s),l=l*60+.5),[l|0,u||0,o]}function ZR(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Gl)}function JR(t,e,r){return ZR(EX,t,e,r)}function qze(t,e,r){return ZR(Wze,t,e,r)}function Xze(t,e,r){return ZR(zze,t,e,r)}function SX(t){return(t%360+360)%360}function Zze(t){const e=Gze.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Vh(+e[5]):Gl(+e[5]));const i=SX(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=qze(i,s,a):e[1]==="hsv"?n=Xze(i,s,a):n=JR(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}function Jze(t,e){var r=XR(t);r[0]=SX(r[0]+e),r=JR(r),t.r=r[0],t.g=r[1],t.b=r[2]}function e7e(t){if(!t)return;const e=XR(t),r=e[0],n=j5(e[1]),i=j5(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${Ya(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}const M5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},D5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function t7e(){const t={},e=Object.keys(D5),r=Object.keys(M5);let n,i,s,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],i=0;i<r.length;i++)s=r[i],o=o.replace(s,M5[s]);s=parseInt(D5[a],16),t[o]=[s>>16&255,s>>8&255,s&255]}return t}let dx;function r7e(t){dx||(dx=t7e(),dx.transparent=[0,0,0,0]);const e=dx[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const n7e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function i7e(t){const e=n7e.exec(t);let r=255,n,i,s;if(e){if(e[7]!==n){const a=+e[7];r=e[8]?Vh(a):Bl(a*255,0,255)}return n=+e[1],i=+e[3],s=+e[5],n=255&(e[2]?Vh(n):Bl(n,0,255)),i=255&(e[4]?Vh(i):Bl(i,0,255)),s=255&(e[6]?Vh(s):Bl(s,0,255)),{r:n,g:i,b:s,a:r}}}function s7e(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ya(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const LC=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,gd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function a7e(t,e,r){const n=gd(Ya(t.r)),i=gd(Ya(t.g)),s=gd(Ya(t.b));return{r:Gl(LC(n+r*(gd(Ya(e.r))-n))),g:Gl(LC(i+r*(gd(Ya(e.g))-i))),b:Gl(LC(s+r*(gd(Ya(e.b))-s))),a:t.a+r*(e.a-t.a)}}function Ax(t,e,r){if(t){let n=XR(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=JR(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function CX(t,e){return t&&Object.assign(e||{},t)}function O5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Gl(t[3]))):(e=CX(t,{r:0,g:0,b:0,a:1}),e.a=Gl(e.a)),e}function o7e(t){return t.charAt(0)==="r"?i7e(t):Zze(t)}class Gm{constructor(e){if(e instanceof Gm)return e;const r=typeof e;let n;r==="object"?n=O5(e):r==="string"&&(n=Hze(e)||r7e(e)||o7e(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=CX(this._rgb);return e&&(e.a=Ya(e.a)),e}set rgb(e){this._rgb=O5(e)}rgbString(){return this._valid?s7e(this._rgb):void 0}hexString(){return this._valid?Vze(this._rgb):void 0}hslString(){return this._valid?e7e(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,i=e.rgb;let s;const a=r===s?.5:r,o=2*a-1,l=n.a-i.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-u,n.r=255&u*n.r+s*i.r+.5,n.g=255&u*n.g+s*i.g+.5,n.b=255&u*n.b+s*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=a7e(this._rgb,e._rgb,r)),this}clone(){return new Gm(this.rgb)}alpha(e){return this._rgb.a=Gl(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=_g(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ax(this._rgb,2,e),this}darken(e){return Ax(this._rgb,2,-e),this}saturate(e){return Ax(this._rgb,1,e),this}desaturate(e){return Ax(this._rgb,1,-e),this}rotate(e){return Jze(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ua(){}const l7e=(()=>{let t=0;return()=>t++})();function Tt(t){return t==null}function Cr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function mt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Sn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Hs(t,e){return Sn(t)?t:e}function lt(t,e){return typeof t>"u"?e:t}const c7e=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Yt(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function _t(t,e,r,n){let i,s,a;if(Cr(t))for(s=t.length,i=0;i<s;i++)e.call(r,t[i],i);else if(mt(t))for(a=Object.keys(t),s=a.length,i=0;i<s;i++)e.call(r,t[a[i]],a[i])}function kb(t,e){let r,n,i,s;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],s=e[r],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Lb(t){if(Cr(t))return t.map(Lb);if(mt(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let i=0;for(;i<n;++i)e[r[i]]=Lb(t[r[i]]);return e}return t}function TX(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function u7e(t,e,r,n){if(!TX(t))return;const i=e[t],s=r[t];mt(i)&&mt(s)?zm(i,s,n):e[t]=Lb(s)}function zm(t,e,r){const n=Cr(e)?e:[e],i=n.length;if(!mt(t))return t;r=r||{};const s=r.merger||u7e;let a;for(let o=0;o<i;++o){if(a=n[o],!mt(a))continue;const l=Object.keys(a);for(let u=0,d=l.length;u<d;++u)s(l[u],t,a,r)}return t}function vp(t,e){return zm(t,e,{merger:d7e})}function d7e(t,e,r){if(!TX(t))return;const n=e[t],i=r[t];mt(n)&&mt(i)?vp(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Lb(i))}const F5={"":t=>t,x:t=>t.x,y:t=>t.y};function A7e(t){const e=t.split("."),r=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function f7e(t){const e=A7e(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function Af(t,e){return(F5[e]||(F5[e]=f7e(e)))(t)}function ek(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wm=t=>typeof t<"u",ic=t=>typeof t=="function",U5=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function h7e(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Wr=Math.PI,Bs=2*Wr,p7e=Bs+Wr,jb=Number.POSITIVE_INFINITY,m7e=Wr/180,ys=Wr/2,Ec=Wr/4,$5=Wr*2/3,YN=Math.log10,xa=Math.sign;function yp(t,e,r){return Math.abs(t-e)<r}function Q5(t){const e=Math.round(t);t=yp(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(YN(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function g7e(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,s)=>i-s).pop(),e}function x7e(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ym(t){return!x7e(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function v7e(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function y7e(t,e,r){let n,i,s;for(n=0,i=t.length;n<i;n++)s=t[n][r],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Wc(t){return t*(Wr/180)}function b7e(t){return t*(180/Wr)}function H5(t){if(!Sn(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function w7e(t,e){const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);let s=Math.atan2(n,r);return s<-.5*Wr&&(s+=Bs),{angle:s,distance:i}}function qN(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function E7e(t,e){return(t-e+p7e)%Bs-Wr}function qs(t){return(t%Bs+Bs)%Bs}function BX(t,e,r,n){const i=qs(t),s=qs(e),a=qs(r),o=qs(s-i),l=qs(a-i),u=qs(i-s),d=qs(i-a);return i===s||i===a||n&&s===a||o>l&&u<d}function gi(t,e,r){return Math.max(e,Math.min(r,t))}function S7e(t){return gi(t,-32768,32767)}function _l(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function tk(t,e,r){r=r||(a=>t[a]<e);let n=t.length-1,i=0,s;for(;n-i>1;)s=i+n>>1,r(s)?i=s:n=s;return{lo:i,hi:n}}const Yc=(t,e,r,n)=>tk(t,r,n?i=>{const s=t[i][e];return s<r||s===r&&t[i+1][e]===r}:i=>t[i][e]<r),C7e=(t,e,r)=>tk(t,r,n=>t[n][e]>=r);function T7e(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}const _X=["push","pop","shift","splice","unshift"];function B7e(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_X.forEach(r=>{const n="_onData"+ek(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...s)}),a}})})}function K5(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(_X.forEach(s=>{delete t[s]}),delete t._chartjs)}function NX(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const IX=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function PX(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,IX.call(window,()=>{n=!1,t.apply(e,r)}))}}function _7e(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const rk=t=>t==="start"?"left":t==="end"?"right":"center",mn=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,N7e=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function I7e(t,e,r){const n=e.length;let i=0,s=n;if(t._sorted){const{iScale:a,vScale:o,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=a.axis,{min:A,max:f,minDefined:h,maxDefined:m}=a.getUserBounds();if(h){if(i=Math.min(Yc(l,d,A).lo,r?n:Yc(e,d,a.getPixelForValue(A)).lo),u){const p=l.slice(0,i+1).reverse().findIndex(g=>!Tt(g[o.axis]));i-=Math.max(0,p)}i=gi(i,0,n-1)}if(m){let p=Math.max(Yc(l,a.axis,f,!0).hi+1,r?0:Yc(e,d,a.getPixelForValue(f),!0).hi+1);if(u){const g=l.slice(p-1).findIndex(x=>!Tt(x[o.axis]));p+=Math.max(0,g)}s=gi(p,i,n)-i}else s=n-i}return{start:i,count:s}}function P7e(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;const s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),s}const fx=t=>t===0||t===1,V5=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Bs/r)),G5=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Bs/r)+1,bp={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ys)+1,easeOutSine:t=>Math.sin(t*ys),easeInOutSine:t=>-.5*(Math.cos(Wr*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>fx(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>fx(t)?t:V5(t,.075,.3),easeOutElastic:t=>fx(t)?t:G5(t,.075,.3),easeInOutElastic(t){return fx(t)?t:t<.5?.5*V5(t*2,.1125,.45):.5+.5*G5(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-bp.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?bp.easeInBounce(t*2)*.5:bp.easeOutBounce(t*2-1)*.5+.5};function nk(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function z5(t){return nk(t)?t:new Gm(t)}function jC(t){return nk(t)?t:new Gm(t).saturate(.5).darken(.1).hexString()}const R7e=["x","y","borderWidth","radius","tension"],k7e=["color","borderColor","backgroundColor"];function L7e(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:k7e},numbers:{type:"number",properties:R7e}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function j7e(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const W5=new Map;function M7e(t,e){e=e||{};const r=t+JSON.stringify(e);let n=W5.get(r);return n||(n=new Intl.NumberFormat(t,e),W5.set(r,n)),n}function RX(t,e,r){return M7e(e,r).format(t)}const kX={values(t){return Cr(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let i,s=t;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=D7e(t,r)}const a=YN(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),RX(t,n,l)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(YN(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?kX.numeric.call(this,t,e,r):""}};function D7e(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var LX={formatters:kX};function O7e(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:LX.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Mu=Object.create(null),XN=Object.create(null);function wp(t,e){if(!e)return t;const r=e.split(".");for(let n=0,i=r.length;n<i;++n){const s=r[n];t=t[s]||(t[s]=Object.create(null))}return t}function MC(t,e,r){return typeof e=="string"?zm(wp(t,e),r):zm(wp(t,""),e)}class F7e{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>jC(i.backgroundColor),this.hoverBorderColor=(n,i)=>jC(i.borderColor),this.hoverColor=(n,i)=>jC(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return MC(this,e,r)}get(e){return wp(this,e)}describe(e,r){return MC(XN,e,r)}override(e,r){return MC(Mu,e,r)}route(e,r,n,i){const s=wp(this,e),a=wp(this,n),o="_"+r;Object.defineProperties(s,{[o]:{value:s[r],writable:!0},[r]:{enumerable:!0,get(){const l=this[o],u=a[i];return mt(l)?Object.assign({},u,l):lt(l,u)},set(l){this[o]=l}}})}apply(e){e.forEach(r=>r(this))}}var yr=new F7e({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[L7e,j7e,O7e]);function U7e(t){return!t||Tt(t.size)||Tt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Y5(t,e,r,n,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,r.push(i)),s>n&&(n=s),n}function Sc(t,e,r){const n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function q5(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ZN(t,e,r,n){jX(t,e,r,n,null)}function jX(t,e,r,n,i){let s,a,o,l,u,d,A,f;const h=e.pointStyle,m=e.rotation,p=e.radius;let g=(m||0)*m7e;if(h&&typeof h=="object"&&(s=h.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(g),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),h){default:i?t.ellipse(r,n,i/2,p,0,0,Bs):t.arc(r,n,p,0,Bs),t.closePath();break;case"triangle":d=i?i/2:p,t.moveTo(r+Math.sin(g)*d,n-Math.cos(g)*p),g+=$5,t.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*p),g+=$5,t.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*p),t.closePath();break;case"rectRounded":u=p*.516,l=p-u,a=Math.cos(g+Ec)*l,A=Math.cos(g+Ec)*(i?i/2-u:l),o=Math.sin(g+Ec)*l,f=Math.sin(g+Ec)*(i?i/2-u:l),t.arc(r-A,n-o,u,g-Wr,g-ys),t.arc(r+f,n-a,u,g-ys,g),t.arc(r+A,n+o,u,g,g+ys),t.arc(r-f,n+a,u,g+ys,g+Wr),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*p,d=i?i/2:l,t.rect(r-d,n-l,2*d,2*l);break}g+=Ec;case"rectRot":A=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,f=Math.sin(g)*(i?i/2:p),t.moveTo(r-A,n-o),t.lineTo(r+f,n-a),t.lineTo(r+A,n+o),t.lineTo(r-f,n+a),t.closePath();break;case"crossRot":g+=Ec;case"cross":A=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,f=Math.sin(g)*(i?i/2:p),t.moveTo(r-A,n-o),t.lineTo(r+A,n+o),t.moveTo(r+f,n-a),t.lineTo(r-f,n+a);break;case"star":A=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,f=Math.sin(g)*(i?i/2:p),t.moveTo(r-A,n-o),t.lineTo(r+A,n+o),t.moveTo(r+f,n-a),t.lineTo(r-f,n+a),g+=Ec,A=Math.cos(g)*(i?i/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,f=Math.sin(g)*(i?i/2:p),t.moveTo(r-A,n-o),t.lineTo(r+A,n+o),t.moveTo(r+f,n-a),t.lineTo(r-f,n+a);break;case"line":a=i?i/2:Math.cos(g)*p,o=Math.sin(g)*p,t.moveTo(r-a,n-o),t.lineTo(r+a,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(g)*(i?i/2:p),n+Math.sin(g)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function qm(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function X1(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Z1(t){t.restore()}function $7e(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){const s=(e.x+r.x)/2;t.lineTo(s,e.y),t.lineTo(s,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function Q7e(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function H7e(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Tt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function K7e(t,e,r,n,i){if(i.strikethrough||i.underline){const s=t.measureText(n),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=r-s.actualBoundingBoxAscent,u=r+s.actualBoundingBoxDescent,d=i.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,d),t.lineTo(o,d),t.stroke()}}function V7e(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Xm(t,e,r,n,i,s={}){const a=Cr(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=i.string,H7e(t,s),l=0;l<a.length;++l)u=a[l],s.backdrop&&V7e(t,s.backdrop),o&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Tt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,r,n,s.maxWidth)),t.fillText(u,r,n,s.maxWidth),K7e(t,r,n,u,s),n+=Number(i.lineHeight);t.restore()}function Mb(t,e){const{x:r,y:n,w:i,h:s,radius:a}=e;t.arc(r+a.topLeft,n+a.topLeft,a.topLeft,1.5*Wr,Wr,!0),t.lineTo(r,n+s-a.bottomLeft),t.arc(r+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,Wr,ys,!0),t.lineTo(r+i-a.bottomRight,n+s),t.arc(r+i-a.bottomRight,n+s-a.bottomRight,a.bottomRight,ys,0,!0),t.lineTo(r+i,n+a.topRight),t.arc(r+i-a.topRight,n+a.topRight,a.topRight,0,-ys,!0),t.lineTo(r+a.topLeft,n)}const G7e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,z7e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function W7e(t,e){const r=(""+t).match(G7e);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const Y7e=t=>+t||0;function MX(t,e){const r={},n=mt(e),i=n?Object.keys(e):e,s=mt(t)?n?a=>lt(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of i)r[a]=Y7e(s(a));return r}function DX(t){return MX(t,{top:"y",right:"x",bottom:"y",left:"x"})}function AA(t){return MX(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xi(t){const e=DX(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wn(t,e){t=t||{},e=e||yr.font;let r=lt(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=lt(t.style,e.style);n&&!(""+n).match(z7e)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:lt(t.family,e.family),lineHeight:W7e(lt(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:lt(t.weight,e.weight),string:""};return i.string=U7e(i),i}function hx(t,e,r,n){let i,s,a;for(i=0,s=t.length;i<s;++i)if(a=t[i],a!==void 0&&a!==void 0)return a}function q7e(t,e,r){const{min:n,max:i}=t,s=c7e(e,(i-n)/2),a=(o,l)=>r&&o===0?0:o+l;return{min:a(n,-Math.abs(s)),max:a(i,s)}}function Wu(t,e){return Object.assign(Object.create(t),e)}function ik(t,e=[""],r,n,i=()=>t[0]){const s=r||t;typeof n>"u"&&(n=$X("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:n,_getTarget:i,override:o=>ik([o,...t],e,s,n)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return FX(o,l,()=>iWe(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return Z5(o).includes(l)},ownKeys(o){return Z5(o)},set(o,l,u){const d=o._storage||(o._storage=i());return o[l]=d[l]=u,delete o._keys,!0}})}function ff(t,e,r,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:OX(t,n),setContext:s=>ff(t,s,r,n),override:s=>ff(t.override(s),e,r,n)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete t[a],!0},get(s,a,o){return FX(s,a,()=>Z7e(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(s,a,o){return t[a]=o,delete s[a],!0}})}function OX(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:ic(r)?r:()=>r,isIndexable:ic(n)?n:()=>n}}const X7e=(t,e)=>t?t+ek(e):e,sk=(t,e)=>mt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function FX(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function Z7e(t,e,r){const{_proxy:n,_context:i,_subProxy:s,_descriptors:a}=t;let o=n[e];return ic(o)&&a.isScriptable(e)&&(o=J7e(e,o,t,r)),Cr(o)&&o.length&&(o=eWe(e,o,t,a.isIndexable)),sk(e,o)&&(o=ff(o,i,s&&s[e],a)),o}function J7e(t,e,r,n){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(s,a||n);return o.delete(t),sk(t,l)&&(l=ak(i._scopes,i,t,l)),l}function eWe(t,e,r,n){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=r;if(typeof s.index<"u"&&n(t))return e[s.index%e.length];if(mt(e[0])){const l=e,u=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const A=ak(u,i,t,d);e.push(ff(A,s,a&&a[t],o))}}return e}function UX(t,e,r){return ic(t)?t(e,r):t}const tWe=(t,e)=>t===!0?e:typeof t=="string"?Af(e,t):void 0;function rWe(t,e,r,n,i){for(const s of e){const a=tWe(r,s);if(a){t.add(a);const o=UX(a._fallback,r,i);if(typeof o<"u"&&o!==r&&o!==n)return o}else if(a===!1&&typeof n<"u"&&r!==n)return null}return!1}function ak(t,e,r,n){const i=e._rootScopes,s=UX(e._fallback,r,n),a=[...t,...i],o=new Set;o.add(n);let l=X5(o,a,r,s||r,n);return l===null||typeof s<"u"&&s!==r&&(l=X5(o,a,s,l,n),l===null)?!1:ik(Array.from(o),[""],i,s,()=>nWe(e,r,n))}function X5(t,e,r,n,i){for(;r;)r=rWe(t,e,r,n,i);return r}function nWe(t,e,r){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return Cr(i)&&mt(r)?r:i||{}}function iWe(t,e,r,n){let i;for(const s of e)if(i=$X(X7e(s,t),r),typeof i<"u")return sk(t,i)?ak(r,n,t,i):i}function $X(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function Z5(t){let e=t._keys;return e||(e=t._keys=sWe(t._scopes)),e}function sWe(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}const aWe=Number.EPSILON||1e-14,hf=(t,e)=>e<t.length&&!t[e].skip&&t[e],QX=t=>t==="x"?"y":"x";function oWe(t,e,r,n){const i=t.skip?e:t,s=e,a=r.skip?e:r,o=qN(s,i),l=qN(a,s);let u=o/(o+l),d=l/(o+l);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const A=n*u,f=n*d;return{previous:{x:s.x-A*(a.x-i.x),y:s.y-A*(a.y-i.y)},next:{x:s.x+f*(a.x-i.x),y:s.y+f*(a.y-i.y)}}}function lWe(t,e,r){const n=t.length;let i,s,a,o,l,u=hf(t,0);for(let d=0;d<n-1;++d)if(l=u,u=hf(t,d+1),!(!l||!u)){if(yp(e[d],0,aWe)){r[d]=r[d+1]=0;continue}i=r[d]/e[d],s=r[d+1]/e[d],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),r[d]=i*a*e[d],r[d+1]=s*a*e[d])}}function cWe(t,e,r="x"){const n=QX(r),i=t.length;let s,a,o,l=hf(t,0);for(let u=0;u<i;++u){if(a=o,o=l,l=hf(t,u+1),!o)continue;const d=o[r],A=o[n];a&&(s=(d-a[r])/3,o[`cp1${r}`]=d-s,o[`cp1${n}`]=A-s*e[u]),l&&(s=(l[r]-d)/3,o[`cp2${r}`]=d+s,o[`cp2${n}`]=A+s*e[u])}}function uWe(t,e="x"){const r=QX(e),n=t.length,i=Array(n).fill(0),s=Array(n);let a,o,l,u=hf(t,0);for(a=0;a<n;++a)if(o=l,l=u,u=hf(t,a+1),!!l){if(u){const d=u[e]-l[e];i[a]=d!==0?(u[r]-l[r])/d:0}s[a]=o?u?xa(i[a-1])!==xa(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}lWe(t,i,s),cWe(t,s,e)}function px(t,e,r){return Math.max(Math.min(t,r),e)}function dWe(t,e){let r,n,i,s,a,o=qm(t[0],e);for(r=0,n=t.length;r<n;++r)a=s,s=o,o=r<n-1&&qm(t[r+1],e),s&&(i=t[r],a&&(i.cp1x=px(i.cp1x,e.left,e.right),i.cp1y=px(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=px(i.cp2x,e.left,e.right),i.cp2y=px(i.cp2y,e.top,e.bottom)))}function AWe(t,e,r,n,i){let s,a,o,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")uWe(t,i);else{let u=n?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)o=t[s],l=oWe(u,o,t[Math.min(s+1,a-(n?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}e.capBezierPoints&&dWe(t,r)}function ok(){return typeof window<"u"&&typeof document<"u"}function lk(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Db(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const J1=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function fWe(t,e){return J1(t).getPropertyValue(e)}const hWe=["top","right","bottom","left"];function hu(t,e,r){const n={};r=r?"-"+r:"";for(let i=0;i<4;i++){const s=hWe[i];n[s]=parseFloat(t[e+"-"+s+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const pWe=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function mWe(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:s}=n;let a=!1,o,l;if(pWe(i,s,t.target))o=i,l=s;else{const u=e.getBoundingClientRect();o=n.clientX-u.left,l=n.clientY-u.top,a=!0}return{x:o,y:l,box:a}}function Lc(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,i=J1(r),s=i.boxSizing==="border-box",a=hu(i,"padding"),o=hu(i,"border","width"),{x:l,y:u,box:d}=mWe(t,r),A=a.left+(d&&o.left),f=a.top+(d&&o.top);let{width:h,height:m}=e;return s&&(h-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-A)/h*r.width/n),y:Math.round((u-f)/m*r.height/n)}}function gWe(t,e,r){let n,i;if(e===void 0||r===void 0){const s=t&&lk(t);if(!s)e=t.clientWidth,r=t.clientHeight;else{const a=s.getBoundingClientRect(),o=J1(s),l=hu(o,"border","width"),u=hu(o,"padding");e=a.width-u.width-l.width,r=a.height-u.height-l.height,n=Db(o.maxWidth,s,"clientWidth"),i=Db(o.maxHeight,s,"clientHeight")}}return{width:e,height:r,maxWidth:n||jb,maxHeight:i||jb}}const Nl=t=>Math.round(t*10)/10;function xWe(t,e,r,n){const i=J1(t),s=hu(i,"margin"),a=Db(i.maxWidth,t,"clientWidth")||jb,o=Db(i.maxHeight,t,"clientHeight")||jb,l=gWe(t,e,r);let{width:u,height:d}=l;if(i.boxSizing==="content-box"){const f=hu(i,"border","width"),h=hu(i,"padding");u-=h.width+f.width,d-=h.height+f.height}return u=Math.max(0,u-s.width),d=Math.max(0,n?u/n:d-s.height),u=Nl(Math.min(u,a,l.maxWidth)),d=Nl(Math.min(d,o,l.maxHeight)),u&&!d&&(d=Nl(u/2)),(e!==void 0||r!==void 0)&&n&&l.height&&d>l.height&&(d=l.height,u=Nl(Math.floor(d*n))),{width:u,height:d}}function J5(t,e,r){const n=e||1,i=Nl(t.height*n),s=Nl(t.width*n);t.height=Nl(t.height),t.width=Nl(t.width);const a=t.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==i||a.width!==s?(t.currentDevicePixelRatio=n,a.height=i,a.width=s,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const vWe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ok()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function e3(t,e){const r=fWe(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function jc(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function yWe(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function bWe(t,e,r,n){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=jc(t,i,r),o=jc(i,s,r),l=jc(s,e,r),u=jc(a,o,r),d=jc(o,l,r);return jc(u,d,r)}const wWe=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},EWe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function fA(t,e,r){return t?wWe(e,r):EWe()}function HX(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function KX(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function VX(t){return t==="angle"?{between:BX,compare:E7e,normalize:qs}:{between:_l,compare:(e,r)=>e-r,normalize:e=>e}}function t3({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function SWe(t,e,r){const{property:n,start:i,end:s}=r,{between:a,normalize:o}=VX(n),l=e.length;let{start:u,end:d,loop:A}=t,f,h;if(A){for(u+=l,d+=l,f=0,h=l;f<h&&a(o(e[u%l][n]),i,s);++f)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:A,style:t.style}}function GX(t,e,r){if(!r)return[t];const{property:n,start:i,end:s}=r,a=e.length,{compare:o,between:l,normalize:u}=VX(n),{start:d,end:A,loop:f,style:h}=SWe(t,e,r),m=[];let p=!1,g=null,x,v,y;const w=()=>l(i,y,x)&&o(i,y)!==0,b=()=>o(s,x)===0||l(s,y,x),S=()=>p||w(),C=()=>!p||b();for(let T=d,B=d;T<=A;++T)v=e[T%a],!v.skip&&(x=u(v[n]),x!==y&&(p=l(x,i,s),g===null&&S()&&(g=o(x,i)===0?T:B),g!==null&&C()&&(m.push(t3({start:g,end:T,loop:f,count:a,style:h})),g=null),B=T,y=x));return g!==null&&m.push(t3({start:g,end:A,loop:f,count:a,style:h})),m}function zX(t,e){const r=[],n=t.segments;for(let i=0;i<n.length;i++){const s=GX(n[i],t.points,e);s.length&&r.push(...s)}return r}function CWe(t,e,r,n){let i=0,s=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function TWe(t,e,r,n){const i=t.length,s=[];let a=e,o=t[e],l;for(l=e+1;l<=r;++l){const u=t[l%i];u.skip||u.stop?o.skip||(n=!1,s.push({start:e%i,end:(l-1)%i,loop:n}),e=a=u.stop?l:null):(a=l,o.skip&&(e=l)),o=u}return a!==null&&s.push({start:e%i,end:a%i,loop:n}),s}function BWe(t,e){const r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];const s=!!t._loop,{start:a,end:o}=CWe(r,i,s,n);if(n===!0)return r3(t,[{start:a,end:o,loop:s}],r,e);const l=o<a?o+i:o,u=!!t._fullLoop&&a===0&&o===i-1;return r3(t,TWe(r,a,l,u),r,e)}function r3(t,e,r,n){return!n||!n.setContext||!r?e:_We(t,e,r,n)}function _We(t,e,r,n){const i=t._chart.getContext(),s=n3(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=r.length,u=[];let d=s,A=e[0].start,f=A;function h(m,p,g,x){const v=o?-1:1;if(m!==p){for(m+=l;r[m%l].skip;)m-=v;for(;r[p%l].skip;)p+=v;m%l!==p%l&&(u.push({start:m%l,end:p%l,loop:g,style:x}),d=x,A=p%l)}}for(const m of e){A=o?A:m.start;let p=r[A%l],g;for(f=A+1;f<=m.end;f++){const x=r[f%l];g=n3(n.setContext(Wu(i,{type:"segment",p0:p,p1:x,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:a}))),NWe(g,d)&&h(A,f-1,m.loop,d),p=x,d=g}A<f-1&&h(A,f-1,m.loop,d)}return u}function n3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function NWe(t,e){if(!e)return!1;const r=[],n=function(i,s){return nk(s)?(r.includes(s)||r.push(s),r.indexOf(s)):s};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function mx(t,e,r){return t.options.clip?t[r]:e[r]}function IWe(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:mx(r,e,"left"),right:mx(r,e,"right"),top:mx(n,e,"top"),bottom:mx(n,e,"bottom")}:e}function WX(t,e){const r=e._clip;if(r.disabled)return!1;const n=IWe(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class PWe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){const s=r.listeners[i],a=r.duration;s.forEach(o=>o({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(n-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=IX.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),s.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=s.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ha=new PWe;const i3="transparent",RWe={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=z5(t||i3),i=n.valid&&z5(e||i3);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class kWe{constructor(e,r,n,i){const s=r[n];i=hx([e.to,i,s,e.from]);const a=hx([e.from,s,i]);this._active=!0,this._fn=e.fn||RWe[e.type||typeof a],this._easing=bp[e.easing]||bp.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=hx([e.to,r,i,e.from]),this._from=hx([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||r<n),!this._active){this._target[i]=o,this._notify(!0);return}if(r<0){this._target[i]=s;return}l=r/n%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}}class YX{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!mt(e))return;const r=Object.keys(yr.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!mt(s))return;const a={};for(const o of r)a[o]=s[o];(Cr(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,r){const n=r.options,i=jWe(e,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&LWe(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,r){const n=this._properties,i=[],s=e.$animations||(e.$animations={}),a=Object.keys(r),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const u=a[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,r));continue}const d=r[u];let A=s[u];const f=n.get(u);if(A)if(f&&A.active()){A.update(f,d,o);continue}else A.cancel();if(!f||!f.duration){e[u]=d;continue}s[u]=A=new kWe(f,e,u,d),i.push(A)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return Ha.add(this._chart,n),!0}}function LWe(t,e){const r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const s=t[n[i]];s&&s.active()&&r.push(s.wait())}return Promise.all(r)}function jWe(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function s3(t,e){const r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,s=r.max===void 0?e:0;return{start:n?s:i,end:n?i:s}}function MWe(t,e,r){if(r===!1)return!1;const n=s3(t,r),i=s3(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function DWe(t){let e,r,n,i;return mt(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function qX(t,e){const r=[],n=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=n.length;i<s;++i)r.push(n[i].index);return r}function a3(t,e,r,n={}){const i=t.keys,s=n.mode==="single";let a,o,l,u;if(e===null)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===r){if(d=!0,n.all)continue;break}u=t.values[l],Sn(u)&&(s||e===0||xa(e)===xa(u))&&(e+=u)}return!d&&!n.all?0:e}function OWe(t,e){const{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,u,d;for(l=0,u=a.length;l<u;++l)d=a[l],o[l]={[i]:d,[s]:t[d]};return o}function DC(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function FWe(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function UWe(t){const{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function $We(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function o3(t,e,r,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const s=t[i.index];if(r&&s>0||!r&&s<0)return i.index}return null}function l3(t,e){const{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:s,vScale:a,index:o}=n,l=s.axis,u=a.axis,d=FWe(s,a,n),A=e.length;let f;for(let h=0;h<A;++h){const m=e[h],{[l]:p,[u]:g}=m,x=m._stacks||(m._stacks={});f=x[u]=$We(i,d,p),f[o]=g,f._top=o3(f,a,!0,n.type),f._bottom=o3(f,a,!1,n.type);const v=f._visualValues||(f._visualValues={});v[o]=g}}function OC(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function QWe(t,e){return Wu(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function HWe(t,e,r){return Wu(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function bh(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[n]===void 0||s[n][r]===void 0)return;delete s[n][r],s[n]._visualValues!==void 0&&s[n]._visualValues[r]!==void 0&&delete s[n]._visualValues[r]}}}const FC=t=>t==="reset"||t==="none",c3=(t,e)=>e?t:Object.assign({},t),KWe=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:qX(r,!0),values:null};class hA{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=DC(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(A,f,h,m)=>A==="x"?f:A==="r"?m:h,s=r.xAxisID=lt(n.xAxisID,OC(e,"x")),a=r.yAxisID=lt(n.yAxisID,OC(e,"y")),o=r.rAxisID=lt(n.rAxisID,OC(e,"r")),l=r.indexAxis,u=r.iAxisID=i(l,s,a,o),d=r.vAxisID=i(l,a,s,o);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&K5(this._data,this),e._stacked&&bh(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(mt(r)){const i=this._cachedMeta;this._data=OWe(r,i)}else if(n!==r){if(n){K5(n,this);const i=this._cachedMeta;bh(i),i._parsed=[]}r&&Object.isExtensible(r)&&B7e(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=r._stacked;r._stacked=DC(r.vScale,r),r.stack!==n.stack&&(i=!0,bh(r),r.stack=n.stack),this._resyncElements(e),(i||s!==r._stacked)&&(l3(this,r._parsed),r._stacked=DC(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:a}=n,o=s.axis;let l=e===0&&r===i.length?!0:n._sorted,u=e>0&&n._parsed[e-1],d,A,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Cr(i[e])?f=this.parseArrayData(n,i,e,r):mt(i[e])?f=this.parseObjectData(n,i,e,r):f=this.parsePrimitiveData(n,i,e,r);const h=()=>A[o]===null||u&&A[o]<u[o];for(d=0;d<r;++d)n._parsed[d+e]=A=f[d],l&&(h()&&(l=!1),u=A);n._sorted=l}a&&l3(this,f)}parsePrimitiveData(e,r,n,i){const{iScale:s,vScale:a}=e,o=s.axis,l=a.axis,u=s.getLabels(),d=s===a,A=new Array(i);let f,h,m;for(f=0,h=i;f<h;++f)m=f+n,A[f]={[o]:d||s.parse(u[m],m),[l]:a.parse(r[m],m)};return A}parseArrayData(e,r,n,i){const{xScale:s,yScale:a}=e,o=new Array(i);let l,u,d,A;for(l=0,u=i;l<u;++l)d=l+n,A=r[d],o[l]={x:s.parse(A[0],d),y:a.parse(A[1],d)};return o}parseObjectData(e,r,n,i){const{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let d,A,f,h;for(d=0,A=i;d<A;++d)f=d+n,h=r[f],u[d]={x:s.parse(Af(h,o),f),y:a.parse(Af(h,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const i=this.chart,s=this._cachedMeta,a=r[e.axis],o={keys:qX(i,!0),values:r._stacks[e.axis]._visualValues};return a3(o,a,s.index,{mode:n})}updateRangeFromParsed(e,r,n,i){const s=n[r.axis];let a=s===null?NaN:s;const o=i&&n._stacks[r.axis];i&&o&&(i.values=o,a=a3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&e===n.iScale,a=i.length,o=this._getOtherScale(e),l=KWe(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:A}=UWe(o);let f,h;function m(){h=i[f];const p=h[o.axis];return!Sn(h[e.axis])||d>p||A<p}for(f=0;f<a&&!(!m()&&(this.updateRangeFromParsed(u,e,h,l),s));++f);if(s){for(f=a-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(u,e,h,l);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let i,s,a;for(i=0,s=r.length;i<s;++i)a=r[i][e.axis],Sn(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,i=r.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=DWe(lt(this.options.clip,MWe(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],s=r.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,s,o,l),d=o;d<o+l;++d){const A=i[d];A.hidden||(A.active&&u?a.push(A):A.draw(e,s))}for(d=0;d<a.length;++d)a[d].draw(e,s)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=HWe(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=QWe(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const i=r==="active",s=this._cachedDataOpts,a=e+"-"+r,o=s[a],l=this.enableOptionSharing&&Wm(n);if(o)return c3(o,l);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),A=i?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),h=Object.keys(yr.elements[e]),m=()=>this.getContext(n,i,r),p=u.resolveNamedOptions(f,h,m,A);return p.$shared&&(p.$shared=l,s[a]=Object.freeze(c3(p,l))),p}_resolveAnimations(e,r,n){const i=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const d=this.chart.config,A=d.datasetAnimationScopeKeys(this._type,r),f=d.getOptionScopes(this.getDataset(),A);l=d.createResolver(f,this.getContext(e,n,r))}const u=new YX(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||FC(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(r,s)||s!==i;return this.updateSharedOptions(s,r,n),{sharedOptions:s,includeOptions:a}}updateElement(e,r,n,i){FC(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!FC(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;const s=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[o,l,u]of this._syncList)this[o](l,u);this._syncList=[];const i=n.length,s=r.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,r,n=!0){const i=this._cachedMeta,s=i.data,a=e+r;let o;const l=u=>{for(u.length+=r,o=u.length-1;o>=a;o--)u[o]=u[o-r]};for(l(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,r),n&&this.updateElements(s,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,r);n._stacked&&bh(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ze(hA,"defaults",{}),ze(hA,"datasetElementType",null),ze(hA,"dataElementType",null);function VWe(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,s=r.length;i<s;i++)n=n.concat(r[i].controller.getAllParsedValues(t));t._cache.$bar=NX(n.sort((i,s)=>i-s))}return t._cache.$bar}function GWe(t){const e=t.iScale,r=VWe(e,t.type);let n=e._length,i,s,a,o;const l=()=>{a===32767||a===-32768||(Wm(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(i=0,s=r.length;i<s;++i)a=e.getPixelForValue(r[i]),l();for(o=void 0,i=0,s=e.ticks.length;i<s;++i)a=e.getPixelForTick(i),l();return n}function zWe(t,e,r,n){const i=r.barThickness;let s,a;return Tt(i)?(s=e.min*r.categoryPercentage,a=r.barPercentage):(s=i*n,a=1),{chunk:s/n,ratio:a,start:e.pixels[t]-s/2}}function WWe(t,e,r,n){const i=e.pixels,s=i[t];let a=t>0?i[t-1]:null,o=t<i.length-1?i[t+1]:null;const l=r.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);const u=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/n,ratio:r.barPercentage,start:u}}function YWe(t,e,r,n){const i=r.parse(t[0],n),s=r.parse(t[1],n),a=Math.min(i,s),o=Math.max(i,s);let l=a,u=o;Math.abs(a)>Math.abs(o)&&(l=o,u=a),e[r.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:s,min:a,max:o}}function XX(t,e,r,n){return Cr(t)?YWe(t,e,r,n):e[r.axis]=r.parse(t,n),e}function u3(t,e,r,n){const i=t.iScale,s=t.vScale,a=i.getLabels(),o=i===s,l=[];let u,d,A,f;for(u=r,d=r+n;u<d;++u)f=e[u],A={},A[i.axis]=o||i.parse(a[u],u),l.push(XX(f,A,s,u));return l}function UC(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function qWe(t,e,r){return t!==0?xa(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function XWe(t){let e,r,n,i,s;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(i="end",s="start"):(i="start",s="end"),{start:r,end:n,reverse:e,top:i,bottom:s}}function ZWe(t,e,r,n){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:u,bottom:d}=XWe(t);i==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?i=u:(r._bottom||0)===n?i=d:(s[d3(d,a,o,l)]=!0,i=u)),s[d3(i,a,o,l)]=!0,t.borderSkipped=s}function d3(t,e,r,n){return n?(t=JWe(t,e,r),t=A3(t,r,e)):t=A3(t,e,r),t}function JWe(t,e,r){return t===e?r:t===r?e:t}function A3(t,e,r){return t==="start"?e:t==="end"?r:t}function eYe(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class Av extends hA{parsePrimitiveData(e,r,n,i){return u3(e,r,n,i)}parseArrayData(e,r,n,i){return u3(e,r,n,i)}parseObjectData(e,r,n,i){const{iScale:s,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?o:l,d=a.axis==="x"?o:l,A=[];let f,h,m,p;for(f=n,h=n+i;f<h;++f)p=r[f],m={},m[s.axis]=s.parse(Af(p,u),f),A.push(XX(Af(p,d),m,a,f));return A}updateRangeFromParsed(e,r,n,i){super.updateRangeFromParsed(e,r,n,i);const s=n._custom;s&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:i}=r,s=this.getParsed(e),a=s._custom,o=UC(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),u=o.isHorizontal(),d=this._getRuler(),{sharedOptions:A,includeOptions:f}=this._getSharedOptions(r,i);for(let h=r;h<r+n;h++){const m=this.getParsed(h),p=s||Tt(m[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,d),x=(m._stacks||{})[o.axis],v={horizontal:u,base:p.base,enableBorderRadius:!x||UC(m._custom)||a===x._top||a===x._bottom,x:u?p.head:g.center,y:u?g.center:p.head,height:u?g.size:Math.abs(p.size),width:u?Math.abs(p.size):g.size};f&&(v.options=A||this.resolveDataElementOptions(h,e[h].active?"active":i));const y=v.options||e[h].options;ZWe(v,y,x,a),eYe(v,y,d.ratio),this.updateElement(e[h],h,v,i)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(r),l=o&&o[n.axis],u=d=>{const A=d._parsed.find(h=>h[n.axis]===l),f=A&&A[d.vScale.axis];if(Tt(f)||isNaN(f))return!0};for(const d of i)if(!(r!==void 0&&u(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[lt(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const i=this._getStacks(e,n),s=r!==void 0?i.indexOf(r):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,i=[];let s,a;for(s=0,a=r.data.length;s<a;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const o=e.barThickness;return{min:o||GWe(r),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(e),u=l._custom,d=UC(u);let A=l[r.axis],f=0,h=n?this.applyStack(r,l,n):A,m,p;h!==A&&(f=h-A,h=A),d&&(A=u.barStart,h=u.barEnd-u.barStart,A!==0&&xa(A)!==xa(u.barEnd)&&(f=0),f+=A);const g=!Tt(s)&&!d?s:f;let x=r.getPixelForValue(g);if(this.chart.getDataVisibility(e)?m=r.getPixelForValue(f+h):m=x,p=m-x,Math.abs(p)<a){p=qWe(p,r,o)*a,A===o&&(x-=p/2);const v=r.getPixelForDecimal(0),y=r.getPixelForDecimal(1),w=Math.min(v,y),b=Math.max(v,y);x=Math.max(Math.min(x,b),w),m=x+p,n&&!d&&(l._stacks[r.axis]._visualValues[i]=r.getValueForPixel(m)-r.getValueForPixel(x))}if(x===r.getPixelForValue(o)){const v=xa(p)*r.getLineWidthForValue(o)/2;x+=v,p-=v}return{size:p,base:x,head:m,center:m+p/2}}_calculateBarIndexPixels(e,r){const n=r.scale,i=this.options,s=i.skipNull,a=lt(i.maxBarThickness,1/0);let o,l;const u=this._getAxisCount();if(r.grouped){const d=s?this._getStackCount(e):r.stackCount,A=i.barThickness==="flex"?WWe(e,r,i,d*u):zWe(e,r,i,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(lt(f,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+h;o=A.start+A.chunk*m+A.chunk/2,l=Math.min(a,A.chunk*A.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(a,r.min*r.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,i=n.length;let s=0;for(;s<i;++s)this.getParsed(s)[r.axis]!==null&&!n[s].hidden&&n[s].draw(this._ctx)}}ze(Av,"id","bar"),ze(Av,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ze(Av,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class fv extends hA{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=r,a=this.chart._animationsDisabled;let{start:o,count:l}=I7e(r,i,a);this._drawStart=o,this._drawCount=l,P7e(r)&&(o=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:u},e),this.updateElements(i,o,l,e)}updateElements(e,r,n,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:A}=this._getSharedOptions(r,i),f=a.axis,h=o.axis,{spanGaps:m,segment:p}=this.options,g=Ym(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",v=r+n,y=e.length;let w=r>0&&this.getParsed(r-1);for(let b=0;b<y;++b){const S=e[b],C=x?S:{};if(b<r||b>=v){C.skip=!0;continue}const T=this.getParsed(b),B=Tt(T[h]),_=C[f]=a.getPixelForValue(T[f],b),I=C[h]=s||B?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,T,l):T[h],b);C.skip=isNaN(_)||isNaN(I)||B,C.stop=b>0&&Math.abs(T[f]-w[f])>g,p&&(C.parsed=T,C.raw=u.data[b]),A&&(C.options=d||this.resolveDataElementOptions(b,S.active?"active":i)),x||this.updateElement(S,b,C,i),w=T}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ze(fv,"id","line"),ze(fv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ze(fv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Cc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ck{constructor(e){ze(this,"options");this.options=e||{}}static override(e){Object.assign(ck.prototype,e)}init(){}formats(){return Cc()}parse(){return Cc()}format(){return Cc()}add(){return Cc()}diff(){return Cc()}startOf(){return Cc()}endOf(){return Cc()}}var tYe={_date:ck};function rYe(t,e,r,n){const{controller:i,data:s,_sorted:a}=t,o=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&s.length){const u=o._reversePixels?C7e:Yc;if(n){if(i._sharedOptions){const d=s[0],A=typeof d.getRange=="function"&&d.getRange(e);if(A){const f=u(s,e,r-A),h=u(s,e,r+A);return{lo:f.lo,hi:h.hi}}}}else{const d=u(s,e,r);if(l){const{vScale:A}=i._cachedMeta,{_parsed:f}=t,h=f.slice(0,d.lo+1).reverse().findIndex(p=>!Tt(p[A.axis]));d.lo-=Math.max(0,h);const m=f.slice(d.hi).findIndex(p=>!Tt(p[A.axis]));d.hi+=Math.max(0,m)}return d}}return{lo:0,hi:s.length-1}}function Ng(t,e,r,n,i){const s=t.getSortedVisibleDatasetMetas(),a=r[e];for(let o=0,l=s.length;o<l;++o){const{index:u,data:d}=s[o],{lo:A,hi:f}=rYe(s[o],e,a,i);for(let h=A;h<=f;++h){const m=d[h];m.skip||n(m,u,h)}}}function nYe(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){const s=e?Math.abs(n.x-i.x):0,a=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function $C(t,e,r,n,i){const s=[];return!i&&!t.isPointInArea(e)||Ng(t,r,e,function(o,l,u){!i&&!qm(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&s.push({element:o,datasetIndex:l,index:u})},!0),s}function iYe(t,e,r,n){let i=[];function s(a,o,l){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],n),{angle:A}=w7e(a,{x:e.x,y:e.y});BX(A,u,d)&&i.push({element:a,datasetIndex:o,index:l})}return Ng(t,r,e,s),i}function sYe(t,e,r,n,i,s){let a=[];const o=nYe(r);let l=Number.POSITIVE_INFINITY;function u(d,A,f){const h=d.inRange(e.x,e.y,i);if(n&&!h)return;const m=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(m))&&!h)return;const g=o(e,m);g<l?(a=[{element:d,datasetIndex:A,index:f}],l=g):g===l&&a.push({element:d,datasetIndex:A,index:f})}return Ng(t,r,e,u),a}function QC(t,e,r,n,i,s){return!s&&!t.isPointInArea(e)?[]:r==="r"&&!n?iYe(t,e,r,i):sYe(t,e,r,n,i,s)}function f3(t,e,r,n,i){const s=[],a=r==="x"?"inXRange":"inYRange";let o=!1;return Ng(t,r,e,(l,u,d)=>{l[a]&&l[a](e[r],i)&&(s.push({element:l,datasetIndex:u,index:d}),o=o||l.inRange(e.x,e.y,i))}),n&&!o?[]:s}var aYe={evaluateInteractionItems:Ng,modes:{index(t,e,r,n){const i=Lc(e,t),s=r.axis||"x",a=r.includeInvisible||!1,o=r.intersect?$C(t,i,s,n,a):QC(t,i,s,!1,n,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=o[0].index,A=u.data[d];A&&!A.skip&&l.push({element:A,datasetIndex:u.index,index:d})}),l):[]},dataset(t,e,r,n){const i=Lc(e,t),s=r.axis||"xy",a=r.includeInvisible||!1;let o=r.intersect?$C(t,i,s,n,a):QC(t,i,s,!1,n,a);if(o.length>0){const l=o[0].datasetIndex,u=t.getDatasetMeta(l).data;o=[];for(let d=0;d<u.length;++d)o.push({element:u[d],datasetIndex:l,index:d})}return o},point(t,e,r,n){const i=Lc(e,t),s=r.axis||"xy",a=r.includeInvisible||!1;return $C(t,i,s,n,a)},nearest(t,e,r,n){const i=Lc(e,t),s=r.axis||"xy",a=r.includeInvisible||!1;return QC(t,i,s,r.intersect,n,a)},x(t,e,r,n){const i=Lc(e,t);return f3(t,i,"x",r.intersect,n)},y(t,e,r,n){const i=Lc(e,t);return f3(t,i,"y",r.intersect,n)}}};const ZX=["left","top","right","bottom"];function wh(t,e){return t.filter(r=>r.pos===e)}function h3(t,e){return t.filter(r=>ZX.indexOf(r.pos)===-1&&r.box.axis===e)}function Eh(t,e){return t.sort((r,n)=>{const i=e?n:r,s=e?r:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function oYe(t){const e=[];let r,n,i,s,a,o;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:s,options:{stack:a,stackWeight:o=1}}=i,e.push({index:r,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return e}function lYe(t){const e={};for(const r of t){const{stack:n,pos:i,stackWeight:s}=r;if(!n||!ZX.includes(i))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function cYe(t,e){const r=lYe(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let s,a,o;for(s=0,a=t.length;s<a;++s){o=t[s];const{fullSize:l}=o.box,u=r[o.stack],d=u&&o.stackWeight/u.weight;o.horizontal?(o.width=d?d*n:l&&e.availableWidth,o.height=i):(o.width=n,o.height=d?d*i:l&&e.availableHeight)}return r}function uYe(t){const e=oYe(t),r=Eh(e.filter(u=>u.box.fullSize),!0),n=Eh(wh(e,"left"),!0),i=Eh(wh(e,"right")),s=Eh(wh(e,"top"),!0),a=Eh(wh(e,"bottom")),o=h3(e,"x"),l=h3(e,"y");return{fullSize:r,leftAndTop:n.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:wh(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function p3(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function JX(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function dYe(t,e,r,n){const{pos:i,box:s}=r,a=t.maxPadding;if(!mt(i)){r.size&&(t[i]-=r.size);const A=n[r.stack]||{size:0,count:1};A.size=Math.max(A.size,r.horizontal?s.height:s.width),r.size=A.size/A.count,t[i]+=r.size}s.getPadding&&JX(a,s.getPadding());const o=Math.max(0,e.outerWidth-p3(a,t,"left","right")),l=Math.max(0,e.outerHeight-p3(a,t,"top","bottom")),u=o!==t.w,d=l!==t.h;return t.w=o,t.h=l,r.horizontal?{same:u,other:d}:{same:d,other:u}}function AYe(t){const e=t.maxPadding;function r(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function fYe(t,e){const r=e.maxPadding;function n(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(e[a],r[a])}),s}return n(t?["left","right"]:["top","bottom"])}function Gh(t,e,r,n){const i=[];let s,a,o,l,u,d;for(s=0,a=t.length,u=0;s<a;++s){o=t[s],l=o.box,l.update(o.width||e.w,o.height||e.h,fYe(o.horizontal,e));const{same:A,other:f}=dYe(e,r,o,n);u|=A&&i.length,d=d||f,l.fullSize||i.push(o)}return u&&Gh(i,e,r,n)||d}function gx(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function m3(t,e,r,n){const i=r.padding;let{x:s,y:a}=e;for(const o of t){const l=o.box,u=n[o.stack]||{count:1,placed:0,weight:1},d=o.stackWeight/u.weight||1;if(o.horizontal){const A=e.w*d,f=u.size||l.height;Wm(u.start)&&(a=u.start),l.fullSize?gx(l,i.left,a,r.outerWidth-i.right-i.left,f):gx(l,e.left+u.placed,a,A,f),u.start=a,u.placed+=A,a=l.bottom}else{const A=e.h*d,f=u.size||l.width;Wm(u.start)&&(s=u.start),l.fullSize?gx(l,s,i.top,f,r.outerHeight-i.bottom-i.top):gx(l,s,e.top+u.placed,f,A),u.start=s,u.placed+=A,s=l.right}}e.x=s,e.y=a}var Qi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const i=Xi(t.options.layout.padding),s=Math.max(e-i.width,0),a=Math.max(r-i.height,0),o=uYe(t.boxes),l=o.vertical,u=o.horizontal;_t(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const d=l.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,A=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},i);JX(f,Xi(n));const h=Object.assign({maxPadding:f,w:s,h:a,x:i.left,y:i.top},i),m=cYe(l.concat(u),A);Gh(o.fullSize,h,A,m),Gh(l,h,A,m),Gh(u,h,A,m)&&Gh(l,h,A,m),AYe(h),m3(o.leftAndTop,h,A,m),h.x+=h.w,h.y+=h.h,m3(o.rightAndBottom,h,A,m),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},_t(o.chartArea,p=>{const g=p.box;Object.assign(g,t.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class eZ{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}}class hYe extends eZ{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const hv="$chartjs",pYe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},g3=t=>t===null||t==="";function mYe(t,e){const r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[hv]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",g3(i)){const s=e3(t,"width");s!==void 0&&(t.width=s)}if(g3(n))if(t.style.height==="")t.height=t.width/(e||2);else{const s=e3(t,"height");s!==void 0&&(t.height=s)}return t}const tZ=vWe?{passive:!0}:!1;function gYe(t,e,r){t&&t.addEventListener(e,r,tZ)}function xYe(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,tZ)}function vYe(t,e){const r=pYe[t.type]||t.type,{x:n,y:i}=Lc(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Ob(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function yYe(t,e,r){const n=t.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Ob(o.addedNodes,n),a=a&&!Ob(o.removedNodes,n);a&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function bYe(t,e,r){const n=t.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Ob(o.removedNodes,n),a=a&&!Ob(o.addedNodes,n);a&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}const Zm=new Map;let x3=0;function rZ(){const t=window.devicePixelRatio;t!==x3&&(x3=t,Zm.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function wYe(t,e){Zm.size||window.addEventListener("resize",rZ),Zm.set(t,e)}function EYe(t){Zm.delete(t),Zm.size||window.removeEventListener("resize",rZ)}function SYe(t,e,r){const n=t.canvas,i=n&&lk(n);if(!i)return;const s=PX((o,l)=>{const u=i.clientWidth;r(o,l),u<i.clientWidth&&r()},window),a=new ResizeObserver(o=>{const l=o[0],u=l.contentRect.width,d=l.contentRect.height;u===0&&d===0||s(u,d)});return a.observe(i),wYe(t,s),a}function HC(t,e,r){r&&r.disconnect(),e==="resize"&&EYe(t)}function CYe(t,e,r){const n=t.canvas,i=PX(s=>{t.ctx!==null&&r(vYe(s,t))},t);return gYe(n,e,i),i}class TYe extends eZ{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(mYe(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[hv])return!1;const n=r[hv].initial;["height","width"].forEach(s=>{const a=n[s];Tt(a)?r.removeAttribute(s):r.setAttribute(s,a)});const i=n.style||{};return Object.keys(i).forEach(s=>{r.style[s]=i[s]}),r.width=r.width,delete r[hv],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const i=e.$proxies||(e.$proxies={}),a={attach:yYe,detach:bYe,resize:SYe}[r]||CYe;i[r]=a(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:HC,detach:HC,resize:HC}[r]||xYe)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return xWe(e,r,n,i)}isAttached(e){const r=e&&lk(e);return!!(r&&r.isConnected)}}function BYe(t){return!ok()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?hYe:TYe}var Tx;let hc=(Tx=class{constructor(){ze(this,"x");ze(this,"y");ze(this,"active",!1);ze(this,"options");ze(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Ym(this.x)&&Ym(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const i={};return e.forEach(s=>{i[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),i}},ze(Tx,"defaults",{}),ze(Tx,"defaultRoutes"),Tx);function _Ye(t,e){const r=t.options.ticks,n=NYe(t),i=Math.min(r.maxTicksLimit||n,n),s=r.major.enabled?PYe(e):[],a=s.length,o=s[0],l=s[a-1],u=[];if(a>i)return RYe(e,u,s,a/i),u;const d=IYe(s,e,i);if(a>0){let A,f;const h=a>1?Math.round((l-o)/(a-1)):null;for(xx(e,u,d,Tt(h)?0:o-h,o),A=0,f=a-1;A<f;A++)xx(e,u,d,s[A],s[A+1]);return xx(e,u,d,l,Tt(h)?e.length:l+h),u}return xx(e,u,d),u}function NYe(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function IYe(t,e,r){const n=kYe(t),i=e.length/r;if(!n)return Math.max(i,1);const s=g7e(n);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function PYe(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function RYe(t,e,r,n){let i=0,s=r[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===s&&(e.push(t[a]),i++,s=r[i*n])}function xx(t,e,r,n,i){const s=lt(n,0),a=Math.min(lt(i,t.length),t.length);let o=0,l,u,d;for(r=Math.ceil(r),i&&(l=i-n,r=l/Math.floor(l/r)),d=s;d<0;)o++,d=Math.round(s+o*r);for(u=Math.max(s,0);u<a;u++)u===d&&(e.push(t[u]),o++,d=Math.round(s+o*r))}function kYe(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const LYe=t=>t==="left"?"right":t==="right"?"left":t,v3=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,y3=(t,e)=>Math.min(e||t,t);function b3(t,e){const r=[],n=t.length/e,i=t.length;let s=0;for(;s<i;s+=n)r.push(t[Math.floor(s)]);return r}function jYe(t,e,r){const n=t.ticks.length,i=Math.min(e,n-1),s=t._startPixel,a=t._endPixel,o=1e-6;let l=t.getPixelForTick(i),u;if(!(r&&(n===1?u=Math.max(l-s,a-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-o||l>a+o)))return l}function MYe(t,e){_t(t,r=>{const n=r.gc,i=n.length/2;let s;if(i>e){for(s=0;s<i;++s)delete r.data[n[s]];n.splice(0,i)}})}function Sh(t){return t.drawTicks?t.tickLength:0}function w3(t,e){if(!t.display)return 0;const r=wn(t.font,e),n=Xi(t.padding);return(Cr(t.text)?t.text.length:1)*r.lineHeight+n.height}function DYe(t,e){return Wu(t,{scale:e,type:"scale"})}function OYe(t,e,r){return Wu(t,{tick:r,index:e,type:"tick"})}function FYe(t,e,r){let n=rk(t);return(r&&e!=="right"||!r&&e==="right")&&(n=LYe(n)),n}function UYe(t,e,r,n){const{top:i,left:s,bottom:a,right:o,chart:l}=t,{chartArea:u,scales:d}=l;let A=0,f,h,m;const p=a-i,g=o-s;if(t.isHorizontal()){if(h=mn(n,s,o),mt(r)){const x=Object.keys(r)[0],v=r[x];m=d[x].getPixelForValue(v)+p-e}else r==="center"?m=(u.bottom+u.top)/2+p-e:m=v3(t,r,e);f=o-s}else{if(mt(r)){const x=Object.keys(r)[0],v=r[x];h=d[x].getPixelForValue(v)-g+e}else r==="center"?h=(u.left+u.right)/2-g+e:h=v3(t,r,e);m=mn(n,a,i),A=r==="left"?-ys:ys}return{titleX:h,titleY:m,maxWidth:f,rotation:A}}class Vf extends hc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=Hs(e,Number.POSITIVE_INFINITY),r=Hs(r,Number.NEGATIVE_INFINITY),n=Hs(n,Number.POSITIVE_INFINITY),i=Hs(i,Number.NEGATIVE_INFINITY),{min:Hs(e,n),max:Hs(r,i),minDefined:Sn(e),maxDefined:Sn(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)a=o[l].controller.getMinMax(this,e),i||(r=Math.min(r,a.min)),s||(n=Math.max(n,a.max));return r=s&&r>n?n:r,n=i&&r>n?r:n,{min:Hs(r,Hs(n,r)),max:Hs(n,Hs(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Yt(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=q7e(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?b3(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=_Ye(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Yt(this.options.afterUpdate,[this])}beforeSetDimensions(){Yt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Yt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Yt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Yt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,i,s;for(n=0,i=e.length;n<i;n++)s=e[n],s.label=Yt(r.callback,[s.value,n,e],this)}afterTickToLabelConversion(){Yt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Yt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=y3(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,s=r.maxRotation;let a=i,o,l,u;if(!this._isVisible()||!r.display||i>=s||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),A=d.widest.width,f=d.highest.height,h=gi(this.chart.width-A,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),A+6>o&&(o=h/(n-(e.offset?.5:1)),l=this.maxHeight-Sh(e.grid)-r.padding-w3(e.title,this.chart.options.font),u=Math.sqrt(A*A+f*f),a=b7e(Math.min(Math.asin(gi((d.highest.height+6)/o,-1,1)),Math.asin(gi(l/u,-1,1))-Math.asin(gi(f/u,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Yt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Yt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=w3(i,r.options.font);if(o?(e.width=this.maxWidth,e.height=Sh(s)+l):(e.height=this.maxHeight,e.width=Sh(s)+l),n.display&&this.ticks.length){const{first:u,last:d,widest:A,highest:f}=this._getLabelSizes(),h=n.padding*2,m=Wc(this.labelRotation),p=Math.cos(m),g=Math.sin(m);if(o){const x=n.mirror?0:g*A.width+p*f.height;e.height=Math.min(this.maxHeight,e.height+x+h)}else{const x=n.mirror?0:p*A.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+x+h)}this._calculatePadding(u,d,g,p)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,A=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?u?(f=i*e.width,h=n*r.height):(f=n*e.height,h=i*r.width):s==="start"?h=r.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,h=r.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((h-A+a)*this.width/(this.width-A),0)}else{let d=r.height/2,A=e.height/2;s==="start"?(d=0,A=e.height):s==="end"&&(d=r.height,A=0),this.paddingTop=d+a,this.paddingBottom=A+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Yt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Tt(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=b3(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(r/y3(r,n));let u=0,d=0,A,f,h,m,p,g,x,v,y,w,b;for(A=0;A<r;A+=l){if(m=e[A].label,p=this._resolveTickFontOptions(A),i.font=g=p.string,x=s[g]=s[g]||{data:{},gc:[]},v=p.lineHeight,y=w=0,!Tt(m)&&!Cr(m))y=Y5(i,x.data,x.gc,y,m),w=v;else if(Cr(m))for(f=0,h=m.length;f<h;++f)b=m[f],!Tt(b)&&!Cr(b)&&(y=Y5(i,x.data,x.gc,y,b),w+=v);a.push(y),o.push(w),u=Math.max(y,u),d=Math.max(w,d)}MYe(s,r);const S=a.indexOf(u),C=o.indexOf(d),T=B=>({width:a[B]||0,height:o[B]||0});return{first:T(0),last:T(r-1),widest:T(S),highest:T(C),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return S7e(this._alignToPixels?Sc(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=OYe(this.getContext(),e,n))}return this.$context||(this.$context=DYe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Wc(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*n>o*i?o/n:l/i:l*i<o*n?l/n:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,u=this.isHorizontal(),A=this.ticks.length+(l?1:0),f=Sh(s),h=[],m=o.setContext(this.getContext()),p=m.display?m.width:0,g=p/2,x=function(k){return Sc(n,k,p)};let v,y,w,b,S,C,T,B,_,I,L,N;if(a==="top")v=x(this.bottom),C=this.bottom-f,B=v-g,I=x(e.top)+g,N=e.bottom;else if(a==="bottom")v=x(this.top),I=e.top,N=x(e.bottom)-g,C=v+g,B=this.top+f;else if(a==="left")v=x(this.right),S=this.right-f,T=v-g,_=x(e.left)+g,L=e.right;else if(a==="right")v=x(this.left),_=e.left,L=x(e.right)-g,S=v+g,T=this.left+f;else if(r==="x"){if(a==="center")v=x((e.top+e.bottom)/2+.5);else if(mt(a)){const k=Object.keys(a)[0],O=a[k];v=x(this.chart.scales[k].getPixelForValue(O))}I=e.top,N=e.bottom,C=v+g,B=C+f}else if(r==="y"){if(a==="center")v=x((e.left+e.right)/2);else if(mt(a)){const k=Object.keys(a)[0],O=a[k];v=x(this.chart.scales[k].getPixelForValue(O))}S=v-g,T=S-f,_=e.left,L=e.right}const R=lt(i.ticks.maxTicksLimit,A),M=Math.max(1,Math.ceil(A/R));for(y=0;y<A;y+=M){const k=this.getContext(y),O=s.setContext(k),j=o.setContext(k),D=O.lineWidth,F=O.color,$=j.dash||[],U=j.dashOffset,K=O.tickWidth,V=O.tickColor,q=O.tickBorderDash||[],H=O.tickBorderDashOffset;w=jYe(this,y,l),w!==void 0&&(b=Sc(n,w,D),u?S=T=_=L=b:C=B=I=N=b,h.push({tx1:S,ty1:C,tx2:T,ty2:B,x1:_,y1:I,x2:L,y2:N,width:D,color:F,borderDash:$,borderDashOffset:U,tickWidth:K,tickColor:V,tickBorderDash:q,tickBorderDashOffset:H}))}return this._ticksLength=A,this._borderValue=v,h}_computeLabelItems(e){const r=this.axis,n=this.options,{position:i,ticks:s}=n,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:d,mirror:A}=s,f=Sh(n.grid),h=f+d,m=A?-d:h,p=-Wc(this.labelRotation),g=[];let x,v,y,w,b,S,C,T,B,_,I,L,N="middle";if(i==="top")S=this.bottom-m,C=this._getXAxisLabelAlignment();else if(i==="bottom")S=this.top+m,C=this._getXAxisLabelAlignment();else if(i==="left"){const M=this._getYAxisLabelAlignment(f);C=M.textAlign,b=M.x}else if(i==="right"){const M=this._getYAxisLabelAlignment(f);C=M.textAlign,b=M.x}else if(r==="x"){if(i==="center")S=(e.top+e.bottom)/2+h;else if(mt(i)){const M=Object.keys(i)[0],k=i[M];S=this.chart.scales[M].getPixelForValue(k)+h}C=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")b=(e.left+e.right)/2-h;else if(mt(i)){const M=Object.keys(i)[0],k=i[M];b=this.chart.scales[M].getPixelForValue(k)}C=this._getYAxisLabelAlignment(f).textAlign}r==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));const R=this._getLabelSizes();for(x=0,v=o.length;x<v;++x){y=o[x],w=y.label;const M=s.setContext(this.getContext(x));T=this.getPixelForTick(x)+s.labelOffset,B=this._resolveTickFontOptions(x),_=B.lineHeight,I=Cr(w)?w.length:1;const k=I/2,O=M.color,j=M.textStrokeColor,D=M.textStrokeWidth;let F=C;a?(b=T,C==="inner"&&(x===v-1?F=this.options.reverse?"left":"right":x===0?F=this.options.reverse?"right":"left":F="center"),i==="top"?u==="near"||p!==0?L=-I*_+_/2:u==="center"?L=-R.highest.height/2-k*_+_:L=-R.highest.height+_/2:u==="near"||p!==0?L=_/2:u==="center"?L=R.highest.height/2-k*_:L=R.highest.height-I*_,A&&(L*=-1),p!==0&&!M.showLabelBackdrop&&(b+=_/2*Math.sin(p))):(S=T,L=(1-I)*_/2);let $;if(M.showLabelBackdrop){const U=Xi(M.backdropPadding),K=R.heights[x],V=R.widths[x];let q=L-U.top,H=0-U.left;switch(N){case"middle":q-=K/2;break;case"bottom":q-=K;break}switch(C){case"center":H-=V/2;break;case"right":H-=V;break;case"inner":x===v-1?H-=V:x>0&&(H-=V/2);break}$={left:H,top:q,width:V+U.width,height:K+U.height,color:M.backdropColor}}g.push({label:w,font:B,textOffset:L,options:{rotation:p,color:O,strokeColor:j,strokeWidth:D,textAlign:F,textBaseline:N,translation:[b,S],backdrop:$}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Wc(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,l=a.widest.width;let u,d;return r==="left"?i?(d=this.right+s,n==="near"?u="left":n==="center"?(u="center",d+=l/2):(u="right",d+=l)):(d=this.right-o,n==="near"?u="right":n==="center"?(u="center",d-=l/2):(u="left",d=this.left)):r==="right"?i?(d=this.left+s,n==="near"?u="right":n==="center"?(u="center",d-=l/2):(u="left",d-=l)):(d=this.left+o,n==="near"?u="left":n==="center"?(u="center",d+=l/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:i,width:s,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,s,a),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const o=(l,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(s=0,a=i.length;s<a;++s){const l=i[s];r.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,A,f;this.isHorizontal()?(u=Sc(e,this.left,a)-a/2,d=Sc(e,this.right,o)+o/2,A=f=l):(A=Sc(e,this.top,a)-a/2,f=Sc(e,this.bottom,o)+o/2,u=d=l),r.save(),r.lineWidth=s.width,r.strokeStyle=s.color,r.beginPath(),r.moveTo(u,A),r.lineTo(d,f),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&X1(n,i);const s=this.getLabelItems(e);for(const a of s){const o=a.options,l=a.font,u=a.label,d=a.textOffset;Xm(n,u,0,d,l,o)}i&&Z1(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;const s=wn(n.font),a=Xi(n.padding),o=n.align;let l=s.lineHeight/2;r==="bottom"||r==="center"||mt(r)?(l+=a.bottom,Cr(n.text)&&(l+=s.lineHeight*(n.text.length-1))):l+=a.top;const{titleX:u,titleY:d,maxWidth:A,rotation:f}=UYe(this,l,r,o);Xm(e,n.text,0,0,s,{color:n.color,maxWidth:A,rotation:f,textAlign:FYe(o,r,i),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=lt(e.grid&&e.grid.z,-1),i=lt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vf.prototype.draw?[{z:r,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,a;for(s=0,a=r.length;s<a;++s){const o=r[s];o[n]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return wn(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vx{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;HYe(r)&&(n=this.register(r));const i=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,$Ye(e,a,n),this.override&&yr.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in yr[i]&&(delete yr[i][n],this.override&&delete Mu[n])}}function $Ye(t,e,r){const n=zm(Object.create(null),[r?yr.get(r):{},yr.get(e),t.defaults]);yr.set(e,n),t.defaultRoutes&&QYe(e,t.defaultRoutes),t.descriptors&&yr.describe(e,t.descriptors)}function QYe(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),i=n.pop(),s=[t].concat(n).join("."),a=e[r].split("."),o=a.pop(),l=a.join(".");yr.route(s,i,l,o)})}function HYe(t){return"id"in t&&"defaults"in t}class KYe{constructor(){this.controllers=new vx(hA,"datasets",!0),this.elements=new vx(hc,"elements"),this.plugins=new vx(Object,"plugins"),this.scales=new vx(Vf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{const s=n||this._getRegistryForType(i);n||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):_t(i,a=>{const o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,r,n){const i=ek(e);Yt(n["before"+i],[],n),r[e](n),Yt(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Ws=new KYe;class VYe{constructor(){this._init=void 0}notify(e,r,n,i){if(r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(s,e,r,n);return r==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,r,n,i){i=i||{};for(const s of e){const a=s.plugin,o=a[n],l=[r,i,s.options];if(Yt(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Tt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,i=lt(n.options&&n.options.plugins,{}),s=GYe(n);return i===!1&&!r?[]:WYe(e,s,i,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}}function GYe(t){const e={},r=[],n=Object.keys(Ws.plugins.items);for(let s=0;s<n.length;s++)r.push(Ws.getPlugin(n[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function zYe(t,e){return!e&&t===!1?null:t===!0?{}:t}function WYe(t,{plugins:e,localIds:r},n,i){const s=[],a=t.getContext();for(const o of e){const l=o.id,u=zYe(n[l],i);u!==null&&s.push({plugin:o,options:YYe(t.config,{plugin:o,local:r[l]},u,a)})}return s}function YYe(t,{plugin:e,local:r},n,i){const s=t.pluginScopeKeys(e),a=t.getOptionScopes(n,s);return r&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function JN(t,e){const r=yr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function qYe(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function XYe(t,e){return t===e?"_index_":"_value_"}function E3(t){if(t==="x"||t==="y"||t==="r")return t}function ZYe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function e2(t,...e){if(E3(t))return t;for(const r of e){const n=r.axis||ZYe(r.position)||t.length>1&&E3(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function S3(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function JYe(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return S3(t,"x",r[0])||S3(t,"y",r[0])}return{}}function eqe(t,e){const r=Mu[t.type]||{scales:{}},n=e.scales||{},i=JN(t.type,e),s=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!mt(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=e2(a,o,JYe(a,t),yr.scales[o.type]),u=XYe(l,i),d=r.scales||{};s[a]=vp(Object.create(null),[{axis:l},o,d[l],d[u]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,l=a.indexAxis||JN(o,e),d=(Mu[o]||{}).scales||{};Object.keys(d).forEach(A=>{const f=qYe(A,l),h=a[f+"AxisID"]||f;s[h]=s[h]||Object.create(null),vp(s[h],[{axis:f},n[h],d[A]])})}),Object.keys(s).forEach(a=>{const o=s[a];vp(o,[yr.scales[o.type],yr.scale])}),s}function nZ(t){const e=t.options||(t.options={});e.plugins=lt(e.plugins,{}),e.scales=eqe(t,e)}function iZ(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function tqe(t){return t=t||{},t.data=iZ(t.data),nZ(t),t}const C3=new Map,sZ=new Set;function yx(t,e){let r=C3.get(t);return r||(r=e(),C3.set(t,r),sZ.add(r)),r}const Ch=(t,e,r)=>{const n=Af(e,r);n!==void 0&&t.add(n)};class rqe{constructor(e){this._config=tqe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=iZ(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nZ(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return yx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return yx(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return yx(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return yx(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){const{options:i,type:s}=this,a=this._cachedScopes(e,n),o=a.get(r);if(o)return o;const l=new Set;r.forEach(d=>{e&&(l.add(e),d.forEach(A=>Ch(l,e,A))),d.forEach(A=>Ch(l,i,A)),d.forEach(A=>Ch(l,Mu[s]||{},A)),d.forEach(A=>Ch(l,yr,A)),d.forEach(A=>Ch(l,XN,A))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),sZ.has(r)&&a.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,Mu[r]||{},yr.datasets[r]||{},{type:r},yr,XN]}resolveNamedOptions(e,r,n,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=T3(this._resolverCache,e,i);let l=a;if(iqe(a,r)){s.$shared=!1,n=ic(n)?n():n;const u=this.createResolver(e,n,o);l=ff(a,n,u)}for(const u of r)s[u]=l[u];return s}createResolver(e,r,n=[""],i){const{resolver:s}=T3(this._resolverCache,e,n);return mt(r)?ff(s,r,void 0,i):s}}function T3(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=r.join();let s=n.get(i);return s||(s={resolver:ik(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,s)),s}const nqe=t=>mt(t)&&Object.getOwnPropertyNames(t).some(e=>ic(t[e]));function iqe(t,e){const{isScriptable:r,isIndexable:n}=OX(t);for(const i of e){const s=r(i),a=n(i),o=(a||s)&&t[i];if(s&&(ic(o)||nqe(o))||a&&Cr(o))return!0}return!1}var sqe="4.5.1";const aqe=["top","bottom","left","right","chartArea"];function B3(t,e){return t==="top"||t==="bottom"||aqe.indexOf(t)===-1&&e==="x"}function _3(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function N3(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Yt(r&&r.onComplete,[t],e)}function oqe(t){const e=t.chart,r=e.options.animation;Yt(r&&r.onProgress,[t],e)}function aZ(t){return ok()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const pv={},I3=t=>{const e=aZ(t);return Object.values(pv).filter(r=>r.canvas===e).pop()};function lqe(t,e,r){const n=Object.keys(t);for(const i of n){const s=+i;if(s>=e){const a=t[i];delete t[i],(r>0||s>e)&&(t[s+r]=a)}}}function cqe(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}var zo;let Ig=(zo=class{static register(...e){Ws.add(...e),P3()}static unregister(...e){Ws.remove(...e),P3()}constructor(e,r){const n=this.config=new rqe(r),i=aZ(e),s=I3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||BYe(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,u=l&&l.height,d=l&&l.width;if(this.id=l7e(),this.ctx=o,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new VYe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_7e(A=>this.update(A),a.resizeDelay||0),this._dataChanges=[],pv[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ha.listen(this,"complete",N3),Ha.listen(this,"progress",oqe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:s}=this;return Tt(e)?r&&s?s:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ws}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return q5(this.canvas,this.ctx),this}stop(){return Ha.stop(this),this}resize(e,r){Ha.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,r,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,J5(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Yt(n.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};_t(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let s=[];r&&(s=s.concat(Object.keys(r).map(a=>{const o=r[a],l=e2(a,o),u=l==="r",d=l==="x";return{options:o,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),_t(s,a=>{const o=a.options,l=o.id,u=e2(l,o),d=lt(o.type,a.dtype);(o.position===void 0||B3(o.position,u)!==B3(a.dposition))&&(o.position=a.dposition),i[l]=!0;let A=null;if(l in n&&n[l].type===d)A=n[l];else{const f=Ws.getScale(d);A=new f({id:l,type:d,ctx:this.ctx,chart:this}),n[A.id]=A}A.init(o,e)}),_t(i,(a,o)=>{a||delete n[o]}),_t(n,a=>{Qi.configure(this,a,a.options),Qi.addBox(this,a)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,s)=>i.index-s.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(_3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){const s=r[n];let a=this.getDatasetMeta(n);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=s.indexAxis||JN(o,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const l=Ws.getController(o),{datasetElementType:u,dataElementType:d}=yr.datasets[o];Object.assign(l,{dataElementType:Ws.getElement(d),datasetElementType:u&&Ws.getElement(u)}),a.controller=new l(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){_t(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:A}=this.getDatasetMeta(u),f=!i&&s.indexOf(A)===-1;A.buildOrUpdateElements(f),a=Math.max(+A.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||_t(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_3("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){_t(this.scales,e=>{Qi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!U5(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of r){const a=n==="_removeElements"?-s:s;lqe(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=n(0);for(let s=1;s<r;s++)if(!U5(i,n(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Qi.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],_t(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,ic(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ha.has(this)?this.attached&&!Ha.running(this)&&Ha.start(this):(this.draw(),N3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let i,s;for(i=0,s=r.length;i<s;++i){const a=r[i];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=WX(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&X1(r,i),e.controller.draw(),i&&Z1(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return qm(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){const s=aYe.modes[r];return typeof s=="function"?s(this,e,n,i):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let i=n.filter(s=>s&&s._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Wu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const i=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,i);Wm(r)?(s.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Ha.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),q5(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete pv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(s,a)=>{r.addEventListener(this,s,a),e[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};_t(this.options.events,s=>n(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(l,u)=>{r.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(r.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():a()}unbindEvents(){_t(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},_t(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const i=n?"set":"remove";let s,a,o,l;for(r==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!kb(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const i=this.options.hover,s=(l,u)=>l.filter(d=>!u.some(A=>d.datasetIndex===A.datasetIndex&&d.index===A.index)),a=s(r,e),o=n?e:s(e,r);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const s=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:i=[],options:s}=this,a=r,o=this._getActiveElements(e,i,n,a),l=h7e(e),u=cqe(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Yt(s.onHover,[e,o,this],this),l&&Yt(s.onClick,[e,o,this],this));const d=!kb(o,i);return(d||r)&&(this._active=o,this._updateHoverStyles(o,i,r)),this._lastEvent=u,d}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ze(zo,"defaults",yr),ze(zo,"instances",pv),ze(zo,"overrides",Mu),ze(zo,"registry",Ws),ze(zo,"version",sqe),ze(zo,"getChart",I3),zo);function P3(){return _t(Ig.instances,t=>t._plugins.invalidate())}function oZ(t,e,r=e){t.lineCap=lt(r.borderCapStyle,e.borderCapStyle),t.setLineDash(lt(r.borderDash,e.borderDash)),t.lineDashOffset=lt(r.borderDashOffset,e.borderDashOffset),t.lineJoin=lt(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=lt(r.borderWidth,e.borderWidth),t.strokeStyle=lt(r.borderColor,e.borderColor)}function uqe(t,e,r){t.lineTo(r.x,r.y)}function dqe(t){return t.stepped?$7e:t.tension||t.cubicInterpolationMode==="monotone"?Q7e:uqe}function lZ(t,e,r={}){const n=t.length,{start:i=0,end:s=n-1}=r,{start:a,end:o}=e,l=Math.max(i,a),u=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:n,start:l,loop:e.loop,ilen:u<l&&!d?n+u-l:u-l}}function Aqe(t,e,r,n){const{points:i,options:s}=e,{count:a,start:o,loop:l,ilen:u}=lZ(i,r,n),d=dqe(s);let{move:A=!0,reverse:f}=n||{},h,m,p;for(h=0;h<=u;++h)m=i[(o+(f?u-h:h))%a],!m.skip&&(A?(t.moveTo(m.x,m.y),A=!1):d(t,p,m,f,s.stepped),p=m);return l&&(m=i[(o+(f?u:0))%a],d(t,p,m,f,s.stepped)),!!l}function fqe(t,e,r,n){const i=e.points,{count:s,start:a,ilen:o}=lZ(i,r,n),{move:l=!0,reverse:u}=n||{};let d=0,A=0,f,h,m,p,g,x;const v=w=>(a+(u?o-w:w))%s,y=()=>{p!==g&&(t.lineTo(d,g),t.lineTo(d,p),t.lineTo(d,x))};for(l&&(h=i[v(0)],t.moveTo(h.x,h.y)),f=0;f<=o;++f){if(h=i[v(f)],h.skip)continue;const w=h.x,b=h.y,S=w|0;S===m?(b<p?p=b:b>g&&(g=b),d=(A*d+w)/++A):(y(),t.lineTo(w,b),m=S,A=0,p=g=b),x=b}y()}function t2(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?fqe:Aqe}function hqe(t){return t.stepped?yWe:t.tension||t.cubicInterpolationMode==="monotone"?bWe:jc}function pqe(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),oZ(t,e.options),t.stroke(i)}function mqe(t,e,r,n){const{segments:i,options:s}=e,a=t2(e);for(const o of i)oZ(t,s,o.style),t.beginPath(),a(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const gqe=typeof Path2D=="function";function xqe(t,e,r,n){gqe&&!e.options.segment?pqe(t,e,r,n):mqe(t,e,r,n)}class no extends hc{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;AWe(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=BWe(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,i=e[r],s=this.points,a=zX(this,{property:r,start:i,end:i});if(!a.length)return;const o=[],l=hqe(n);let u,d;for(u=0,d=a.length;u<d;++u){const{start:A,end:f}=a[u],h=s[A],m=s[f];if(h===m){o.push(h);continue}const p=Math.abs((i-h[r])/(m[r]-h[r])),g=l(h,m,p,n.stepped);g[r]=e[r],o.push(g)}return o.length===1?o[0]:o}pathSegment(e,r,n){return t2(this)(e,this,r,n)}path(e,r,n){const i=this.segments,s=t2(this);let a=this._loop;r=r||0,n=n||this.points.length-r;for(const o of i)a&=s(e,this,o,{start:r,end:r+n-1});return!!a}draw(e,r,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),xqe(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ze(no,"id","line"),ze(no,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ze(no,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ze(no,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function R3(t,e,r,n){const i=t.options,{[r]:s}=t.getProps([r],n);return Math.abs(e-s)<i.radius+i.hitRadius}class Ep extends hc{constructor(r){super();ze(this,"parsed");ze(this,"skip");ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(r-a,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(r,n){return R3(this,r,"x",n)}inYRange(r,n){return R3(this,r,"y",n)}getCenterPoint(r){const{x:n,y:i}=this.getProps(["x","y"],r);return{x:n,y:i}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const i=n&&r.borderWidth||0;return(n+i)*2}draw(r,n){const i=this.options;this.skip||i.radius<.1||!qm(this,n,this.size(i)/2)||(r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.fillStyle=i.backgroundColor,ZN(r,i,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}ze(Ep,"id","point"),ze(Ep,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ze(Ep,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function cZ(t,e){const{x:r,y:n,base:i,width:s,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,u,d,A;return t.horizontal?(A=a/2,o=Math.min(r,i),l=Math.max(r,i),u=n-A,d=n+A):(A=s/2,o=r-A,l=r+A,u=Math.min(n,i),d=Math.max(n,i)),{left:o,top:u,right:l,bottom:d}}function Il(t,e,r,n){return t?0:gi(e,r,n)}function vqe(t,e,r){const n=t.options.borderWidth,i=t.borderSkipped,s=DX(n);return{t:Il(i.top,s.top,0,r),r:Il(i.right,s.right,0,e),b:Il(i.bottom,s.bottom,0,r),l:Il(i.left,s.left,0,e)}}function yqe(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=AA(i),a=Math.min(e,r),o=t.borderSkipped,l=n||mt(i);return{topLeft:Il(!l||o.top||o.left,s.topLeft,0,a),topRight:Il(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Il(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Il(!l||o.bottom||o.right,s.bottomRight,0,a)}}function bqe(t){const e=cZ(t),r=e.right-e.left,n=e.bottom-e.top,i=vqe(t,r/2,n/2),s=yqe(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:r-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function KC(t,e,r,n){const i=e===null,s=r===null,o=t&&!(i&&s)&&cZ(t,n);return o&&(i||_l(e,o.left,o.right))&&(s||_l(r,o.top,o.bottom))}function wqe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Eqe(t,e){t.rect(e.x,e.y,e.w,e.h)}function VC(t,e,r={}){const n=t.x!==r.x?-e:0,i=t.y!==r.y?-e:0,s=(t.x+t.w!==r.x+r.w?e:0)-n,a=(t.y+t.h!==r.y+r.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+s,h:t.h+a,radius:t.radius}}class mv extends hc{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:a}=bqe(this),o=wqe(a.radius)?Mb:Eqe;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,VC(a,r,s)),e.clip(),o(e,VC(s,-r,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,VC(s,r)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,r,n){return KC(this,e,r,n)}inXRange(e,r){return KC(this,e,null,r)}inYRange(e,r){return KC(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(r+i)/2:r,y:s?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ze(mv,"id","bar"),ze(mv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ze(mv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Sqe(t,e,r){const n=t.segments,i=t.points,s=e.points,a=[];for(const o of n){let{start:l,end:u}=o;u=eE(l,u,i);const d=r2(r,i[l],i[u],o.loop);if(!e.segments){a.push({source:o,target:d,start:i[l],end:i[u]});continue}const A=zX(e,d);for(const f of A){const h=r2(r,s[f.start],s[f.end],f.loop),m=GX(o,i,h);for(const p of m)a.push({source:p,target:f,start:{[r]:k3(d,h,"start",Math.max)},end:{[r]:k3(d,h,"end",Math.min)}})}}return a}function r2(t,e,r,n){if(n)return;let i=e[t],s=r[t];return t==="angle"&&(i=qs(i),s=qs(s)),{property:t,start:i,end:s}}function Cqe(t,e){const{x:r=null,y:n=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=eE(a,o,i);const l=i[a],u=i[o];n!==null?(s.push({x:l.x,y:n}),s.push({x:u.x,y:n})):r!==null&&(s.push({x:r,y:l.y}),s.push({x:r,y:u.y}))}),s}function eE(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function k3(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function uZ(t,e){let r=[],n=!1;return Cr(t)?(n=!0,r=t):r=Cqe(t,e),r.length?new no({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function L3(t){return t&&t.fill!==!1}function Tqe(t,e,r){let i=t[e].fill;const s=[e];let a;if(!r)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Sn(i))return i;if(a=t[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function Bqe(t,e,r){const n=Pqe(t);if(mt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Sn(i)&&Math.floor(i)===i?_qe(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function _qe(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function Nqe(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:mt(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function Iqe(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:mt(t)?n=t.value:n=e.getBaseValue(),n}function Pqe(t){const e=t.options,r=e.fill;let n=lt(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Rqe(t){const{scale:e,index:r,line:n}=t,i=[],s=n.segments,a=n.points,o=kqe(e,r);o.push(uZ({x:null,y:e.bottom},n));for(let l=0;l<s.length;l++){const u=s[l];for(let d=u.start;d<=u.end;d++)Lqe(i,a[d],o)}return new no({points:i,options:{}})}function kqe(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const s=n[i];if(s.index===e)break;s.hidden||r.unshift(s.dataset)}return r}function Lqe(t,e,r){const n=[];for(let i=0;i<r.length;i++){const s=r[i],{first:a,last:o,point:l}=jqe(s,e,"x");if(!(!l||a&&o)){if(a)n.unshift(l);else if(t.push(l),!o)break}}t.push(...n)}function jqe(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const i=n[r],s=t.segments,a=t.points;let o=!1,l=!1;for(let u=0;u<s.length;u++){const d=s[u],A=a[d.start][r],f=a[d.end][r];if(_l(i,A,f)){o=i===A,l=i===f;break}}return{first:o,last:l,point:n}}class dZ{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:i,y:s,radius:a}=this;return r=r||{start:0,end:Bs},e.arc(i,s,a,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:i}=this,s=e.angle;return{x:r+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}}function Mqe(t){const{chart:e,fill:r,line:n}=t;if(Sn(r))return Dqe(e,r);if(r==="stack")return Rqe(t);if(r==="shape")return!0;const i=Oqe(t);return i instanceof dZ?i:uZ(i,n)}function Dqe(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function Oqe(t){return(t.scale||{}).getPointPositionForValue?Uqe(t):Fqe(t)}function Fqe(t){const{scale:e={},fill:r}=t,n=Nqe(r,e);if(Sn(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function Uqe(t){const{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,s=n.reverse?e.max:e.min,a=Iqe(r,e,s),o=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,s);return new dZ({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<i;++l)o.push(e.getPointPositionForValue(l,a));return o}function GC(t,e,r){const n=Mqe(e),{chart:i,index:s,line:a,scale:o,axis:l}=e,u=a.options,d=u.fill,A=u.backgroundColor,{above:f=A,below:h=A}=d||{},m=i.getDatasetMeta(s),p=WX(i,m);n&&a.points.length&&(X1(t,r),$qe(t,{line:a,target:n,above:f,below:h,area:r,scale:o,axis:l,clip:p}),Z1(t))}function $qe(t,e){const{line:r,target:n,above:i,below:s,area:a,scale:o,clip:l}=e,u=r._loop?"angle":e.axis;t.save();let d=s;s!==i&&(u==="x"?(j3(t,n,a.top),zC(t,{line:r,target:n,color:i,scale:o,property:u,clip:l}),t.restore(),t.save(),j3(t,n,a.bottom)):u==="y"&&(M3(t,n,a.left),zC(t,{line:r,target:n,color:s,scale:o,property:u,clip:l}),t.restore(),t.save(),M3(t,n,a.right),d=i)),zC(t,{line:r,target:n,color:d,scale:o,property:u,clip:l}),t.restore()}function j3(t,e,r){const{segments:n,points:i}=e;let s=!0,a=!1;t.beginPath();for(const o of n){const{start:l,end:u}=o,d=i[l],A=i[eE(l,u,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,r),t.lineTo(d.x,d.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(A.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function M3(t,e,r){const{segments:n,points:i}=e;let s=!0,a=!1;t.beginPath();for(const o of n){const{start:l,end:u}=o,d=i[l],A=i[eE(l,u,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(r,d.y),t.lineTo(d.x,d.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(r,A.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function zC(t,e){const{line:r,target:n,property:i,color:s,scale:a,clip:o}=e,l=Sqe(r,n,i);for(const{source:u,target:d,start:A,end:f}of l){const{style:{backgroundColor:h=s}={}}=u,m=n!==!0;t.save(),t.fillStyle=h,Qqe(t,a,o,m&&r2(i,A,f)),t.beginPath();const p=!!r.pathSegment(t,u);let g;if(m){p?t.closePath():D3(t,n,f,i);const x=!!n.pathSegment(t,d,{move:p,reverse:!0});g=p&&x,g||D3(t,n,A,i)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function Qqe(t,e,r,n){const i=e.chart.chartArea,{property:s,start:a,end:o}=n||{};if(s==="x"||s==="y"){let l,u,d,A;s==="x"?(l=a,u=i.top,d=o,A=i.bottom):(l=i.left,u=a,d=i.right,A=o),t.beginPath(),r&&(l=Math.max(l,r.left),d=Math.min(d,r.right),u=Math.max(u,r.top),A=Math.min(A,r.bottom)),t.rect(l,u,d-l,A-u),t.clip()}}function D3(t,e,r,n){const i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var Hqe={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,i=[];let s,a,o,l;for(a=0;a<n;++a)s=t.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof no&&(l={visible:t.isDatasetVisible(a),index:a,fill:Bqe(o,a,n),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,i.push(l);for(a=0;a<n;++a)l=i[a],!(!l||l.fill===!1)&&(l.fill=Tqe(i,a,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),n&&o.fill&&GC(t.ctx,o,s))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const s=n[i].$filler;L3(s)&&GC(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!L3(n)||r.drawTime!=="beforeDatasetDraw"||GC(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const O3=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},Kqe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class F3 extends hc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Yt(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=wn(n.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=O3(n,s);let u,d;r.font=i.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,s,o,l)+10):(d=this.maxHeight,u=this._fitCols(a,i,o,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],d=i+o;let A=e;s.textAlign="left",s.textBaseline="middle";let f=-1,h=-d;return this.legendItems.forEach((m,p)=>{const g=n+r/2+s.measureText(m.text).width;(p===0||u[u.length-1]+g+2*o>a)&&(A+=d,u[u.length-(p>0?0:1)]=0,h+=d,f++),l[p]={left:0,top:h,row:f,width:g,height:i},u[u.length-1]+=g+o}),A}_fitCols(e,r,n,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-e;let A=o,f=0,h=0,m=0,p=0;return this.legendItems.forEach((g,x)=>{const{itemWidth:v,itemHeight:y}=Vqe(n,r,s,g,i);x>0&&h+y+2*o>d&&(A+=f+o,u.push({width:f,height:h}),m+=f+o,p++,f=h=0),l[x]={left:m,top:h,col:p,width:v,height:y},f=Math.max(f,v),h+=y+o}),A+=f,u.push({width:f,height:h}),A}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:s}}=this,a=fA(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=mn(n,this.left+i,this.right-this.lineWidths[o]);for(const u of r)o!==u.row&&(o=u.row,l=mn(n,this.left+i,this.right-this.lineWidths[o])),u.top+=this.top+e+i,u.left=a.leftForLtr(a.x(l),u.width),l+=u.width+i}else{let o=0,l=mn(n,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const u of r)u.col!==o&&(o=u.col,l=mn(n,this.top+e+i,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+i,u.left=a.leftForLtr(a.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;X1(e,this),this._draw(),Z1(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:s,labels:a}=e,o=yr.color,l=fA(e.rtl,this.left,this.width),u=wn(a.font),{padding:d}=a,A=u.size,f=A/2;let h;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:m,boxHeight:p,itemHeight:g}=O3(a,A),x=function(S,C,T){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;i.save();const B=lt(T.lineWidth,1);if(i.fillStyle=lt(T.fillStyle,o),i.lineCap=lt(T.lineCap,"butt"),i.lineDashOffset=lt(T.lineDashOffset,0),i.lineJoin=lt(T.lineJoin,"miter"),i.lineWidth=B,i.strokeStyle=lt(T.strokeStyle,o),i.setLineDash(lt(T.lineDash,[])),a.usePointStyle){const _={radius:p*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:B},I=l.xPlus(S,m/2),L=C+f;jX(i,_,I,L,a.pointStyleWidth&&m)}else{const _=C+Math.max((A-p)/2,0),I=l.leftForLtr(S,m),L=AA(T.borderRadius);i.beginPath(),Object.values(L).some(N=>N!==0)?Mb(i,{x:I,y:_,w:m,h:p,radius:L}):i.rect(I,_,m,p),i.fill(),B!==0&&i.stroke()}i.restore()},v=function(S,C,T){Xm(i,T.text,S,C+g/2,u,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?h={x:mn(s,this.left+d,this.right-n[0]),y:this.top+d+w,line:0}:h={x:this.left+d,y:mn(s,this.top+w+d,this.bottom-r[0].height),line:0},HX(this.ctx,e.textDirection);const b=g+d;this.legendItems.forEach((S,C)=>{i.strokeStyle=S.fontColor,i.fillStyle=S.fontColor;const T=i.measureText(S.text).width,B=l.textAlign(S.textAlign||(S.textAlign=a.textAlign)),_=m+f+T;let I=h.x,L=h.y;l.setWidth(this.width),y?C>0&&I+_+d>this.right&&(L=h.y+=b,h.line++,I=h.x=mn(s,this.left+d,this.right-n[h.line])):C>0&&L+b>this.bottom&&(I=h.x=I+r[h.line].width+d,h.line++,L=h.y=mn(s,this.top+w+d,this.bottom-r[h.line].height));const N=l.x(I);if(x(N,L,S),I=N7e(B,I+m+f,y?I+_:this.right,e.rtl),v(l.x(I),L,S),y)h.x+=_+d;else if(typeof S.text!="string"){const R=u.lineHeight;h.y+=AZ(S,R)+d}else h.y+=b}),KX(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=wn(r.font),i=Xi(r.padding);if(!r.display)return;const s=fA(e.rtl,this.left,this.width),a=this.ctx,o=r.position,l=n.size/2,u=i.top+l;let d,A=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,A=mn(e.align,A,this.right-f);else{const m=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);d=u+mn(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const h=mn(o,A,A+f);a.textAlign=s.textAlign(rk(o)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=n.string,Xm(a,r.text,h,d,n)}_computeTitleHeight(){const e=this.options.title,r=wn(e.font),n=Xi(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,s;if(_l(e,this.left,this.right)&&_l(r,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],_l(e,i.left,i.left+i.width)&&_l(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!Wqe(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Kqe(i,n);i&&!s&&Yt(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!s&&Yt(r.onHover,[e,n,this],this)}else n&&Yt(r.onClick,[e,n,this],this)}}function Vqe(t,e,r,n,i){const s=Gqe(n,t,e,r),a=zqe(i,n,e.lineHeight);return{itemWidth:s,itemHeight:a}}function Gqe(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),e+r.size/2+n.measureText(i).width}function zqe(t,e,r){let n=t;return typeof e.text!="string"&&(n=AZ(e,r)),n}function AZ(t,e){const r=t.text?t.text.length:0;return e*r}function Wqe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var fZ={id:"legend",_element:F3,start(t,e,r){const n=t.legend=new F3({ctx:t.ctx,options:r,chart:t});Qi.configure(t,n,r),Qi.addBox(t,n)},stop(t){Qi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Qi.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(r?0:void 0),d=Xi(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:a&&(o||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class hZ extends hc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const i=Cr(n.text)?n.text.length:1;this._padding=Xi(n.padding);const s=i*wn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:i,right:s,options:a}=this,o=a.align;let l=0,u,d,A;return this.isHorizontal()?(d=mn(o,n,s),A=r+e,u=s-n):(a.position==="left"?(d=n+e,A=mn(o,i,r),l=Wr*-.5):(d=s-e,A=mn(o,r,i),l=Wr*.5),u=i-r),{titleX:d,titleY:A,maxWidth:u,rotation:l}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=wn(r.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(s);Xm(e,r.text,0,0,n,{color:r.color,maxWidth:l,rotation:u,textAlign:rk(r.align),textBaseline:"middle",translation:[a,o]})}}function Yqe(t,e){const r=new hZ({ctx:t.ctx,options:e,chart:t});Qi.configure(t,r,e),Qi.addBox(t,r),t.titleBlock=r}var pZ={id:"title",_element:hZ,start(t,e,r){Yqe(t,r)},stop(t){const e=t.titleBlock;Qi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Qi.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zh={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,s=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n.add(l.x),i+=l.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=t.length;s<a;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),d=qN(e,u);d<i&&(i=d,o=l)}}if(o){const l=o.tooltipPosition();r=l.x,n=l.y}return{x:r,y:n}}};function Vs(t,e){return e&&(Cr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ka(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qqe(t,e){const{element:r,datasetIndex:n,index:i}=e,s=t.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:t,label:a,parsed:s.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function U3(t,e){const r=t.chart.ctx,{body:n,footer:i,title:s}=t,{boxWidth:a,boxHeight:o}=e,l=wn(e.bodyFont),u=wn(e.titleFont),d=wn(e.footerFont),A=s.length,f=i.length,h=n.length,m=Xi(e.padding);let p=m.height,g=0,x=n.reduce((w,b)=>w+b.before.length+b.lines.length+b.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,A&&(p+=A*u.lineHeight+(A-1)*e.titleSpacing+e.titleMarginBottom),x){const w=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;p+=h*w+(x-h)*l.lineHeight+(x-1)*e.bodySpacing}f&&(p+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let v=0;const y=function(w){g=Math.max(g,r.measureText(w).width+v)};return r.save(),r.font=u.string,_t(t.title,y),r.font=l.string,_t(t.beforeBody.concat(t.afterBody),y),v=e.displayColors?a+2+e.boxPadding:0,_t(n,w=>{_t(w.before,y),_t(w.lines,y),_t(w.after,y)}),v=0,r.font=d.string,_t(t.footer,y),r.restore(),g+=m.width,{width:g,height:p}}function Xqe(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function Zqe(t,e,r,n){const{x:i,width:s}=n,a=r.caretSize+r.caretPadding;if(t==="left"&&i+s+a>e.width||t==="right"&&i-s-a<0)return!0}function Jqe(t,e,r,n){const{x:i,width:s}=r,{width:a,chartArea:{left:o,right:l}}=t;let u="center";return n==="center"?u=i<=(o+l)/2?"left":"right":i<=s/2?u="left":i>=a-s/2&&(u="right"),Zqe(u,t,e,r)&&(u="center"),u}function $3(t,e,r){const n=r.yAlign||e.yAlign||Xqe(t,r);return{xAlign:r.xAlign||e.xAlign||Jqe(t,e,r,n),yAlign:n}}function eXe(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function tXe(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function Q3(t,e,r,n){const{caretSize:i,caretPadding:s,cornerRadius:a}=t,{xAlign:o,yAlign:l}=r,u=i+s,{topLeft:d,topRight:A,bottomLeft:f,bottomRight:h}=AA(a);let m=eXe(e,o);const p=tXe(e,l,u);return l==="center"?o==="left"?m+=u:o==="right"&&(m-=u):o==="left"?m-=Math.max(d,f)+i:o==="right"&&(m+=Math.max(A,h)+i),{x:gi(m,0,n.width-e.width),y:gi(p,0,n.height-e.height)}}function bx(t,e,r){const n=Xi(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function H3(t){return Vs([],Ka(t))}function rXe(t,e,r){return Wu(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function K3(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const mZ={beforeTitle:Ua,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Ua,beforeBody:Ua,beforeLabel:Ua,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Tt(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Ua,afterBody:Ua,beforeFooter:Ua,footer:Ua,afterFooter:Ua};function $n(t,e,r,n){const i=t[e].call(r,n);return typeof i>"u"?mZ[e].call(r,n):i}class n2 extends hc{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,s=new YX(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=rXe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,i=$n(n,"beforeTitle",this,e),s=$n(n,"title",this,e),a=$n(n,"afterTitle",this,e);let o=[];return o=Vs(o,Ka(i)),o=Vs(o,Ka(s)),o=Vs(o,Ka(a)),o}getBeforeBody(e,r){return H3($n(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,i=[];return _t(e,s=>{const a={before:[],lines:[],after:[]},o=K3(n,s);Vs(a.before,Ka($n(o,"beforeLabel",this,s))),Vs(a.lines,$n(o,"label",this,s)),Vs(a.after,Ka($n(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(e,r){return H3($n(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,i=$n(n,"beforeFooter",this,e),s=$n(n,"footer",this,e),a=$n(n,"afterFooter",this,e);let o=[];return o=Vs(o,Ka(i)),o=Vs(o,Ka(s)),o=Vs(o,Ka(a)),o}_createItems(e){const r=this._active,n=this.chart.data,i=[],s=[],a=[];let o=[],l,u;for(l=0,u=r.length;l<u;++l)o.push(qqe(this.chart,r[l]));return e.filter&&(o=o.filter((d,A,f)=>e.filter(d,A,f,n))),e.itemSort&&(o=o.sort((d,A)=>e.itemSort(d,A,n))),_t(o,d=>{const A=K3(e.callbacks,d);i.push($n(A,"labelColor",this,d)),s.push($n(A,"labelPointStyle",this,d)),a.push($n(A,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,r){const n=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=zh[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const l=this._size=U3(this,n),u=Object.assign({},o,l),d=$3(this.chart,n,u),A=Q3(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:A.x,y:A.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){const s=this.getCaretPosition(e,n,i);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(e,r,n){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:A}=AA(o),{x:f,y:h}=e,{width:m,height:p}=r;let g,x,v,y,w,b;return s==="center"?(w=h+p/2,i==="left"?(g=f,x=g-a,y=w+a,b=w-a):(g=f+m,x=g+a,y=w-a,b=w+a),v=g):(i==="left"?x=f+Math.max(l,d)+a:i==="right"?x=f+m-Math.max(u,A)-a:x=this.caretX,s==="top"?(y=h,w=y-a,g=x-a,v=x+a):(y=h+p,w=y+a,g=x+a,v=x-a),b=y),{x1:g,x2:x,x3:v,y1:y,y2:w,y3:b}}drawTitle(e,r,n){const i=this.title,s=i.length;let a,o,l;if(s){const u=fA(n.rtl,this.x,this.width);for(e.x=bx(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",a=wn(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=a.string,l=0;l<s;++l)r.fillText(i[l],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===s&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,i,s){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=s,d=wn(s.bodyFont),A=bx(this,"left",s),f=i.x(A),h=l<d.lineHeight?(d.lineHeight-l)/2:0,m=r.y+h;if(s.usePointStyle){const p={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},g=i.leftForLtr(f,u)+u/2,x=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,ZN(e,p,g,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,ZN(e,p,g,x)}else{e.lineWidth=mt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const p=i.leftForLtr(f,u),g=i.leftForLtr(i.xPlus(f,1),u-2),x=AA(a.borderRadius);Object.values(x).some(v=>v!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Mb(e,{x:p,y:m,w:u,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Mb(e,{x:g,y:m+1,w:u-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(p,m,u,l),e.strokeRect(p,m,u,l),e.fillStyle=a.backgroundColor,e.fillRect(g,m+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:u,boxPadding:d}=n,A=wn(n.bodyFont);let f=A.lineHeight,h=0;const m=fA(n.rtl,this.x,this.width),p=function(T){r.fillText(T,m.x(e.x+h),e.y+f/2),e.y+=f+s},g=m.textAlign(a);let x,v,y,w,b,S,C;for(r.textAlign=a,r.textBaseline="middle",r.font=A.string,e.x=bx(this,g,n),r.fillStyle=n.bodyColor,_t(this.beforeBody,p),h=o&&g!=="right"?a==="center"?u/2+d:u+2+d:0,w=0,S=i.length;w<S;++w){for(x=i[w],v=this.labelTextColors[w],r.fillStyle=v,_t(x.before,p),y=x.lines,o&&y.length&&(this._drawColorBox(r,e,w,m,n),f=Math.max(A.lineHeight,l)),b=0,C=y.length;b<C;++b)p(y[b]),f=A.lineHeight;_t(x.after,p)}h=0,f=A.lineHeight,_t(this.afterBody,p),e.y-=s}drawFooter(e,r,n){const i=this.footer,s=i.length;let a,o;if(s){const l=fA(n.rtl,this.x,this.width);for(e.x=bx(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=l.textAlign(n.footerAlign),r.textBaseline="middle",a=wn(n.footerFont),r.fillStyle=n.footerColor,r.font=a.string,o=0;o<s;++o)r.fillText(i[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=e,{width:u,height:d}=n,{topLeft:A,topRight:f,bottomLeft:h,bottomRight:m}=AA(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(o+A,l),a==="top"&&this.drawCaret(e,r,n,i),r.lineTo(o+u-f,l),r.quadraticCurveTo(o+u,l,o+u,l+f),a==="center"&&s==="right"&&this.drawCaret(e,r,n,i),r.lineTo(o+u,l+d-m),r.quadraticCurveTo(o+u,l+d,o+u-m,l+d),a==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(o+h,l+d),r.quadraticCurveTo(o,l+d,o,l+d-h),a==="center"&&s==="left"&&this.drawCaret(e,r,n,i),r.lineTo(o,l+A),r.quadraticCurveTo(o,l,o+A,l),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const a=zh[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=U3(this,e),l=Object.assign({},a,this._size),u=$3(r,e,l),d=Q3(e,l,u,r);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=Xi(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,i,r),HX(e,r.textDirection),s.y+=a.top,this.drawTitle(s,e,r),this.drawBody(s,e,r),this.drawFooter(s,e,r),KX(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,i=e.map(({datasetIndex:o,index:l})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[l],index:l}}),s=!kb(n,i),a=this._positionChanged(i,r);(s||a)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(e,s,r,n),o=this._positionChanged(a,e),l=r||!kb(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,n,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,r){const{caretX:n,caretY:i,options:s}=this,a=zh[s.position].call(this,e,r);return a!==!1&&(n!==a.x||i!==a.y)}}ze(n2,"positioners",zh);var gZ={id:"tooltip",_element:n2,positioners:zh,afterInit(t,e,r){r&&(t.tooltip=new n2({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mZ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const nXe=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function iXe(t,e,r,n){const i=t.indexOf(e);if(i===-1)return nXe(t,e,r,n);const s=t.lastIndexOf(e);return i!==s?r:i}const sXe=(t,e)=>t===null?null:gi(Math.round(t),0,e);function V3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Fb extends Vf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:i,label:s}of r)n[i]===s&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Tt(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:iXe(n,e,lt(r,e),this._addedLabels),sXe(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=e===0&&r===s.length-1?s:s.slice(e,r+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=r;a++)i.push({value:a});return i}getLabelForValue(e){return V3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ze(Fb,"id","category"),ze(Fb,"defaults",{ticks:{callback:V3}});function aXe(t,e){const r=[],{bounds:i,step:s,min:a,max:o,precision:l,count:u,maxTicks:d,maxDigits:A,includeBounds:f}=t,h=s||1,m=d-1,{min:p,max:g}=e,x=!Tt(a),v=!Tt(o),y=!Tt(u),w=(g-p)/(A+1);let b=Q5((g-p)/m/h)*h,S,C,T,B;if(b<1e-14&&!x&&!v)return[{value:p},{value:g}];B=Math.ceil(g/b)-Math.floor(p/b),B>m&&(b=Q5(B*b/m/h)*h),Tt(l)||(S=Math.pow(10,l),b=Math.ceil(b*S)/S),i==="ticks"?(C=Math.floor(p/b)*b,T=Math.ceil(g/b)*b):(C=p,T=g),x&&v&&s&&v7e((o-a)/s,b/1e3)?(B=Math.round(Math.min((o-a)/b,d)),b=(o-a)/B,C=a,T=o):y?(C=x?a:C,T=v?o:T,B=u-1,b=(T-C)/B):(B=(T-C)/b,yp(B,Math.round(B),b/1e3)?B=Math.round(B):B=Math.ceil(B));const _=Math.max(H5(b),H5(C));S=Math.pow(10,Tt(l)?_:l),C=Math.round(C*S)/S,T=Math.round(T*S)/S;let I=0;for(x&&(f&&C!==a?(r.push({value:a}),C<a&&I++,yp(Math.round((C+I*b)*S)/S,a,G3(a,w,t))&&I++):C<a&&I++);I<B;++I){const L=Math.round((C+I*b)*S)/S;if(v&&L>o)break;r.push({value:L})}return v&&f&&T!==o?r.length&&yp(r[r.length-1].value,o,G3(o,w,t))?r[r.length-1].value=o:r.push({value:o}):(!v||T===o)&&r.push({value:T}),r}function G3(t,e,{horizontal:r,minRotation:n}){const i=Wc(n),s=(r?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}class oXe extends Vf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Tt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=r?i:l,o=l=>s=n?s:l;if(e){const l=xa(i),u=xa(s);l<0&&u<0?o(0):l>0&&u>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),e||a(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},s=this._range||this,a=aXe(i,s);return e.bounds==="ticks"&&y7e(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return RX(e,this.chart.options.locale,this.options.ticks.format)}}class Ub extends oXe{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Sn(e)?e:0,this.max=Sn(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Wc(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ze(Ub,"id","linear"),ze(Ub,"defaults",{ticks:{callback:LX.formatters.numeric}});const tE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vn=Object.keys(tE);function z3(t,e){return t-e}function W3(t,e){if(Tt(e))return null;const r=t._adapter,{parser:n,round:i,isoWeekday:s}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),Sn(a)||(a=typeof n=="string"?r.parse(a,n):r.parse(a)),a===null?null:(i&&(a=i==="week"&&(Ym(s)||s===!0)?r.startOf(a,"isoWeek",s):r.startOf(a,i)),+a)}function Y3(t,e,r,n){const i=Vn.length;for(let s=Vn.indexOf(t);s<i-1;++s){const a=tE[Vn[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(o*a.size))<=n)return Vn[s]}return Vn[i-1]}function lXe(t,e,r,n,i){for(let s=Vn.length-1;s>=Vn.indexOf(r);s--){const a=Vn[s];if(tE[a].common&&t._adapter.diff(i,n,a)>=e-1)return a}return Vn[r?Vn.indexOf(r):0]}function cXe(t){for(let e=Vn.indexOf(t)+1,r=Vn.length;e<r;++e)if(tE[Vn[e]].common)return Vn[e]}function q3(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:i}=tk(r,e),s=r[n]>=e?r[n]:r[i];t[s]=!0}}function uXe(t,e,r,n){const i=t._adapter,s=+i.startOf(e[0].value,n),a=e[e.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,n))l=r[o],l>=0&&(e[l].major=!0);return e}function X3(t,e,r){const n=[],i={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],i[o]=a,n.push({value:o,major:!1});return s===0||!r?n:uXe(t,n,i,r)}class $b extends Vf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),i=this._adapter=new tYe._date(e.adapters.date);i.init(r),vp(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:W3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!o&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Sn(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),s=Sn(s)&&!isNaN(s)?s:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=T7e(i,s,a);return this._unit=r.unit||(n.autoSkip?Y3(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):lXe(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:cXe(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),X3(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?n=s:n=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=gi(r,0,a),n=gi(n,0,a),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,i=this.options,s=i.time,a=s.unit||Y3(s.minUnit,r,n,this._getLabelCapacity(r)),o=lt(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=Ym(l)||l===!0,d={};let A=r,f,h;if(u&&(A=+e.startOf(A,"isoWeek",l)),A=+e.startOf(A,u?"day":a),e.diff(n,r,a)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+a);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=A,h=0;f<n;f=+e.add(f,o,a),h++)q3(d,f,m);return(f===n||i.bounds==="ticks"||h===1)&&q3(d,f,m),Object.keys(d).sort(z3).map(p=>+p)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const i=this.options.time.displayFormats,s=this._unit,a=r||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,r,n,i){const s=this.options,a=s.ticks.callback;if(a)return Yt(a,[e,r,n],this);const o=s.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&o[l],A=u&&o[u],f=n[r],h=u&&A&&f&&f.major;return this._adapter.format(e,i||(h?A:d))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,i=Wc(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*a,h:n*a+o*s}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,s=this._tickFormatFunction(e,0,X3(this,[e],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(W3(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return NX(e.sort(z3))}}ze($b,"id","time"),ze($b,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wx(t,e,r){let n=0,i=t.length-1,s,a,o,l;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=Yc(t,"pos",e)),{pos:s,time:o}=t[n],{pos:a,time:l}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=Yc(t,"time",e)),{time:s,pos:o}=t[n],{time:a,pos:l}=t[i]);const u=a-s;return u?o+(l-o)*(e-s)/u:o}class Z3 extends $b{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=wx(r,this.min),this._tableRange=wx(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,i=[],s=[];let a,o,l,u,d;for(a=0,o=e.length;a<o;++a)u=e[a],u>=r&&u<=n&&i.push(u);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(a=0,o=i.length;a<o;++a)d=i[a+1],l=i[a-1],u=i[a],Math.round((d+l)/2)!==u&&s.push({time:u,pos:a/(o-1)});return s}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(wx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return wx(this._table,n*this._tableRange+this._minPos,!0)}}ze(Z3,"id","timeseries"),ze(Z3,"defaults",$b.defaults);const xZ="label";function J3(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function dXe(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function vZ(t,e){t.labels=e}function yZ(t,e,r=xZ){const n=[];t.datasets=e.map(i=>{const s=t.datasets.find(a=>a[r]===i[r]);return!s||!i.data||n.includes(s)?{...i}:(n.push(s),Object.assign(s,i),s)})}function AXe(t,e=xZ){const r={labels:[],datasets:[]};return vZ(r,t.labels),yZ(r,t.datasets,e),r}function fXe(t,e){const{height:r=150,width:n=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:u=[],fallbackContent:d,updateMode:A,...f}=t,h=E.useRef(null),m=E.useRef(null),p=()=>{h.current&&(m.current=new Ig(h.current,{type:a,data:AXe(o,s),options:l&&{...l},plugins:u}),J3(e,m.current))},g=()=>{J3(e,null),m.current&&(m.current.destroy(),m.current=null)};return E.useEffect(()=>{!i&&m.current&&l&&dXe(m.current,l)},[i,l]),E.useEffect(()=>{!i&&m.current&&vZ(m.current.config.data,o.labels)},[i,o.labels]),E.useEffect(()=>{!i&&m.current&&o.datasets&&yZ(m.current.config.data,o.datasets,s)},[i,o.datasets]),E.useEffect(()=>{m.current&&(i?(g(),setTimeout(p)):m.current.update(A))},[i,l,o.labels,o.datasets,A]),E.useEffect(()=>{m.current&&(g(),setTimeout(p))},[a]),E.useEffect(()=>(p(),()=>g()),[]),c.jsx("canvas",{ref:h,role:"img",height:r,width:n,...f,children:d})}const hXe=E.forwardRef(fXe);function bZ(t,e){return Ig.register(e),E.forwardRef((r,n)=>c.jsx(hXe,{...r,ref:n,type:t}))}const wZ=bZ("line",fv),pXe=bZ("bar",Av);Ig.register(Fb,Ub,mv,pZ,gZ,fZ,Ep,no,Hqe);function Ks({title:t,value:e,sub:r}){return c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[c.jsx("div",{className:"mb-2 text-[10px] font-bold uppercase tracking-wider text-slate-500",children:t}),c.jsx("div",{className:"mb-1 text-2xl font-extrabold text-slate-900",children:e}),c.jsx("div",{className:"text-[11px] text-slate-400",children:r})]})}const Go=t=>Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(0)+"k":t.toFixed(0),Ex=t=>t.toFixed(1)+"%";function e$(){const{metrics:t,kpi:e}=Lo(),{y5:r,years:n,cashFlow:i}=t,s={labels:n.map(d=>`Y${d.year}`),datasets:[{label:"ARR",data:n.map(d=>d.arr/1e3),backgroundColor:"#10b981",stack:"revenue"},{label:"Personnel",data:n.map(d=>d.personnel/1e3),backgroundColor:"#ef4444",stack:"costs"},{label:"Other OpEx",data:n.map(d=>(d.totalCosts-d.personnel)/1e3),backgroundColor:"#f59e0b",stack:"costs"}]},a={labels:i.map(d=>`Y${d.year}`),datasets:[{label:"Cumulative Cash",data:i.map(d=>d.cumulativeCash/1e3),borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.1)",fill:!0,tension:.4}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}};let l="bg-green-100 text-green-800",u=` PROFITABLE: Y5 net income of ${Go(r.netIncome)} DZD with ${Ex(r.margin)} margin. Strong unit economics support expansion.`;return t.minCash<0?(l="bg-red-100 text-red-800",u=` CASH DEFICIT: Minimum cash balance reaches ${Go(t.minCash)} DZD. Additional funding required before Phase 1 completion.`):r.netIncome<0&&(l="bg-amber-100 text-amber-800",u=` VALIDATION PHASE: Y5 net loss of ${Go(Math.abs(r.netIncome))} DZD. Phase 1 serves as market validation. Series A expansion to Maghreb essential for profitability.`),c.jsxs("div",{className:"mx-auto w-[210mm] min-h-[297mm] bg-white p-[20mm] shadow-lg rounded-lg",children:[c.jsx("h2",{className:"mb-2 text-2xl font-bold text-slate-900",children:"Executive Dashboard"}),c.jsxs("p",{className:"mb-6 text-sm text-slate-500",children:["Live 5-year projection engine. ",c.jsx("span",{className:"text-blue-600 font-medium",children:"Tip: Use the sidebar to update the model."})]}),c.jsx("div",{className:`mb-6 rounded-lg p-4 text-sm font-medium ${l}`,children:u}),c.jsx("h3",{className:"mb-4 mt-8 border-b-2 border-slate-200 pb-2 text-lg font-bold text-slate-900",children:"Key Performance Indicators (Year 5)"}),c.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-8",children:[c.jsx(Ks,{title:"ARR",value:Go(r.arr),sub:"DZD Annual Recurring"}),c.jsx(Ks,{title:"Active Clients",value:r.activeClients.toFixed(1),sub:"After churn"}),c.jsx(Ks,{title:"Net Margin",value:Ex(r.margin),sub:"EBITDA margin"}),c.jsx(Ks,{title:"LTV/CAC",value:t.ltv_cac.toFixed(1),sub:"Unit economics"}),c.jsx(Ks,{title:"Cash Position",value:Go(t.minCash),sub:"Minimum runway"})]}),c.jsx("h3",{className:"mb-4 mt-8 border-b-2 border-slate-200 pb-2 text-lg font-bold text-slate-900",children:"5-Year Revenue & Cost Projection"}),c.jsx("div",{className:"h-[300px] w-full mb-8",children:c.jsx(pXe,{data:s,options:o})}),c.jsx("h3",{className:"mb-4 mt-8 border-b-2 border-slate-200 pb-2 text-lg font-bold text-slate-900",children:"Cash Flow Evolution"}),c.jsx("div",{className:"h-[300px] w-full mb-8",children:c.jsx(wZ,{data:a,options:o})}),c.jsx("h3",{className:"mb-4 mt-8 border-b-2 border-slate-200 pb-2 text-lg font-bold text-slate-900",children:"Market Penetration Progress"}),c.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[c.jsx(Ks,{title:"TAM",value:Go(t.tam),sub:"Total addressable"}),c.jsx(Ks,{title:"SAM",value:Go(t.sam),sub:"Serviceable addressable"}),c.jsx(Ks,{title:"SOM",value:Go(t.som),sub:"Serviceable obtainable"}),c.jsx(Ks,{title:"Penetration",value:Ex(r.arr/t.tam*100),sub:"Of TAM"}),c.jsx(Ks,{title:"Market Share",value:Ex(r.activeClients/e.marketSegments.reduce((d,A)=>d+A.count,0)*100),sub:"Target segment"})]})]})}function Je({value:t,kpiKey:e,onChange:r,suffix:n="",className:i,type:s="number"}){const{updateKPI:a}=Lo(),[o,l]=E.useState(!1),[u,d]=E.useState(t),A=E.useRef(null);E.useEffect(()=>{d(t)},[t]),E.useEffect(()=>{o&&A.current&&A.current.focus()},[o]);const f=()=>{l(!1),String(u)!==String(t)&&(r?r(u):e&&a(e,u))},h=m=>{m.key==="Enter"&&f()};return o?c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{ref:A,type:"text",value:u,onChange:m=>d(m.target.value),onBlur:f,onKeyDown:h,className:Z("w-full min-w-[60px] rounded-sm border border-blue-500 bg-blue-50 px-1 py-0.5 text-right font-medium text-blue-700 outline-none",i)}),n&&c.jsx("span",{className:"ml-1 text-slate-400",children:n})]}):c.jsxs("div",{onClick:()=>(e||r)&&l(!0),className:Z("cursor-pointer border-b border-dashed border-slate-400 px-1 py-0.5 text-right transition-colors hover:bg-blue-50 hover:border-blue-500",e?"text-blue-600 font-medium":"text-slate-800 cursor-default border-transparent",i),children:[t,n]})}Ig.register(Fb,Ub,Ep,no,pZ,gZ,fZ);function mXe({isOpen:t,onClose:e,segment:r,kpi:n}){if(!r)return null;const i=r.constituents&&r.constituents.length>0?r.constituents:Array.from({length:r.count}).map((d,A)=>({id:`gen-${A}`,name:`${r.name} - Organization ${A+1}`,tier:"Standard",revenue:r.price,status:"Prospect"})),s=[1,2,3,4,5],a=r.count*(r.penRate/100),o=s.map(d=>{const A=d/5,f=Math.ceil(a*A),h=f*r.price;return{year:d,clients:f,revenue:h}}),l={labels:["Y1","Y2","Y3","Y4","Y5"],datasets:[{label:"Projected Revenue (DZD)",data:o.map(d=>d.revenue),borderColor:"rgb(37, 99, 235)",backgroundColor:"rgba(37, 99, 235, 0.5)"}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}}};return c.jsx(Ba,{open:t,onOpenChange:e,children:c.jsxs(Rs,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[c.jsxs(ks,{children:[c.jsxs(Ls,{className:"text-2xl font-bold flex items-center gap-2",children:[" Granular Data: ",c.jsx("span",{className:"text-blue-600",children:r.name})]}),c.jsxs(Nf,{children:["Detailed breakdown of the ",r.count," organizations in this segment."]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[c.jsxs("div",{className:"md:col-span-2 space-y-4",children:[c.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:["Entity List ",c.jsxs("span",{className:"text-xs font-normal text-slate-500",children:["(",i.length," rows)"]})]}),c.jsx("div",{className:"border rounded-lg overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500 font-medium border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3",children:"Entity Name"}),c.jsx("th",{className:"p-3",children:"Status"}),c.jsx("th",{className:"p-3 text-right",children:"Potential ARPU"})]})}),c.jsx("tbody",{className:"divide-y",children:i.map(d=>c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"p-3 font-medium text-slate-900",children:d.name}),c.jsx("td",{className:"p-3",children:c.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${d.status==="Active"?"bg-green-100 text-green-700":d.status==="Lead"?"bg-blue-100 text-blue-700":d.status==="Prospect"?"bg-slate-100 text-slate-600":"bg-red-50 text-red-600"}`,children:d.status})}),c.jsx("td",{className:"p-3 text-right font-mono text-slate-600",children:d.revenue.toLocaleString()})]},d.id))}),c.jsx("tfoot",{className:"bg-slate-50 font-bold border-t",children:c.jsxs("tr",{children:[c.jsx("td",{className:"p-3",colSpan:2,children:"TOTAL SEGMENT POTENTIAL"}),c.jsxs("td",{className:"p-3 text-right text-blue-600",children:[(r.count*r.price).toLocaleString()," DZD"]})]})})]})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[c.jsx("h4",{className:"font-bold text-blue-800 text-sm mb-3 uppercase tracking-wider",children:"Market Summary"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-blue-600 font-bold",children:"TARGET PENETRATION"}),c.jsxs("div",{className:"text-xl font-black text-blue-900",children:[r.penRate,"%"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-blue-600 font-bold",children:"SOM TARGET (Y5)"}),c.jsxs("div",{className:"text-xl font-black text-blue-900",children:[(r.count*r.price*r.penRate/100).toLocaleString()," DZD"]})]})]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[c.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 uppercase tracking-wider",children:"Growth Simulation"}),c.jsx("div",{className:"h-[150px] w-full",children:c.jsx(wZ,{data:l,options:u})}),c.jsx("div",{className:"mt-4 space-y-2",children:o.map(d=>c.jsxs("div",{className:"flex justify-between text-xs border-b border-slate-100 pb-1",children:[c.jsxs("span",{className:"text-slate-500 font-medium",children:["Year ",d.year]}),c.jsx("span",{className:"font-bold text-slate-700",children:d.revenue.toLocaleString()})]},d.year))})]})]})]})]})})}function gXe({isOpen:t,onClose:e,competitor:r}){return r?c.jsx(Ba,{open:t,onOpenChange:e,children:c.jsxs(Rs,{className:"max-w-md",children:[c.jsx(ks,{children:c.jsx(Ls,{className:"text-xl font-bold flex items-center gap-2",children:" Competitor Intelligence"})}),c.jsxs("div",{className:"mt-4 space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-900 text-white rounded-lg shadow-md",children:[c.jsx("div",{className:"text-sm text-slate-400 uppercase font-bold text-center mb-1",children:"Competitor Name"}),c.jsx("div",{className:"text-2xl font-bold text-center text-blue-400",children:r.name})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 rounded",children:[c.jsx("div",{className:"text-xs text-red-600 font-bold uppercase mb-1",children:"Threat Level"}),c.jsx("div",{className:"font-bold text-red-800",children:r.threat})]}),c.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 rounded",children:[c.jsx("div",{className:"text-xs text-red-600 font-bold uppercase mb-1",children:"Their Strength"}),c.jsx("div",{className:"text-sm text-red-800 leading-tight",children:r.strength})]})]}),c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("div",{className:"text-xs text-green-700 font-bold uppercase mb-2",children:"Our Winning Advantage"}),c.jsx("div",{className:"font-medium text-green-900",children:r.advantage})]})]})]})}):null}function xXe({isOpen:t,onClose:e,risk:r}){if(!r)return null;const n=r.prob*r.impactLevel/100,i=n>2.5?"bg-red-500":n>1.5?"bg-orange-500":"bg-yellow-500",s=n>2.5?"Critical":n>1.5?"High":"Moderate";return c.jsx(Ba,{open:t,onOpenChange:e,children:c.jsxs(Rs,{className:"max-w-lg",children:[c.jsx(ks,{children:c.jsxs(Ls,{className:"text-xl font-bold flex items-center gap-2",children:[" Risk Analysis: ",c.jsx("span",{className:"text-red-600",children:r.name})]})}),c.jsxs("div",{className:"space-y-6 mt-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 rounded border border-slate-200",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold",children:"Probability"}),c.jsxs("div",{className:"text-3xl font-bold text-slate-800",children:[r.prob,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 h-2 rounded-full mt-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r.prob}%`}})})]}),c.jsxs("div",{className:"p-4 bg-slate-50 rounded border border-slate-200",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold",children:"Impact Level"}),c.jsxs("div",{className:"text-3xl font-bold text-slate-800",children:[r.impactLevel,c.jsx("span",{className:"text-sm text-slate-400",children:"/10"})]}),c.jsx("div",{className:"w-full bg-slate-200 h-2 rounded-full mt-2",children:c.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${r.impactLevel*10}%`}})})]})]}),c.jsxs("div",{className:"p-6 bg-slate-100 rounded-lg flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-bold text-slate-500",children:"CALCULATED RISK SCORE"}),c.jsx("div",{className:"text-4xl font-black text-slate-900",children:n.toFixed(1)})]}),c.jsxs("div",{className:`px-4 py-2 rounded text-white font-bold ${i}`,children:[s," Risk"]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Mitigation Strategy"}),c.jsxs("div",{className:"p-4 border border-green-200 bg-green-50 rounded text-green-800",children:['" ',r.mitigation,' "']})]})]})]})})}function vXe({isOpen:t,onClose:e,stage:r,targetCount:n}){if(!r)return null;const i=Array.from({length:Math.min(n,20)}).map((s,a)=>{const o=["ES Setif","MC Alger","JS Kabylie","CR Belouizdad","USM Alger","CS Constantine","MC Oran","JS Saoura","ASO Chlef","US Biskra"],l=["Ahmed Z.","Mohamed K.","Yassine B.","Karim H.","Omar F.","Said M.","Amine T.","Rachid S.","Walid G.","Hamza L."];return{id:`funnel-${a}`,company:o[a%o.length]+(a>=o.length?` (${Math.floor(a/o.length)+1})`:""),contact:l[a%l.length],value:15e4+Math.random()*1e5,probability:r==="Lead Generation"?10:r==="Demo/Discovery"?30:60,date:new Date(Date.now()+Math.random()*90*24*60*60*1e3).toLocaleDateString()}});return c.jsx(Ba,{open:t,onOpenChange:e,children:c.jsxs(Rs,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[c.jsxs(ks,{children:[c.jsxs(Ls,{className:"text-xl font-bold flex items-center gap-2",children:[" Funnel Drilldown: ",c.jsx("span",{className:"text-blue-600",children:r})]}),c.jsxs(Nf,{children:["Showing top ",i.length," active ",r.toLowerCase()," entities (Target: ",n,")."]})]}),c.jsx("div",{className:"mt-4 border rounded-md overflow-hidden",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500 font-medium border-b sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3",children:"Company / Org"}),c.jsx("th",{className:"p-3",children:"Primary Contact"}),c.jsx("th",{className:"p-3 text-right",children:"Deal Value"}),c.jsx("th",{className:"p-3 text-right",children:"Probability"}),c.jsx("th",{className:"p-3 text-right",children:"Est. Close"})]})}),c.jsx("tbody",{className:"divide-y",children:i.map(s=>c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"p-3 font-medium text-slate-900",children:s.company}),c.jsx("td",{className:"p-3 text-slate-600",children:s.contact}),c.jsxs("td",{className:"p-3 text-right font-mono text-slate-700",children:[s.value.toLocaleString(void 0,{maximumFractionDigits:0})," DZD"]}),c.jsx("td",{className:"p-3 text-right",children:c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx("div",{className:"w-16 bg-slate-100 rounded-full h-1.5 overflow-hidden",children:c.jsx("div",{className:"bg-blue-500 h-full",style:{width:`${s.probability}%`}})}),c.jsxs("span",{className:"text-xs font-bold",children:[s.probability,"%"]})]})}),c.jsx("td",{className:"p-3 text-right text-slate-500",children:s.date})]},s.id))}),c.jsx("tfoot",{className:"bg-slate-50 font-bold border-t",children:c.jsxs("tr",{children:[c.jsx("td",{className:"p-3",colSpan:2,children:"PIPELINE VALUE (Top 20)"}),c.jsxs("td",{className:"p-3 text-right text-blue-600",children:[i.reduce((s,a)=>s+a.value,0).toLocaleString(void 0,{maximumFractionDigits:0})," DZD"]}),c.jsx("td",{colSpan:2})]})})]})})]})})}const Sx=t=>Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(0)+"k":t.toFixed(0);function yXe(){const{kpi:t,metrics:e,updateKPI:r}=Lo(),{tam:n,sam:i,som:s}=e,[a,o]=E.useState(null),[l,u]=E.useState(null),[d,A]=E.useState(null),[f,h]=E.useState(null),[m,p]=E.useState(0),g=(t.g_y1+t.g_y2)/2,x=t.s_lead*t.s_demo*t.s_poc/1e4/100,v=g/x,y=(N,R,M)=>{const k=t.marketSegments.map(O=>O.id===N?{...O,[R]:Number(M)||M}:O);r("marketSegments",k)},w=()=>{const N=(Math.max(0,...t.marketSegments.map(M=>Number(M.id)))+1).toString(),R=[...t.marketSegments,{id:N,name:"New Segment",count:10,price:5e4,penRate:10}];r("marketSegments",R)},b=N=>{const R=t.marketSegments.filter(M=>M.id!==N);r("marketSegments",R)},S=t.marketSegments.reduce((N,R)=>N+R.count,0),C=(N,R,M)=>{const k=t.competitors.map(O=>O.id===N?{...O,[R]:M}:O);r("competitors",k)},T=()=>{const N=(Math.max(0,...t.competitors.map(M=>Number(M.id)))+1).toString(),R=[...t.competitors,{id:N,name:"New Competitor",threat:"Med",strength:"Strength",advantage:"Our Advantage"}];r("competitors",R)},B=N=>{r("competitors",t.competitors.filter(R=>R.id!==N))},_=(N,R,M)=>{const k=t.risks.map(O=>O.id===N?{...O,[R]:R==="prob"||R==="impactLevel"?Number(M):M}:O);r("risks",k)},I=()=>{const N=(Math.max(0,...t.risks.map(M=>Number(M.id)))+1).toString(),R=[...t.risks,{id:N,name:"New Risk",prob:30,impactLevel:2,impact:"Medium",score:.6,mitigation:"Mitigation plan"}];r("risks",R)},L=N=>{r("risks",t.risks.filter(R=>R.id!==N))};return c.jsxs("div",{className:"mx-auto w-[210mm] min-h-[297mm] bg-white p-[20mm] shadow-lg rounded-lg space-y-8 relative",children:[c.jsx(mXe,{isOpen:!!a,onClose:()=>o(null),segment:a,kpi:t}),c.jsx(gXe,{isOpen:!!l,onClose:()=>u(null),competitor:l}),c.jsx(xXe,{isOpen:!!d,onClose:()=>A(null),risk:d}),c.jsx(vXe,{isOpen:!!f,onClose:()=>h(null),stage:f,targetCount:m}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Market Analysis & Segmentation"}),c.jsx("div",{className:"mt-2 rounded bg-blue-50 p-2 text-xs text-blue-700 flex justify-between items-center",children:c.jsxs("span",{children:[" All blue underlined values are editable. Click ",c.jsx(Wo,{size:12,className:"inline"})," to view simulation details."]})})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2 flex justify-between items-center",children:[c.jsx("span",{children:"Market Structure"}),c.jsxs("button",{onClick:w,className:"flex items-center gap-1 text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:[c.jsx(Hx,{size:12})," Add Segment"]})]}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Segment"}),c.jsx("th",{className:"p-2 text-right",children:"Organizations"}),c.jsx("th",{className:"p-2 text-right",children:"ARPU (DZD/y)"}),c.jsx("th",{className:"p-2 text-right",children:"TAM Contrib"}),c.jsx("th",{className:"p-2 text-right",children:"Target Pen."}),c.jsx("th",{className:"p-2 text-right",children:"SOM Target"}),c.jsx("th",{className:"p-2 w-16 text-center",children:"Actions"})]})}),c.jsxs("tbody",{children:[t.marketSegments.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 group",children:[c.jsx("td",{className:"p-2 font-medium",children:c.jsx(Je,{value:N.name,onChange:R=>y(N.id,"name",R),type:"text"})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:N.count,onChange:R=>y(N.id,"count",R)})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:N.price,onChange:R=>y(N.id,"price",R)})}),c.jsx("td",{className:"p-2 text-right text-slate-500",children:Sx(N.count*N.price)}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:N.penRate,onChange:R=>y(N.id,"penRate",R),suffix:"%"})}),c.jsx("td",{className:"p-2 text-right font-medium",children:Sx(N.count*N.price*(N.penRate/100))}),c.jsxs("td",{className:"p-2 text-center flex items-center justify-center gap-2",children:[c.jsx("button",{onClick:()=>o(N),className:"text-blue-400 hover:text-blue-600",title:"View Simulation",children:c.jsx(Wo,{size:14})}),c.jsx("button",{onClick:()=>b(N.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete",children:c.jsx(iu,{size:14})})]})]},N.id)),c.jsxs("tr",{className:"bg-slate-50 font-bold border-t-2 border-slate-200",children:[c.jsx("td",{className:"p-2",children:"TOTAL"}),c.jsx("td",{className:"p-2 text-right",children:S}),c.jsx("td",{className:"p-2 text-right",children:"-"}),c.jsx("td",{className:"p-2 text-right",children:Sx(n)}),c.jsx("td",{className:"p-2 text-right",children:"-"}),c.jsx("td",{className:"p-2 text-right",children:Sx(s)}),c.jsx("td",{})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Customer Acquisition Funnel"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Stage"}),c.jsx("th",{className:"p-2 text-right",children:"Conversion Rate"}),c.jsx("th",{className:"p-2 text-right",children:"Average Time"}),c.jsx("th",{className:"p-2 text-right",children:"Annual Target"}),c.jsx("th",{className:"p-2 w-16 text-center",children:"Actions"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Lead Generation"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.s_lead,kpiKey:"s_lead",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.s_lead_time,kpiKey:"s_lead_time",type:"text"})}),c.jsxs("td",{className:"p-2 text-right",children:[Math.ceil(v),"+ leads"]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{onClick:()=>{h("Lead Generation"),p(Math.ceil(v))},className:"text-blue-400 hover:text-blue-600",title:"View Leads",children:c.jsx(Wo,{size:14})})})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Demo/Discovery"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.s_demo,kpiKey:"s_demo",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.s_demo_time,kpiKey:"s_demo_time",type:"text"})}),c.jsxs("td",{className:"p-2 text-right",children:[Math.ceil(v*t.s_lead/100),"+ demos"]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{onClick:()=>{h("Demo/Discovery"),p(Math.ceil(v*t.s_lead/100))},className:"text-blue-400 hover:text-blue-600",title:"View Demos",children:c.jsx(Wo,{size:14})})})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"POC/Pilot"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.s_poc,kpiKey:"s_poc",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.s_poc_time,kpiKey:"s_poc_time",type:"text"})}),c.jsxs("td",{className:"p-2 text-right",children:[Math.ceil(v*t.s_lead/100*t.s_demo/100),"+ POCs"]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{onClick:()=>{h("POC/Pilot"),p(Math.ceil(v*t.s_lead/100*t.s_demo/100))},className:"text-blue-400 hover:text-blue-600",title:"View POCs",children:c.jsx(Wo,{size:14})})})]}),c.jsxs("tr",{className:"bg-green-50",children:[c.jsx("td",{className:"p-2 font-bold text-green-700",children:"Paid Customer"}),c.jsxs("td",{className:"p-2 text-right font-bold text-green-700",children:[(x*100).toFixed(1),"%"]}),c.jsx("td",{className:"p-2 text-right text-green-700",children:"Contract signed"}),c.jsxs("td",{className:"p-2 text-right font-bold text-green-700",children:[g.toFixed(1)," clients"]}),c.jsx("td",{})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2 flex justify-between items-center",children:[c.jsx("span",{children:"Competitive Positioning"}),c.jsxs("button",{onClick:T,className:"flex items-center gap-1 text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:[c.jsx(Hx,{size:12})," Add"]})]}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Competitor"}),c.jsx("th",{className:"p-2 text-left",children:"Threat Level"}),c.jsx("th",{className:"p-2 text-left",children:"Key Strength"}),c.jsx("th",{className:"p-2 text-left",children:"Our Advantage"}),c.jsx("th",{className:"p-2 w-16 text-center",children:"Actions"})]})}),c.jsx("tbody",{children:t.competitors.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 group",children:[c.jsx("td",{className:"p-2 font-medium",children:c.jsx(Je,{value:N.name,onChange:R=>C(N.id,"name",R),type:"text"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:N.threat,onChange:R=>C(N.id,"threat",R),type:"text"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:N.strength,onChange:R=>C(N.id,"strength",R),type:"text"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:N.advantage,onChange:R=>C(N.id,"advantage",R),type:"text"})}),c.jsxs("td",{className:"p-2 text-center flex items-center justify-center gap-2",children:[c.jsx("button",{onClick:()=>u(N),className:"text-blue-400 hover:text-blue-600",title:"View Details",children:c.jsx(Wo,{size:14})}),c.jsx("button",{onClick:()=>B(N.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(iu,{size:14})})]})]},N.id))})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2 flex justify-between items-center",children:[c.jsx("span",{children:"Risk Assessment Matrix"}),c.jsxs("button",{onClick:I,className:"flex items-center gap-1 text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:[c.jsx(Hx,{size:12})," Add"]})]}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Risk Factor"}),c.jsx("th",{className:"p-2 text-right",children:"Probability"}),c.jsx("th",{className:"p-2 text-left",children:"Impact Level"}),c.jsx("th",{className:"p-2 text-left",children:"Risk Score"}),c.jsx("th",{className:"p-2 text-left",children:"Mitigation"}),c.jsx("th",{className:"p-2 w-16 text-center",children:"Actions"})]})}),c.jsx("tbody",{children:t.risks.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 group",children:[c.jsx("td",{className:"p-2 font-medium",children:c.jsx(Je,{value:N.name,onChange:R=>_(N.id,"name",R),type:"text"})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:N.prob,onChange:R=>_(N.id,"prob",R),suffix:"%"})}),c.jsx("td",{className:"p-2 text-center",children:c.jsx(Je,{value:N.impactLevel,onChange:R=>_(N.id,"impactLevel",R),suffix:"/10"})}),c.jsx("td",{className:"p-2 font-bold",children:(N.prob*N.impactLevel/100).toFixed(1)}),c.jsx("td",{className:"p-2 text-xs text-slate-500",children:c.jsx(Je,{value:N.mitigation,onChange:R=>_(N.id,"mitigation",R),type:"text"})}),c.jsxs("td",{className:"p-2 text-center flex items-center justify-center gap-2",children:[c.jsx("button",{onClick:()=>A(N),className:"text-blue-400 hover:text-blue-600",title:"View Risk Analysis",children:c.jsx(Wo,{size:14})}),c.jsx("button",{onClick:()=>L(N.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(iu,{size:14})})]})]},N.id))})]})]})]})}const Gt=t=>Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(0)+"k":t.toFixed(0);function bXe(){const{kpi:t,metrics:e}=Lo(),{years:r,cashFlow:n,y5:i,breakEvenClients:s,breakEvenARR:a}=e;return c.jsxs("div",{className:"mx-auto w-[210mm] min-h-[297mm] bg-white p-[20mm] shadow-lg rounded-lg space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Financial Projections & P&L"}),c.jsxs("div",{className:"mt-2 rounded bg-amber-50 p-3 text-sm text-amber-900 border border-amber-200",children:[c.jsx("strong",{children:" Break-Even Analysis:"})," Break-even requires ",c.jsxs("strong",{children:[s.toFixed(0)," clients"]})," generating ",c.jsxs("strong",{children:[Gt(a)," DZD ARR"]}),". Phase 1 TAM limitation makes standalone profitability challenging. Phase 2 expansion essential for long-term viability."]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"5-Year P&L Statement (Projections)"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Year"}),c.jsx("th",{className:"p-2 text-right",children:"Clients"}),c.jsx("th",{className:"p-2 text-right",children:"ARR"}),c.jsx("th",{className:"p-2 text-right",children:"Personnel"}),c.jsx("th",{className:"p-2 text-right",children:"Other OpEx"}),c.jsx("th",{className:"p-2 text-right",children:"EBITDA"}),c.jsx("th",{className:"p-2 text-right",children:"Tax"}),c.jsx("th",{className:"p-2 text-right",children:"Net Income"})]})}),c.jsx("tbody",{children:r.map(o=>c.jsxs("tr",{children:[c.jsxs("td",{className:"p-2 font-bold text-slate-700",children:["Y",o.year]}),c.jsx("td",{className:"p-2 text-right",children:o.activeClients.toFixed(1)}),c.jsx("td",{className:"p-2 text-right font-medium",children:Gt(o.arr)}),c.jsx("td",{className:"p-2 text-right text-slate-500",children:Gt(o.personnel)}),c.jsx("td",{className:"p-2 text-right text-slate-500",children:Gt(o.infrastructure+o.marketing+o.operations)}),c.jsx("td",{className:"p-2 text-right font-medium",children:Gt(o.ebitda)}),c.jsx("td",{className:"p-2 text-right text-slate-400",children:Gt(o.tax)}),c.jsx("td",{className:`p-2 text-right font-bold ${o.netIncome>0?"text-green-600":"text-red-500"}`,children:Gt(o.netIncome)})]},o.year))})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Cash Flow Analysis"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Year"}),c.jsx("th",{className:"p-2 text-right",children:"Cash In"}),c.jsx("th",{className:"p-2 text-right",children:"Cash Out"}),c.jsx("th",{className:"p-2 text-right",children:"Net Cash Flow"}),c.jsx("th",{className:"p-2 text-right",children:"Cumulative Cash"})]})}),c.jsx("tbody",{children:n.map(o=>c.jsxs("tr",{children:[c.jsxs("td",{className:"p-2 font-bold text-slate-700",children:["Y",o.year]}),c.jsx("td",{className:"p-2 text-right text-green-700",children:Gt(o.cashIn)}),c.jsx("td",{className:"p-2 text-right text-red-700",children:Gt(o.cashOut)}),c.jsx("td",{className:`p-2 text-right font-medium ${o.netCashFlow>0?"text-green-600":"text-red-600"}`,children:Gt(o.netCashFlow)}),c.jsx("td",{className:"p-2 text-right text-blue-700 font-bold",children:Gt(o.cumulativeCash)})]},o.year))})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Revenue Breakdown by Stream"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Stream"}),c.jsx("th",{className:"p-2 text-right",children:"Mix (%)"}),c.jsx("th",{className:"p-2 text-right",children:"Y1 Revenue"}),c.jsx("th",{className:"p-2 text-right",children:"Y5 Revenue"}),c.jsx("th",{className:"p-2 text-right",children:"Margin"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"SaaS Subscriptions"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.rev_saas,kpiKey:"rev_saas",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(r[0].arr*t.rev_saas/100)}),c.jsx("td",{className:"p-2 text-right font-bold",children:Gt(i.arr*t.rev_saas/100)}),c.jsx("td",{className:"p-2 text-right text-slate-500",children:"85%"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Training & Certification"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.rev_train,kpiKey:"rev_train",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(r[0].arr*t.rev_train/100)}),c.jsx("td",{className:"p-2 text-right font-bold",children:Gt(i.arr*t.rev_train/100)}),c.jsx("td",{className:"p-2 text-right text-slate-500",children:"90%"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Professional Services"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.rev_prof,kpiKey:"rev_prof",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(r[0].arr*t.rev_prof/100)}),c.jsx("td",{className:"p-2 text-right font-bold",children:Gt(i.arr*t.rev_prof/100)}),c.jsx("td",{className:"p-2 text-right text-slate-500",children:"65%"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Cost Structure Detail"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Category"}),c.jsx("th",{className:"p-2 text-right",children:"Alloc. (%)"}),c.jsx("th",{className:"p-2 text-right",children:"Y1 Cost"}),c.jsx("th",{className:"p-2 text-right",children:"Y5 Cost"}),c.jsx("th",{className:"p-2 text-right",children:"Growth"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Team Salaries"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.c_pay_pct,kpiKey:"c_pay_pct",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.personnel*(r[0].totalCosts/i.totalCosts))}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.personnel)}),c.jsxs("td",{className:"p-2 text-right text-slate-500",children:["+",((i.personnel/(i.personnel*(r[0].totalCosts/i.totalCosts))-1)*100).toFixed(0),"%"]})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Infrastructure"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.c_infra_pct,kpiKey:"c_infra_pct",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.infrastructure*(r[0].totalCosts/i.totalCosts))}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.infrastructure)}),c.jsxs("td",{className:"p-2 text-right text-slate-500",children:["+",((i.infrastructure/(i.infrastructure*(r[0].totalCosts/i.totalCosts))-1)*100).toFixed(0),"%"]})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Marketing & Sales"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.c_mkt_pct,kpiKey:"c_mkt_pct",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.marketing*(r[0].totalCosts/i.totalCosts))}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.marketing)}),c.jsxs("td",{className:"p-2 text-right text-slate-500",children:["+",((i.marketing/(i.marketing*(r[0].totalCosts/i.totalCosts))-1)*100).toFixed(0),"%"]})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium text-blue-600",children:"Operations"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.c_ops_pct,kpiKey:"c_ops_pct",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.operations*(r[0].totalCosts/i.totalCosts))}),c.jsx("td",{className:"p-2 text-right",children:Gt(i.operations)}),c.jsxs("td",{className:"p-2 text-right text-slate-500",children:["+",((i.operations/(i.operations*(r[0].totalCosts/i.totalCosts))-1)*100).toFixed(0),"%"]})]})]})]})]})]})}const WC=t=>Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(0)+"k":t.toFixed(0),YC=t=>t.toFixed(1)+"%";function Th({title:t,value:e,sub:r}){return c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm",children:[c.jsx("div",{className:"mb-2 text-[10px] font-bold uppercase tracking-wider text-slate-500",children:t}),c.jsx("div",{className:"mb-1 text-2xl font-extrabold text-slate-900",children:e}),c.jsx("div",{className:"text-[11px] text-slate-400",children:r})]})}function wXe(){const{kpi:t,metrics:e}=Lo(),{y5:r,years:n,ltv:i,ltv_cac:s,paybackMonths:a,customerLifeMonths:o,nrr:l}=e;return c.jsxs("div",{className:"mx-auto w-[210mm] min-h-[297mm] bg-white p-[20mm] shadow-lg rounded-lg space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Unit Economics & KPIs"}),c.jsxs("div",{className:"mt-4 rounded bg-blue-50 p-3 text-sm text-blue-800 border border-blue-200",children:[c.jsx("strong",{children:" Key Insight:"})," LTV/CAC ratio of ",c.jsxs("span",{className:"font-bold",children:[s.toFixed(1),":1"]})," indicates ",c.jsx("strong",{children:s>=3?"healthy":"concerning"})," unit economics. However, long sales cycles (",t.s_cycle," months) require careful cash management."]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Core Unit Economics"}),c.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[c.jsx(Th,{title:"CAC",value:WC(t.s_cac*1e3),sub:"Customer Acq. Cost"}),c.jsx(Th,{title:"LTV",value:WC(i),sub:"Lifetime Value"}),c.jsx(Th,{title:"LTV/CAC",value:s.toFixed(1),sub:"Target: >3:1"}),c.jsx(Th,{title:"Gross Margin",value:YC(t.f_margin),sub:"SaaS standard: 80%+"}),c.jsx(Th,{title:"Payback",value:a.toFixed(0),sub:"Months to recover CAC"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Growth Metrics"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Metric"}),c.jsx("th",{className:"p-2 text-right",children:"Y1"}),c.jsx("th",{className:"p-2 text-right",children:"Y2"}),c.jsx("th",{className:"p-2 text-right",children:"Y3"}),c.jsx("th",{className:"p-2 text-right",children:"Y4"}),c.jsx("th",{className:"p-2 text-right",children:"Y5"}),c.jsx("th",{className:"p-2 text-right",children:"CAGR"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"New Clients"}),["g_y1","g_y2","g_y3","g_y4","g_y5"].map(u=>c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t[u],kpiKey:u})},u)),c.jsx("td",{className:"p-2 text-right",children:"-"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Active Clients"}),n.map(u=>c.jsx("td",{className:"p-2 text-right",children:u.activeClients.toFixed(1)},u.year)),c.jsx("td",{className:"p-2 text-right",children:"-"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"ARR (k DZD)"}),n.map(u=>c.jsx("td",{className:"p-2 text-right",children:WC(u.arr)},u.year)),c.jsx("td",{className:"p-2 text-right font-bold text-green-600",children:YC((Math.pow(r.arr/n[0].arr,1/4)-1)*100)})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Churn Rate"}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.ch_y1,kpiKey:"ch_y1",suffix:"%"})}),c.jsx("td",{className:"p-2 text-right",children:c.jsx(Je,{value:t.ch_y2,kpiKey:"ch_y2",suffix:"%"})}),c.jsxs("td",{colSpan:3,className:"p-2 text-center text-slate-500",children:["Stabilizes at ",c.jsx(Je,{value:t.ch_stable,kpiKey:"ch_stable",suffix:"%",className:"inline-block"})]}),c.jsx("td",{className:"p-2 text-right",children:"-"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Customer Metrics & Benchmarks"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Metric"}),c.jsx("th",{className:"p-2 text-left",children:"Your Value"}),c.jsx("th",{className:"p-2 text-left",children:"Industry Benchmark"}),c.jsx("th",{className:"p-2 text-left",children:"Status"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Churn Rate (stabilized)"}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.ch_stable,kpiKey:"ch_stable",suffix:"%"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.bench_churn,kpiKey:"bench_churn",type:"text"})}),c.jsx("td",{className:"p-2",children:t.ch_stable<=10?" Good":" High"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Net Revenue Retention"}),c.jsx("td",{className:"p-2",children:YC(l)}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.bench_nrr,kpiKey:"bench_nrr",type:"text"})}),c.jsx("td",{className:"p-2",children:l>=100?" Good":" Concern"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Customer Lifetime"}),c.jsxs("td",{className:"p-2",children:[o.toFixed(0)," months"]}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.bench_life,kpiKey:"bench_life",type:"text"})}),c.jsx("td",{className:"p-2",children:o>=36?" Good":" Short"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Avg Contract Value"}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.p_arpu,kpiKey:"p_arpu"})}),c.jsx("td",{className:"p-2",children:"-"}),c.jsx("td",{className:"p-2",children:"-"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Sales Efficiency"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Metric"}),c.jsx("th",{className:"p-2 text-left",children:"Value"}),c.jsx("th",{className:"p-2 text-left",children:"Target"}),c.jsx("th",{className:"p-2 text-left",children:"Performance"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Sales Cycle"}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.s_cycle,kpiKey:"s_cycle",suffix:" months"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.target_cycle,kpiKey:"target_cycle",type:"text"})}),c.jsx("td",{className:"p-2",children:t.s_cycle<=9?"":""})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Lead Conversion"}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.s_lead,kpiKey:"s_lead",suffix:"%"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.target_lead,kpiKey:"target_lead",type:"text"})}),c.jsx("td",{className:"p-2",children:t.s_lead>=30?"":""})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Demo Conversion"}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.s_demo,kpiKey:"s_demo",suffix:"%"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.target_demo,kpiKey:"target_demo",type:"text"})}),c.jsx("td",{className:"p-2",children:t.s_demo>=50?"":""})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"POC Conversion"}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.s_poc,kpiKey:"s_poc",suffix:"%"})}),c.jsx("td",{className:"p-2",children:c.jsx(Je,{value:t.target_poc,kpiKey:"target_poc",type:"text"})}),c.jsx("td",{className:"p-2",children:t.s_poc>=60?"":""})]})]})]})]})]})}const Cx=t=>Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(0)+"k":t.toFixed(0);function EXe(){const{kpi:t,metrics:e}=Lo(),{breakEvenClients:r}=e;return c.jsxs("div",{className:"mx-auto w-[210mm] min-h-auto bg-white p-[20mm] shadow-lg rounded-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Business Model Canvas"}),c.jsx("p",{className:"mb-6 text-sm text-slate-500",children:"Complete business model visualization with live data integration"}),c.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[c.jsxs("div",{className:"row-span-2 rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Key Partners"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Institutional:"})," FAF, LFP, DTN"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Technical:"})," ISSAL NET (hosting), Chargily Pay"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Training:"})," ESSTS, former internationals"]})]})]}),c.jsxs("div",{className:"rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Key Activities"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsx("li",{children:"Product development (MVP)"}),c.jsx("li",{children:"Consultative selling"}),c.jsx("li",{children:"Integrated training"}),c.jsx("li",{children:"Compliance management"})]})]}),c.jsxs("div",{className:"rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Value Proposition"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsx("li",{children:" 100% Law 25-11 compliant"}),c.jsx("li",{children:" AR/FR interface"}),c.jsx("li",{children:" Guaranteed adoption training"}),c.jsx("li",{children:" Premium on-site support"}),c.jsx("li",{children:" Local football expertise"})]})]}),c.jsxs("div",{className:"rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Customer Relations"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsx("li",{children:"Dedicated account mgmt (1:8-10)"}),c.jsx("li",{children:"Mandatory in-person training"}),c.jsx("li",{children:"24/7 post-training support"}),c.jsx("li",{children:"Community building"})]})]}),c.jsxs("div",{className:"row-span-2 rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Customer Segments"}),c.jsx("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:t.marketSegments.map(n=>c.jsxs("li",{children:[c.jsxs("strong",{children:[n.name," (",n.count,"):"]})," ",Cx(n.price)," DZD"]},n.id))})]}),c.jsxs("div",{className:"rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Key Resources"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsx("li",{children:"Expert local team (CEO, CTO, Training)"}),c.jsx("li",{children:"Compliant infrastructure (local hosting)"}),c.jsx("li",{children:"IP (methodology, interfaces)"}),c.jsx("li",{children:"Institutional relations (FAF/LFP)"})]})]}),c.jsxs("div",{className:"col-span-2 rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Channels"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsxs("li",{children:[c.jsxs("strong",{children:["B2B Direct (",t.ch_b2b,"%):"]})," Relationship prospecting, long cycles"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Institutional (",t.ch_inst,"%):"]})," FAF/LFP endorsements"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Inter-Club (",t.ch_ref,"%):"]})," Ambassador program"]})]})]}),c.jsxs("div",{className:"col-span-2 rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Revenue Streams"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsxs("li",{children:[c.jsxs("strong",{children:["SaaS Subscriptions (",t.rev_saas,"%):"]})," Varies by segment (",Cx(Math.min(...t.marketSegments.map(n=>n.price)))," - ",Cx(Math.max(...t.marketSegments.map(n=>n.price)))," DZD)"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Training & Certification (",t.rev_train,"%):"]})," Recurring annual fees"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Professional Services (",t.rev_prof,"%):"]})," Consulting, customization"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"ARPU Average:"})," ",Cx(t.p_arpu)," DZD/year"]})]})]}),c.jsxs("div",{className:"col-span-2 rounded bg-slate-50 p-4 border border-slate-200 text-xs",children:[c.jsx("h4",{className:"mb-2 font-bold text-blue-600 uppercase tracking-wide",children:" Cost Structure"}),c.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-slate-700",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Fixed Costs Dominant:"})," Break-even at ",r.toFixed(0)," customers"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Team Salaries (",t.c_pay_pct,"%):"]})," Main cost item"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Infrastructure (",t.c_infra_pct,"%):"]})," Hosting, security, compliance"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Marketing & Sales (",t.c_mkt_pct,"%):"]})," Prospecting, events, travel"]}),c.jsxs("li",{children:[c.jsxs("strong",{children:["Operations (",t.c_ops_pct,"%):"]})," Support, admin, legal"]})]})]})]})]})}const Tc=t=>Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(0)+"k":t.toFixed(0),SXe=t=>t.toFixed(1)+"%";function CXe(){const{kpi:t,metrics:e}=Lo(),{y5:r,ltv:n,ltv_cac:i,breakEvenClients:s,tam:a}=e,o=[{metric:"TAM (Total Addressable)",value:Tc(a),source:"ms.txt + bp.txt",calc:"Sum of all segment sizes  respective ARPU"},{metric:"Market Segments",value:`${t.marketSegments.reduce((l,u)=>l+u.count,0)} orgs`,source:"ms.txt",calc:"L1 Elite + L1 Std + L2 Prog + FAF"},{metric:"ARPU Average",value:Tc(t.p_arpu),source:"bp.txt",calc:"Weighted average across pricing tiers"},{metric:"Y5 Active Clients",value:r.activeClients.toFixed(1),source:"Calculated",calc:"Active(n-1)  (1-Churn) + New(n)"},{metric:"Churn Rate (stable)",value:SXe(t.ch_stable),source:"bp.txt",calc:"Industry benchmark for B2B SaaS"},{metric:"CAC",value:Tc(t.s_cac*1e3),source:"bp.txt + benchmarks",calc:"Sales & marketing costs / new clients"},{metric:"LTV",value:Tc(n),source:"Calculated",calc:"ARPU / Churn Rate"},{metric:"LTV/CAC Ratio",value:i.toFixed(1),source:"bp.txt",calc:"LTV / CAC (target >3:1)"},{metric:"Gross Margin",value:t.f_margin+"%",source:"bp.txt",calc:"SaaS industry standard"},{metric:"Team Headcount Y5",value:r.headcount.toFixed(1),source:"Calculated",calc:"Base + (years  hire rate)"},{metric:"Payroll Y5",value:Tc(r.personnel),source:"Calculated",calc:"Headcount  salary  (1 + CNAS load)"},{metric:"Break-even Clients",value:s.toFixed(0),source:"Calculated",calc:"Total costs / ARPU"},{metric:"Seed Investment",value:Tc(t.inv_seed*1e6),source:"bp.txt",calc:"Phase 1 validation funding"},{metric:"Series A Target",value:Tc(t.inv_a*1e6),source:"bp.txt",calc:"Phase 2 expansion funding"}];return c.jsxs("div",{className:"mx-auto w-[210mm] min-h-[297mm] bg-white p-[20mm] shadow-lg rounded-lg space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Data Sources & Calculations"}),c.jsx("p",{className:"mb-6 text-sm text-slate-500",children:"Complete methodology and source documentation for all metrics"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Primary Metrics & Sources"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Metric"}),c.jsx("th",{className:"p-2 text-left",children:"Current Value"}),c.jsx("th",{className:"p-2 text-left",children:"Source Document"}),c.jsx("th",{className:"p-2 text-left",children:"Calculation Method"})]})}),c.jsx("tbody",{children:o.map((l,u)=>c.jsxs("tr",{className:"border-b border-slate-100 last:border-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 font-medium text-slate-700",children:l.metric}),c.jsx("td",{className:"p-2 font-bold text-slate-900",children:l.value}),c.jsx("td",{className:"p-2 text-slate-500",children:l.source}),c.jsx("td",{className:"p-2 text-slate-500 text-xs",children:l.calc})]},u))})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Formula Reference"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Metric"}),c.jsx("th",{className:"p-2 text-left",children:"Formula"}),c.jsx("th",{className:"p-2 text-left",children:"Variables"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"TAM"}),c.jsx("td",{className:"p-2 font-mono text-xs",children:"(Segment Size  ARPU)"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Market segments, pricing tiers"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"Active Clients"}),c.jsx("td",{className:"p-2 font-mono text-xs",children:"Active(n-1)  (1-Churn) + New(n)"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Previous clients, churn rate, new acquisitions"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"ARR"}),c.jsx("td",{className:"p-2 font-mono text-xs",children:"Active Clients  ARPU Average"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Client count, average revenue per user"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"EBITDA"}),c.jsx("td",{className:"p-2 font-mono text-xs",children:"ARR - Total Operating Costs"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Revenue, personnel, infrastructure, marketing, ops"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-medium",children:"LTV"}),c.jsx("td",{className:"p-2 font-mono text-xs",children:"ARPU / Churn Rate"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Average revenue, stabilized churn"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-800 border-b pb-2",children:"Document References"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 text-left",children:"Document"}),c.jsx("th",{className:"p-2 text-left",children:"Key Metrics Extracted"}),c.jsx("th",{className:"p-2 text-left",children:"Last Updated"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-bold",children:"bp.txt"}),c.jsx("td",{className:"p-2",children:"Financial projections, cost structure, revenue model"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Dec 2025"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-bold",children:"bm.txt"}),c.jsx("td",{className:"p-2",children:"Business model canvas, value proposition, segments"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Dec 2025"})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 font-bold",children:"ms.txt"}),c.jsx("td",{className:"p-2",children:"Market analysis, TAM/SAM/SOM, competition"}),c.jsx("td",{className:"p-2 text-slate-500",children:"Sep 2025"})]})]})]})]})]})}function TXe(){var i;const[t,e]=E.useState("dash"),r=[{id:"dash",label:" Dashboard",Component:e$},{id:"market",label:" Market Analysis",Component:yXe},{id:"finance",label:" Financials",Component:bXe},{id:"metrics",label:" Unit Economics",Component:wXe},{id:"bmc",label:" Business Model",Component:EXe},{id:"data",label:" Data Sources",Component:CXe}],n=((i=r.find(s=>s.id===t))==null?void 0:i.Component)||e$;return c.jsxs("div",{className:"flex h-screen bg-slate-100 font-sans text-slate-800 overflow-hidden",children:[c.jsx(Fze,{}),c.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[c.jsx("div",{className:"flex h-16 items-center gap-8 border-b border-slate-200 bg-white px-8",children:r.map(s=>c.jsx("button",{onClick:()=>e(s.id),className:`flex h-full items-center border-b-2 px-1 text-sm font-medium transition-colors ${t===s.id?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-blue-600"}`,children:s.label},s.id))}),c.jsx("div",{className:"flex-1 overflow-y-auto p-10 print:p-0 print:overflow-visible",children:c.jsx(n,{})})]})]})}function BXe({compact:t=!1,className:e}){const{matchState:r,isInTransition:n,transitionTimeRemaining:i,currentPossession:s,stateLabel:a}=Yr(),[o,l]=E.useState(0);E.useEffect(()=>{if(n&&i>0){l(Math.ceil(i/1e3));const x=setInterval(()=>{l(v=>Math.max(0,v-1))},1e3);return()=>clearInterval(x)}else l(0)},[n,i]);const u=r.teamInPossession==="TEAM_A"?"bg-blue-500":r.teamInPossession==="TEAM_B"?"bg-red-500":"bg-gray-400",d=r.teamInPossession==="TEAM_A"?"Home":r.teamInPossession==="TEAM_B"?"Away":"Neutral",A={BUILD_UP:{icon:c.jsx(cg,{className:"w-3 h-3"}),label:"Build-Up",color:"text-green-400"},CONSOLIDATION:{icon:c.jsx(Zl,{className:"w-3 h-3"}),label:"Consolidation",color:"text-blue-400"},FINAL_THIRD:{icon:c.jsx(Wi,{className:"w-3 h-3"}),label:"Final Third",color:"text-orange-400"},TRANSITION_OFF:{icon:c.jsx(Eu,{className:"w-3 h-3"}),label:"Transition ",color:"text-yellow-400"},TRANSITION_DEF:{icon:c.jsx(Zl,{className:"w-3 h-3"}),label:"Def. Transition",color:"text-purple-400"},SET_PIECE:{icon:c.jsx(Wi,{className:"w-3 h-3"}),label:"Set Piece",color:"text-cyan-400"},NEUTRAL:{icon:c.jsx(Vre,{className:"w-3 h-3"}),label:"Neutral",color:"text-gray-400"}},f=A[r.phase]||A.NEUTRAL,h={HIGH:{color:"bg-red-500",pulse:!0},MEDIUM:{color:"bg-yellow-500",pulse:!1},LOW:{color:"bg-green-500",pulse:!1}},m=h[r.threatLevel]||h.LOW,p={HIGH:" High Press",MEDIUM:" Medium",LOW:" Low Block"},g=`${r.zone.third.charAt(0)}${r.zone.third.slice(1).toLowerCase()} ${r.zone.lane.replace(/_/g," ").toLowerCase()}`;return t?c.jsxs("div",{className:Z("flex items-center gap-2 px-3 py-1.5 rounded-lg bg-background/80 backdrop-blur-sm border border-border/50",e),children:[c.jsx("div",{className:Z("w-2 h-2 rounded-full",u)}),c.jsx("span",{className:"text-xs font-medium",children:d}),c.jsx("span",{className:Z("text-xs",f.color),children:f.label}),n&&o>0&&c.jsxs("span",{className:"flex items-center gap-1 text-xs text-yellow-400 animate-pulse",children:[c.jsx(Qp,{className:"w-3 h-3"}),o,"s"]}),c.jsx("div",{className:Z("w-2 h-2 rounded-full",m.color,m.pulse&&"animate-pulse")})]}):c.jsxs("div",{className:Z("rounded-lg border border-border/50 bg-card/95 backdrop-blur-sm shadow-lg overflow-hidden",e),children:[c.jsxs("div",{className:Z("px-4 py-2 flex items-center justify-between",u,"text-white"),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(go,{className:"w-4 h-4"}),c.jsxs("span",{className:"font-semibold text-sm",children:[d," Possession"]})]}),s&&c.jsxs("span",{className:"text-xs opacity-80",children:["Chain #",s.id]})]}),c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Phase"}),c.jsxs("div",{className:Z("flex items-center gap-1.5 font-medium text-sm",f.color),children:[f.icon,f.label]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Zone"}),c.jsx("span",{className:"text-sm font-medium capitalize",children:g})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Pressure"}),c.jsx("span",{className:"text-sm",children:p[r.pressure]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Threat"}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:Z("w-2 h-2 rounded-full",m.color,m.pulse&&"animate-pulse")}),c.jsx("span",{className:"text-sm",children:r.threatLevel})]})]}),n&&o>0&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-1.5 text-yellow-400",children:[c.jsx(Eu,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-semibold",children:"Transition Window"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 font-mono font-bold animate-pulse",children:[c.jsx(Qp,{className:"w-4 h-4"}),o,"s"]})]}),c.jsx("div",{className:"mt-1.5 h-1 bg-yellow-900/30 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-yellow-400 transition-all duration-1000 ease-linear",style:{width:`${o/5*100}%`}})})]}),r.pressingContext.active&&c.jsx("div",{className:"mt-2 pt-2 border-t border-border/50",children:c.jsxs("div",{className:"flex items-center gap-1.5 text-orange-400",children:[c.jsx(mo,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-semibold",children:"Pressing Active"})]})}),s&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:["Passes: ",s.passCount]}),c.jsxs("span",{children:["Events: ",s.events.length]})]}),s.enteredFinalThird&&c.jsx("span",{className:"text-green-400",children:" Final third entered"}),s.fromTransition&&c.jsx("span",{className:"text-yellow-400 ml-2",children:" From transition"})]})]})]})}function _Xe({className:t,maxVisible:e=10}){const{possessionHistory:r,currentPossession:n,chainStats:i}=Yr(),[s,a]=E.useState(!1),[o,l]=E.useState(null),u=[...n?[{...n,isCurrent:!0}]:[],...r.slice().reverse().slice(0,s?50:e)];return u.length===0?c.jsx("div",{className:Z("rounded-lg border border-border/50 bg-card/95 p-4",t),children:c.jsx("div",{className:"text-center text-muted-foreground text-sm",children:"No possession chains recorded yet"})}):c.jsxs("div",{className:Z("rounded-lg border border-border/50 bg-card/95 overflow-hidden",t),children:[c.jsxs("div",{className:"px-4 py-2 bg-muted/30 border-b border-border/30 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ql,{className:"w-4 h-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm font-semibold",children:"Possession Flow"})]}),i&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.totalChains," chains | ",(i.finalThirdEntryRate*100).toFixed(0),"% to final third"]})]}),c.jsxs("div",{className:"p-3",children:[c.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.map(d=>c.jsx(NXe,{chain:d,isCurrent:d.isCurrent,isSelected:o===d.id,onClick:()=>l(o===d.id?null:d.id)},d.id))}),r.length>e&&c.jsxs("button",{onClick:()=>a(!s),className:"mt-2 w-full flex items-center justify-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[s?c.jsx(JH,{className:"w-3 h-3"}):c.jsx(lg,{className:"w-3 h-3"}),s?"Show less":`Show ${r.length-e} more`]})]}),o!==null&&c.jsx(IXe,{chainId:o})]})}function NXe({chain:t,isCurrent:e,isSelected:r,onClick:n}){const i=t.team==="TEAM_A"?"bg-blue-500":"bg-red-500",s={SHOT:{icon:c.jsx(Wi,{className:"w-2.5 h-2.5"}),ring:"ring-orange-400"},GOAL:{icon:c.jsx(cne,{className:"w-2.5 h-2.5"}),ring:"ring-green-400"},LOSS:{icon:null,ring:""},SET_PIECE:{icon:c.jsx(mo,{className:"w-2.5 h-2.5"}),ring:"ring-yellow-400"},OUT_OF_PLAY:{icon:null,ring:""},ONGOING:{icon:null,ring:"ring-white/50"}},a=s[t.outcome]||s.LOSS,o=(t.durationMs||1e3)/1e3,l=Math.min(80,Math.max(20,o*3));return c.jsxs("button",{onClick:n,className:Z("h-7 rounded flex items-center justify-center gap-1 px-2 transition-all",i,"hover:brightness-110",e&&"animate-pulse ring-2 ring-white/50",r&&"ring-2 ring-white",a.ring&&`ring-1 ${a.ring}`),style:{minWidth:`${l}px`},title:`Chain #${t.id} - ${t.team} - ${t.passCount} passes`,children:[t.fromTransition&&c.jsx(Eu,{className:"w-2.5 h-2.5 text-yellow-200"}),a.icon&&c.jsx("span",{className:"text-white",children:a.icon}),c.jsx("span",{className:"text-[10px] font-bold text-white/90",children:t.passCount})]})}function IXe({chainId:t}){const{possessionHistory:e,currentPossession:r}=Yr(),n=(r==null?void 0:r.id)===t?r:e.find(s=>s.id===t);if(!n)return null;const i=n.durationMs?(n.durationMs/1e3).toFixed(1):"ongoing";return c.jsxs("div",{className:"px-4 py-3 bg-muted/20 border-t border-border/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("span",{className:"text-sm font-semibold",children:["Chain #",n.id]}),c.jsx("span",{className:Z("text-xs px-2 py-0.5 rounded",n.team==="TEAM_A"?"bg-blue-500/20 text-blue-300":"bg-red-500/20 text-red-300"),children:n.team==="TEAM_A"?"Home":"Away"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),c.jsxs("span",{className:"ml-1 font-medium",children:[i,"s"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Passes:"}),c.jsx("span",{className:"ml-1 font-medium",children:n.passCount})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Events:"}),c.jsx("span",{className:"ml-1 font-medium",children:n.events.length})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[n.fromTransition&&c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-300",children:" Transition"}),n.enteredFinalThird&&c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-green-500/20 text-green-300",children:" Final Third"}),n.enteredBox&&c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-300",children:" Box"}),n.shotTaken&&c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-500/20 text-red-300",children:" Shot"}),n.buildUpSpeed&&c.jsxs("span",{className:Z("text-[10px] px-1.5 py-0.5 rounded",n.buildUpSpeed==="FAST"&&"bg-cyan-500/20 text-cyan-300",n.buildUpSpeed==="MEDIUM"&&"bg-gray-500/20 text-gray-300",n.buildUpSpeed==="SLOW"&&"bg-purple-500/20 text-purple-300"),children:[n.buildUpSpeed==="FAST"?"":n.buildUpSpeed==="SLOW"?"":""," ",n.buildUpSpeed]})]}),n.events.length>0&&c.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Events:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[n.events.slice(-8).map((s,a)=>c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:s.eventName.replace(/_/g," ")},s.id)),n.events.length>8&&c.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["+",n.events.length-8," more"]})]})]})]})}const PXe=()=>{const{matchState:t,stateLabel:e,isInTransition:r,predictions:n,learningStats:i,possessionId:s}=Yr(),{connected:a,role:o,socket:l}=Cf();return E.useEffect(()=>{l&&a&&console.log("Monitoring mode active - Syncing from broadcaster...")},[l,a]),c.jsxs("div",{className:"min-h-screen bg-[#0a0a0c] text-slate-200 font-sans selection:bg-purple-500/30",children:[c.jsxs("header",{className:"h-16 border-b border-border/40 bg-card/30 backdrop-blur-md px-6 flex items-center justify-between sticky top-0 z-50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>window.location.href="/",className:"p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors",children:c.jsx(XH,{className:"w-5 h-5"})}),c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center shadow-lg shadow-purple-500/20",children:c.jsx(Zl,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-lg font-bold tracking-tight bg-gradient-to-r from-white to-slate-400 bg-clip-text text-transparent",children:["TACTA ",c.jsx("span",{className:"text-purple-500",children:"ADMIN"})]}),c.jsxs("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest font-semibold flex items-center gap-1.5 font-mono",children:[c.jsx(un,{className:"w-3 h-3 text-green-500 animate-pulse"}),"Live Monitoring System"]})]})]}),c.jsx("div",{className:"flex items-center gap-6",children:c.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-full border border-border/40 bg-slate-900/50 backdrop-blur-sm self-center",children:[c.jsxs("div",{className:"flex items-center gap-2 pr-3 border-r border-border/40",children:[c.jsx("div",{className:Z("w-2 h-2 rounded-full shadow-[0_0_8px]",a?"bg-green-500 shadow-green-500/50":"bg-red-500 shadow-red-500/50")}),c.jsx("span",{className:"text-xs font-medium",children:a?"CONNECTED":"OFFLINE"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(go,{className:"w-3.5 h-3.5 text-blue-400"}),c.jsx("span",{className:"text-xs font-bold text-blue-400 uppercase tracking-wider",children:o||"GUEST"})]})]})})]}),c.jsxs("main",{className:"p-6 max-w-[1600px] mx-auto grid grid-cols-12 gap-6",children:[c.jsxs("div",{className:"col-span-12 lg:col-span-3 flex flex-col gap-6",children:[c.jsxs(Fe,{className:"bg-slate-900/40 border-border/40 backdrop-blur-sm p-4 ring-1 ring-white/5 shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 text-purple-400",children:[c.jsx(yu,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider",children:"Predictor Engine"})]}),c.jsx(cV,{className:"bg-transparent border-none p-0 shadow-none"})]}),c.jsxs(Fe,{className:"bg-slate-900/40 border-border/40 backdrop-blur-sm p-4 ring-1 ring-white/5 shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-400",children:[c.jsx(r8,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider",children:"Session Context"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/20",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Current Chain ID"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-white",children:["#",s||"NONE"]})]}),c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/20",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Team Possession"}),c.jsx("span",{className:Z("text-xs font-bold px-2 py-0.5 rounded",t.teamInPossession==="TEAM_A"?"bg-blue-500/20 text-blue-300":t.teamInPossession==="TEAM_B"?"bg-red-500/20 text-red-300":"bg-slate-800 text-slate-400"),children:t.teamInPossession||"NEUTRAL"})]}),c.jsxs("div",{className:"flex justify-between items-center py-2",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"Transition State"}),c.jsx("span",{className:Z("text-xs font-bold px-2 py-0.5 rounded animate-pulse",r?"bg-orange-500/20 text-orange-400 ring-1 ring-orange-500/50":"bg-slate-800 text-slate-500"),children:r?"ACTIVE":"IDLE"})]})]})]})]}),c.jsxs("div",{className:"col-span-12 lg:col-span-9 flex flex-col gap-6",children:[c.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[c.jsx("div",{className:"col-span-12 xl:col-span-7",children:c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000 group-hover:duration-200"}),c.jsx(BXe,{className:"relative bg-slate-900/80 border-border/60 backdrop-blur-xl h-full shadow-inner"})]})}),c.jsx("div",{className:"col-span-12 xl:col-span-5",children:c.jsx(lAe,{className:"bg-slate-900/80 border-border/60 backdrop-blur-xl h-full shadow-2xl",maxPredictions:4})})]}),c.jsxs(Fe,{className:"bg-slate-900/40 border-border/40 backdrop-blur-sm p-6 ring-1 ring-white/5 shadow-2xl flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-border/20 pb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400 border border-blue-500/20",children:c.jsx(l8,{className:"w-5 h-5"})}),c.jsx("h2",{className:"text-lg font-bold",children:"Possession Analysis Flow"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase text-muted-foreground tracking-widest",children:"Historical View"}),c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"})]})]}),c.jsx("div",{className:"min-h-[300px]",children:c.jsx(_Xe,{maxVisible:12})})]})]})]}),c.jsx("div",{className:"fixed top-0 right-0 w-[500px] h-[500px] bg-purple-600/5 blur-[120px] -z-10 rounded-full pointer-events-none"}),c.jsx("div",{className:"fixed bottom-0 left-0 w-[500px] h-[500px] bg-blue-600/5 blur-[120px] -z-10 rounded-full pointer-events-none"})]})},RXe=()=>{const t=Ef();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),c.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),c.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},kXe=$u("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),EZ=E.forwardRef(({className:t,variant:e,...r},n)=>c.jsx("div",{ref:n,role:"alert",className:Z(kXe({variant:e}),t),...r}));EZ.displayName="Alert";const LXe=E.forwardRef(({className:t,...e},r)=>c.jsx("h5",{ref:r,className:Z("mb-1 font-medium leading-none tracking-tight",t),...e}));LXe.displayName="AlertTitle";const SZ=E.forwardRef(({className:t,...e},r)=>c.jsx("div",{ref:r,className:Z("text-sm [&_p]:leading-relaxed",t),...e}));SZ.displayName="AlertDescription";const jXe=()=>{var h,m;const[t,e]=E.useState(""),[r,n]=E.useState(""),[i,s]=E.useState(null),[a,o]=E.useState(!1),{login:l}=Ta(),u=Sw(),A=((m=(h=Ef().state)==null?void 0:h.from)==null?void 0:m.pathname)||"/",f=async p=>{p.preventDefault(),s(null),o(!0);try{await l(t,r),u(A,{replace:!0})}catch(g){s(g.message||"Login failed. Please check your credentials.")}finally{o(!1)}};return c.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-[#020617] p-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/10 blur-[120px] rounded-full animate-pulse"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full animate-delay-1000"}),c.jsxs(Fe,{className:"w-full max-w-md border-border/50 bg-card/50 backdrop-blur-xl shadow-2xl relative z-10",children:[c.jsxs(Dt,{className:"space-y-4 text-center",children:[c.jsx("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-2xl bg-primary/20 text-primary shadow-inner",children:c.jsx(dw,{size:32})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ot,{className:"text-3xl font-bold tracking-tight bg-gradient-to-br from-white to-gray-400 bg-clip-text text-transparent",children:"Tacta Pro"}),c.jsx(yi,{className:"text-muted-foreground/80 font-medium",children:"Enter your credentials to access the analytics suite"})]})]}),c.jsxs("form",{onSubmit:f,children:[c.jsxs(vt,{className:"space-y-5",children:[i&&c.jsxs(EZ,{variant:"destructive",className:"bg-destructive/10 border-destructive/20 animate-in fade-in zoom-in-95 duration-200",children:[c.jsx(Qu,{className:"h-4 w-4"}),c.jsx(SZ,{children:i})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(bo,{htmlFor:"username",className:"text-xs font-bold uppercase tracking-widest text-muted-foreground/70",children:"Username"}),c.jsx(jr,{id:"username",type:"text",placeholder:"analyst_name",value:t,onChange:p=>e(p.target.value),className:"bg-background/30 border-border/40 h-11 focus:ring-primary/40 focus:border-primary/40 transition-all",required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(bo,{htmlFor:"password",className:"text-xs font-bold uppercase tracking-widest text-muted-foreground/70",children:"Password"}),c.jsx(jr,{id:"password",type:"password",placeholder:"",value:r,onChange:p=>n(p.target.value),className:"bg-background/30 border-border/40 h-11 focus:ring-primary/40 focus:border-primary/40 transition-all",required:!0})]})]}),c.jsx(WI,{className:"pt-2",children:c.jsx(te,{className:"w-full h-11 text-sm font-bold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all duration-300",disabled:a,children:a?c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Authenticating..."]}):c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(gne,{size:18}),"Sign In"]})})})]})]}),c.jsx("div",{className:"absolute bottom-8 text-[10px] font-bold uppercase tracking-[0.2em] text-muted-foreground/40",children:"Authorized Access Only  v2.4.0"})]})};var rE="Checkbox",[MXe,zZe]=Cn(rE),[DXe,uk]=MXe(rE);function OXe(t){const{__scopeCheckbox:e,checked:r,children:n,defaultChecked:i,disabled:s,form:a,name:o,onCheckedChange:l,required:u,value:d="on",internal_do_not_use_render:A}=t,[f,h]=zi({prop:r,defaultProp:i??!1,onChange:l,caller:rE}),[m,p]=E.useState(null),[g,x]=E.useState(null),v=E.useRef(!1),y=m?!!a||!!m.closest("form"):!0,w={checked:f,disabled:s,setChecked:h,control:m,setControl:p,name:o,form:a,value:d,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:zl(i)?!1:i,isFormControl:y,bubbleInput:g,setBubbleInput:x};return c.jsx(DXe,{scope:e,...w,children:FXe(A)?A(w):n})}var CZ="CheckboxTrigger",TZ=E.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...n},i)=>{const{control:s,value:a,disabled:o,checked:l,required:u,setControl:d,setChecked:A,hasConsumerStoppedPropagationRef:f,isFormControl:h,bubbleInput:m}=uk(CZ,t),p=qe(i,d),g=E.useRef(l);return E.useEffect(()=>{const x=s==null?void 0:s.form;if(x){const v=()=>A(g.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[s,A]),c.jsx(De.button,{type:"button",role:"checkbox","aria-checked":zl(l)?"mixed":l,"aria-required":u,"data-state":PZ(l),"data-disabled":o?"":void 0,disabled:o,value:a,...n,ref:p,onKeyDown:Ie(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Ie(r,x=>{A(v=>zl(v)?!0:!v),m&&h&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});TZ.displayName=CZ;var dk=E.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l,onCheckedChange:u,form:d,...A}=t;return c.jsx(OXe,{__scopeCheckbox:r,checked:i,defaultChecked:s,disabled:o,required:a,onCheckedChange:u,name:n,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>c.jsxs(c.Fragment,{children:[c.jsx(TZ,{...A,ref:e,__scopeCheckbox:r}),f&&c.jsx(IZ,{__scopeCheckbox:r})]})})});dk.displayName=rE;var BZ="CheckboxIndicator",_Z=E.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...i}=t,s=uk(BZ,r);return c.jsx(Jn,{present:n||zl(s.checked)||s.checked===!0,children:c.jsx(De.span,{"data-state":PZ(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});_Z.displayName=BZ;var NZ="CheckboxBubbleInput",IZ=E.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:a,required:o,disabled:l,name:u,value:d,form:A,bubbleInput:f,setBubbleInput:h}=uk(NZ,t),m=qe(r,h),p=hg(s),g=dg(n);E.useEffect(()=>{const v=f;if(!v)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set,S=!i.current;if(p!==s&&b){const C=new Event("click",{bubbles:S});v.indeterminate=zl(s),b.call(v,zl(s)?!1:s),v.dispatchEvent(C)}},[f,p,s,i]);const x=E.useRef(zl(s)?!1:s);return c.jsx(De.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:o,disabled:l,name:u,value:d,form:A,...e,tabIndex:-1,ref:m,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});IZ.displayName=NZ;function FXe(t){return typeof t=="function"}function zl(t){return t==="indeterminate"}function PZ(t){return zl(t)?"indeterminate":t?"checked":"unchecked"}const al=E.forwardRef(({className:t,...e},r)=>c.jsx(dk,{ref:r,className:Z("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:c.jsx(_Z,{className:Z("flex items-center justify-center text-current"),children:c.jsx(Gd,{className:"h-4 w-4"})})}));al.displayName=dk.displayName;var UXe=[" ","Enter","ArrowUp","ArrowDown"],$Xe=[" ","Enter"],Du="Select",[nE,iE,QXe]=sw(Du),[Gf,WZe]=Cn(Du,[QXe,gw]),sE=gw(),[HXe,pc]=Gf(Du),[KXe,VXe]=Gf(Du),RZ=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:A,disabled:f,required:h,form:m}=t,p=sE(e),[g,x]=E.useState(null),[v,y]=E.useState(null),[w,b]=E.useState(!1),S=Bf(u),[C,T]=zi({prop:n,defaultProp:i??!1,onChange:s,caller:Du}),[B,_]=zi({prop:a,defaultProp:o,onChange:l,caller:Du}),I=E.useRef(null),L=g?m||!!g.closest("form"):!0,[N,R]=E.useState(new Set),M=Array.from(N).map(k=>k.props.value).join(";");return c.jsx(J8,{...p,children:c.jsxs(HXe,{required:h,scope:e,trigger:g,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:b,contentId:da(),value:B,onValueChange:_,open:C,onOpenChange:T,dir:S,triggerPointerDownPosRef:I,disabled:f,children:[c.jsx(nE.Provider,{scope:e,children:c.jsx(KXe,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(k=>{R(O=>new Set(O).add(k))},[]),onNativeOptionRemove:E.useCallback(k=>{R(O=>{const j=new Set(O);return j.delete(k),j})},[]),children:r})}),L?c.jsxs(rJ,{"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:A,value:B,onChange:k=>_(k.target.value),disabled:f,form:m,children:[B===void 0?c.jsx("option",{value:""}):null,Array.from(N)]},M):null]})})};RZ.displayName=Du;var kZ="SelectTrigger",LZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,s=sE(r),a=pc(kZ,r),o=a.disabled||n,l=qe(e,a.onTriggerChange),u=iE(r),d=E.useRef("touch"),[A,f,h]=iJ(p=>{const g=u().filter(y=>!y.disabled),x=g.find(y=>y.value===a.value),v=sJ(g,p,x);v!==void 0&&a.onValueChange(v.value)}),m=p=>{o||(a.onOpenChange(!0),h()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return c.jsx(e6,{asChild:!0,...s,children:c.jsx(De.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":nJ(a.value)?"":void 0,...i,ref:l,onClick:Ie(i.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&m(p)}),onPointerDown:Ie(i.onPointerDown,p=>{d.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(m(p),p.preventDefault())}),onKeyDown:Ie(i.onKeyDown,p=>{const g=A.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(g&&p.key===" ")&&UXe.includes(p.key)&&(m(),p.preventDefault())})})})});LZ.displayName=kZ;var jZ="SelectValue",MZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:a="",...o}=t,l=pc(jZ,r),{onValueNodeHasChildrenChange:u}=l,d=s!==void 0,A=qe(e,l.onValueNodeChange);return Ur(()=>{u(d)},[u,d]),c.jsx(De.span,{...o,ref:A,style:{pointerEvents:"none"},children:nJ(l.value)?c.jsx(c.Fragment,{children:a}):s})});MZ.displayName=jZ;var GXe="SelectIcon",DZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return c.jsx(De.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});DZ.displayName=GXe;var zXe="SelectPortal",OZ=t=>c.jsx(aw,{asChild:!0,...t});OZ.displayName=zXe;var Ou="SelectContent",FZ=E.forwardRef((t,e)=>{const r=pc(Ou,t.__scopeSelect),[n,i]=E.useState();if(Ur(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?No.createPortal(c.jsx(UZ,{scope:t.__scopeSelect,children:c.jsx(nE.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),s):null}return c.jsx($Z,{...t,ref:e})});FZ.displayName=Ou;var ls=10,[UZ,mc]=Gf(Ou),WXe="SelectContentImpl",YXe=IA("SelectContent.RemoveScroll"),$Z=E.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:A,collisionBoundary:f,collisionPadding:h,sticky:m,hideWhenDetached:p,avoidCollisions:g,...x}=t,v=pc(Ou,r),[y,w]=E.useState(null),[b,S]=E.useState(null),C=qe(e,z=>w(z)),[T,B]=E.useState(null),[_,I]=E.useState(null),L=iE(r),[N,R]=E.useState(!1),M=E.useRef(!1);E.useEffect(()=>{if(y)return mK(y)},[y]),oK();const k=E.useCallback(z=>{const[ae,...X]=L().map(G=>G.ref.current),[ne]=X.slice(-1),ee=document.activeElement;for(const G of z)if(G===ee||(G==null||G.scrollIntoView({block:"nearest"}),G===ae&&b&&(b.scrollTop=0),G===ne&&b&&(b.scrollTop=b.scrollHeight),G==null||G.focus(),document.activeElement!==ee))return},[L,b]),O=E.useCallback(()=>k([T,y]),[k,T,y]);E.useEffect(()=>{N&&O()},[N,O]);const{onOpenChange:j,triggerPointerDownPosRef:D}=v;E.useEffect(()=>{if(y){let z={x:0,y:0};const ae=ne=>{var ee,G;z={x:Math.abs(Math.round(ne.pageX)-(((ee=D.current)==null?void 0:ee.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((G=D.current)==null?void 0:G.y)??0))}},X=ne=>{z.x<=10&&z.y<=10?ne.preventDefault():y.contains(ne.target)||j(!1),document.removeEventListener("pointermove",ae),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",X,{capture:!0})}}},[y,j,D]),E.useEffect(()=>{const z=()=>j(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[j]);const[F,$]=iJ(z=>{const ae=L().filter(ee=>!ee.disabled),X=ae.find(ee=>ee.ref.current===document.activeElement),ne=sJ(ae,z,X);ne&&setTimeout(()=>ne.ref.current.focus())}),U=E.useCallback((z,ae,X)=>{const ne=!M.current&&!X;(v.value!==void 0&&v.value===ae||ne)&&(B(z),ne&&(M.current=!0))},[v.value]),K=E.useCallback(()=>y==null?void 0:y.focus(),[y]),V=E.useCallback((z,ae,X)=>{const ne=!M.current&&!X;(v.value!==void 0&&v.value===ae||ne)&&I(z)},[v.value]),q=n==="popper"?i2:QZ,H=q===i2?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:A,collisionBoundary:f,collisionPadding:h,sticky:m,hideWhenDetached:p,avoidCollisions:g}:{};return c.jsx(UZ,{scope:r,content:y,viewport:b,onViewportChange:S,itemRefCallback:U,selectedItem:T,onItemLeave:K,itemTextRefCallback:V,focusSelectedItem:O,selectedItemText:_,position:n,isPositioned:N,searchRef:F,children:c.jsx(MI,{as:YXe,allowPinchZoom:!0,children:c.jsx(jI,{asChild:!0,trapped:v.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:Ie(i,z=>{var ae;(ae=v.trigger)==null||ae.focus({preventScroll:!0}),z.preventDefault()}),children:c.jsx(ag,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:c.jsx(q,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:z=>z.preventDefault(),...x,...H,onPlaced:()=>R(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ie(x.onKeyDown,z=>{const ae=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!ae&&z.key.length===1&&$(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let ne=L().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(z.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const ee=z.target,G=ne.indexOf(ee);ne=ne.slice(G+1)}setTimeout(()=>k(ne)),z.preventDefault()}})})})})})})});$Z.displayName=WXe;var qXe="SelectItemAlignedPosition",QZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,s=pc(Ou,r),a=mc(Ou,r),[o,l]=E.useState(null),[u,d]=E.useState(null),A=qe(e,C=>d(C)),f=iE(r),h=E.useRef(!1),m=E.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:x,focusSelectedItem:v}=a,y=E.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&u&&p&&g&&x){const C=s.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),B=s.valueNode.getBoundingClientRect(),_=x.getBoundingClientRect();if(s.dir!=="rtl"){const ee=_.left-T.left,G=B.left-ee,ge=C.left-G,ye=C.width+ge,Me=Math.max(ye,T.width),ce=window.innerWidth-ls,Be=Xp(G,[ls,Math.max(ls,ce-Me)]);o.style.minWidth=ye+"px",o.style.left=Be+"px"}else{const ee=T.right-_.right,G=window.innerWidth-B.right-ee,ge=window.innerWidth-C.right-G,ye=C.width+ge,Me=Math.max(ye,T.width),ce=window.innerWidth-ls,Be=Xp(G,[ls,Math.max(ls,ce-Me)]);o.style.minWidth=ye+"px",o.style.right=Be+"px"}const I=f(),L=window.innerHeight-ls*2,N=p.scrollHeight,R=window.getComputedStyle(u),M=parseInt(R.borderTopWidth,10),k=parseInt(R.paddingTop,10),O=parseInt(R.borderBottomWidth,10),j=parseInt(R.paddingBottom,10),D=M+k+N+j+O,F=Math.min(g.offsetHeight*5,D),$=window.getComputedStyle(p),U=parseInt($.paddingTop,10),K=parseInt($.paddingBottom,10),V=C.top+C.height/2-ls,q=L-V,H=g.offsetHeight/2,z=g.offsetTop+H,ae=M+k+z,X=D-ae;if(ae<=V){const ee=I.length>0&&g===I[I.length-1].ref.current;o.style.bottom="0px";const G=u.clientHeight-p.offsetTop-p.offsetHeight,ge=Math.max(q,H+(ee?K:0)+G+O),ye=ae+ge;o.style.height=ye+"px"}else{const ee=I.length>0&&g===I[0].ref.current;o.style.top="0px";const ge=Math.max(V,M+p.offsetTop+(ee?U:0)+H)+X;o.style.height=ge+"px",p.scrollTop=ae-V+p.offsetTop}o.style.margin=`${ls}px 0`,o.style.minHeight=F+"px",o.style.maxHeight=L+"px",n==null||n(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,o,u,p,g,x,s.dir,n]);Ur(()=>y(),[y]);const[w,b]=E.useState();Ur(()=>{u&&b(window.getComputedStyle(u).zIndex)},[u]);const S=E.useCallback(C=>{C&&m.current===!0&&(y(),v==null||v(),m.current=!1)},[y,v]);return c.jsx(ZXe,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:h,onScrollButtonChange:S,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:c.jsx(De.div,{...i,ref:A,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});QZ.displayName=qXe;var XXe="SelectPopperPosition",i2=E.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=ls,...s}=t,a=sE(r);return c.jsx(t6,{...a,...s,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});i2.displayName=XXe;var[ZXe,Ak]=Gf(Ou,{}),s2="SelectViewport",HZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,s=mc(s2,r),a=Ak(s2,r),o=qe(e,s.onViewportChange),l=E.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),c.jsx(nE.Slot,{scope:r,children:c.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ie(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:A,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&A){const h=Math.abs(l.current-d.scrollTop);if(h>0){const m=window.innerHeight-ls*2,p=parseFloat(A.style.minHeight),g=parseFloat(A.style.height),x=Math.max(p,g);if(x<m){const v=x+h,y=Math.min(m,v),w=v-y;A.style.height=y+"px",A.style.bottom==="0px"&&(d.scrollTop=w>0?w:0,A.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});HZ.displayName=s2;var KZ="SelectGroup",[JXe,eZe]=Gf(KZ),tZe=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=da();return c.jsx(JXe,{scope:r,id:i,children:c.jsx(De.div,{role:"group","aria-labelledby":i,...n,ref:e})})});tZe.displayName=KZ;var VZ="SelectLabel",GZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=eZe(VZ,r);return c.jsx(De.div,{id:i.id,...n,ref:e})});GZ.displayName=VZ;var Qb="SelectItem",[rZe,zZ]=Gf(Qb),WZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=t,o=pc(Qb,r),l=mc(Qb,r),u=o.value===n,[d,A]=E.useState(s??""),[f,h]=E.useState(!1),m=qe(e,v=>{var y;return(y=l.itemRefCallback)==null?void 0:y.call(l,v,n,i)}),p=da(),g=E.useRef("touch"),x=()=>{i||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(rZe,{scope:r,value:n,disabled:i,textId:p,isSelected:u,onItemTextChange:E.useCallback(v=>{A(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:c.jsx(nE.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:c.jsx(De.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:Ie(a.onFocus,()=>h(!0)),onBlur:Ie(a.onBlur,()=>h(!1)),onClick:Ie(a.onClick,()=>{g.current!=="mouse"&&x()}),onPointerUp:Ie(a.onPointerUp,()=>{g.current==="mouse"&&x()}),onPointerDown:Ie(a.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:Ie(a.onPointerMove,v=>{var y;g.current=v.pointerType,i?(y=l.onItemLeave)==null||y.call(l):g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(a.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=l.onItemLeave)==null||y.call(l))}),onKeyDown:Ie(a.onKeyDown,v=>{var w;((w=l.searchRef)==null?void 0:w.current)!==""&&v.key===" "||($Xe.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});WZ.displayName=Qb;var Wh="SelectItemText",YZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...s}=t,a=pc(Wh,r),o=mc(Wh,r),l=zZ(Wh,r),u=VXe(Wh,r),[d,A]=E.useState(null),f=qe(e,x=>A(x),l.onItemTextChange,x=>{var v;return(v=o.itemTextRefCallback)==null?void 0:v.call(o,x,l.value,l.disabled)}),h=d==null?void 0:d.textContent,m=E.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return Ur(()=>(p(m),()=>g(m)),[p,g,m]),c.jsxs(c.Fragment,{children:[c.jsx(De.span,{id:l.textId,...s,ref:f}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?No.createPortal(s.children,a.valueNode):null]})});YZ.displayName=Wh;var qZ="SelectItemIndicator",XZ=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return zZ(qZ,r).isSelected?c.jsx(De.span,{"aria-hidden":!0,...n,ref:e}):null});XZ.displayName=qZ;var a2="SelectScrollUpButton",ZZ=E.forwardRef((t,e)=>{const r=mc(a2,t.__scopeSelect),n=Ak(a2,t.__scopeSelect),[i,s]=E.useState(!1),a=qe(e,n.onScrollButtonChange);return Ur(()=>{if(r.viewport&&r.isPositioned){let o=function(){const u=l.scrollTop>0;s(u)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?c.jsx(eJ,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});ZZ.displayName=a2;var o2="SelectScrollDownButton",JZ=E.forwardRef((t,e)=>{const r=mc(o2,t.__scopeSelect),n=Ak(o2,t.__scopeSelect),[i,s]=E.useState(!1),a=qe(e,n.onScrollButtonChange);return Ur(()=>{if(r.viewport&&r.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;s(d)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?c.jsx(eJ,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});JZ.displayName=o2;var eJ=E.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,s=mc("SelectScrollButton",r),a=E.useRef(null),o=iE(r),l=E.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),Ur(()=>{var d;const u=o().find(A=>A.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),c.jsx(De.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ie(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:Ie(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:Ie(i.onPointerLeave,()=>{l()})})}),nZe="SelectSeparator",tJ=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return c.jsx(De.div,{"aria-hidden":!0,...n,ref:e})});tJ.displayName=nZe;var l2="SelectArrow",iZe=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=sE(r),s=pc(l2,r),a=mc(l2,r);return s.open&&a.position==="popper"?c.jsx(r6,{...i,...n,ref:e}):null});iZe.displayName=l2;var sZe="SelectBubbleInput",rJ=E.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const i=E.useRef(null),s=qe(n,i),a=hg(e);return E.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&d){const A=new Event("change",{bubbles:!0});d.call(o,e),o.dispatchEvent(A)}},[a,e]),c.jsx(De.select,{...r,style:{...NH,...r.style},ref:s,defaultValue:e})});rJ.displayName=sZe;function nJ(t){return t===""||t===void 0}function iJ(t){const e=Dr(t),r=E.useRef(""),n=E.useRef(0),i=E.useCallback(a=>{const o=r.current+a;e(o),function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),s=E.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function sJ(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let a=aZe(t,Math.max(s,0));i.length===1&&(a=a.filter(u=>u!==r));const l=a.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function aZe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var oZe=RZ,aJ=LZ,lZe=MZ,cZe=DZ,uZe=OZ,oJ=FZ,dZe=HZ,lJ=GZ,cJ=WZ,AZe=YZ,fZe=XZ,uJ=ZZ,dJ=JZ,AJ=tJ;const hZe=oZe,pZe=lZe,fJ=E.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(aJ,{ref:n,className:Z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,c.jsx(cZe,{asChild:!0,children:c.jsx(lg,{className:"h-4 w-4 opacity-50"})})]}));fJ.displayName=aJ.displayName;const hJ=E.forwardRef(({className:t,...e},r)=>c.jsx(uJ,{ref:r,className:Z("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(JH,{className:"h-4 w-4"})}));hJ.displayName=uJ.displayName;const pJ=E.forwardRef(({className:t,...e},r)=>c.jsx(dJ,{ref:r,className:Z("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(lg,{className:"h-4 w-4"})}));pJ.displayName=dJ.displayName;const mJ=E.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>c.jsx(uZe,{children:c.jsxs(oJ,{ref:i,className:Z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[c.jsx(hJ,{}),c.jsx(dZe,{className:Z("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(pJ,{})]})}));mJ.displayName=oJ.displayName;const mZe=E.forwardRef(({className:t,...e},r)=>c.jsx(lJ,{ref:r,className:Z("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));mZe.displayName=lJ.displayName;const gv=E.forwardRef(({className:t,children:e,...r},n)=>c.jsxs(cJ,{ref:n,className:Z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(fZe,{children:c.jsx(Gd,{className:"h-4 w-4"})})}),c.jsx(AZe,{children:e})]}));gv.displayName=cJ.displayName;const gZe=E.forwardRef(({className:t,...e},r)=>c.jsx(AJ,{ref:r,className:Z("-mx-1 my-1 h-px bg-muted",t),...e}));gZe.displayName=AJ.displayName;const xZe=({value:t,onChange:e,showDebug:r=!0,compact:n=!1})=>{const[i,s]=E.useState(null),[a,o]=E.useState([]),[l,u]=E.useState([]),d=E.useRef(0);E.useEffect(()=>{let x;const v=w=>({4:"LB",5:"RB",6:"LT",7:"RT",8:"View",9:"Menu",12:"D-Up",13:"D-Down",14:"D-Left",15:"D-Right"})[w],y=()=>{const b=navigator.getGamepads()[0];b&&(s(b),o(b.buttons),u(b.axes),e&&b.buttons.forEach((S,C)=>{if(S.pressed&&Date.now()-d.current>300){let T;b.buttons[4].pressed?T="LB":b.buttons[5].pressed?T="RB":b.buttons[6].value>.5?T="LT":b.buttons[7].value>.5?T="RT":b.buttons[8].pressed?T="View":b.buttons[9].pressed?T="Menu":b.buttons[12].pressed?T="D-Up":b.buttons[13].pressed?T="D-Down":b.buttons[14].pressed?T="D-Left":b.buttons[15].pressed&&(T="D-Right");const B=[4,5,6,7,8,9,12,13,14,15].includes(C);(!B||B&&T&&T!==v(C))&&(e({buttonIndex:C,modifier:T}),d.current=Date.now())}})),x=requestAnimationFrame(y)};return window.addEventListener("gamepadconnected",w=>{console.log("Gamepad connected:",w.gamepad),y()}),window.addEventListener("gamepaddisconnected",()=>{s(null),o([]),u([])}),y(),()=>{x&&cancelAnimationFrame(x)}},[e]);const A=x=>{var v;return((v=a[x])==null?void 0:v.pressed)||!1},f=x=>{var v;return((v=a[x])==null?void 0:v.value)||0},h=x=>(t==null?void 0:t.buttonIndex)===x,m=x=>(t==null?void 0:t.modifier)===x,p=(x,v="fill-blue-500 stroke-blue-400",y="fill-white/10 stroke-white/20")=>A(x)?"fill-emerald-500 stroke-emerald-400":h(x)?v:y,g=n?"bg-zinc-950/30 rounded-xl p-4 border border-zinc-800/50":"max-w-4xl w-full bg-zinc-950/50 rounded-2xl p-8 backdrop-blur-sm border border-zinc-800";return c.jsx("div",{className:n?"":"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900 flex items-center justify-center p-8",children:c.jsxs("div",{className:n?"":"max-w-4xl w-full",children:[!n&&c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Gamepad Visualizer"}),c.jsx("p",{className:"text-zinc-400",children:i?`Connected: ${i.id}`:"No gamepad detected - Press any button to connect"})]}),c.jsxs("div",{className:g,children:[c.jsx("div",{className:"flex justify-center mb-6",children:c.jsxs("svg",{width:n?"400":"520",height:n?"350":"500",viewBox:"0 0 520 500",className:"select-none max-w-full h-auto",children:[c.jsx("path",{d:"M505.765,151.733c-16.255-10.392-4.528-16.329-21.353-29.193c-16.824-12.864-85.104-34.639-96.983-24.743 s-25.233,11.873-25.233,11.873h-72.112h-0.122h-72.118c0,0-13.36-1.977-25.233-11.873c-11.873-9.896-80.16,11.873-96.983,24.743 c-16.824,12.864-5.098,18.801-21.353,29.193C58.02,162.125,15.467,305.619,15.467,305.619s-55.417,159.824,43.544,179.12 c0,0,24.248-15.336,45.025-40.079c20.784-24.743,61.353-59.872,83.128-60.368c21.298-0.483,99.389-0.019,102.792,0l0,0 c0,0,0.024,0,0.061,0c0.043,0,0.062,0,0.062,0l0,0c3.403-0.019,81.494-0.483,102.792,0c21.769,0.496,62.345,35.625,83.128,60.368 s45.024,40.079,45.024,40.079c98.961-19.296,43.544-179.12,43.544-179.12S522.02,162.125,505.765,151.733z",className:"fill-zinc-900 stroke-zinc-700 stroke-2"}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("rect",{x:"100",y:"80",width:"50",height:"20",rx:"5",className:`stroke-2 ${p(4,m("LB")?"fill-blue-500 stroke-blue-400":void 0)}`}),c.jsx("text",{x:"125",y:"90",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"LB"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("rect",{x:"370",y:"80",width:"50",height:"20",rx:"5",className:`stroke-2 ${p(5,m("RB")?"fill-blue-500 stroke-blue-400":void 0)}`}),c.jsx("text",{x:"395",y:"90",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"RB"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("rect",{x:"80",y:"50",width:"50",height:"18",rx:"5",className:`stroke-2 ${p(6,m("LT")?"fill-blue-500 stroke-blue-400":void 0)}`,style:{opacity:.3+f(6)*.7}}),c.jsx("text",{x:"105",y:"59",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"LT"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("rect",{x:"390",y:"50",width:"50",height:"18",rx:"5",className:`stroke-2 ${p(7,m("RT")?"fill-blue-500 stroke-blue-400":void 0)}`,style:{opacity:.3+f(7)*.7}}),c.jsx("text",{x:"415",y:"59",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"RT"})]}),c.jsxs("g",{transform:"translate(142, 211)",children:[c.jsx("path",{d:"M -15 -5 L -5 -5 L -5 -15 L 5 -15 L 5 -5 L 15 -5 L 15 5 L 5 5 L 5 15 L -5 15 L -5 5 L -15 5 Z",className:"fill-zinc-800 stroke-zinc-700"}),c.jsx("rect",{x:"-5",y:"-20",width:"10",height:"10",rx:"4",className:`stroke-2 ${p(12,m("D-Up")?"fill-blue-500 stroke-blue-400":"fill-transparent stroke-transparent","fill-transparent stroke-transparent")}`}),c.jsx("rect",{x:"-5",y:"10",width:"10",height:"10",rx:"4",className:`stroke-2 ${p(13,m("D-Down")?"fill-blue-500 stroke-blue-400":"fill-transparent stroke-transparent","fill-transparent stroke-transparent")}`}),c.jsx("rect",{x:"-20",y:"-5",width:"10",height:"10",rx:"4",className:`stroke-2 ${p(14,m("D-Left")?"fill-blue-500 stroke-blue-400":"fill-transparent stroke-transparent","fill-transparent stroke-transparent")}`}),c.jsx("rect",{x:"10",y:"-5",width:"10",height:"10",rx:"4",className:`stroke-2 ${p(15,m("D-Right")?"fill-blue-500 stroke-blue-400":"fill-transparent stroke-transparent","fill-transparent stroke-transparent")}`}),c.jsx("circle",{r:"2",className:"fill-zinc-600"})]}),c.jsxs("g",{transform:"translate(365, 251)",children:[c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:"0",cy:"20",r:"13",className:`stroke-2 ${p(0,"fill-green-500 stroke-green-400","fill-green-900/50 stroke-green-500/50")}`}),c.jsx("text",{x:"0",y:"20",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"A"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:"20",cy:"0",r:"13",className:`stroke-2 ${p(1,"fill-red-500 stroke-red-400","fill-red-900/50 stroke-red-500/50")}`}),c.jsx("text",{x:"20",y:"0",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"B"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:"-20",cy:"0",r:"13",className:`stroke-2 ${p(2,"fill-blue-500 stroke-blue-400","fill-blue-900/50 stroke-blue-500/50")}`}),c.jsx("text",{x:"-20",y:"0",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"X"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:"0",cy:"-20",r:"13",className:`stroke-2 ${p(3,"fill-yellow-500 stroke-yellow-400","fill-yellow-900/50 stroke-yellow-500/50")}`}),c.jsx("text",{x:"0",y:"-20",textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"Y"})]})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:"220",cy:"200",r:"8",className:`stroke-2 ${p(8,m("View")?"fill-blue-500 stroke-blue-400":void 0)}`}),c.jsx("text",{x:"220",y:"200",textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] fill-white pointer-events-none font-bold",children:""})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:"300",cy:"200",r:"8",className:`stroke-2 ${p(9,m("Menu")?"fill-blue-500 stroke-blue-400":void 0)}`}),c.jsx("text",{x:"300",y:"200",textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] fill-white pointer-events-none font-bold",children:""})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:142+(l[0]||0)*10,cy:170+(l[1]||0)*10,r:"20",className:`stroke-2 ${p(10,"fill-blue-500 stroke-blue-400","fill-white/10 stroke-zinc-600")}`}),c.jsx("text",{x:142+(l[0]||0)*10,y:170+(l[1]||0)*10,textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"L3"})]}),c.jsxs("g",{className:"cursor-pointer hover:opacity-80 transition-opacity",children:[c.jsx("circle",{cx:315+(l[2]||0)*10,cy:300+(l[3]||0)*10,r:"20",className:`stroke-2 ${p(11,"fill-blue-500 stroke-blue-400","fill-white/10 stroke-zinc-600")}`}),c.jsx("text",{x:315+(l[2]||0)*10,y:300+(l[3]||0)*10,textAnchor:"middle",dominantBaseline:"middle",className:"text-[12px] fill-white pointer-events-none font-bold",children:"R3"})]})]})}),r&&i&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-4",children:[c.jsxs("div",{className:"bg-zinc-900/80 rounded-lg p-4 border border-zinc-800",children:[c.jsx("h3",{className:"text-white font-semibold mb-3 border-b border-zinc-700 pb-2",children:"Buttons"}),c.jsx("div",{className:"space-y-1 text-zinc-400 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:a.map((x,v)=>c.jsxs("div",{className:"flex justify-between items-center py-0.5",children:[c.jsxs("span",{className:"font-mono text-[10px] opacity-70",children:[v===4?"LB":v===5?"RB":v===6?"LT":v===7?"RT":v===0?"A":v===1?"B":v===2?"X":v===3?"Y":v===12?"Up":v===13?"Down":v===14?"Left":v===15?"Right":`Btn ${v}`,":"]}),c.jsxs("span",{className:`${x.pressed?"text-emerald-400 font-bold":""} transition-colors min-w-[120px] text-right`,children:[x.pressed?"Pressed":"Released"," (",x.value.toFixed(2),")"]})]},v))})]}),c.jsxs("div",{className:"bg-zinc-900/80 rounded-lg p-4 border border-zinc-800",children:[c.jsx("h3",{className:"text-white font-semibold mb-3 border-b border-zinc-700 pb-2",children:"Axes"}),c.jsx("div",{className:"space-y-1 text-zinc-400",children:l.map((x,v)=>c.jsxs("div",{className:"flex justify-between items-center py-0.5",children:[c.jsxs("span",{className:"font-mono text-[10px] opacity-70",children:[v===0?"LX":v===1?"LY":v===2?"RX":v===3?"RY":`Axis ${v}`,":"]}),c.jsx("span",{className:`font-mono ${Math.abs(x)>.1?"text-blue-400":""}`,children:x.toFixed(2)})]},v))})]})]})]})]})})},vZe=()=>{var p,g,x,v;const{events:t,updateEvent:e,resetToDefaults:r,isLoading:n}=Tf(),[i,s]=E.useState(null),[a,o]=E.useState(!1),[l,u]=E.useState({}),d=y=>{s(y),u({...y}),o(!0)},A=()=>{const y=l.gamepadMappings||[];u({...l,gamepadMappings:[...y,{buttonIndex:0,mode:"LIVE",isHold:!1}]})},f=y=>{const w=[...l.gamepadMappings||[]];w.splice(y,1),u({...l,gamepadMappings:w})},h=(y,w,b)=>{const S=[...l.gamepadMappings||[]];S[y]={...S[y],[w]:b},u({...l,gamepadMappings:S})},m=async()=>{i&&l&&(await e({...i,...l}),o(!1))};return n?c.jsx("div",{children:"Loading configuration..."}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center bg-black/40 p-4 rounded-lg border border-border/50",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-white",children:"Event Configuration Registry"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage event definitions, durations, and file naming conventions."})]}),c.jsxs(te,{variant:"destructive",size:"sm",onClick:r,children:[c.jsx(po,{className:"w-4 h-4 mr-2"}),"Reset to Defaults"]})]}),c.jsx("div",{className:"rounded-md border border-border/50 bg-black/20 backdrop-blur-sm",children:c.jsx(Zn,{className:"h-[600px]",children:c.jsxs(lA,{children:[c.jsx(cA,{className:"bg-muted/10 sticky top-0 backdrop-blur-md z-10",children:c.jsxs(ci,{children:[c.jsx(ir,{className:"w-[50px]",children:"ID"}),c.jsx(ir,{children:"Category"}),c.jsx(ir,{children:"Event Name"}),c.jsx(ir,{children:"Duration (s)"}),c.jsx(ir,{children:"Modes"}),c.jsx(ir,{children:"Interaction"}),c.jsx(ir,{children:"Gamepad"}),c.jsx(ir,{children:"Clip"}),c.jsx(ir,{children:"Output Path Pattern"}),c.jsx(ir,{className:"text-right",children:"Actions"})]})}),c.jsx(uA,{children:t.map(y=>{var w;return c.jsxs(ci,{className:"hover:bg-muted/5 transition-colors",children:[c.jsx(qt,{className:"font-mono text-xs text-muted-foreground",children:y.id}),c.jsx(qt,{children:c.jsx(We,{variant:"outline",className:"bg-primary/10 border-primary/20",children:y.category})}),c.jsx(qt,{className:"font-medium text-white",children:y.label}),c.jsxs(qt,{children:[y.defaultDuration[0],"s - ",y.defaultDuration[1],"s"]}),c.jsx(qt,{children:c.jsxs("div",{className:"flex gap-1",children:[y.isRealTime&&c.jsx(We,{variant:"secondary",className:"text-[10px]",children:"LIVE"}),y.isPostMatch&&c.jsx(We,{variant:"secondary",className:"text-[10px]",children:"POST"})]})}),c.jsx(qt,{children:c.jsxs("div",{className:"flex gap-1",children:[y.requiresZone&&c.jsx(We,{variant:"outline",className:"text-[10px] border-amber-500/50 text-amber-500",children:"ZONE"}),y.requiresDuration&&c.jsx(We,{variant:"outline",className:"text-[10px] border-blue-500/50 text-blue-500",children:"DUR"})]})}),c.jsx(qt,{children:c.jsx("div",{className:"flex flex-wrap gap-1 max-w-[150px]",children:(w=y.gamepadMappings)==null?void 0:w.map((b,S)=>c.jsxs(We,{variant:"secondary",className:"text-[10px] bg-blue-500/10 border-blue-500/20 text-blue-400",children:[b.modifier?`${b.modifier}+`:"",b.isHold?"Hold ":"",b.buttonIndex]},S))})}),c.jsx(qt,{children:c.jsx("div",{className:"flex gap-1",children:y.clippingEnabled?c.jsx(We,{variant:"outline",className:"text-[10px] border-green-500/50 text-green-500",children:"YES"}):c.jsx(We,{variant:"outline",className:"text-[10px] border-red-500/50 text-red-500 opacity-50",children:"NO"})})}),c.jsxs(qt,{className:"font-mono text-xs text-muted-foreground truncate max-w-[200px]",title:y.folderPath+y.filenameConvention,children:[y.folderPath,"...",y.filenameConvention]}),c.jsx(qt,{className:"text-right",children:c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>d(y),children:c.jsx(d8,{className:"w-4 h-4 text-primary"})})})]},y.id)})})]})})}),c.jsx(Ba,{open:a,onOpenChange:o,children:c.jsxs(Rs,{className:"sm:max-w-[600px] bg-zinc-950 border-zinc-800 text-white",children:[c.jsx(ks,{children:c.jsxs(Ls,{children:["Edit Event: ",i==null?void 0:i.label]})}),c.jsxs("div",{className:"grid gap-4 py-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Category"}),c.jsx(jr,{value:l.category||"",onChange:y=>u({...l,category:y.target.value}),className:"bg-black/50 border-white/10"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Display Label"}),c.jsx(jr,{value:l.label||"",onChange:y=>u({...l,label:y.target.value}),className:"bg-black/50 border-white/10"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Duration Min (s)"}),c.jsx(jr,{type:"number",value:((p=l.defaultDuration)==null?void 0:p[0])||0,onChange:y=>{var w;return u({...l,defaultDuration:[parseInt(y.target.value),((w=l.defaultDuration)==null?void 0:w[1])||0]})},className:"bg-black/50 border-white/10"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Duration Max (s)"}),c.jsx(jr,{type:"number",value:((g=l.defaultDuration)==null?void 0:g[1])||0,onChange:y=>{var w;return u({...l,defaultDuration:[((w=l.defaultDuration)==null?void 0:w[0])||0,parseInt(y.target.value)]})},className:"bg-black/50 border-white/10"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Folder Path"}),c.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Use 'DATE' for match date placeholder."}),c.jsx(jr,{value:l.folderPath||"",onChange:y=>u({...l,folderPath:y.target.value}),className:"bg-black/50 border-white/10 font-mono text-xs"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Filename Convention"}),c.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Use 'MIN' and 'SEC' as placeholders."}),c.jsx(jr,{value:l.filenameConvention||"",onChange:y=>u({...l,filenameConvention:y.target.value}),className:"bg-black/50 border-white/10 font-mono text-xs"})]}),c.jsxs("div",{className:"flex gap-6 pt-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(al,{id:"realtime",checked:l.isRealTime,onCheckedChange:y=>u({...l,isRealTime:!!y})}),c.jsx("label",{htmlFor:"realtime",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Live"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(al,{id:"postmatch",checked:l.isPostMatch,onCheckedChange:y=>u({...l,isPostMatch:!!y})}),c.jsx("label",{htmlFor:"postmatch",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Post"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(al,{id:"requiresZone",checked:l.requiresZone,onCheckedChange:y=>u({...l,requiresZone:!!y})}),c.jsx("label",{htmlFor:"requiresZone",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Zone"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(al,{id:"requiresDuration",checked:l.requiresDuration,onCheckedChange:y=>u({...l,requiresDuration:!!y})}),c.jsx("label",{htmlFor:"requiresDuration",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Duration"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(al,{id:"clippingEnabled",checked:l.clippingEnabled,onCheckedChange:y=>u({...l,clippingEnabled:!!y})}),c.jsx("label",{htmlFor:"clippingEnabled",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Clip"})]})]})]}),c.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("label",{className:"text-sm font-medium text-white",children:"Gamepad Mappings"}),c.jsxs(te,{type:"button",variant:"outline",size:"sm",onClick:A,className:"h-7 text-xs",children:[c.jsx(Hx,{className:"w-3 h-3 mr-1"})," Add Mapping"]})]}),c.jsxs("div",{className:"space-y-2",children:[(((x=l.gamepadMappings)==null?void 0:x.length)===0||!l.gamepadMappings)&&c.jsx("div",{className:"text-xs text-muted-foreground italic py-2 text-center bg-black/20 rounded",children:"No mappings configured"}),(v=l.gamepadMappings)==null?void 0:v.map((y,w)=>c.jsxs("div",{className:"flex items-center gap-2 bg-black/40 p-2 rounded border border-white/5",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground block mb-1",children:"Binding (Modifier + Btn)"}),c.jsx(xZe,{showDebug:!1,compact:!0,value:{buttonIndex:y.buttonIndex,modifier:y.modifier},onChange:b=>{const S=[...l.gamepadMappings||[]];S[w]={...S[w],buttonIndex:b.buttonIndex,modifier:b.modifier},u({...l,gamepadMappings:S})}})]}),c.jsxs("div",{className:"w-[80px]",children:[c.jsx("label",{className:"text-[10px] text-muted-foreground block mb-1",children:"Mode"}),c.jsxs(hZe,{value:y.mode||"LIVE",onValueChange:b=>h(w,"mode",b),children:[c.jsx(fJ,{className:"h-7 text-xs bg-black/50 border-white/10",children:c.jsx(pZe,{})}),c.jsxs(mJ,{children:[c.jsx(gv,{value:"LIVE",children:"Live"}),c.jsx(gv,{value:"POST",children:"Post"}),c.jsx(gv,{value:"BOTH",children:"Both"})]})]})]}),c.jsx("div",{className:"flex items-center pt-5 px-2",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(al,{id:`hold-${w}`,checked:y.isHold||!1,onCheckedChange:b=>h(w,"isHold",b===!0)}),c.jsx("label",{htmlFor:`hold-${w}`,className:"text-xs cursor-pointer",children:"Hold"})]})}),c.jsx("div",{className:"ml-auto pt-4",children:c.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-400 hover:text-red-300 hover:bg-red-900/20",onClick:()=>f(w),children:c.jsx(iu,{className:"w-3 h-3"})})})]},w))]})]})]}),c.jsxs(mg,{children:[c.jsx(te,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),c.jsxs(te,{onClick:m,className:"gap-2",children:[c.jsx(uw,{className:"w-4 h-4"}),"Save Changes"]})]})]})})]})},yZe={Dashboard:["dashboard.view","dashboard.live.view","dashboard.live.match_control","dashboard.live.voice","dashboard.live.stream.view","dashboard.live.stream.manage","dashboard.post.view","dashboard.post.upload","dashboard.export"],"Post-Match Editing":["dashboard.post.edit","dashboard.post.delete","dashboard.post.assign_player"],"Video & Telestration":["video.annotation","video.calibration","video.player_tracking","video.export_data","video.import_data"],"Quality & Crowd":["qa.view","qa.verify","qa.bulk_verify","qa.edit_metadata","qa.resolve_pass","crowd.request","monitoring.view"],Analytics:["analytics.view","analytics.advanced","analytics.kpi","stats.view"],"Admin & Config":["admin.view","admin.users","config.controller","config.teams","community.view"]};function bZe(){const{toast:t}=lc(),{logout:e}=Ta(),[r,n]=E.useState([]),[i,s]=E.useState({username:"",password:"",role:"operational_analyst",name:""}),[a,o]=E.useState(null),[l,u]=E.useState([]);E.useEffect(()=>{d()},[]);const d=async()=>{try{const y=localStorage.getItem("tacta_token"),w=await fetch(`${hr}/api/users`,{headers:{...xl,Authorization:`Bearer ${y}`}});if(w.ok){const b=await w.json();n(b)}}catch(y){console.error("Failed to fetch users",y)}},A=async()=>{try{const y=localStorage.getItem("tacta_token");(await fetch(`${hr}/api/users`,{method:"POST",headers:{...xl,Authorization:`Bearer ${y}`},body:JSON.stringify(i)})).ok&&(t({title:"User Added",description:`${i.username} created successfully.`}),s({username:"",password:"",role:"operational_analyst",name:""}),d())}catch{t({title:"Error",description:"Failed to create user",variant:"destructive"})}},f=async y=>{try{const w=localStorage.getItem("tacta_token");(await fetch(`${hr}/api/users/${y}`,{method:"DELETE",headers:{...xl,Authorization:`Bearer ${w}`}})).ok&&(t({title:"User Deleted"}),d())}catch{t({title:"Error",description:"Failed to delete user",variant:"destructive"})}},h=y=>{o(y),u(y.effectivePermissions||[])},m=y=>{u(w=>w.includes(y)?w.filter(b=>b!==y):[...w,y])},[p,g]=E.useState(()=>localStorage.getItem("tacta_auto_extract")==="true"),x=y=>{g(y),localStorage.setItem("tacta_auto_extract",y.toString()),t({title:y?"Auto-Clip Enabled":"Auto-Clip Disabled",description:"Global setting updated."})},v=async()=>{if(a)try{const y=localStorage.getItem("tacta_token");(await fetch(`${hr}/api/users/${a.id}`,{method:"PUT",headers:{...xl,Authorization:`Bearer ${y}`},body:JSON.stringify({permissions:l})})).ok&&(t({title:"Permissions Updated",description:`Access rights updated for ${a.username}`}),o(null),d())}catch{t({title:"Error",description:"Failed to update permissions",variant:"destructive"})}};return c.jsxs("div",{className:"p-8 space-y-8 bg-slate-950 min-h-screen text-slate-50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white mb-2",children:"Admin Portal"}),c.jsx("p",{className:"text-slate-400",children:"System Configuration & User Management"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"outline",onClick:()=>window.location.href="/",children:"Back to Dashboard"}),c.jsx(te,{variant:"destructive",onClick:e,children:"Logout"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs(Fe,{className:"bg-slate-900 border-slate-800 lg:col-span-1 h-fit",children:[c.jsxs(Dt,{children:[c.jsxs(Ot,{className:"flex items-center gap-2",children:[c.jsx(zne,{className:"w-5 h-5 text-emerald-500"})," Create User"]}),c.jsx(yi,{children:"Add a new analyst or controller to the system."})]}),c.jsxs(vt,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Full Name"}),c.jsx(jr,{value:i.name,onChange:y=>s({...i,name:y.target.value}),placeholder:"John Doe",className:"bg-slate-950 border-slate-800"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Username"}),c.jsx(jr,{value:i.username,onChange:y=>s({...i,username:y.target.value}),placeholder:"jdoe",className:"bg-slate-950 border-slate-800"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Password"}),c.jsx(jr,{type:"password",value:i.password,onChange:y=>s({...i,password:y.target.value}),placeholder:"",className:"bg-slate-950 border-slate-800"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Role"}),c.jsxs("select",{className:"w-full h-10 rounded-md border border-slate-800 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:outline-none focus:ring-2 focus:ring-emerald-500",value:i.role,onChange:y=>s({...i,role:y.target.value}),children:[c.jsx("option",{value:"operational_analyst",children:"Operational Analyst"}),c.jsx("option",{value:"tactical_analyst",children:"Tactical Analyst"}),c.jsx("option",{value:"quality_controller",children:"Quality Controller"}),c.jsx("option",{value:"admin",children:"Admin"})]})]}),c.jsx(te,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:A,children:"Create Account"})]})]}),c.jsxs(Fe,{className:"bg-slate-900 border-slate-800 lg:col-span-2",children:[c.jsxs(Dt,{children:[c.jsxs(Ot,{className:"flex items-center gap-2",children:[c.jsx(Zl,{className:"w-5 h-5 text-blue-500"})," System Users"]}),c.jsx(yi,{children:"Manage access capabilities and permissions."})]}),c.jsx(vt,{children:c.jsxs(lA,{children:[c.jsx(cA,{children:c.jsxs(ci,{className:"hover:bg-transparent border-slate-800",children:[c.jsx(ir,{className:"text-slate-400",children:"User"}),c.jsx(ir,{className:"text-slate-400",children:"Role"}),c.jsx(ir,{className:"text-slate-400",children:"Permissions"}),c.jsx(ir,{className:"text-right text-slate-400",children:"Actions"})]})}),c.jsx(uA,{children:r.map(y=>{var w,b;return c.jsxs(ci,{className:"hover:bg-slate-800/50 border-slate-800",children:[c.jsxs(qt,{children:[c.jsx("div",{className:"font-medium text-slate-200",children:y.name}),c.jsxs("div",{className:"text-xs text-slate-500",children:["@",y.username]})]}),c.jsx(qt,{children:c.jsx(We,{variant:"outline",className:"bg-slate-950 border-slate-700 text-slate-400 font-mono",children:y.role})}),c.jsx(qt,{children:c.jsx("div",{className:"flex flex-wrap gap-1",children:(w=y.effectivePermissions)!=null&&w.includes("*")?c.jsx(We,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20 text-[10px]",children:"SUPERUSER"}):c.jsx(c.Fragment,{children:c.jsxs(We,{variant:"secondary",className:"text-[10px]",children:[((b=y.effectivePermissions)==null?void 0:b.length)||0," active"]})})})}),c.jsx(qt,{className:"text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsxs(Ba,{open:(a==null?void 0:a.id)===y.id,onOpenChange:S=>!S&&o(null),children:[c.jsx(EP,{asChild:!0,children:c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>h(y),className:"h-8 w-8 text-blue-400 hover:text-blue-300 hover:bg-blue-400/10",children:c.jsx(hne,{className:"w-4 h-4"})})}),c.jsxs(Rs,{className:"max-w-4xl bg-slate-950 border-slate-800 text-slate-50",children:[c.jsxs(ks,{children:[c.jsxs(Ls,{children:["Edit Permissions: ",a==null?void 0:a.name]}),c.jsx(Nf,{children:"Toggle specific capabilities. These override role defaults."})]}),c.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6 py-4 max-h-[60vh] overflow-y-auto",children:Object.entries(yZe).map(([S,C])=>c.jsxs("div",{className:"space-y-3 p-4 rounded-lg bg-slate-900/50 border border-slate-800",children:[c.jsx("h4",{className:"font-bold text-sm text-slate-400 uppercase tracking-wider border-b border-slate-800 pb-2 mb-2",children:S}),c.jsx("div",{className:"space-y-2",children:C.map(T=>c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(al,{id:T,checked:l.includes(T)||l.includes("*"),onCheckedChange:()=>m(T),disabled:l.includes("*"),className:"data-[state=checked]:bg-blue-600 border-slate-600"}),c.jsx("label",{htmlFor:T,className:"text-xs font-mono text-slate-300 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 pt-0.5",children:T})]},T))})]},S))}),c.jsxs(mg,{children:[c.jsx(te,{variant:"ghost",onClick:()=>o(null),children:"Cancel"}),c.jsxs(te,{onClick:v,className:"bg-blue-600 hover:bg-blue-700",children:[c.jsx(uw,{className:"w-4 h-4 mr-2"})," Save Changes"]})]})]})]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>f(y.id),className:"h-8 w-8 text-red-500 hover:text-red-400 hover:bg-red-500/10",children:c.jsx(iu,{className:"w-4 h-4"})})]})})]},y.id)})})]})})]}),c.jsxs(Fe,{className:"bg-slate-900 border-slate-800 lg:col-span-3",children:[c.jsxs(Dt,{children:[c.jsxs(Ot,{className:"flex items-center gap-2",children:[c.jsx(fI,{className:"w-5 h-5 text-gray-400"})," Global System Settings"]}),c.jsx(yi,{children:"Configure system-wide automation and behavior."})]}),c.jsx(vt,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-slate-950/50 border border-slate-800",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("label",{className:"text-sm font-medium text-white flex items-center gap-2",children:[c.jsx(m8,{className:"w-4 h-4 text-purple-400"})," Auto-Clip Extraction"]}),c.jsx("p",{className:"text-xs text-slate-400",children:"Automatically create 10s video clips when events are tagged (requires video source)."})]}),c.jsx(qI,{checked:p,onCheckedChange:x,className:"data-[state=checked]:bg-purple-600"})]})})]}),c.jsx(Fe,{className:"bg-slate-900 border-slate-800 lg:col-span-3",children:c.jsx(vt,{className:"p-0",children:c.jsx(vZe,{})})})]})]})}const Zr=({active:t,children:e,className:r=""})=>t?c.jsx("div",{className:`w-full h-full flex flex-col p-8 overflow-hidden animate-in fade-in duration-500 ${r}`,children:e}):null,wZe=()=>{const[t,e]=E.useState(0),[r,n]=E.useState(!1),i=17,s=()=>e(o=>Math.min(o+1,i-1)),a=()=>e(o=>Math.max(o-1,0));return E.useEffect(()=>{const o=l=>{l.key==="ArrowRight"&&s(),l.key==="ArrowLeft"&&a()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]),c.jsxs("div",{className:"min-h-screen bg-slate-900 text-white font-sans selection:bg-green-500 selection:text-white",children:[c.jsxs("nav",{className:"fixed top-0 left-0 w-full z-50 bg-slate-900/90 backdrop-blur border-b border-slate-700 px-6 py-3 flex justify-between items-center text-white",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-green-600 rounded flex items-center justify-center font-bold",children:"T"}),c.jsxs("span",{className:"font-bold tracking-wider",children:["TACTA ",c.jsx("span",{className:"text-slate-400 text-sm font-normal",children:"| AUDIT INTER"})]})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:()=>n(!r),className:`px-3 py-1 rounded text-xs font-bold uppercase transition ${r?"bg-red-500 text-white animate-pulse":"bg-slate-800 text-slate-400 hover:text-white"}`,children:r?"Editing On":"Edit Mode"}),c.jsx("button",{onClick:a,disabled:t===0,className:"p-2 hover:bg-slate-700 rounded-full transition disabled:opacity-50",children:c.jsx(oI,{size:20})}),c.jsxs("span",{className:"px-4 py-2 bg-slate-800 rounded text-sm font-mono min-w-[80px] text-center",children:[t+1," / ",i]}),c.jsx("button",{onClick:s,disabled:t===i-1,className:"p-2 hover:bg-slate-700 rounded-full transition disabled:opacity-50",children:c.jsx(Io,{size:20})})]})]}),c.jsxs("main",{className:"pt-16 h-screen w-screen overflow-hidden relative font-inter",contentEditable:r,suppressContentEditableWarning:!0,children:[c.jsxs(Zr,{active:t===0,className:"bg-white text-black relative !p-0",children:[c.jsxs("div",{className:"h-full w-full flex flex-col justify-center pl-10 md:pl-20 relative z-10",children:[c.jsx("div",{className:"mb-4 text-green-700 font-bold tracking-widest text-sm uppercase",children:"Rapport Confidentiel"}),c.jsxs("h1",{className:"text-6xl md:text-8xl font-black leading-none mb-6 font-oswald uppercase",children:["De l'Ombre ",c.jsx("br",{}),"la Lumire"]}),c.jsxs("h2",{className:"text-3xl md:text-4xl font-light mb-8 text-slate-600 font-oswald uppercase",children:["Audit de la Ralit",c.jsx("br",{}),"de l'Analyste Vido"]}),c.jsx("div",{className:"w-24 h-2 bg-red-600 mb-8"}),c.jsxs("p",{className:"text-xl max-w-2xl font-light leading-relaxed text-slate-800",children:["Une analyse forensique des ",c.jsx("strong",{children:"142 points de friction"})," qui brisent le mtier, et la voie vers une pratique durable."]}),c.jsxs("div",{className:"mt-12 flex items-center gap-4",children:[c.jsx("div",{className:"px-6 py-3 bg-black text-white font-bold rounded",children:"Inter"}),c.jsx("div",{className:"text-sm text-slate-500 uppercase tracking-widest",children:"Rapport de Situation & Solution Tacta"})]})]}),c.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-slate-100 hidden md:block",style:{clipPath:"polygon(20% 0, 100% 0, 100% 100%, 0% 100%)"}}),c.jsx("div",{className:"absolute bottom-10 right-10 md:right-32 opacity-90 animate-bounce transition-all duration-1000",children:c.jsx(ML,{size:200,className:"text-slate-800",strokeWidth:1})})]}),c.jsxs(Zr,{active:t===1,className:"bg-sky-50 text-slate-800",children:[c.jsxs("h2",{className:"text-4xl font-bold mb-8 text-black font-oswald uppercase",children:["Le Mythe des 90 Minutes vs",c.jsx("br",{}),"La Ralit des 70 Heures"]}),c.jsxs("div",{className:"flex-1 relative w-full max-w-5xl mx-auto mt-8 border-b-4 border-sky-200 h-full flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"text-center z-10 mb-12",children:[c.jsx("div",{className:"text-6xl mb-2",children:""}),c.jsxs("div",{className:"bg-white p-6 shadow-lg rounded-lg border border-sky-100",children:[c.jsx("p",{className:"font-bold text-sky-900 text-xl",children:"Le visible : Le match (90 min)"}),c.jsx("p",{className:"text-sm text-sky-600 mt-1",children:`L'image publique : "Travailler dans le foot"`})]})]}),c.jsx("div",{className:"w-full h-1 bg-sky-300 my-4 relative",children:c.jsx("span",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-sky-100 px-2 text-xs text-sky-600 font-bold uppercase",children:"Surface"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 w-full max-w-4xl",children:[c.jsxs("div",{className:"bg-slate-800 p-6 rounded shadow-xl border-l-4 border-red-500 text-white",children:[c.jsx("h4",{className:"font-bold text-lg mb-1",children:"L'invisible :"}),c.jsx("p",{children:"Semaines de 50  70h"})]}),c.jsx("div",{className:"bg-slate-800 p-6 rounded shadow-xl border-l-4 border-red-500 text-white md:translate-y-8",children:c.jsxs("p",{children:["Dimanche 2h du matin :",c.jsx("br",{}),"Finalisation des rapports"]})}),c.jsxs("div",{className:"bg-slate-800 p-6 rounded shadow-xl border-l-4 border-red-500 text-white md:col-span-2 md:w-2/3 md:mx-auto",children:[c.jsx("p",{className:"font-bold text-red-400 text-lg",children:"87% des weekends travaills"}),c.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Pas de vie personnelle, pas de vacances"})]})]})]}),c.jsx("div",{className:"bg-red-600 text-white p-4 mt-8 font-bold text-center rounded",children:"Statistique cl : Charge de travail excessive et invisible."})]}),c.jsxs(Zr,{active:t===2,className:"bg-white text-black",children:[c.jsxs("h2",{className:"text-4xl font-bold mb-8 font-oswald uppercase",children:["Le Poids de la Friction : ",c.jsx("span",{className:"text-red-600",children:"142 Problmes Identifis"})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-12 items-center justify-center flex-1 h-full",children:[c.jsx("div",{className:"w-full max-w-md aspect-square relative",children:c.jsxs("svg",{viewBox:"0 0 110 165",className:"w-full h-full drop-shadow-lg",children:[c.jsxs("defs",{children:[c.jsx("rect",{id:"cell",width:"9",height:"9",rx:"2",ry:"2"}),c.jsxs("filter",{id:"inner-shadow",children:[c.jsx("feOffset",{dx:"0",dy:"1"}),c.jsx("feGaussianBlur",{stdDeviation:"1",result:"offset-blur"}),c.jsx("feComposite",{operator:"out",in:"SourceGraphic",in2:"offset-blur",result:"inverse"}),c.jsx("feFlood",{floodColor:"black",floodOpacity:"0.2",result:"color"}),c.jsx("feComposite",{operator:"in",in:"color",in2:"inverse",result:"shadow"}),c.jsx("feComposite",{operator:"over",in:"shadow",in2:"SourceGraphic"})]})]}),Array.from({length:150}).map((o,l)=>{const d=l%10*11,A=Math.floor(l/10)*11;let f="#f1f5f9",h="transition-all duration-300 hover:opacity-80";return l<20?f="#dc2626":l<36?f="#f97316":l<51?f="#eab308":l<142?f="#1e293b":f="#e2e8f0",c.jsx("rect",{x:d,y:A,width:"9",height:"9",rx:"1.5",fill:f,className:h},l)})]})}),c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-red-600 rounded"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:"Technique (20)"}),c.jsx("div",{className:"text-sm text-gray-500",children:"quipement coteux, crashes."})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:"Temporel (16)"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Charge insoutenable, deadlines."})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:"Cognitif (15)"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Surcharge, fatigue dcisionnelle."})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:"Autres (91)"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Structurel/Financier, etc."})]})]}),c.jsx("div",{className:"mt-4 p-4 bg-black text-white font-bold text-xl rounded",children:"Total : 142 points de friction distincts"})]})]}),c.jsx("div",{className:"text-center text-xl font-bold italic mt-8 text-slate-500",children:"Ce n'est pas de la malchance, c'est systmique."})]}),c.jsxs(Zr,{active:t===3,className:"bg-slate-50 text-black",children:[c.jsxs("h2",{className:"text-4xl font-bold mb-12 font-oswald uppercase",children:["Le Cauchemar Technique et la ",c.jsx("span",{className:"text-red-600",children:"'Taxe d'Outil'"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center flex-1 h-full max-w-6xl mx-auto",children:[c.jsxs("div",{className:"relative h-96 w-full flex items-center justify-center select-none",children:[c.jsx(ML,{className:"absolute left-10 bottom-10 w-48 h-48 text-slate-400",strokeWidth:1}),c.jsx("div",{className:"absolute left-16 bottom-52 bg-red-600 text-white font-bold px-3 py-1 rounded shadow-lg transform -rotate-12",children:"1500"}),c.jsx(UL,{className:"absolute top-10 left-10 w-32 h-32 text-slate-400",strokeWidth:1}),c.jsx("div",{className:"absolute top-6 left-0 bg-red-600 text-white font-bold px-3 py-1 rounded shadow-lg transform -rotate-12",children:"800"}),c.jsx(FL,{className:"absolute right-10 bottom-20 w-40 h-40 text-slate-400",strokeWidth:1}),c.jsx("div",{className:"absolute right-0 bottom-52 bg-red-600 text-white font-bold px-3 py-1 rounded shadow-lg",children:"5000/an"}),c.jsx("div",{className:"absolute inset-x-0 bottom-0 text-center font-bold text-slate-400",children:"Standard Analyst Setup"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200",children:[c.jsx("h3",{className:"text-2xl font-bold border-b-2 border-black pb-4 mb-6 uppercase font-oswald",children:"Grief List"}),c.jsxs("ul",{className:"space-y-6",children:[c.jsxs("li",{className:"flex items-start gap-4",children:[c.jsx(At,{className:"text-red-600 w-6 h-6 shrink-0 mt-1"}),c.jsxs("span",{children:[c.jsx("strong",{className:"block text-lg",children:"Cot exorbitant"}),"Matriel + Licences coteuses."]})]}),c.jsxs("li",{className:"flex items-start gap-4",children:[c.jsx(At,{className:"text-red-600 w-6 h-6 shrink-0 mt-1"}),c.jsxs("span",{children:[c.jsx("strong",{className:"block text-lg",children:"Instabilit"}),"'Sportscode crash' = perte de 2h de travail."]})]}),c.jsxs("li",{className:"flex items-start gap-4",children:[c.jsx(At,{className:"text-red-600 w-6 h-6 shrink-0 mt-1"}),c.jsxs("span",{children:[c.jsx("strong",{className:"block text-lg",children:"Lourdeur"}),"Fichiers de 15 Go, exports de 20 minutes."]})]}),c.jsxs("li",{className:"flex items-start gap-4",children:[c.jsx(At,{className:"text-red-600 w-6 h-6 shrink-0 mt-1"}),c.jsxs("span",{children:[c.jsx("strong",{className:"block text-lg",children:"Fragmentation"}),"Jongler entre Sportscode, Excel, et PowerPoint."]})]})]})]})]})]}),c.jsxs(Zr,{active:t===4,className:"bg-white text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-12 font-oswald uppercase",children:"L'tau Temporel : Quand le Chronomtre ne s'Arrte Jamais"}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-6xl mx-auto w-full",children:[c.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-2 px-1 text-xs md:text-sm font-bold text-center uppercase tracking-wider text-slate-500",children:[c.jsx("div",{children:"Lun"}),c.jsx("div",{children:"Mar"}),c.jsx("div",{children:"Mer"}),c.jsx("div",{children:"Jeu"}),c.jsx("div",{children:"Ven"}),c.jsx("div",{children:"Sam"}),c.jsx("div",{className:"text-red-600",children:"Dimanche"})]}),c.jsxs("div",{className:"flex h-24 w-full gap-1 mb-12",children:[[1,2,3,4,5].map(o=>c.jsx("div",{className:"flex-1 bg-slate-800 text-white flex flex-col items-center justify-center text-xs md:text-sm rounded-sm",children:c.jsx("span",{className:"opacity-50",children:"TRAVAIL"})},o)),c.jsxs("div",{className:"flex-1 bg-black text-white flex flex-col items-center justify-center font-bold rounded-sm border-2 border-slate-800",children:["MATCH",c.jsx("br",{}),"DAY"]}),c.jsxs("div",{className:"flex-1 bg-red-600 text-white flex flex-col items-center justify-center font-bold text-center text-xs md:text-sm rounded-sm animate-pulse",children:["POST-MATCH",c.jsx("br",{}),"ANALYSIS",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] opacity-90",children:"02:00 AM"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"border-l-4 border-red-600 pl-6 py-2",children:[c.jsx("h4",{className:"font-bold text-red-600 text-xl font-oswald mb-1",children:"10h"}),c.jsx("p",{className:"text-gray-700",children:"de travail par match."})]}),c.jsxs("div",{className:"border-l-4 border-red-600 pl-6 py-2",children:[c.jsx("h4",{className:"font-bold text-red-600 text-xl font-oswald mb-1",children:"60-70h"}),c.jsx("p",{className:"text-gray-700",children:"Moyenne hebdomadaire. Aucune vie sociale."})]}),c.jsxs("div",{className:"border-l-4 border-red-600 pl-6 py-2",children:[c.jsx("h4",{className:"font-bold text-red-600 text-xl font-oswald mb-1",children:"800 Clics"}),c.jsx("p",{className:"text-gray-700",children:"pour taguer seulement 80 clips de jeu."})]}),c.jsxs("div",{className:"border-l-4 border-red-600 pl-6 py-2",children:[c.jsx("h4",{className:"font-bold text-red-600 text-xl font-oswald mb-1",children:"x2 Efforts"}),c.jsx("p",{className:"text-gray-700",children:"Codage temps rel suivi d'un recodage post-match."})]})]})]})]}),c.jsxs(Zr,{active:t===5,className:"bg-slate-900 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),c.jsx("h2",{className:"text-4xl font-bold mb-16 text-center font-oswald uppercase relative z-10",children:"Le Cot Humain : Corps et Esprit  l'preuve"}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center flex-1 gap-16 relative z-10 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"w-full md:w-1/3 space-y-8 bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[c.jsx("h3",{className:"text-2xl font-bold border-b border-white pb-3 font-oswald",children:"Physique (Corps)"}),c.jsxs("ul",{className:"space-y-4",children:[c.jsxs("li",{className:"flex gap-4",children:[c.jsx(At,{className:"text-red-500 w-6 h-6 mt-1 shrink-0"})," ",c.jsx("span",{className:"text-slate-200",children:"TMS : Syndrome du canal carpien, tendinites chroniques."})]}),c.jsxs("li",{className:"flex gap-4",children:[c.jsx(At,{className:"text-red-500 w-6 h-6 mt-1 shrink-0"})," ",c.jsx("span",{className:"text-slate-200",children:"Douleurs cervicales et lombaires (assis 10h/jour)."})]}),c.jsxs("li",{className:"flex gap-4",children:[c.jsx(At,{className:"text-red-500 w-6 h-6 mt-1 shrink-0"})," ",c.jsx("span",{className:"text-slate-200",children:"Fatigue visuelle et maux de tte."})]})]})]}),c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"w-80 h-96 border border-slate-700/50 rounded-3xl flex items-center justify-center bg-slate-800/80 backdrop-blur-sm relative overflow-hidden group shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-700/20 to-transparent pointer-events-none"}),c.jsxs("svg",{viewBox:"0 0 200 400",className:"h-72 w-auto drop-shadow-2xl",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"bodyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#94a3b8"}),c.jsx("stop",{offset:"100%",stopColor:"#cbd5e1"})]}),c.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsxs("radialGradient",{id:"pulseGradient",children:[c.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:"1"}),c.jsx("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:"0"})]})]}),c.jsx("path",{d:"M0 50 H200 M0 150 H200 M0 250 H200 M0 350 H200",stroke:"white",strokeWidth:"0.5",opacity:"0.1"}),c.jsx("path",{d:"M50 0 V400 M150 0 V400",stroke:"white",strokeWidth:"0.5",opacity:"0.1"}),c.jsx("path",{d:`M100 30 C115 30 125 42 125 55 C125 68 115 80 100 80 C85 80 75 68 75 55 C75 42 85 30 100 30 Z \r
                                           M100 85 C125 85 150 95 160 120 L170 170 C172 180 165 190 155 190 L145 190 L150 260 L155 380 C156 390 145 395 140 385 L115 300 L105 300 L85 300 L60 385 C55 395 44 390 45 380 L50 260 L55 190 L45 190 C35 190 28 180 30 170 L40 120 C50 95 75 85 100 85 Z`,fill:"url(#bodyGradient)",opacity:"0.9",stroke:"white",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("path",{d:"M100 80 L100 300",stroke:"white",strokeWidth:"2",opacity:"0.2",strokeDasharray:"5,5"}),c.jsx("line",{x1:"100",y1:"120",x2:"160",y2:"170",stroke:"white",strokeWidth:"1",opacity:"0.2"}),c.jsx("line",{x1:"100",y1:"120",x2:"40",y2:"170",stroke:"white",strokeWidth:"1",opacity:"0.2"}),c.jsx("circle",{cx:"100",cy:"55",r:"6",className:"fill-red-500 animate-pulse",filter:"url(#glow)",children:c.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"2s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"100",cy:"90",r:"8",className:"fill-red-500 animate-pulse",filter:"url(#glow)",children:c.jsx("animate",{attributeName:"r",values:"6;9;6",dur:"3s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"35",cy:"180",r:"8",className:"fill-red-500 animate-pulse",filter:"url(#glow)"}),c.jsx("circle",{cx:"165",cy:"180",r:"8",className:"fill-red-500 animate-pulse",filter:"url(#glow)"}),c.jsx("circle",{cx:"100",cy:"220",r:"10",className:"fill-red-500 animate-pulse",filter:"url(#glow)",children:c.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"1.5s",repeatCount:"indefinite"})})]}),c.jsx("div",{className:"absolute top-4 right-4 bg-slate-900/80 p-2 rounded-full border border-slate-700",children:c.jsx(OE,{className:"text-red-500 animate-pulse",size:24})})]})}),c.jsxs("div",{className:"w-full md:w-1/3 space-y-8 bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[c.jsx("h3",{className:"text-2xl font-bold border-b border-white pb-3 font-oswald",children:"Psychologique"}),c.jsxs("ul",{className:"space-y-4",children:[c.jsxs("li",{className:"flex gap-4",children:[c.jsx(At,{className:"text-red-500 w-6 h-6 mt-1 shrink-0"})," ",c.jsx("span",{className:"text-slate-200",children:"Charge mentale : Suivre 22 joueurs + ballon simultanment."})]}),c.jsxs("li",{className:"flex gap-4",children:[c.jsx(At,{className:"text-red-500 w-6 h-6 mt-1 shrink-0"})," ",c.jsx("span",{className:"text-slate-200",children:"Burnout : 60% des analystes touchs aprs 2-3 ans."})]}),c.jsxs("li",{className:"flex gap-4",children:[c.jsx(At,{className:"text-red-500 w-6 h-6 mt-1 shrink-0"})," ",c.jsx("span",{className:"text-slate-200",children:"Isolement social et anxit de performance."})]})]})]})]})]}),c.jsxs(Zr,{active:t===6,className:"bg-white text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-12 text-center font-oswald uppercase",children:"L'Impasse Professionnelle : Beaucoup d'Efforts, Peu de Retour"}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center overflow-hidden",children:[c.jsx("div",{className:"relative w-full max-w-2xl h-64 mb-16",children:c.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full h-full drop-shadow-xl overflow-visible",children:[c.jsx("rect",{x:"195",y:"100",width:"10",height:"150",rx:"2",fill:"#334155"}),c.jsx("rect",{x:"150",y:"250",width:"100",height:"10",rx:"2",fill:"#1e293b"}),c.jsxs("g",{transform:"rotate(12, 200, 100)",children:[c.jsx("rect",{x:"50",y:"95",width:"300",height:"10",rx:"2",fill:"#1e293b"}),c.jsx("circle",{cx:"200",cy:"100",r:"8",fill:"#475569",stroke:"#1e293b",strokeWidth:"2"}),c.jsx("g",{transform:"translate(60, 100)",children:c.jsxs("g",{transform:"rotate(-12)",children:[c.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"100",stroke:"#94a3b8",strokeWidth:"2"}),c.jsx("circle",{cx:"0",cy:"130",r:"45",fill:"#1e293b",className:"drop-shadow-lg"}),c.jsx("text",{x:"0",y:"125",textAnchor:"middle",fill:"#cbd5e1",fontSize:"10",letterSpacing:"2",fontWeight:"bold",children:"EFFORT"}),c.jsx("text",{x:"0",y:"145",textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"bold",children:"60h/sem"})]})}),c.jsx("g",{transform:"translate(340, 100)",children:c.jsxs("g",{transform:"rotate(-12)",children:[c.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"80",stroke:"#94a3b8",strokeWidth:"2"}),c.jsx("circle",{cx:"0",cy:"105",r:"35",fill:"#ecfdf5",stroke:"#16a34f",strokeWidth:"3",className:"drop-shadow-lg"}),c.jsx("text",{x:"0",y:"110",textAnchor:"middle",fill:"#166534",fontSize:"10",fontWeight:"bold",letterSpacing:"1",children:"RETOUR"})]})})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full max-w-5xl",children:[c.jsxs("div",{className:"border border-red-200 p-6 bg-red-50 rounded-lg",children:[c.jsx(DE,{className:"text-red-600 mb-3"}),c.jsx("h4",{className:"font-bold text-lg mb-2",children:"Salaire Rel"}),c.jsx("p",{className:"text-sm text-slate-700",children:"25-35K pour 60h/sem = 8-11/heure relle."})]}),c.jsxs("div",{className:"border border-red-200 p-6 bg-red-50 rounded-lg",children:[c.jsx(OL,{className:"text-red-600 mb-3"}),c.jsx("h4",{className:"font-bold text-lg mb-2",children:"Prcarit"}),c.jsx("p",{className:"text-sm text-slate-700",children:"CDD d'un an, licenciement facile. Pas de scurit."})]}),c.jsxs("div",{className:"border border-red-200 p-6 bg-red-50 rounded-lg",children:[c.jsx(DE,{className:"text-red-600 mb-3"}),c.jsx("h4",{className:"font-bold text-lg mb-2",children:"Investissement"}),c.jsx("p",{className:"text-sm text-slate-700",children:"Abonnements personnels, matriel propre (~1500)."})]}),c.jsxs("div",{className:"border border-red-200 p-6 bg-red-50 rounded-lg",children:[c.jsx(LL,{className:"text-red-600 mb-3"}),c.jsx("h4",{className:"font-bold text-lg mb-2",children:"Plafond"}),c.jsx("p",{className:"text-sm text-slate-700",children:"Considr comme 'technicien', pas d'volution coaching."})]})]})]})]}),c.jsxs(Zr,{active:t===7,className:"bg-white text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-8 font-oswald uppercase text-center",children:"Les 'Top 10 Killers' : Les Menaces Critiques"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-6 max-w-5xl mx-auto items-center h-full pb-10",children:[c.jsx("div",{className:"space-y-4",children:[{icon:Qp,title:"Charge de travail 60-70h",sub:"(Insoutenable)"},{icon:DE,title:"Salaire faible vs temps",sub:"(Prcarit)"},{icon:yu,title:"Fatigue mentale puisante",sub:"(Risque d'erreur)"},{icon:Xne,title:"Outils archaques et lents",sub:"(Frustration)"},{icon:Zl,title:"Manque de reconnaissance",sub:"(Invisibilit)"}].map((o,l)=>c.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-slate-50 rounded-lg transition border border-transparent hover:border-slate-100 shadow-sm",children:[c.jsx("div",{className:"text-4xl font-black text-red-600 w-12 text-center font-oswald",children:l+1}),c.jsx(o.icon,{className:"text-slate-400 w-8 h-8",strokeWidth:1.5}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:o.title}),c.jsx("div",{className:"text-red-600 text-sm font-semibold",children:o.sub})]})]},l))}),c.jsx("div",{className:"space-y-4",children:[{icon:Rne,title:"Tches rptitives abrutissantes",sub:""},{icon:OL,title:"Prcarit contractuelle",sub:""},{icon:LL,title:"Absence de formation acadmique",sub:""},{icon:RL,title:"Menace d'automatisation IA",sub:"(Obsolescence)"},{icon:Wre,title:"Isolement professionnel",sub:""}].map((o,l)=>c.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-slate-50 rounded-lg transition border border-transparent hover:border-slate-100 shadow-sm",children:[c.jsx("div",{className:"text-4xl font-black text-red-600 w-12 text-center font-oswald",children:l+6}),c.jsx(o.icon,{className:"text-slate-400 w-8 h-8",strokeWidth:1.5}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-lg",children:o.title}),o.sub&&c.jsx("div",{className:"text-red-600 text-sm font-semibold",children:o.sub})]})]},l))})]})]}),c.jsxs(Zr,{active:t===8,className:"bg-white text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-4 font-oswald uppercase",children:"Ce que la Technologie NE PEUT PAS Rsoudre"}),c.jsx("p",{className:"text-2xl text-slate-500 mb-12 font-oswald uppercase",children:"(La Liste Impossible)"}),c.jsxs("div",{className:"bg-slate-100 p-10 border-l-8 border-slate-400 shadow-inner max-w-4xl mx-auto rounded-r-lg",children:[c.jsx("h3",{className:"text-2xl font-bold mb-8 text-slate-700",children:"94 problmes (66%) sont structurels et hors de contrle."}),c.jsxs("ul",{className:"space-y-6 text-xl",children:[c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx(At,{className:"text-slate-400"})," Salaires et Contrats : Dcisions des clubs."]}),c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx(At,{className:"text-slate-400"})," Ego des Coachs et Joueurs."]}),c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx(At,{className:"text-slate-400"})," March de l'emploi : Saturation."]}),c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx(At,{className:"text-slate-400"})," Cadre Juridique : RGPD et droits TV."]}),c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx(At,{className:"text-slate-400"})," Reconnaissance Hirarchique."]})]})]}),c.jsx("div",{className:"mt-auto text-3xl font-black text-center border-t-2 border-black pt-8 max-w-3xl mx-auto",children:"Aucun logiciel ne peut changer la culture du football."})]}),c.jsxs(Zr,{active:t===9,className:"bg-white text-black",children:[c.jsxs("h2",{className:"text-4xl font-bold mb-16 font-oswald uppercase",children:["Le Chaos Adressable : Les ",c.jsx("span",{className:"text-green-600",children:"34%"})," qui Changent Tout"]}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-16 flex-1 max-w-5xl mx-auto w-full",children:[c.jsx("div",{className:"relative w-72 h-72 rounded-full",style:{background:"conic-gradient(#16a34f 0% 34%, #e2e8f0 34% 100%)"},children:c.jsxs("div",{className:"absolute inset-4 bg-white rounded-full flex flex-col items-center justify-center shadow-inner",children:[c.jsx("span",{className:"text-5xl font-bold text-green-600 font-oswald",children:"34%"}),c.jsx("span",{className:"text-sm font-bold text-center mt-2 uppercase tracking-wide px-4",children:"Problmes Solubles"})]})}),c.jsxs("div",{className:"space-y-6 w-full max-w-md",children:[c.jsxs("div",{className:"border-l-4 border-green-600 pl-6 py-2 bg-green-50 rounded-r",children:[c.jsx("h4",{className:"font-bold text-green-800 text-xl font-oswald",children:"Technique"}),c.jsx("p",{className:"text-slate-700",children:"Stabilit, cot, mobilit."})]}),c.jsxs("div",{className:"border-l-4 border-green-600 pl-6 py-2 bg-green-50 rounded-r",children:[c.jsx("h4",{className:"font-bold text-green-800 text-xl font-oswald",children:"Temporel"}),c.jsx("p",{className:"text-slate-700",children:"Automatisation, vitesse d'export."})]}),c.jsxs("div",{className:"border-l-4 border-green-600 pl-6 py-2 bg-green-50 rounded-r",children:[c.jsx("h4",{className:"font-bold text-green-800 text-xl font-oswald",children:"Cognitif"}),c.jsx("p",{className:"text-slate-700",children:"Ergonomie, rduction de charge mentale."})]}),c.jsxs("div",{className:"pt-4 text-green-700 font-bold flex items-center gap-2",children:[c.jsx($x,{size:20}),"48 problmes solubles par TACTA"]})]})]})]}),c.jsxs(Zr,{active:t===10,className:"bg-white text-black items-center justify-center text-center",children:[c.jsx("h2",{className:"text-6xl font-bold mb-12 font-oswald uppercase",children:"TACTA"}),c.jsx("h3",{className:"text-2xl font-light mb-16 uppercase tracking-widest text-slate-500",children:"Une Campagne pour le Temps et la Dignit"}),c.jsx("div",{className:"flex items-center justify-center gap-12 mb-16 relative",children:c.jsxs("div",{className:"w-64 h-40 bg-slate-200 rounded-3xl shadow-2xl skew-y-3 transform hover:scale-105 transition duration-500 relative overflow-hidden flex items-center justify-center",children:[c.jsx(PA,{size:80,className:"text-slate-700"}),c.jsx("div",{className:"absolute top-4 left-4 w-4 h-4 bg-red-500 rounded-full animate-pulse"})]})}),c.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[c.jsx("p",{className:"text-2xl text-slate-700",children:"Ce n'est pas juste un logiciel d'analyse."}),c.jsxs("p",{className:"text-2xl font-bold text-black group",children:["C'est un ",c.jsx("span",{className:"underline decoration-green-500 underline-offset-4",children:"antidote"})," aux tches chronophages."]})]}),c.jsxs("div",{className:"mt-16 text-4xl font-black font-oswald uppercase animate-bounce",children:["Moins de friction = ",c.jsx("span",{className:"text-green-600",children:"Plus de vision."})]})]}),c.jsxs(Zr,{active:t===11,className:"bg-slate-50 text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-12 text-center font-oswald uppercase",children:"La Rponse Technique"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto w-full flex-1",children:[c.jsxs("div",{className:"bg-white border-2 border-red-100 rounded-xl p-8 shadow-sm flex flex-col relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-red-400"}),c.jsx("h3",{className:"text-2xl font-bold mb-8 text-center text-red-800 uppercase font-oswald",children:"Avant"}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6 mb-8 text-slate-300",children:[c.jsx(UL,{size:80}),c.jsx(FL,{size:60})]}),c.jsxs("ul",{className:"space-y-4",children:[c.jsxs("li",{className:"flex items-center gap-3 font-medium text-red-900",children:[c.jsx(At,{className:"text-red-500 w-5 h-5"})," Tablette  800 + Setup lourd"]}),c.jsxs("li",{className:"flex items-center gap-3 font-medium text-red-900",children:[c.jsx(At,{className:"text-red-500 w-5 h-5"})," Interface complexe (200 boutons)"]}),c.jsxs("li",{className:"flex items-center gap-3 font-medium text-red-900",children:[c.jsx(At,{className:"text-red-500 w-5 h-5"})," Crashes et instabilit"]})]})]}),c.jsxs("div",{className:"bg-white border-2 border-green-100 rounded-xl p-8 shadow-lg flex flex-col relative overflow-hidden transform md:scale-105 transition",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-green-500"}),c.jsx("h3",{className:"text-2xl font-bold mb-8 text-center text-green-700 uppercase font-oswald",children:"TACTA"}),c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center gap-6 mb-8 text-green-600",children:c.jsx(PA,{size:100,strokeWidth:1.5})}),c.jsxs("ul",{className:"space-y-4",children:[c.jsxs("li",{className:"flex items-center gap-3 font-bold text-green-900",children:[c.jsx(Gd,{className:"text-green-500 w-5 h-5"})," Manette  60 (Ergonomie)"]}),c.jsxs("li",{className:"flex items-center gap-3 font-bold text-green-900",children:[c.jsx(Gd,{className:"text-green-500 w-5 h-5"})," Interface pure (15 boutons)"]}),c.jsxs("li",{className:"flex items-center gap-3 font-bold text-green-900",children:[c.jsx(Gd,{className:"text-green-500 w-5 h-5"})," SaaS Cloud / Zro install"]})]})]})]}),c.jsx("div",{className:"mt-12 text-center text-slate-500 font-mono text-sm uppercase tracking-widest",children:"Stockage Cloud inclus  Pas de 'Tooling Tax'  Automatisation"})]}),c.jsxs(Zr,{active:t===12,className:"bg-white text-black",children:[c.jsxs("h2",{className:"text-4xl font-bold mb-16 text-center font-oswald uppercase",children:["La Rponse Temporelle : ",c.jsx("span",{className:"text-green-600 bg-green-50 px-2 rounded",children:"-36%"})," de Temps"]}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-20 flex-1 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"relative w-80 h-80 drop-shadow-2xl",children:[c.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"chartGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#4ade80"}),c.jsx("stop",{offset:"100%",stopColor:"#16a34f"})]}),c.jsx("filter",{id:"shadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:c.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodOpacity:"0.3"})})]}),c.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"#f1f5f9",strokeWidth:"8",strokeLinecap:"round"}),c.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"url(#chartGradient)",strokeWidth:"8",strokeDasharray:"263.89",strokeDashoffset:263.89*.64,strokeLinecap:"round",filter:"url(#shadow)"})]}),c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[c.jsx("span",{className:"text-5xl font-bold text-green-600 font-oswald",children:"-36%"}),c.jsx("span",{className:"text-xs text-slate-400 mt-2 uppercase",children:"Temps de travail"})]}),c.jsx("div",{className:"absolute -top-4 -right-4 bg-slate-100 text-slate-600 px-3 py-1 text-xs font-bold rounded-full border border-slate-200",children:"55h Avant"}),c.jsx("div",{className:"absolute bottom-4 -left-4 bg-green-100 text-green-800 px-3 py-1 text-xs font-bold rounded-full border border-green-200",children:"35h Aprs"})]}),c.jsxs("div",{className:"space-y-8 max-w-lg",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xl font-bold text-green-700 flex items-center gap-2 mb-2",children:[c.jsx($x,{size:24})," Un mtier  35h"]}),c.jsx("p",{className:"text-slate-600 ml-8",children:'Passage de semaines "Survivor"  des semaines humaines.'})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xl font-bold text-green-700 flex items-center gap-2 mb-2",children:[c.jsx($x,{size:24})," Post-Match / 2"]}),c.jsx("p",{className:"text-slate-600 ml-8",children:"De 10h  5h d'analyse. Rentrez dormir."})]}),c.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-100",children:[c.jsx("h4",{className:"font-bold text-slate-900 mb-3 uppercase text-sm tracking-wide",children:"Comment ?"}),c.jsxs("ul",{className:"space-y-2 text-slate-700 text-sm",children:[c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{children:"1."})," Automatisation des tches rptitives."]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{children:"2."})," Codage Live = Dfinitif (Fin du double travail)."]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{children:"3."})," Exports instantans."]})]})]})]})]})]}),c.jsxs(Zr,{active:t===13,className:"bg-white text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-12 text-center font-oswald uppercase",children:"La Rponse Physique et Cognitive"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 max-w-6xl mx-auto flex-1 h-full items-center",children:[c.jsxs("div",{className:"flex flex-col items-center text-center p-8 bg-slate-50 rounded-2xl",children:[c.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-600",children:c.jsx(OE,{size:40})}),c.jsx("h3",{className:"font-bold text-2xl mb-4 font-oswald uppercase",children:"Sant (Physique)"}),c.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:"L'ergonomie de la manette permet de travailler le dos droit, les yeux sur le terrain, pas sur un cran tactile."}),c.jsx("div",{className:"text-sm font-bold text-green-700 bg-green-100 px-4 py-2 rounded-full",children:"Adieu Canal Carpien"})]}),c.jsxs("div",{className:"flex flex-col items-center text-center p-8 bg-slate-50 rounded-2xl",children:[c.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6 text-blue-600",children:c.jsx(yu,{size:40})}),c.jsx("h3",{className:"font-bold text-2xl mb-4 font-oswald uppercase",children:"Mental (Cognitif)"}),c.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:`L'automatisation gre le "bruit". Vous ne dcidez plus "o cliquer", mais "quoi taguer". Charge mentale -50%.`}),c.jsx("div",{className:"text-sm font-bold text-blue-700 bg-blue-100 px-4 py-2 rounded-full",children:"Lucidit Prserve"})]})]})]}),c.jsxs(Zr,{active:t===14,className:"bg-white text-black items-center justify-center",children:[c.jsx("h2",{className:"text-4xl font-bold mb-4 font-oswald uppercase text-slate-800",children:"La Vraie Valeur"}),c.jsx("div",{className:"text-[12rem] leading-none font-black text-green-600 mb-8 drop-shadow-2xl font-oswald",children:"20h"}),c.jsx("p",{className:"text-2xl mb-16 text-slate-500 font-light",children:"Libres par semaine."}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 w-full max-w-5xl",children:[{icon:ZH,text:"Se former et apprendre"},{icon:wne,text:"Parler aux joueurs"},{icon:OE,text:"Dormir et rcuprer"},{icon:nne,text:"Stratgie > Mcanique"}].map((o,l)=>c.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-slate-50 rounded-xl hover:bg-slate-100 transition duration-300",children:[c.jsx(o.icon,{className:"text-green-600 w-10 h-10"}),c.jsx("p",{className:"font-bold text-center text-slate-700",children:o.text})]},l))})]}),c.jsxs(Zr,{active:t===15,className:"bg-white text-black",children:[c.jsx("h2",{className:"text-4xl font-bold mb-16 text-center font-oswald uppercase",children:"Scuriser l'Avenir face  l'IA"}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12 flex-1 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex flex-col items-center opacity-40 hover:opacity-100 transition duration-500 group",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 uppercase text-slate-500",children:"L'Excutant"}),c.jsx(RL,{size:80,className:"text-red-500 mb-4"}),c.jsx("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs font-bold mb-4",children:"Remplac dans 3 ans"}),c.jsx("p",{className:"text-center text-sm text-slate-500 max-w-[200px]",children:"Celui qui clique manuellement pour taguer des passes."})]}),c.jsx(ql,{size:40,className:"text-slate-300 hidden md:block"}),c.jsxs("div",{className:"flex flex-col items-center transform scale-110",children:[c.jsx("h3",{className:"text-2xl font-bold mb-4 uppercase text-green-700",children:"Le Stratge"}),c.jsx("div",{className:"w-40 h-40 bg-green-50 border-4 border-green-500 rounded-full flex items-center justify-center shadow-2xl shadow-green-100 mb-6",children:c.jsx(Zl,{size:60,className:"text-green-600"})}),c.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-bold mb-4",children:"Futur Assur"}),c.jsx("p",{className:"text-center text-sm text-slate-700 max-w-[250px] font-bold",children:"Celui qui interprte la donne et conseille le coach."})]})]}),c.jsx("div",{className:"mt-16 bg-slate-100 p-6 rounded-lg max-w-2xl mx-auto text-center",children:c.jsxs("p",{className:"text-lg text-slate-700",children:[c.jsx("span",{className:"font-bold",children:"Transition :"})," Ne soyez pas celui qui clique 800 fois. Soyez celui qui gagne le match."]})})]}),c.jsxs(Zr,{active:t===16,className:"bg-black text-white items-center justify-center text-center",children:[c.jsx("div",{className:"mb-8 w-20 h-20 bg-green-600 rounded flex items-center justify-center font-bold text-4xl mx-auto",children:"T"}),c.jsx("h2",{className:"text-5xl md:text-7xl font-bold mb-8 font-oswald uppercase tracking-tight",children:"TACTA"}),c.jsx("h3",{className:"text-2xl md:text-4xl font-light mb-16 text-slate-400",children:"Le Pont vers une Carrire Durable."}),c.jsx("button",{onClick:()=>e(0),className:"px-8 py-4 bg-white text-black font-bold uppercase tracking-widest hover:bg-green-500 hover:text-white transition duration-300 rounded",children:"Recommencer"})]})]})]})},EZe=new voe,SZe=()=>c.jsx(boe,{client:EZe,children:c.jsxs(d6,{children:[c.jsx(N8,{}),c.jsx(P8,{}),c.jsx(Ale,{children:c.jsx(ace,{children:c.jsx(Lce,{children:c.jsx(fze,{children:c.jsx(oce,{children:c.jsx(_ce,{children:c.jsxs(cle,{children:[c.jsx(Qa,{path:"/audit",element:c.jsx(wZe,{})}),c.jsx(Qa,{path:"/login",element:c.jsx(jXe,{})}),c.jsx(Qa,{path:"/",element:c.jsx(ih,{allowedRoles:["operational_analyst","tactical_analyst","quality_controller","admin","early_tester","lead_analyst","live_tagger","eye_spotter","logger"],children:c.jsx(vze,{})})}),c.jsx(Qa,{path:"/admin",element:c.jsx(ih,{allowedRoles:["admin"],children:c.jsx(bZe,{})})}),c.jsx(Qa,{path:"/analytics",element:c.jsx(ih,{allowedRoles:["tactical_analyst","admin"],children:c.jsx(_ze,{})})}),c.jsx(Qa,{path:"/analysis/kpi",element:c.jsx(ih,{allowedRoles:["tactical_analyst","admin"],children:c.jsx(Pze,{children:c.jsx(TXe,{})})})}),c.jsx(Qa,{path:"/monitoring",element:c.jsx(ih,{allowedRoles:["quality_controller","admin"],children:c.jsx(PXe,{})})}),c.jsx(Qa,{path:"*",element:c.jsx(RXe,{})})]})})})})})})})]})});class CZe extends E.Component{constructor(){super(...arguments);ze(this,"state",{hasError:!1,error:null,errorInfo:null});ze(this,"handleReset",()=>{localStorage.removeItem("tacta_user"),localStorage.removeItem("tacta_token"),window.location.href="/login"})}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("Uncaught error:",r,n),this.setState({errorInfo:n})}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4 animate-in fade-in duration-300",children:c.jsxs("div",{className:"max-w-md w-full bg-card border border-destructive/20 rounded-xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"p-6 flex flex-col items-center text-center space-y-4",children:[c.jsx("div",{className:"h-16 w-16 bg-destructive/10 rounded-full flex items-center justify-center mb-2",children:c.jsx(mo,{className:"h-8 w-8 text-destructive"})}),c.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Something went wrong"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"The application encountered an unexpected error. We've logged this issue."}),this.state.error&&c.jsxs("div",{className:"w-full bg-muted/50 p-3 rounded-md overflow-auto text-xs font-mono text-left max-h-32 border border-border/50",children:[c.jsx("p",{className:"text-destructive font-semibold mb-1",children:this.state.error.toString()}),this.state.errorInfo&&c.jsx("pre",{className:"text-muted-foreground opacity-70 whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]}),c.jsxs("div",{className:"flex w-full gap-2 pt-2",children:[c.jsxs(te,{variant:"outline",className:"flex-1 gap-2 border-primary/20 hover:bg-primary/5",onClick:()=>window.location.reload(),children:[c.jsx(Xl,{className:"h-4 w-4"}),"Reload Page"]}),c.jsxs(te,{variant:"default",className:"flex-1 gap-2",onClick:this.handleReset,children:[c.jsx(fne,{className:"h-4 w-4"}),"Reset & Login"]})]})]}),c.jsxs("div",{className:"bg-muted/30 p-3 border-t border-border/50 text-[10px] text-center text-muted-foreground",children:["Error ID: ",Date.now().toString(36),"  Session: ",localStorage.getItem("tacta_user")?"Active":"Guest"]})]})}):this.props.children}}wH(document.getElementById("root")).render(c.jsx(CZe,{children:c.jsx($ce,{children:c.jsx(SZe,{})})}));
